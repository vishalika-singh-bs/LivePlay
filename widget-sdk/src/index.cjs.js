/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js":
/*!****************************************************************!*\
  !*** ./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js ***!
  \****************************************************************/
/***/ (function(module) {

eval("/**\n * AgoraWebSDK_N-v4.22.0-0-g8569241d-dirty Copyright AgoraInc.\n */\n\n!function(e,t){ true?module.exports=t():0}(this,(function(){\"use strict\";function e(e,t){return t.forEach((function(t){t&&\"string\"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if(\"default\"!==i&&!(i in e)){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(e)}var t=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var n=function(e){try{return!!e()}catch(e){return!0}},r=!n((function(){var e=function(){}.bind();return\"function\"!=typeof e||e.hasOwnProperty(\"prototype\")})),o=r,s=Function.prototype,a=s.call,c=o&&s.bind.bind(a,a),d=o?c:function(e){return function(){return a.apply(e,arguments)}},l=d({}.isPrototypeOf),u=function(e){return e&&e.Math==Math&&e},h=u(\"object\"==typeof globalThis&&globalThis)||u(\"object\"==typeof window&&window)||u(\"object\"==typeof self&&self)||u(\"object\"==typeof t&&t)||function(){return this}()||t||Function(\"return this\")(),p=r,_=Function.prototype,E=_.apply,f=_.call,m=\"object\"==typeof Reflect&&Reflect.apply||(p?f.bind(E):function(){return f.apply(E,arguments)}),T=d,S=T({}.toString),g=T(\"\".slice),R=function(e){return g(S(e),8,-1)},C=R,I=d,v=function(e){if(\"Function\"===C(e))return I(e)},y=\"object\"==typeof document&&document.all,A={all:y,IS_HTMLDDA:void 0===y&&void 0!==y},b=A.all,w=A.IS_HTMLDDA?function(e){return\"function\"==typeof e||e===b}:function(e){return\"function\"==typeof e},O={},N=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=r,P=Function.prototype.call,L=D?P.bind(P):function(){return P.apply(P,arguments)},k={},M={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,x=U&&!M.call({1:2},1);k.f=x?function(e){var t=U(this,e);return!!t&&t.enumerable}:M;var V,F,B=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},j=n,G=R,W=Object,H=d(\"\".split),K=j((function(){return!W(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==G(e)?H(e,\"\"):W(e)}:W,Y=function(e){return null==e},q=Y,z=TypeError,J=function(e){if(q(e))throw z(\"Can't call method on \"+e);return e},X=K,Q=J,Z=function(e){return X(Q(e))},$=w,ee=A.all,te=A.IS_HTMLDDA?function(e){return\"object\"==typeof e?null!==e:$(e)||e===ee}:function(e){return\"object\"==typeof e?null!==e:$(e)},ie={},ne=ie,re=h,oe=w,se=function(e){return oe(e)?e:void 0},ae=function(e,t){return arguments.length<2?se(ne[e])||se(re[e]):ne[e]&&ne[e][t]||re[e]&&re[e][t]},ce=\"undefined\"!=typeof navigator&&String(navigator.userAgent)||\"\",de=h,le=ce,ue=de.process,he=de.Deno,pe=ue&&ue.versions||he&&he.version,_e=pe&&pe.v8;_e&&(F=(V=_e.split(\".\"))[0]>0&&V[0]<4?1:+(V[0]+V[1])),!F&&le&&(!(V=le.match(/Edge\\/(\\d+)/))||V[1]>=74)&&(V=le.match(/Chrome\\/(\\d+)/))&&(F=+V[1]);var Ee=F,fe=Ee,me=n,Te=h.String,Se=!!Object.getOwnPropertySymbols&&!me((function(){var e=Symbol();return!Te(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&fe&&fe<41})),ge=Se&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator,Re=ae,Ce=w,Ie=l,ve=Object,ye=ge?function(e){return\"symbol\"==typeof e}:function(e){var t=Re(\"Symbol\");return Ce(t)&&Ie(t.prototype,ve(e))},Ae=String,be=function(e){try{return Ae(e)}catch(e){return\"Object\"}},we=w,Oe=be,Ne=TypeError,De=function(e){if(we(e))return e;throw Ne(Oe(e)+\" is not a function\")},Pe=De,Le=Y,ke=function(e,t){var i=e[t];return Le(i)?void 0:Pe(i)},Me=L,Ue=w,xe=te,Ve=TypeError,Fe={exports:{}},Be=h,je=Object.defineProperty,Ge=function(e,t){try{je(Be,e,{value:t,configurable:!0,writable:!0})}catch(i){Be[e]=t}return t},We=\"__core-js_shared__\",He=h[We]||Ge(We,{}),Ke=He;(Fe.exports=function(e,t){return Ke[e]||(Ke[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.31.1\",mode:\"pure\",copyright:\"Â© 2014-2023 Denis Pushkarev (zloirock.ru)\",license:\"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE\",source:\"https://github.com/zloirock/core-js\"});var Ye=Fe.exports,qe=J,ze=Object,Je=function(e){return ze(qe(e))},Xe=Je,Qe=d({}.hasOwnProperty),Ze=Object.hasOwn||function(e,t){return Qe(Xe(e),t)},$e=d,et=0,tt=Math.random(),it=$e(1..toString),nt=function(e){return\"Symbol(\"+(void 0===e?\"\":e)+\")_\"+it(++et+tt,36)},rt=Ye,ot=Ze,st=nt,at=Se,ct=ge,dt=h.Symbol,lt=rt(\"wks\"),ut=ct?dt.for||dt:dt&&dt.withoutSetter||st,ht=function(e){return ot(lt,e)||(lt[e]=at&&ot(dt,e)?dt[e]:ut(\"Symbol.\"+e)),lt[e]},pt=L,_t=te,Et=ye,ft=ke,mt=function(e,t){var i,n;if(\"string\"===t&&Ue(i=e.toString)&&!xe(n=Me(i,e)))return n;if(Ue(i=e.valueOf)&&!xe(n=Me(i,e)))return n;if(\"string\"!==t&&Ue(i=e.toString)&&!xe(n=Me(i,e)))return n;throw Ve(\"Can't convert object to primitive value\")},Tt=TypeError,St=ht(\"toPrimitive\"),gt=function(e,t){if(!_t(e)||Et(e))return e;var i,n=ft(e,St);if(n){if(void 0===t&&(t=\"default\"),i=pt(n,e,t),!_t(i)||Et(i))return i;throw Tt(\"Can't convert object to primitive value\")}return void 0===t&&(t=\"number\"),mt(e,t)},Rt=ye,Ct=function(e){var t=gt(e,\"string\");return Rt(t)?t:t+\"\"},It=te,vt=h.document,yt=It(vt)&&It(vt.createElement),At=function(e){return yt?vt.createElement(e):{}},bt=At,wt=!N&&!n((function(){return 7!=Object.defineProperty(bt(\"div\"),\"a\",{get:function(){return 7}}).a})),Ot=N,Nt=L,Dt=k,Pt=B,Lt=Z,kt=Ct,Mt=Ze,Ut=wt,xt=Object.getOwnPropertyDescriptor;O.f=Ot?xt:function(e,t){if(e=Lt(e),t=kt(t),Ut)try{return xt(e,t)}catch(e){}if(Mt(e,t))return Pt(!Nt(Dt.f,e,t),e[t])};var Vt=n,Ft=w,Bt=/#|\\.prototype\\./,jt=function(e,t){var i=Wt[Gt(e)];return i==Kt||i!=Ht&&(Ft(t)?Vt(t):!!t)},Gt=jt.normalize=function(e){return String(e).replace(Bt,\".\").toLowerCase()},Wt=jt.data={},Ht=jt.NATIVE=\"N\",Kt=jt.POLYFILL=\"P\",Yt=jt,qt=De,zt=r,Jt=v(v.bind),Xt=function(e,t){return qt(e),void 0===t?e:zt?Jt(e,t):function(){return e.apply(t,arguments)}},Qt={},Zt=N&&n((function(){return 42!=Object.defineProperty((function(){}),\"prototype\",{value:42,writable:!1}).prototype})),$t=te,ei=String,ti=TypeError,ii=function(e){if($t(e))return e;throw ti(ei(e)+\" is not an object\")},ni=N,ri=wt,oi=Zt,si=ii,ai=Ct,ci=TypeError,di=Object.defineProperty,li=Object.getOwnPropertyDescriptor,ui=\"enumerable\",hi=\"configurable\",pi=\"writable\";Qt.f=ni?oi?function(e,t,i){if(si(e),t=ai(t),si(i),\"function\"==typeof e&&\"prototype\"===t&&\"value\"in i&&pi in i&&!i[pi]){var n=li(e,t);n&&n[pi]&&(e[t]=i.value,i={configurable:hi in i?i[hi]:n[hi],enumerable:ui in i?i[ui]:n[ui],writable:!1})}return di(e,t,i)}:di:function(e,t,i){if(si(e),t=ai(t),si(i),ri)try{return di(e,t,i)}catch(e){}if(\"get\"in i||\"set\"in i)throw ci(\"Accessors not supported\");return\"value\"in i&&(e[t]=i.value),e};var _i=Qt,Ei=B,fi=N?function(e,t,i){return _i.f(e,t,Ei(1,i))}:function(e,t,i){return e[t]=i,e},mi=h,Ti=m,Si=v,gi=w,Ri=O.f,Ci=Yt,Ii=ie,vi=Xt,yi=fi,Ai=Ze,bi=function(e){var t=function(i,n,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,n)}return new e(i,n,r)}return Ti(e,this,arguments)};return t.prototype=e.prototype,t},wi=function(e,t){var i,n,r,o,s,a,c,d,l,u=e.target,h=e.global,p=e.stat,_=e.proto,E=h?mi:p?mi[u]:(mi[u]||{}).prototype,f=h?Ii:Ii[u]||yi(Ii,u,{})[u],m=f.prototype;for(o in t)n=!(i=Ci(h?o:u+(p?\".\":\"#\")+o,e.forced))&&E&&Ai(E,o),a=f[o],n&&(c=e.dontCallGetSet?(l=Ri(E,o))&&l.value:E[o]),s=n&&c?c:t[o],n&&typeof a==typeof s||(d=e.bind&&n?vi(s,mi):e.wrap&&n?bi(s):_&&gi(s)?Si(s):s,(e.sham||s&&s.sham||a&&a.sham)&&yi(d,\"sham\",!0),yi(f,o,d),_&&(Ai(Ii,r=u+\"Prototype\")||yi(Ii,r,{}),yi(Ii[r],o,s),e.real&&m&&(i||!m[o])&&yi(m,o,s)))},Oi=Math.ceil,Ni=Math.floor,Di=Math.trunc||function(e){var t=+e;return(t>0?Ni:Oi)(t)},Pi=Di,Li=function(e){var t=+e;return t!=t||0===t?0:Pi(t)},ki=Li,Mi=Math.max,Ui=Math.min,xi=function(e,t){var i=ki(e);return i<0?Mi(i+t,0):Ui(i,t)},Vi=Li,Fi=Math.min,Bi=function(e){return e>0?Fi(Vi(e),9007199254740991):0},ji=Bi,Gi=function(e){return ji(e.length)},Wi=Z,Hi=xi,Ki=Gi,Yi=function(e){return function(t,i,n){var r,o=Wi(t),s=Ki(o),a=Hi(n,s);if(e&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},qi={includes:Yi(!0),indexOf:Yi(!1)},zi=qi.includes;wi({target:\"Array\",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(e){return zi(this,e,arguments.length>1?arguments[1]:void 0)}});var Ji=ie,Xi=function(e){return Ji[e+\"Prototype\"]},Qi=Xi(\"Array\").includes,Zi=te,$i=R,en=ht(\"match\"),tn=function(e){var t;return Zi(e)&&(void 0!==(t=e[en])?!!t:\"RegExp\"==$i(e))},nn=tn,rn=TypeError,on={};on[ht(\"toStringTag\")]=\"z\";var sn=\"[object z]\"===String(on),an=sn,cn=w,dn=R,ln=ht(\"toStringTag\"),un=Object,hn=\"Arguments\"==dn(function(){return arguments}()),pn=an?dn:function(e){var t,i,n;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=un(e),ln))?i:hn?dn(t):\"Object\"==(n=dn(t))&&cn(t.callee)?\"Arguments\":n},_n=pn,En=String,fn=function(e){if(\"Symbol\"===_n(e))throw TypeError(\"Cannot convert a Symbol value to a string\");return En(e)},mn=ht(\"match\"),Tn=wi,Sn=function(e){if(nn(e))throw rn(\"The method doesn't accept regular expressions\");return e},gn=J,Rn=fn,Cn=function(e){var t=/./;try{\"/./\"[e](t)}catch(i){try{return t[mn]=!1,\"/./\"[e](t)}catch(e){}}return!1},In=d(\"\".indexOf);Tn({target:\"String\",proto:!0,forced:!Cn(\"includes\")},{includes:function(e){return!!~In(Rn(gn(this)),Rn(Sn(e)),arguments.length>1?arguments[1]:void 0)}});var vn=Xi(\"String\").includes,yn=l,An=Qi,bn=vn,wn=Array.prototype,On=String.prototype,Nn=function(e){var t=e.includes;return e===wn||yn(wn,e)&&t===wn.includes?An:\"string\"==typeof e||e===On||yn(On,e)&&t===On.includes?bn:t},Dn=i(Nn),Pn=De,Ln=Je,kn=K,Mn=Gi,Un=TypeError,xn=function(e){return function(t,i,n,r){Pn(i);var o=Ln(t),s=kn(o),a=Mn(o),c=e?a-1:0,d=e?-1:1;if(n<2)for(;;){if(c in s){r=s[c],c+=d;break}if(c+=d,e?c<0:a<=c)throw Un(\"Reduce of empty array with no initial value\")}for(;e?c>=0:a>c;c+=d)c in s&&(r=i(r,s[c],c,o));return r}},Vn={left:xn(!1),right:xn(!0)},Fn=n,Bn=function(e,t){var i=[][e];return!!i&&Fn((function(){i.call(null,t||function(){return 1},1)}))},jn=\"undefined\"!=typeof process&&\"process\"==R(process),Gn=Vn.left;wi({target:\"Array\",proto:!0,forced:!jn&&Ee>79&&Ee<83||!Bn(\"reduce\")},{reduce:function(e){var t=arguments.length;return Gn(this,e,t,t>1?arguments[1]:void 0)}});var Wn=Xi(\"Array\").reduce,Hn=l,Kn=Wn,Yn=Array.prototype,qn=function(e){var t=e.reduce;return e===Yn||Hn(Yn,e)&&t===Yn.reduce?Kn:t},zn=qn,Jn=i(zn);let Xn=!0,Qn=!0;function Zn(e,t,i){const n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function $n(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),r.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(i))return o.apply(this,arguments);const n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,\"on\"+t,{get(){return this[\"_on\"+t]},set(e){this[\"_on\"+t]&&(this.removeEventListener(t,this[\"_on\"+t]),delete this[\"_on\"+t]),e&&this.addEventListener(t,this[\"_on\"+t]=e)},enumerable:!0,configurable:!0})}function er(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+typeof e+\". Please use a boolean.\"):(Xn=e,e?\"adapter.js logging disabled\":\"adapter.js logging enabled\")}function tr(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+typeof e+\". Please use a boolean.\"):(Qn=!e,\"adapter.js deprecation warnings \"+(e?\"disabled\":\"enabled\"))}function ir(){if(\"object\"==typeof window){if(Xn)return;\"undefined\"!=typeof console&&\"function\"==typeof console.log&&console.log.apply(console,arguments)}}function nr(e,t){Qn&&console.warn(e+\" is deprecated, please use \"+t+\" instead.\")}function rr(e){return\"[object Object]\"===Object.prototype.toString.call(e)}function or(e){var t;return rr(e)?Jn(t=Object.keys(e)).call(t,(function(t,i){const n=rr(e[i]),r=n?or(e[i]):e[i],o=n&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[i]:r})}),{}):e}function sr(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((n=>{n.endsWith(\"Id\")?sr(e,e.get(t[n]),i):n.endsWith(\"Ids\")&&t[n].forEach((t=>{sr(e,e.get(t),i)}))})))}function ar(e,t,i){const n=i?\"outbound-rtp\":\"inbound-rtp\",r=new Map;if(null===t)return r;const o=[];return e.forEach((e=>{\"track\"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((i=>{i.type===n&&i.trackId===t.id&&sr(e,i,r)}))})),r}var cr=nt,dr=Ye(\"keys\"),lr=function(e){return dr[e]||(dr[e]=cr(e))},ur=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),hr=Ze,pr=w,_r=Je,Er=ur,fr=lr(\"IE_PROTO\"),mr=Object,Tr=mr.prototype,Sr=Er?mr.getPrototypeOf:function(e){var t=_r(e);if(hr(t,fr))return t[fr];var i=t.constructor;return pr(i)&&t instanceof i?i.prototype:t instanceof mr?Tr:null},gr=d,Rr=De,Cr=w,Ir=String,vr=TypeError,yr=function(e,t,i){try{return gr(Rr(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(e){}},Ar=ii,br=function(e){if(\"object\"==typeof e||Cr(e))return e;throw vr(\"Can't set \"+Ir(e)+\" as a prototype\")},wr=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,i={};try{(e=yr(Object.prototype,\"__proto__\",\"set\"))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return Ar(i),br(n),t?e(i,n):i.__proto__=n,i}}():void 0),Or={},Nr={},Dr=Ze,Pr=Z,Lr=qi.indexOf,kr=Nr,Mr=d([].push),Ur=function(e,t){var i,n=Pr(e),r=0,o=[];for(i in n)!Dr(kr,i)&&Dr(n,i)&&Mr(o,i);for(;t.length>r;)Dr(n,i=t[r++])&&(~Lr(o,i)||Mr(o,i));return o},xr=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],Vr=Ur,Fr=xr.concat(\"length\",\"prototype\");Or.f=Object.getOwnPropertyNames||function(e){return Vr(e,Fr)};var Br={};Br.f=Object.getOwnPropertySymbols;var jr=ae,Gr=Or,Wr=Br,Hr=ii,Kr=d([].concat),Yr=jr(\"Reflect\",\"ownKeys\")||function(e){var t=Gr.f(Hr(e)),i=Wr.f;return i?Kr(t,i(e)):t},qr=Ze,zr=Yr,Jr=O,Xr=Qt,Qr={},Zr=Ur,$r=xr,eo=Object.keys||function(e){return Zr(e,$r)},to=N,io=Zt,no=Qt,ro=ii,oo=Z,so=eo;Qr.f=to&&!io?Object.defineProperties:function(e,t){ro(e);for(var i,n=oo(t),r=so(t),o=r.length,s=0;o>s;)no.f(e,i=r[s++],n[i]);return e};var ao,co=ae(\"document\",\"documentElement\"),lo=ii,uo=Qr,ho=xr,po=Nr,_o=co,Eo=At,fo=\"prototype\",mo=\"script\",To=lr(\"IE_PROTO\"),So=function(){},go=function(e){return\"<\"+mo+\">\"+e+\"</\"+mo+\">\"},Ro=function(e){e.write(go(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t},Co=function(){try{ao=new ActiveXObject(\"htmlfile\")}catch(e){}var e,t,i;Co=\"undefined\"!=typeof document?document.domain&&ao?Ro(ao):(t=Eo(\"iframe\"),i=\"java\"+mo+\":\",t.style.display=\"none\",_o.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(go(\"document.F=Object\")),e.close(),e.F):Ro(ao);for(var n=ho.length;n--;)delete Co[fo][ho[n]];return Co()};po[To]=!0;var Io=Object.create||function(e,t){var i;return null!==e?(So[fo]=lo(e),i=new So,So[fo]=null,i[To]=e):i=Co(),void 0===t?i:uo.f(i,t)},vo=te,yo=fi,Ao=Error,bo=d(\"\".replace),wo=String(Ao(\"zxcasd\").stack),Oo=/\\n\\s*at [^:]*:[^\\n]*/,No=Oo.test(wo),Do=B,Po=!n((function(){var e=Error(\"a\");return!(\"stack\"in e)||(Object.defineProperty(e,\"stack\",Do(1,7)),7!==e.stack)})),Lo=fi,ko=function(e,t){if(No&&\"string\"==typeof e&&!Ao.prepareStackTrace)for(;t--;)e=bo(e,Oo,\"\");return e},Mo=Po,Uo=Error.captureStackTrace,xo={},Vo=xo,Fo=ht(\"iterator\"),Bo=Array.prototype,jo=function(e){return void 0!==e&&(Vo.Array===e||Bo[Fo]===e)},Go=pn,Wo=ke,Ho=Y,Ko=xo,Yo=ht(\"iterator\"),qo=function(e){if(!Ho(e))return Wo(e,Yo)||Wo(e,\"@@iterator\")||Ko[Go(e)]},zo=L,Jo=De,Xo=ii,Qo=be,Zo=qo,$o=TypeError,es=function(e,t){var i=arguments.length<2?Zo(e):t;if(Jo(i))return Xo(zo(i,e));throw $o(Qo(e)+\" is not iterable\")},ts=L,is=ii,ns=ke,rs=function(e,t,i){var n,r;is(e);try{if(!(n=ns(e,\"return\"))){if(\"throw\"===t)throw i;return i}n=ts(n,e)}catch(e){r=!0,n=e}if(\"throw\"===t)throw i;if(r)throw n;return is(n),i},os=Xt,ss=L,as=ii,cs=be,ds=jo,ls=Gi,us=l,hs=es,ps=qo,_s=rs,Es=TypeError,fs=function(e,t){this.stopped=e,this.result=t},ms=fs.prototype,Ts=function(e,t,i){var n,r,o,s,a,c,d,l=i&&i.that,u=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_RECORD),p=!(!i||!i.IS_ITERATOR),_=!(!i||!i.INTERRUPTED),E=os(t,l),f=function(e){return n&&_s(n,\"normal\",e),new fs(!0,e)},m=function(e){return u?(as(e),_?E(e[0],e[1],f):E(e[0],e[1])):_?E(e,f):E(e)};if(h)n=e.iterator;else if(p)n=e;else{if(!(r=ps(e)))throw Es(cs(e)+\" is not iterable\");if(ds(r)){for(o=0,s=ls(e);s>o;o++)if((a=m(e[o]))&&us(ms,a))return a;return new fs(!1)}n=hs(e,r)}for(c=h?e.next:n.next;!(d=ss(c,n)).done;){try{a=m(d.value)}catch(e){_s(n,\"throw\",e)}if(\"object\"==typeof a&&a&&us(ms,a))return a}return new fs(!1)},Ss=fn,gs=wi,Rs=l,Cs=Sr,Is=wr,vs=function(e,t,i){for(var n=zr(t),r=Xr.f,o=Jr.f,s=0;s<n.length;s++){var a=n[s];qr(e,a)||i&&qr(i,a)||r(e,a,o(t,a))}},ys=Io,As=fi,bs=B,ws=function(e,t){vo(t)&&\"cause\"in t&&yo(e,\"cause\",t.cause)},Os=function(e,t,i,n){Mo&&(Uo?Uo(e,t):Lo(e,\"stack\",ko(i,n)))},Ns=Ts,Ds=function(e,t){return void 0===e?arguments.length<2?\"\":t:Ss(e)},Ps=ht(\"toStringTag\"),Ls=Error,ks=[].push,Ms=function(e,t){var i,n=Rs(Us,this);Is?i=Is(Ls(),n?Cs(this):Us):(i=n?this:ys(Us),As(i,Ps,\"Error\")),void 0!==t&&As(i,\"message\",Ds(t)),Os(i,Ms,i.stack,1),arguments.length>2&&ws(i,arguments[2]);var r=[];return Ns(e,ks,{that:r}),As(i,\"errors\",r),i};Is?Is(Ms,Ls):vs(Ms,Ls,{name:!0});var Us=Ms.prototype=ys(Ls.prototype,{constructor:bs(1,Ms),message:bs(1,\"\"),name:bs(1,\"AggregateError\")});gs({global:!0,constructor:!0,arity:2},{AggregateError:Ms});var xs,Vs,Fs,Bs=w,js=h.WeakMap,Gs=Bs(js)&&/native code/.test(String(js)),Ws=h,Hs=te,Ks=fi,Ys=Ze,qs=He,zs=lr,Js=Nr,Xs=\"Object already initialized\",Qs=Ws.TypeError,Zs=Ws.WeakMap;if(Gs||qs.state){var $s=qs.state||(qs.state=new Zs);$s.get=$s.get,$s.has=$s.has,$s.set=$s.set,xs=function(e,t){if($s.has(e))throw Qs(Xs);return t.facade=e,$s.set(e,t),t},Vs=function(e){return $s.get(e)||{}},Fs=function(e){return $s.has(e)}}else{var ea=zs(\"state\");Js[ea]=!0,xs=function(e,t){if(Ys(e,ea))throw Qs(Xs);return t.facade=e,Ks(e,ea,t),t},Vs=function(e){return Ys(e,ea)?e[ea]:{}},Fs=function(e){return Ys(e,ea)}}var ta,ia,na,ra={set:xs,get:Vs,has:Fs,enforce:function(e){return Fs(e)?Vs(e):xs(e,{})},getterFor:function(e){return function(t){var i;if(!Hs(t)||(i=Vs(t)).type!==e)throw Qs(\"Incompatible receiver, \"+e+\" required\");return i}}},oa=N,sa=Ze,aa=Function.prototype,ca=oa&&Object.getOwnPropertyDescriptor,da=sa(aa,\"name\"),la={EXISTS:da,PROPER:da&&\"something\"===function(){}.name,CONFIGURABLE:da&&(!oa||oa&&ca(aa,\"name\").configurable)},ua=fi,ha=function(e,t,i,n){return n&&n.enumerable?e[t]=i:ua(e,t,i),e},pa=n,_a=w,Ea=te,fa=Io,ma=Sr,Ta=ha,Sa=ht(\"iterator\"),ga=!1;[].keys&&(\"next\"in(na=[].keys())?(ia=ma(ma(na)))!==Object.prototype&&(ta=ia):ga=!0);var Ra=!Ea(ta)||pa((function(){var e={};return ta[Sa].call(e)!==e}));_a((ta=Ra?{}:fa(ta))[Sa])||Ta(ta,Sa,(function(){return this}));var Ca={IteratorPrototype:ta,BUGGY_SAFARI_ITERATORS:ga},Ia=pn,va=sn?{}.toString:function(){return\"[object \"+Ia(this)+\"]\"},ya=sn,Aa=Qt.f,ba=fi,wa=Ze,Oa=va,Na=ht(\"toStringTag\"),Da=function(e,t,i,n){if(e){var r=i?e:e.prototype;wa(r,Na)||Aa(r,Na,{configurable:!0,value:t}),n&&!ya&&ba(r,\"toString\",Oa)}},Pa=Ca.IteratorPrototype,La=Io,ka=B,Ma=Da,Ua=xo,xa=function(){return this},Va=function(e,t,i,n){var r=t+\" Iterator\";return e.prototype=La(Pa,{next:ka(+!n,i)}),Ma(e,r,!1,!0),Ua[r]=xa,e},Fa=wi,Ba=L,ja=la,Ga=Va,Wa=Sr,Ha=Da,Ka=ha,Ya=xo,qa=Ca,za=ja.PROPER,Ja=qa.BUGGY_SAFARI_ITERATORS,Xa=ht(\"iterator\"),Qa=\"keys\",Za=\"values\",$a=\"entries\",ec=function(){return this},tc=function(e,t,i,n,r,o,s){Ga(i,t,n);var a,c,d,l=function(e){if(e===r&&E)return E;if(!Ja&&e in p)return p[e];switch(e){case Qa:case Za:case $a:return function(){return new i(this,e)}}return function(){return new i(this)}},u=t+\" Iterator\",h=!1,p=e.prototype,_=p[Xa]||p[\"@@iterator\"]||r&&p[r],E=!Ja&&_||l(r),f=\"Array\"==t&&p.entries||_;if(f&&(a=Wa(f.call(new e)))!==Object.prototype&&a.next&&(Ha(a,u,!0,!0),Ya[u]=ec),za&&r==Za&&_&&_.name!==Za&&(h=!0,E=function(){return Ba(_,this)}),r)if(c={values:l(Za),keys:o?E:l(Qa),entries:l($a)},s)for(d in c)(Ja||h||!(d in p))&&Ka(p,d,c[d]);else Fa({target:t,proto:!0,forced:Ja||h},c);return s&&p[Xa]!==E&&Ka(p,Xa,E,{name:r}),Ya[t]=E,c},ic=function(e,t){return{value:e,done:t}},nc=Z,rc=xo,oc=ra;Qt.f;var sc=tc,ac=ic,cc=\"Array Iterator\",dc=oc.set,lc=oc.getterFor(cc);sc(Array,\"Array\",(function(e,t){dc(this,{type:cc,target:nc(e),index:0,kind:t})}),(function(){var e=lc(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,ac(void 0,!0)):ac(\"keys\"==i?n:\"values\"==i?t[n]:[n,t[n]],!1)}),\"values\"),rc.Arguments=rc.Array;var uc=Qt,hc=function(e,t,i){return uc.f(e,t,i)},pc=ae,_c=hc,Ec=N,fc=ht(\"species\"),mc=l,Tc=TypeError,Sc=function(e,t){if(mc(t,e))return e;throw Tc(\"Incorrect invocation\")},gc=w,Rc=He,Cc=d(Function.toString);gc(Rc.inspectSource)||(Rc.inspectSource=function(e){return Cc(e)});var Ic=Rc.inspectSource,vc=d,yc=n,Ac=w,bc=pn,wc=Ic,Oc=function(){},Nc=[],Dc=ae(\"Reflect\",\"construct\"),Pc=/^\\s*(?:class|function)\\b/,Lc=vc(Pc.exec),kc=!Pc.exec(Oc),Mc=function(e){if(!Ac(e))return!1;try{return Dc(Oc,Nc,e),!0}catch(e){return!1}},Uc=function(e){if(!Ac(e))return!1;switch(bc(e)){case\"AsyncFunction\":case\"GeneratorFunction\":case\"AsyncGeneratorFunction\":return!1}try{return kc||!!Lc(Pc,wc(e))}catch(e){return!0}};Uc.sham=!0;var xc,Vc,Fc,Bc,jc=!Dc||yc((function(){var e;return Mc(Mc.call)||!Mc(Object)||!Mc((function(){e=!0}))||e}))?Uc:Mc,Gc=jc,Wc=be,Hc=TypeError,Kc=ii,Yc=function(e){if(Gc(e))return e;throw Hc(Wc(e)+\" is not a constructor\")},qc=Y,zc=ht(\"species\"),Jc=function(e,t){var i,n=Kc(e).constructor;return void 0===n||qc(i=Kc(n)[zc])?t:Yc(i)},Xc=d([].slice),Qc=TypeError,Zc=function(e,t){if(e<t)throw Qc(\"Not enough arguments\");return e},$c=/(?:ipad|iphone|ipod).*applewebkit/i.test(ce),ed=h,td=m,id=Xt,nd=w,rd=Ze,od=n,sd=co,ad=Xc,cd=At,dd=Zc,ld=$c,ud=jn,hd=ed.setImmediate,pd=ed.clearImmediate,_d=ed.process,Ed=ed.Dispatch,fd=ed.Function,md=ed.MessageChannel,Td=ed.String,Sd=0,gd={},Rd=\"onreadystatechange\";od((function(){xc=ed.location}));var Cd=function(e){if(rd(gd,e)){var t=gd[e];delete gd[e],t()}},Id=function(e){return function(){Cd(e)}},vd=function(e){Cd(e.data)},yd=function(e){ed.postMessage(Td(e),xc.protocol+\"//\"+xc.host)};hd&&pd||(hd=function(e){dd(arguments.length,1);var t=nd(e)?e:fd(e),i=ad(arguments,1);return gd[++Sd]=function(){td(t,void 0,i)},Vc(Sd),Sd},pd=function(e){delete gd[e]},ud?Vc=function(e){_d.nextTick(Id(e))}:Ed&&Ed.now?Vc=function(e){Ed.now(Id(e))}:md&&!ld?(Bc=(Fc=new md).port2,Fc.port1.onmessage=vd,Vc=id(Bc.postMessage,Bc)):ed.addEventListener&&nd(ed.postMessage)&&!ed.importScripts&&xc&&\"file:\"!==xc.protocol&&!od(yd)?(Vc=yd,ed.addEventListener(\"message\",vd,!1)):Vc=Rd in cd(\"script\")?function(e){sd.appendChild(cd(\"script\"))[Rd]=function(){sd.removeChild(this),Cd(e)}}:function(e){setTimeout(Id(e),0)});var Ad={set:hd,clear:pd},bd=function(){this.head=null,this.tail=null};bd.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var wd,Od,Nd,Dd,Pd,Ld=bd,kd=/ipad|iphone|ipod/i.test(ce)&&\"undefined\"!=typeof Pebble,Md=/web0s(?!.*chrome)/i.test(ce),Ud=h,xd=Xt,Vd=O.f,Fd=Ad.set,Bd=Ld,jd=$c,Gd=kd,Wd=Md,Hd=jn,Kd=Ud.MutationObserver||Ud.WebKitMutationObserver,Yd=Ud.document,qd=Ud.process,zd=Ud.Promise,Jd=Vd(Ud,\"queueMicrotask\"),Xd=Jd&&Jd.value;if(!Xd){var Qd=new Bd,Zd=function(){var e,t;for(Hd&&(e=qd.domain)&&e.exit();t=Qd.get();)try{t()}catch(e){throw Qd.head&&wd(),e}e&&e.enter()};jd||Hd||Wd||!Kd||!Yd?!Gd&&zd&&zd.resolve?((Dd=zd.resolve(void 0)).constructor=zd,Pd=xd(Dd.then,Dd),wd=function(){Pd(Zd)}):Hd?wd=function(){qd.nextTick(Zd)}:(Fd=xd(Fd,Ud),wd=function(){Fd(Zd)}):(Od=!0,Nd=Yd.createTextNode(\"\"),new Kd(Zd).observe(Nd,{characterData:!0}),wd=function(){Nd.data=Od=!Od}),Xd=function(e){Qd.head||wd(),Qd.add(e)}}var $d=Xd,el=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},tl=h.Promise,il=\"object\"==typeof Deno&&Deno&&\"object\"==typeof Deno.version,nl=!il&&!jn&&\"object\"==typeof window&&\"object\"==typeof document,rl=h,ol=tl,sl=w,al=Yt,cl=Ic,dl=ht,ll=nl,ul=il,hl=Ee,pl=ol&&ol.prototype,_l=dl(\"species\"),El=!1,fl=sl(rl.PromiseRejectionEvent),ml=al(\"Promise\",(function(){var e=cl(ol),t=e!==String(ol);if(!t&&66===hl)return!0;if(!pl.catch||!pl.finally)return!0;if(!hl||hl<51||!/native code/.test(e)){var i=new ol((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((i.constructor={})[_l]=n,!(El=i.then((function(){}))instanceof n))return!0}return!t&&(ll||ul)&&!fl})),Tl={CONSTRUCTOR:ml,REJECTION_EVENT:fl,SUBCLASSING:El},Sl={},gl=De,Rl=TypeError,Cl=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw Rl(\"Bad Promise constructor\");t=e,i=n})),this.resolve=gl(t),this.reject=gl(i)};Sl.f=function(e){return new Cl(e)};var Il,vl,yl=wi,Al=jn,bl=h,wl=L,Ol=ha,Nl=Da,Dl=function(e){var t=pc(e);Ec&&t&&!t[fc]&&_c(t,fc,{configurable:!0,get:function(){return this}})},Pl=De,Ll=w,kl=te,Ml=Sc,Ul=Jc,xl=Ad.set,Vl=$d,Fl=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},Bl=el,jl=Ld,Gl=ra,Wl=tl,Hl=Tl,Kl=Sl,Yl=\"Promise\",ql=Hl.CONSTRUCTOR,zl=Hl.REJECTION_EVENT,Jl=Gl.getterFor(Yl),Xl=Gl.set,Ql=Wl&&Wl.prototype,Zl=Wl,$l=Ql,eu=bl.TypeError,tu=bl.document,iu=bl.process,nu=Kl.f,ru=nu,ou=!!(tu&&tu.createEvent&&bl.dispatchEvent),su=\"unhandledrejection\",au=function(e){var t;return!(!kl(e)||!Ll(t=e.then))&&t},cu=function(e,t){var i,n,r,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,d=e.reject,l=e.domain;try{a?(s||(2===t.rejection&&pu(t),t.rejection=1),!0===a?i=o:(l&&l.enter(),i=a(o),l&&(l.exit(),r=!0)),i===e.promise?d(eu(\"Promise-chain cycle\")):(n=au(i))?wl(n,i,c,d):c(i)):d(o)}catch(e){l&&!r&&l.exit(),d(e)}},du=function(e,t){e.notified||(e.notified=!0,Vl((function(){for(var i,n=e.reactions;i=n.get();)cu(i,e);e.notified=!1,t&&!e.rejection&&uu(e)})))},lu=function(e,t,i){var n,r;ou?((n=tu.createEvent(\"Event\")).promise=t,n.reason=i,n.initEvent(e,!1,!0),bl.dispatchEvent(n)):n={promise:t,reason:i},!zl&&(r=bl[\"on\"+e])?r(n):e===su&&Fl(\"Unhandled promise rejection\",i)},uu=function(e){wl(xl,bl,(function(){var t,i=e.facade,n=e.value;if(hu(e)&&(t=Bl((function(){Al?iu.emit(\"unhandledRejection\",n,i):lu(su,i,n)})),e.rejection=Al||hu(e)?2:1,t.error))throw t.value}))},hu=function(e){return 1!==e.rejection&&!e.parent},pu=function(e){wl(xl,bl,(function(){var t=e.facade;Al?iu.emit(\"rejectionHandled\",t):lu(\"rejectionhandled\",t,e.value)}))},_u=function(e,t,i){return function(n){e(t,n,i)}},Eu=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,du(e,!0))},fu=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw eu(\"Promise can't be resolved itself\");var n=au(t);n?Vl((function(){var i={done:!1};try{wl(n,t,_u(fu,i,e),_u(Eu,i,e))}catch(t){Eu(i,t,e)}})):(e.value=t,e.state=1,du(e,!1))}catch(t){Eu({done:!1},t,e)}}};ql&&($l=(Zl=function(e){Ml(this,$l),Pl(e),wl(Il,this);var t=Jl(this);try{e(_u(fu,t),_u(Eu,t))}catch(e){Eu(t,e)}}).prototype,(Il=function(e){Xl(this,{type:Yl,done:!1,notified:!1,parent:!1,reactions:new jl,rejection:!1,state:0,value:void 0})}).prototype=Ol($l,\"then\",(function(e,t){var i=Jl(this),n=nu(Ul(this,Zl));return i.parent=!0,n.ok=!Ll(e)||e,n.fail=Ll(t)&&t,n.domain=Al?iu.domain:void 0,0==i.state?i.reactions.add(n):Vl((function(){cu(n,i)})),n.promise})),vl=function(){var e=new Il,t=Jl(e);this.promise=e,this.resolve=_u(fu,t),this.reject=_u(Eu,t)},Kl.f=nu=function(e){return e===Zl||undefined===e?new vl(e):ru(e)}),yl({global:!0,constructor:!0,wrap:!0,forced:ql},{Promise:Zl}),Nl(Zl,Yl,!1,!0),Dl(Yl);var mu=ht(\"iterator\"),Tu=!1;try{var Su=0,gu={next:function(){return{done:!!Su++}},return:function(){Tu=!0}};gu[mu]=function(){return this},Array.from(gu,(function(){throw 2}))}catch(e){}var Ru=tl,Cu=function(e,t){if(!t&&!Tu)return!1;var i=!1;try{var n={};n[mu]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},Iu=Tl.CONSTRUCTOR||!Cu((function(e){Ru.all(e).then(void 0,(function(){}))})),vu=L,yu=De,Au=Sl,bu=el,wu=Ts;wi({target:\"Promise\",stat:!0,forced:Iu},{all:function(e){var t=this,i=Au.f(t),n=i.resolve,r=i.reject,o=bu((function(){var i=yu(t.resolve),o=[],s=0,a=1;wu(e,(function(e){var c=s++,d=!1;a++,vu(i,t,e).then((function(e){d||(d=!0,o[c]=e,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise}});var Ou=wi,Nu=Tl.CONSTRUCTOR;tl&&tl.prototype,Ou({target:\"Promise\",proto:!0,forced:Nu,real:!0},{catch:function(e){return this.then(void 0,e)}});var Du=L,Pu=De,Lu=Sl,ku=el,Mu=Ts;wi({target:\"Promise\",stat:!0,forced:Iu},{race:function(e){var t=this,i=Lu.f(t),n=i.reject,r=ku((function(){var r=Pu(t.resolve);Mu(e,(function(e){Du(r,t,e).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}});var Uu=L,xu=Sl;wi({target:\"Promise\",stat:!0,forced:Tl.CONSTRUCTOR},{reject:function(e){var t=xu.f(this);return Uu(t.reject,void 0,e),t.promise}});var Vu=ii,Fu=te,Bu=Sl,ju=function(e,t){if(Vu(e),Fu(t)&&t.constructor===e)return t;var i=Bu.f(e);return(0,i.resolve)(t),i.promise},Gu=wi,Wu=tl,Hu=Tl.CONSTRUCTOR,Ku=ju,Yu=ae(\"Promise\"),qu=!Hu;Gu({target:\"Promise\",stat:!0,forced:true},{resolve:function(e){return Ku(qu&&this===Yu?Wu:this,e)}});var zu=L,Ju=De,Xu=Sl,Qu=el,Zu=Ts;wi({target:\"Promise\",stat:!0,forced:Iu},{allSettled:function(e){var t=this,i=Xu.f(t),n=i.resolve,r=i.reject,o=Qu((function(){var i=Ju(t.resolve),r=[],o=0,s=1;Zu(e,(function(e){var a=o++,c=!1;s++,zu(i,t,e).then((function(e){c||(c=!0,r[a]={status:\"fulfilled\",value:e},--s||n(r))}),(function(e){c||(c=!0,r[a]={status:\"rejected\",reason:e},--s||n(r))}))})),--s||n(r)}));return o.error&&r(o.value),i.promise}});var $u=L,eh=De,th=ae,ih=Sl,nh=el,rh=Ts,oh=\"No one promise resolved\";wi({target:\"Promise\",stat:!0,forced:Iu},{any:function(e){var t=this,i=th(\"AggregateError\"),n=ih.f(t),r=n.resolve,o=n.reject,s=nh((function(){var n=eh(t.resolve),s=[],a=0,c=1,d=!1;rh(e,(function(e){var l=a++,u=!1;c++,$u(n,t,e).then((function(e){u||d||(d=!0,r(e))}),(function(e){u||d||(u=!0,s[l]=e,--c||o(new i(s,oh)))}))})),--c||o(new i(s,oh))}));return s.error&&o(s.value),n.promise}});var sh=wi,ah=tl,ch=n,dh=ae,lh=w,uh=Jc,hh=ju,ph=ah&&ah.prototype;sh({target:\"Promise\",proto:!0,real:!0,forced:!!ah&&ch((function(){ph.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=uh(this,dh(\"Promise\")),i=lh(e);return this.then(i?function(i){return hh(t,e()).then((function(){return i}))}:e,i?function(i){return hh(t,e()).then((function(){throw i}))}:e)}});var _h=d,Eh=Li,fh=fn,mh=J,Th=_h(\"\".charAt),Sh=_h(\"\".charCodeAt),gh=_h(\"\".slice),Rh=function(e){return function(t,i){var n,r,o=fh(mh(t)),s=Eh(i),a=o.length;return s<0||s>=a?e?\"\":void 0:(n=Sh(o,s))<55296||n>56319||s+1===a||(r=Sh(o,s+1))<56320||r>57343?e?Th(o,s):n:e?gh(o,s,s+2):r-56320+(n-55296<<10)+65536}},Ch={codeAt:Rh(!1),charAt:Rh(!0)},Ih=Ch.charAt,vh=fn,yh=ra,Ah=tc,bh=ic,wh=\"String Iterator\",Oh=yh.set,Nh=yh.getterFor(wh);Ah(String,\"String\",(function(e){Oh(this,{type:wh,string:vh(e),index:0})}),(function(){var e,t=Nh(this),i=t.string,n=t.index;return n>=i.length?bh(void 0,!0):(e=Ih(i,n),t.index+=e.length,bh(e,!1))}));var Dh=ie.Promise,Ph={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Lh=h,kh=pn,Mh=fi,Uh=xo,xh=ht(\"toStringTag\");for(var Vh in Ph){var Fh=Lh[Vh],Bh=Fh&&Fh.prototype;Bh&&kh(Bh)!==xh&&Mh(Bh,xh,Vh),Uh[Vh]=Uh.Array}var jh=Dh,Gh=i(jh);const Wh=ir;function Hh(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const n=function(e){if(\"object\"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((i=>{if(\"require\"===i||\"advanced\"===i||\"mediaSource\"===i)return;const n=\"object\"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&\"number\"==typeof n.exact&&(n.min=n.max=n.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):\"deviceId\"===t?\"sourceId\":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};\"number\"==typeof n.ideal?(e[r(\"min\",i)]=n.ideal,t.optional.push(e),e={},e[r(\"max\",i)]=n.ideal,t.optional.push(e)):(e[r(\"\",i)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&\"number\"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r(\"\",i)]=n.exact):[\"min\",\"max\"].forEach((e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&\"object\"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,\"autoGainControl\",\"googAutoGainControl\"),t(e.audio,\"noiseSuppression\",\"googNoiseSuppression\"),e.audio=n(e.audio)}if(e&&\"object\"==typeof e.video){let o=e.video.facingMode;o=o&&(\"object\"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&(\"user\"===o.exact||\"environment\"===o.exact||\"user\"===o.ideal||\"environment\"===o.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,\"environment\"===o.exact||\"environment\"===o.ideal?t=[\"back\",\"rear\"]:\"user\"!==o.exact&&\"user\"!==o.ideal||(t=[\"front\"]),t)return i.mediaDevices.enumerateDevices().then((i=>{let s=(i=i.filter((e=>\"videoinput\"===e.kind))).find((e=>t.some((t=>{var i;return Dn(i=e.label.toLowerCase()).call(i,t)}))));return!s&&i.length&&Dn(t).call(t,\"back\")&&(s=i[i.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=n(e.video),Wh(\"chrome: \"+JSON.stringify(e)),r(e)}))}e.video=n(e.video)}return Wh(\"chrome: \"+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:\"NotAllowedError\",PermissionDismissedError:\"NotAllowedError\",InvalidStateError:\"NotAllowedError\",DevicesNotFoundError:\"NotFoundError\",ConstraintNotSatisfiedError:\"OverconstrainedError\",TrackStartError:\"NotReadableError\",MediaDeviceFailedDueToShutdown:\"NotAllowedError\",MediaDeviceKillSwitchOn:\"NotAllowedError\",TabCaptureError:\"AbortError\",ScreenCaptureError:\"AbortError\",DeviceCaptureError:\"AbortError\"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&\": \")+this.message}}};if(i.getUserMedia=function(e,t,n){r(e,(e=>{i.webkitGetUserMedia(e,t,(e=>{n&&n(o(e))}))}))}.bind(i),i.mediaDevices.getUserMedia){const e=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException(\"\",\"NotFoundError\");return e}),(e=>Gh.reject(o(e))))))}}}function Kh(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Yh(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&!(\"ontrack\"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,\"ontrack\",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener(\"track\",this._ontrack),this.addEventListener(\"track\",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener(\"addtrack\",(i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.track.id)):{track:i.track};const r=new Event(\"track\");r.track=i.track,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.id)):{track:i};const r=new Event(\"track\");r.track=i,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener(\"addstream\",this._ontrackpoly)),t.apply(this,arguments)}}else $n(e,\"track\",(e=>(e.transceiver||Object.defineProperty(e,\"transceiver\",{value:{receiver:e.receiver}}),e)))}function qh(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&!(\"getSenders\"in e.RTCPeerConnection.prototype)&&\"createDTMFSender\"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(\"audio\"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if(\"object\"==typeof e&&e.RTCPeerConnection&&\"getSenders\"in e.RTCPeerConnection.prototype&&\"createDTMFSender\"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!(\"dtmf\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,\"dtmf\",{get(){return void 0===this._dtmf&&(\"audio\"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function zh(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;if(arguments.length>0&&\"function\"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||\"function\"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach((e=>{const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"}[e.type]||e.type};e.names().forEach((t=>{i[t]=e.stat(t)})),t[i.id]=i})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const n=function(e){i(o(r(e)))};return t.apply(this,[n,e])}return new Gh(((e,i)=>{t.apply(this,[function(t){e(o(r(t)))},i])})).then(i,n)}}function Jh(e){if(!(\"object\"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!(\"getStats\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ar(t,e.track,!0)))}}if(!(\"getStats\"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),$n(e,\"track\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ar(t,e.track,!1)))}}if(!(\"getStats\"in e.RTCRtpSender.prototype)||!(\"getStats\"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,i,n;return this.getSenders().forEach((i=>{i.track===e&&(t?n=!0:t=i)})),this.getReceivers().forEach((t=>(t.track===e&&(i?n=!0:i=t),t.track===e))),n||t&&i?Gh.reject(new DOMException(\"There are more than one sender or receiver for the track.\",\"InvalidAccessError\")):t?t.getStats():i?i.getStats():Gh.reject(new DOMException(\"There is no sender or receiver for the track.\",\"InvalidAccessError\"))}return t.apply(this,arguments)}}function Xh(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")}));const t=this.getSenders();i.apply(this,arguments);const n=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const i=this._shimmedLocalStreams[t].indexOf(e);-1!==i&&this._shimmedLocalStreams[t].splice(i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function Qh(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Xh(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")})),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,\"g\"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((e=>e===t)))throw new DOMException(\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\",\"NotSupportedError\");const r=this.getSenders().find((e=>e.track===t));if(r)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[i.id];if(o)o.addTrack(t),Gh.resolve().then((()=>{this.dispatchEvent(new Event(\"negotiationneeded\"))}));else{const n=new e.MediaStream([t]);this._streams[i.id]=n,this._reverseStreams[n.id]=i,this.addStream(n)}return this.getSenders().find((e=>e.track===t))},[\"createOffer\",\"createAnswer\"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&\"function\"==typeof arguments[0]?i.apply(this,[t=>{const i=o(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=n[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,\"g\"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,\"localDescription\");Object.defineProperty(e.RTCPeerConnection.prototype,\"localDescription\",{get(){const e=a.get.apply(this);return\"\"===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");if(!e._pc)throw new DOMException(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\",\"TypeError\");if(!(e._pc===this))throw new DOMException(\"Sender was not created by this connection.\",\"InvalidAccessError\");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((i=>{this._streams[i].getTracks().find((t=>e.track===t))&&(t=this._streams[i])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event(\"negotiationneeded\")))}}function Zh(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function $h(e,t){$n(e,\"negotiationneeded\",(e=>{const i=e.target;if(!(t.version<72||i.getConfiguration&&\"plan-b\"===i.getConfiguration().sdpSemantics)||\"stable\"===i.signalingState)return e}))}var ep=Object.freeze({__proto__:null,fixNegotiationNeeded:$h,shimAddTrackRemoveTrack:Qh,shimAddTrackRemoveTrackWithNative:Xh,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(\"function\"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((t=>{const n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error(\"shimGetDisplayMedia: getSourceId argument is not a function\"))},shimGetSendersWithDtmf:qh,shimGetStats:zh,shimGetUserMedia:Hh,shimMediaStream:Kh,shimOnTrack:Yh,shimPeerConnection:Zh,shimSenderReceiverGetStats:Jh});function tp(e,t){const i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){nr(\"navigator.getUserMedia\",\"navigator.mediaDevices.getUserMedia\"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&\"autoGainControl\"in i.mediaDevices.getSupportedConstraints())){const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return\"object\"==typeof i&&\"object\"==typeof i.audio&&(i=JSON.parse(JSON.stringify(i)),e(i.audio,\"autoGainControl\",\"mozAutoGainControl\"),e(i.audio,\"noiseSuppression\",\"mozNoiseSuppression\")),t(i)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,\"mozAutoGainControl\",\"autoGainControl\"),e(i,\"mozNoiseSuppression\",\"noiseSuppression\"),i}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(i){return\"audio\"===this.kind&&\"object\"==typeof i&&(i=JSON.parse(JSON.stringify(i)),e(i,\"autoGainControl\",\"mozAutoGainControl\"),e(i,\"noiseSuppression\",\"mozNoiseSuppression\")),t.apply(this,[i])}}}}function ip(e){\"object\"==typeof e&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get(){return{receiver:this.receiver}}})}function np(e,t){if(\"object\"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const i={inboundrtp:\"inbound-rtp\",outboundrtp:\"outbound-rtp\",candidatepair:\"candidate-pair\",localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return n.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=i[e.type]||e.type}))}catch(t){if(\"TypeError\"!==t.name)throw t;e.forEach(((t,n)=>{e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,o)}}function rp(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\"getStats\"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Gh.resolve(new Map)}}function op(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\"getStats\"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),$n(e,\"track\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function sp(e){e.RTCPeerConnection&&!(\"removeStream\"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){nr(\"removeStream\",\"removeTrack\"),this.getSenders().forEach((t=>{var i;t.track&&Dn(i=e.getTracks()).call(i,t.track)&&this.removeTrack(t)}))})}function ap(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function cp(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const i=e.length>0;i&&e.forEach((e=>{if(\"rid\"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError(\"Invalid RID value provided.\")}if(\"scaleResolutionDownBy\"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError(\"scale_resolution_down_by must be >= 1.0\");if(\"maxFramerate\"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError(\"max_framerate must be >= 0.0\")}));const n=t.apply(this,arguments);if(i){const{sender:t}=n,i=t.getParameters();(!(\"encodings\"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(i).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return n})}function dp(e){if(\"object\"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return\"encodings\"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function lp(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Gh.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function up(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Gh.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var hp=Object.freeze({__proto__:null,shimAddTransceiver:cp,shimCreateAnswer:up,shimCreateOffer:lp,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException(\"getDisplayMedia without video constraints is undefined\");return e.name=\"NotFoundError\",e.code=8,Gh.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})},shimGetParameters:dp,shimGetUserMedia:tp,shimOnTrack:ip,shimPeerConnection:np,shimRTCDataChannel:ap,shimReceiverGetStats:op,shimRemoveStream:sp,shimSenderGetStats:rp});function pp(e){if(\"object\"==typeof e&&e.RTCPeerConnection){if(\"getLocalStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!(\"addStream\"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i;this._localStreams||(this._localStreams=[]),Dn(i=this._localStreams).call(i,e)||this._localStreams.push(e),e.getAudioTracks().forEach((i=>t.call(this,i,e))),e.getVideoTracks().forEach((i=>t.call(this,i,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n&&n.forEach((e=>{var t;this._localStreams?Dn(t=this._localStreams).call(t,e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}\"removeStream\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach((e=>{Dn(i).call(i,e.track)&&this.removeTrack(e)}))})}}function _p(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&(\"getRemoteStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!(\"onaddstream\"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,\"onaddstream\",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener(\"addstream\",this._onaddstream),this.removeEventListener(\"track\",this._onaddstreampoly)),this.addEventListener(\"addstream\",this._onaddstream=e),this.addEventListener(\"track\",this._onaddstreampoly=e=>{e.streams.forEach((e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),Dn(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const i=new Event(\"addstream\");i.stream=e,this.dispatchEvent(i)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener(\"track\",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const i=new Event(\"addstream\");i.stream=t,e.dispatchEvent(i)}))}),t.apply(e,arguments)}}}function Ep(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Gh.resolve()):r},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Gh.resolve()):r};let a=function(e,t,i){const n=r.apply(this,[e]);return i?(n.then(t,i),Gh.resolve()):n};t.setLocalDescription=a,a=function(e,t,i){const n=o.apply(this,[e]);return i?(n.then(t,i),Gh.resolve()):n},t.setRemoteDescription=a,a=function(e,t,i){const n=s.apply(this,[e]);return i?(n.then(t,i),Gh.resolve()):n},t.addIceCandidate=a}function fp(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,i=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>i(mp(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function mp(e){return e&&void 0!==e.video?Object.assign({},e,{video:or(e.video)}):e}function Tp(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty(\"urls\")&&n.hasOwnProperty(\"url\")?(nr(\"RTCIceServer.url\",\"RTCIceServer.urls\"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,\"generateCertificate\"in t&&Object.defineProperty(e.RTCPeerConnection,\"generateCertificate\",{get:()=>t.generateCertificate})}function Sp(e){\"object\"==typeof e&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get(){return{receiver:this.receiver}}})}function gp(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>\"audio\"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?\"sendrecv\"===t.direction?t.setDirection?t.setDirection(\"sendonly\"):t.direction=\"sendonly\":\"recvonly\"===t.direction&&(t.setDirection?t.setDirection(\"inactive\"):t.direction=\"inactive\"):!0!==e.offerToReceiveAudio||t||this.addTransceiver(\"audio\",{direction:\"recvonly\"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=this.getTransceivers().find((e=>\"video\"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&i?\"sendrecv\"===i.direction?i.setDirection?i.setDirection(\"sendonly\"):i.direction=\"sendonly\":\"recvonly\"===i.direction&&(i.setDirection?i.setDirection(\"inactive\"):i.direction=\"inactive\"):!0!==e.offerToReceiveVideo||i||this.addTransceiver(\"video\",{direction:\"recvonly\"})}return t.apply(this,arguments)}}function Rp(e){\"object\"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Cp=Object.freeze({__proto__:null,shimAudioContext:Rp,shimCallbacksAPI:Ep,shimConstraints:mp,shimCreateOfferLegacy:gp,shimGetUserMedia:fp,shimLocalStreamsAPI:pp,shimRTCIceServerUrls:Tp,shimRemoteStreamsAPI:_p,shimTrackEventTransceiver:Sp}),Ip=\"\\t\\n\\v\\f\\r Â áââââââââââââ¯âã\\u2028\\u2029\\ufeff\",vp=J,yp=fn,Ap=Ip,bp=d(\"\".replace),wp=RegExp(\"^[\"+Ap+\"]+\"),Op=RegExp(\"(^|[^\"+Ap+\"])[\"+Ap+\"]+$\"),Np=function(e){return function(t){var i=yp(vp(t));return 1&e&&(i=bp(i,wp,\"\")),2&e&&(i=bp(i,Op,\"$1\")),i}},Dp={start:Np(1),end:Np(2),trim:Np(3)},Pp=la.PROPER,Lp=n,kp=Ip,Mp=Dp.trim;wi({target:\"String\",proto:!0,forced:function(e){return Lp((function(){return!!kp[e]()||\"âÂá \"!==\"âÂá \"[e]()||Pp&&kp[e].name!==e}))}(\"trim\")},{trim:function(){return Mp(this)}});var Up=Xi(\"String\").trim,xp=l,Vp=Up,Fp=String.prototype,Bp=function(e){var t=e.trim;return\"string\"==typeof e||e===Fp||xp(Fp,e)&&t===Fp.trim?Vp:t},jp=i(Bp),Gp={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split(\"\\n\").map((e=>e.trim()))},t.splitSections=function(e){return e.split(\"\\nm=\").map(((e,t)=>(t>0?\"m=\"+e:e).trim()+\"\\r\\n\"))},t.getDescription=function(e){const i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){const i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter((e=>0===e.indexOf(i)))},t.parseCandidate=function(e){let t;t=0===e.indexOf(\"a=candidate:\")?e.substring(12).split(\" \"):e.substring(10).split(\" \");const i={foundation:t[0],component:{1:\"rtp\",2:\"rtcp\"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case\"raddr\":i.relatedAddress=t[e+1];break;case\"rport\":i.relatedPort=parseInt(t[e+1],10);break;case\"tcptype\":i.tcpType=t[e+1];break;case\"ufrag\":i.ufrag=t[e+1],i.usernameFragment=t[e+1];break;default:void 0===i[t[e]]&&(i[t[e]]=t[e+1])}return i},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const i=e.component;\"rtp\"===i?t.push(1):\"rtcp\"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const n=e.type;return t.push(\"typ\"),t.push(n),\"host\"!==n&&e.relatedAddress&&e.relatedPort&&(t.push(\"raddr\"),t.push(e.relatedAddress),t.push(\"rport\"),t.push(e.relatedPort)),e.tcpType&&\"tcp\"===e.protocol.toLowerCase()&&(t.push(\"tcptype\"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push(\"ufrag\"),t.push(e.usernameFragment||e.ufrag)),\"candidate:\"+t.join(\" \")},t.parseIceOptions=function(e){return e.substring(14).split(\" \")},t.parseRtpMap=function(e){let t=e.substring(9).split(\" \");const i={payloadType:parseInt(t.shift(),10)};return t=t[0].split(\"/\"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const i=e.channels||e.numChannels||1;return\"a=rtpmap:\"+t+\" \"+e.name+\"/\"+e.clockRate+(1!==i?\"/\"+i:\"\")+\"\\r\\n\"},t.parseExtmap=function(e){const t=e.substring(9).split(\" \");return{id:parseInt(t[0],10),direction:t[0].indexOf(\"/\")>0?t[0].split(\"/\")[1]:\"sendrecv\",uri:t[1],attributes:t.slice(2).join(\" \")}},t.writeExtmap=function(e){return\"a=extmap:\"+(e.id||e.preferredId)+(e.direction&&\"sendrecv\"!==e.direction?\"/\"+e.direction:\"\")+\" \"+e.uri+(e.attributes?\" \"+e.attributes:\"\")+\"\\r\\n\"},t.parseFmtp=function(e){const t={};let i;const n=e.substring(e.indexOf(\" \")+1).split(\";\");for(let e=0;e<n.length;e++)i=n[e].trim().split(\"=\"),t[i[0].trim()]=i[1];return t},t.writeFmtp=function(e){let t=\"\",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const n=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?n.push(t+\"=\"+e.parameters[t]):n.push(t)})),t+=\"a=fmtp:\"+i+\" \"+n.join(\";\")+\"\\r\\n\"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(\" \")+1).split(\" \");return{type:t.shift(),parameter:t.join(\" \")}},t.writeRtcpFb=function(e){let t=\"\",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+=\"a=rtcp-fb:\"+i+\" \"+e.type+(e.parameter&&e.parameter.length?\" \"+e.parameter:\"\")+\"\\r\\n\"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(\" \"),i={ssrc:parseInt(e.substring(7,t),10)},n=e.indexOf(\":\",t);return n>-1?(i.attribute=e.substring(t+1,n),i.value=e.substring(n+1)):i.attribute=e.substring(t+1),i},t.parseSsrcGroup=function(e){const t=e.substring(13).split(\" \");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const i=t.matchPrefix(e,\"a=mid:\")[0];if(i)return i.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(\" \");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,i){return{role:\"auto\",fingerprints:t.matchPrefix(e+i,\"a=fingerprint:\").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let i=\"a=setup:\"+t+\"\\r\\n\";return e.fingerprints.forEach((e=>{i+=\"a=fingerprint:\"+e.algorithm+\" \"+e.value+\"\\r\\n\"})),i},t.parseCryptoLine=function(e){const t=e.substring(9).split(\" \");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return\"a=crypto:\"+e.tag+\" \"+e.cryptoSuite+\" \"+(\"object\"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?\" \"+e.sessionParams.join(\" \"):\"\")+\"\\r\\n\"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf(\"inline:\"))return null;const t=e.substring(7).split(\"|\");return{keyMethod:\"inline\",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(\":\")[0]:void 0,mkiLength:t[2]?t[2].split(\":\")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+\":\"+e.keySalt+(e.lifeTime?\"|\"+e.lifeTime:\"\")+(e.mkiValue&&e.mkiLength?\"|\"+e.mkiValue+\":\"+e.mkiLength:\"\")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,\"a=crypto:\").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){const n=t.matchPrefix(e+i,\"a=ice-ufrag:\")[0],r=t.matchPrefix(e+i,\"a=ice-pwd:\")[0];return n&&r?{usernameFragment:n.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t=\"a=ice-ufrag:\"+e.usernameFragment+\"\\r\\na=ice-pwd:\"+e.password+\"\\r\\n\";return e.iceLite&&(t+=\"a=ice-lite\\r\\n\"),t},t.parseRtpParameters=function(e){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(\" \");i.profile=n[2];for(let r=3;r<n.length;r++){const o=n[r],s=t.matchPrefix(e,\"a=rtpmap:\"+o+\" \")[0];if(s){const n=t.parseRtpMap(s),r=t.matchPrefix(e,\"a=fmtp:\"+o+\" \");switch(n.parameters=r.length?t.parseFmtp(r[0]):{},n.rtcpFeedback=t.matchPrefix(e,\"a=rtcp-fb:\"+o+\" \").map(t.parseRtcpFb),i.codecs.push(n),n.name.toUpperCase()){case\"RED\":case\"ULPFEC\":i.fecMechanisms.push(n.name.toUpperCase())}}}t.matchPrefix(e,\"a=extmap:\").forEach((e=>{i.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,\"a=rtcp-fb:* \").map(t.parseRtcpFb);return i.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),i},t.writeRtpDescription=function(e,i){let n=\"\";n+=\"m=\"+e+\" \",n+=i.codecs.length>0?\"9\":\"0\",n+=\" \"+(i.profile||\"UDP/TLS/RTP/SAVPF\")+\" \",n+=i.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(\" \")+\"\\r\\n\",n+=\"c=IN IP4 0.0.0.0\\r\\n\",n+=\"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\",i.codecs.forEach((e=>{n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));let r=0;return i.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+=\"a=maxptime:\"+r+\"\\r\\n\"),i.headerExtensions&&i.headerExtensions.forEach((e=>{n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){const i=[],n=t.parseRtpParameters(e),r=-1!==n.fecMechanisms.indexOf(\"RED\"),o=-1!==n.fecMechanisms.indexOf(\"ULPFEC\"),s=t.matchPrefix(e,\"a=ssrc:\").map((e=>t.parseSsrcMedia(e))).filter((e=>\"cname\"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const d=t.matchPrefix(e,\"a=ssrc-group:FID\").map((e=>e.substring(17).split(\" \").map((e=>parseInt(e,10)))));d.length>0&&d[0].length>1&&d[0][0]===a&&(c=d[0][1]),n.codecs.forEach((e=>{if(\"RTX\"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),i.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?\"red+ulpfec\":\"red\"},i.push(t))}})),0===i.length&&a&&i.push({ssrc:a});let l=t.matchPrefix(e,\"b=\");return l.length&&(l=0===l[0].indexOf(\"b=TIAS:\")?parseInt(l[0].substring(7),10):0===l[0].indexOf(\"b=AS:\")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,i.forEach((e=>{e.maxBitrate=l}))),i},t.parseRtcpParameters=function(e){const i={},n=t.matchPrefix(e,\"a=ssrc:\").map((e=>t.parseSsrcMedia(e))).filter((e=>\"cname\"===e.attribute))[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);const r=t.matchPrefix(e,\"a=rtcp-rsize\");i.reducedSize=r.length>0,i.compound=0===r.length;const o=t.matchPrefix(e,\"a=rtcp-mux\");return i.mux=o.length>0,i},t.writeRtcpParameters=function(e){let t=\"\";return e.reducedSize&&(t+=\"a=rtcp-rsize\\r\\n\"),e.mux&&(t+=\"a=rtcp-mux\\r\\n\"),void 0!==e.ssrc&&e.cname&&(t+=\"a=ssrc:\"+e.ssrc+\" cname:\"+e.cname+\"\\r\\n\"),t},t.parseMsid=function(e){let i;const n=t.matchPrefix(e,\"a=msid:\");if(1===n.length)return i=n[0].substring(7).split(\" \"),{stream:i[0],track:i[1]};const r=t.matchPrefix(e,\"a=ssrc:\").map((e=>t.parseSsrcMedia(e))).filter((e=>\"msid\"===e.attribute));return r.length>0?(i=r[0].value.split(\" \"),{stream:i[0],track:i[1]}):void 0},t.parseSctpDescription=function(e){const i=t.parseMLine(e),n=t.matchPrefix(e,\"a=max-message-size:\");let r;n.length>0&&(r=parseInt(n[0].substring(19),10)),isNaN(r)&&(r=65536);const o=t.matchPrefix(e,\"a=sctp-port:\");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:i.fmt,maxMessageSize:r};const s=t.matchPrefix(e,\"a=sctpmap:\");if(s.length>0){const e=s[0].substring(10).split(\" \");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let i=[];return i=\"DTLS/SCTP\"!==e.protocol?[\"m=\"+e.kind+\" 9 \"+e.protocol+\" \"+t.protocol+\"\\r\\n\",\"c=IN IP4 0.0.0.0\\r\\n\",\"a=sctp-port:\"+t.port+\"\\r\\n\"]:[\"m=\"+e.kind+\" 9 \"+e.protocol+\" \"+t.port+\"\\r\\n\",\"c=IN IP4 0.0.0.0\\r\\n\",\"a=sctpmap:\"+t.port+\" \"+t.protocol+\" 65535\\r\\n\"],void 0!==t.maxMessageSize&&i.push(\"a=max-message-size:\"+t.maxMessageSize+\"\\r\\n\"),i.join(\"\")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,i,n){let r;const o=void 0!==i?i:2;r=e||t.generateSessionId();return\"v=0\\r\\no=\"+(n||\"thisisadapterortc\")+\" \"+r+\" \"+o+\" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\"},t.getDirection=function(e,i){const n=t.splitLines(e);for(let e=0;e<n.length;e++)switch(n[e]){case\"a=sendrecv\":case\"a=sendonly\":case\"a=recvonly\":case\"a=inactive\":return n[e].substring(2)}return i?t.getDirection(i):\"sendrecv\"},t.getKind=function(e){return t.splitLines(e)[0].split(\" \")[0].substring(2)},t.isRejected=function(e){return\"0\"===e.split(\" \",2)[1]},t.parseMLine=function(e){const i=t.splitLines(e)[0].substring(2).split(\" \");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(\" \")}},t.parseOLine=function(e){const i=t.matchPrefix(e,\"o=\")[0].substring(2).split(\" \");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if(\"string\"!=typeof e||0===e.length)return!1;const i=t.splitLines(e);for(let e=0;e<i.length;e++)if(i[e].length<2||\"=\"!==i[e].charAt(1))return!1;return!0},e.exports=t}(Gp);var Wp=Gp.exports,Hp=i(Wp),Kp=e({__proto__:null,default:Hp},[Wp]);function Yp(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&\"foundation\"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if(\"object\"==typeof e&&e.candidate&&0===e.candidate.indexOf(\"a=\")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const i=new t(e),n=Hp.parseCandidate(e.candidate),r=Object.assign(i,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,$n(e,\"icecandidate\",(t=>(t.candidate&&Object.defineProperty(t,\"candidate\",{value:new e.RTCIceCandidate(t.candidate),writable:\"false\"}),t)))}function qp(e){!e.RTCIceCandidate||e.RTCIceCandidate&&\"relayProtocol\"in e.RTCIceCandidate.prototype||$n(e,\"icecandidate\",(e=>{if(e.candidate){const t=Hp.parseCandidate(e.candidate.candidate);\"relay\"===t.type&&(e.candidate.relayProtocol={0:\"tls\",1:\"tcp\",2:\"udp\"}[t.priority>>24])}return e}))}function zp(e,t){if(!e.RTCPeerConnection)return;\"sctp\"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,\"sctp\",{get(){return void 0===this._sctp?null:this._sctp}});const i=function(e){if(!e||!e.sdp)return!1;const t=Hp.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Hp.parseMLine(e);return t&&\"application\"===t.kind&&-1!==t.protocol.indexOf(\"SCTP\")}))},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);if(null===t||t.length<2)return-1;const i=parseInt(t[1],10);return i!=i?-1:i},r=function(e){let i=65536;return\"firefox\"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){let n=65536;\"firefox\"===t.browser&&57===t.version&&(n=65535);const r=Hp.matchPrefix(e.sdp,\"a=max-message-size:\");return r.length>0?n=parseInt(r[0].substr(19),10):\"firefox\"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,\"chrome\"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();\"plan-b\"===e&&Object.defineProperty(this,\"sctp\",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const e=n(arguments[0]),t=r(e),i=o(arguments[0],e);let s;s=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);const a={};Object.defineProperty(a,\"maxMessageSize\",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function Jp(e){if(!e.RTCPeerConnection||!(\"createDataChannel\"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const n=arguments[0],r=n.length||n.size||n.byteLength;if(\"open\"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError(\"Message too large (can send a maximum of \"+t.sctp.maxMessageSize+\" bytes)\");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},$n(e,\"datachannel\",(e=>(t(e.channel,e.target),e)))}function Xp(e){if(!e.RTCPeerConnection||\"connectionState\"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,\"connectionState\",{get(){return{completed:\"connected\",checking:\"connecting\"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"onconnectionstatechange\",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener(\"connectionstatechange\",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener(\"connectionstatechange\",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),[\"setLocalDescription\",\"setRemoteDescription\"].forEach((e=>{const i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event(\"connectionstatechange\",e);t.dispatchEvent(i)}return e},this.addEventListener(\"iceconnectionstatechange\",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}function Qp(e,t){if(!e.RTCPeerConnection)return;if(\"chrome\"===t.browser&&t.version>=71)return;if(\"safari\"===t.browser&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf(\"\\na=extmap-allow-mixed\")){const i=t.sdp.split(\"\\n\").filter((e=>\"a=extmap-allow-mixed\"!==jp(e).call(e))).join(\"\\n\");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return i.apply(this,arguments)}}function Zp(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(\"chrome\"===t.browser&&t.version<78||\"firefox\"===t.browser&&t.version<68||\"safari\"===t.browser)&&arguments[0]&&\"\"===arguments[0].candidate?Gh.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Gh.resolve())})}function $p(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.setLocalDescription;i&&0!==i.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if(\"object\"!=typeof e||e.type&&e.sdp)return i.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case\"stable\":case\"have-local-offer\":case\"have-remote-pranswer\":e.type=\"offer\";break;default:e.type=\"answer\"}if(e.sdp||\"offer\"!==e.type&&\"answer\"!==e.type)return i.apply(this,[e]);return(\"offer\"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>i.apply(this,[e])))})}var e_=Object.freeze({__proto__:null,removeExtmapAllowMixed:Qp,shimAddIceCandidateNullOrEmpty:Zp,shimConnectionState:Xp,shimMaxMessageSize:zp,shimParameterlessSetLocalDescription:$p,shimRTCIceCandidate:Yp,shimRTCIceCandidateRelayProtocol:qp,shimSendThrowTypeError:Jp});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=ir,n=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser=\"Not a browser.\",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser=\"firefox\",t.version=Zn(i.userAgent,/Firefox\\/(\\d+)\\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser=\"chrome\",t.version=Zn(i.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return t.browser=\"Not a supported browser.\",t;t.browser=\"safari\",t.version=Zn(i.userAgent,/AppleWebKit\\/(\\d+)\\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&\"currentDirection\"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:n,commonShim:e_,extractVersion:Zn,disableLog:er,disableWarnings:tr,sdp:Kp};switch(n.browser){case\"chrome\":if(!ep||!Zh||!t.shimChrome)return i(\"Chrome shim is not included in this adapter release.\"),r;if(null===n.version)return i(\"Chrome shim can not determine version, not shimming.\"),r;i(\"adapter.js shimming chrome.\"),r.browserShim=ep,Zp(e,n),$p(e),Hh(e,n),Kh(e),Zh(e,n),Yh(e),Qh(e,n),qh(e),zh(e),Jh(e),$h(e,n),Yp(e),qp(e),Xp(e),zp(e,n),Jp(e),Qp(e,n);break;case\"firefox\":if(!hp||!np||!t.shimFirefox)return i(\"Firefox shim is not included in this adapter release.\"),r;i(\"adapter.js shimming firefox.\"),r.browserShim=hp,Zp(e,n),$p(e),tp(e,n),np(e,n),ip(e),sp(e),rp(e),op(e),ap(e),cp(e),dp(e),lp(e),up(e),Yp(e),Xp(e),zp(e,n),Jp(e);break;case\"safari\":if(!Cp||!t.shimSafari)return i(\"Safari shim is not included in this adapter release.\"),r;i(\"adapter.js shimming safari.\"),r.browserShim=Cp,Zp(e,n),$p(e),Tp(e),gp(e),Ep(e),pp(e),_p(e),Sp(e),fp(e),Rp(e),Yp(e),qp(e),zp(e,n),Jp(e),Qp(e,n);break;default:i(\"Unsupported browser!\")}}({window:\"undefined\"==typeof window?void 0:window});var t_=Xi(\"Array\").keys,i_=pn,n_=Ze,r_=l,o_=t_,s_=Array.prototype,a_={DOMTokenList:!0,NodeList:!0},c_=function(e){var t=e.keys;return e===s_||r_(s_,e)&&t===s_.keys||n_(a_,i_(e))?o_:t},d_=i(c_),l_=be,u_=TypeError,h_=Ct,p_=Qt,__=B,E_=function(e,t,i){var n=h_(t);n in e?p_.f(e,n,__(0,i)):e[n]=i},f_=xi,m_=Gi,T_=E_,S_=Array,g_=Math.max,R_=function(e,t,i){for(var n=m_(e),r=f_(t,n),o=f_(void 0===i?n:i,n),s=S_(g_(o-r,0)),a=0;r<o;r++,a++)T_(s,a,e[r]);return s.length=a,s},C_=R_,I_=Math.floor,v_=function(e,t){var i=e.length,n=I_(i/2);return i<8?y_(e,t):A_(e,v_(C_(e,0,n),t),v_(C_(e,n),t),t)},y_=function(e,t){for(var i,n,r=e.length,o=1;o<r;){for(n=o,i=e[o];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==o++&&(e[n]=i)}return e},A_=function(e,t,i,n){for(var r=t.length,o=i.length,s=0,a=0;s<r||a<o;)e[s+a]=s<r&&a<o?n(t[s],i[a])<=0?t[s++]:i[a++]:s<r?t[s++]:i[a++];return e},b_=v_,w_=ce.match(/firefox\\/(\\d+)/i),O_=!!w_&&+w_[1],N_=/MSIE|Trident/.test(ce),D_=ce.match(/AppleWebKit\\/(\\d+)\\./),P_=!!D_&&+D_[1],L_=wi,k_=d,M_=De,U_=Je,x_=Gi,V_=function(e,t){if(!delete e[t])throw u_(\"Cannot delete property \"+l_(t)+\" of \"+l_(e))},F_=fn,B_=n,j_=b_,G_=Bn,W_=O_,H_=N_,K_=Ee,Y_=P_,q_=[],z_=k_(q_.sort),J_=k_(q_.push),X_=B_((function(){q_.sort(void 0)})),Q_=B_((function(){q_.sort(null)})),Z_=G_(\"sort\"),$_=!B_((function(){if(K_)return K_<70;if(!(W_&&W_>3)){if(H_)return!0;if(Y_)return Y_<603;var e,t,i,n,r=\"\";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)q_.push({k:t+n,v:i})}for(q_.sort((function(e,t){return t.v-e.v})),n=0;n<q_.length;n++)t=q_[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return\"DGBEFHACIJK\"!==r}}));L_({target:\"Array\",proto:!0,forced:X_||!Q_||!Z_||!$_},{sort:function(e){void 0!==e&&M_(e);var t=U_(this);if($_)return void 0===e?z_(t):z_(t,e);var i,n,r=[],o=x_(t);for(n=0;n<o;n++)n in t&&J_(r,t[n]);for(j_(r,function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:F_(t)>F_(i)?1:-1}}(e)),i=x_(r),n=0;n<i;)t[n]=r[n++];for(;n<o;)V_(t,n++);return t}});var eE=Xi(\"Array\").sort,tE=l,iE=eE,nE=Array.prototype,rE=function(e){var t=e.sort;return e===nE||tE(nE,e)&&t===nE.sort?iE:t},oE=i(rE),sE={exports:{}};!function(e,i){!function(t,n){var r=\"function\",o=\"undefined\",s=\"object\",a=\"string\",c=\"major\",d=\"model\",l=\"name\",u=\"type\",h=\"vendor\",p=\"version\",_=\"architecture\",E=\"console\",f=\"mobile\",m=\"tablet\",T=\"smarttv\",S=\"wearable\",g=\"embedded\",R=\"Amazon\",C=\"Apple\",I=\"ASUS\",v=\"BlackBerry\",y=\"Browser\",A=\"Chrome\",b=\"Firefox\",w=\"Google\",O=\"Huawei\",N=\"LG\",D=\"Microsoft\",P=\"Motorola\",L=\"Opera\",k=\"Samsung\",M=\"Sharp\",U=\"Sony\",x=\"Xiaomi\",V=\"Zebra\",F=\"Facebook\",B=\"Chromium OS\",j=\"Mac OS\",G=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},W=function(e,t){return typeof e===a&&-1!==H(t).indexOf(H(e))},H=function(e){return e.toLowerCase()},K=function(e,t){if(typeof e===a)return e=e.replace(/^\\s\\s*/,\"\"),typeof t===o?e:e.substring(0,350)},Y=function(e,t){for(var i,o,a,c,d,l,u=0;u<t.length&&!d;){var h=t[u],p=t[u+1];for(i=o=0;i<h.length&&!d&&h[i];)if(d=h[i++].exec(e))for(a=0;a<p.length;a++)l=d[++o],typeof(c=p[a])===s&&c.length>0?2===c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):n:this[c[0]]=l?c[1].call(this,l,c[2]):n:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):n):this[c]=l||n;u+=2}},q=function(e,t){for(var i in t)if(typeof t[i]===s&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(W(t[i][r],e))return\"?\"===i?n:i}else if(W(t[i],e))return\"?\"===i?n:i;return e},z={ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"},J={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[p,[l,\"Chrome\"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[p,[l,\"Edge\"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[l,p],[/opios[\\/ ]+([\\w\\.]+)/i],[p,[l,L+\" Mini\"]],[/\\bopr\\/([\\w\\.]+)/i],[p,[l,L]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[l,p],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[p,[l,\"UC\"+y]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[p,[l,\"WeChat(Win) Desktop\"]],[/micromessenger\\/([\\w\\.]+)/i],[p,[l,\"WeChat\"]],[/konqueror\\/([\\w\\.]+)/i],[p,[l,\"Konqueror\"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[p,[l,\"IE\"]],[/yabrowser\\/([\\w\\.]+)/i],[p,[l,\"Yandex\"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[l,/(.+)/,\"$1 Secure \"+y],p],[/\\bfocus\\/([\\w\\.]+)/i],[p,[l,b+\" Focus\"]],[/\\bopt\\/([\\w\\.]+)/i],[p,[l,L+\" Touch\"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[p,[l,\"Coc Coc\"]],[/dolfin\\/([\\w\\.]+)/i],[p,[l,\"Dolphin\"]],[/coast\\/([\\w\\.]+)/i],[p,[l,L+\" Coast\"]],[/miuibrowser\\/([\\w\\.]+)/i],[p,[l,\"MIUI \"+y]],[/fxios\\/([-\\w\\.]+)/i],[p,[l,b]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[l,\"360 \"+y]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[l,/(.+)/,\"$1 \"+y],p],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[l,/_/g,\" \"],p],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[l,p],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[l],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[l,F],p],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[l,p],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[p,[l,\"GSA\"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[p,[l,A+\" Headless\"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[l,A+\" WebView\"],p],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[p,[l,\"Android \"+y]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[l,p],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[p,[l,\"Mobile Safari\"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[l,[p,q,{\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[l,p],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[l,\"Netscape\"],p],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[p,[l,b+\" Reality\"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[l,p],[/(cobalt)\\/([\\w\\.]+)/i],[l,[p,/master.|lts./,\"\"]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[_,\"amd64\"]],[/(ia32(?=;))/i],[[_,H]],[/((?:i[346]|x)86)[;\\)]/i],[[_,\"ia32\"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[_,\"arm64\"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[_,\"armhf\"]],[/windows (ce|mobile); ppc;/i],[[_,\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[_,/ower/,\"\",H]],[/(sun4\\w)[;\\)]/i],[[_,\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[_,H]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[h,k],[u,m]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[d,[h,k],[u,f]],[/\\((ip(?:hone|od)[\\w ]*);/i],[d,[h,C],[u,f]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[d,[h,C],[u,m]],[/(macintosh);/i],[d,[h,C]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[d,[h,M],[u,f]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[d,[h,O],[u,m]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[d,[h,O],[u,f]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[d,/_/g,\" \"],[h,x],[u,f]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[d,/_/g,\" \"],[h,x],[u,m]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[d,[h,\"OPPO\"],[u,f]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[d,[h,\"Vivo\"],[u,f]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[d,[h,\"Realme\"],[u,f]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[d,[h,P],[u,f]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[d,[h,P],[u,m]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[h,N],[u,m]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[d,[h,N],[u,f]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[d,[h,\"Lenovo\"],[u,m]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[d,/_/g,\" \"],[h,\"Nokia\"],[u,f]],[/(pixel c)\\b/i],[d,[h,w],[u,m]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[d,[h,w],[u,f]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[d,[h,U],[u,f]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[d,\"Xperia Tablet\"],[h,U],[u,m]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[d,[h,\"OnePlus\"],[u,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[d,[h,R],[u,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[d,/(.+)/g,\"Fire Phone $1\"],[h,R],[u,f]],[/(playbook);[-\\w\\),; ]+(rim)/i],[d,h,[u,m]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[d,[h,v],[u,f]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[d,[h,I],[u,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[d,[h,I],[u,f]],[/(nexus 9)/i],[d,[h,\"HTC\"],[u,m]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[h,[d,/_/g,\" \"],[u,f]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[d,[h,\"Acer\"],[u,m]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[d,[h,\"Meizu\"],[u,f]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[h,d,[u,f]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[h,d,[u,m]],[/(surface duo)/i],[d,[h,D],[u,m]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[d,[h,\"Fairphone\"],[u,f]],[/(u304aa)/i],[d,[h,\"AT&T\"],[u,f]],[/\\bsie-(\\w*)/i],[d,[h,\"Siemens\"],[u,f]],[/\\b(rct\\w+) b/i],[d,[h,\"RCA\"],[u,m]],[/\\b(venue[\\d ]{2,7}) b/i],[d,[h,\"Dell\"],[u,m]],[/\\b(q(?:mv|ta)\\w+) b/i],[d,[h,\"Verizon\"],[u,m]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[d,[h,\"Barnes & Noble\"],[u,m]],[/\\b(tm\\d{3}\\w+) b/i],[d,[h,\"NuVision\"],[u,m]],[/\\b(k88) b/i],[d,[h,\"ZTE\"],[u,m]],[/\\b(nx\\d{3}j) b/i],[d,[h,\"ZTE\"],[u,f]],[/\\b(gen\\d{3}) b.+49h/i],[d,[h,\"Swiss\"],[u,f]],[/\\b(zur\\d{3}) b/i],[d,[h,\"Swiss\"],[u,m]],[/\\b((zeki)?tb.*\\b) b/i],[d,[h,\"Zeki\"],[u,m]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[h,\"Dragon Touch\"],d,[u,m]],[/\\b(ns-?\\w{0,9}) b/i],[d,[h,\"Insignia\"],[u,m]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[d,[h,\"NextBook\"],[u,m]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,\"Voice\"],d,[u,f]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[h,\"LvTel\"],d,[u,f]],[/\\b(ph-1) /i],[d,[h,\"Essential\"],[u,f]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[d,[h,\"Envizen\"],[u,m]],[/\\b(trio[-\\w\\. ]+) b/i],[d,[h,\"MachSpeed\"],[u,m]],[/\\btu_(1491) b/i],[d,[h,\"Rotor\"],[u,m]],[/(shield[\\w ]+) b/i],[d,[h,\"Nvidia\"],[u,m]],[/(sprint) (\\w+)/i],[h,d,[u,f]],[/(kin\\.[onetw]{3})/i],[[d,/\\./g,\" \"],[h,D],[u,f]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[d,[h,V],[u,m]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[d,[h,V],[u,f]],[/smart-tv.+(samsung)/i],[h,[u,T]],[/hbbtv.+maple;(\\d+)/i],[[d,/^/,\"SmartTV\"],[h,k],[u,T]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[h,N],[u,T]],[/(apple) ?tv/i],[h,[d,C+\" TV\"],[u,T]],[/crkey/i],[[d,A+\"cast\"],[h,w],[u,T]],[/droid.+aft(\\w)( bui|\\))/i],[d,[h,R],[u,T]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[d,[h,M],[u,T]],[/(bravia[\\w ]+)( bui|\\))/i],[d,[h,U],[u,T]],[/(mitv-\\w{5}) bui/i],[d,[h,x],[u,T]],[/Hbbtv.*(technisat) (.*);/i],[h,d,[u,T]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[h,K],[d,K],[u,T]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[u,T]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,d,[u,E]],[/droid.+; (shield) bui/i],[d,[h,\"Nvidia\"],[u,E]],[/(playstation [345portablevi]+)/i],[d,[h,U],[u,E]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[d,[h,D],[u,E]],[/((pebble))app/i],[h,d,[u,S]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[d,[h,C],[u,S]],[/droid.+; (glass) \\d/i],[d,[h,w],[u,S]],[/droid.+; (wt63?0{2,3})\\)/i],[d,[h,V],[u,S]],[/(quest( 2| pro)?)/i],[d,[h,F],[u,S]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[h,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[d,[u,f]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[d,[u,m]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[u,m]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[u,f]],[/(android[-\\w\\. ]{0,9});.+buil/i],[d,[h,\"Generic\"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[p,[l,\"EdgeHTML\"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[p,[l,\"Blink\"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i],[l,p],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[l,[p,q,z]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[l,\"Windows\"],[p,q,z]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/cfnetwork\\/.+darwin/i],[[p,/_/g,\".\"],[l,\"iOS\"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[l,j],[p,/_/g,\".\"]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[l,p],[/\\(bb(10);/i],[p,[l,v]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[p,[l,\"Symbian\"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[p,[l,b+\" OS\"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[p,[l,\"webOS\"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[p,[l,\"watchOS\"]],[/crkey\\/([\\d\\.]+)/i],[p,[l,A+\"cast\"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[l,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[l,p],[/(sunos) ?([\\w\\.\\d]*)/i],[[l,\"Solaris\"],p],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\\w\\.]*)/i],[l,p]]},X=function(e,i){if(typeof e===s&&(i=e,e=n),!(this instanceof X))return new X(e,i).getResult();var E=typeof t!==o&&t.navigator?t.navigator:n,T=e||(E&&E.userAgent?E.userAgent:\"\"),S=E&&E.userAgentData?E.userAgentData:n,g=i?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(J,i):J;return this.getBrowser=function(){var e={};return e[l]=n,e[p]=n,Y.call(e,T,g.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\\d\\.]/g,\"\").split(\".\")[0]:n}(e[p]),E&&E.brave&&typeof E.brave.isBrave==r&&(e[l]=\"Brave\"),e},this.getCPU=function(){var e={};return e[_]=n,Y.call(e,T,g.cpu),e},this.getDevice=function(){var e={};return e[h]=n,e[d]=n,e[u]=n,Y.call(e,T,g.device),!e[u]&&S&&S.mobile&&(e[u]=f),\"Macintosh\"==e[d]&&E&&typeof E.standalone!==o&&E.maxTouchPoints&&E.maxTouchPoints>2&&(e[d]=\"iPad\",e[u]=m),e},this.getEngine=function(){var e={};return e[l]=n,e[p]=n,Y.call(e,T,g.engine),e},this.getOS=function(){var e={};return e[l]=n,e[p]=n,Y.call(e,T,g.os),!e[l]&&S&&\"Unknown\"!=S.platform&&(e[l]=S.platform.replace(/chrome os/i,B).replace(/macos/i,j)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return T},this.setUA=function(e){return T=typeof e===a&&e.length>350?K(e,350):e,this},this.setUA(T),this};X.VERSION=\"0.7.34\",X.BROWSER=G([l,p,c]),X.CPU=G([_]),X.DEVICE=G([d,h,u,E,f,T,m,S,g]),X.ENGINE=X.OS=G([l,p]),e.exports&&(i=e.exports=X),i.UAParser=X;var Q=typeof t!==o&&(t.jQuery||t.Zepto);if(Q&&!Q.ua){var Z=new X;Q.ua=Z.getResult(),Q.ua.get=function(){return Z.getUA()},Q.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var i in t)Q.ua[i]=t[i]}}}(\"object\"==typeof window?window:t)}(sE,sE.exports);var aE=i(sE.exports),cE=pn,dE=Ze,lE=Y,uE=xo,hE=ht(\"iterator\"),pE=Object,_E=function(e){if(lE(e))return!1;var t=pE(e);return void 0!==t[hE]||\"@@iterator\"in t||dE(uE,cE(t))},EE=i(_E),fE=h;wi({global:!0,forced:fE.globalThis!==fE},{globalThis:fE});var mE=i(h);function TE(e,t){return function(){return e.apply(t,arguments)}}const{toString:SE}=Object.prototype,{getPrototypeOf:gE}=Object,RE=(CE=Object.create(null),e=>{const t=SE.call(e);return CE[t]||(CE[t]=t.slice(8,-1).toLowerCase())});var CE;const IE=e=>(e=e.toLowerCase(),t=>RE(t)===e),vE=e=>t=>typeof t===e,{isArray:yE}=Array,AE=vE(\"undefined\");const bE=IE(\"ArrayBuffer\");const wE=vE(\"string\"),OE=vE(\"function\"),NE=vE(\"number\"),DE=e=>null!==e&&\"object\"==typeof e,PE=e=>{if(\"object\"!==RE(e))return!1;const t=gE(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||EE(e))},LE=IE(\"Date\"),kE=IE(\"File\"),ME=IE(\"Blob\"),UE=IE(\"FileList\"),xE=IE(\"URLSearchParams\");function VE(e,t){let i,n,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if(\"object\"!=typeof e&&(e=[e]),yE(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const n=r?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let s;for(i=0;i<o;i++)s=n[i],t.call(null,e[s],s,e)}}function FE(e,t){t=t.toLowerCase();const i=Object.keys(e);let n,r=i.length;for(;r-- >0;)if(n=i[r],t===n.toLowerCase())return n;return null}const BE=void 0!==mE?mE:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,jE=e=>!AE(e)&&e!==BE;const GE=(WE=\"undefined\"!=typeof Uint8Array&&gE(Uint8Array),e=>WE&&e instanceof WE);var WE;const HE=IE(\"HTMLFormElement\"),KE=(e=>{let{hasOwnProperty:t}=e;return(e,i)=>t.call(e,i)})(Object.prototype),YE=IE(\"RegExp\"),qE=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};VE(i,((i,r)=>{let o;!1!==(o=t(i,r,e))&&(n[r]=o||i)})),Object.defineProperties(e,n)},zE=\"abcdefghijklmnopqrstuvwxyz\",JE=\"0123456789\",XE={DIGIT:JE,ALPHA:zE,ALPHA_DIGIT:zE+zE.toUpperCase()+JE};const QE=IE(\"AsyncFunction\");var ZE={isArray:yE,isArrayBuffer:bE,isBuffer:function(e){return null!==e&&!AE(e)&&null!==e.constructor&&!AE(e.constructor)&&OE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(\"function\"==typeof FormData&&e instanceof FormData||OE(e.append)&&(\"formdata\"===(t=RE(e))||\"object\"===t&&OE(e.toString)&&\"[object FormData]\"===e.toString()))},isArrayBufferView:function(e){let t;return t=\"undefined\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&bE(e.buffer),t},isString:wE,isNumber:NE,isBoolean:e=>!0===e||!1===e,isObject:DE,isPlainObject:PE,isUndefined:AE,isDate:LE,isFile:kE,isBlob:ME,isRegExp:YE,isFunction:OE,isStream:e=>DE(e)&&OE(e.pipe),isURLSearchParams:xE,isTypedArray:GE,isFileList:UE,forEach:VE,merge:function e(){const{caseless:t}=jE(this)&&this||{},i={},n=(n,r)=>{const o=t&&FE(i,r)||r;PE(i[o])&&PE(n)?i[o]=e(i[o],n):PE(n)?i[o]=e({},n):yE(n)?i[o]=n.slice():i[o]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&VE(arguments[e],n);return i},extend:function(e,t,i){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return VE(t,((t,n)=>{i&&OE(t)?e[n]=TE(t,i):e[n]=t}),{allOwnKeys:n}),e},trim:e=>jp(e)?jp(e).call(e):e.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\"),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,\"super\",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,n)=>{let r,o,s;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==i&&gE(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:RE,kindOfTest:IE,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return-1!==n&&n===i},toArray:e=>{if(!e)return null;if(yE(e))return e;let t=e.length;if(!NE(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const n=[];for(;null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:HE,hasOwnProperty:KE,hasOwnProp:KE,reduceDescriptors:qE,freezeMethods:e=>{qE(e,((t,i)=>{if(OE(e)&&-1!==[\"arguments\",\"caller\",\"callee\"].indexOf(i))return!1;const n=e[i];OE(n)&&(t.enumerable=!1,\"writable\"in t?t.writable=!1:t.set||(t.set=()=>{throw Error(\"Can not rewrite read-only method '\"+i+\"'\")}))}))},toObjectSet:(e,t)=>{const i={},n=e=>{e.forEach((e=>{i[e]=!0}))};return yE(e)?n(e):n(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:FE,global:BE,isContextDefined:jE,ALPHABET:XE,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XE.ALPHA_DIGIT,i=\"\";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i},isSpecCompliantForm:function(e){return!!(e&&OE(e.append)&&\"FormData\"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,n)=>{if(DE(e)){if(t.indexOf(e)>=0)return;if(!(\"toJSON\"in e)){t[n]=e;const r=yE(e)?[]:{};return VE(e,((e,t)=>{const o=i(e,n+1);!AE(o)&&(r[t]=o)})),t[n]=void 0,r}}return e};return i(e,0)},isAsyncFn:QE,isThenable:e=>e&&(DE(e)||OE(e))&&OE(e.then)&&OE(e.catch)};function $E(e,t,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name=\"AxiosError\",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}ZE.inherits($E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ZE.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ef=$E.prototype,tf={};[\"ERR_BAD_OPTION_VALUE\",\"ERR_BAD_OPTION\",\"ECONNABORTED\",\"ETIMEDOUT\",\"ERR_NETWORK\",\"ERR_FR_TOO_MANY_REDIRECTS\",\"ERR_DEPRECATED\",\"ERR_BAD_RESPONSE\",\"ERR_BAD_REQUEST\",\"ERR_CANCELED\",\"ERR_NOT_SUPPORT\",\"ERR_INVALID_URL\"].forEach((e=>{tf[e]={value:e}})),Object.defineProperties($E,tf),Object.defineProperty(ef,\"isAxiosError\",{value:!0}),$E.from=(e,t,i,n,r,o)=>{const s=Object.create(ef);return ZE.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>\"isAxiosError\"!==e)),$E.call(s,e.message,t,i,n,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};function nf(e){return ZE.isPlainObject(e)||ZE.isArray(e)}function rf(e){return ZE.endsWith(e,\"[]\")?e.slice(0,-2):e}function of(e,t,i){return e?e.concat(t).map((function(e,t){return e=rf(e),!i&&t?\"[\"+e+\"]\":e})).join(i?\".\":\"\"):t}const sf=ZE.toFlatObject(ZE,{},null,(function(e){return/^is[A-Z]/.test(e)}));function af(e,t,i){if(!ZE.isObject(e))throw new TypeError(\"target must be an object\");t=t||new FormData;const n=(i=ZE.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ZE.isUndefined(t[e])}))).metaTokens,r=i.visitor||d,o=i.dots,s=i.indexes,a=(i.Blob||\"undefined\"!=typeof Blob&&Blob)&&ZE.isSpecCompliantForm(t);if(!ZE.isFunction(r))throw new TypeError(\"visitor must be a function\");function c(e){if(null===e)return\"\";if(ZE.isDate(e))return e.toISOString();if(!a&&ZE.isBlob(e))throw new $E(\"Blob is not supported. Use a Buffer instead.\");return ZE.isArrayBuffer(e)||ZE.isTypedArray(e)?a&&\"function\"==typeof Blob?new Blob([e]):Buffer.from(e):e}function d(e,i,r){let a=e;if(e&&!r&&\"object\"==typeof e)if(ZE.endsWith(i,\"{}\"))i=n?i:i.slice(0,-2),e=JSON.stringify(e);else if(ZE.isArray(e)&&function(e){return ZE.isArray(e)&&!e.some(nf)}(e)||(ZE.isFileList(e)||ZE.endsWith(i,\"[]\"))&&(a=ZE.toArray(e)))return i=rf(i),a.forEach((function(e,n){!ZE.isUndefined(e)&&null!==e&&t.append(!0===s?of([i],n,o):null===s?i:i+\"[]\",c(e))})),!1;return!!nf(e)||(t.append(of(r,i,o),c(e)),!1)}const l=[],u=Object.assign(sf,{defaultVisitor:d,convertValue:c,isVisitable:nf});if(!ZE.isObject(e))throw new TypeError(\"data must be an object\");return function e(i,n){if(!ZE.isUndefined(i)){if(-1!==l.indexOf(i))throw Error(\"Circular reference detected in \"+n.join(\".\"));l.push(i),ZE.forEach(i,(function(i,o){!0===(!(ZE.isUndefined(i)||null===i)&&r.call(t,i,ZE.isString(o)?jp(o).call(o):o,n,u))&&e(i,n?n.concat(o):[o])})),l.pop()}}(e),t}function cf(e){const t={\"!\":\"%21\",\"'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\",\"%00\":\"\\0\"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function df(e,t){this._pairs=[],e&&af(e,this,t)}const lf=df.prototype;function uf(e){return encodeURIComponent(e).replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}function hf(e,t,i){if(!t)return e;const n=i&&i.encode||uf,r=i&&i.serialize;let o;if(o=r?r(t,i):ZE.isURLSearchParams(t)?t.toString():new df(t,i).toString(n),o){const t=e.indexOf(\"#\");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+o}return e}lf.append=function(e,t){this._pairs.push([e,t])},lf.toString=function(e){const t=e?function(t){return e.call(this,t,cf)}:cf;return this._pairs.map((function(e){return t(e[0])+\"=\"+t(e[1])}),\"\").join(\"&\")};var pf=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ZE.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},_f={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ef={exports:{}},ff=wi,mf=N,Tf=Qt.f;ff({target:\"Object\",stat:!0,forced:Object.defineProperty!==Tf,sham:!mf},{defineProperty:Tf});var Sf=ie.Object,gf=Ef.exports=function(e,t,i){return Sf.defineProperty(e,t,i)};Sf.defineProperty.sham&&(gf.sham=!0);var Rf=i(Ef.exports),Cf=R,If=Array.isArray||function(e){return\"Array\"==Cf(e)},vf=TypeError,yf=If,Af=jc,bf=te,wf=ht(\"species\"),Of=Array,Nf=function(e){var t;return yf(e)&&(t=e.constructor,(Af(t)&&(t===Of||yf(t.prototype))||bf(t)&&null===(t=t[wf]))&&(t=void 0)),void 0===t?Of:t},Df=function(e,t){return new(Nf(e))(0===t?0:t)},Pf=n,Lf=Ee,kf=ht(\"species\"),Mf=function(e){return Lf>=51||!Pf((function(){var t=[];return(t.constructor={})[kf]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Uf=wi,xf=n,Vf=If,Ff=te,Bf=Je,jf=Gi,Gf=function(e){if(e>9007199254740991)throw vf(\"Maximum allowed index exceeded\");return e},Wf=E_,Hf=Df,Kf=Mf,Yf=Ee,qf=ht(\"isConcatSpreadable\"),zf=Yf>=51||!xf((function(){var e=[];return e[qf]=!1,e.concat()[0]!==e})),Jf=function(e){if(!Ff(e))return!1;var t=e[qf];return void 0!==t?!!t:Vf(e)};Uf({target:\"Array\",proto:!0,arity:1,forced:!zf||!Kf(\"concat\")},{concat:function(e){var t,i,n,r,o,s=Bf(this),a=Hf(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(Jf(o=-1===t?s:arguments[t]))for(r=jf(o),Gf(c+r),i=0;i<r;i++,c++)i in o&&Wf(a,c,o[i]);else Gf(c+1),Wf(a,c++,o);return a.length=c,a}});var Xf={},Qf=R,Zf=Z,$f=Or.f,em=R_,tm=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Xf.f=function(e){return tm&&\"Window\"==Qf(e)?function(e){try{return $f(e)}catch(e){return em(tm)}}(e):$f(Zf(e))};var im={},nm=ht;im.f=nm;var rm=ie,om=Ze,sm=im,am=Qt.f,cm=function(e){var t=rm.Symbol||(rm.Symbol={});om(t,e)||am(t,e,{value:sm.f(e)})},dm=L,lm=ae,um=ht,hm=ha,pm=function(){var e=lm(\"Symbol\"),t=e&&e.prototype,i=t&&t.valueOf,n=um(\"toPrimitive\");t&&!t[n]&&hm(t,n,(function(e){return dm(i,this)}),{arity:1})},_m=Xt,Em=K,fm=Je,mm=Gi,Tm=Df,Sm=d([].push),gm=function(e){var t=1==e,i=2==e,n=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,d,l,u){for(var h,p,_=fm(c),E=Em(_),f=_m(d,l),m=mm(E),T=0,S=u||Tm,g=t?S(c,m):i||s?S(c,0):void 0;m>T;T++)if((a||T in E)&&(p=f(h=E[T],T,_),e))if(t)g[T]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return T;case 2:Sm(g,h)}else switch(e){case 4:return!1;case 7:Sm(g,h)}return o?-1:n||r?r:g}},Rm={forEach:gm(0),map:gm(1),filter:gm(2),some:gm(3),every:gm(4),find:gm(5),findIndex:gm(6),filterReject:gm(7)},Cm=wi,Im=h,vm=L,ym=d,Am=N,bm=Se,wm=n,Om=Ze,Nm=l,Dm=ii,Pm=Z,Lm=Ct,km=fn,Mm=B,Um=Io,xm=eo,Vm=Or,Fm=Xf,Bm=Br,jm=O,Gm=Qt,Wm=Qr,Hm=k,Km=ha,Ym=hc,qm=Ye,zm=Nr,Jm=nt,Xm=ht,Qm=im,Zm=cm,$m=pm,eT=Da,tT=ra,iT=Rm.forEach,nT=lr(\"hidden\"),rT=\"Symbol\",oT=\"prototype\",sT=tT.set,aT=tT.getterFor(rT),cT=Object[oT],dT=Im.Symbol,lT=dT&&dT[oT],uT=Im.TypeError,hT=Im.QObject,pT=jm.f,_T=Gm.f,ET=Fm.f,fT=Hm.f,mT=ym([].push),TT=qm(\"symbols\"),ST=qm(\"op-symbols\"),gT=qm(\"wks\"),RT=!hT||!hT[oT]||!hT[oT].findChild,CT=Am&&wm((function(){return 7!=Um(_T({},\"a\",{get:function(){return _T(this,\"a\",{value:7}).a}})).a}))?function(e,t,i){var n=pT(cT,t);n&&delete cT[t],_T(e,t,i),n&&e!==cT&&_T(cT,t,n)}:_T,IT=function(e,t){var i=TT[e]=Um(lT);return sT(i,{type:rT,tag:e,description:t}),Am||(i.description=t),i},vT=function(e,t,i){e===cT&&vT(ST,t,i),Dm(e);var n=Lm(t);return Dm(i),Om(TT,n)?(i.enumerable?(Om(e,nT)&&e[nT][n]&&(e[nT][n]=!1),i=Um(i,{enumerable:Mm(0,!1)})):(Om(e,nT)||_T(e,nT,Mm(1,{})),e[nT][n]=!0),CT(e,n,i)):_T(e,n,i)},yT=function(e,t){Dm(e);var i=Pm(t),n=xm(i).concat(OT(i));return iT(n,(function(t){Am&&!vm(AT,i,t)||vT(e,t,i[t])})),e},AT=function(e){var t=Lm(e),i=vm(fT,this,t);return!(this===cT&&Om(TT,t)&&!Om(ST,t))&&(!(i||!Om(this,t)||!Om(TT,t)||Om(this,nT)&&this[nT][t])||i)},bT=function(e,t){var i=Pm(e),n=Lm(t);if(i!==cT||!Om(TT,n)||Om(ST,n)){var r=pT(i,n);return!r||!Om(TT,n)||Om(i,nT)&&i[nT][n]||(r.enumerable=!0),r}},wT=function(e){var t=ET(Pm(e)),i=[];return iT(t,(function(e){Om(TT,e)||Om(zm,e)||mT(i,e)})),i},OT=function(e){var t=e===cT,i=ET(t?ST:Pm(e)),n=[];return iT(i,(function(e){!Om(TT,e)||t&&!Om(cT,e)||mT(n,TT[e])})),n};bm||(dT=function(){if(Nm(lT,this))throw uT(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?km(arguments[0]):void 0,t=Jm(e),i=function(e){this===cT&&vm(i,ST,e),Om(this,nT)&&Om(this[nT],t)&&(this[nT][t]=!1),CT(this,t,Mm(1,e))};return Am&&RT&&CT(cT,t,{configurable:!0,set:i}),IT(t,e)},Km(lT=dT[oT],\"toString\",(function(){return aT(this).tag})),Km(dT,\"withoutSetter\",(function(e){return IT(Jm(e),e)})),Hm.f=AT,Gm.f=vT,Wm.f=yT,jm.f=bT,Vm.f=Fm.f=wT,Bm.f=OT,Qm.f=function(e){return IT(Xm(e),e)},Am&&Ym(lT,\"description\",{configurable:!0,get:function(){return aT(this).description}})),Cm({global:!0,constructor:!0,wrap:!0,forced:!bm,sham:!bm},{Symbol:dT}),iT(xm(gT),(function(e){Zm(e)})),Cm({target:rT,stat:!0,forced:!bm},{useSetter:function(){RT=!0},useSimple:function(){RT=!1}}),Cm({target:\"Object\",stat:!0,forced:!bm,sham:!Am},{create:function(e,t){return void 0===t?Um(e):yT(Um(e),t)},defineProperty:vT,defineProperties:yT,getOwnPropertyDescriptor:bT}),Cm({target:\"Object\",stat:!0,forced:!bm},{getOwnPropertyNames:wT}),$m(),eT(dT,rT),zm[nT]=!0;var NT=Se&&!!Symbol.for&&!!Symbol.keyFor,DT=wi,PT=ae,LT=Ze,kT=fn,MT=Ye,UT=NT,xT=MT(\"string-to-symbol-registry\"),VT=MT(\"symbol-to-string-registry\");DT({target:\"Symbol\",stat:!0,forced:!UT},{for:function(e){var t=kT(e);if(LT(xT,t))return xT[t];var i=PT(\"Symbol\")(t);return xT[t]=i,VT[i]=t,i}});var FT=wi,BT=Ze,jT=ye,GT=be,WT=NT,HT=Ye(\"symbol-to-string-registry\");FT({target:\"Symbol\",stat:!0,forced:!WT},{keyFor:function(e){if(!jT(e))throw TypeError(GT(e)+\" is not a symbol\");if(BT(HT,e))return HT[e]}});var KT=If,YT=w,qT=R,zT=fn,JT=d([].push),XT=wi,QT=ae,ZT=m,$T=L,eS=d,tS=n,iS=w,nS=ye,rS=Xc,oS=function(e){if(YT(e))return e;if(KT(e)){for(var t=e.length,i=[],n=0;n<t;n++){var r=e[n];\"string\"==typeof r?JT(i,r):\"number\"!=typeof r&&\"Number\"!=qT(r)&&\"String\"!=qT(r)||JT(i,zT(r))}var o=i.length,s=!0;return function(e,t){if(s)return s=!1,t;if(KT(this))return t;for(var n=0;n<o;n++)if(i[n]===e)return t}}},sS=Se,aS=String,cS=QT(\"JSON\",\"stringify\"),dS=eS(/./.exec),lS=eS(\"\".charAt),uS=eS(\"\".charCodeAt),hS=eS(\"\".replace),pS=eS(1..toString),_S=/[\\uD800-\\uDFFF]/g,ES=/^[\\uD800-\\uDBFF]$/,fS=/^[\\uDC00-\\uDFFF]$/,mS=!sS||tS((function(){var e=QT(\"Symbol\")();return\"[null]\"!=cS([e])||\"{}\"!=cS({a:e})||\"{}\"!=cS(Object(e))})),TS=tS((function(){return'\"\\\\udf06\\\\ud834\"'!==cS(\"\\udf06\\ud834\")||'\"\\\\udead\"'!==cS(\"\\udead\")})),SS=function(e,t){var i=rS(arguments),n=oS(t);if(iS(n)||void 0!==e&&!nS(e))return i[1]=function(e,t){if(iS(n)&&(t=$T(n,this,aS(e),t)),!nS(t))return t},ZT(cS,null,i)},gS=function(e,t,i){var n=lS(i,t-1),r=lS(i,t+1);return dS(ES,e)&&!dS(fS,r)||dS(fS,e)&&!dS(ES,n)?\"\\\\u\"+pS(uS(e,0),16):e};cS&&XT({target:\"JSON\",stat:!0,arity:3,forced:mS||TS},{stringify:function(e,t,i){var n=rS(arguments),r=ZT(mS?SS:cS,null,n);return TS&&\"string\"==typeof r?hS(r,_S,gS):r}});var RS=Br,CS=Je;wi({target:\"Object\",stat:!0,forced:!Se||n((function(){RS.f(1)}))},{getOwnPropertySymbols:function(e){var t=RS.f;return t?t(CS(e)):[]}}),cm(\"asyncIterator\"),cm(\"hasInstance\"),cm(\"isConcatSpreadable\"),cm(\"iterator\"),cm(\"match\"),cm(\"matchAll\"),cm(\"replace\"),cm(\"search\"),cm(\"species\"),cm(\"split\");var IS=pm;cm(\"toPrimitive\"),IS();var vS=ae,yS=Da;cm(\"toStringTag\"),yS(vS(\"Symbol\"),\"Symbol\"),cm(\"unscopables\"),Da(h.JSON,\"JSON\",!0);var AS=ie.Symbol,bS=ht,wS=Qt.f,OS=bS(\"metadata\"),NS=Function.prototype;void 0===NS[OS]&&wS(NS,OS,{value:null}),cm(\"dispose\"),cm(\"metadata\");var DS=AS;cm(\"asyncDispose\");var PS=d,LS=ae(\"Symbol\"),kS=LS.keyFor,MS=PS(LS.prototype.valueOf),US=LS.isRegisteredSymbol||function(e){try{return void 0!==kS(MS(e))}catch(e){return!1}};wi({target:\"Symbol\",stat:!0},{isRegisteredSymbol:US});for(var xS=Ye,VS=ae,FS=d,BS=ye,jS=ht,GS=VS(\"Symbol\"),WS=GS.isWellKnownSymbol,HS=VS(\"Object\",\"getOwnPropertyNames\"),KS=FS(GS.prototype.valueOf),YS=xS(\"wks\"),qS=0,zS=HS(GS),JS=zS.length;qS<JS;qS++)try{var XS=zS[qS];BS(GS[XS])&&jS(XS)}catch(e){}var QS=function(e){if(WS&&WS(e))return!0;try{for(var t=KS(e),i=0,n=HS(YS),r=n.length;i<r;i++)if(YS[n[i]]==t)return!0}catch(e){}return!1};wi({target:\"Symbol\",stat:!0,forced:!0},{isWellKnownSymbol:QS}),cm(\"matcher\"),cm(\"observable\"),wi({target:\"Symbol\",stat:!0,name:\"isRegisteredSymbol\"},{isRegistered:US}),wi({target:\"Symbol\",stat:!0,name:\"isWellKnownSymbol\",forced:!0},{isWellKnown:QS}),cm(\"metadataKey\"),cm(\"patternMatch\"),cm(\"replaceAll\");var ZS=i(DS),$S=i(im.f(\"iterator\"));function eg(e){return eg=\"function\"==typeof ZS&&\"symbol\"==typeof $S?function(e){return typeof e}:function(e){return e&&\"function\"==typeof ZS&&e.constructor===ZS&&e!==ZS.prototype?\"symbol\":typeof e},eg(e)}var tg=i(im.f(\"toPrimitive\"));function ig(e){var t=function(e,t){if(\"object\"!==eg(e)||null===e)return e;var i=e[tg];if(void 0!==i){var n=i.call(e,t||\"default\");if(\"object\"!==eg(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===eg(t)?t:String(t)}function ng(e,t,i){return(t=ig(t))in e?Rf(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var rg=n,og=ht(\"iterator\"),sg=!rg((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,i=new URLSearchParams(\"a=1&a=2\"),n=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,i){t.delete(\"b\"),n+=i+e})),i.delete(\"a\",2),!e.toJSON||!i.has(\"a\",1)||i.has(\"a\",2)||!t.size&&true||!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[og]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://ÑÐµÑÑ\").host||\"#%D0%B1\"!==new URL(\"http://a#Ð±\").hash||\"a1c3\"!==n||\"x\"!==new URL(\"http://x\",void 0).host})),ag=ha,cg=wi,dg=h,lg=L,ug=d,hg=N,pg=sg,_g=ha,Eg=hc,fg=function(e,t,i){for(var n in t)i&&i.unsafe&&e[n]?e[n]=t[n]:ag(e,n,t[n],i);return e},mg=Da,Tg=Va,Sg=ra,gg=Sc,Rg=w,Cg=Ze,Ig=Xt,vg=pn,yg=ii,Ag=te,bg=fn,wg=Io,Og=B,Ng=es,Dg=qo,Pg=Zc,Lg=b_,kg=ht(\"iterator\"),Mg=\"URLSearchParams\",Ug=Mg+\"Iterator\",xg=Sg.set,Vg=Sg.getterFor(Mg),Fg=Sg.getterFor(Ug),Bg=Object.getOwnPropertyDescriptor,jg=function(e){if(!hg)return dg[e];var t=Bg(dg,e);return t&&t.value},Gg=jg(\"fetch\"),Wg=jg(\"Request\"),Hg=jg(\"Headers\"),Kg=Wg&&Wg.prototype,Yg=Hg&&Hg.prototype,qg=dg.RegExp,zg=dg.TypeError,Jg=dg.decodeURIComponent,Xg=dg.encodeURIComponent,Qg=ug(\"\".charAt),Zg=ug([].join),$g=ug([].push),eR=ug(\"\".replace),tR=ug([].shift),iR=ug([].splice),nR=ug(\"\".split),rR=ug(\"\".slice),oR=/\\+/g,sR=Array(4),aR=function(e){return sR[e-1]||(sR[e-1]=qg(\"((?:%[\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},cR=function(e){try{return Jg(e)}catch(t){return e}},dR=function(e){var t=eR(e,oR,\" \"),i=4;try{return Jg(t)}catch(e){for(;i;)t=eR(t,aR(i--),cR);return t}},lR=/[!'()~]|%20/g,uR={\"!\":\"%21\",\"'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},hR=function(e){return uR[e]},pR=function(e){return eR(Xg(e),lR,hR)},_R=Tg((function(e,t){xg(this,{type:Ug,iterator:Ng(Vg(e).entries),kind:t})}),\"Iterator\",(function(){var e=Fg(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value=\"keys\"===t?n.key:\"values\"===t?n.value:[n.key,n.value]),i}),!0),ER=function(e){this.entries=[],this.url=null,void 0!==e&&(Ag(e)?this.parseObject(e):this.parseQuery(\"string\"==typeof e?\"?\"===Qg(e,0)?rR(e,1):e:bg(e)))};ER.prototype={type:Mg,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,r,o,s,a,c=Dg(e);if(c)for(i=(t=Ng(e,c)).next;!(n=lg(i,t)).done;){if(o=(r=Ng(yg(n.value))).next,(s=lg(o,r)).done||(a=lg(o,r)).done||!lg(o,r).done)throw zg(\"Expected sequence with length 2\");$g(this.entries,{key:bg(s.value),value:bg(a.value)})}else for(var d in e)Cg(e,d)&&$g(this.entries,{key:d,value:bg(e[d])})},parseQuery:function(e){if(e)for(var t,i,n=nR(e,\"&\"),r=0;r<n.length;)(t=n[r++]).length&&(i=nR(t,\"=\"),$g(this.entries,{key:dR(tR(i)),value:dR(Zg(i,\"=\"))}))},serialize:function(){for(var e,t=this.entries,i=[],n=0;n<t.length;)e=t[n++],$g(i,pR(e.key)+\"=\"+pR(e.value));return Zg(i,\"&\")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var fR=function(){gg(this,mR);var e=xg(this,new ER(arguments.length>0?arguments[0]:void 0));hg||(this.size=e.entries.length)},mR=fR.prototype;if(fg(mR,{append:function(e,t){var i=Vg(this);Pg(arguments.length,2),$g(i.entries,{key:bg(e),value:bg(t)}),hg||this.length++,i.updateURL()},delete:function(e){for(var t=Vg(this),i=Pg(arguments.length,1),n=t.entries,r=bg(e),o=i<2?void 0:arguments[1],s=void 0===o?o:bg(o),a=0;a<n.length;){var c=n[a];if(c.key!==r||void 0!==s&&c.value!==s)a++;else if(iR(n,a,1),void 0!==s)break}hg||(this.size=n.length),t.updateURL()},get:function(e){var t=Vg(this).entries;Pg(arguments.length,1);for(var i=bg(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){var t=Vg(this).entries;Pg(arguments.length,1);for(var i=bg(e),n=[],r=0;r<t.length;r++)t[r].key===i&&$g(n,t[r].value);return n},has:function(e){for(var t=Vg(this).entries,i=Pg(arguments.length,1),n=bg(e),r=i<2?void 0:arguments[1],o=void 0===r?r:bg(r),s=0;s<t.length;){var a=t[s++];if(a.key===n&&(void 0===o||a.value===o))return!0}return!1},set:function(e,t){var i=Vg(this);Pg(arguments.length,1);for(var n,r=i.entries,o=!1,s=bg(e),a=bg(t),c=0;c<r.length;c++)(n=r[c]).key===s&&(o?iR(r,c--,1):(o=!0,n.value=a));o||$g(r,{key:s,value:a}),hg||(this.size=r.length),i.updateURL()},sort:function(){var e=Vg(this);Lg(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,i=Vg(this).entries,n=Ig(e,arguments.length>1?arguments[1]:void 0),r=0;r<i.length;)n((t=i[r++]).value,t.key,this)},keys:function(){return new _R(this,\"keys\")},values:function(){return new _R(this,\"values\")},entries:function(){return new _R(this,\"entries\")}},{enumerable:!0}),_g(mR,kg,mR.entries,{name:\"entries\"}),_g(mR,\"toString\",(function(){return Vg(this).serialize()}),{enumerable:!0}),hg&&Eg(mR,\"size\",{get:function(){return Vg(this).entries.length},configurable:!0,enumerable:!0}),mg(fR,Mg),cg({global:!0,constructor:!0,forced:!pg},{URLSearchParams:fR}),!pg&&Rg(Hg)){var TR=ug(Yg.has),SR=ug(Yg.set),gR=function(e){if(Ag(e)){var t,i=e.body;if(vg(i)===Mg)return t=e.headers?new Hg(e.headers):new Hg,TR(t,\"content-type\")||SR(t,\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),wg(e,{body:Og(0,bg(i)),headers:Og(0,t)})}return e};if(Rg(Gg)&&cg({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Gg(e,arguments.length>1?gR(arguments[1]):{})}}),Rg(Wg)){var RR=function(e){return gg(this,Kg),new Wg(e,arguments.length>1?gR(arguments[1]):{})};Kg.constructor=RR,RR.prototype=Kg,cg({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RR})}}var CR={URLSearchParams:fR,getState:Vg},IR=i(ie.URLSearchParams),vR={isBrowser:!0,classes:{URLSearchParams:void 0!==IR?IR:df,FormData:\"undefined\"!=typeof FormData?FormData:null,Blob:\"undefined\"!=typeof Blob?Blob:null},protocols:[\"http\",\"https\",\"file\",\"blob\",\"url\",\"data\"]};const yR=\"undefined\"!=typeof window&&\"undefined\"!=typeof document,AR=(bR=\"undefined\"!=typeof navigator&&navigator.product,yR&&[\"ReactNative\",\"NativeScript\",\"NS\"].indexOf(bR)<0);var bR;const wR=\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&\"function\"==typeof self.importScripts;function OR(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function NR(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?OR(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OR(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var DR=NR(NR({},Object.freeze({__proto__:null,hasBrowserEnv:yR,hasStandardBrowserEnv:AR,hasStandardBrowserWebWorkerEnv:wR})),vR);var PR=ii,LR=L,kR=Ze,MR=l,UR=function(){var e=PR(this),t=\"\";return e.hasIndices&&(t+=\"d\"),e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.unicodeSets&&(t+=\"v\"),e.sticky&&(t+=\"y\"),t},xR=RegExp.prototype,VR=function(e){var t=e.flags;return void 0!==t||\"flags\"in xR||kR(e,\"flags\")||!MR(xR,e)?t:LR(UR,e)},FR=Ch.charAt,BR=L,jR=ii,GR=w,WR=R,HR=/./.exec,KR=TypeError,YR=wi,qR=L,zR=v,JR=Va,XR=ic,QR=J,ZR=Bi,$R=fn,eC=ii,tC=Y,iC=R,nC=tn,rC=VR,oC=ke,sC=n,aC=Jc,cC=function(e,t,i){return t+(i?FR(e,t).length:1)},dC=function(e,t){var i=e.exec;if(GR(i)){var n=BR(i,e,t);return null!==n&&jR(n),n}if(\"RegExp\"===WR(e))return BR(HR,e,t);throw KR(\"RegExp#exec called on incompatible receiver\")},lC=ra,uC=ht(\"matchAll\"),hC=\"RegExp String\",pC=hC+\" Iterator\",_C=lC.set,EC=lC.getterFor(pC),fC=TypeError,mC=zR(\"\".indexOf),TC=zR(\"\".matchAll),SC=!!TC&&!sC((function(){TC(\"a\",/./)})),gC=JR((function(e,t,i,n){_C(this,{type:pC,regexp:e,string:t,global:i,unicode:n,done:!1})}),hC,(function(){var e=EC(this);if(e.done)return XR(void 0,!0);var t=e.regexp,i=e.string,n=dC(t,i);return null===n?(e.done=!0,XR(void 0,!0)):e.global?(\"\"===$R(n[0])&&(t.lastIndex=cC(i,ZR(t.lastIndex),e.unicode)),XR(n,!1)):(e.done=!0,XR(n,!1))})),RC=function(e){var t,i,n,r=eC(this),o=$R(e),s=aC(r,RegExp),a=$R(rC(r));return t=new s(s===RegExp?r.source:r,a),i=!!~mC(a,\"g\"),n=!!~mC(a,\"u\"),t.lastIndex=ZR(r.lastIndex),new gC(t,o,i,n)};YR({target:\"String\",proto:!0,forced:SC},{matchAll:function(e){var t,i,n,r,o=QR(this);if(tC(e)){if(SC)return TC(o,e)}else{if(nC(e)&&(t=$R(QR(rC(e))),!~mC(t,\"g\")))throw fC(\"`.matchAll` does not allow non-global regexes\");if(SC)return TC(o,e);if(void 0===(n=oC(e,uC))&&\"RegExp\"==iC(e)&&(n=RC),n)return qR(n,e,o)}return i=$R(o),r=new RegExp(e,\"g\"),qR(RC,r,i)}});var CC=Xi(\"String\").matchAll,IC=l,vC=CC,yC=String.prototype,AC=function(e){var t=e.matchAll;return\"string\"==typeof e||e===yC||IC(yC,e)&&t===yC.matchAll?vC:t},bC=i(AC);function wC(e){function t(e,i,n,r){let o=e[r++];if(\"__proto__\"===o)return!0;const s=Number.isFinite(+o),a=r>=e.length;if(o=!o&&ZE.isArray(n)?n.length:o,a)return ZE.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!s;n[o]&&ZE.isObject(n[o])||(n[o]=[]);return t(e,i,n[o],r)&&ZE.isArray(n[o])&&(n[o]=function(e){const t={},i=Object.keys(e);let n;const r=i.length;let o;for(n=0;n<r;n++)o=i[n],t[o]=e[o];return t}(n[o])),!s}if(ZE.isFormData(e)&&ZE.isFunction(e.entries)){const i={};return ZE.forEachEntry(e,((e,n)=>{t(function(e){return bC(ZE).call(ZE,/\\w+|\\[(\\w*)]/g,e).map((e=>\"[]\"===e[0]?\"\":e[1]||e[0]))}(e),n,i,0)})),i}return null}const OC={transitional:_f,adapter:[\"xhr\",\"http\"],transformRequest:[function(e,t){const i=t.getContentType()||\"\",n=i.indexOf(\"application/json\")>-1,r=ZE.isObject(e);r&&ZE.isHTMLForm(e)&&(e=new FormData(e));if(ZE.isFormData(e))return n?JSON.stringify(wC(e)):e;if(ZE.isArrayBuffer(e)||ZE.isBuffer(e)||ZE.isStream(e)||ZE.isFile(e)||ZE.isBlob(e))return e;if(ZE.isArrayBufferView(e))return e.buffer;if(ZE.isURLSearchParams(e))return t.setContentType(\"application/x-www-form-urlencoded;charset=utf-8\",!1),e.toString();let o;if(r){if(i.indexOf(\"application/x-www-form-urlencoded\")>-1)return function(e,t){return af(e,new DR.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,n){return DR.isNode&&ZE.isBuffer(e)?(this.append(t,e.toString(\"base64\")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=ZE.isFileList(e))||i.indexOf(\"multipart/form-data\")>-1){const t=this.env&&this.env.FormData;return af(o?{\"files[]\":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType(\"application/json\",!1),function(e,t,i){if(ZE.isString(e))try{return(t||JSON.parse)(e),jp(ZE).call(ZE,e)}catch(e){if(\"SyntaxError\"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||OC.transitional,i=t&&t.forcedJSONParsing,n=\"json\"===this.responseType;if(e&&ZE.isString(e)&&(i&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(i){if(\"SyntaxError\"===e.name)throw $E.from(e,$E.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,maxBodyLength:-1,env:{FormData:DR.classes.FormData,Blob:DR.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":void 0}}};ZE.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\"],(e=>{OC.headers[e]={}}));var NC=OC;const DC=ZE.toObjectSet([\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"]);const PC=Symbol(\"internals\");function LC(e){var t;return e&&jp(t=String(e)).call(t).toLowerCase()}function kC(e){return!1===e||null==e?e:ZE.isArray(e)?e.map(kC):String(e)}function MC(e,t,i,n,r){return ZE.isFunction(n)?n.call(this,t,i):(r&&(t=i),ZE.isString(t)?ZE.isString(n)?-1!==t.indexOf(n):ZE.isRegExp(n)?n.test(t):void 0:void 0)}class UC{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function r(e,t,i){const r=LC(t);if(!r)throw new Error(\"header name must be a non-empty string\");const o=ZE.findKey(n,r);(!o||void 0===n[o]||!0===i||void 0===i&&!1!==n[o])&&(n[o||t]=kC(e))}const o=(e,t)=>ZE.forEach(e,((e,i)=>r(e,i,t)));var s;return ZE.isPlainObject(e)||e instanceof this.constructor?o(e,t):ZE.isString(e)&&(e=jp(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(jp(s=e).call(s))?o((e=>{const t={};let i,n,r;return e&&e.split(\"\\n\").forEach((function(e){var o,s;r=e.indexOf(\":\"),i=jp(o=e.substring(0,r)).call(o).toLowerCase(),n=jp(s=e.substring(r+1)).call(s),!i||t[i]&&DC[i]||(\"set-cookie\"===i?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+\", \"+n:n)})),t})(e),t):null!=e&&r(t,e,i),this}get(e,t){if(e=LC(e)){const i=ZE.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}(e);if(ZE.isFunction(t))return t.call(this,e,i);if(ZE.isRegExp(t))return t.exec(e);throw new TypeError(\"parser must be boolean|regexp|function\")}}}has(e,t){if(e=LC(e)){const i=ZE.findKey(this,e);return!(!i||void 0===this[i]||t&&!MC(0,this[i],i,t))}return!1}delete(e,t){const i=this;let n=!1;function r(e){if(e=LC(e)){const r=ZE.findKey(i,e);!r||t&&!MC(0,i[r],r,t)||(delete i[r],n=!0)}}return ZE.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const r=t[i];e&&!MC(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,i={};return ZE.forEach(this,((n,r)=>{var o;const s=ZE.findKey(i,r);if(s)return t[s]=kC(n),void delete t[r];const a=e?function(e){return jp(e).call(e).toLowerCase().replace(/([a-z\\d])(\\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(r):jp(o=String(r)).call(o);a!==r&&delete t[r],t[a]=kC(n),i[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return ZE.forEach(this,((i,n)=>{null!=i&&!1!==i&&(t[n]=e&&ZE.isArray(i)?i.join(\", \"):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,i]=e;return t+\": \"+i})).join(\"\\n\")}get[Symbol.toStringTag](){return\"AxiosHeaders\"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[PC]=this[PC]={accessors:{}}).accessors,i=this.prototype;function n(e){const n=LC(e);t[n]||(!function(e,t){const i=ZE.toCamelCase(\" \"+t);[\"get\",\"set\",\"has\"].forEach((n=>{Object.defineProperty(e,n+i,{value:function(e,i,r){return this[n].call(this,t,e,i,r)},configurable:!0})}))}(i,e),t[n]=!0)}return ZE.isArray(e)?e.forEach(n):n(e),this}}UC.accessor([\"Content-Type\",\"Content-Length\",\"Accept\",\"Accept-Encoding\",\"User-Agent\",\"Authorization\"]),ZE.reduceDescriptors(UC.prototype,((e,t)=>{let{value:i}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(e){this[n]=e}}})),ZE.freezeMethods(UC);var xC=UC;function VC(e,t){const i=this||NC,n=t||i,r=xC.from(n.headers);let o=n.data;return ZE.forEach(e,(function(e){o=e.call(i,o,r.normalize(),t?t.status:void 0)})),r.normalize(),o}function FC(e){return!(!e||!e.__CANCEL__)}function BC(e,t,i){$E.call(this,null==e?\"canceled\":e,$E.ERR_CANCELED,t,i),this.name=\"CanceledError\"}ZE.inherits(BC,$E,{__CANCEL__:!0});var jC=DR.hasStandardBrowserEnv?{write(e,t,i,n,r,o){const s=[e+\"=\"+encodeURIComponent(t)];ZE.isNumber(i)&&s.push(\"expires=\"+new Date(i).toGMTString()),ZE.isString(n)&&s.push(\"path=\"+n),ZE.isString(r)&&s.push(\"domain=\"+r),!0===o&&s.push(\"secure\"),document.cookie=s.join(\"; \")},read(e){const t=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+e+\")=([^;]*)\"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,\"\",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function GC(e,t){return e&&!function(e){return/^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(e)}(t)?function(e,t){return t?e.replace(/\\/?\\/$/,\"\")+\"/\"+t.replace(/^\\/+/,\"\"):e}(e,t):t}var WC=DR.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement(\"a\");let i;function n(i){let n=i;return e&&(t.setAttribute(\"href\",n),n=t.href),t.setAttribute(\"href\",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,\"\"):\"\",host:t.host,search:t.search?t.search.replace(/^\\?/,\"\"):\"\",hash:t.hash?t.hash.replace(/^#/,\"\"):\"\",hostname:t.hostname,port:t.port,pathname:\"/\"===t.pathname.charAt(0)?t.pathname:\"/\"+t.pathname}}return i=n(window.location.href),function(e){const t=ZE.isString(e)?n(e):e;return t.protocol===i.protocol&&t.host===i.host}}():function(){return!0};function HC(e,t){let i=0;const n=function(e,t){e=e||10;const i=new Array(e),n=new Array(e);let r,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),d=n[s];r||(r=c),i[o]=a,n[o]=c;let l=s,u=0;for(;l!==o;)u+=i[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-r<t)return;const h=d&&c-d;return h?Math.round(1e3*u/h):void 0}}(50,250);return r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-i,c=n(a);i=o;const d={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:r};d[t?\"download\":\"upload\"]=!0,e(d)}}var KC=\"undefined\"!=typeof XMLHttpRequest&&function(e){return new Gh((function(t,i){let n=e.data;const r=xC.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function d(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener(\"abort\",o)}if(ZE.isFormData(n))if(DR.hasStandardBrowserEnv||DR.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if(!1!==(s=r.getContentType())){const[e,...t]=s?s.split(\";\").map((e=>jp(e).call(e))).filter(Boolean):[];r.setContentType([e||\"multipart/form-data\",...t].join(\"; \"))}let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||\"\",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):\"\";r.set(\"Authorization\",\"Basic \"+btoa(t+\":\"+i))}const u=GC(e.baseURL,e.url);function h(){if(!l)return;const n=xC.from(\"getAllResponseHeaders\"in l&&l.getAllResponseHeaders());!function(e,t,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new $E(\"Request failed with status code \"+i.status,[$E.ERR_BAD_REQUEST,$E.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}((function(e){t(e),d()}),(function(e){i(e),d()}),{data:a&&\"text\"!==a&&\"json\"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),hf(u,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,\"onloadend\"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf(\"file:\"))&&setTimeout(h)},l.onabort=function(){l&&(i(new $E(\"Request aborted\",$E.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new $E(\"Network Error\",$E.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?\"timeout of \"+e.timeout+\"ms exceeded\":\"timeout exceeded\";const n=e.transitional||_f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new $E(t,n.clarifyTimeoutError?$E.ETIMEDOUT:$E.ECONNABORTED,e,l)),l=null},DR.hasStandardBrowserEnv&&(c&&ZE.isFunction(c)&&(c=c(e)),c||!1!==c&&WC(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&jC.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===n&&r.setContentType(null),\"setRequestHeader\"in l&&ZE.forEach(r.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),ZE.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&\"json\"!==a&&(l.responseType=e.responseType),\"function\"==typeof e.onDownloadProgress&&l.addEventListener(\"progress\",HC(e.onDownloadProgress,!0)),\"function\"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener(\"progress\",HC(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{l&&(i(!t||t.type?new BC(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener(\"abort\",o)));const p=function(e){const t=/^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(e);return t&&t[1]||\"\"}(u);p&&-1===DR.protocols.indexOf(p)?i(new $E(\"Unsupported protocol \"+p+\":\",$E.ERR_BAD_REQUEST,e)):l.send(n||null)}))};const YC={http:null,xhr:KC};ZE.forEach(YC,((e,t)=>{if(e){try{Object.defineProperty(e,\"name\",{value:t})}catch(e){}Object.defineProperty(e,\"adapterName\",{value:t})}}));const qC=e=>\"- \".concat(e),zC=e=>ZE.isFunction(e)||null===e||!1===e;var JC={getAdapter:e=>{e=ZE.isArray(e)?e:[e];const{length:t}=e;let i,n;const r={};for(let o=0;o<t;o++){let t;if(i=e[o],n=i,!zC(i)&&(n=YC[(t=String(i)).toLowerCase()],void 0===n))throw new $E(\"Unknown adapter '\".concat(t,\"'\"));if(n)break;r[t||\"#\"+o]=n}if(!n){const e=Object.entries(r).map((e=>{let[t,i]=e;return\"adapter \".concat(t,\" \")+(!1===i?\"is not supported by the environment\":\"is not available in the build\")}));throw new $E(\"There is no suitable adapter to dispatch the request \"+(t?e.length>1?\"since :\\n\"+e.map(qC).join(\"\\n\"):\" \"+qC(e[0]):\"as no adapter specified\"),\"ERR_NOT_SUPPORT\")}return n},adapters:YC};function XC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new BC(null,e)}function QC(e){XC(e),e.headers=xC.from(e.headers),e.data=VC.call(e,e.transformRequest),-1!==[\"post\",\"put\",\"patch\"].indexOf(e.method)&&e.headers.setContentType(\"application/x-www-form-urlencoded\",!1);return JC.getAdapter(e.adapter||NC.adapter)(e).then((function(t){return XC(e),t.data=VC.call(e,e.transformResponse,t),t.headers=xC.from(t.headers),t}),(function(t){return FC(t)||(XC(e),t&&t.response&&(t.response.data=VC.call(e,e.transformResponse,t.response),t.response.headers=xC.from(t.response.headers))),Gh.reject(t)}))}function ZC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const $C=e=>e instanceof xC?function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ZC(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZC(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e):e;function eI(e,t){t=t||{};const i={};function n(e,t,i){return ZE.isPlainObject(e)&&ZE.isPlainObject(t)?ZE.merge.call({caseless:i},e,t):ZE.isPlainObject(t)?ZE.merge({},t):ZE.isArray(t)?t.slice():t}function r(e,t,i){return ZE.isUndefined(t)?ZE.isUndefined(e)?void 0:n(void 0,e,i):n(e,t,i)}function o(e,t){if(!ZE.isUndefined(t))return n(void 0,t)}function s(e,t){return ZE.isUndefined(t)?ZE.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(i,r,o){return o in t?n(i,r):o in e?n(void 0,i):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>r($C(e),$C(t),!0)};return ZE.forEach(Object.keys(Object.assign({},e,t)),(function(n){const o=c[n]||r,s=o(e[n],t[n],n);ZE.isUndefined(s)&&o!==a||(i[n]=s)})),i}const tI=\"1.6.8\",iI={};[\"object\",\"boolean\",\"number\",\"function\",\"string\",\"symbol\"].forEach(((e,t)=>{iI[e]=function(i){return typeof i===e||\"a\"+(t<1?\"n \":\" \")+e}}));const nI={};iI.transitional=function(e,t,i){function n(e,t){return\"[Axios v\"+tI+\"] Transitional option '\"+e+\"'\"+t+(i?\". \"+i:\"\")}return(i,r,o)=>{if(!1===e)throw new $E(n(r,\" has been removed\"+(t?\" in \"+t:\"\")),$E.ERR_DEPRECATED);return t&&!nI[r]&&(nI[r]=!0,console.warn(n(r,\" has been deprecated since v\"+t+\" and will be removed in the near future\"))),!e||e(i,r,o)}};var rI={assertOptions:function(e,t,i){if(\"object\"!=typeof e)throw new $E(\"options must be an object\",$E.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const o=n[r],s=t[o];if(s){const t=e[o],i=void 0===t||s(t,o,e);if(!0!==i)throw new $E(\"option \"+o+\" must be \"+i,$E.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new $E(\"Unknown option \"+o,$E.ERR_BAD_OPTION)}},validators:iI};const oI=rI.validators;let sI=class{constructor(e){this.defaults=e,this.interceptors={request:new pf,response:new pf}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const i=t.stack?t.stack.replace(/^.+\\n/,\"\"):\"\";e.stack?i&&!String(e.stack).endsWith(i.replace(/^.+\\n.+\\n/,\"\"))&&(e.stack+=\"\\n\"+i):e.stack=i}throw e}}_request(e,t){\"string\"==typeof e?(t=t||{}).url=e:t=e||{},t=eI(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:r}=t;void 0!==i&&rI.assertOptions(i,{silentJSONParsing:oI.transitional(oI.boolean),forcedJSONParsing:oI.transitional(oI.boolean),clarifyTimeoutError:oI.transitional(oI.boolean)},!1),null!=n&&(ZE.isFunction(n)?t.paramsSerializer={serialize:n}:rI.assertOptions(n,{encode:oI.function,serialize:oI.function},!0)),t.method=(t.method||this.defaults.method||\"get\").toLowerCase();let o=r&&ZE.merge(r.common,r[t.method]);r&&ZE.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],(e=>{delete r[e]})),t.headers=xC.concat(o,r);const s=[];let a=!0;this.interceptors.request.forEach((function(e){\"function\"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let d;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,u=0;if(!a){const e=[QC.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,d=Gh.resolve(t);u<l;)d=d.then(e[u++],e[u++]);return d}l=s.length;let h=t;for(u=0;u<l;){const e=s[u++],t=s[u++];try{h=e(h)}catch(e){t.call(this,e);break}}try{d=QC.call(this,h)}catch(e){return Gh.reject(e)}for(u=0,l=c.length;u<l;)d=d.then(c[u++],c[u++]);return d}getUri(e){return hf(GC((e=eI(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};ZE.forEach([\"delete\",\"get\",\"head\",\"options\"],(function(e){sI.prototype[e]=function(t,i){return this.request(eI(i||{},{method:e,url:t,data:(i||{}).data}))}})),ZE.forEach([\"post\",\"put\",\"patch\"],(function(e){function t(t){return function(i,n,r){return this.request(eI(r||{},{method:e,headers:t?{\"Content-Type\":\"multipart/form-data\"}:{},url:i,data:n}))}}sI.prototype[e]=t(),sI.prototype[e+\"Form\"]=t(!0)}));var aI=sI;class cI{constructor(e){if(\"function\"!=typeof e)throw new TypeError(\"executor must be a function.\");let t;this.promise=new Gh((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const n=new Gh((e=>{i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,r){i.reason||(i.reason=new BC(e,n,r),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new cI((function(t){e=t})),cancel:e}}}var dI=cI;const lI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lI).forEach((e=>{let[t,i]=e;lI[i]=t}));var uI=lI;const hI=function e(t){const i=new aI(t),n=TE(aI.prototype.request,i);return ZE.extend(n,aI.prototype,i,{allOwnKeys:!0}),ZE.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return e(eI(t,i))},n}(NC);hI.Axios=aI,hI.CanceledError=BC,hI.CancelToken=dI,hI.isCancel=FC,hI.VERSION=tI,hI.toFormData=af,hI.AxiosError=$E,hI.Cancel=hI.CanceledError,hI.all=function(e){return Gh.all(e)},hI.spread=function(e){return function(t){return e.apply(null,t)}},hI.isAxiosError=function(e){return ZE.isObject(e)&&!0===e.isAxiosError},hI.mergeConfig=eI,hI.AxiosHeaders=xC,hI.formToJSON=e=>wC(ZE.isHTMLForm(e)?new FormData(e):e),hI.getAdapter=JC.getAdapter,hI.HttpStatusCode=uI,hI.default=hI;var pI=hI;const _I=()=>{};function EI(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:_I};return e.promise=new Gh(((t,i)=>{e.resolve=i=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(i),e.value=i)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,i(t))}})),e}const fI=new Map,mI=new Map,TI=new Map;let SI=function(e){return e.WIN_10=\"Windows 10\",e.WIN_81=\"Windows 8.1\",e.WIN_8=\"Windows 8\",e.WIN_7=\"Windows 7\",e.WIN_VISTA=\"Windows Vista\",e.WIN_SERVER_2003=\"Windows Server 2003\",e.WIN_XP=\"Windows XP\",e.WIN_2000=\"Windows 2000\",e.ANDROID=\"Android\",e.HARMONY_OS=\"HarmonyOS\",e.OPEN_BSD=\"Open BSD\",e.SUN_OS=\"Sun OS\",e.LINUX=\"Linux\",e.IOS=\"iOS\",e.MAC_OS=\"Mac OS\",e.CHROMIUM_OS=\"Chromium OS\",e.QNX=\"QNX\",e.UNIX=\"UNIX\",e.BEOS=\"BeOS\",e.OS_2=\"OS/2\",e.SEARCH_BOT=\"Search Bot\",e}({}),gI=function(e){return e.CHROME=\"Chrome\",e.SAFARI=\"Safari\",e.EDGE=\"Edge\",e.FIREFOX=\"Firefox\",e.OPERA=\"OPR\",e.QQ=\"QQBrowser\",e.WECHAT=\"MicroMessenger\",e}({});const RI=new aE;let CI=RI.getResult(),II=null;function vI(e){if(!II){e&&RI.setUA(e),CI=RI.getResult();const t=function(e){if(\"Blink\"===e.engine.name&&\"WeChat\"!==e.browser.name)return gI.CHROME;switch(e.browser.name){case\"Chrome Headless\":case\"Chrome\":case\"Chromium\":return gI.CHROME;case\"Safari\":case\"Mobile Safari\":return gI.SAFARI;case\"Edge\":return gI.EDGE;case\"Firefox\":return gI.FIREFOX;case\"QQ\":case\"QQBrowser\":return gI.QQ;case\"Opera\":return gI.OPERA;case\"WeChat\":return gI.WECHAT;default:return e.browser.name||\"\"}}(CI),i=yI(CI),n=function(e){return\"Windows\"===e.os.name?e.os.version?e.os.name+\" \"+e.os.version:e.os.name:e.os.name||\"\"}(CI),r=CI.os.version,o=yI(CI,!1),s=CI.device.type;if(!(t&&i&&n&&r))return{name:t,version:i,os:n,osVersion:r,browserVersion:o,deviceType:s};II={name:t,version:i,os:n,osVersion:r,browserVersion:o,deviceType:s}}return II}function yI(e){let t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=\"Blink\"===e.engine.name?e.engine.version||\"\":e.browser.version||\"\",i?t.split(\".\")[0]:t}function AI(){return vI().os}function bI(){const e=vI();return\"\".concat(e.os,\" \").concat(e.osVersion)}function wI(){const e=vI();return!!(\"WebKit\"===CI.engine.name&&e.os===SI.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==gI.SAFARI||LI()&&e.name!==gI.SAFARI)}function OI(){return vI().name===gI.CHROME}function NI(){return vI().name===gI.SAFARI}function DI(){return vI().name===gI.EDGE}function PI(){return vI().name===gI.FIREFOX}function LI(){return vI().os===SI.IOS}function kI(e){const t=vI();return!(t.name!==gI.CHROME||!t.osVersion)&&Number(t.version)>=e}function MI(e){const t=vI();return!(t.name!==gI.CHROME||!t.osVersion)&&Number(t.version)<e}function UI(e){const t=vI();return!(t.name!==gI.EDGE||!t.osVersion)&&Number(t.version)>=e}function xI(e){const t=vI();return!(t.name!==gI.SAFARI||!t.osVersion)&&Number(t.version)>=e}function VI(e,t,i){const n=vI();if(n.os!==SI.IOS||!n.osVersion)return!1;const r=n.osVersion.split(\".\");return i?t&&Number(r[0])===e&&Number(r[1])<t||Number(r[0])<e:t?Number(r[0])===e&&Number(r[1])<=t||Number(r[0])<e:Number(r[0])<=e}function FI(e,t,i){const n=vI();if(n.name!==gI.SAFARI||!n.osVersion||!n.browserVersion)return!1;const r=n.browserVersion.split(\".\");return i?t&&Number(r[0])===e&&Number(r[1])<t||Number(r[0])<e:t?Number(r[0])===e&&Number(r[1])<=t||Number(r[0])<e:Number(r[0])<=e}function BI(e){const t=vI();return!(t.name!==gI.OPERA||!t.osVersion)&&Number(t.version)>=e}function jI(){const e=vI();if(e.os!==SI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function GI(){const e=vI();if(e.os!==SI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 15===Number(t[0])}function WI(){const e=vI();if(e.os!==SI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 16===Number(t[0])}function HI(){const e=vI();if(e.os!==SI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 15===Number(t[0])&&Number(t[1])>=1}function KI(){return NI()&&navigator.maxTouchPoints>0}function YI(){return vI().name===gI.WECHAT}function qI(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)&&window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1]<=35}function zI(){const e=AI();return function(){const{deviceType:e}=vI();return\"mobile\"===e||\"tablet\"===e}()||e===SI.ANDROID||e===SI.IOS||e===SI.HARMONY_OS}function JI(){const e=vI();return e.name!==gI.EDGE&&e.name!==gI.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]./i)}function XI(){return AI()===SI.ANDROID}function QI(){const e=vI();return XI()&&(e.name===gI.CHROME||e.name===gI.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function ZI(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,\"string\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ev(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$I(Object(i),!0).forEach((function(t){ZI(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let tv=function(e){return e.UNEXPECTED_ERROR=\"UNEXPECTED_ERROR\",e.UNEXPECTED_RESPONSE=\"UNEXPECTED_RESPONSE\",e.TIMEOUT=\"TIMEOUT\",e.INVALID_PARAMS=\"INVALID_PARAMS\",e.NOT_READABLE=\"NOT_READABLE\",e.NOT_SUPPORTED=\"NOT_SUPPORTED\",e.INVALID_OPERATION=\"INVALID_OPERATION\",e.OPERATION_ABORTED=\"OPERATION_ABORTED\",e.WEB_SECURITY_RESTRICT=\"WEB_SECURITY_RESTRICT\",e.EXCHANGE_SDP_FAILED=\"EXCHANGE_SDP_FAILED\",e.ADD_CANDIDATE_FAILED=\"ADD_CANDIDATE_FAILED\",e.DATACHANNEL_FAILED=\"DATACHANNEL_FAILED\",e.NETWORK_ERROR=\"NETWORK_ERROR\",e.NETWORK_TIMEOUT=\"NETWORK_TIMEOUT\",e.NETWORK_RESPONSE_ERROR=\"NETWORK_RESPONSE_ERROR\",e.API_INVOKE_TIMEOUT=\"API_INVOKE_TIMEOUT\",e.ENUMERATE_DEVICES_FAILED=\"ENUMERATE_DEVICES_FAILED\",e.DEVICE_NOT_FOUND=\"DEVICE_NOT_FOUND\",e.ELECTRON_IS_NULL=\"ELECTRON_IS_NULL\",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR=\"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\",e.CHROME_PLUGIN_NO_RESPONSE=\"CHROME_PLUGIN_NO_RESPONSE\",e.CHROME_PLUGIN_NOT_INSTALL=\"CHROME_PLUGIN_NOT_INSTALL\",e.MEDIA_OPTION_INVALID=\"MEDIA_OPTION_INVALID\",e.PERMISSION_DENIED=\"PERMISSION_DENIED\",e.CONSTRAINT_NOT_SATISFIED=\"CONSTRAINT_NOT_SATISFIED\",e.TRACK_IS_DISABLED=\"TRACK_IS_DISABLED\",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR=\"GET_VIDEO_ELEMENT_VISIBLE_ERROR\",e.SHARE_AUDIO_NOT_ALLOWED=\"SHARE_AUDIO_NOT_ALLOWED\",e.LOW_STREAM_ENCODING_ERROR=\"LOW_STREAM_ENCODING_ERROR\",e.SET_ENCODING_PARAMETER_ERROR=\"SET_ENCODING_PARAMETER_ERROR\",e.TRACK_STATE_UNREACHABLE=\"TRACK_STATE_UNREACHABLE\",e.INVALID_UINT_UID_FROM_STRING_UID=\"INVALID_UINT_UID_FROM_STRING_UID\",e.CAN_NOT_GET_PROXY_SERVER=\"CAN_NOT_GET_PROXY_SERVER\",e.CAN_NOT_GET_GATEWAY_SERVER=\"CAN_NOT_GET_GATEWAY_SERVER\",e.VOID_GATEWAY_ADDRESS=\"VOID_GATEWAY_ADDRESS\",e.UID_CONFLICT=\"UID_CONFLICT\",e.MULTI_UNILBS_RESPONSE_ERROR=\"MULTI_UNILBS_RESPONSE_ERROR\",e.UPDATE_TICKET_FAILED=\"UPDATE_TICKET_FAILED\",e.INVALID_LOCAL_TRACK=\"INVALID_LOCAL_TRACK\",e.INVALID_TRACK=\"INVALID_TRACK\",e.SENDER_NOT_FOUND=\"SENDER_NOT_FOUND\",e.CREATE_OFFER_FAILED=\"CREATE_OFFER_FAILED\",e.SET_ANSWER_FAILED=\"SET_ANSWER_FAILED\",e.ICE_FAILED=\"ICE_FAILED\",e.PC_CLOSED=\"PC_CLOSED\",e.SENDER_REPLACE_FAILED=\"SENDER_REPLACE_FAILED\",e.GET_LOCAL_CAPABILITIES_FAILED=\"GET_LOCAL_CAPABILITIES_FAILED\",e.GET_LOCAL_CONNECTION_PARAMS_FAILED=\"GET_LOCAL_CONNECTION_PARAMS_FAILED\",e.SUBSCRIBE_FAILED=\"SUBSCRIBE_FAILED\",e.UNSUBSCRIBE_FAILED=\"UNSUBSCRIBE_FAILED\",e.GATEWAY_P2P_LOST=\"GATEWAY_P2P_LOST\",e.NO_ICE_CANDIDATE=\"NO_ICE_CANDIDATE\",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS=\"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\",e.EXIST_DISABLED_VIDEO_TRACK=\"EXIST_DISABLED_VIDEO_TRACK\",e.INVALID_REMOTE_USER=\"INVALID_REMOTE_USER\",e.REMOTE_USER_IS_NOT_PUBLISHED=\"REMOTE_USER_IS_NOT_PUBLISHED\",e.CUSTOM_REPORT_SEND_FAILED=\"CUSTOM_REPORT_SEND_FAILED\",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH=\"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\",e.FETCH_AUDIO_FILE_FAILED=\"FETCH_AUDIO_FILE_FAILED\",e.READ_LOCAL_AUDIO_FILE_ERROR=\"READ_LOCAL_AUDIO_FILE_ERROR\",e.DECODE_AUDIO_FILE_FAILED=\"DECODE_AUDIO_FILE_FAILED\",e.WS_ABORT=\"WS_ABORT\",e.WS_DISCONNECT=\"WS_DISCONNECT\",e.WS_ERR=\"WS_ERR\",e.EXTERNAL_SIGNAL_ABORT=\"EXTERNAL_SIGNAL_ABORT\",e.LIVE_STREAMING_TASK_CONFLICT=\"LIVE_STREAMING_TASK_CONFLICT\",e.LIVE_STREAMING_INVALID_ARGUMENT=\"LIVE_STREAMING_INVALID_ARGUMENT\",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR=\"LIVE_STREAMING_INTERNAL_SERVER_ERROR\",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED=\"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED=\"LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED\",e.LIVE_STREAMING_CDN_ERROR=\"LIVE_STREAMING_CDN_ERROR\",e.LIVE_STREAMING_INVALID_RAW_STREAM=\"LIVE_STREAMING_INVALID_RAW_STREAM\",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT=\"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE=\"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST=\"LIVE_STREAMING_WARN_FREQUENT_REQUEST\",e.WEBGL_INTERNAL_ERROR=\"WEBGL_INTERNAL_ERROR\",e.BEAUTY_PROCESSOR_INTERNAL_ERROR=\"BEAUTY_PROCESSOR_INTERNAL_ERROR\",e.CROSS_CHANNEL_WAIT_STATUS_ERROR=\"CROSS_CHANNEL_WAIT_STATUS_ERROR\",e.CROSS_CHANNEL_FAILED_JOIN_SRC=\"CROSS_CHANNEL_FAILED_JOIN_SEC\",e.CROSS_CHANNEL_FAILED_JOIN_DEST=\"CROSS_CHANNEL_FAILED_JOIN_DEST\",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST=\"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE=\"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\",e.METADATA_OUT_OF_RANGE=\"METADATA_OUT_OF_RANGE\",e.LOCAL_AEC_ERROR=\"LOCAL_AEC_ERROR\",e.INVALID_PLUGIN=\"INVALID_PLUGIN\",e.DISCONNECT_P2P=\"DISCONNECT_P2P\",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED=\"CONVERTING_IMAGEDATA_TO_BLOB_FAILED\",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED=\"CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED\",e.INIT_DATACHANNEL_TIMEOUT=\"INIT_DATACHANNEL_TIMEOUT\",e.CREATE_DATACHANNEL_ERROR=\"CREATE_DATACHANNEL_ERROR\",e.DATACHANNEL_CONNECTION_TIMEOUT=\"DATACHANNEL_CONNECTION_TIMEOUT\",e.PROHIBITED_OPERATION=\"PROHIBITED_OPERATION\",e.IMAGE_MODERATION_UPLOAD_FAILED=\"IMAGE_MODERATION_UPLOAD_FAILED\",e.P2P_MESSAGE_FAILED=\"P2P_MESSAGE_FAILED\",e}({}),iv=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",i=arguments.length>2?arguments[2]:void 0;super(t),ZI(this,\"code\",void 0),ZI(this,\"message\",void 0),ZI(this,\"data\",void 0),ZI(this,\"name\",\"AgoraRTCException\"),this.code=e,this.message=\"AgoraRTCError \".concat(this.code,\": \").concat(t),this.data=i}toString(){return this.data?\"data: \".concat(JSON.stringify(this.data),\"\\n\").concat(this.stack):\"\".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"error\",t=arguments.length>1?arguments[1]:void 0;return\"error\"===e&&(t||console).error(this.toString()),\"warning\"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print(\"error\",e),this}};function nv(e,t){if(\"boolean\"!=typeof e)throw new iv(tv.INVALID_PARAMS,\"Invalid \".concat(t,\": The value is of the boolean type.\"))}function rv(e,t,i){if(!Dn(i).call(i,e))throw new iv(tv.INVALID_PARAMS,\"\".concat(t,\" can only be set as \").concat(JSON.stringify(i)))}function ov(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<i||e>n||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return\"number\"==typeof e&&e%1==0}(e))throw new iv(tv.INVALID_PARAMS,\"invalid \".concat(t,\": the value range is [\").concat(i,\", \").concat(n,\"]. integer only\"))}function sv(e,t){if(\"number\"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new iv(tv.INVALID_PARAMS,\"\".concat(t,\" is not a valid ConstrainLong\"));void 0!==e.min&&ov(e.min,\"\".concat(t,\".min\"),0,1/0),void 0!==e.max&&ov(e.max,\"\".concat(t,\".max\"),1,1/0),void 0!==e.exact&&ov(e.exact,\"\".concat(t,\".exact\"),1,1/0),void 0!==e.ideal&&ov(e.ideal,\"\".concat(t,\".ideal\"),1,1/0)}else ov(e,t,1,1/0)}function av(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new iv(tv.INVALID_PARAMS,\"\".concat(t||\"param\",\" cannot be empty\"));if(!lv(e,i,n,r))throw new iv(tv.INVALID_PARAMS,\"Invalid \".concat(t||\"string param\",\": Length of the string: [\").concat(i,\",\").concat(n,\"].\").concat(r?\" ASCII characters only.\":\"\"))}function cv(e,t){if(!Array.isArray(e))throw new iv(tv.INVALID_PARAMS,\"\".concat(t,\" should be an array\"))}function dv(e){return null==e}function lv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return\"string\"==typeof e&&e.length<=i&&e.length>=t&&(!n||function(e){if(\"string\"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const i=e.charCodeAt(t);if(i<0||i>255)return!1}return!0}(e))}var uv=function(e){return e.COVERED=\"COVERED\",e.POSITION=\"POSITION\",e.SIZE=\"SIZE\",e.STYLE=\"STYLE\",e}(uv||{}),hv=function(e){return e.UNMOUNTED=\"UNMOUNTED\",e.INVALID_HTML_ELEMENT=\"INVALID_HTML_ELEMENT\",e}(hv||{});const pv=new class{constructor(){ZI(this,\"_clientSize\",null),ZI(this,\"getClientWidth\",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),ZI(this,\"getClientHeight\",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),ZI(this,\"getStyle\",(e=>window.getComputedStyle(e,null))),ZI(this,\"checkCssVisibleProperty\",(e=>{var t;let i=!0;const n=this.getStyle(e),{display:r,visibility:o,opacity:s,filter:a}=n;return(\"none\"===r||Dn(t=[\"hidden\",\"collapse\"]).call(t,o)||Number(s)<.1)&&(i=!1),!!i&&(a&&a.split(\" \").filter((e=>{var t;const i=e.split(\"(\")[0];return Dn(t=[\"brightness\",\"blur\",\"opacity\"]).call(t,i)})).map((e=>{const[t,i]=e.split(/\\(|\\)/);return[t,Number(i.match(/^[0-9\\.]+/))]})).forEach((e=>{const[t,n]=e;switch(t){case\"brightness\":(n<.1||n>3)&&(i=!1);break;case\"blur\":n>3&&(i=!1);break;case\"opacity\":n<.1&&(i=!1)}})),i)})),ZI(this,\"checkPropertyUpToAllParentNodes\",((e,t)=>{let i=!0,n=!0;const r=e=>t(e);let o=e;for(;o&&n;)r(o)||(i=!1,n=!1),o=o.parentElement,o||(n=!1);return i})),ZI(this,\"checkActualCssVisibleIncludeInherit\",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),ZI(this,\"getSizeAboutClient\",(e=>{const{width:t,height:i,left:n,right:r,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:i,left:n,right:r,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),ZI(this,\"checkActualSize\",(()=>{const{width:e,height:t,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(e,t,i)})),ZI(this,\"elementFromPoint\",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),ZI(this,\"checkCoverForAPoint\",((e,t,i)=>{const n=this.elementFromPoint(e,t);return null!==n&&n!==i})),ZI(this,\"getPointPositionList\",(()=>{const{width:e,height:t,left:i,top:n}=this._clientSize,r=e/6,o=t/6,s=[],a=10**6;for(let e=0;e<5;e++)for(let t=0;t<5;t++){const c=(i*a+(0===e?.1:4===e?(r*e*a-1e5)/a:r*e)*a)/a,d=(n*a+(0===t?.1:4===t?(o*t*a-1e5)/a:o*t)*a)/a;s.push({x:c,y:d})}return[...s]})),ZI(this,\"checkElementCover\",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),ZI(this,\"checkSizeIsVisible\",((e,t,i)=>(e>50||i/e<=10)&&(t>50||i/t<=10))),ZI(this,\"checkSizeOfPartInClient\",(()=>{const{left:e,right:t,top:i,bottom:n,clientHeight:r,clientWidth:o,clientMin:s}=this._clientSize;let a,c,d,l;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,i<0)d=0;else{if(!(i<r))return!1;d=i}if(n<0)return!1;l=n<r?n:r;const u=c-a,h=l-d;return this.checkSizeIsVisible(u,h,s)})),ZI(this,\"returnHiddenResult\",(e=>(this._clientSize=null,{visible:!1,reason:e}))),ZI(this,\"checkOneElementVisible\",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(uv.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(uv.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(uv.SIZE)}}return this.returnHiddenResult(uv.STYLE)}return this.returnHiddenResult(hv.UNMOUNTED)}return this.returnHiddenResult(hv.INVALID_HTML_ELEMENT)})),ZI(this,\"checkElementIsMountedOnDom\",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>\"HTML\"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function _v(e){return(new TextEncoder).encode(e)}const Ev=function(e,t){const i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i};const fv=async e=>function(e,t){let i=\"\";return new Uint8Array(e).forEach((e=>{i+=e.toString(t).padStart(2,\"0\")})),i}(await crypto.subtle.digest(\"SHA-256\",_v(e)),16);let mv=class{constructor(){ZI(this,\"_events\",{}),ZI(this,\"addListener\",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const i=this._events[e],n=this._indexOfListener(i,t);-1!==n&&i.splice(n,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(let i=0;i<t.length;i+=1){const r=t[i];r.once&&this.off(e,r.listener),r.listener.apply(this,n||[])}}safeEmit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,i)}catch(t){console.error(\"safeEmit event:\".concat(e,\" error \").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let i=e.length;for(;i--;)if(e[i].listener===t)return i;return-1}};let Tv=null;function Sv(){if(Tv)return Tv;if(window.electron)return Tv=window.electron;if(!window.require)return null;try{return Tv=window.require(\"electron\"),Tv}catch(e){return null}}let gv=function(e){return e.CREATE_CLIENT=\"createClient\",e.CHECK_SYSTEM_REQUIREMENTS=\"checkSystemRequirements\",e.SET_AREA=\"setArea\",e.PRELOAD=\"PRELOAD\",e.CHECK_VIDEO_TRACK_IS_ACTIVE=\"checkVideoTrackIsActive\",e.CHECK_AUDIO_TRACK_IS_ACTIVE=\"checkAudioTrackIsActive\",e.CREATE_MIC_AUDIO_TRACK=\"createMicrophoneAudioTrack\",e.CREATE_CUSTOM_AUDIO_TRACK=\"createCustomAudioTrack\",e.CREATE_BUFFER_AUDIO_TRACK=\"createBufferSourceAudioTrack\",e.CREATE_CAM_VIDEO_TRACK=\"createCameraVideoTrack\",e.CREATE_CUSTOM_VIDEO_TRACK=\"createCustomVideoTrack\",e.CREATE_MIC_AND_CAM_TRACKS=\"createMicrophoneAndCameraTracks\",e.CREATE_SCREEN_VIDEO_TRACK=\"createScreenVideoTrack\",e.SET_ENCRYPTION_CONFIG=\"Client.setEncryptionConfig\",e.START_PROXY_SERVER=\"Client.startProxyServer\",e.STOP_PROXY_SERVER=\"Client.stopProxyServer\",e.SET_PROXY_SERVER=\"Client.setProxyServer\",e.SET_TURN_SERVER=\"Client.setTurnServer\",e.SET_CLIENT_ROLE=\"Client.setClientRole\",e.SET_LOW_STREAM_PARAMETER=\"Client.setLowStreamParameter\",e.ENABLE_DUAL_STREAM=\"Client.enableDualStream\",e.DISABLE_DUAL_STREAM=\"Client.disableDualStream\",e.JOIN=\"Client.join\",e.LEAVE=\"Client.leave\",e.PUBLISH=\"Client.publish\",e.UNPUBLISH=\"Client.unpublish\",e.SUBSCRIBE=\"Client.subscribe\",e.MASS_SUBSCRIBE=\"Client.massSubscribe\",e.MASS_UNSUBSCRIBE=\"Client.massUnsubscribe\",e.UNSUBSCRIBE=\"Client.unsubscribe\",e.RENEW_TOKEN=\"Client.renewToken\",e.SET_REMOTE_VIDEO_STREAM_TYPE=\"Client.setRemoteVideoStreamType\",e.SET_STREAM_FALLBACK_OPTION=\"Client.setStreamFallbackOption\",e.ENABLE_AUDIO_VOLUME_INDICATOR=\"Client.enableAudioVolumeIndicator\",e.SEND_CUSTOM_REPORT_MESSAGE=\"Client.sendCustomReportMessage\",e.INSPECT_VIDEO_CONTENT=\"Client.inspectVideoContent\",e.STOP_INSPECT_VIDEO_CONTENT=\"Client.stopInspectVideoContent\",e.JOIN_FALLBACK_TO_PROXY=\"Client._joinFallbackToProxy\",e.ON_LIVE_STREAM_WARNING=\"Client.onLiveStreamWarning\",e.ON_LIVE_STREAM_ERROR=\"Client.onLiveStreamingError\",e.START_LIVE_STREAMING=\"Client.startLiveStreaming\",e.SET_LIVE_TRANSCODING=\"Client.setLiveTranscoding\",e.STOP_LIVE_STREAMING=\"Client.stopLiveStreaming\",e.START_CHANNEL_MEDIA_RELAY=\"Client.startChannelMediaRelay\",e.UPDATE_CHANNEL_MEDIA_RELAY=\"Client.updateChannelMediaRelay\",e.STOP_CHANNEL_MEDIA_RELAY=\"Client.stopChannelMediaRelay\",e.REQUEST_CONFIG_DISTRIBUTE=\"_config-distribute-request\",e.SET_CONFIG_DISTRIBUTE=\"_configDistribute\",e.LOCAL_TRACK_SET_MUTED=\"LocalTrack.setMute\",e.LOCAL_AUDIO_TRACK_PLAY=\"LocalAudioTrack.play\",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT=\"LocalAudioTrack.playInElement\",e.LOCAL_AUDIO_TRACK_STOP=\"LocalAudioTrack.stop\",e.LOCAL_AUDIO_TRACK_SET_VOLUME=\"LocalAudioTrack.setVolume\",e.MIC_AUDIO_TRACK_SET_DEVICE=\"MicrophoneAudioTrack.setDevice\",e.BUFFER_AUDIO_TRACK_START=\"BufferSourceAudioTrack.startProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_STOP=\"BufferSourceAudioTrack.stopProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_PAUSE=\"BufferSourceAudioTrack.pauseProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_RESUME=\"BufferSourceAudioTrack.resumeProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_SEEK=\"BufferSourceAudioTrack.seekAudioBuffer\",e.LOCAL_VIDEO_TRACK_PLAY=\"LocalVideoTrack.play\",e.LOCAL_VIDEO_TRACK_STOP=\"LocalVideoTrack.stop\",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE=\"LocalVideoTrack.getVideoElementVisibleStatus\",e.LOCAL_VIDEO_TRACK_BEAUTY=\"LocalVideoTrack.setBeautyEffect\",e.LOCAL_VIDEO_SEND_SEI_DATA=\"LocalVideoTrack.sendSeiData\",e.CAM_VIDEO_TRACK_SET_DEVICE=\"CameraVideoTrack.setDevice\",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG=\"CameraVideoTrack.setEncoderConfiguration\",e.REMOTE_VIDEO_TRACK_PLAY=\"RemoteVideoTrack.play\",e.REMOTE_VIDEO_TRACK_STOP=\"RemoteVideoTrack.stop\",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE=\"RemoteVideoTrack.getVideoElementVisibleStatus\",e.REMOTE_AUDIO_TRACK_PLAY=\"RemoteAudioTrack.play\",e.REMOTE_AUDIO_TRACK_STOP=\"RemoteAudioTrack.stop\",e.REMOTE_AUDIO_SET_VOLUME=\"RemoteAudioTrack.setVolume\",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE=\"RemoteAudioTrack.setOutputDevice\",e.GET_MEDIA_STREAM_TRACK=\"Track.getMediaStreamTrack\",e.STREAM_TYPE_CHANGE=\"streamTypeChange\",e.CONNECTION_STATE_CHANGE=\"connectionStateChange\",e.LOAD_CONFIG_FROM_LOCALSTORAGE=\"loadConfigFromLocalStorage\",e.IMAGE_MODERATION_UPLOAD=\"imageModerationUpload\",e}({}),Rv=function(e){return e.TRACER=\"tracer\",e}({});function Cv(e){return ov(e.timeout,\"config.timeout\",0,1e5),ov(e.timeoutFactor,\"config.timeoutFactor\",0,100,!1),ov(e.maxRetryCount,\"config.maxRetryConfig\",0,1/0),ov(e.maxRetryTimeout,\"config.maxRetryTimeout\",0,1/0),!0}let Iv=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]=\"AUDIENCE_LEVEL_LOW_LATENCY\",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]=\"AUDIENCE_LEVEL_ULTRA_LOW_LATENCY\",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]=\"AUDIENCE_LEVEL_SYNC_LATENCY\",e}({}),vv=function(e){return e.LEAVE=\"LEAVE\",e.NETWORK_ERROR=\"NETWORK_ERROR\",e.SERVER_ERROR=\"SERVER_ERROR\",e.UID_BANNED=\"UID_BANNED\",e.FALLBACK=\"FALLBACK\",e.IP_BANNED=\"IP_BANNED\",e.CHANNEL_BANNED=\"CHANNEL_BANNED\",e.LICENSE_MISSING=\"LICENSE_MISSING\",e.LICENSE_EXPIRED=\"LICENSE_EXPIRED\",e.LICENSE_MINUTES_EXCEEDED=\"LICENSE_MINUTES_EXCEEDED\",e.LICENSE_PERIOD_INVALID=\"LICENSE_PERIOD_INVALID\",e.LICENSE_MULTIPLE_SDK_SERVICE=\"LICENSE_MULTIPLE_SDK_SERVICE\",e.LICENSE_ILLEGAL=\"LICENSE_ILLEGAL\",e.TOKEN_EXPIRE=\"TOKEN_EXPIRE\",e}({});function yv(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function Av(e){return av(e.turnServerURL,\"turnServerURL\"),av(e.username,\"username\"),av(e.password,\"password\"),e.udpport&&ov(e.udpport,\"udpport\",1,99999,!0),e.forceturn&&nv(e.forceturn,\"forceturn\"),e.security&&nv(e.security,\"security\"),e.tcpport&&ov(e.tcpport,\"tcpport\",1,99999,!0),!0}function bv(e){return void 0!==e.level&&rv(e.level,\"level\",[1,2,3]),void 0!==e.delay&&ov(e.delay,\"delay\",0,3e3,!0),!0}let wv=function(e){return e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.MEDIA_RECONNECT_START=\"media-reconnect-start\",e.MEDIA_RECONNECT_END=\"media-reconnect-end\",e.IS_USING_CLOUD_PROXY=\"is-using-cloud-proxy\",e.USER_JOINED=\"user-joined\",e.USER_LEAVED=\"user-left\",e.USER_PUBLISHED=\"user-published\",e.USER_UNPUBLISHED=\"user-unpublished\",e.USER_INFO_UPDATED=\"user-info-updated\",e.CLIENT_BANNED=\"client-banned\",e.CHANNEL_MEDIA_RELAY_STATE=\"channel-media-relay-state\",e.CHANNEL_MEDIA_RELAY_EVENT=\"channel-media-relay-event\",e.VOLUME_INDICATOR=\"volume-indicator\",e.CRYPT_ERROR=\"crypt-error\",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE=\"token-privilege-will-expire\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"token-privilege-did-expire\",e.NETWORK_QUALITY=\"network-quality\",e.STREAM_TYPE_CHANGED=\"stream-type-changed\",e.STREAM_FALLBACK=\"stream-fallback\",e.RECEIVE_METADATA=\"receive-metadata\",e.STREAM_MESSAGE=\"stream-message\",e.LIVE_STREAMING_ERROR=\"live-streaming-error\",e.LIVE_STREAMING_WARNING=\"live-streaming-warning\",e.EXCEPTION=\"exception\",e.ERROR=\"error\",e.P2P_LOST=\"p2p_lost\",e.JOIN_FALLBACK_TO_PROXY=\"join-fallback-to-proxy\",e.CHANNEL_FALLBACK_TO_WEBSOCKET=\"channel-fallback-to-websocket\",e.MEDIA_CONNECTION_TYPE_CHANGE=\"media-connection-type-change\",e.PUBLISHED_USER_LIST=\"published-user-list\",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE=\"content-inspect-connection-state-change\",e.CONTENT_INSPECT_ERROR=\"content-inspect-error\",e.CONTENT_INSPECT_RESULT=\"content-inspect-result\",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE=\"image-moderation-connection-state-change\",e}({}),Ov=function(e){return e.NETWORK_ERROR=\"NETWORK_ERROR\",e.SERVER_ERROR=\"SERVER_ERROR\",e.MULTI_IP=\"MULTI_IP\",e.TIMEOUT=\"TIMEOUT\",e.OFFLINE=\"OFFLINE\",e.LEAVE=\"LEAVE\",e.P2P_FAILED=\"P2P_FAILED\",e.FALLBACK=\"FALLBACK\",e}({}),Nv=function(e){return e.ONLINE=\"ONLINE\",e.OFFLINE=\"OFFLINE\",e}({}),Dv=function(e){return e.NETWORK_STATE_CHANGE=\"NETWORK_STATE_CHANGE\",e.ONLINE=\"ONLINE\",e.OFFLINE=\"OFFLINE\",e}({});function Pv(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return 0===e.getListeners(t).length?Gh.reject(new iv(tv.UNEXPECTED_ERROR,\"can not emit promise\")):new Gh(((i,r)=>{e.emit(t,...n,i,r)}))}function Lv(e,t){if(0===e.getListeners(t).length)return Gh.resolve();for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return Pv(e,t,...n)}function kv(e,t){if(0===e.getListeners(t).length)return null;for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return Mv(e,t,...n)}function Mv(e,t){let i=null,n=null;for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];if(e.emit(t,...o,(e=>{i=e}),(e=>{n=e})),null!==n)throw n;if(null===i)throw new iv(tv.UNEXPECTED_ERROR,\"handler is not sync\");return i}const Uv=new class extends mv{set networkState(e){this.emit(Dv.NETWORK_STATE_CHANGE,e,this._networkState),e===Nv.ONLINE?this.emit(Dv.ONLINE):e===Nv.OFFLINE&&(this.onlineWaiter=new Gh((e=>{this.once(Dv.ONLINE,(()=>{this.onlineWaiter=void 0,e(Nv.ONLINE)}))})),this.emit(Dv.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===Nv.ONLINE}constructor(){super(),ZI(this,\"_moduleName\",\"network-indicator\"),ZI(this,\"_networkState\",Nv.ONLINE),ZI(this,\"onlineWaiter\",void 0),window.addEventListener(\"online\",(()=>{this.networkState=Nv.ONLINE})),window.addEventListener(\"offline\",(()=>{this.networkState=Nv.OFFLINE}))}};function xv(e,t){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}function Vv(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function Fv(e){void 0!==Gh?Gh.resolve().then(e):setTimeout(e,0)}function Bv(e){return JSON.parse(JSON.stringify(e))}function jv(e){try{return Bv(e)}catch(t){return e}}const Gv={};function Wv(e,t){Gv[t]||(Gv[t]=!0,e())}function Hv(e){const t=window.atob(e),i=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e+=1)i[e]=t.charCodeAt(e);return i}function Kv(e){let t=\"\";for(let i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return window.btoa(t)}function Yv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=(new TextEncoder).encode(e);if(i.length>t)i=i.slice(0,t);else if(i.length<t){const e=new Uint8Array(t);e.set(i),i=e}return i}function qv(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=Jn(t).call(t,((e,t)=>e+t.length),0),r=new Uint8Array(new ArrayBuffer(n));let o=0;return t.forEach((e=>{r.set(e,o),o+=e.length})),r}function zv(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function Jv(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+=\"string\"==typeof e?zv(e):e.size})),t+138}function Xv(e){const t=new iv(tv.TIMEOUT,\"timeout\");return new Gh(((i,n)=>{window.setTimeout((()=>n(t)),e)}))}function Qv(e){return new Gh((t=>{window.setTimeout(t,e)}))}function Zv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?\"\".concat(t).concat(i):\"\".concat(t).concat(i)+Zv(e-i.length,\"\")}function $v(){return Zv(32,\"\").toUpperCase()}const ey=()=>{},ty=new class{constructor(){ZI(this,\"fnMap\",new Map)}throttleByKey(e,t,i,n){for(var r=arguments.length,o=new Array(r>4?r-4:0),s=4;s<r;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const r=this.fnMap.get(t);if(r.threshold!==i){r.fn(...r.args),clearTimeout(r.timer);const s=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),i);this.fnMap.set(t,{fn:e,threshold:i,timer:s,args:o,skipFn:n})}else r.skipFn&&r.skipFn(...r.args),this.fnMap.set(t,ev(ev({},r),{},{fn:e,args:o,skipFn:n}))}else{const r=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),i);this.fnMap.set(t,{fn:e,threshold:i,timer:r,args:o,skipFn:n})}}},iy=ty.throttleByKey.bind(ty);function ny(e){return\"object\"==typeof e&&null!==e&&!(e instanceof RegExp)}function ry(e,t){if(!ny(e)||!ny(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const i=[...e];for(let n=0;n<t.length;n++)i[n]=ry(e[n],t[n]);return i}{const i=ev({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?i[n]=ry(e[n],t[n]):i[n]=t[n]);return i}}function oy(e,t){let i=[0];if(t&&(i=new Array(t).fill(0)),0===e)return i;let n=0;for(;e>0&&(i[n]=255&e,e>>=8,n++,!t||n!==t););return i}function sy(e){return\"number\"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function ay(e){const t=\"0123456789abcdef\";function i(e){let i,n=\"\";for(i=0;i<=3;i++)n+=t.charAt(e>>8*i+4&15)+t.charAt(e>>8*i&15);return n}function n(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function r(e,t,i,r,o,s){return n(function(e,t){return e<<t|e>>>32-t}(n(n(t,e),n(r,s)),o),i)}function o(e,t,i,n,o,s,a){return r(t&i|~t&n,e,t,o,s,a)}function s(e,t,i,n,o,s,a){return r(t&n|i&~n,e,t,o,s,a)}function a(e,t,i,n,o,s,a){return r(t^i^n,e,t,o,s,a)}function c(e,t,i,n,o,s,a){return r(i^(t|~n),e,t,o,s,a)}const d=function(e){let t;const i=1+(e.length+8>>6),n=new Array(16*i);for(t=0;t<16*i;t++)n[t]=0;for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<t%4*8;return n[t>>2]|=128<<t%4*8,n[16*i-2]=8*e.length,n}(e);let l,u,h,p,_,E=1732584193,f=-271733879,m=-1732584194,T=271733878;for(l=0;l<d.length;l+=16)u=E,h=f,p=m,_=T,E=o(E,f,m,T,d[l+0],7,-680876936),T=o(T,E,f,m,d[l+1],12,-389564586),m=o(m,T,E,f,d[l+2],17,606105819),f=o(f,m,T,E,d[l+3],22,-1044525330),E=o(E,f,m,T,d[l+4],7,-176418897),T=o(T,E,f,m,d[l+5],12,1200080426),m=o(m,T,E,f,d[l+6],17,-1473231341),f=o(f,m,T,E,d[l+7],22,-45705983),E=o(E,f,m,T,d[l+8],7,1770035416),T=o(T,E,f,m,d[l+9],12,-1958414417),m=o(m,T,E,f,d[l+10],17,-42063),f=o(f,m,T,E,d[l+11],22,-1990404162),E=o(E,f,m,T,d[l+12],7,1804603682),T=o(T,E,f,m,d[l+13],12,-40341101),m=o(m,T,E,f,d[l+14],17,-1502002290),f=o(f,m,T,E,d[l+15],22,1236535329),E=s(E,f,m,T,d[l+1],5,-165796510),T=s(T,E,f,m,d[l+6],9,-1069501632),m=s(m,T,E,f,d[l+11],14,643717713),f=s(f,m,T,E,d[l+0],20,-373897302),E=s(E,f,m,T,d[l+5],5,-701558691),T=s(T,E,f,m,d[l+10],9,38016083),m=s(m,T,E,f,d[l+15],14,-660478335),f=s(f,m,T,E,d[l+4],20,-405537848),E=s(E,f,m,T,d[l+9],5,568446438),T=s(T,E,f,m,d[l+14],9,-1019803690),m=s(m,T,E,f,d[l+3],14,-187363961),f=s(f,m,T,E,d[l+8],20,1163531501),E=s(E,f,m,T,d[l+13],5,-1444681467),T=s(T,E,f,m,d[l+2],9,-51403784),m=s(m,T,E,f,d[l+7],14,1735328473),f=s(f,m,T,E,d[l+12],20,-1926607734),E=a(E,f,m,T,d[l+5],4,-378558),T=a(T,E,f,m,d[l+8],11,-2022574463),m=a(m,T,E,f,d[l+11],16,1839030562),f=a(f,m,T,E,d[l+14],23,-35309556),E=a(E,f,m,T,d[l+1],4,-1530992060),T=a(T,E,f,m,d[l+4],11,1272893353),m=a(m,T,E,f,d[l+7],16,-155497632),f=a(f,m,T,E,d[l+10],23,-1094730640),E=a(E,f,m,T,d[l+13],4,681279174),T=a(T,E,f,m,d[l+0],11,-358537222),m=a(m,T,E,f,d[l+3],16,-722521979),f=a(f,m,T,E,d[l+6],23,76029189),E=a(E,f,m,T,d[l+9],4,-640364487),T=a(T,E,f,m,d[l+12],11,-421815835),m=a(m,T,E,f,d[l+15],16,530742520),f=a(f,m,T,E,d[l+2],23,-995338651),E=c(E,f,m,T,d[l+0],6,-198630844),T=c(T,E,f,m,d[l+7],10,1126891415),m=c(m,T,E,f,d[l+14],15,-1416354905),f=c(f,m,T,E,d[l+5],21,-57434055),E=c(E,f,m,T,d[l+12],6,1700485571),T=c(T,E,f,m,d[l+3],10,-1894986606),m=c(m,T,E,f,d[l+10],15,-1051523),f=c(f,m,T,E,d[l+1],21,-2054922799),E=c(E,f,m,T,d[l+8],6,1873313359),T=c(T,E,f,m,d[l+15],10,-30611744),m=c(m,T,E,f,d[l+6],15,-1560198380),f=c(f,m,T,E,d[l+13],21,1309151649),E=c(E,f,m,T,d[l+4],6,-145523070),T=c(T,E,f,m,d[l+11],10,-1120210379),m=c(m,T,E,f,d[l+2],15,718787259),f=c(f,m,T,E,d[l+9],21,-343485551),E=n(E,u),f=n(f,h),m=n(m,p),T=n(T,_);return i(E)+i(f)+i(m)+i(T)}let cy=1,dy=console,ly=class{static setLogger(e){dy=e}constructor(e){ZI(this,\"lockingPromise\",Gh.resolve()),ZI(this,\"locks\",0),ZI(this,\"name\",\"\"),ZI(this,\"lockId\",void 0),this.lockId=cy++,e&&(this.name=e),dy.debug(\"[lock-\".concat(this.name,\"-\").concat(this.lockId,\"] is created.\"))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,dy.debug(\"[lock-\".concat(this.name,\"-\").concat(this.lockId,\"] is locked, current queue \").concat(this.locks,\". \").concat(\"string\"==typeof e?e:\"\"));const i=new Gh((i=>{t=()=>{this.locks-=1,dy.debug(\"[lock-\".concat(this.name,\"-\").concat(this.lockId,\"] is not locked, current queue \").concat(this.locks,\". \").concat(\"string\"==typeof e?e:\"\")),i()}})),n=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>i)),n}};function uy(e,t){return function(i,n,r){const o=r.value;if(\"function\"!=typeof o)throw new Error(\"Cannot use mutex on object property.\");return r.value=async function(){const i=this[t];if(!i)throw new Error(\"mutex property key \".concat(t,\" doesn't exist on \").concat(e));const r=await i.lock(\"From \".concat(e,\".\").concat(n));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{r()}},r}}const hy={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function py(e,t){const i=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,i)}function _y(e,t,i,n){const r=Object.assign({},hy,n);let o=r.timeout;const s=async()=>{await function(e){return new Gh((t=>{window.setTimeout(t,e)}))}(o),o*=r.timeoutFactor,o=Math.min(r.maxRetryTimeout,o)};let a=!1;const c=new Gh((async(n,o)=>{t=t||(()=>!1),i=i||(()=>!0);for(let c=0;c<r.maxRetryCount;c+=1){if(a)return o(new iv(tv.OPERATION_ABORTED));try{const i=await e();if(!t(i,c))return n(i);if(c+1===r.maxRetryCount)return n(i);await s()}catch(e){if(!i(e,c))return o(e);if(c+1===r.maxRetryCount)return o(e);await s()}}}));return c.cancel=()=>a=!0,c}class Ey{constructor(e){ZI(this,\"input\",[]),ZI(this,\"size\",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:Jn(e=this.input).call(e,((e,t)=>e+t))/this.input.length}}let fy,my=0,Ty=0;function Sy(e,t,i,n){return new Gh(((r,o)=>{t.responseType=t.responseType||\"json\",t.data&&!i?(t.data=JSON.stringify(t.data),my+=zv(t.data)):i&&(t.data.size?my+=t.data.size:t.data instanceof FormData?my+=Jv(t.data):my+=zv(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers[\"Content-Type\"]=t.headers[\"Content-Type\"]||\"application/json\",t.method=\"POST\",t.url=e,pI.request(t).then((e=>{\"string\"==typeof e.data?Ty+=zv(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Ty+=e.data.byteLength:Ty+=zv(JSON.stringify(e.data)),n&&r({data:e.data,headers:e.headers}),r(e.data)})).catch((e=>{pI.isCancel(e)?o(new iv(tv.OPERATION_ABORTED,\"cancel token canceled\")):\"ECONNABORTED\"===e.code?o(new iv(tv.NETWORK_TIMEOUT,e.message)):e.response?o(new iv(tv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new iv(tv.NETWORK_ERROR,e.message))}))}))}async function gy(e,t){const i=new Blob([t.data],{type:\"buffer\"});return await Sy(e,ev(ev({},t),{},{data:i,headers:{\"Content-Type\":\"application/octet-stream\"}}),!0)}const Ry=()=>void 0!==window.isSecureContext;const Cy=function(e){if(e.match(/[0-9]+\\.[0-9]+\\.[0-9]+$/))return e;const t=e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-alpha\\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],i=t[2];return\"\".concat(e,\".\").concat(i)}const i=e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-special\\.([0-9]+)/);if(i&&i[1]&&i[2]){const e=i[1],t=i[2];return\"\".concat(e,\".\").concat(100*(Number(t)+1))}return\"4.0.0.999\"}(\"4.22.0\"),Iy=function(){try{return!0===JSON.parse(\"true\")}catch(e){return!0}}();let vy=function(e){return e.Default=\"default\",e.Auto=\"auto\",e.Relay=\"relay\",e.SdRtn=\"sd-rtn\",e}({});const yy={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},Ay=\"v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)\",by=ev(ev({PROCESS_ID:\"\",ENCRYPT_AES:!0,AREAS:[\"CHINA\",\"GLOBAL\"],WEBCS_DOMAIN:[\"webrtc2-ap-web-1.agora.io\",\"webrtc2-2.ap.sd-rtn.com\"],WEBCS_DOMAIN_BACKUP_LIST:[\"webrtc2-ap-web-3.agora.io\",\"webrtc2-4.ap.sd-rtn.com\"],PROXY_CS:[\"ap-proxy-1.agora.io\",\"ap-proxy-2.agora.io\"],CDS_AP:[\"cds-ap-web-1.agora.io\",\"cds-web-2.ap.sd-rtn.com\",\"cds-ap-web-3.agora.io\",\"cds-web-4.ap.sd-rtn.com\"],ACCOUNT_REGISTER:[\"sua-ap-web-1.agora.io\",\"sua-web-2.ap.sd-rtn.com\",\"sua-ap-web-3.agora.io\",\"sua-web-4.ap.sd-rtn.com\"],UAP_AP:[\"uap-ap-web-1.agora.io\",\"uap-web-2.ap.sd-rtn.com\",\"uap-ap-web-3.agora.io\",\"uap-web-4.ap.sd-rtn.com\"],LOG_UPLOAD_SERVER:\"logservice.agora.io\",EVENT_REPORT_DOMAIN:\"statscollector-1.agora.io\",EVENT_REPORT_BACKUP_DOMAIN:\"web-2.statscollector.sd-rtn.com\",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:\"\",LIVE_STREAMING_ADDRESS:\"\",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:\"\",PUB_EXTEND:\"\",SUB_EXTEND:\"\",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:[\"edge.agora.io\",\"edge.sd-rtn.com\"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:\"edge.agora.io\",TURN_DOMAIN:\"edge.agora.io\",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:\"webnginx-proxy.agora.io\",PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy.sd-rtn.com\",\"webrtc-cloud-proxy.agora.io\"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:\"high\",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:\"\",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:[\"agora.io\",\"sd-rtn.com\"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:\"STANDARD_BITRATE\",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:[\"data-reporting.agora.io\",\"data-reporting.agora.io\"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:\"edge.agora.io\",VIDEO_INSPECT_WORKER_MANAGER_PORT:\"\",VIDEO_INSPECT_WORKER_PORT:\"\",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:\"edge.agora.io\",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:yy,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:\"\",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:[\"H264\",\"VP8\",\"VP9\",\"AV1\"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function wy(e,t,i){var n,r,o;Dn(n=Object.keys(by)).call(n,e)&&(!i&&Dn(r=Object.keys(Ny)).call(r,e)||(by[e]=t,\"ENABLE_VIDEO_SEI\"===e&&!0===t&&(by.ENABLE_ENCODED_TRANSFORM=!0),\"USE_NEW_NETWORK_CONFIG\"===e&&t&&(o=!!t,by.USE_NEW_NETWORK_CONFIG=o,o&&(by.WEBCS_DOMAIN=[\"webrtc2-2.ap.sd-rtn.com\"],by.WEBCS_DOMAIN_BACKUP_LIST=[\"webrtc2-4.ap.sd-rtn.com\"],by.CDS_AP=[\"cds-web-2.ap.sd-rtn.com\",\"cds-web-4.ap.sd-rtn.com\"],by.ACCOUNT_REGISTER=[\"sua-web-2.ap.sd-rtn.com\",\"sua-web-4.ap.sd-rtn.com\"],by.EVENT_REPORT_DOMAIN=\"web-2.statscollector.sd-rtn.com\",by.EVENT_REPORT_BACKUP_DOMAIN=\"statscollector-1.agora.io\",by.GATEWAY_DOMAINS=[\"edge.sd-rtn.com\"])),\"ENABLE_PRE_SUB\"===e&&t&&(by.ENABLE_INSTANT_VIDEO=!0,by.ENABLE_PREALLOC_PC=!0),\"ENABLE_SVC\"===e&&t&&(by.ENABLE_AUT_CC=!0)))}function Oy(e){return by[e]}const Ny={};var Dy=function(e){return e.SET_SESSION_ID=\"SET_SESSION_ID\",e.SET_P2P_ID=\"SET_P2P_id\",e.SET_DC_ID=\"SET_DC_id\",e.SET_UID=\"SET_UID\",e.SET_INT_UID=\"SET_INT_UID\",e.SET_PUB_ID=\"SET_PUB_ID\",e.SET_CLOUD_PROXY_SERVER_MODE=\"SET_CLOUD_PROXY_SERVER_MODE\",e.KEY_METRIC_CLIENT_CREATED=\"KEY_METRIC_CLIENT_CREATED\",e.KEY_METRIC_JOIN_START=\"KEY_METRIC_JOIN_START\",e.AVOID_JOIN_START=\"AVOID_JOIN_START\",e.KEY_METRIC_JOIN_END=\"KEY_METRIC_JOIN_END\",e.KEY_METRIC_REQUEST_AP_START=\"KEY_METRIC_REQUEST_AP_START\",e.KEY_METRIC_REQUEST_AP_END=\"KEY_METRIC_REQUEST_AP_END\",e.KEY_METRIC_JOIN_GATEWAY_START=\"KEY_METRIC_JOIN_GATEWAY_START\",e.KEY_METRIC_JOIN_GATEWAY_END=\"KEY_METRIC_JOIN_GATEWAY_END\",e.KEY_METRIC_PEER_CONNECTION_START=\"KEY_METRIC_PEER_CONNECTION_START\",e.KEY_METRIC_PEER_CONNECTION_END=\"KEY_METRIC_PEER_CONNECTION_END\",e.KEY_METRIC_DESCRIPTION_START=\"KEY_METRIC_DESCRIPTION_START\",e.KEY_METRIC_ICE_CONNECTION_END=\"KEY_METRIC_ICE_CONNECTION_END\",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN=\"KEY_METRIC_SIGNAL_CHANNEL_OPEN\",e.KEY_METRIC_PUBLISH=\"KEY_METRIC_PUBLISH\",e.KEY_METRIC_SUBSCRIBE=\"KEY_METRIC_SUBSCRIBE\",e.RECORD_JOIN_CHANNEL_SERVICE=\"RECORD_JOIN_CHANNEL_SERVICE\",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS=\"RESET_JOIN_CHANNEL_SERVICE_RECORDS\",e.RESET_KEY_METRICS=\"RESET_KEY_METRICS\",e.SET_USE_P2P=\"SET_USE_P2P\",e.SET_TRANSPORT_TYPE=\"SET_TRANSPORT_TYPE\",e}(Dy||{});class Py{constructor(e,t,i,n){ZI(this,\"state\",void 0),this.state={codec:e,audioCodec:t,mode:i,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:\"disabled\",useP2P:!1,p2pTransport:vy.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case Dy.SET_SESSION_ID:return ev(ev({},e),{},{sessionId:t.sessionId});case Dy.SET_P2P_ID:return ev(ev({},e),{},{p2pId:t.p2pId});case Dy.SET_UID:return ev(ev({},e),{},{uid:t.uid});case Dy.SET_INT_UID:return ev(ev({},e),{},{intUid:t.intUid});case Dy.SET_PUB_ID:return ev(ev({},e),{},{pubId:t.pubId});case Dy.KEY_METRIC_CLIENT_CREATED:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{clientCreated:t.metric})});case Dy.KEY_METRIC_JOIN_START:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{joinStart:t.metric})});case Dy.AVOID_JOIN_START:return ev(ev({},e),{},{avoidJoinStart:t.avoidJoinStart});case Dy.KEY_METRIC_JOIN_END:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{joinEnd:t.metric})});case Dy.KEY_METRIC_REQUEST_AP_START:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{requestAPStart:t.metric})});case Dy.KEY_METRIC_REQUEST_AP_END:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{requestAPEnd:t.metric})});case Dy.KEY_METRIC_JOIN_GATEWAY_START:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case Dy.KEY_METRIC_JOIN_GATEWAY_END:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case Dy.KEY_METRIC_PEER_CONNECTION_START:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case Dy.KEY_METRIC_PEER_CONNECTION_END:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case Dy.KEY_METRIC_DESCRIPTION_START:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{descriptionStart:t.metric})});case Dy.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case Dy.KEY_METRIC_ICE_CONNECTION_END:return ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case Dy.KEY_METRIC_PUBLISH:{const i=e.keyMetrics.publish,n=i.findIndex((e=>e.trackId===t.metric.trackId));return-1!==n?(i[n]=ev(ev({},i[n]),t.metric),ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{publish:[...i]})})):ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case Dy.KEY_METRIC_SUBSCRIBE:{const i=e.keyMetrics.subscribe,n=i.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==n?(i[n]=ev(ev({},i[n]),t.metric),ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{subscribe:[...i]})})):ev(ev({},e),{},{keyMetrics:ev(ev({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case Dy.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case Dy.RECORD_JOIN_CHANNEL_SERVICE:return\"number\"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=ev(ev({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case Dy.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case Dy.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case Dy.SET_USE_P2P:return ev(ev({},e),{},{useP2P:t.val});case Dy.SET_TRANSPORT_TYPE:return ev(ev({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:Dy.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:Dy.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:Dy.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:Dy.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:Dy.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:Dy.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:Dy.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:Dy.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:Dy.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:Dy.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Dy.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Dy.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Dy.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Dy.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Dy.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Dy.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Dy.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Dy.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Dy.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Dy.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Dy.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,i,n){this.dispatch({type:Dy.KEY_METRIC_PUBLISH,metric:ev(ev({trackId:e,type:t},i&&{publishStart:i}),n&&{publishEnd:n})})}subscribe(e,t,i,n,r,o,s){this.dispatch({type:Dy.KEY_METRIC_SUBSCRIBE,metric:ev(ev(ev(ev(ev({userId:e,type:t},i&&{subscribeStart:i}),n&&{subscribeEnd:n}),r&&{firstFrame:r}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,i,n){e.forEach((e=>{this.dispatch({type:Dy.KEY_METRIC_SUBSCRIBE,metric:ev(ev(ev({userId:e.userId,type:e.type},t&&{subscribeStart:t}),i&&{subscribeEnd:i}),n&&{firstFrame:n})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){\"gateway\"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\\d+)-\\d+-\\d+-(\\d+)/,\"$1-*-*-$2\"))));try{return\"number\"!=typeof t?(this.dispatch({type:Dy.RECORD_JOIN_CHANNEL_SERVICE,record:ev(ev({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Dy.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Dy.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Dy.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:Dy.AVOID_JOIN_START,avoidJoinStart:e})}}let Ly=function(e){return e.h264=\"h264\",e.h265=\"h265\",e.vp8=\"vp8\",e.vp9=\"vp9\",e.av1=\"av1\",e}({});!function(e){e.opus=\"opus\",e.pcma=\"pcma\",e.pcmu=\"pcmu\",e.g722=\"g722\"}({});const ky=128,My=96,Uy=1e3,xy=10;let Vy=0;function Fy(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,\"string\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function By(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function jy(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?By(Object(i),!0).forEach((function(t){Fy(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):By(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Gy=new class extends mv{constructor(){super(...arguments),Fy(this,\"currentUploadLogID\",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit(\"REPORT_LOG_UPLOAD\",e))}};class Wy{constructor(e){Fy(this,\"logger\",void 0),Fy(this,\"prefixLists\",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function Hy(){const e=new Date;return e.toTimeString().split(\" \")[0]+\":\"+e.getMilliseconds()}function Ky(){const e=new Date,t=/((\\d+:){2}\\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+\":\"+e.getUTCMilliseconds():e.toTimeString().split(\" \")[0]+\":\"+e.getMilliseconds()}const Yy={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},qy=Date.now(),zy=e=>{for(const t in Yy)if(Object.prototype.hasOwnProperty.call(Yy,t)&&Yy[t]===e)return t;return\"DEFAULT\"};const Jy=new class{constructor(){Fy(this,\"proxyServerURL\",void 0),Fy(this,\"logLevel\",Yy.DEBUG),Fy(this,\"uploadState\",\"collecting\"),Fy(this,\"uploadLogWaitingList\",[]),Fy(this,\"uploadLogUploadingList\",[]),Fy(this,\"uploadErrorCount\",0),Fy(this,\"currentLogID\",0),Fy(this,\"url\",void 0),Fy(this,\"extLog\",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[Yy.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[Yy.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[Yy.WARNING].concat(t);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[Yy.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[Yy.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){wy(\"UPLOAD_LOG\",!0)}disableLogUpload(){wy(\"UPLOAD_LOG\",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new Wy(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(Date.now()-qy<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-qy);const n=Math.max(0,Math.min(4,t[0]));if(t[0]=Hy()+\" Agora-SDK [\".concat(zy(n),\"]:\"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;const r=Hy()+\" %cAgora-SDK [\".concat(zy(n),\"]:\");let o=[];if(!Oy(\"USE_NEW_LOG\"))switch(n){case Yy.DEBUG:o=[r,\"color: #64B5F6;\"].concat(t.slice(1)),console.log.apply(console,o);break;case Yy.INFO:o=[r,\"color: #1E88E5; font-weight: bold;\"].concat(t.slice(1)),console.log.apply(console,o);break;case Yy.WARNING:o=[r,\"color: #FB8C00; font-weight: bold;\"].concat(t.slice(1)),console.warn.apply(console,o);break;case Yy.ERROR:o=[r,\"color: #B00020; font-weight: bold;\"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(Date.now()-qy<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-qy);const n=Math.max(0,Math.min(4,t[0]));t[0]=Hy()+\" Agora-SDK [\".concat(zy(n),\"]:\"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!Oy(\"UPLOAD_LOG\"))return;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];Array.isArray(i[0])?i[0][0]=Ky()+\" Agora-SDK [\".concat(zy(e),\"]:\"):i[0]=Ky()+\" Agora-SDK [\".concat(zy(e),\"]:\");let r=\"\";i.forEach((e=>{\"object\"==typeof e&&(e=JSON.stringify(e)),r+=\"\".concat(e,\" \")})),this.uploadLogWaitingList.push({payload_str:r,log_level:e,log_item_id:this.currentLogID++}),\"uploading\"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState=\"uploading\",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:Cy,process_id:Oy(\"PROCESS_ID\"),payload:JSON.stringify(e)};return _y((async()=>{const e=await pI.post(this.url||(this.proxyServerURL?\"https://\".concat(this.proxyServerURL,\"/ls/?h=\").concat(Oy(\"LOG_UPLOAD_SERVER\"),\"&p=443&d=upload/v1\"):\"https://\".concat(Oy(\"LOG_UPLOAD_SERVER\"),\"/upload/v1\")),t,{responseType:\"text\"});if(\"OK\"!==e.data){const t=new Error(\"unexpected upload log response\");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>{const i={status:-1,message:t.message,errorRange:e.map((e=>e.log_item_id))};return t.response?(i.status=t.response.status,i.data=t.response.data,i.headers=t.response.headers):t.request&&(i.status=t.request.status),Gy.reportLogUploadError(i),!0}),{timeout:Oy(\"UPLOAD_LOG_REQUEST_RETRY_INTERVAL\"),maxRetryTimeout:Oy(\"UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL\")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Oy(\"UPLOAD_LOG_LENGTH_EACH_TIME\"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),Oy(\"UPLOAD_LOG_INTERVAL\"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),Oy(\"UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1\")):window.setTimeout((()=>this.uploadLogInterval()),Oy(\"UPLOAD_LOG_RETRY_INTERVAL_V1\"))})))}};var Xy;function Qy(e){return av(e.reportId,\"params.reportId\",0,100,!1),av(e.category,\"params.category\",0,100,!1),av(e.event,\"params.event\",0,100,!1),av(e.label,\"params.label\",0,100,!1),ov(e.value,\"params.value\",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(Xy={}).FREE=\"free\",Xy.UPLOADING=\"uploading\",function(e){e[e.MISC=0]=\"MISC\",e[e.INTERNAL_EVENT=1]=\"INTERNAL_EVENT\",e[e.PUBLIC_EVENT=2]=\"PUBLIC_EVENT\",e[e.WEB_EVENT=3]=\"WEB_EVENT\",e[e.INTERNAL_API=4]=\"INTERNAL_API\",e[e.WEB_API=5]=\"WEB_API\",e[e.PUBLIC_API=6]=\"PUBLIC_API\"}({});const Zy={sid:\"\",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let $y=function(e){return e.PUBLISH=\"publish\",e.SUBSCRIBE=\"subscribe\",e.WS_COMPRESSOR_INIT=\"ws_compressor_init\",e.SESSION_INIT=\"session_init\",e.JOIN_CHOOSE_SERVER=\"join_choose_server\",e.REQ_USER_ACCOUNT=\"req_user_account\",e.JOIN_GATEWAY=\"join_gateway\",e.REJOIN_GATEWAY=\"rejoin_gateway\",e.STREAM_SWITCH=\"stream_switch\",e.REQUEST_PROXY_WORKER_MANAGER=\"request_proxy_worker_manager\",e.REQUEST_PROXY_APPCENTER=\"request_proxy_appcenter\",e.FIRST_VIDEO_RECEIVED=\"first_video_received\",e.FIRST_AUDIO_RECEIVED=\"first_audio_received\",e.FIRST_VIDEO_DECODE=\"first_video_decode\",e.FIRST_AUDIO_DECODE=\"first_audio_decode\",e.ON_ADD_AUDIO_STREAM=\"on_add_audio_stream\",e.ON_ADD_VIDEO_STREAM=\"on_add_video_stream\",e.ON_UPDATE_STREAM=\"on_update_stream\",e.ON_REMOVE_STREAM=\"on_remove_stream\",e.USER_ANALYTICS=\"req_user_analytics\",e.PC_STATS=\"pc_stats\",e.UPDATE_REMOTE_RTPCAPABILITIES=\"update_remote_rtpCapabilities\",e}({}),eA=function(e){return e.SESSION=\"io.agora.pb.Wrtc.Session\",e.JOIN_CHOOSE_SERVER=\"io.agora.pb.Wrtc.JoinChooseServer\",e.REQ_USER_ACCOUNT=\"io.agora.pb.Wrtc.ReqUserAccount\",e.JOIN_GATEWAY=\"io.agora.pb.Wrtc.JoinGateway\",e.RE_JOIN_GATEWAY=\"io.agora.pb.Wrtc.ReJoinGateway\",e.PUBLISH=\"io.agora.pb.Wrtc.Publish\",e.SUBSCRIBE=\"io.agora.pb.Wrtc.Subscribe\",e.WS_COMPRESSOR_INIT=\"io.agora.pb.Wrtc.WsCompressorInit\",e.STREAM_SWITCH=\"io.agora.pb.Wrtc.StreamSwitch\",e.AUDIO_SENDING_STOPPED=\"io.agora.pb.Wrtc.AudioSendingStopped\",e.VIDEO_SENDING_STOPPED=\"io.agora.pb.Wrtc.VideoSendingStopped\",e.REQUEST_PROXY_APPCENTER=\"io.agora.pb.Wrtc.RequestProxyAppCenter\",e.REQUEST_PROXY_WORKER_MANAGER=\"io.agora.pb.Wrtc.RequestProxyWorkerManager\",e.API_INVOKE=\"io.agora.pb.Wrtc.ApiInvoke\",e.FIRST_VIDEO_RECEIVED=\"io.agora.pb.Wrtc.FirstVideoReceived\",e.FIRST_AUDIO_RECEIVED=\"io.agora.pb.Wrtc.FirstAudioReceived\",e.FIRST_VIDEO_DECODE=\"io.agora.pb.Wrtc.FirstVideoDecode\",e.FIRST_AUDIO_DECODE=\"io.agora.pb.Wrtc.FirstAudioDecode\",e.ON_ADD_AUDIO_STREAM=\"io.agora.pb.Wrtc.OnAddAudioStream\",e.ON_ADD_VIDEO_STREAM=\"io.agora.pb.Wrtc.OnAddVideoStream\",e.ON_UPDATE_STREAM=\"io.agora.pb.Wrtc.OnUpdateStream\",e.ON_REMOVE_STREAM=\"io.agora.pb.Wrtc.OnRemoveStream\",e.JOIN_CHANNEL_TIMEOUT=\"io.agora.pb.Wrtc.JoinChannelTimeout\",e.PEER_PUBLISH_STATUS=\"io.agora.pb.Wrtc.PeerPublishStatus\",e.WORKER_EVENT=\"io.agora.pb.Wrtc.WorkerEvent\",e.AP_WORKER_EVENT=\"io.agora.pb.Wrtc.APWorkerEvent\",e.JOIN_WEB_PROXY_AP=\"io.agora.pb.Wrtc.JoinWebProxyAP\",e.WEBSOCKET_QUIT=\"io.agora.pb.Wrtc.WebSocketQuit\",e.USER_ANALYTICS=\"io.agora.pb.Wrtc.UserAnalytics\",e.AUTOPLAY_FAILED=\"io.agora.pb.Wrtc.AutoplayFailed\",e.PC_STATS=\"io.agora.pb.Wrtc.PCStats\",e.UPDATE_REMOTE_RTPCAPABILITIES=\"io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities\",e}({});!function(e){e[e.WORKER_EVENT=156]=\"WORKER_EVENT\",e[e.AP_WORKER_EVENT=160]=\"AP_WORKER_EVENT\"}({});let tA=function(e){return e[e.SESSION=26]=\"SESSION\",e[e.JOIN_CHOOSE_SERVER=27]=\"JOIN_CHOOSE_SERVER\",e[e.REQ_USER_ACCOUNT=196]=\"REQ_USER_ACCOUNT\",e[e.JOIN_GATEWAY=28]=\"JOIN_GATEWAY\",e[e.PUBLISH=30]=\"PUBLISH\",e[e.SUBSCRIBE=29]=\"SUBSCRIBE\",e[e.WS_COMPRESSOR_INIT=9430]=\"WS_COMPRESSOR_INIT\",e[e.STREAM_SWITCH=32]=\"STREAM_SWITCH\",e[e.AUDIO_SENDING_STOPPED=33]=\"AUDIO_SENDING_STOPPED\",e[e.VIDEO_SENDING_STOPPED=34]=\"VIDEO_SENDING_STOPPED\",e[e.REQUEST_PROXY_APPCENTER=35]=\"REQUEST_PROXY_APPCENTER\",e[e.REQUEST_PROXY_WORKER_MANAGER=36]=\"REQUEST_PROXY_WORKER_MANAGER\",e[e.API_INVOKE=41]=\"API_INVOKE\",e[e.FIRST_VIDEO_RECEIVED=348]=\"FIRST_VIDEO_RECEIVED\",e[e.FIRST_AUDIO_RECEIVED=349]=\"FIRST_AUDIO_RECEIVED\",e[e.FIRST_VIDEO_DECODE=350]=\"FIRST_VIDEO_DECODE\",e[e.FIRST_AUDIO_DECODE=351]=\"FIRST_AUDIO_DECODE\",e[e.ON_ADD_AUDIO_STREAM=352]=\"ON_ADD_AUDIO_STREAM\",e[e.ON_ADD_VIDEO_STREAM=353]=\"ON_ADD_VIDEO_STREAM\",e[e.ON_UPDATE_STREAM=356]=\"ON_UPDATE_STREAM\",e[e.ON_REMOVE_STREAM=355]=\"ON_REMOVE_STREAM\",e[e.JOIN_CHANNEL_TIMEOUT=407]=\"JOIN_CHANNEL_TIMEOUT\",e[e.PEER_PUBLISH_STATUS=408]=\"PEER_PUBLISH_STATUS\",e[e.WORKER_EVENT=156]=\"WORKER_EVENT\",e[e.AP_WORKER_EVENT=160]=\"AP_WORKER_EVENT\",e[e.JOIN_WEB_PROXY_AP=700]=\"JOIN_WEB_PROXY_AP\",e[e.WEBSOCKET_QUIT=671]=\"WEBSOCKET_QUIT\",e[e.USER_ANALYTICS=1e4]=\"USER_ANALYTICS\",e[e.AUTOPLAY_FAILED=9178]=\"AUTOPLAY_FAILED\",e}({});class iA{constructor(){Fy(this,\"baseInfoMap\",new Map),Fy(this,\"proxyServer\",void 0),Fy(this,\"eventUploadTimer\",void 0),Fy(this,\"setSessionIdTimer\",void 0),Fy(this,\"url\",void 0),Fy(this,\"backupUrl\",void 0),Fy(this,\"_appId\",void 0),Fy(this,\"keyEventUploadPendingItems\",[]),Fy(this,\"normalEventUploadPendingItems\",[]),Fy(this,\"apiInvokeUploadPendingItems\",[]),Fy(this,\"apiInvokeCount\",0),Fy(this,\"ltsList\",[]),Fy(this,\"lastSendNormalEventTime\",Date.now()),Fy(this,\"customReportCounterTimer\",void 0),Fy(this,\"customReportCount\",0),Fy(this,\"extApiInvoke\",(async e=>{for(const t of e){const e=jy(jy({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Rv.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Oy(\"EVENT_REPORT_SEND_INTERVAL\")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Oy(\"EVENT_REPORT_SEND_INTERVAL\"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void Jy.error(\"adjust session \".concat(e,\" start time, sid is not exist or info is undefined\"));const t=this.baseInfoMap.get(e),i=Date.now(),n=t.startTime;t.startTime=i,Jy.debug(\"rewrite session \".concat(e,\" startTime: \").concat(i,\" , \").concat(i-n,\"ms\")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,i){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const n=Date.now();this.apiInvokeCount+=1;const r=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:n,options:t.options,states:t.states||null}),s=!!Oy(\"SHOW_REPORT_INVOKER_LOG\");s&&Jy.info(\"\".concat(t.name,\" start\"),t.options);let a=!1;Qv(t.timeout).then((()=>{a||(this.sendApiInvoke(jy(jy({},o()),{},{error:tv.API_INVOKE_TIMEOUT,success:!1})),Jy.debug(\"\".concat(t.name,\" timeout\")))}));const c=new iv(tv.UNEXPECTED_ERROR,\"\".concat(t.name,\": this api invoke is end\"));return{onSuccess:e=>{const n=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(jy(jy({},o()),{},{success:!0},t.reportResult&&{result:e})),s&&Jy.info(\"\".concat(t.name,\" onSuccess\")),e};return i?iy(n,t.name+\"Success\",i,(()=>a=!0)):n()},onError:e=>{const n=()=>{if(a)throw e;a=!0,this.sendApiInvoke(jy(jy({},o()),{},{success:!1,error:e})),s&&Jy.info(\"\".concat(t.name,\" onFailure\"),e.toString())};return i?iy(n,t.name+\"Error\",i,(()=>a=!0)):n()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const i=Date.now(),n=this.createBaseInfo(e,i);n.cname=t.cname;const r=Object.assign({},{willUploadConsoleLog:Oy(\"UPLOAD_LOG\"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Iy?\"global\":\"oversea\",areas:Oy(\"AREAS\")&&Oy(\"AREAS\").join(\",\")},t.extend),{stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:d,clientRole:l}=t,u=Date.now(),h=jy(jy({},n),{},{eventType:$y.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,buildFormat:t.buildFormat,build:Ay,lts:u,elapse:u-i,extend:JSON.stringify(r),mode:t.mode,process:Oy(\"PROCESS_ID\"),appType:Oy(\"APP_TYPE\"),success:!0,version:Cy,stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:d,clientType:Dn(p=window.navigator.userAgent).call(p,\"AgoraWebView\")?42:20,clientRole:l,serviceId:Oy(\"PROCESS_ID\"),extensionID:Oy(\"PLUGIN_INFO\").join(\",\")||\"\"});var p;this.send({type:eA.SESSION,data:h},!0)}joinChooseServer(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{eventType:$y.JOIN_CHOOSE_SERVER,lts:r,eventElapse:t.elapse||r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-i.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||\"\",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:eA.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{eventType:$y.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:t.elapse||r-i.startTime,eventElapse:r-t.lts,extend:JSON.stringify(t.extend)});this.send({type:eA.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;const r=Date.now(),{firstSuccess:o,avoidJoinStartTime:s}=t,a=r-(o&&s?s:i.startTime),c=jy(jy({},n),{},{eventType:$y.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,errorMsg:t.errorMsg||\"\",elapse:a,eventElapse:r-t.lts,firstSuccess:o,signalChannel:t.signalChannel,preload:t.preload?1:0});t.succ&&(i.lastJoinSuccessTime=r),this.send({type:eA.JOIN_GATEWAY,data:c},!0)}joinChannelTimeout(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=Date.now(),r=jy(jy({},i.info),{},{lts:n,timeout:t,elapse:n-i.startTime});this.send({type:eA.JOIN_CHANNEL_TIMEOUT,data:r},!0)}publish(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{eventType:$y.PUBLISH,lts:r,eventElapse:t.eventElapse,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:eA.PUBLISH,data:o},!0)}subscribe(e,t,i){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),s=jy(jy({},r),{},{eventType:$y.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-n.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid,preSsrc:t.preSsrc?1:0},i&&{extend:JSON.stringify({isMassSubscribe:!0})});\"string\"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:eA.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const i=[...d_(t=this.baseInfoMap).call(t)],n=i.length?i[0]:\"UnableToGetSid\",r=this.baseInfoMap.get(n);if(!r)return;const o=r.info,s=Date.now(),a=jy(jy({},o),{},{eventType:$y.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-r.startTime,status:e.status?1:2});this.send({type:eA.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=jy(jy(jy({},o),n),{},{elapse:s-r.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max((n.firstFrame||s)-r.startTime,0),apEnd:Math.max(n.apEnd-r.startTime,0),apStart:Math.max(n.apStart-r.startTime,0),joinGwEnd:Math.max(n.joinGwEnd-r.startTime,0),joinGwStart:Math.max(n.joinGwStart-r.startTime,0),pcEnd:Math.max(n.pcEnd-r.startTime,0),pcStart:Math.max(n.pcStart-r.startTime,0),subscriberEnd:Math.max(n.subscriberEnd-r.startTime,0),subscriberStart:Math.max(n.subscriberStart-r.startTime,0),videoAddNotify:Math.max(n.videoAddNotify-r.startTime,0)});this.send({type:i,data:a},!0)}firstRemoteFrame(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=jy(jy(jy({},o),n),{},{elapse:s-r.startTime,eventType:t,lts:s});this.send({type:i,data:a},!0)}pcStats(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy(jy({},n),t),{},{vid:void 0===n.vid?0:Number(n.vid),elapse:r-i.startTime,eventType:$y.PC_STATS,lts:r,preallocation:t.preallocation?1:0});this.send({type:eA.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy(jy({},n),t),{},{vid:void 0===n.vid?0:Number(n.vid),eventType:$y.UPDATE_REMOTE_RTPCAPABILITIES,lts:r});this.send({type:eA.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=jy(jy(jy({},o),n),{},{eventType:t,lts:s});this.send({type:i,data:a},!0)}streamSwitch(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{eventType:$y.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-i.startTime,success:t.succ});this.send({type:eA.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{eventType:$y.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:eA.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{eventType:$y.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:eA.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?Jy.debug(\"reportProxyServerurl: \".concat(e)):Jy.debug(\"disable reportProxyServerurl: \".concat(e))}peerPublishStatus(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy({},n),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:r,elapse:r-i.startTime,joinChannelSuccessElapse:r-(i.lastJoinSuccessTime||r),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:eA.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now();(function(e,t,i){const n=e[t];if(!n||\"string\"!=typeof n)return[e];e[t]=\"\";const r=zv(JSON.stringify(e));let o=0;const s=[];let a=0;for(let c=0;c<n.length;c++)a+=n.charCodeAt(c)<=127?1:3,a<=i-r||(s[s.length]=ev(ev({},e),{},{[t]:n.substring(o,c)}),o=c,a=n.charCodeAt(c)<=127?1:3);return o!==n.length-1&&(s[s.length]=ev(ev({},e),{},{[t]:n.substring(o)})),s})(jy(jy(jy({},n),t),{},{elapse:r-i.startTime,lts:r,productType:\"WebRTC\"}),\"payload\",1300).forEach((e=>this.send({type:eA.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy(jy({},n),t),{},{elapse:r-i.startTime,lts:r});this.send({type:eA.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy(jy({},n),t),{},{elapse:r-i.startTime,lts:r,extend:t.extend||void 0});this.send({type:eA.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=jy(jy(jy({},n),t),{},{elapse:r-i.startTime,lts:r});this.send({type:eA.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>Oy(\"CUSTOM_REPORT_LIMIT\"))throw new iv(tv.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const i=Date.now(),n=t.map((t=>({type:eA.USER_ANALYTICS,data:jy(jy({sid:e},t),{},{lts:i})})));try{Oy(\"NEW_REPORT_SERVER\")?await this.postDataToStatsCollector2(n):await this.postDataToStatsCollector(n)}catch(e){throw Jy.error(\"send custom report message failed\",e.toString()),new iv(tv.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=Oy(\"NOT_REPORT_EVENT\");if(e.tag&&Dn(t)&&Dn(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:r,cid:o}=i.info;let s;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof iv){const{code:t,message:i}=e.error;s=t||i||e.error.toString()}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:n,cid:o,uid:r,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:eA.API_INVOKE,data:a},!1),!0}appendSessionId(){iA.__CLIENT_LIST__.forEach((e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let i=0;i<t;i++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>Oy(\"NORMAL_EVENT_QUEUE_CAPACITY\")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const i=[],n=[];for(;e.length;){const t=e.shift();i.length<20?i.push(t):n.push(t)}e.push(...n);for(const e of[...i]){var r;-1!==this.ltsList.indexOf(e.data.lts)?(e.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(e.data.lts)):(this.ltsList.push(e.data.lts),oE(r=this.ltsList).call(r,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),Oy(\"ENABLE_EVENT_REPORT\")?(i.length&&(Oy(\"NEW_REPORT_SERVER\")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((e=>i=>{Oy(\"EVENT_REPORT_RETRY\")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>Oy(\"NORMAL_EVENT_QUEUE_CAPACITY\")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Oy(\"NORMAL_EVENT_QUEUE_CAPACITY\")),Jy.warning(\"report: drop normal events\"))))})(i)),e):e}async postDataToStatsCollector2(e){Uv.networkState===Nv.OFFLINE&&await Gh.race([Uv.onlineWaiter,Qv(2*hy.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const i=_v(JSON.stringify(e.data)),n=new ArrayBuffer(5),r=(e=>{let t=0;return Object.entries(eA).forEach((i=>{let[n,r]=i;r===e.type&&(t=tA[n])})),t})(e),o=new DataView(n);o.setUint16(0,i.byteLength,!0),o.setUint8(2,255&r),o.setUint8(3,r>>>8&255),o.setUint8(4,r>>>16&255),t=Ev(t,new Uint8Array(n)),t=Ev(t,i)})),t},i=\"event\";let n=this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Oy(\"NEW_REPORT_SERVER_DOMAINS\")[0],\"&p=443&d=\").concat(i):\"https://\".concat(Oy(\"NEW_REPORT_SERVER_DOMAINS\")[0],\"/\").concat(i);for(let r=0;r<2;r+=1){1===r&&(n=this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Oy(\"NEW_REPORT_SERVER_DOMAINS\")[1],\"&p=443&d=\").concat(i):\"https://\".concat(Oy(\"NEW_REPORT_SERVER_DOMAINS\")[1],\"/\").concat(i));try{await Sy(n,{timeout:1e4,data:t(e),headers:jy(jy({biz:\"webrtc\",sendts:Math.round(Date.now()/1e3),debug:\"false\"},this._appId&&{appid:this._appId}),{},{\"Content-Type\":\"application/octet-stream\"})},!0)}catch(e){if(1===r)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={msgType:\"EventMessages\",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};Uv.networkState===Nv.OFFLINE&&await Gh.race([Uv.onlineWaiter,Qv(2*hy.maxRetryTimeout)]);const n=t?\"/events/proto-raws\":\"/events/messages\";let r=this.url||(this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Oy(\"EVENT_REPORT_DOMAIN\"),\"&p=\").concat(Oy(\"STATS_COLLECTOR_PORT\"),\"&d=\").concat(n):\"https://\".concat(Oy(\"EVENT_REPORT_DOMAIN\"),\":\").concat(Oy(\"STATS_COLLECTOR_PORT\")).concat(n));for(let e=0;e<2;e+=1){1===e&&(r=this.backupUrl||(this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Oy(\"EVENT_REPORT_BACKUP_DOMAIN\"),\"&p=\").concat(Oy(\"STATS_COLLECTOR_PORT\"),\"&d=\").concat(n):\"https://\".concat(Oy(\"EVENT_REPORT_BACKUP_DOMAIN\"),\":\").concat(Oy(\"STATS_COLLECTOR_PORT\")).concat(n)));try{t?await gy(r,{timeout:1e4,data:i}):await Sy(r,{timeout:1e4,data:i})}catch(t){if(1===e)throw t;continue}return}}createBaseInfo(e,t){const i=Object.assign({},Zy);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:t}),i}reportResourceTiming(e,t){const i=performance.getEntriesByName(e),n=i[i.length-1];n&&this.reportApiInvoke(t,{name:\"Client.resourceTiming\",options:n,tag:Rv.TRACER}).onSuccess()}}function nA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,i,n){const r=n.value;if(\"function\"==typeof r){const o=e.className||t.__className__||(\"AgoraRTCClient\"===t.constructor.name?\"Client\":t.constructor.name);n.value=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];let a=n;if(e.argsMap)try{a=e.argsMap(this,...n)}catch(e){Jy.warning(e),a=[]}try{JSON.stringify(a)}catch(e){Jy.warning(\"arguments for method \".concat(o,\".\").concat(String(i),\" not serializable for apiInvoke.\")),a=[]}const c=(e.report||rA).reportApiInvoke(this._sessionId||null,{name:\"\".concat(o,\".\").concat(String(i)),options:a,tag:Rv.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=r.apply(this,n);return t instanceof Gh?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return n}}Fy(iA,\"__CLIENT_LIST__\",[]);const rA=new iA;Gy.on(\"REPORT_LOG_UPLOAD\",(e=>{e.networkState=Uv.networkState,rA.reportApiInvoke(null,{name:\"logUploadError\",options:e,tag:Rv.TRACER}).onSuccess(\"logUploadError\")}));const oA=[\"CHINA\",\"GLOBAL\"],sA=function(){const e=\"us\".concat(\"erna\",\"me\"),t=\"pa\".concat(\"sswo\",\"rd\"),i=[\"t\",\"s\",\"t\"];i.splice(1,0,\"e\");const n=i.join(\"\"),r=[];for(let e=0;e<6;e++)r.push(\"1\");const o=r.join(\"\"),s={};return s[e]=n,s[t]=o,Object.assign(s,{turnServerURL:\"\",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=sA,Iy||(by.WEBCS_DOMAIN=[\"ap-web-1-oversea.agora.io\",\"ap-web-1-north-america.agora.io\"],by.WEBCS_DOMAIN_BACKUP_LIST=[\"ap-web-2-oversea.agora.io\",\"ap-web-2-north-america.agora.io\"],by.PROXY_CS=[\"proxy-ap-web-oversea.agora.io\",\"proxy-ap-web-america.agora.io\"],by.CDS_AP=[\"cds-ap-web-oversea.agora.io\",\"cds-ap-web-america.agora.io\",\"cds-ap-web-america2.agora.io\"],by.ACCOUNT_REGISTER=[\"sua-ap-web-oversea.agora.io\",\"sua-ap-web-america.agora.io\",\"sua-ap-web-america2.agora.io\"],by.UAP_AP=[\"uap-ap-web-oversea.agora.io\",\"uap-ap-web-america.agora.io\",\"uap-ap-web-america2.agora.io\"],by.LOG_UPLOAD_SERVER=\"logservice-oversea.agora.io\",by.EVENT_REPORT_DOMAIN=\"statscollector-1-oversea.agora.io\",by.EVENT_REPORT_BACKUP_DOMAIN=\"statscollector-2-oversea.agora.io\",by.PROXY_SERVER_TYPE3=\"webrtc-cloud-proxy.agora.io\",by.AREAS=[\"NORTH_AMERICA\",\"OVERSEA\"]);const aA=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],cA=[];function dA(e,t){return!!t&&cA.some((i=>i.uid===e&&i.channelName===t))}iA.__CLIENT_LIST__=cA;var lA=Rm.forEach,uA=Bn(\"forEach\")?[].forEach:function(e){return lA(this,e,arguments.length>1?arguments[1]:void 0)};wi({target:\"Array\",proto:!0,forced:[].forEach!=uA},{forEach:uA});var hA=Xi(\"Array\").forEach,pA=pn,_A=Ze,EA=l,fA=hA,mA=Array.prototype,TA={DOMTokenList:!0,NodeList:!0},SA=function(e){var t=e.forEach;return e===mA||EA(mA,e)&&t===mA.forEach||_A(TA,pA(e))?fA:t},gA=i(SA),RA=Je,CA=eo;wi({target:\"Object\",stat:!0,forced:n((function(){CA(1)}))},{keys:function(e){return CA(RA(e))}});var IA=i(ie.Object.keys),vA=i(zn),yA=wi,AA=If,bA=d([].reverse),wA=[1,2];yA({target:\"Array\",proto:!0,forced:String(wA)===String(wA.reverse())},{reverse:function(){return AA(this)&&(this.length=this.length),bA(this)}});var OA=Xi(\"Array\").reverse,NA=l,DA=OA,PA=Array.prototype,LA=function(e){var t=e.reverse;return e===PA||NA(PA,e)&&t===PA.reverse?DA:t},kA=LA,MA=i(kA),UA=wi,xA=If,VA=jc,FA=te,BA=xi,jA=Gi,GA=Z,WA=E_,HA=ht,KA=Xc,YA=Mf(\"slice\"),qA=HA(\"species\"),zA=Array,JA=Math.max;UA({target:\"Array\",proto:!0,forced:!YA},{slice:function(e,t){var i,n,r,o=GA(this),s=jA(o),a=BA(e,s),c=BA(void 0===t?s:t,s);if(xA(o)&&(i=o.constructor,(VA(i)&&(i===zA||xA(i.prototype))||FA(i)&&null===(i=i[qA]))&&(i=void 0),i===zA||void 0===i))return KA(o,a,c);for(n=new(void 0===i?zA:i)(JA(c-a,0)),r=0;a<c;a++,r++)a in o&&WA(n,r,o[a]);return n.length=r,n}});var XA=Xi(\"Array\").slice,QA=l,ZA=XA,$A=Array.prototype,eb=function(e){var t=e.slice;return e===$A||QA($A,e)&&t===$A.slice?ZA:t},tb=i(eb);function ib(e,t,i,n,r){var o,s,a,c={};return gA(o=IA(n)).call(o,(function(e){c[e]=n[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,(\"value\"in c||c.initializer)&&(c.writable=!0),c=vA(s=MA(a=tb(i).call(i)).call(a)).call(s,(function(i,n){return n(e,t,i)||i}),c),r&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(r):void 0,c.initializer=void 0),void 0===c.initializer&&(Rf(e,t,c),c=null),c}let nb=function(e){return e.L1T1=\"L1T1\",e.L1T2=\"L1T2\",e.L1T3=\"L1T3\",e.L1T3_KEY=\"L1T3_KEY\",e.L2T1_KEY=\"L2T1_KEY\",e.L2T2_KEY=\"L2T2_KEY\",e.L2T3_KEY=\"L2T3_KEY\",e.L3T1_KEY=\"L3T1_KEY\",e.L3T2_KEY=\"L3T2_KEY\",e.L3T3_KEY=\"L3T3_KEY\",e}({}),rb=function(e){return e.CERTIFICATE=\"certificate\",e.CODEC=\"codec\",e.CANDIDATE_PAIR=\"candidate-pair\",e.LOCAL_CANDIDATE=\"local-candidate\",e.REMOTE_CANDIDATE=\"remote-candidate\",e.INBOUND=\"inbound-rtp\",e.TRACK=\"track\",e.OUTBOUND=\"outbound-rtp\",e.PC=\"peer-connection\",e.REMOTE_INBOUND=\"remote-inbound-rtp\",e.REMOTE_OUTBOUND=\"remote-outbound-rtp\",e.TRANSPORT=\"transport\",e.CSRC=\"csrc\",e.DATA_CHANNEL=\"data-channel\",e.STREAM=\"stream\",e.SENDER=\"sender\",e.RECEIVER=\"receiver\",e}({}),ob=function(e){return e[e.ACCESS_POINT=101]=\"ACCESS_POINT\",e[e.UNILBS=201]=\"UNILBS\",e[e.STRING_UID_ALLOCATOR=901]=\"STRING_UID_ALLOCATOR\",e}({}),sb=function(e){return e[e.IIIEGAL_APPID=1]=\"IIIEGAL_APPID\",e[e.IIIEGAL_UID=2]=\"IIIEGAL_UID\",e[e.INTERNAL_ERROR=3]=\"INTERNAL_ERROR\",e}({}),ab=function(e){return e[e.INVALID_VENDOR_KEY=5]=\"INVALID_VENDOR_KEY\",e[e.INVALID_CHANNEL_NAME=7]=\"INVALID_CHANNEL_NAME\",e[e.INTERNAL_ERROR=8]=\"INTERNAL_ERROR\",e[e.NO_AUTHORIZED=9]=\"NO_AUTHORIZED\",e[e.DYNAMIC_KEY_TIMEOUT=10]=\"DYNAMIC_KEY_TIMEOUT\",e[e.NO_ACTIVE_STATUS=11]=\"NO_ACTIVE_STATUS\",e[e.DYNAMIC_KEY_EXPIRED=13]=\"DYNAMIC_KEY_EXPIRED\",e[e.STATIC_USE_DYNAMIC_KEY=14]=\"STATIC_USE_DYNAMIC_KEY\",e[e.DYNAMIC_USE_STATIC_KEY=15]=\"DYNAMIC_USE_STATIC_KEY\",e[e.USER_OVERLOAD=16]=\"USER_OVERLOAD\",e[e.FORBIDDEN_REGION=18]=\"FORBIDDEN_REGION\",e[e.CANNOT_MEET_AREA_DEMAND=19]=\"CANNOT_MEET_AREA_DEMAND\",e}({}),cb=function(e){return e[e.NO_FLAG_SET=100]=\"NO_FLAG_SET\",e[e.FLAG_SET_BUT_EMPTY=101]=\"FLAG_SET_BUT_EMPTY\",e[e.INVALID_FALG_SET=102]=\"INVALID_FALG_SET\",e[e.FLAG_SET_BUT_NO_RE=103]=\"FLAG_SET_BUT_NO_RE\",e[e.INVALID_SERVICE_ID=104]=\"INVALID_SERVICE_ID\",e[e.NO_SERVICE_AVAILABLE=200]=\"NO_SERVICE_AVAILABLE\",e[e.NO_SERVICE_AVAILABLE_P2P=201]=\"NO_SERVICE_AVAILABLE_P2P\",e[e.NO_SERVICE_AVAILABLE_VOICE=202]=\"NO_SERVICE_AVAILABLE_VOICE\",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]=\"NO_SERVICE_AVAILABLE_WEBRTC\",e[e.NO_SERVICE_AVAILABLE_CDS=204]=\"NO_SERVICE_AVAILABLE_CDS\",e[e.NO_SERVICE_AVAILABLE_CDN=205]=\"NO_SERVICE_AVAILABLE_CDN\",e[e.NO_SERVICE_AVAILABLE_TDS=206]=\"NO_SERVICE_AVAILABLE_TDS\",e[e.NO_SERVICE_AVAILABLE_REPORT=207]=\"NO_SERVICE_AVAILABLE_REPORT\",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]=\"NO_SERVICE_AVAILABLE_APP_CENTER\",e[e.NO_SERVICE_AVAILABLE_ENV0=209]=\"NO_SERVICE_AVAILABLE_ENV0\",e[e.NO_SERVICE_AVAILABLE_VOET=210]=\"NO_SERVICE_AVAILABLE_VOET\",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]=\"NO_SERVICE_AVAILABLE_STRING_UID\",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]=\"NO_SERVICE_AVAILABLE_WEBRTC_UNILBS\",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]=\"NO_SERVICE_AVAILABLE_UNILBS_FLV\",e}({}),db=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]=\"K_TIMESTAMP_EXPIRED\",e[e.K_CHANNEL_PERMISSION_INVALID=3]=\"K_CHANNEL_PERMISSION_INVALID\",e[e.K_CERTIFICATE_INVALID=4]=\"K_CERTIFICATE_INVALID\",e[e.K_CHANNEL_NAME_EMPTY=5]=\"K_CHANNEL_NAME_EMPTY\",e[e.K_CHANNEL_NOT_FOUND=6]=\"K_CHANNEL_NOT_FOUND\",e[e.K_TICKET_INVALID=7]=\"K_TICKET_INVALID\",e[e.K_CHANNEL_CONFLICTED=8]=\"K_CHANNEL_CONFLICTED\",e[e.K_SERVICE_NOT_READY=9]=\"K_SERVICE_NOT_READY\",e[e.K_SERVICE_TOO_HEAVY=10]=\"K_SERVICE_TOO_HEAVY\",e[e.K_UID_BANNED=14]=\"K_UID_BANNED\",e[e.K_IP_BANNED=15]=\"K_IP_BANNED\",e[e.K_CHANNEL_BANNED=16]=\"K_CHANNEL_BANNED\",e[e.K_AUTO_REBALANCE=28]=\"K_AUTO_REBALANCE\",e[e.WARN_NO_AVAILABLE_CHANNEL=103]=\"WARN_NO_AVAILABLE_CHANNEL\",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]=\"WARN_LOOKUP_CHANNEL_TIMEOUT\",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]=\"WARN_LOOKUP_CHANNEL_REJECTED\",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]=\"WARN_OPEN_CHANNEL_TIMEOUT\",e[e.WARN_OPEN_CHANNEL_REJECTED=107]=\"WARN_OPEN_CHANNEL_REJECTED\",e[e.WARN_REQUEST_DEFERRED=108]=\"WARN_REQUEST_DEFERRED\",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]=\"ERR_DYNAMIC_KEY_TIMEOUT\",e[e.ERR_NO_AUTHORIZED=110]=\"ERR_NO_AUTHORIZED\",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]=\"ERR_VOM_SERVICE_UNAVAILABLE\",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]=\"ERR_NO_CHANNEL_AVAILABLE_CODE\",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]=\"ERR_MASTER_VOCS_UNAVAILABLE\",e[e.ERR_INTERNAL_ERROR=115]=\"ERR_INTERNAL_ERROR\",e[e.ERR_NO_ACTIVE_STATUS=116]=\"ERR_NO_ACTIVE_STATUS\",e[e.ERR_INVALID_UID=117]=\"ERR_INVALID_UID\",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]=\"ERR_DYNAMIC_KEY_EXPIRED\",e[e.ERR_STATIC_USE_DYANMIC_KE=119]=\"ERR_STATIC_USE_DYANMIC_KE\",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]=\"ERR_DYNAMIC_USE_STATIC_KE\",e[e.ERR_NO_VOCS_AVAILABLE=2e3]=\"ERR_NO_VOCS_AVAILABLE\",e[e.ERR_NO_VOS_AVAILABLE=2001]=\"ERR_NO_VOS_AVAILABLE\",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]=\"ERR_JOIN_CHANNEL_TIMEOUT\",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]=\"ERR_REPEAT_JOIN_CHANNEL\",e[e.ERR_JOIN_BY_MULTI_IP=2004]=\"ERR_JOIN_BY_MULTI_IP\",e[e.ERR_NOT_JOINED=2011]=\"ERR_NOT_JOINED\",e[e.ERR_REPEAT_JOIN_REQUEST=2012]=\"ERR_REPEAT_JOIN_REQUEST\",e[e.ERR_INVALID_VENDOR_KEY=2013]=\"ERR_INVALID_VENDOR_KEY\",e[e.ERR_INVALID_CHANNEL_NAME=2014]=\"ERR_INVALID_CHANNEL_NAME\",e[e.ERR_INVALID_STRINGUID=2015]=\"ERR_INVALID_STRINGUID\",e[e.ERR_TOO_MANY_USERS=2016]=\"ERR_TOO_MANY_USERS\",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]=\"ERR_SET_CLIENT_ROLE_TIMEOUT\",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]=\"ERR_SET_CLIENT_ROLE_NO_PERMISSION\",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]=\"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]=\"ERR_PUBLISH_REQUEST_INVALID\",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]=\"ERR_SUBSCRIBE_REQUEST_INVALID\",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]=\"ERR_NOT_SUPPORTED_MESSAGE\",e[e.ERR_ILLEAGAL_PLUGIN=2023]=\"ERR_ILLEAGAL_PLUGIN\",e[e.ERR_REJOIN_TOKEN_INVALID=2024]=\"ERR_REJOIN_TOKEN_INVALID\",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]=\"ERR_REJOIN_USER_NOT_JOINED\",e[e.ERR_INVALID_OPTIONAL_INFO=2027]=\"ERR_INVALID_OPTIONAL_INFO\",e[e.ILLEGAL_AES_PASSWORD=2028]=\"ILLEGAL_AES_PASSWORD\",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]=\"ILLEGAL_CLIENT_ROLE_LEVEL\",e[e.ERR_TOO_MANY_BROADCASTERS=2031]=\"ERR_TOO_MANY_BROADCASTERS\",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]=\"ERR_TOO_MANY_SUBSCRIBERS\",e[e.ERR_LICENSE_MISSING=32769]=\"ERR_LICENSE_MISSING\",e[e.ERR_LICENSE_EXPIRED=32771]=\"ERR_LICENSE_EXPIRED\",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]=\"ERR_LICENSE_MINUTES_EXCEEDED\",e[e.ERR_LICENSE_PERIOD_INVALID=32774]=\"ERR_LICENSE_PERIOD_INVALID\",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]=\"ERR_LICENSE_MULTIPLE_SDK_SERVICE\",e[e.ERR_LICENSE_ILLEGAL=32783]=\"ERR_LICENSE_ILLEGAL\",e[e.ERR_TEST_RECOVER=9e3]=\"ERR_TEST_RECOVER\",e[e.ERR_TEST_TRYNEXT=9001]=\"ERR_TEST_TRYNEXT\",e[e.ERR_TEST_RETRY=9002]=\"ERR_TEST_RETRY\",e}({}),lb=function(e){return e.CONNECTING=\"connecting\",e.CONNECTED=\"connected\",e.RECONNECTING=\"reconnecting\",e.CLOSED=\"closed\",e}({}),ub=function(e){return e.WS_CONNECTED=\"ws_connected\",e.WS_RECONNECTING=\"ws_reconnecting\",e.WS_CLOSED=\"ws_closed\",e.WS_RECONNECT_WAITTING_FINISH=\"ws_reconnect_waitting_finish\",e.WS_RECONNECT_CREATE_CONNECTION=\"ws_reconnect_create_connection\",e.ON_BINARY_DATA=\"on_binary_data\",e.REQUEST_RECOVER=\"request_recover\",e.REQUEST_JOIN_INFO=\"request_join_info\",e.REQUEST_REJOIN_INFO=\"req_rejoin_info\",e.IS_P2P_DISCONNECTED=\"is_p2p_dis\",e.DISCONNECT_P2P=\"dis_p2p\",e.ABORT_P2P_EXECUTION=\"abort_p2p_execution\",e.NEED_RENEW_SESSION=\"need-sid\",e.REPORT_JOIN_GATEWAY=\"report_join_gateway\",e.REQUEST_TIMEOUT=\"request_timeout\",e.REQUEST_SUCCESS=\"request_success\",e.JOIN_RESPONSE=\"join_response\",e.PRE_CONNECT_PC=\"pre_connect_pc\",e.P2P_CONNECTION=\"p2p_connection\",e.P2P_REMOTE_CANDIDATE_UPDATE=\"p2p_remote_candidate_update\",e.P2P_SUBSCRIBE=\"p2p_subscribe\",e.P2P_UNSUBSCRIBE=\"p2p_unsubscribe\",e.P2P_EXCHANGE_SDP=\"p2p_exchange_sdp\",e.P2P_ON_ADD_VIDEO_STREAM=\"p2p_on_add_video_stream\",e.P2P_ON_ADD_AUDIO_STREAM=\"p2p_on_add_audio_stream\",e}({}),hb=function(e){return e.PING=\"ping\",e.PING_BACK=\"ping_back\",e.JOIN=\"join_v3\",e.REJOIN=\"rejoin_v3\",e.LEAVE=\"leave\",e.SET_CLIENT_ROLE=\"set_client_role\",e.PUBLISH=\"publish\",e.PUBLISH_DATASTREAM=\"publish_datastream\",e.UNPUBLISH=\"unpublish\",e.UNPUBLISH_DATASTREAM=\"unpublish_datastream\",e.SUBSCRIBE=\"subscribe\",e.PRE_SUBSCRIBE=\"pre_subscribe\",e.SUBSCRIBE_DATASTREAM=\"subscribe_datastream\",e.SUBSCRIBE_STREAMS=\"subscribe_streams\",e.UNSUBSCRIBE=\"unsubscribe\",e.UNSUBSCRIBE_DATASTREAM=\"unsubscribe_datastream\",e.UNSUBSCRIBE_STREAMS=\"unsubscribe_streams\",e.SUBSCRIBE_CHANGE=\"subscribe_change\",e.TRAFFIC_STATS=\"traffic_stats\",e.RENEW_TOKEN=\"renew_token\",e.SWITCH_VIDEO_STREAM=\"switch_video_stream\",e.DEFAULT_VIDEO_STREAM=\"default_video_stream\",e.SET_FALLBACK_OPTION=\"set_fallback_option\",e.GATEWAY_INFO=\"gateway_info\",e.CONTROL=\"control\",e.SEND_METADATA=\"send_metadata\",e.DATA_STREAM=\"data_stream\",e.PICK_SVC_LAYER=\"pick_svc_layer\",e.RESTART_ICE=\"restart_ice\",e.CONNECT_PC=\"connect_pc\",e.SET_VIDEO_PROFILE=\"set_video_profile\",e.SET_PARAMETER=\"set_parameter\",e.SET_RTM2_FLAG=\"set_rtm2_flag\",e}({}),pb=function(e){return e.WRTC_STATS=\"wrtc_stats\",e.WS_INFLATE_DATA_LENGTH=\"ws_inflate_data_length\",e.DENOISER_STATS=\"denoiser_stats\",e.EXTENSION_USAGE_STATS=\"extension_usage_stats\",e}({}),_b=function(e){return e.ON_USER_ONLINE=\"on_user_online\",e.ON_USER_OFFLINE=\"on_user_offline\",e.ON_STREAM_FALLBACK_UPDATE=\"on_stream_fallback_update\",e.ON_PUBLISH_STREAM=\"on_publish_stream\",e.ON_UPLINK_STATS=\"on_uplink_stats\",e.ON_P2P_LOST=\"on_p2p_lost\",e.ON_REMOVE_STREAM=\"on_remove_stream\",e.ON_ADD_AUDIO_STREAM=\"on_add_audio_stream\",e.ON_ADD_VIDEO_STREAM=\"on_add_video_stream\",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE=\"on_token_privilege_will_expire\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"on_token_privilege_did_expire\",e.ON_USER_BANNED=\"on_user_banned\",e.ON_USER_LICENSE_BANNED=\"on_user_license_banned\",e.ON_NOTIFICATION=\"on_notification\",e.ON_CRYPT_ERROR=\"on_crypt_error\",e.MUTE_AUDIO=\"mute_audio\",e.MUTE_VIDEO=\"mute_video\",e.UNMUTE_AUDIO=\"unmute_audio\",e.UNMUTE_VIDEO=\"unmute_video\",e.ON_P2P_OK=\"on_p2p_ok\",e.RECEIVE_METADATA=\"receive_metadata\",e.ON_DATA_STREAM=\"on_data_stream\",e.ON_RTP_CAPABILITY_CHANGE=\"on_rtp_capability_change\",e.ON_REMOTE_DATASTREAM_UPDATE=\"on_remote_datastream_update\",e.ON_REMOTE_FULL_DATASTREAM_INFO=\"on_remote_full_datastream_info\",e.ENABLE_LOCAL_VIDEO=\"enable_local_video\",e.DISABLE_LOCAL_VIDEO=\"disable_local_video\",e.ENABLE_LOCAL_AUDIO=\"enable_local_audio\",e.DISABLE_LOCAL_AUDIO=\"disable_local_audio\",e.ON_PUBLISHED_USER_LIST=\"on_published_user_list\",e}({}),Eb=function(e){return e.SEND_ONLY=\"SEND_ONLY\",e.RECEIVE_ONLY=\"RECEIVE_ONLY\",e}({}),fb=function(e){return e.CONNECTED=\"websocket:connected\",e.RECONNECTING=\"websocket:reconnecting\",e.WILL_RECONNECT=\"websocket:will_reconnect\",e.CLOSED=\"websocket:closed\",e.FAILED=\"websocket:failed\",e.ON_MESSAGE=\"websocket:on_message\",e.REQUEST_NEW_URLS=\"websocket:request_new_urls\",e.RECONNECT_WAITTING_FINISH=\"websocket:reconnect_waitting_finish\",e.RECONNECT_CREATE_CONNECTION=\"websocket:reconnect_create_connection\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"websocket:on_token_privilege_did_expire\",e}({});class mb extends iv{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",arguments.length>2?arguments[2]:void 0),ng(this,\"name\",\"AgoraRTCException\")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"error\";return super.print(e,Jy)}throw(){super.throw(Jy)}}function Tb(e){if(\"string\"!=typeof e||!/^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\-\\:\\;\\<\\=\\.\\>\\?\\@\\[\\]\\^\\_\\{\\}\\|\\~\\,]{1,64}$/.test(e))throw Jy.error(\"Invalid Channel Name \".concat(e)),new mb(tv.INVALID_PARAMS,\"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,\")}function Sb(e){if(!function(e){return\"number\"==typeof e&&Math.floor(e)===e&&0<=e&&e<=4294967295}(e)&&!lv(e,1,255))throw new mb(tv.INVALID_PARAMS,\"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]\");\"string\"==typeof e&&Jy.warn(\"You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.\")}let gb=function(e){return e.TRANSCODE=\"mix_streaming\",e.RAW=\"raw_streaming\",e}({});const Rb={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Cb={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function Ib(e,t){av(e.url,\"\".concat(t,\".url\"),1,1e3,!1),dv(e.x)||ov(e.x,\"\".concat(t,\".x\"),0,1e4),dv(e.y)||ov(e.y,\"\".concat(t,\".y\"),0,1e4),dv(e.width)||ov(e.width,\"\".concat(t,\".width\"),0,1e4),dv(e.height)||ov(e.height,\"\".concat(t,\".height\"),0,1e4),dv(e.zOrder)||ov(e.zOrder,\"\".concat(t,\".zOrder\"),0,255),dv(e.alpha)||ov(e.alpha,\"\".concat(t,\".alpha\"),0,1,!1)}const vb={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:\"\"};let yb=function(e){return e.WARNING=\"@live_uap-warning\",e.ERROR=\"@line_uap-error\",e.PUBLISH_STREAM_STATUS=\"@live_uap-publish-status\",e.WORKER_STATUS=\"@live_uap-worker-status\",e.REQUEST_NEW_ADDRESS=\"@live_uap-request-address\",e}({}),Ab=function(e){return e.REQUEST_WORKER_MANAGER_LIST=\"@live_req_worker_manager\",e}({}),bb=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]=\"LIVE_STREAM_RESPONSE_SUCCEED\",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]=\"LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM\",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]=\"LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR\",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]=\"LIVE_STREAM_RESPONSE_BAD_STREAM\",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]=\"LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR\",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]=\"LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST\",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]=\"LIVE_STREAM_RESPONSE_NOT_AUTHORIZED\",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]=\"LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE\",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]=\"LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN\",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]=\"LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH\",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]=\"LIVE_STREAM_RESPONSE_NOT_SUPPORTED\",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]=\"LIVE_STREAM_RESPONSE_MAX_STREAM_NUM\",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]=\"LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR\",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]=\"LIVE_STREAM_RESPONSE_WORKER_LOST\",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]=\"LIVE_STREAM_RESPONSE_RESOURCE_LIMIT\",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]=\"LIVE_STREAM_RESPONSE_WORKER_QUIT\",e[e.ERROR_FAIL_SEND_MESSAGE=504]=\"ERROR_FAIL_SEND_MESSAGE\",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]=\"PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE\",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]=\"PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT\",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]=\"PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH\",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]=\"PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN\",e}({});function wb(e){if(!e.channelName)throw new mb(tv.INVALID_PARAMS,\"invalid channelName in info\");if(\"number\"!=typeof e.uid)throw new mb(tv.INVALID_PARAMS,\"invalid uid in info, uid must be a number\");return e.token&&av(e.token,\"info.token\",1,2047),Sb(e.uid),Tb(e.channelName),!0}let Ob=function(e){return e[e.SetSdkProfile=0]=\"SetSdkProfile\",e[e.SetSourceChannel=1]=\"SetSourceChannel\",e[e.SetSourceUserId=2]=\"SetSourceUserId\",e[e.SetDestChannel=3]=\"SetDestChannel\",e[e.StartPacketTransfer=4]=\"StartPacketTransfer\",e[e.StopPacketTransfer=5]=\"StopPacketTransfer\",e[e.UpdateDestChannel=6]=\"UpdateDestChannel\",e[e.Reconnect=7]=\"Reconnect\",e[e.SetVideoProfile=8]=\"SetVideoProfile\",e}({}),Nb=function(e){return e.NETWORK_DISCONNECTED=\"NETWORK_DISCONNECTED\",e.NETWORK_CONNECTED=\"NETWORK_CONNECTED\",e.PACKET_JOINED_SRC_CHANNEL=\"PACKET_JOINED_SRC_CHANNEL\",e.PACKET_JOINED_DEST_CHANNEL=\"PACKET_JOINED_DEST_CHANNEL\",e.PACKET_SENT_TO_DEST_CHANNEL=\"PACKET_SENT_TO_DEST_CHANNEL\",e.PACKET_RECEIVED_VIDEO_FROM_SRC=\"PACKET_RECEIVED_VIDEO_FROM_SRC\",e.PACKET_RECEIVED_AUDIO_FROM_SRC=\"PACKET_RECEIVED_AUDIO_FROM_SRC\",e.PACKET_UPDATE_DEST_CHANNEL=\"PACKET_UPDATE_DEST_CHANNEL\",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=\"PACKET_UPDATE_DEST_CHANNEL_REFUSED\",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=\"PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE\",e}({}),Db=function(e){return e.RELAY_STATE_IDLE=\"RELAY_STATE_IDLE\",e.RELAY_STATE_CONNECTING=\"RELAY_STATE_CONNECTING\",e.RELAY_STATE_RUNNING=\"RELAY_STATE_RUNNING\",e.RELAY_STATE_FAILURE=\"RELAY_STATE_FAILURE\",e}({}),Pb=function(e){return e.RELAY_OK=\"RELAY_OK\",e.SERVER_CONNECTION_LOST=\"SERVER_CONNECTION_LOST\",e.SRC_TOKEN_EXPIRED=\"SRC_TOKEN_EXPIRED\",e.DEST_TOKEN_EXPIRED=\"DEST_TOKEN_EXPIRED\",e}({}),Lb=function(e){return e.High=\"high\",e.Low=\"low\",e.Audio=\"audio\",e.Screen=\"screen\",e.ScreenLow=\"screen_low\",e}({}),kb=function(e){return e.DISCONNECT=\"disconnect\",e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.NETWORK_QUALITY=\"network-quality\",e.STREAM_TYPE_CHANGE=\"stream-type-change\",e.IS_P2P_DISCONNECTED=\"is-p2p-dis\",e.DISCONNECT_P2P=\"dis-p2p\",e.REQUEST_NEW_GATEWAY_LIST=\"req-gate-url\",e.NEED_RENEW_SESSION=\"need-sid\",e.REQUEST_P2P_CONNECTION_PARAMS=\"request-p2p-connection-params\",e.JOIN_RESPONSE=\"join-response\",e.RESET_CONNECTION_EVENTS=\"reset-connection-events\",e.PRE_CONNECT_PC=\"pre-connect_pc\",e}({}),Mb=function(e){return e.P2P_DISCONNECTED=\"P2P_DISCONNECTED\",e.A_ROUND_WS_FAILED=\"A_ROUND_WS_FAILED\",e.TIMEOUT=\"TIMEOUT\",e.UNKNOWN_REASON=\"UNKNOWN_REASON\",e}({}),Ub=function(e){return e[e.Nothing=0]=\"Nothing\",e[e.Audio=1]=\"Audio\",e[e.LwoVideo=2]=\"LwoVideo\",e[e.Video=4]=\"Video\",e[e.Data=8]=\"Data\",e[e.DataStream0=256]=\"DataStream0\",e[e.DataStream1=512]=\"DataStream1\",e[e.DataStream2=1024]=\"DataStream2\",e[e.DataStream3=2048]=\"DataStream3\",e[e.DataStream4=4096]=\"DataStream4\",e[e.DataStream5=8192]=\"DataStream5\",e[e.DataStream6=16384]=\"DataStream6\",e[e.DataStream7=32768]=\"DataStream7\",e}({}),xb=function(e){return e.CHINA=\"CHINA\",e.ASIA=\"ASIA\",e.NORTH_AMERICA=\"NORTH_AMERICA\",e.EUROPE=\"EUROPE\",e.JAPAN=\"JAPAN\",e.INDIA=\"INDIA\",e.KOREA=\"KOREA\",e.HKMC=\"HKMC\",e.US=\"US\",e.OCEANIA=\"OCEANIA\",e.SOUTH_AMERICA=\"SOUTH_AMERICA\",e.AFRICA=\"AFRICA\",e.OVERSEA=\"OVERSEA\",e.GLOBAL=\"GLOBAL\",e.EXTENSIONS=\"EXTENSIONS\",e}({});const Vb=[xb.AFRICA,xb.ASIA,xb.CHINA,xb.EUROPE,xb.GLOBAL,xb.INDIA,xb.JAPAN,xb.NORTH_AMERICA,xb.OCEANIA,xb.OVERSEA,xb.SOUTH_AMERICA];let Fb=function(e){return e.CHINA=\"CN\",e.ASIA=\"AS\",e.NORTH_AMERICA=\"NA\",e.EUROPE=\"EU\",e.JAPAN=\"JP\",e.INDIA=\"IN\",e.KOREA=\"KR\",e.HKMC=\"HK\",e.US=\"US\",e.OCEANIA=\"OC\",e.SOUTH_AMERICA=\"SA\",e.AFRICA=\"AF\",e.OVERSEA=\"OVERSEA\",e.GLOBAL=\"GLOBAL\",e.EXTENSIONS=\"GLOBAL\",e}({});const Bb={CHINA:{},ASIA:{CODE:Fb.ASIA,WEBCS_DOMAIN:[\"ap-web-1-asia.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-asia.agora.io\"],PROXY_CS:[\"proxy-ap-web-asia.agora.io\"],CDS_AP:[\"cds-ap-web-asia.agora.io\",\"cds-ap-web-asia2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-asia.agora.io\",\"sua-ap-web-asia2.agora.io\"],UAP_AP:[\"uap-ap-web-asia.agora.io\",\"uap-ap-web-asia2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-asia.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-asia.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-asia.agora.io\"],PROXY_SERVER_TYPE3:[\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]},NORTH_AMERICA:{CODE:Fb.NORTH_AMERICA,WEBCS_DOMAIN:[\"ap-web-1-north-america.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-north-america.agora.io\"],PROXY_CS:[\"proxy-ap-web-america.agora.io\"],CDS_AP:[\"cds-ap-web-america.agora.io\",\"cds-ap-web-america2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-america.agora.io\",\"sua-ap-web-america2.agora.io\"],UAP_AP:[\"uap-ap-web-america.agora.io\",\"uap-ap-web-america2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-north-america.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-north-america.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-north-america.agora.io\"],PROXY_SERVER_TYPE3:[\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]},EUROPE:{CODE:Fb.EUROPE,WEBCS_DOMAIN:[\"ap-web-1-europe.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-europe.agora.io\"],PROXY_CS:[\"proxy-ap-web-europe.agora.io\"],CDS_AP:[\"cds-ap-web-europe.agora.io\",\"cds-ap-web-europe2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-europe.agora.io\",\"sua-ap-web-europe.agora.io\"],UAP_AP:[\"uap-ap-web-europe.agora.io\",\"uap-ap-web-europe2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-europe.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-europe.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-europe.agora.io\"],PROXY_SERVER_TYPE3:[\"europe.webrtc-cloud-proxy.sd-rtn.com\"]},JAPAN:{CODE:Fb.JAPAN,WEBCS_DOMAIN:[\"ap-web-1-japan.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-japan.agora.io\"],PROXY_CS:[\"proxy-ap-web-japan.agora.io\"],CDS_AP:[\"cds-ap-web-japan.agora.io\",\"cds-ap-web-japan2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-japan.agora.io\",\"sua-ap-web-japan2.agora.io\"],UAP_AP:[\"uap-ap-web-japan.agora.io\",\"uap-ap-web-japan2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-japan.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-japan.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-japan.agora.io\"],PROXY_SERVER_TYPE3:[\"japan.webrtc-cloud-proxy.sd-rtn.com\"]},INDIA:{CODE:Fb.INDIA,WEBCS_DOMAIN:[\"ap-web-1-india.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-india.agora.io\"],PROXY_CS:[\"proxy-ap-web-india.agora.io\"],CDS_AP:[\"cds-ap-web-india.agora.io\",\"cds-ap-web-india2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-india.agora.io\",\"sua-ap-web-india2.agora.io\"],UAP_AP:[\"uap-ap-web-india.agora.io\",\"uap-ap-web-india2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-india.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-india.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-india.agora.io\"],PROXY_SERVER_TYPE3:[\"india.webrtc-cloud-proxy.sd-rtn.com\"]},KOREA:{CODE:Fb.KOREA,WEBCS_DOMAIN:[\"ap-web-1-korea.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-korea.agora.io\"],PROXY_CS:[\"proxy-ap-web-korea.agora.io\"],CDS_AP:[\"cds-ap-web-korea.agora.io\",\"cds-ap-web-korea2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-korea.agora.io\",\"sua-ap-web-korea2.agora.io\"],UAP_AP:[\"uap-ap-web-korea.agora.io\",\"uap-ap-web-korea2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-korea.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-korea.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-korea.agora.io\"],PROXY_SERVER_TYPE3:[\"korea.webrtc-cloud-proxy.sd-rtn.com\"]},HKMC:{CODE:Fb.HKMC,WEBCS_DOMAIN:[\"ap-web-1-hkmc.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-hkmc.agora.io\"],PROXY_CS:[\"proxy-ap-web-hkmc.agora.io\"],CDS_AP:[\"cds-ap-web-hkmc.agora.io\",\"cds-ap-web-hkmc2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-hkmc.agora.io\",\"sua-ap-web-hkmc2.agora.io\"],UAP_AP:[\"uap-ap-web-hkmc.agora.io\",\"uap-ap-web-hkmc2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-hkmc.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-hkmc.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-hkmc.agora.io\"],PROXY_SERVER_TYPE3:[\"hkmc.webrtc-cloud-proxy.sd-rtn.com\"]},US:{CODE:Fb.US,WEBCS_DOMAIN:[\"ap-web-1-us.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-us.agora.io\"],PROXY_CS:[\"proxy-ap-web-us.agora.io\"],CDS_AP:[\"cds-ap-web-us.agora.io\",\"cds-ap-web-us2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-us.agora.io\",\"sua-ap-web-us2.agora.io\"],UAP_AP:[\"uap-ap-web-us.agora.io\",\"uap-ap-web-us2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-us.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-us.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-us.agora.io\"],PROXY_SERVER_TYPE3:[\"us.webrtc-cloud-proxy.sd-rtn.com\"]},OVERSEA:{CODE:Fb.OVERSEA,WEBCS_DOMAIN:[\"ap-web-1-oversea.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-oversea.agora.io\"],PROXY_CS:[\"proxy-ap-web-oversea.agora.io\"],CDS_AP:[\"cds-ap-web-oversea.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-oversea.agora.io\"],UAP_AP:[\"uap-ap-web-oversea.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-oversea.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-oversea.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-oversea.agora.io\"],PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy.agora.io\"]},GLOBAL:{CODE:Fb.GLOBAL,WEBCS_DOMAIN:[\"webrtc2-ap-web-1.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"webrtc2-ap-web-3.agora.io\"],PROXY_CS:[\"ap-proxy-1.agora.io\",\"ap-proxy-2.agora.io\"],CDS_AP:[\"cds-ap-web-1.agora.io\",\"cds-ap-web-3.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-1.agora.io\",\"sua-ap-web-3.agora.io\"],UAP_AP:[\"uap-ap-web-1.agora.io\",\"uap-ap-web-3.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice.agora.io\"],PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy.sd-rtn.com\"]},OCEANIA:{CODE:Fb.OCEANIA,WEBCS_DOMAIN:[\"ap-web-1-oceania.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-oceania.agora.io\"],PROXY_CS:[\"proxy-ap-web-oceania.agora.io\"],CDS_AP:[\"cds-ap-web-oceania.agora.io\",\"cds-ap-web-oceania2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-oceania.agora.io\",\"sua-ap-web-oceania2.agora.io\"],UAP_AP:[\"uap-ap-web-oceania.agora.io\",\"uap-ap-web-oceania2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-oceania.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-oceania.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-oceania.agora.io\"],PROXY_SERVER_TYPE3:[\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]},SOUTH_AMERICA:{CODE:Fb.SOUTH_AMERICA,WEBCS_DOMAIN:[\"ap-web-1-south-america.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-south-america.agora.io\"],PROXY_CS:[\"proxy-ap-web-south-america.agora.io\"],CDS_AP:[\"cds-ap-web-south-america.agora.io\",\"cds-ap-web-south-america2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-south-america.agora.io\",\"sua-ap-web-south-america2.agora.io\"],UAP_AP:[\"uap-ap-web-south-america.agora.io\",\"uap-ap-web-south-america2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-south-america.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-south-america.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-south-america.agora.io\"],PROXY_SERVER_TYPE3:[\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]},AFRICA:{CODE:Fb.AFRICA,WEBCS_DOMAIN:[\"ap-web-1-africa.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-africa.agora.io\"],PROXY_CS:[\"proxy-ap-web-africa.agora.io\"],CDS_AP:[\"cds-ap-web-africa.agora.io\",\"cds-ap-web-africa2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-africa.agora.io\",\"sua-ap-web-africa2.agora.io\"],UAP_AP:[\"uap-ap-web-africa.agora.io\",\"uap-ap-web-africa2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-africa.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-africa.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-south-africa.agora.io\"],PROXY_SERVER_TYPE3:[\"africa.webrtc-cloud-proxy.sd-rtn.com\"]},EXTENSIONS:{}};Iy&&(Bb.CHINA={CODE:Fb.CHINA,WEBCS_DOMAIN:[\"webrtc2-2.ap.sd-rtn.com\"],WEBCS_DOMAIN_BACKUP_LIST:[\"webrtc2-4.ap.sd-rtn.com\"],PROXY_CS:[\"proxy-web.ap.sd-rtn.com\"],CDS_AP:[\"cds-web-2.ap.sd-rtn.com\",\"cds-web-4.ap.sd-rtn.com\"],ACCOUNT_REGISTER:[\"sua-web-2.ap.sd-rtn.com\",\"sua-web-4.ap.sd-rtn.com\"],UAP_AP:[\"uap-web-2.ap.sd-rtn.com\",\"uap-web-4.ap.sd-rtn.com\"],EVENT_REPORT_DOMAIN:[\"web-3.statscollector.sd-rtn.com\"],EVENT_REPORT_BACKUP_DOMAIN:[\"web-4.statscollector.sd-rtn.com\"],LOG_UPLOAD_SERVER:[\"logservice-china.agora.io\"],PROXY_SERVER_TYPE3:[\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]});let jb=function(e){return e.UPDATE_BITRATE_LIMIT=\"update_bitrate_limit\",e}({});class Gb extends mv{constructor(e,t){super(),ng(this,\"onICEConnectionStateChange\",void 0),ng(this,\"onConnectionStateChange\",void 0),ng(this,\"onDTLSTransportStateChange\",void 0),ng(this,\"onDTLSTransportError\",void 0),ng(this,\"onICETransportStateChange\",void 0),ng(this,\"onFirstAudioReceived\",void 0),ng(this,\"onFirstVideoReceived\",void 0),ng(this,\"onFirstAudioDecoded\",void 0),ng(this,\"onFirstVideoDecoded\",void 0),ng(this,\"onFirstVideoDecodedTimeout\",void 0),ng(this,\"onSelectedLocalCandidateChanged\",void 0),ng(this,\"onSelectedRemoteCandidateChanged\",void 0),ng(this,\"getLocalVideoStats\",void 0)}}class Wb extends Gb{constructor(e,t){super(e,t),ng(this,\"establishPromise\",void 0)}}let Hb=function(e){return e.VIDEO=\"video\",e.AUDIO=\"audio\",e}({}),Kb=function(e){return e[e.UDP=0]=\"UDP\",e[e.TCP=1]=\"TCP\",e[e.RELAY=2]=\"RELAY\",e}({}),Yb=function(e){return e[e.FIRST_CONNECTION=0]=\"FIRST_CONNECTION\",e[e.TCP_RESTART=1]=\"TCP_RESTART\",e[e.RELAY_RESTART=2]=\"RELAY_RESTART\",e[e.OLD_FIRST_CONNECTION=10]=\"OLD_FIRST_CONNECTION\",e[e.OLD_RESTART=11]=\"OLD_RESTART\",e[e.DISCONNECTED_OR_FAILED=20]=\"DISCONNECTED_OR_FAILED\",e}({}),qb=function(e){return e.LocalVideoTrack=\"videoTrack\",e.LocalAudioTrack=\"audioTrack\",e.LocalVideoLowTrack=\"videoLowTrack\",e}({}),zb=function(e){return e.New=\"new\",e.Connected=\"connected\",e.Reconnecting=\"reconnecting\",e.Disconnected=\"disconnected\",e}({}),Jb=function(e){return e.StateChange=\"stateChange\",e.IceConnectionStateChange=\"iceConnectionStateChange\",e.RequestMuteLocal=\"requestMuteLocal\",e.RequestUnmuteLocal=\"requestUnmuteLocal\",e.RequestRePublish=\"requestRePublish\",e.RequestRePublishDataChannel=\"requestRePublishDataChannel\",e.RequestReSubscribe=\"requestReSubscribe\",e.RequestUploadStats=\"requestUploadStats\",e.RequestUpload=\"requestUpload\",e.MediaReconnectStart=\"MediaReconnectStart\",e.MediaReconnectEnd=\"MediaReconnectEnd\",e.NeedSignalRTT=\"NeedSignalRTT\",e.RequestRestartICE=\"RequestRestartIce\",e.PeerConnectionStateChange=\"PeerConnectionStateChange\",e.RequestReconnect=\"RequestReconnect\",e.RequestReconnectPC=\"RequestReconnectPC\",e.RequestUnpublishForReconnectPC=\"RequestUnpublishForReconnectPC\",e.P2PLost=\"P2PLost\",e.UpdateVideoEncoder=\"UpdateVideoEncoder\",e.ConnectionTypeChange=\"ConnectionTypeChange\",e.RequestLowStreamParameter=\"RequestLowStreamParameter\",e.QueryClientConnectionState=\"QueryClientConnectionState\",e.LocalCandidate=\"LocalCandidate\",e.RequestP2PMuteLocal=\"requestP2PMuteLocal\",e.RequestP2PUnPublish=\"RequestP2PUnPublish\",e.RequestP2PUnmuteRemote=\"RequestP2PUnmuteRemote\",e.RequestP2PMuteRemote=\"RequestP2PMuteRemote\",e.RequestP2PRestartICE=\"RequestP2PRestartICE\",e}({}),Xb=function(e){return e.CONNECTING=\"CONNECTING\",e.RECONNECTING=\"RECONNECTING\",e.CONNECTED=\"CONNECTED\",e.CLOSED=\"CLOSED\",e}({}),Qb=function(e){return e[e.CONNECT_AP=0]=\"CONNECT_AP\",e[e.AP_CONNECTED=1]=\"AP_CONNECTED\",e[e.CONNECT_WORKER_MANAGER=2]=\"CONNECT_WORKER_MANAGER\",e[e.WORKER_MANAGER_CONNECTED=3]=\"WORKER_MANAGER_CONNECTED\",e[e.GET_WORKER_MANAGER_RESPONSE=4]=\"GET_WORKER_MANAGER_RESPONSE\",e[e.CONNECT_WORKER=5]=\"CONNECT_WORKER\",e[e.WORKER_CONNECTED=6]=\"WORKER_CONNECTED\",e[e.CLOSED=7]=\"CLOSED\",e}({}),Zb=function(e){return e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.STATE_CHANGE=\"state-change\",e.INSPECT_RESULT=\"inspect-result\",e.CLIENT_LOCAL_VIDEO_TRACK=\"client-local-video-track\",e.REQUEST_NEW_WORKER_URL=\"request-new-worker-url\",e}({}),$b=function(e){return e.CONNECTED=\"transmitter:connected\",e.RECONNECTING=\"transmitter:reconnecting\",e.WILL_RECONNECT=\"transmitter:will_reconnect\",e.CLOSED=\"transmitter:closed\",e.FAILED=\"transmitter:failed\",e.ON_MESSAGE=\"transmitter:on_message\",e.REQUEST_NEW_URLS=\"transmitter:request_new_urls\",e.RECONNECT_WAITTING_FINISH=\"transmitter:reconnect_waitting_finish\",e.RECONNECT_CREATE_CONNECTION=\"transmitter:reconnect_create_connection\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"transmitter:on_token_privilege_did_expire\",e.TO_CONNECT_DATACHANNEL=\"transmitter:to_connect_datachannel\",e.FAILBACK=\"transmitter:failback\",e.PRE_CONNECT_PC=\"transmitter:pre_connect_pc\",e}({}),ew=function(e){return e.CAMERA_CHANGED=\"camera-changed\",e.MICROPHONE_CHANGED=\"microphone-changed\",e.PLAYBACK_DEVICE_CHANGED=\"playback-device-changed\",e.AUDIO_AUTOPLAY_FAILED=\"audio-autoplay-failed\",e.AUTOPLAY_FAILED=\"autoplay-failed\",e.AUDIO_CONTEXT_STATE_CHANGED=\"audio-context-state-changed\",e.SECURITY_POLICY_VIOLATION=\"security-policy-violation\",e}({}),tw=function(e){return e.CONNECTING=\"CONNECTING\",e.RECONNECTING=\"RECONNECTING\",e.CONNECTED=\"CONNECTED\",e.CLOSED=\"CLOSED\",e}({}),iw=function(e){return e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.STATE_CHANGE=\"state-change\",e.INSPECT_RESULT=\"inspect-result\",e.CLIENT_LOCAL_VIDEO_TRACK=\"client-local-video-track\",e.REQUEST_NEW_WORKER_URL=\"request-new-worker-url\",e}({}),nw=function(e){return e[e.CONNECT_AP=0]=\"CONNECT_AP\",e[e.AP_CONNECTED=1]=\"AP_CONNECTED\",e[e.CONNECT_WORKER_MANAGER=2]=\"CONNECT_WORKER_MANAGER\",e[e.WORKER_MANAGER_CONNECTED=3]=\"WORKER_MANAGER_CONNECTED\",e[e.GET_WORKER_MANAGER_RESPONSE=4]=\"GET_WORKER_MANAGER_RESPONSE\",e[e.CONNECT_WORKER=5]=\"CONNECT_WORKER\",e[e.WORKER_CONNECTED=6]=\"WORKER_CONNECTED\",e[e.CLOSED=7]=\"CLOSED\",e}({}),rw=function(e){return e.CALL=\"call\",e.CANDIDATE=\"candidate\",e.PUBLISH=\"publish\",e.UNPUBLISH=\"unpublish\",e.CONTROL=\"control\",e.RESTART_ICE=\"restart_ice\",e.ACK=\"ack\",e.RESPONSE=\"response\",e.JOIN=\"join\",e.CHECK=\"check\",e}({}),ow=function(e){return e.ABORT=\"abort\",e}({}),sw=function(e){return e.MUTE_LOCAL_AUDIO=\"mute_local_audio\",e.MUTE_LOCAL_VIDEO=\"mute_local_video\",e.UNMUTE_LOCAL_AUDIO=\"unmute_local_audio\",e.UNMUTE_LOCAL_VIDEO=\"unmute_local_video\",e}({}),aw=function(e){return e.P2P_TOKEN_TIMEOUT=\"p2p_token_timeout\",e.P2P_TOKEN_CHANGED=\"p2p_token_changed\",e}({});const cw={[ob.ACCESS_POINT]:{[cb.NO_FLAG_SET]:{desc:\"flag is zero\",retry:!1},[cb.FLAG_SET_BUT_EMPTY]:{desc:\"flag is empty\",retry:!1},[cb.INVALID_FALG_SET]:{desc:\"invalid flag\",retry:!1},[cb.FLAG_SET_BUT_NO_RE]:{desc:\"flag set unilbs but no request\",retry:!1},[cb.INVALID_SERVICE_ID]:{desc:\"invalid service id\",retry:!1},[cb.NO_SERVICE_AVAILABLE]:{desc:\"no service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_P2P]:{desc:\"no unilbs p2p service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_VOICE]:{desc:\"no unilbs voice service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:\"no unilbs webrtc service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_CDS]:{desc:\"no cds service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_CDN]:{desc:\"no cdn dispatcher service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_TDS]:{desc:\"no tds service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_REPORT]:{desc:\"no unilbs report service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:\"no app center service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_ENV0]:{desc:\"no unilbs sig env0 service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_VOET]:{desc:\"no unilbs voet service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:\"no string uid service available\",retry:!0},[cb.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:\"no webrtc unilbs service available\",retry:!0}},[ob.UNILBS]:{[ab.INVALID_VENDOR_KEY]:{desc:\"invalid vendor key, can not find appid\",retry:!1},[ab.INVALID_CHANNEL_NAME]:{desc:\"invalid channel name\",retry:!1},[ab.INTERNAL_ERROR]:{desc:\"unilbs internal error\",retry:!1},[ab.NO_AUTHORIZED]:{desc:\"invalid token, authorized failed\",retry:!1},[ab.DYNAMIC_KEY_TIMEOUT]:{desc:\"dynamic key or token timeout\",retry:!1},[ab.NO_ACTIVE_STATUS]:{desc:\"no active status\",retry:!1},[ab.DYNAMIC_KEY_EXPIRED]:{desc:\"dynamic key expired\",retry:!1},[ab.STATIC_USE_DYNAMIC_KEY]:{desc:\"static use dynamic key\",retry:!1},[ab.DYNAMIC_USE_STATIC_KEY]:{desc:\"dynamic use static key\",retry:!1},[ab.USER_OVERLOAD]:{desc:\"amount of users over load\",retry:!1},[ab.FORBIDDEN_REGION]:{desc:\"the request is forbidden in this area\",retry:!1},[ab.CANNOT_MEET_AREA_DEMAND]:{desc:\"unable to allocate services in this area\",retry:!1}},[ob.STRING_UID_ALLOCATOR]:{[sb.IIIEGAL_APPID]:{desc:\"invalid appid\",retry:!1},[sb.IIIEGAL_UID]:{desc:\"invalid string uid\",retry:!1},[sb.INTERNAL_ERROR]:{desc:\"string uid allocator internal error\",retry:!0}}};function dw(e){const t=cw[Math.floor(e/1e4)];if(!t)return{desc:\"unknown error\",retry:!1};const i=t[e%1e4];if(!i){if(Math.floor(e/1e4)===ob.ACCESS_POINT){const t=e%1e4;if(\"1\"===t.toString()[0])return{desc:e.toString(),retry:!1};if(\"2\"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:\"unknown error\",retry:!1}}return i}const lw={[db.K_TIMESTAMP_EXPIRED]:{desc:\"K_TIMESTAMP_EXPIRED\",action:\"failed\"},[db.K_CHANNEL_PERMISSION_INVALID]:{desc:\"K_CHANNEL_PERMISSION_INVALID\",action:\"failed\"},[db.K_CERTIFICATE_INVALID]:{desc:\"K_CERTIFICATE_INVALID\",action:\"failed\"},[db.K_CHANNEL_NAME_EMPTY]:{desc:\"K_CHANNEL_NAME_EMPTY\",action:\"failed\"},[db.K_CHANNEL_NOT_FOUND]:{desc:\"K_CHANNEL_NOT_FOUND\",action:\"failed\"},[db.K_TICKET_INVALID]:{desc:\"K_TICKET_INVALID\",action:\"failed\"},[db.K_CHANNEL_CONFLICTED]:{desc:\"K_CHANNEL_CONFLICTED\",action:\"failed\"},[db.K_SERVICE_NOT_READY]:{desc:\"K_SERVICE_NOT_READY\",action:\"tryNext\"},[db.K_SERVICE_TOO_HEAVY]:{desc:\"K_SERVICE_TOO_HEAVY\",action:\"tryNext\"},[db.K_UID_BANNED]:{desc:\"K_UID_BANNED\",action:\"failed\"},[db.K_IP_BANNED]:{desc:\"K_IP_BANNED\",action:\"failed\"},[db.K_AUTO_REBALANCE]:{desc:\"k_AUTO_REBALANCE\",action:\"recover\"},[db.ERR_INVALID_VENDOR_KEY]:{desc:\"ERR_INVALID_VENDOR_KEY\",action:\"failed\"},[db.ERR_INVALID_CHANNEL_NAME]:{desc:\"ERR_INVALID_CHANNEL_NAME\",action:\"failed\"},[db.WARN_NO_AVAILABLE_CHANNEL]:{desc:\"WARN_NO_AVAILABLE_CHANNEL\",action:\"failed\"},[db.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:\"WARN_LOOKUP_CHANNEL_TIMEOUT\",action:\"tryNext\"},[db.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:\"WARN_LOOKUP_CHANNEL_REJECTED\",action:\"failed\"},[db.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:\"WARN_OPEN_CHANNEL_TIMEOUT\",action:\"tryNext\"},[db.WARN_OPEN_CHANNEL_REJECTED]:{desc:\"WARN_OPEN_CHANNEL_REJECTED\",action:\"failed\"},[db.WARN_REQUEST_DEFERRED]:{desc:\"WARN_REQUEST_DEFERRED\",action:\"failed\"},[db.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:\"ERR_DYNAMIC_KEY_TIMEOUT\",action:\"failed\"},[db.ERR_NO_AUTHORIZED]:{desc:\"ERR_NO_AUTHORIZED\",action:\"failed\"},[db.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:\"ERR_VOM_SERVICE_UNAVAILABLE\",action:\"tryNext\"},[db.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:\"ERR_NO_CHANNEL_AVAILABLE_CODE\",action:\"failed\"},[db.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:\"ERR_MASTER_VOCS_UNAVAILABLE\",action:\"tryNext\"},[db.ERR_INTERNAL_ERROR]:{desc:\"ERR_INTERNAL_ERROR\",action:\"tryNext\"},[db.ERR_NO_ACTIVE_STATUS]:{desc:\"ERR_NO_ACTIVE_STATUS\",action:\"failed\"},[db.ERR_INVALID_UID]:{desc:\"ERR_INVALID_UID\",action:\"failed\"},[db.ERR_DYNAMIC_KEY_EXPIRED]:{desc:\"ERR_DYNAMIC_KEY_EXPIRED\",action:\"failed\"},[db.ERR_STATIC_USE_DYANMIC_KE]:{desc:\"ERR_STATIC_USE_DYANMIC_KE\",action:\"failed\"},[db.ERR_DYNAMIC_USE_STATIC_KE]:{desc:\"ERR_DYNAMIC_USE_STATIC_KE\",action:\"failed\"},[db.ERR_NO_VOCS_AVAILABLE]:{desc:\"ERR_NO_VOCS_AVAILABLE\",action:\"tryNext\"},[db.ERR_NO_VOS_AVAILABLE]:{desc:\"ERR_NO_VOS_AVAILABLE\",action:\"tryNext\"},[db.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:\"ERR_JOIN_CHANNEL_TIMEOUT\",action:\"tryNext\"},[db.ERR_JOIN_BY_MULTI_IP]:{desc:\"ERR_JOIN_BY_MULTI_IP\",action:\"recover\"},[db.ERR_NOT_JOINED]:{desc:\"ERR_NOT_JOINED\",action:\"failed\"},[db.ERR_REPEAT_JOIN_REQUEST]:{desc:\"ERR_REPEAT_JOIN_REQUEST\",action:\"quit\"},[db.ERR_REPEAT_JOIN_CHANNEL]:{desc:\"ERR_REPEAT_JOIN_CHANNEL\",action:\"quit\"},[db.ERR_INVALID_STRINGUID]:{desc:\"ERR_INVALID_STRINGUID\",action:\"failed\"},[db.ERR_TOO_MANY_USERS]:{desc:\"ERR_TOO_MANY_USERS\",action:\"tryNext\"},[db.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:\"ERR_SET_CLIENT_ROLE_TIMEOUT\",action:\"failed\"},[db.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:\"ERR_SET_CLIENT_ROLE_TIMEOUT\",action:\"failed\"},[db.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:\"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",action:\"success\"},[db.ERR_PUBLISH_REQUEST_INVALID]:{desc:\"ERR_PUBLISH_REQUEST_INVALID\",action:\"failed\"},[db.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:\"ERR_SUBSCRIBE_REQUEST_INVALID\",action:\"failed\"},[db.ERR_NOT_SUPPORTED_MESSAGE]:{desc:\"ERR_NOT_SUPPORTED_MESSAGE\",action:\"failed\"},[db.ERR_ILLEAGAL_PLUGIN]:{desc:\"ERR_ILLEAGAL_PLUGIN\",action:\"failed\"},[db.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:\"ILLEGAL_CLIENT_ROLE_LEVEL\",action:\"failed\"},[db.ERR_REJOIN_TOKEN_INVALID]:{desc:\"ERR_REJOIN_TOKEN_INVALID\",action:\"failed\"},[db.ERR_REJOIN_USER_NOT_JOINED]:{desc:\"ERR_REJOIN_NOT_JOINED\",action:\"failed\"},[db.ERR_INVALID_OPTIONAL_INFO]:{desc:\"ERR_INVALID_OPTIONAL_INFO\",action:\"quit\"},[db.ERR_TEST_RECOVER]:{desc:\"ERR_TEST_RECOVER\",action:\"recover\"},[db.ERR_TEST_TRYNEXT]:{desc:\"ERR_TEST_TRYNEXT\",action:\"recover\"},[db.ERR_TEST_RETRY]:{desc:\"ERR_TEST_RETRY\",action:\"recover\"},[db.ILLEGAL_AES_PASSWORD]:{desc:\"ERR_TEST_RETRY\",action:\"failed\"},[db.ERR_TOO_MANY_BROADCASTERS]:{desc:\"ERR_TOO_MANY_BROADCASTERS\",action:\"failed\"},[db.ERR_TOO_MANY_SUBSCRIBERS]:{desc:\"ERR_TOO_MANY_SUBSCRIBERS\",action:\"failed\"},[db.ERR_LICENSE_ILLEGAL]:{desc:\"ERR_LICENSE_ILLEGAL\",action:\"quit\"},[db.ERR_LICENSE_MISSING]:{desc:\"ERR_LICENSE_MISSING\",action:\"quit\"},[db.ERR_LICENSE_EXPIRED]:{desc:\"ERR_LICENSE_EXPIRED\",action:\"quit\"},[db.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:\"ERR_LICENSE_MINUTES_EXCEEDED\",action:\"quit\"},[db.ERR_LICENSE_PERIOD_INVALID]:{desc:\"ERR_LICENSE_PERIOD_INVALID\",action:\"quit\"},[db.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:\"ERR_LICENSE_MULTIPLE_SDK_SERVICE\",action:\"quit\"}};function uw(e){const t=lw[e];return t||{desc:\"UNKNOWN_ERROR_\".concat(e),action:\"failed\"}}function hw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function pw(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?hw(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _w(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function Ew(e,t){if(\"string\"==typeof e)return e;const{proxy:i,host:n,port:r}=e;if(t){const e=Oy(\"JOIN_GATEWAY_FALLBACK_PORT\")||443;return 443===e?\"wss://\".concat(n,\"/ws/?p=\").concat(Number(r)+150):\"wss://\".concat(n,\":\").concat(e,\"/ws/?p=\").concat(Number(r)+150)}return i?\"wss://\".concat(i,\"/ws/?h=\").concat(n,\"&p=\").concat(r):\"wss://\".concat(n,\":\").concat(r)}const fw=/wss:\\/\\/(.+)\\/ws\\/\\?h=(.+)&p=([0-9]+)\\/?/,mw=/wss:\\/\\/(.+)\\/ws\\/\\?p=([0-9]+)\\/?/,Tw=/wss:\\/\\/(.+):([0-9]+)\\/?/,Sw=/wss:\\/\\/(.[^\\/]+)\\/?/;let gw=0;class Rw{constructor(e,t){ng(this,\"id\",0),ng(this,\"store\",void 0),ng(this,\"recordIndex\",void 0),ng(this,\"websockets\",[]),ng(this,\"try443PortDuration\",2e3),ng(this,\"forceCloseWSDuration\",5e3),ng(this,\"try443PortTimeout\",null),ng(this,\"forceCloseTimeout\",null),ng(this,\"isTry443PortFailed\",!1),ng(this,\"isNormalPortFailed\",!1),ng(this,\"useDoubleDomain\",!1),ng(this,\"useProxy\",!1),ng(this,\"startTime\",Date.now()),this.id=++gw,this.try443PortDuration=Oy(\"JOIN_GATEWAY_TRY_443PORT_DURATION\")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];Jy.debug(\"[choose-best-ws \".concat(null===(e=this.store)||void 0===e?void 0:e.clientId,\" \").concat(this.id,\"] \").concat(t,\"ms:\"),...n)}createWebSocket(e,t,i){this.logger(\"createWebSocket:\",e,{isTry443Port:t,hasTimeoutDetection:i});const n=Oy(\"GATEWAY_DOMAINS\"),r=Date.now(),o=[],s=n.find((t=>{var i;return Dn(i=e.host).call(i,t)}));s||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)n.forEach((i=>{a.push(Ew(pw(pw({},e),{},{host:e.host.replace(s,i)}),t))}));else{const i=pw({},e);if(t&&s){const e=n.find((e=>e!==s));e&&(i.host=i.host.replace(s,e))}a.push(Ew(i,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType=\"arraybuffer\",o.push(t),this.logger(\"ws is connecting:\",t.url)}))}catch(n){if(this.logger(\"ws create failed\"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,i);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,i);throw new mb(tv.WS_ERR,\"init websocket failed! Error: \".concat(n.toString()))}const c=EI();this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:\"gateway\"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger(\"onopen: ws \".concat(e.url,\" open cost \").concat(Date.now()-r,\"ms\")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger(\"close backup websocket: \".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=i=>{this.logger(\"onclose: ws \".concat(e.url,\" closed cost \").concat(Date.now()-r,\"ms state: \").concat(e.readyState)),t?this.isTry443PortFailed=_w(o):this.isNormalPortFailed=_w(o),this.logger(\"443: \".concat(this.useProxy?\"not try\":this.isTry443PortFailed?\"failed\":\"trying\",\" 47xx: \").concat(this.isNormalPortFailed?\"failed\":\"trying\")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger(\"onclose: all websocket is closed, \".concat(i.reason)),c.reject({code:i.code,reason:Mb.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger(\"\".concat(e.url,\" onmessage: \").concat(t.data))})),this.websockets.push(...o);return i||(()=>{const i=()=>{this.logger(\"5s timeout close un-opens, isWebsocket created: \",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger(\"add 5s timeout at \".concat(t?\"try-443\":\"proxy\",\" condition\")),this.forceCloseTimeout=window.setTimeout(i,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger(\"2s timeout, isWebsocket created: \",c.isResolved),c.isResolved)return i();vI().os===SI.MAC_OS&&PI()&&i(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger(\"try 443 port to create ws failed\")})),this.forceCloseTimeout=window.setTimeout(i,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,i,n){return this.useDoubleDomain=!!t,\"string\"==typeof e&&(e=function(e){let t,i,n;return[,t,i,n]=e.match(fw)||[],t||([,i,n]=e.match(mw)||[]),i&&n||([,i,n]=e.match(Tw)||[]),i&&n||([,i]=e.match(Sw)||[]),i||Jy.warning(\"un-destructible url: \",e),{proxy:t,host:i,port:n||\"443\"}}(e)),this.recordIndex=n,this.useProxy=!!e.proxy,i&&this.useProxy&&(Jy.warn(\"cannot use 443 only when use proxy\"),i=!1),this.createWebSocket(e,!!i,!1).finally((()=>this.clearTimeout()))}}function Cw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class Iw extends mv{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Dn(t=[\"tryNext\",\"recover\"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,\"reconnecting\"===this._state?this.emit(fb.RECONNECTING,this.reconnectReason):\"connected\"===this._state?this.emit(fb.CONNECTED):\"closed\"===this._state?this.emit(fb.CLOSED):\"failed\"===this._state&&this.emit(fb.FAILED))}resetReconnectCount(e){Jy.debug(\"websocket reset reconnect count, reason: \"+e),this.reconnectCount=0}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),ng(this,\"connectionID\",0),ng(this,\"currentURLIndex\",0),ng(this,\"urls\",[]),ng(this,\"_reconnectMode\",\"tryNext\"),ng(this,\"reconnectReason\",void 0),ng(this,\"_initMutex\",new ly(\"websocket\")),ng(this,\"name\",void 0),ng(this,\"_state\",\"closed\"),ng(this,\"reconnectInterrupter\",void 0),ng(this,\"websocket\",void 0),ng(this,\"retryConfig\",void 0),ng(this,\"reconnectCount\",0),ng(this,\"forceCloseTimeout\",5e3),ng(this,\"onlineReconnectListener\",void 0),ng(this,\"useCompress\",void 0),ng(this,\"tryDoubleDomain\",!1),ng(this,\"use443PortOnly\",!1),ng(this,\"wsInflateLength\",0),ng(this,\"wsDeflateLength\",0),ng(this,\"closeEstablishingWs\",(()=>{})),ng(this,\"store\",void 0),ng(this,\"joinGatewayRecordIndex\",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Cw(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),this.useCompress=i,this.tryDoubleDomain=n,this.use443PortOnly=r;const{timeout:s,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*s/5)),d=Math.max(1.2,Math.floor(8*a)/10);Nv.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d),Uv.on(Dv.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount(\"network state change: \".concat(t,\" -> \").concat(e)),e===Nv.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state=\"connecting\";try{const e=EI(),t=this.urls[this.currentURLIndex];Oy(\"ENABLE_PREALLOC_PC\")&&this.emit($b.PRE_CONNECT_PC),this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(fb.CLOSED,(()=>{e.reject(new iv(tv.WS_DISCONNECT))})),this.once(fb.CONNECTED,e.resolve),await e.promise}catch(e){}finally{i()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount(\"close\"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?\"failed\":\"closed\",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void Jy.warning(\"[\".concat(this.name,\"] can not reconnect, no websocket\"));void 0!==e&&(this.reconnectMode=e),Jy.debug(\"[\".concat(this.name,\"] reconnect is triggered initiative\")),\"number\"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:\"error\",errors:[new Error(t)]},this.joinGatewayRecordIndex);const i=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),i&&i.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new iv(tv.WS_ABORT,\"websocket is not ready\");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new iv(tv.WS_ERR,\"send websocket message error\"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const i=EI();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const n=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),Jy.debug(\"[\".concat(this.name,\"] websocket opened:\"),e),this.reconnectMode=\"retry\",this.state=\"connected\",this.resetReconnectCount(\"opened\"),i.resolve()},r=async e=>{var t;if(Jy.debug(\"[\".concat(this.name,\"] websocket close \").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,\", code: \").concat(e.code,\", reason: \").concat(e.reason,\", current mode: \").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)i.reject(new iv(tv.WS_DISCONNECT,\"websocket close: \".concat(e.code))),this.close();else{\"connected\"===this.state&&(this.reconnectReason=e.reason,this.state=\"reconnecting\");const t=kv(this,fb.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,n=await this.reconnectWithAction(t);if(\"closed\"===this.state)return void Jy.debug(\"[\".concat(this.connectionID,\"] ws is closed, no need to reconnect\"));if(!n)return i.reject(new iv(tv.WS_DISCONNECT,\"websocket reconnect failed: \".concat(e.code))),this.close(!0);i.resolve()}},o=e=>{this.emit(fb.ON_MESSAGE,e)},s=e=>{Jy.warn(\"[\".concat(this.connectionID,\"] ws open error \").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Oy(\"GATEWAY_WSS_ADDRESS\")&&this.name.startsWith(\"gateway\")&&(e=Oy(\"GATEWAY_WSS_ADDRESS\")),Jy.debug(\"[\".concat(this.name,\"] start connect, url:\"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"gateway\"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,n&&n(this.websocket.url),this.websocket.onclose=r,this.websocket.onmessage=o,this.websocket.onerror=s,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:\"success\"},a),this.joinGatewayRecordIndex=a}catch(e){const t=\"closed\"===this.state,n=e instanceof iv,o=n&&e.code===tv.WS_ABORT,s=n&&e.code===tv.WS_ERR,c=n?e.message:e&&(e.reason||e.toString());Jy.warning(\"[choose-best-ws] chooseBestWebsocket error: \".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?\"aborted\":\"error\",errors:[e]},a),t||s?(i.reject(t?new iv(tv.WS_DISCONNECT,\"websocket is closed: \".concat(c)):new iv(tv.WS_ERR,\"init websocket failed: \".concat(c))),s&&Jy.error(\"[\".concat(this.name,\"] init websocket failed: \").concat(c))):r&&r(e)}return i.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if(\"closed\"===this.state)return!1;Jy.warning(\"[choose-best-ws] action: =>\",e),this.onlineReconnectListener||Uv.isOnline||!Uv.onlineWaiter||(this.onlineReconnectListener=Uv.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let i=!0;if(this.reconnectInterrupter=()=>i=!1,t){const t=py(this.reconnectCount,this.retryConfig);Jy.debug(\"[\".concat(this.name,\"] wait \").concat(t,\"ms to reconnect websocket, mode: \").concat(e)),await Gh.race([Qv(t),this.onlineReconnectListener||new Gh((()=>{}))])}if(\"closed\"===this._state||!i)return!1;this.reconnectCount+=1;const n=async(e,t)=>{this.emit(fb.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if(\"retry\"===e)this.emit(fb.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e);else if(\"tryNext\"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction(\"recover\",!1);Jy.debug(\"[\".concat(this.name,\"] websocket url length: \").concat(this.urls.length,\" current index: \").concat(this.currentURLIndex)),this.emit(fb.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e)}else\"recover\"===e&&(Jy.debug(\"[\".concat(this.name,\"] request new urls\")),this.resetReconnectCount(\"recover mode\"),this.emit(fb.RECONNECT_WAITTING_FINISH,e),this.urls=await Pv(this,fb.REQUEST_NEW_URLS),this.currentURLIndex=0,await n(this.urls[this.currentURLIndex],e))}catch(i){var r;Jy.error(\"[\".concat(this.name,\"] reconnect failed \").concat(i&&i.toString()));const n=null==i||null===(r=i.data)||void 0===r?void 0:r.desc;return Array.isArray(n)&&Dn(n).call(n,\"dynamic key expired\")?(this.emit(fb.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class vw extends Iw{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const i=EI(),n=function(e,t){return new Rw(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{Jy.debug(\"[choose-best-ws] close establishing websockets\"),n.closeAllWebsockets(),i.reject(new iv(tv.WS_ABORT,\"choose best websocket aborted\"))};const r=Oy(\"GATEWAY_DOMAINS\");return Jy.debug(\"[choose-best-ws] currentDomain: \",e,\", domains: \",r,\"total: \".concat(this.urls.length),\"current: \".concat(this.currentURLIndex+1)),n.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(i.resolve).catch(i.reject),i.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class yw extends Iw{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new Gh(((i,n)=>{let r=!1;const o=[];this.closeEstablishingWs=()=>{Jy.debug(\"[choose-best-ws] close establishing websockets\"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),n(new iv(tv.WS_ABORT,\"choose best websocket aborted\"))};const s=Oy(\"GATEWAY_DOMAINS\");let a;const c=e.indexOf(\"?h=\"),d=s.find((t=>-1!==c?Dn(e).call(e,t,c):Dn(e).call(e,t)));Jy.debug(\"[choose-best-ws] currentDomain: \",d,\", domains: \",s);let l=!this.tryDoubleDomain||!d;if(!l&&d){var u;const h=Date.now();try{s.forEach((t=>{const i=-1===c?e.replace(d,t):e.substr(0,c)+e.substr(c).replace(d,t),n=new WebSocket(i);n.binaryType=\"arraybuffer\",o.push(n),Jy.debug(\"[choose-best-ws] ws is connecting:\",n.url)}))}catch(e){for(Jy.debug(\"[choose-best-ws] ws create failed, fallback to single url\"),o.forEach((e=>e.close()));o.length;)o.pop();l=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:o.map((e=>e.url)),service:\"gateway\"},t),o.forEach((e=>{e.onopen=()=>{if(r)return;const t=Date.now()-h;Jy.debug(\"[choose-best-ws] ws open cost \".concat(t,\"ms\")),o.filter((t=>t!==e)).forEach((e=>{Jy.debug(\"[choose-best-ws]close backup websocket: \".concat(e.url)),e.close()})),r=!0,i(e)},e.onclose=e=>{if(a=e,r)return;o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(Jy.debug(\"[choose-best-ws] all websocket is closed\"),r=!0,n(a))},e.onmessage=t=>{Jy.debug(\"[choose-best-ws]\".concat(e.url,\" onmessage: \").concat(t.data))}})),Qv(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(l){var h;let r;Jy.debug(\"[choose-best-ws] use single url: \",e),null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:[e],service:\"gateway\"},t);try{r=new WebSocket(e),o.push(r),r.binaryType=\"arraybuffer\"}catch(e){const t=new iv(tv.WS_ERR,\"init websocket failed! Error: \".concat(e.toString()));return Jy.error(\"[\".concat(this.name,\"]\").concat(t)),void n(t)}r.onopen=()=>{i(r)},r.onclose=e=>{n(e)},r.onmessage=e=>{Jy.debug(\"[choose-best-ws]\".concat(r.url,\" onmessage: \").concat(e.data))},Qv(this.forceCloseTimeout).then((()=>{r&&r.readyState!==WebSocket.OPEN&&r.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class Aw extends mv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===lb.CONNECTED?this.emit(ub.WS_CONNECTED):e===lb.RECONNECTING?this.emit(ub.WS_RECONNECTING,this._websocketReconnectReason):e===lb.CLOSED&&this.emit(ub.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),ng(this,\"_disconnectedReason\",void 0),ng(this,\"_websocketReconnectReason\",void 0),ng(this,\"_connectionState\",lb.CLOSED),ng(this,\"reconnectToken\",void 0),ng(this,\"websocket\",void 0),ng(this,\"openConnectionTime\",void 0),ng(this,\"clientId\",void 0),ng(this,\"lastMsgTime\",Date.now()),ng(this,\"uploadCache\",[]),ng(this,\"uploadCacheInterval\",void 0),ng(this,\"rttRolling\",new Ey(5)),ng(this,\"pingpongTimer\",void 0),ng(this,\"wsInflateDataTimer\",void 0),ng(this,\"pingpongTimeoutCount\",0),ng(this,\"joinResponse\",void 0),ng(this,\"multiIpOption\",void 0),ng(this,\"initError\",void 0),ng(this,\"spec\",void 0),ng(this,\"store\",void 0),ng(this,\"onWebsocketMessage\",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(ub.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,\"_id\")){const e=\"res-@\".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,\"_type\")){if(this.emit(t._type,t._message),t._type===_b.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===_b.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(vv.UID_BANNED);break;case 15:this.close(vv.IP_BANNED);break;case 16:this.close(vv.CHANNEL_BANNED)}if(t._type===_b.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case db.ERR_LICENSE_MISSING:this.close(vv.LICENSE_MISSING);break;case db.ERR_LICENSE_EXPIRED:this.close(vv.LICENSE_EXPIRED);break;case db.ERR_LICENSE_MINUTES_EXCEEDED:this.close(vv.LICENSE_MINUTES_EXCEEDED);break;case db.ERR_LICENSE_PERIOD_INVALID:this.close(vv.LICENSE_PERIOD_INVALID);break;case db.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(vv.LICENSE_MULTIPLE_SDK_SERVICE);break;case db.ERR_LICENSE_ILLEGAL:this.close(vv.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new vw(\"gateway-\".concat(this.clientId),this.spec.retryConfig,!0,Oy(\"JOIN_GATEWAY_USE_DUAL_DOMAIN\"),Oy(\"JOIN_GATEWAY_USE_443PORT_ONLY\"),t),this.handleWebsocketEvents(),window.addEventListener(\"offline\",(()=>{this.connectionState===lb.CONNECTED&&this.reconnect(\"retry\",Ov.OFFLINE)}))}async request(e,t,i,n){const r=Zv(6,\"\"),o={_id:r,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new Gh(((t,i)=>{if(this.connectionState===lb.CONNECTED)return t();const n=()=>{this.off(ub.WS_CLOSED,r),t()},r=()=>{this.off(ub.WS_CONNECTED,n),i(new mb(tv.WS_ABORT))};this.once(ub.WS_CONNECTED,n),this.once(ub.WS_CLOSED,r),e!==hb.PUBLISH&&e!==hb.PUBLISH_DATASTREAM&&e!==hb.SUBSCRIBE&&e!==hb.SUBSCRIBE_DATASTREAM&&e!==hb.UNSUBSCRIBE&&e!==hb.UNSUBSCRIBE_DATASTREAM&&e!==hb.UNPUBLISH&&e!==hb.UNPUBLISH_DATASTREAM&&e!==hb.CONTROL&&e!==hb.RESTART_ICE||this.once(ub.DISCONNECT_P2P,(()=>{i(new mb(tv.DISCONNECT_P2P))})),e!==hb.PUBLISH&&e!==hb.RESTART_ICE||this.once(ub.ABORT_P2P_EXECUTION,(()=>{i(new mb(tv.DISCONNECT_P2P))}))}));if(this.connectionState!==lb.CONNECTING&&this.connectionState!==lb.RECONNECTING||e===hb.JOIN||e===hb.REJOIN||await a(),this.websocket.sendMessage(o,!0),n)return;const c=new Gh(((i,n)=>{let o=!1;const a=(n,r)=>{o=!0,i({isSuccess:\"success\"===n,message:r||{}}),this.off(ub.WS_CLOSED,c),this.off(ub.WS_RECONNECTING,c),this.emit(ub.REQUEST_SUCCESS,e,t)};this.once(\"res-@\".concat(r),a);const c=()=>{n(new mb(tv.WS_ABORT,\"type: \".concat(e))),this.off(ub.WS_CLOSED,c),this.off(ub.WS_RECONNECTING,c),this.off(\"res-@\".concat(r),a)};this.once(ub.WS_CLOSED,c),this.once(ub.WS_RECONNECTING,c),Qv(Oy(\"SIGNAL_REQUEST_TIMEOUT\")).then((()=>{this.websocket.connectionID!==s||o||(Jy.warning(\"[\".concat(this.clientId,\"] ws request timeout, type: \").concat(e)),this.emit(ub.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(n){if(this.connectionState===lb.CLOSED||e===hb.LEAVE)throw new mb(tv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===hb.JOIN||e===hb.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=uw(l),h=new mb(tv.UNEXPECTED_RESPONSE,\"\".concat(u.desc,\": \").concat(d.message.error_str),{code:l,data:d.message,desc:u.desc});return\"success\"===u.action?d.message:(Jy.warning(\"[\".concat(this.clientId,\"] [\").concat(this.websocket.connectionID,\"] unexpected response from type \").concat(e,\", error_code: \").concat(l,\", message: \").concat(u.desc,\", action: \").concat(u.action)),l===db.ERR_TOO_MANY_BROADCASTERS?e===hb.JOIN||e===hb.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():\"failed\"===u.action?h.throw():\"quit\"===u.action?(this.initError=h,this.close(),h.throw()):(l===db.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,Jy.warning(\"[\".concat(this.clientId,\"] detect multi ip, recover\")),this.reconnect(\"recover\",Ov.MULTI_IP)):this.reconnect(u.action,Ov.SERVER_ERROR),e===hb.JOIN||e===hb.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new Gh((i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void Jy.warn(\"[\".concat(this.clientId,\"] no session id when upload wrtc stats\"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(pb.WRTC_STATS,t)}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=Oy(\"MAX_UPLOAD_CACHE\")||50;this.uploadCache.push(i),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==lb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Oy(\"UPLOAD_CACHE_INTERVAL\")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Gh(((t,i)=>{this.once(ub.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(ub.WS_CLOSED,(()=>i(this.initError||new mb(tv.WS_ABORT)))),this.connectionState=lb.CONNECTING,this.websocket.init(e).catch(i),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||vv.LEAVE,this.connectionState=lb.CLOSED,Jy.debug(\"[\".concat(this.clientId,\"] \")+\"will close websocket in signal\"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(ub.ABORT_P2P_EXECUTION);const e=await Pv(this,ub.REQUEST_JOIN_INFO),t=await this.request(hb.JOIN,e);if(!t)return this.emit(ub.REPORT_JOIN_GATEWAY,Mb.TIMEOUT,this.url||\"\"),!1;this.joinResponse=t,this.emit(ub.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=lb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new mb(tv.UNEXPECTED_ERROR,\"can not rejoin, no rejoin token\");const e=Mv(this,ub.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(hb.REJOIN,e);return!!t&&(this.connectionState=lb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(_b.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(_b.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(_b.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(_b.MUTE_AUDIO,{uid:e.uid}):this.emit(_b.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(_b.MUTE_VIDEO,{uid:e.uid}):this.emit(_b.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(_b.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(_b.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(_b.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(_b.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(_b.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){Jy.debug(\"[\".concat(this.clientId,\"] receive notification: \"),e);const t=uw(e.code);if(\"success\"!==t.action){if(\"failed\"!==t.action)return\"quit\"===t.action?(\"ERR_REPEAT_JOIN_CHANNEL\"===t.desc&&this.close(vv.UID_BANNED),void this.close()):void this.reconnect(t.action,Ov.SERVER_ERROR);Jy.error(\"[\".concat(this.clientId,\"] ignore error: \"),t.desc)}}handlePingPong(){if(!this.websocket||\"connected\"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Oy(\"PING_PONG_TIME_OUT\"),t=Date.now();this.pingpongTimeoutCount>=e&&(Jy.warning(\"[\".concat(this.clientId,\"] PING-PONG Timeout. Last Socket Message: \").concat(t-this.lastMsgTime,\"ms\")),t-this.lastMsgTime>Oy(\"WEBSOCKET_TIMEOUT_MIN\"))?this.reconnect(\"retry\",Ov.TIMEOUT):this.request(hb.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Oy(\"REPORT_STATS\")&&this.send(hb.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(pb.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(fb.RECONNECT_WAITTING_FINISH,(e=>{this.emit(ub.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(fb.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(ub.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(fb.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(fb.CLOSED,(()=>{this.connectionState=lb.CLOSED})),this.websocket.on(fb.FAILED,(()=>{this._disconnectedReason=vv.NETWORK_ERROR,this.connectionState=lb.CLOSED})),this.websocket.on(fb.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===lb.CONNECTED?this.connectionState=lb.RECONNECTING:this.connectionState=lb.CONNECTING})),this.websocket.on(fb.WILL_RECONNECT,((e,t,i)=>{const n=Mv(this,ub.IS_P2P_DISCONNECTED),r=n||\"retry\"!==e;n&&\"retry\"===e&&(Jy.debug(\"\".concat(this.clientId,\" reconnect mode is retry, but p2p lost, change to tryNext\")),e=\"tryNext\",t=Mb.P2P_DISCONNECTED),r&&(Jy.debug(\"\".concat(this.clientId,\" will renewSession, reconnect mode: \").concat(e)),this.emit(ub.REPORT_JOIN_GATEWAY,t||Mb.UNKNOWN_REASON,this.url||\"\"),this.reconnectToken=void 0,this.emit(ub.DISCONNECT_P2P)),i(e)})),this.websocket.on(fb.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{Jy.warning(\"[\".concat(this.clientId,\"] rejoin failed \").concat(e)),this.reconnect(\"tryNext\",Ov.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(ub.REPORT_JOIN_GATEWAY,e,this.url||\"\"),e instanceof mb){if(e.code===tv.UNEXPECTED_RESPONSE&&e.data.code===db.ERR_NO_AUTHORIZED)return this.initError=new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,\"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired\"),Jy.warning(\"[\".concat(this.clientId,\"] reconnect no authorized, recover\")),void this.reconnect(\"recover\",Ov.SERVER_ERROR);Jy.error(\"[\".concat(this.clientId,\"] join gateway request failed\"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect(\"tryNext\",Ov.SERVER_ERROR):(this.initError=e,this.close())}}))})),this.websocket.on(fb.REQUEST_NEW_URLS,((e,t)=>{Pv(this,ub.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(fb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(_b.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on($b.PRE_CONNECT_PC,(()=>{this.emit(ub.PRE_CONNECT_PC)}))}}let bw=function(e){return e[e.CHOOSE_SERVER=11]=\"CHOOSE_SERVER\",e[e.CLOUD_PROXY=18]=\"CLOUD_PROXY\",e[e.CLOUD_PROXY_5=20]=\"CLOUD_PROXY_5\",e[e.CLOUD_PROXY_FALLBACK=26]=\"CLOUD_PROXY_FALLBACK\",e}({});function ww(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ow(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ww(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ww(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Nw(e){return e.match(/^[\\.\\:\\d]+$/)?\"\".concat(e.replace(/[^\\d]/g,\"-\"),\".\").concat(Oy(\"TURN_DOMAIN\")):(Jy.info(\"Unidentified as ip: \".concat(e,\", use as host\")),e)}function Dw(e,t){e.addresses||(e.addresses=[]);const i=function(e,t){if(Oy(\"CONNECT_GATEWAY_WITHOUT_DOMAIN\"))return e.map((e=>{let{ip:t,port:i}=e;return{address:\"\".concat(t,\":\").concat(i)}}));const i=Oy(\"GATEWAY_DOMAINS\");let n=i[1]&&Dn(t).call(t,i[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:r,ip:o}=e;if(t)return{address:\"\".concat(t,\".\").concat(i[n++%i.length],\":\").concat(r)};const s=/^[\\.\\:\\d]+$/.test(o),a=s?\"\".concat(o.replace(/[^\\d]/g,\"-\"),\".\").concat(i[n++%i.length],\":\").concat(r):\"\".concat(o,\":\").concat(r);return s||Jy.info(\"Unidentified as ip: \".concat(o,\", use as host\")),{ip:o,port:r,address:a}}))}(e.addresses,t),n=Array.isArray(e.detail)&&e.detail[18];if(n&&\"string\"==typeof n){const e=n.split(\";\");for(let t=0;t<e.length;t++){var r;const n=jp(r=e[t]).call(r);i[t]&&n&&(i[t].ip6=n)}}const o=e.detail&&e.detail.candidate;let s;if(o){const[e,t]=o.split(\":\");e&&t&&(s={port:Number(t),ip:e,address:\"\".concat(e,\":\").concat(t)})}return{gatewayAddrs:i,apGatewayAddress:s,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Pw(e){return\"number\"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Lw(e){const t=e._encoderConfig;if(!t)return{};const i={resolution:t.width&&t.height?\"\".concat(Pw(t.width),\"x\").concat(Pw(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return\"number\"==typeof t.frameRate?(i.maxFrameRate=t.frameRate,i.minFrameRate=t.frameRate):t.frameRate&&(i.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,i.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),i}function kw(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function Mw(e,t){let i,n,r;switch(t){case bw.CHOOSE_SERVER:n=4096,r=\"choose server\";break;case bw.CLOUD_PROXY:n=1048576,r=\"proxy\";break;case bw.CLOUD_PROXY_5:n=4194304,r=\"proxy5\";break;case bw.CLOUD_PROXY_FALLBACK:n=4194310,r=\"proxy fallback\";break;default:throw new mb(tv.UNEXPECTED_ERROR,\"multi unlibs response transformer get unknown service id\",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===n&&(i={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>Ow(Ow({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:Ow(Ow({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!i)throw new mb(tv.MULTI_UNILBS_RESPONSE_ERROR,\"cannot parse response \".concat(r,\" from multi unilbs response\"),{csIp:e.detail&&e.detail[502]});return i}async function Uw(e,t){return await Gh.all(e.addresses.map((async e=>({address:Nw(e.ip),tcpport:e.port,udpport:e.port,username:t&&Oy(\"ENCRYPT_PROXY_USERNAME_AND_PSW\")&&window.isSecureContext?t.toString():sA.username,password:t&&Oy(\"ENCRYPT_PROXY_USERNAME_AND_PSW\")&&window.isSecureContext?await fv(t.toString()):sA.password}))))}function xw(e,t){const i=t.getMediaStreamTrack(!0).getSettings(),n=t.videoHeight||i.height,r=t.videoWidth||i.width;return n&&r?Math.max(Math.min(n,r)/Math.min(Pw(e.height),Pw(e.width)),1):(Jy.warning(\"can't get ori-track's height, default scale down 4 times for low stream\"),4)}function Vw(e){let{candidateType:t,relayProtocol:i,type:n,address:r,port:o,protocol:s}=e;return\"local-candidate\"===n?{candidateType:t,relayProtocol:i,protocol:s}:{candidateType:t,relayProtocol:i,address:r,port:o,protocol:s}}var Fw,Bw=i(kA),jw=Xi(\"Array\").values,Gw=pn,Ww=Ze,Hw=l,Kw=jw,Yw=Array.prototype,qw={DOMTokenList:!0,NodeList:!0},zw=function(e){var t=e.values;return e===Yw||Hw(Yw,e)&&t===Yw.values||Ww(qw,Gw(e))?Kw:t},Jw=i(zw),Xw=N,Qw=d,Zw=L,$w=n,eO=eo,tO=Br,iO=k,nO=Je,rO=K,oO=Object.assign,sO=Object.defineProperty,aO=Qw([].concat),cO=!oO||$w((function(){if(Xw&&1!==oO({b:1},oO(sO({},\"a\",{enumerable:!0,get:function(){sO(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),n=\"abcdefghijklmnopqrst\";return e[i]=7,n.split(\"\").forEach((function(e){t[e]=e})),7!=oO({},e)[i]||eO(oO({},t)).join(\"\")!=n}))?function(e,t){for(var i=nO(e),n=arguments.length,r=1,o=tO.f,s=iO.f;n>r;)for(var a,c=rO(arguments[r++]),d=o?aO(eO(c),o(c)):eO(c),l=d.length,u=0;l>u;)a=d[u++],Xw&&!Zw(s,c,a)||(i[a]=c[a]);return i}:oO,dO=ii,lO=rs,uO=Xt,hO=L,pO=Je,_O=function(e,t,i,n){try{return n?t(dO(i)[0],i[1]):t(i)}catch(t){lO(e,\"throw\",t)}},EO=jo,fO=jc,mO=Gi,TO=E_,SO=es,gO=qo,RO=Array,CO=d,IO=2147483647,vO=/[^\\0-\\u007E]/,yO=/[.\\u3002\\uFF0E\\uFF61]/g,AO=\"Overflow: input needs wider integers to process\",bO=RangeError,wO=CO(yO.exec),OO=Math.floor,NO=String.fromCharCode,DO=CO(\"\".charCodeAt),PO=CO([].join),LO=CO([].push),kO=CO(\"\".replace),MO=CO(\"\".split),UO=CO(\"\".toLowerCase),xO=function(e){return e+22+75*(e<26)},VO=function(e,t,i){var n=0;for(e=i?OO(e/700):e>>1,e+=OO(e/t);e>455;)e=OO(e/35),n+=36;return OO(n+36*e/(e+38))},FO=function(e){var t=[];e=function(e){for(var t=[],i=0,n=e.length;i<n;){var r=DO(e,i++);if(r>=55296&&r<=56319&&i<n){var o=DO(e,i++);56320==(64512&o)?LO(t,((1023&r)<<10)+(1023&o)+65536):(LO(t,r),i--)}else LO(t,r)}return t}(e);var i,n,r=e.length,o=128,s=0,a=72;for(i=0;i<e.length;i++)(n=e[i])<128&&LO(t,NO(n));var c=t.length,d=c;for(c&&LO(t,\"-\");d<r;){var l=IO;for(i=0;i<e.length;i++)(n=e[i])>=o&&n<l&&(l=n);var u=d+1;if(l-o>OO((IO-s)/u))throw bO(AO);for(s+=(l-o)*u,o=l,i=0;i<e.length;i++){if((n=e[i])<o&&++s>IO)throw bO(AO);if(n==o){for(var h=s,p=36;;){var _=p<=a?1:p>=a+26?26:p-a;if(h<_)break;var E=h-_,f=36-_;LO(t,NO(xO(_+E%f))),h=OO(E/f),p+=36}LO(t,NO(xO(h))),a=VO(s,u,d==c),s=0,d++}}s++,o++}return PO(t,\"\")},BO=wi,jO=N,GO=sg,WO=h,HO=Xt,KO=d,YO=ha,qO=hc,zO=Sc,JO=Ze,XO=cO,QO=function(e){var t=pO(e),i=fO(this),n=arguments.length,r=n>1?arguments[1]:void 0,o=void 0!==r;o&&(r=uO(r,n>2?arguments[2]:void 0));var s,a,c,d,l,u,h=gO(t),p=0;if(!h||this===RO&&EO(h))for(s=mO(t),a=i?new this(s):RO(s);s>p;p++)u=o?r(t[p],p):t[p],TO(a,p,u);else for(l=(d=SO(t,h)).next,a=i?new this:[];!(c=hO(l,d)).done;p++)u=o?_O(d,r,[c.value,p],!0):c.value,TO(a,p,u);return a.length=p,a},ZO=R_,$O=Ch.codeAt,eN=function(e){var t,i,n=[],r=MO(kO(UO(e),yO,\".\"),\".\");for(t=0;t<r.length;t++)i=r[t],LO(n,wO(vO,i)?\"xn--\"+FO(i):i);return PO(n,\".\")},tN=fn,iN=Da,nN=Zc,rN=CR,oN=ra,sN=oN.set,aN=oN.getterFor(\"URL\"),cN=rN.URLSearchParams,dN=rN.getState,lN=WO.URL,uN=WO.TypeError,hN=WO.parseInt,pN=Math.floor,_N=Math.pow,EN=KO(\"\".charAt),fN=KO(/./.exec),mN=KO([].join),TN=KO(1..toString),SN=KO([].pop),gN=KO([].push),RN=KO(\"\".replace),CN=KO([].shift),IN=KO(\"\".split),vN=KO(\"\".slice),yN=KO(\"\".toLowerCase),AN=KO([].unshift),bN=\"Invalid scheme\",wN=\"Invalid host\",ON=\"Invalid port\",NN=/[a-z]/i,DN=/[\\d+-.a-z]/i,PN=/\\d/,LN=/^0x/i,kN=/^[0-7]+$/,MN=/^\\d+$/,UN=/^[\\da-f]+$/i,xN=/[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/,VN=/[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/,FN=/^[\\u0000-\\u0020]+/,BN=/(^|[^\\u0000-\\u0020])[\\u0000-\\u0020]+$/,jN=/[\\t\\n\\r]/g,GN=function(e){var t,i,n,r;if(\"number\"==typeof e){for(t=[],i=0;i<4;i++)AN(t,e%256),e=pN(e/256);return mN(t,\".\")}if(\"object\"==typeof e){for(t=\"\",n=function(e){for(var t=null,i=1,n=null,r=0,o=0;o<8;o++)0!==e[o]?(r>i&&(t=n,i=r),n=null,r=0):(null===n&&(n=o),++r);return r>i&&(t=n,i=r),t}(e),i=0;i<8;i++)r&&0===e[i]||(r&&(r=!1),n===i?(t+=i?\":\":\"::\",r=!0):(t+=TN(e[i],16),i<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},WN={},HN=XO({},WN,{\" \":1,'\"':1,\"<\":1,\">\":1,\"`\":1}),KN=XO({},HN,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),YN=XO({},KN,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),qN=function(e,t){var i=$O(e,0);return i>32&&i<127&&!JO(t,e)?e:encodeURIComponent(e)},zN={ftp:21,file:null,http:80,https:443,ws:80,wss:443},JN=function(e,t){var i;return 2==e.length&&fN(NN,EN(e,0))&&(\":\"==(i=EN(e,1))||!t&&\"|\"==i)},XN=function(e){var t;return e.length>1&&JN(vN(e,0,2))&&(2==e.length||\"/\"===(t=EN(e,2))||\"\\\\\"===t||\"?\"===t||\"#\"===t)},QN=function(e){return\".\"===e||\"%2e\"===yN(e)},ZN={},$N={},eD={},tD={},iD={},nD={},rD={},oD={},sD={},aD={},cD={},dD={},lD={},uD={},hD={},pD={},_D={},ED={},fD={},mD={},TD={},SD=function(e,t,i){var n,r,o,s=tN(e);if(t){if(r=this.parse(s))throw uN(r);this.searchParams=null}else{if(void 0!==i&&(n=new SD(i,!0)),r=this.parse(s,null,n))throw uN(r);(o=dN(new cN)).bindURL(this),this.searchParams=o}};SD.prototype={type:\"URL\",parse:function(e,t,i){var n,r,o,s,a,c=this,d=t||ZN,l=0,u=\"\",h=!1,p=!1,_=!1;for(e=tN(e),t||(c.scheme=\"\",c.username=\"\",c.password=\"\",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=RN(e,FN,\"\"),e=RN(e,BN,\"$1\")),e=RN(e,jN,\"\"),n=QO(e);l<=n.length;){switch(r=n[l],d){case ZN:if(!r||!fN(NN,r)){if(t)return bN;d=eD;continue}u+=yN(r),d=$N;break;case $N:if(r&&(fN(DN,r)||\"+\"==r||\"-\"==r||\".\"==r))u+=yN(r);else{if(\":\"!=r){if(t)return bN;u=\"\",d=eD,l=0;continue}if(t&&(c.isSpecial()!=JO(zN,u)||\"file\"==u&&(c.includesCredentials()||null!==c.port)||\"file\"==c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&zN[c.scheme]==c.port&&(c.port=null));u=\"\",\"file\"==c.scheme?d=uD:c.isSpecial()&&i&&i.scheme==c.scheme?d=tD:c.isSpecial()?d=oD:\"/\"==n[l+1]?(d=iD,l++):(c.cannotBeABaseURL=!0,gN(c.path,\"\"),d=fD)}break;case eD:if(!i||i.cannotBeABaseURL&&\"#\"!=r)return bN;if(i.cannotBeABaseURL&&\"#\"==r){c.scheme=i.scheme,c.path=ZO(i.path),c.query=i.query,c.fragment=\"\",c.cannotBeABaseURL=!0,d=TD;break}d=\"file\"==i.scheme?uD:nD;continue;case tD:if(\"/\"!=r||\"/\"!=n[l+1]){d=nD;continue}d=sD,l++;break;case iD:if(\"/\"==r){d=aD;break}d=ED;continue;case nD:if(c.scheme=i.scheme,r==Fw)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=ZO(i.path),c.query=i.query;else if(\"/\"==r||\"\\\\\"==r&&c.isSpecial())d=rD;else if(\"?\"==r)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=ZO(i.path),c.query=\"\",d=mD;else{if(\"#\"!=r){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=ZO(i.path),c.path.length--,d=ED;continue}c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=ZO(i.path),c.query=i.query,c.fragment=\"\",d=TD}break;case rD:if(!c.isSpecial()||\"/\"!=r&&\"\\\\\"!=r){if(\"/\"!=r){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,d=ED;continue}d=aD}else d=sD;break;case oD:if(d=sD,\"/\"!=r||\"/\"!=EN(u,l+1))continue;l++;break;case sD:if(\"/\"!=r&&\"\\\\\"!=r){d=aD;continue}break;case aD:if(\"@\"==r){h&&(u=\"%40\"+u),h=!0,o=QO(u);for(var E=0;E<o.length;E++){var f=o[E];if(\":\"!=f||_){var m=qN(f,YN);_?c.password+=m:c.username+=m}else _=!0}u=\"\"}else if(r==Fw||\"/\"==r||\"?\"==r||\"#\"==r||\"\\\\\"==r&&c.isSpecial()){if(h&&\"\"==u)return\"Invalid authority\";l-=QO(u).length+1,u=\"\",d=cD}else u+=r;break;case cD:case dD:if(t&&\"file\"==c.scheme){d=pD;continue}if(\":\"!=r||p){if(r==Fw||\"/\"==r||\"?\"==r||\"#\"==r||\"\\\\\"==r&&c.isSpecial()){if(c.isSpecial()&&\"\"==u)return wN;if(t&&\"\"==u&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(u))return s;if(u=\"\",d=_D,t)return;continue}\"[\"==r?p=!0:\"]\"==r&&(p=!1),u+=r}else{if(\"\"==u)return wN;if(s=c.parseHost(u))return s;if(u=\"\",d=lD,t==dD)return}break;case lD:if(!fN(PN,r)){if(r==Fw||\"/\"==r||\"?\"==r||\"#\"==r||\"\\\\\"==r&&c.isSpecial()||t){if(\"\"!=u){var T=hN(u,10);if(T>65535)return ON;c.port=c.isSpecial()&&T===zN[c.scheme]?null:T,u=\"\"}if(t)return;d=_D;continue}return ON}u+=r;break;case uD:if(c.scheme=\"file\",\"/\"==r||\"\\\\\"==r)d=hD;else{if(!i||\"file\"!=i.scheme){d=ED;continue}if(r==Fw)c.host=i.host,c.path=ZO(i.path),c.query=i.query;else if(\"?\"==r)c.host=i.host,c.path=ZO(i.path),c.query=\"\",d=mD;else{if(\"#\"!=r){XN(mN(ZO(n,l),\"\"))||(c.host=i.host,c.path=ZO(i.path),c.shortenPath()),d=ED;continue}c.host=i.host,c.path=ZO(i.path),c.query=i.query,c.fragment=\"\",d=TD}}break;case hD:if(\"/\"==r||\"\\\\\"==r){d=pD;break}i&&\"file\"==i.scheme&&!XN(mN(ZO(n,l),\"\"))&&(JN(i.path[0],!0)?gN(c.path,i.path[0]):c.host=i.host),d=ED;continue;case pD:if(r==Fw||\"/\"==r||\"\\\\\"==r||\"?\"==r||\"#\"==r){if(!t&&JN(u))d=ED;else if(\"\"==u){if(c.host=\"\",t)return;d=_D}else{if(s=c.parseHost(u))return s;if(\"localhost\"==c.host&&(c.host=\"\"),t)return;u=\"\",d=_D}continue}u+=r;break;case _D:if(c.isSpecial()){if(d=ED,\"/\"!=r&&\"\\\\\"!=r)continue}else if(t||\"?\"!=r)if(t||\"#\"!=r){if(r!=Fw&&(d=ED,\"/\"!=r))continue}else c.fragment=\"\",d=TD;else c.query=\"\",d=mD;break;case ED:if(r==Fw||\"/\"==r||\"\\\\\"==r&&c.isSpecial()||!t&&(\"?\"==r||\"#\"==r)){if(\"..\"===(a=yN(a=u))||\"%2e.\"===a||\".%2e\"===a||\"%2e%2e\"===a?(c.shortenPath(),\"/\"==r||\"\\\\\"==r&&c.isSpecial()||gN(c.path,\"\")):QN(u)?\"/\"==r||\"\\\\\"==r&&c.isSpecial()||gN(c.path,\"\"):(\"file\"==c.scheme&&!c.path.length&&JN(u)&&(c.host&&(c.host=\"\"),u=EN(u,0)+\":\"),gN(c.path,u)),u=\"\",\"file\"==c.scheme&&(r==Fw||\"?\"==r||\"#\"==r))for(;c.path.length>1&&\"\"===c.path[0];)CN(c.path);\"?\"==r?(c.query=\"\",d=mD):\"#\"==r&&(c.fragment=\"\",d=TD)}else u+=qN(r,KN);break;case fD:\"?\"==r?(c.query=\"\",d=mD):\"#\"==r?(c.fragment=\"\",d=TD):r!=Fw&&(c.path[0]+=qN(r,WN));break;case mD:t||\"#\"!=r?r!=Fw&&(\"'\"==r&&c.isSpecial()?c.query+=\"%27\":c.query+=\"#\"==r?\"%23\":qN(r,WN)):(c.fragment=\"\",d=TD);break;case TD:r!=Fw&&(c.fragment+=qN(r,HN))}l++}},parseHost:function(e){var t,i,n;if(\"[\"==EN(e,0)){if(\"]\"!=EN(e,e.length-1))return wN;if(t=function(e){var t,i,n,r,o,s,a,c=[0,0,0,0,0,0,0,0],d=0,l=null,u=0,h=function(){return EN(e,u)};if(\":\"==h()){if(\":\"!=EN(e,1))return;u+=2,l=++d}for(;h();){if(8==d)return;if(\":\"!=h()){for(t=i=0;i<4&&fN(UN,h());)t=16*t+hN(h(),16),u++,i++;if(\".\"==h()){if(0==i)return;if(u-=i,d>6)return;for(n=0;h();){if(r=null,n>0){if(!(\".\"==h()&&n<4))return;u++}if(!fN(PN,h()))return;for(;fN(PN,h());){if(o=hN(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;u++}c[d]=256*c[d]+r,2!=++n&&4!=n||d++}if(4!=n)return;break}if(\":\"==h()){if(u++,!h())return}else if(h())return;c[d++]=t}else{if(null!==l)return;u++,l=++d}}if(null!==l)for(s=d-l,d=7;0!=d&&s>0;)a=c[d],c[d--]=c[l+s-1],c[l+--s]=a;else if(8!=d)return;return c}(vN(e,1,-1)),!t)return wN;this.host=t}else if(this.isSpecial()){if(e=eN(e),fN(xN,e))return wN;if(t=function(e){var t,i,n,r,o,s,a,c=IN(e,\".\");if(c.length&&\"\"==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(i=[],n=0;n<t;n++){if(\"\"==(r=c[n]))return e;if(o=10,r.length>1&&\"0\"==EN(r,0)&&(o=fN(LN,r)?16:8,r=vN(r,8==o?1:2)),\"\"===r)s=0;else{if(!fN(10==o?MN:8==o?kN:UN,r))return e;s=hN(r,o)}gN(i,s)}for(n=0;n<t;n++)if(s=i[n],n==t-1){if(s>=_N(256,5-t))return null}else if(s>255)return null;for(a=SN(i),n=0;n<i.length;n++)a+=i[n]*_N(256,3-n);return a}(e),null===t)return wN;this.host=t}else{if(fN(VN,e))return wN;for(t=\"\",i=QO(e),n=0;n<i.length;n++)t+=qN(i[n],WN);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||\"file\"==this.scheme},includesCredentials:function(){return\"\"!=this.username||\"\"!=this.password},isSpecial:function(){return JO(zN,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||\"file\"==this.scheme&&1==t&&JN(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,n=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,d=t+\":\";return null!==r?(d+=\"//\",e.includesCredentials()&&(d+=i+(n?\":\"+n:\"\")+\"@\"),d+=GN(r),null!==o&&(d+=\":\"+o)):\"file\"==t&&(d+=\"//\"),d+=e.cannotBeABaseURL?s[0]:s.length?\"/\"+mN(s,\"/\"):\"\",null!==a&&(d+=\"?\"+a),null!==c&&(d+=\"#\"+c),d},setHref:function(e){var t=this.parse(e);if(t)throw uN(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(\"blob\"==e)try{return new gD(e.path[0]).origin}catch(e){return\"null\"}return\"file\"!=e&&this.isSpecial()?e+\"://\"+GN(this.host)+(null!==t?\":\"+t:\"\"):\"null\"},getProtocol:function(){return this.scheme+\":\"},setProtocol:function(e){this.parse(tN(e)+\":\",ZN)},getUsername:function(){return this.username},setUsername:function(e){var t=QO(tN(e));if(!this.cannotHaveUsernamePasswordPort()){this.username=\"\";for(var i=0;i<t.length;i++)this.username+=qN(t[i],YN)}},getPassword:function(){return this.password},setPassword:function(e){var t=QO(tN(e));if(!this.cannotHaveUsernamePasswordPort()){this.password=\"\";for(var i=0;i<t.length;i++)this.password+=qN(t[i],YN)}},getHost:function(){var e=this.host,t=this.port;return null===e?\"\":null===t?GN(e):GN(e)+\":\"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,cD)},getHostname:function(){var e=this.host;return null===e?\"\":GN(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,dD)},getPort:function(){var e=this.port;return null===e?\"\":tN(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(\"\"==(e=tN(e))?this.port=null:this.parse(e,lD))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?\"/\"+mN(e,\"/\"):\"\"},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,_D))},getSearch:function(){var e=this.query;return e?\"?\"+e:\"\"},setSearch:function(e){\"\"==(e=tN(e))?this.query=null:(\"?\"==EN(e,0)&&(e=vN(e,1)),this.query=\"\",this.parse(e,mD)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?\"#\"+e:\"\"},setHash:function(e){\"\"!=(e=tN(e))?(\"#\"==EN(e,0)&&(e=vN(e,1)),this.fragment=\"\",this.parse(e,TD)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var gD=function(e){var t=zO(this,RD),i=nN(arguments.length,1)>1?arguments[1]:void 0,n=sN(t,new SD(e,!1,i));jO||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},RD=gD.prototype,CD=function(e,t){return{get:function(){return aN(this)[e]()},set:t&&function(e){return aN(this)[t](e)},configurable:!0,enumerable:!0}};if(jO&&(qO(RD,\"href\",CD(\"serialize\",\"setHref\")),qO(RD,\"origin\",CD(\"getOrigin\")),qO(RD,\"protocol\",CD(\"getProtocol\",\"setProtocol\")),qO(RD,\"username\",CD(\"getUsername\",\"setUsername\")),qO(RD,\"password\",CD(\"getPassword\",\"setPassword\")),qO(RD,\"host\",CD(\"getHost\",\"setHost\")),qO(RD,\"hostname\",CD(\"getHostname\",\"setHostname\")),qO(RD,\"port\",CD(\"getPort\",\"setPort\")),qO(RD,\"pathname\",CD(\"getPathname\",\"setPathname\")),qO(RD,\"search\",CD(\"getSearch\",\"setSearch\")),qO(RD,\"searchParams\",CD(\"getSearchParams\")),qO(RD,\"hash\",CD(\"getHash\",\"setHash\"))),YO(RD,\"toJSON\",(function(){return aN(this).serialize()}),{enumerable:!0}),YO(RD,\"toString\",(function(){return aN(this).serialize()}),{enumerable:!0}),lN){var ID=lN.createObjectURL,vD=lN.revokeObjectURL;ID&&YO(gD,\"createObjectURL\",HO(ID,lN)),vD&&YO(gD,\"revokeObjectURL\",HO(vD,lN))}iN(gD,\"URL\"),BO({global:!0,constructor:!0,forced:!GO,sham:!jO},{URL:gD});var yD=wi,AD=n,bD=Zc,wD=fn,OD=sg,ND=ae(\"URL\");yD({target:\"URL\",stat:!0,forced:!(OD&&AD((function(){ND.canParse()})))},{canParse:function(e){var t=bD(arguments.length,1),i=wD(e),n=t<2||void 0===arguments[1]?void 0:wD(arguments[1]);try{return!!new ND(i,n)}catch(e){return!1}}});var DD=i(ie.URL);const PD={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function LD(){return PD}function kD(){return\"setSinkId\"in HTMLAudioElement.prototype&&(!Oy(\"RESTRICTION_SET_PLAYBACK_DEVICE\")||(OI()||DI())&&!zI())}function MD(){return!PD.supportUnifiedPlan||Oy(\"CHROME_FORCE_PLAN_B\")&&JI()}let UD=function(e){return e.IOS_15_16_INTERRUPTION_START=\"ios15_16-interruption-start\",e.IOS_15_16_INTERRUPTION_END=\"ios15_16-interruption-end\",e.IOS_INTERRUPTION_START=\"ios-interruption-start\",e.IOS_INTERRUPTION_END=\"ios-interruption-end\",e.STATE_CHANGE=\"state-change\",e}({});function xD(e,t,i){return{sampleRate:e,stereo:t,bitrate:i}}function VD(e,t,i,n,r){return{width:e,height:t,frameRate:i,bitrateMin:n,bitrateMax:r}}function FD(e,t,i,n,r){return{width:{max:e},height:{max:t},frameRate:i,bitrateMin:n,bitrateMax:r}}function BD(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const jD={\"90p\":VD(160,90),\"90p_1\":VD(160,90),\"120p\":VD(160,120,15,30,65),\"120p_1\":VD(160,120,15,30,65),\"120p_3\":VD(120,120,15,30,50),\"120p_4\":VD(212,120),\"180p\":VD(320,180,15,30,140),\"180p_1\":VD(320,180,15,30,140),\"180p_3\":VD(180,180,15,30,100),\"180p_4\":VD(240,180,15,30,120),\"240p\":VD(320,240,15,40,200),\"240p_1\":VD(320,240,15,40,200),\"240p_3\":VD(240,240,15,40,140),\"240p_4\":VD(424,240,15,40,220),\"360p\":VD(640,360,15,80,400),\"360p_1\":VD(640,360,15,80,400),\"360p_3\":VD(360,360,15,80,260),\"360p_4\":VD(640,360,30,80,600),\"360p_6\":VD(360,360,30,80,400),\"360p_7\":VD(480,360,15,80,320),\"360p_8\":VD(480,360,30,80,490),\"360p_9\":VD(640,360,15,80,800),\"360p_10\":VD(640,360,24,80,800),\"360p_11\":VD(640,360,24,80,1e3),\"480p\":VD(640,480,15,100,500),\"480p_1\":VD(640,480,15,100,500),\"480p_2\":VD(640,480,30,100,1e3),\"480p_3\":VD(480,480,15,100,400),\"480p_4\":VD(640,480,30,100,750),\"480p_6\":VD(480,480,30,100,600),\"480p_8\":VD(848,480,15,100,610),\"480p_9\":VD(848,480,30,100,930),\"480p_10\":VD(640,480,10,100,400),\"720p\":VD(1280,720,15,120,1130),\"720p_auto\":VD(1280,720,30,900,3e3),\"720p_1\":VD(1280,720,15,120,1130),\"720p_2\":VD(1280,720,30,120,2e3),\"720p_3\":VD(1280,720,30,120,1710),\"720p_5\":VD(960,720,15,120,910),\"720p_6\":VD(960,720,30,120,1380),\"1080p\":VD(1920,1080,15,120,2080),\"1080p_1\":VD(1920,1080,15,120,2080),\"1080p_2\":VD(1920,1080,30,120,3e3),\"1080p_3\":VD(1920,1080,30,120,3150),\"1080p_5\":VD(1920,1080,60,120,4780),\"1440p\":VD(2560,1440,30,120,4850),\"1440p_1\":VD(2560,1440,30,120,4850),\"1440p_2\":VD(2560,1440,60,120,7350),\"4k\":VD(3840,2160,30,120,8910),\"4k_1\":VD(3840,2160,30,120,8910),\"4k_3\":VD(3840,2160,60,120,13500)},GD={\"480p\":FD(640,480,5),\"480p_1\":FD(640,480,5),\"480p_2\":FD(640,480,30),\"480p_3\":FD(640,480,15),\"720p\":FD(1280,720,5),\"720p_auto\":VD(1280,720,30,900,3e3),\"720p_1\":FD(1280,720,5),\"720p_2\":FD(1280,720,30),\"720p_3\":FD(1280,720,15),\"1080p\":FD(1920,1080,5),\"1080p_1\":FD(1920,1080,5),\"1080p_2\":FD(1920,1080,30),\"1080p_3\":FD(1920,1080,15)},WD={\"1SL1TL\":BD(1,1),\"3SL3TL\":BD(3,3),\"2SL3TL\":BD(2,3)};function HD(e){return e||(e=\"480p_1\"),\"string\"==typeof e?Object.assign({},jD[e]):e}function KD(e){return\"string\"==typeof e?Object.assign({},GD[e]):e}function YD(e){return\"string\"==typeof e?Object.assign({},WD[e]):e}const qD={speech_low_quality:xD(16e3,!1),speech_standard:xD(32e3,!1,18),music_standard:xD(48e3,!1),standard_stereo:xD(48e3,!0,56),high_quality:xD(48e3,!1,128),high_quality_stereo:xD(48e3,!0,192)};function zD(e){return\"string\"==typeof e?Object.assign({},qD[e]):e}const JD=[];function XD(e){return rv(e,\"mediaSource\",[\"screen\",\"window\",\"application\"]),!0}let QD=function(e){return e.NEED_RENEGOTIATE=\"@need_renegotiate\",e.NEED_REPLACE_TRACK=\"@need_replace_track\",e.NEED_REPLACE_MIXING_TRACK=\"@need_replace_mixing_track\",e.NEED_CLOSE=\"@need_close\",e.NEED_ENABLE_TRACK=\"@need_enable_track\",e.NEED_DISABLE_TRACK=\"@need_disable_track\",e.NEED_SESSION_ID=\"@need_sid\",e.SET_OPTIMIZATION_MODE=\"@set_optimization_mode\",e.GET_STATS=\"@get_stats\",e.GET_RTC_STATS=\"@get_rtc_stats\",e.GET_LOW_VIDEO_TRACK=\"@get_low_video_track\",e.NEED_RESET_REMOTE_SDP=\"@need_reset_remote_sdp\",e.NEED_UPDATE_VIDEO_ENCODER=\"@need_update_video_encoder\",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS=\"@need_update_video_send_parameters\",e.NEED_MUTE_TRACK=\"@need_mute_track\",e.NEED_UNMUTE_TRACK=\"@need_unmute_track\",e}({}),ZD=function(e){return e.SCREEN_TRACK=\"screen_track\",e.CUSTOM_TRACK=\"custome_track\",e.LOW_STREAM=\"low_stream\",e}({});let $D=function(e){return e[e.HIGH_STREAM=0]=\"HIGH_STREAM\",e[e.LOW_STREAM=1]=\"LOW_STREAM\",e}({}),eP=function(e){return e[e.HIGH_STREAM=0]=\"HIGH_STREAM\",e[e.LOW_STREAM=1]=\"LOW_STREAM\",e}({}),tP=function(e){return e[e.DISABLE=0]=\"DISABLE\",e[e.LOW_STREAM=1]=\"LOW_STREAM\",e[e.AUDIO_ONLY=2]=\"AUDIO_ONLY\",e}({}),iP=function(e){return e.TRANSCEIVER_UPDATED=\"transceiver-updated\",e.SEI_TO_SEND=\"sei-to-send\",e.SEI_RECEIVED=\"sei-received\",e.TRACK_UPDATED=\"track-updated\",e}({}),nP=function(e){return e.SOURCE_STATE_CHANGE=\"source-state-change\",e.TRACK_ENDED=\"track-ended\",e.BEAUTY_EFFECT_OVERLOAD=\"beauty-effect-overload\",e.VIDEO_ELEMENT_VISIBLE_STATUS=\"video-element-visible-status\",e.CLOSED=\"closed\",e}({}),rP=function(e){return e.FIRST_FRAME_DECODED=\"first-frame-decoded\",e.VIDEO_ELEMENT_VISIBLE_STATUS=\"video-element-visible-status\",e.VIDEO_STATE_CHANGED=\"video-state-changed\",e}({}),oP=function(e){return e.AUDIO=\"audio\",e.VIDEO=\"video\",e.DATA=\"data\",e}({}),sP=function(e){return e.AUDIO_SOURCE_STATE_CHANGE=\"audio_source_state_change\",e.RECEIVE_TRACK_BUFFER=\"receive_track_buffer\",e.ON_AUDIO_BUFFER=\"on_audio_buffer\",e.UPDATE_SOURCE=\"update_source\",e}({});!function(e){e.UPDATE_TRACK_SOURCE=\"update-track-source\"}({});const aP={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},cP={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},dP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},lP={uplinkNetworkQuality:0,downlinkNetworkQuality:0},uP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let hP=function(e){return e.ON_TRACK=\"on_track\",e.ON_NODE=\"on_node\",e}({}),pP=function(e){return e.REQUEST_UPDATE_CONSTRAINTS=\"request_update_constraints\",e.REQUEST_CONSTRAINTS=\"request_constraints\",e}({}),_P=function(e){return e.IDLE=\"IDLE\",e.INITING=\"INITING\",e.INITEND=\"INITEND\",e}({}),EP=function(e){return e.STATE_CHANGE=\"state_change\",e.RECORDING_DEVICE_CHANGED=\"recordingDeviceChanged\",e.PLAYOUT_DEVICE_CHANGED=\"playoutDeviceChanged\",e.CAMERA_DEVICE_CHANGED=\"cameraDeviceChanged\",e}({}),fP=function(e){return e.NONE=\"none\",e.INIT=\"init\",e.CANPLAY=\"canplay\",e.PLAYING=\"playing\",e.PAUSED=\"paused\",e.SUSPEND=\"suspend\",e.STALLED=\"stalled\",e.WAITING=\"waiting\",e.ERROR=\"error\",e.DESTROYED=\"destroyed\",e.ABORT=\"abort\",e.ENDED=\"ended\",e.EMPTIED=\"emptied\",e.LOADEDDATA=\"loadeddata\",e}({}),mP=function(e){return e[e.VideoStateStopped=0]=\"VideoStateStopped\",e[e.VideoStateStarting=1]=\"VideoStateStarting\",e[e.VideoStateDecoding=2]=\"VideoStateDecoding\",e[e.VideoStateFrozen=3]=\"VideoStateFrozen\",e}({});const TP={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let SP=function(e){return e.OPEN=\"open\",e.MESSAGE=\"message\",e.CLOSE=\"close\",e.CLOSING=\"closing\",e.ERROR=\"error\",e}({});function gP(e,t,i,n,r){var o,s,a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,(\"value\"in a||a.initializer)&&(a.writable=!0),a=Jn(o=Bw(s=i.slice()).call(s)).call(o,(function(i,n){return n(e,t,i)||i}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function RP(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,\"string\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function IP(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?CP(Object(i),!0).forEach((function(t){RP(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CP(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class vP extends mv{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(iP.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),RP(this,\"trackMediaType\",void 0),RP(this,\"_ID\",void 0),RP(this,\"_rtpTransceiver\",void 0),RP(this,\"_lowRtpTransceiver\",void 0),RP(this,\"_hints\",[]),RP(this,\"_isClosed\",!1),RP(this,\"_originMediaStreamTrack\",void 0),RP(this,\"mediaStreamTrack\",void 0),RP(this,\"_external\",{}),this._ID=t||Zv(8,\"track-\"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(e){Dn(JD).call(JD,e)||JD.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Wv((()=>{var e;rA.reportApiInvoke(null,{name:gv.GET_MEDIA_STREAM_TRACK,options:[],tag:Rv.TRACER}).onSuccess((null===(e=this._mediaStreamTrack)||void 0===e?void 0:e.label)||\"\")}),this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===$D.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=JD.indexOf(e);-1!==t&&JD.splice(t,1)}(this),this.emit(nP.CLOSED),this.removeAllListeners(iP.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===$D.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(iP.TRANSCEIVER_UPDATED,e,t)}}class yP extends vP{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),RP(this,\"_enabled\",!0),RP(this,\"_muted\",!1),RP(this,\"_isExternalTrack\",!1),RP(this,\"_isClosed\",!1),RP(this,\"_enabledMutex\",void 0),RP(this,\"processor\",void 0),RP(this,\"_processorContext\",void 0),RP(this,\"_handleTrackEnded\",(()=>{this.onTrackEnded()})),this._enabledMutex=new ly(\"\".concat(this.getTrackId())),e.addEventListener(\"ended\",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:\"\"}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Jy.debug(\"[\".concat(this.getTrackId(),\"] close\")),this.emit(QD.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=i,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener(\"ended\",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener(\"ended\",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Lv(this,QD.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Jy.debug(\"[\".concat(this.getTrackId(),\"] track ended\")),this.safeEmit(nP.TRACK_ENDED)}stateCheck(e,t){if(Jy.debug(\"check track state, [muted: \".concat(this._muted,\", enabled: \").concat(this._enabled,\"] to [\").concat(e,\": \").concat(t,\"]\")),nv(t,e),this._enabled&&this._muted&&\"enabled\"===e&&!1===t)throw new iv(tv.TRACK_STATE_UNREACHABLE,\"cannot set enabled while the track is muted\").print(\"error\",Jy);if(!this._enabled&&!this._muted&&\"muted\"===e&&!0===t)throw new iv(tv.TRACK_STATE_UNREACHABLE,\"cannot set muted while the track is disabled\").print(\"error\",Jy)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():Gh.resolve([])}}const AP=window.AudioContext||window.webkitAudioContext;let bP=null;const wP=new class extends mv{constructor(){super(...arguments),RP(this,\"prevState\",void 0),RP(this,\"curState\",void 0),RP(this,\"currentTime\",void 0),RP(this,\"currentTimeStuckAt\",void 0),RP(this,\"interruptDetectorTrack\",void 0),RP(this,\"onLocalAudioTrackMute\",(()=>{Jy.info(\"ios15-interruption-start\"),this.emit(UD.IOS_15_16_INTERRUPTION_START)})),RP(this,\"onLocalAudioTrackUnmute\",(async()=>{Jy.info(\"ios15-interruption-end\"),\"running\"!==this.curState||this.duringInterruption?Jy.info(\"ios15-interruption-end-canceled\"):(bP&&await bP.suspend(),this.emit(UD.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return\"running\"===this.prevState&&\"interrupted\"===this.curState}bindInterruptDetectorTrack(e){Jy.debug(\"webaudio bindInterruptDetectorTrack \".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){Jy.debug(\"webaudio unbindInterruptDetectorTrack \".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function OP(){if(!bP){if(function(){if(!AP)return void Jy.error(\"your browser is not support web audio\");Jy.info(\"create audio context\");const e=IP({},Oy(\"WEBAUDIO_INIT_OPTIONS\"));Jy.debug(\"audio context init option:\",JSON.stringify(e)),bP=new AP(e),wP.curState=bP.state,bP.onstatechange=()=>{wP.prevState=wP.curState,wP.curState=bP?bP.state:void 0;const{prevState:e,curState:t}=wP,i=\"running\"===t,n=\"interrupted\"===t,r=\"running\"===e,o=\"suspended\"===e,s=\"interrupted\"===e,a=vI().osVersion;(LI()||KI())&&r&&n&&(Jy.info(\"ios\".concat(a,\"-interruption-start\")),wP.emit(UD.IOS_INTERRUPTION_START)),(LI()||KI())&&(o||s)&&i&&(Jy.info(\"ios\".concat(a,\"-interruption-end\")),wP.emit(UD.IOS_INTERRUPTION_END)),e!==t&&wP.emit(UD.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=bP)||void 0===e?void 0:e.currentTime;wP.currentTime!==t?(wP.currentTimeStuckAt&&(Jy.debug(\"AudioContext current time resume at \".concat(t)),wP.currentTimeStuckAt=void 0),wP.currentTime=t):(t!==wP.currentTimeStuckAt&&(rA.reportApiInvoke(null,{name:\"WEB_AUDIO_CURRENT_TIME_STUCK\",options:{currentTime:t},tag:Rv.TRACER}).onSuccess(),Jy.warning(\"AudioContext current time stuck at \".concat(t))),wP.currentTimeStuckAt=t)}),5e3),async function(e){const t=[\"click\",\"contextmenu\",\"auxclick\",\"dblclick\",\"mousedown\",\"mouseup\",\"touchend\",\"keydown\",\"keyup\"];let i,n=!1,r=!1,o=!1;function s(t){\"running\"===e.state?a(!1):LI()||KI()?\"suspended\"===e.state&&(a(!0),t&&e.resume().then(c,c)):\"closed\"!==e.state&&(a(!0),t&&e.resume().then(c,c))}function a(e){if(n!==e){n=e;for(let i=0,n=t;i<n.length;i+=1){const t=n[i];e?window.addEventListener(t,d,{capture:!0,passive:!0}):window.removeEventListener(t,d,{capture:!0,passive:!0})}}}function c(){s(!1)}function d(){s(!0)}function l(e){if(!o)if(i.paused)if(e){let t;u(!1),o=!0;try{t=i.play(),t?t.then(h,h):(i.addEventListener(\"playing\",h),i.addEventListener(\"abort\",h),i.addEventListener(\"error\",h))}catch(e){h()}}else u(!0);else u(!1)}function u(e){if(r!==e){r=e;for(let i=0,n=t;i<n.length;i++){const t=n[i];e?window.addEventListener(t,p,{capture:!0,passive:!0}):window.removeEventListener(t,p,{capture:!0,passive:!0})}}}function h(){i.removeEventListener(\"playing\",h),i.removeEventListener(\"abort\",h),i.removeEventListener(\"error\",h),o=!1,l(!1)}function p(){l(!0)}if(LI()){const t=e.createMediaStreamDestination(),n=document.createElement(\"div\");n.innerHTML=\"<audio x-webkit-airplay='deny'></audio>\",i=n.children.item(0),i.controls=!1,i.disableRemotePlayback=!0,i.preload=\"auto\",i.srcObject=t.stream,l(!0)}wP.on(UD.STATE_CHANGE,(function(){s(!0)})),s(!1)}(bP)}(),!bP)throw new iv(tv.NOT_SUPPORTED,\"can not create audio context\");return bP}return bP}function NP(e){if(function(){if(null!==DP)return DP;const e=OP(),t=e.createBufferSource(),i=e.createGain(),n=e.createGain();t.connect(i),t.connect(n),t.disconnect(i);let r=!1;try{t.disconnect(i)}catch(e){r=!0}return t.disconnect(),DP=r,r}())return;const t=e.connect,i=e.disconnect;e.connect=(i,n,r)=>{var o;return e._inputNodes||(e._inputNodes=[]),Dn(o=e._inputNodes).call(o,i)||(i instanceof AudioNode?(e._inputNodes.push(i),t.call(e,i,n,r)):t.call(e,i,n)),e},e.disconnect=(n,r,o)=>{i.call(e),n?xv(e._inputNodes,n):e._inputNodes=[];for(const i of e._inputNodes)t.call(e,i)}}let DP=null;function PP(e,t){let i=!1;const n=1/t;if(Oy(\"DISABLE_WEBAUDIO\")){const t=window.setInterval((()=>{i?window.clearInterval(t):e(performance.now()/1e3)}),1e3*n)}else{const t=OP();let r=t.createGain();r.gain.value=0,r.connect(t.destination);const o=()=>{if(i)return void(r=null);const s=t.createOscillator();s.onended=o,s.connect(r),s.start(0),s.stop(t.currentTime+n),e(t.currentTime)};o()}return()=>{i=!0}}class LP{constructor(){RP(this,\"context\",void 0),RP(this,\"analyserNode\",void 0),RP(this,\"sourceNode\",void 0),this.context=OP(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||LI()||KI()||\"running\"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let i=0;i<e.length;++i)e[i]=t[i]/128-1}const t=Jn(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){Jy.warning(\"rebuild analyser node failed.\")}}destroy(){this.updateSource(void 0)}}class kP extends mv{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var i;null===(i=this.sourceNode)||void 0===i||i.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),RP(this,\"outputNode\",void 0),RP(this,\"outputTrack\",void 0),RP(this,\"isPlayed\",!1),RP(this,\"sourceNode\",void 0),RP(this,\"context\",void 0),RP(this,\"audioBufferNode\",void 0),RP(this,\"destNode\",void 0),RP(this,\"audioOutputLevel\",0),RP(this,\"volumeLevelAnalyser\",void 0),RP(this,\"_processedNode\",void 0),RP(this,\"playNode\",void 0),RP(this,\"isDestroyed\",!1),RP(this,\"onNoAudioInput\",void 0),RP(this,\"isNoAudioInput\",!1),RP(this,\"_noAudioInputCount\",0),this.context=OP(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),NP(this.outputNode),this.volumeLevelAnalyser=new LP}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(sP.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const i=e.outputBuffer.getChannelData(t);for(let e=0;e<i.length;e+=1)i[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!LD().webAudioMediaStreamDest)throw new iv(tv.NOT_SUPPORTED,\"your browser is not support audio processor\");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){\"running\"!==this.context.state&&Fv((()=>{wP.emit(\"autoplay-failed\")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;LI()||KI()?\"suspended\"===this.context.state&&this.context.resume():\"running\"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let i;t.getFloatTimeDomainData?(i=new Float32Array(t.fftSize),t.getFloatTimeDomainData(i)):(i=new Uint8Array(t.fftSize),t.getByteTimeDomainData(i));let n=!1;for(let e=0;e<i.length;e++)0!==i[e]&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await Qv(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class MP extends kP{get isFreeze(){return!1}constructor(e,t,i){var n;if(super(),RP(this,\"sourceNode\",void 0),RP(this,\"track\",void 0),RP(this,\"clonedTrack\",void 0),RP(this,\"audioElement\",void 0),RP(this,\"isCurrentTrackCloned\",!1),RP(this,\"isRemoteTrack\",!1),RP(this,\"originVolumeLevelAnalyser\",void 0),RP(this,\"rebuildWebAudio\",(async()=>{if(Jy.debug(\"ready to rebuild web audio, state:\",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener(\"click\",this.rebuildWebAudio,!0),void Jy.debug(\"rebuild web audio success, current volume status\",this.getAccurateVolumeLevel());this.context.resume().then((()=>Jy.info(\"resume success\"))),Jy.debug(\"rebuild web audio because of ios 12 bugs\"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),NP(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const i=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(i,this.context.currentTime),NP(this.outputNode),this.emit(sP.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),\"audio\"!==e.kind)throw new iv(tv.UNEXPECTED_ERROR);this.track=e;const r=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(r),NP(this.sourceNode),i){const e=i.clone();e.enabled=!0,this.clonedTrack=e,Jy.debug(\"create an unmuted track \".concat(e.id,\" from the original track \").concat(i.id,\" to get the volume\"));const t=this.context.createMediaStreamSource(new MediaStream([e]));NP(t),this.originVolumeLevelAnalyser=new LP,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement(\"audio\"),this.audioElement.srcObject=r;const o=vI();t&&o.os===SI.IOS&&Number(null===(n=o.osVersion)||void 0===n?void 0:n.split(\".\")[0])<15&&(wP.on(UD.STATE_CHANGE,(()=>{\"suspended\"===this.context.state?document.body.addEventListener(\"click\",this.rebuildWebAudio,!0):\"running\"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener(\"click\",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),NP(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(sP.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),wP.off(\"state-change\",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),Jy.debug(\"create an unmuted track \".concat(t.id,\" from the original track \").concat(e.id,\" to get the volume\"));const i=this.context.createMediaStreamSource(new MediaStream([t]));NP(i),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(i)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function UP(e,t,i){const n=(e,t)=>e?\"number\"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,r={audio:!!i&&{mandatory:{chromeMediaSource:\"desktop\"}},video:{mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&\"number\"!=typeof t.frameRate?(r.video.mandatory.maxFrameRate=t.frameRate.max,r.video.mandatory.minFrameRate=t.frameRate.min):\"number\"==typeof t.frameRate&&(r.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(r)}async function xP(e,t){const i=await VP(e.mediaSource),{sourceId:n,audio:r}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Gh(((i,n)=>{const r=document.createElement(\"div\");r.innerText=\"share screen\",r.setAttribute(\"style\",\"text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;\");const o=document.createElement(\"div\");o.setAttribute(\"style\",\"width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;\");const s=document.createElement(\"div\");s.innerText=\"Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.\",s.setAttribute(\"style\",\"height: 12%;\");const a=document.createElement(\"div\");a.setAttribute(\"style\",\"width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;\");const c=document.createElement(\"div\");c.setAttribute(\"style\",\"display: flex; justify-content: space-between; padding: 16px 0;\");const d=document.createElement(\"button\");d.innerHTML=\"cancel\",d.setAttribute(\"style\",\"width: 85px;\"),d.onclick=()=>{document.body.removeChild(h);const e=new Error(\"NotAllowedError\");e.name=\"NotAllowedError\",n(e)};let l=t;const u=document.createElement(\"div\");if(t){const e=document.createElement(\"input\");e.setAttribute(\"type\",\"checkbox\");const t=document.createElement(\"span\");e.setAttribute(\"style\",\"margin-right: 6px;\"),t.innerText=\"Share audio\",e.checked=l,e.onchange=()=>{l=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(d),o.appendChild(s),o.appendChild(a),o.appendChild(c);const h=document.createElement(\"div\");h.setAttribute(\"style\",\"position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\"),h.appendChild(r),h.appendChild(o),document.body.appendChild(h),e.map((e=>{if(e.id){const t=document.createElement(\"div\");t.setAttribute(\"style\",\"width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;\");let n=e.thumbnail;try{const{width:e}=n.getSize();e>1920&&(n=n.resize({width:1920}))}catch(e){throw e&&e.message.startsWith(\"Illegal invocation\")&&console.error(\"Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)\"),e}t.innerHTML='<div style=\"height: 120px; display: table-cell; vertical-align: middle;\"><img style=\"width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);\" src='+n.toDataURL()+' /></div><span style=\"\\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">'+e.name.replace(/[\\u00A0-\\u9999<>\\&]/g,(function(e){return\"&#\"+e.charCodeAt(0)+\";\"}))+\"</span>\",t.onclick=()=>{document.body.removeChild(h),i({sourceId:e.id,audio:l})},a.appendChild(t)}}))}))}(i,t);return await UP(n,e,r)}async function VP(e){let t=[\"window\",\"screen\"];\"application\"!==e&&\"window\"!==e||(t=[\"window\"]),\"screen\"===e&&(t=[\"screen\"]);const i=Sv();if(!i)throw console.error(\"failed to fetch electron, please mount it to window\"),new iv(tv.ELECTRON_IS_NULL);let n=null;try{var r;n=(null===(r=i.desktopCapturer)||void 0===r?void 0:r.getSources({types:t}))||i.ipcRenderer.invoke(\"DESKTOP_CAPTURER_GET_SOURCES\",{types:t})}catch(e){n=null}n&&n.then||(n=new Gh(((e,n)=>{i.desktopCapturer.getSources({types:t},((t,i)=>{t?n(t):e(i)}))})));try{return await n}catch(e){throw new iv(tv.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}const FP=new ly(\"safari\");let BP=!1,jP=!1;async function GP(e,t){let i=0,n=null;for(;i<2;)try{n=await WP(e,t,i>0);break}catch(e){if(e instanceof iv)throw Jy.error(\"[\".concat(t,\"] \").concat(e.toString())),e;const n=HP(e.name||e.code||e,e.message);if(n.code===tv.MEDIA_OPTION_INVALID){Jy.debug(\"[\".concat(t,\"] detect media option invalid, retry\")),i+=1,await Qv(500);continue}throw Jy.error(\"[\".concat(t,\"] \").concat(n.toString())),n}if(!n)throw new iv(tv.UNEXPECTED_ERROR,\"can not find stream after getUserMedia\");return n}async function WP(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new iv(tv.NOT_SUPPORTED,\"can not find getUserMedia\");i&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const n=LD(),r=new MediaStream;if(e.audioSource&&r.addTrack(e.audioSource),e.videoSource&&r.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return Jy.debug(\"Using Video Source/ Audio Source\"),r;if(e.screen)if(Sv())e.screen.sourceId?KP(r,await UP(e.screen.sourceId,e.screen,e.screenAudio)):KP(r,await xP(e.screen,e.screenAudio));else if(OI()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new iv(tv.NOT_SUPPORTED,\"This browser does not support screen sharing\");Jy.debug(\"[\".concat(t,'] Screen access on chrome stable, looking for extension\"'));const i=await(s=e.screen.extensionId,a=t,new Gh(((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},(i=>{if(!i||!i.streamId)return Jy.error(\"[\".concat(a,\"] No response from Chrome Plugin. Plugin not installed properly\"),i),void t(new iv(tv.CHROME_PLUGIN_NO_RESPONSE,\"No response from Chrome Plugin. Plugin not installed properly\"));e(i.streamId)}))}catch(e){Jy.error(\"[\".concat(a,\"] AgoraRTC screensharing plugin is not accessible(\").concat(s,\")\"),e.toString()),t(new iv(tv.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=i,KP(r,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){var o;e.screen.mediaSource&&XD(e.screen.mediaSource);const i={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:\"screen\"===e.screen.mediaSource?\"monitor\":e.screen.mediaSource},{selfBrowserSurface:n,surfaceSwitching:s,systemAudio:a}=e.screen,c={selfBrowserSurface:n,surfaceSwitching:s,systemAudio:a};!n&&delete c.selfBrowserSurface,!s&&delete c.surfaceSwitching,!a&&delete c.systemAudio,Jy.debug(\"[\".concat(t,\"] getDisplayMedia:\"),JSON.stringify({video:i,audio:!!e.screenAudio,controls:c})),KP(r,await navigator.mediaDevices.getDisplayMedia(IP({video:i,audio:!!e.screenAudio},c)))}else{if(!PI())throw Jy.error(\"[\".concat(t,\"] This browser does not support screenSharing\")),new iv(tv.NOT_SUPPORTED,\"This browser does not support screen sharing\");{e.screen.mediaSource&&XD(e.screen.mediaSource);const i={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};Jy.debug(\"[\".concat(t,\"] getUserMedia: \").concat(JSON.stringify(i))),KP(r,await navigator.mediaDevices.getUserMedia(i))}}var s,a;if(!e.video&&!e.audio)return r;let c={video:e.video,audio:e.audio},d=Oy(\"MEDIA_DEVICE_CONSTRAINTS\");if(d)try{\"string\"==typeof d&&(d=JSON.parse(d)),c=ry(c,d)}catch(e){}Jy.debug(\"[\".concat(t,\"] GetUserMedia\"),JSON.stringify(c)),vI();let l,u=null;(NI()||LI()||wI())&&(u=await FP.lock());try{l=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(BP=!0),c.video&&(jP=!0),KP(r,l),u&&u(),r}function HP(e,t){switch(e){case\"Starting video failed\":case\"OverconstrainedError\":case\"TrackStartError\":return new iv(tv.MEDIA_OPTION_INVALID,\"\".concat(e,\": \").concat(t));case\"NotFoundError\":case\"DevicesNotFoundError\":return new iv(tv.DEVICE_NOT_FOUND,\"\".concat(e,\": \").concat(t));case\"NotSupportedError\":return new iv(tv.NOT_SUPPORTED,\"\".concat(e,\": \").concat(t));case\"NotReadableError\":return new iv(tv.NOT_READABLE,\"\".concat(e,\": \").concat(t));case\"InvalidStateError\":case\"NotAllowedError\":case\"PERMISSION_DENIED\":case\"PermissionDeniedError\":return new iv(tv.PERMISSION_DENIED,\"\".concat(e,\": \").concat(t));case\"ConstraintNotSatisfiedError\":return new iv(tv.CONSTRAINT_NOT_SATISFIED,\"\".concat(e,\": \").concat(t));default:return Jy.error(\"getUserMedia unexpected error\",e),new iv(tv.UNEXPECTED_ERROR,\"\".concat(e,\": \").concat(t))}}function KP(e,t){const i=e.getVideoTracks()[0],n=e.getAudioTracks()[0],r=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),r&&(i&&e.removeTrack(i),e.addTrack(r))}const YP=new class extends mv{get state(){return this._state}set state(e){e!==this._state&&(this.emit(EP.STATE_CHANGE,e),this._state=e)}constructor(){super(),RP(this,\"_state\",_P.IDLE),RP(this,\"isAccessMicrophonePermission\",!1),RP(this,\"isAccessCameraPermission\",!1),RP(this,\"lastAccessMicrophonePermission\",!1),RP(this,\"lastAccessCameraPermission\",!1),RP(this,\"checkdeviceMatched\",!1),RP(this,\"deviceInfoMap\",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener(\"devicechange\",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(Oy(\"ENUMERATE_DEVICES_INTERVAL\")||(XI()||AI()===SI.HARMONY_OS)&&JI())&&this.updateDevicesInfo()}),Oy(\"ENUMERATE_DEVICES_INTERVAL_TIME\"))})).catch((e=>Jy.error(e.toString())))}async enumerateDevices(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new iv(tv.NOT_SUPPORTED,\"enumerateDevices() not supported.\").throw();const n=await navigator.mediaDevices.enumerateDevices(),r=this.checkMediaDeviceInfoIsOk(n);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;r.audio&&(o=!1),r.video&&(s=!1);let a=null,c=null,d=null;if(!i&&(o||s)){if(FP.isLocked&&(Jy.debug(\"[device manager] wait GUM lock\"),(await FP.lock())(),Jy.debug(\"[device manager] GUM unlock\")),BP&&(o=!1,this.isAccessMicrophonePermission=!0),jP&&(s=!1,this.isAccessCameraPermission=!0),Jy.debug(\"[device manager] check media device permissions\",e,t,o,s),o&&s){try{d=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=HP(e.name||e.code||e,e.message);if(t.code===tv.PERMISSION_DENIED)throw t;Jy.warning(\"getUserMedia failed in getDevices\",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=HP(e.name||e.code||e,e.message);if(t.code===tv.PERMISSION_DENIED)throw t;Jy.warning(\"getUserMedia failed in getDevices\",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=HP(e.name||e.code||e,e.message);if(t.code===tv.PERMISSION_DENIED)throw t;Jy.warning(\"getUserMedia failed in getDevices\",t)}this.isAccessCameraPermission=!0}Jy.debug(\"[device manager] mic permission\",e,\"cam permission\",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,new iv(tv.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>\"audioinput\"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>\"videoinput\"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>\"audiooutput\"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((i=>{i.device.label===e&&(t=i.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new iv(tv.DEVICE_NOT_FOUND,\"deviceId: \".concat(e));return t}async init(){this.state=_P.INITING;try{await this.updateDevicesInfo(),this.state=_P.INITEND}catch(e){throw Jy.warning(\"Device Detection functionality cannot start properly.\",e.toString()),this.state=_P.IDLE,(\"boolean\"==typeof isSecureContext?isSecureContext:\"https:\"===location.protocol||\"file:\"===location.protocol||\"localhost\"===location.hostname||\"127.0.0.1\"===location.hostname||\"::1\"===location.hostname)||new iv(tv.WEB_SECURITY_RESTRICT,\"Your context is limited by web security, please try using https protocol or localhost.\").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),i=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>\"audioinput\"===e.kind&&\"default\"===e.deviceId)),i=e.find((e=>\"audiooutput\"===e.kind&&\"default\"===e.deviceId));t&&i?i.groupId===t.groupId?Jy.debug(\"[device-check] default input \".concat(t.label,\" and output \").concat(i.label,\" is the same group\")):Jy.warning(\"[device-check] default input \".concat(t.label,\" and output \").concat(i.label,\" is not the same group\")):Jy.debug(\"[device-check] default input or output not found\")}const n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const n=this.deviceInfoMap.get(\"\".concat(e.kind,\"_\").concat(e.deviceId));if(\"ACTIVE\"!==(n?n.state:\"INACTIVE\")){const n={initAt:t,updateAt:t,device:e,state:\"ACTIVE\"};this.deviceInfoMap.set(\"\".concat(e.kind,\"_\").concat(e.deviceId),n),i.push(n)}n&&(n.updateAt=t)})),this.deviceInfoMap.forEach(((e,n)=>{\"ACTIVE\"===e.state&&e.updateAt!==t&&(e.state=\"INACTIVE\",i.push(e))})),this.state!==_P.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach((e=>{switch(e.device.kind){case\"audioinput\":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(EP.RECORDING_DEVICE_CHANGED,e);break;case\"videoinput\":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(EP.CAMERA_DEVICE_CHANGED,e);break;case\"audiooutput\":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(EP.PLAYOUT_DEVICE_CHANGED,e)}})),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>\"audioinput\"===e.kind)),i=e.filter((e=>\"videoinput\"===e.kind)),n={audio:!1,video:!1};for(const e of t)if(e.label&&e.deviceId){n.audio=!0;break}for(const e of i)if(e.label&&e.deviceId){n.video=!0;break}return n}};let qP=!1;const zP=new class extends mv{constructor(){super(...arguments),RP(this,\"onAutoplayFailed\",void 0),RP(this,\"onAudioAutoplayFailed\",void 0)}};function JP(){if(vI(),!qP){const e=t=>{t.preventDefault(),qP=!1,QI()?document.body.removeEventListener(\"click\",e,!0):(document.body.removeEventListener(\"touchstart\",e,!0),document.body.removeEventListener(\"mousedown\",e,!0))};qP=!0,QI()?document.body.addEventListener(\"click\",e,!0):(document.body.addEventListener(\"touchstart\",e,!0),document.body.addEventListener(\"mousedown\",e,!0)),Jy.info(\"detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web\"),zP.onAutoplayFailed?zP.onAutoplayFailed():zP.onAudioAutoplayFailed?Jy.warning(\"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\\n\\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\"):Jy.warning(\"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\\n\\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\\n\\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\"),zP.emit(\"autoplay-failed\")}}function XP(e,t,i,n){if(!e)return;const r=rA.getBaseInfoBySessionId(e);if(!r)return;const o=r.info,s=Date.now(),a=IP(IP({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-r.startTime,cbRegistered:zP.onAutoplayFailed||zP.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:t,trackId:n,extend:void 0});rA.send({type:eA.AUTOPLAY_FAILED,data:a},!0)}const QP=[\"play\",\"playing\",\"loadeddata\",\"canplay\",\"pause\",\"stalled\",\"suspend\",\"waiting\",\"abort\",\"emptied\",\"ended\",\"error\"],ZP=new class{constructor(){RP(this,\"onAutoplayFailed\",void 0),RP(this,\"elementMap\",new Map),RP(this,\"elementStateMap\",new Map),RP(this,\"elementsNeedToResume\",[]),RP(this,\"sinkIdMap\",new Map),RP(this,\"autoResumeAfterInterruption\",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[i,n]=t;const r=this.elementStateMap.get(i),o=n.srcObject.getAudioTracks()[0],s=o&&o.readyState;if(Jy.debug(\"resume after interrupted, ele: \".concat(r,\" audio: \").concat(s,\" \").concat(e)),\"live\"===s){if(e)return n.pause(),void n.play();if(\"running\"===wP.curState)return GI()?(n.pause(),void n.play()):void(r&&\"paused\"===r&&n.play())}}))})),RP(this,\"autoResumeAfterInterruptionOnIOS15_16\",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,i]=e;const n=i.srcObject.getAudioTracks()[0];n&&\"live\"===n.readyState&&(Jy.debug(\"auto resume after interruption inside autoResumeAfterInterruptionOnIOS15\"),i.pause(),i.play())}))})),this.autoResumeAudioElement(),wP.on(UD.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),wP.on(UD.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),wP.on(UD.STATE_CHANGE,(()=>{LI()&&\"suspended\"===wP.prevState&&\"running\"===wP.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const i=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),i)try{await i.setSinkId(t)}catch(e){throw new iv(tv.PERMISSION_DENIED,\"can not set sink id: \"+e.toString())}}play(e,t,i,n){if(this.elementMap.has(t))return;const r=document.createElement(\"audio\");r.autoplay=!0,r.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,r),this.elementMap.set(t,r),this.elementStateMap.set(t,fP.INIT),this.setVolume(t,i);const o=this.sinkIdMap.get(t);if(o)try{r.setSinkId(o).catch((e=>{Jy.warning(\"[\".concat(t,\"] set sink id failed\"),e.toString())}))}catch(e){Jy.warning(\"[\".concat(t,\"] set sink id failed\"),e.toString())}const s=r.play();s&&s.then&&s.catch((e=>{n&&XP(n,\"audio\",e.message,t),Jy.warning(\"audio element play warning\",e.toString()),this.elementMap.has(t)&&\"NotAllowedError\"===e.name&&(Jy.warning(\"detected audio element autoplay failed\"),this.elementsNeedToResume.push(r),Fv((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),JP()})))}))}updateTrack(e,t){const i=this.elementMap.get(e);i&&(i.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&\"playing\"===this.elementStateMap.get(e)}setVolume(e,t){const i=this.elementMap.get(e);i&&(t=Math.max(0,Math.min(100,t)),i.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const i=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(i,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){QP.forEach((i=>{t.addEventListener(i,(i=>{const n=this.elementStateMap.get(e),r=\"pause\"===i.type?\"paused\":i.type;if(Jy.debug(\"[\".concat(e,\"] audio-element-status change \").concat(n,\" => \").concat(r)),\"error\"===i.type){const i=null==t?void 0:t.error;i&&Jy.error(\"[\".concat(e,\"] media error, code: \").concat(i.code,\", message: \").concat(i.message))}this.elementStateMap.set(e,r)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||\"uninit\"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{Jy.debug(\"Auto resume audio element success\")})).catch((e=>{Jy.warning(\"Auto resume audio element failed!\",e)}))})),this.elementsNeedToResume=[]};new Gh((e=>{document.body?e():window.addEventListener(\"load\",(()=>e()))})).then((()=>{QI()?document.body.addEventListener(\"click\",e,!0):(document.body.addEventListener(\"touchstart\",e,!0),document.body.addEventListener(\"mousedown\",e,!0))}))}};function $P(){return function(e,t,i){const n=i.value;return\"function\"==typeof n&&(i.value=function(){this._isClosed&&new iv(tv.INVALID_OPERATION,\"[\".concat(this.getTrackId(),\"] cannot operate a closed track\")).print(\"warning\",Jy);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const r=n.apply(this,t);return r instanceof Gh?new Gh(((e,t)=>{r.then(e).catch(t)})):r}),i}}class eL extends mv{constructor(e){super(),RP(this,\"name\",\"VideoProcessorDestination\"),RP(this,\"ID\",\"0\"),RP(this,\"_source\",void 0),RP(this,\"videoContext\",void 0),RP(this,\"inputTrack\",void 0),this.videoContext=e}get kind(){return\"video\"}get enabled(){return!0}pipe(){throw new iv(tv.NOT_SUPPORTED,\"VideoProcessor cannot pipe to any other Processor\")}unpipe(){throw new iv(tv.NOT_SUPPORTED,\"VideoProcessor cannot unpipe to any other Processor\")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(\"ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\\nProbably you are making pipeline like this:\\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).\");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(hP.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(hP.ON_TRACK,void 0)}}class tL extends mv{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),RP(this,\"constraintsMap\",new Map),RP(this,\"statsRegistry\",[]),RP(this,\"usageRegistry\",[]),RP(this,\"trackId\",void 0),RP(this,\"direction\",void 0),RP(this,\"_chained\",!1),this.trackId=e,this.direction=t}async getConstraints(){return await Pv(this,pP.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var i;return Jy.info(\"processor \".concat(t.name,\" requestApplyConstraints for \").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Lv(this,pP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jw(i=this.constraintsMap).call(i)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return Jy.info(\"processor \".concat(e.name,\" requestRevertConstraints for \").concat(this.trackId)),this.constraintsMap.delete(e),Lv(this,pP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jw(t=this.constraintsMap).call(t)))}registerStats(e,t,i){this.statsRegistry.find((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:i})}unregisterStats(e,t){const i=this.statsRegistry.findIndex((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t));-1!==i&&this.statsRegistry.splice(i,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:i,type:n,cb:r}of this.statsRegistry)try{const o=r();e.push({processorID:t,processorName:i,type:n,stats:o})}catch(e){Jy.error(new iv(tv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let i=t();i instanceof Gh&&(i=await i),e.push(IP(IP({},i),{},{direction:this.direction}))}catch(e){Jy.error(\"gather extension usage error\",e)}return e}getDirection(){return this.direction}}class iL extends mv{constructor(e){super(),RP(this,\"name\",\"AudioProcessorDestination\"),RP(this,\"ID\",\"0\"),RP(this,\"inputTrack\",void 0),RP(this,\"inputNode\",void 0),RP(this,\"audioProcessorContext\",void 0),RP(this,\"_source\",void 0),this.audioProcessorContext=e}get kind(){return\"audio\"}get enabled(){return!0}pipe(){throw new iv(tv.NOT_SUPPORTED,\"AudioProcessorDestination cannot pipe to any other Processor\")}unpipe(){throw new iv(tv.NOT_SUPPORTED,\"AudioProcessor cannot unpipe to any other Processor\")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(hP.ON_TRACK,void 0),this.emit(hP.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(\"ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).\");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(hP.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(hP.ON_NODE,this.inputNode))}}class nL extends mv{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,i){super(),RP(this,\"constraintsMap\",new Map),RP(this,\"statsRegistry\",[]),RP(this,\"audioContext\",void 0),RP(this,\"trackId\",void 0),RP(this,\"direction\",void 0),RP(this,\"usageRegistry\",[]),RP(this,\"_chained\",!1),this.audioContext=e,this.trackId=t,this.direction=i}async getConstraints(){return Pv(this,pP.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var i;return Jy.info(\"processor \".concat(t.name,\" requestApplyConstraints for \").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Lv(this,pP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jw(i=this.constraintsMap).call(i)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Lv(this,pP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jw(t=this.constraintsMap).call(t)))}registerStats(e,t,i){this.statsRegistry.find((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:i})}unregisterStats(e,t){const i=this.statsRegistry.findIndex((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t));-1!==i&&this.statsRegistry.splice(i,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:i,type:n,cb:r}of this.statsRegistry)try{const o=r();e.push({processorID:t,processorName:i,type:n,stats:o})}catch(e){Jy.error(new iv(tv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let i=t();i instanceof Gh&&(i=await i),e.push(IP(IP({},i),{},{direction:this.direction}))}catch(e){Jy.error(\"gather extension usage error\",e)}return e}getDirection(){return this.direction}}class rL extends mv{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),RP(this,\"context\",void 0),RP(this,\"processSourceNode\",void 0),RP(this,\"outputTrack\",void 0),RP(this,\"processedNode\",void 0),RP(this,\"clonedTrack\",void 0),RP(this,\"outputNode\",void 0),this.outputNode=new oL}setVolume(){}createOutputTrack(){throw new iv(tv.NOT_SUPPORTED,\"can not create output MediaStreamTrack when WebAudio disabled\")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class oL{disconnect(){}connect(){}}function sL(e){return new Gh(((t,i)=>{let n=!1;const r=document.createElement(\"video\");r.setAttribute(\"autoplay\",\"\"),r.setAttribute(\"muted\",\"\"),r.muted=!0,r.autoplay=!0,r.setAttribute(\"playsinline\",\"\"),r.setAttribute(\"style\",\"position: fixed; top: 0; left: 0; width: 1px; height: 1px\"),document.body.appendChild(r);const o=LI()?\"canplay\":\"playing\";r.addEventListener(o,(()=>{const e=r.videoWidth,i=r.videoHeight;!e&&PI()||(n=!0,r.srcObject=null,r.remove(),t([e,i]))})),r.srcObject=new MediaStream([e]),r.play().catch(ey),setTimeout((()=>{n||(r.srcObject=null,r.remove(),t([r.videoWidth,r.videoHeight]))}),4e3)}))}function aL(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const i=HD(e.encoderConfig);return null!=i.width&&(t.width=i.width),null!=i.height&&(t.height=i.height),!qI()&&i.frameRate&&(t.frameRate=i.frameRate),DI()&&\"object\"==typeof t.frameRate&&(t.frameRate.max=60),PI()&&(t.frameRate={ideal:30,max:30}),t}function cL(e){const t={};if(qI()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,OI()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const i=zD(e.encoderConfig);t.channelCount=i.stereo?2:1,t.sampleRate=i.sampleRate,t.sampleSize=i.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),XI()&&(t.sampleRate=void 0),t}const dL=e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:i,width:n,height:r}=e.getMediaStreamTrackSettings();let{frameRate:o=i,width:s=n,height:a=r}=t;if(!o||!s||!a)return;s=sy(s),a=sy(a),o=sy(o);const{max:c,min:d}=function(e,t,i){const n=200*Math.pow(i/15,.6)*Math.pow(e*t/640/360,.75);return{min:Math.floor(n),max:Math.floor(4*n)}}(s,a,o),{bitrateMax:l,bitrateMin:u}=t||{};l||Jy.debug(\"calculate bitrate: [w: \".concat(s,\", h: \").concat(a,\", fps: \").concat(o,\"] => [brMax: \").concat(l,\", brMin: \").concat(u,\"]\"));const{maxFramerate:h}=Oy(\"ENCODER_CONFIG_LIMIT\");return h&&\"number\"==typeof h&&(o=Math.min(o,h)),{frameRate:o,bitrateMax:l||c,bitrateMin:u||d,scaleResolutionDownBy:1,scale:0}},lL=async(e,t,i)=>await(async(e,t,i)=>{const n=function(e){const t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(e.slice(i,i+2),16));return Uint8Array.from(t)}(ay(\"\"+t+i)).slice(0,16),r=n.slice(0,12),o=await window.crypto.subtle.importKey(\"raw\",n,\"AES-GCM\",!0,[\"encrypt\"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:r},o,e))})(e.buffer,t,i),uL=e=>{const t=document.createElement(\"canvas\");return t.width=2,t.height=2,new Gh(((i,n)=>{t.toBlob((async e=>{if(t.remove(),e){const n=await hL(e);i({buffer:n,width:t.width,height:t.height})}else n(new iv(tv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},hL=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var pL,_L,EL,fL,mL,TL,SL,gL,RL,CL,IL,vL,yL,AL,bL,wL,OL,NL,DL,PL,LL,kL,ML,UL,xL,VL,FL,BL,jL,GL,WL,HL,KL,YL,qL,zL,JL,XL,QL,ZL;let $L=(pL=nA({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),_L=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),EL=$P(),fL=uy(\"LocalAudioTrack\",\"_enabledMutex\"),mL=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),TL=$P(),SL=uy(\"LocalAudioTrack\",\"_enabledMutex\"),gL=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),RL=$P(),CL=$P(),IL=$P(),vL=nA({argsMap:e=>[e.getTrackId()]}),yL=$P(),AL=nA({argsMap:e=>[e.getTrackId()]}),bL=$P(),wL=nA({argsMap:e=>[e.getTrackId()]}),OL=nA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),NL=nA({argsMap:e=>[e.getTrackId()]}),gP((DL=class extends yP{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?ZP.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return\"LocalAudioTrack\"}constructor(e,t,i,n){super(e,i),RP(this,\"trackMediaType\",oP.AUDIO),RP(this,\"_encoderConfig\",void 0),RP(this,\"_trackSource\",void 0),RP(this,\"_enabled\",!0),RP(this,\"_volume\",100),RP(this,\"_useAudioElement\",!0),RP(this,\"_bypassWebAudio\",!1),RP(this,\"processor\",void 0),RP(this,\"_processorContext\",void 0),RP(this,\"_processorDestination\",void 0),RP(this,\"_getOriginVolumeLevel\",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,this._trackSource=new rL,Oy(\"DISABLE_WEBAUDIO\")&&(this._bypassWebAudio=!0),Oy(\"LOCAL_AUDIO_TRACK_USES_WEB_AUDIO\")&&(this._useAudioElement=!1),NI()&&!bP?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){ov(e,\"volume\",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&ZP.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Jy.debug(\"[\".concat(this.getTrackId(),\"] setVolume returned because no pass through WebAudio.\"));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Lv(this,QD.NEED_REPLACE_TRACK,this).then((()=>{Jy.debug(\"[\".concat(this.getTrackId(),\"] replace web audio track success\"))})).catch((e=>{Jy.warning(\"[\".concat(this.getTrackId(),\"] replace web audio track failed\"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!kD())throw new iv(tv.NOT_SUPPORTED,\"your browser does not support setting the audio output device\");await ZP.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,i){return this._setEnabled(e,t,i)}async _setEnabled(e,t,i){if(!i){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Jy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),e){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Lv(this,QD.NEED_ENABLE_TRACK,this),Jy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to \").concat(e,\" success\"))}catch(e){throw i||(this._enabled=!1),Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to true error\"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Lv(this,QD.NEED_DISABLE_TRACK,this)}catch(e){throw i||(this._enabled=!0),Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to false error\"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck(\"muted\",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,Jy.debug(\"[\".concat(this.getTrackId(),\"] start set muted: \").concat(e)),e?await Lv(this,QD.NEED_MUTE_TRACK,this):await Lv(this,QD.NEED_UNMUTE_TRACK,this))}getStats(){Wv((()=>{Jy.warning(\"[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead\")}),\"localAudioTrackGetStatsWarning\");return kv(this,QD.GET_STATS)||IP({},aP)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(sP.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(sP.ON_AUDIO_BUFFER),this._source.on(sP.ON_AUDIO_BUFFER,(t=>e(t)))}play(){Jy.debug(\"[\".concat(this.getTrackId(),\"] start audio playback\")),this._useAudioElement?(Jy.debug(\"[\".concat(this.getTrackId(),\"] start audio playback in element\")),ZP.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){Jy.debug(\"[\".concat(this.getTrackId(),\"] stop audio playback\")),this._useAudioElement?ZP.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Jy.debug(\"[\".concat(this.getTrackId(),\"] update player source track\")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&ZP.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener(\"ended\",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener(\"ended\",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Lv(this,QD.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return Gh.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new iv(tv.INVALID_OPERATION,\"Can not process AudioTrack when bypassWebAudio set to true.\");if(this.processor===e)return e;if(e._source)throw new iv(tv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(hP.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await Lv(this,QD.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Lv(this,QD.NEED_REPLACE_TRACK,this))})),e.on(hP.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(hP.ON_TRACK),e.removeAllListeners(hP.ON_NODE)}bindProcessorContextEvents(e){e.on(pP.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(pP.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof rL&&(this._trackSource=new MP(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new nL(this._source.context,this.getTrackId(),\"local\"),t=new iL(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(sP.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(ZP.stop(this.getTrackId()),this._source.play()),Lv(this,QD.NEED_REPLACE_MIXING_TRACK,this).then((()=>{Jy.debug(\"[\".concat(this.getTrackId(),\"] replace from origin track to web audio track success\"))})).catch((e=>{Jy.warning(\"[\".concat(this.getTrackId(),\"] replace from origin track to web audio track failed\"),e)}))),{processorContext:e,processorDestination:t}}}).prototype,\"setVolume\",[pL],Object.getOwnPropertyDescriptor(DL.prototype,\"setVolume\"),DL.prototype),gP(DL.prototype,\"setPlaybackDevice\",[_L,EL],Object.getOwnPropertyDescriptor(DL.prototype,\"setPlaybackDevice\"),DL.prototype),gP(DL.prototype,\"setEnabled\",[fL,mL,TL],Object.getOwnPropertyDescriptor(DL.prototype,\"setEnabled\"),DL.prototype),gP(DL.prototype,\"setMuted\",[SL,gL,RL],Object.getOwnPropertyDescriptor(DL.prototype,\"setMuted\"),DL.prototype),gP(DL.prototype,\"getStats\",[CL],Object.getOwnPropertyDescriptor(DL.prototype,\"getStats\"),DL.prototype),gP(DL.prototype,\"setAudioFrameCallback\",[IL],Object.getOwnPropertyDescriptor(DL.prototype,\"setAudioFrameCallback\"),DL.prototype),gP(DL.prototype,\"play\",[vL,yL],Object.getOwnPropertyDescriptor(DL.prototype,\"play\"),DL.prototype),gP(DL.prototype,\"stop\",[AL,bL],Object.getOwnPropertyDescriptor(DL.prototype,\"stop\"),DL.prototype),gP(DL.prototype,\"close\",[wL],Object.getOwnPropertyDescriptor(DL.prototype,\"close\"),DL.prototype),gP(DL.prototype,\"pipe\",[OL],Object.getOwnPropertyDescriptor(DL.prototype,\"pipe\"),DL.prototype),gP(DL.prototype,\"unpipe\",[NL],Object.getOwnPropertyDescriptor(DL.prototype,\"unpipe\"),DL.prototype),DL),ek=(PL=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),LL=$P(),kL=uy(\"MicrophoneAudioTrack\",\"_enabledMutex\"),ML=nA({argsMap:(e,t,i)=>[e.getTrackId(),t,i]}),UL=$P(),xL=nA({argsMap:e=>[e.getTrackId()]}),gP((VL=class extends $L{get __className__(){return\"MicrophoneAudioTrack\"}constructor(e,t,i,n){super(e,t.encoderConfig?zD(t.encoderConfig):{},n,Oy(\"GET_VOLUME_OF_MUTED_AUDIO_TRACK\")),RP(this,\"_config\",void 0),RP(this,\"_deviceName\",\"default\"),RP(this,\"_constraints\",void 0),RP(this,\"_originalConstraints\",void 0),RP(this,\"_enabled\",!0),this._config=t,this._constraints=i,this._originalConstraints=i,this._deviceName=e.label,\"boolean\"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(GI()||WI())&&wP.bindInterruptDetectorTrack(this)}async setDevice(e){if(Jy.info(\"[\".concat(this.getTrackId(),\"] start set device to \").concat(e)),this._enabled)try{const t=await YP.getDeviceById(e),i={};i.audio=IP({},this._constraints),i.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await GP(i,this.getTrackId())}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDevice failed\"),e.toString()),n=await GP({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}else try{const t=await YP.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}Jy.info(\"[\".concat(this.getTrackId(),\"] set device to \").concat(e,\" success\"))}async setEnabled(e,t,i){if(t)return Jy.debug(\"[\".concat(this.getTrackId(),\"] setEnabled false (do not close microphone)\")),await super._setEnabled(e);if(!i){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Jy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),Oy(\"AUTO_RESET_AUDIO_ROUTE\")&&(LI()||KI())){const t=navigator.audioSession;t&&(e||(t.type=\"playback\"),t.type=\"auto\")}if(!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(n=this._source.clonedTrack)||void 0===n||n.stop(),i||(this._enabled=!1);try{await Lv(this,QD.NEED_DISABLE_TRACK,this)}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled false failed\"),e.toString()),e}return}const r=IP({},this._constraints),o=YP.searchDeviceIdByName(this._deviceName);o&&!r.deviceId&&(r.deviceId=o);try{i||(this._enabled=!0);const e=await GP({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Lv(this,QD.NEED_ENABLE_TRACK,this)}catch(e){throw i||(this._enabled=!1),Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled true failed\"),e.toString()),e}Jy.info(\"[\".concat(this.getTrackId(),\"] setEnabled success\"))}close(){super.close(),(GI()||WI())&&wP.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((LI()||KI())&&this._enabled&&!this._isClosed&&wP.duringInterruption){const e=async()=>{wP.off(UD.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Jy.debug(\"[\".concat(this.getTrackId(),\"] try capture microphone media device for interrupted iOS device.\")),await this.setEnabled(!1),await this.setEnabled(!0))};wP.on(UD.IOS_INTERRUPTION_END,e)}else Jy.debug(\"[\".concat(this.getTrackId(),\"] track ended\")),this.safeEmit(nP.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,i=YP.searchDeviceIdByName(this._deviceName);if(i&&!t.deviceId&&(t.deviceId=i),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await GP({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(pP.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,i)=>{try{const i=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(i),t()}catch(e){i(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(pP.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,\"setDevice\",[PL,LL],Object.getOwnPropertyDescriptor(VL.prototype,\"setDevice\"),VL.prototype),gP(VL.prototype,\"setEnabled\",[kL,ML,UL],Object.getOwnPropertyDescriptor(VL.prototype,\"setEnabled\"),VL.prototype),gP(VL.prototype,\"close\",[xL],Object.getOwnPropertyDescriptor(VL.prototype,\"close\"),VL.prototype),VL),tk=(FL=nA({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),BL=$P(),jL=nA({argsMap:e=>[e.getTrackId()]}),GL=$P(),WL=nA({argsMap:e=>[e.getTrackId()]}),HL=$P(),KL=nA({argsMap:e=>[e.getTrackId()]}),YL=$P(),qL=nA({argsMap:e=>[e.getTrackId()]}),zL=$P(),JL=nA({argsMap:e=>[e.getTrackId()]}),XL=nA({argsMap:e=>[e.getTrackId()]}),QL=$P(),gP((ZL=class extends $L{get __className__(){return\"BufferSourceAudioTrack\"}constructor(e,t,i,n){super(t.createOutputTrack(),i,n),RP(this,\"source\",void 0),RP(this,\"_bufferSource\",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(sP.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(nP.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){ov(e,\"speed\",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,\"startProcessAudioBuffer\",[FL,BL],Object.getOwnPropertyDescriptor(ZL.prototype,\"startProcessAudioBuffer\"),ZL.prototype),gP(ZL.prototype,\"pauseProcessAudioBuffer\",[jL,GL],Object.getOwnPropertyDescriptor(ZL.prototype,\"pauseProcessAudioBuffer\"),ZL.prototype),gP(ZL.prototype,\"seekAudioBuffer\",[WL,HL],Object.getOwnPropertyDescriptor(ZL.prototype,\"seekAudioBuffer\"),ZL.prototype),gP(ZL.prototype,\"resumeProcessAudioBuffer\",[KL,YL],Object.getOwnPropertyDescriptor(ZL.prototype,\"resumeProcessAudioBuffer\"),ZL.prototype),gP(ZL.prototype,\"stopProcessAudioBuffer\",[qL,zL],Object.getOwnPropertyDescriptor(ZL.prototype,\"stopProcessAudioBuffer\"),ZL.prototype),gP(ZL.prototype,\"close\",[JL],Object.getOwnPropertyDescriptor(ZL.prototype,\"close\"),ZL.prototype),gP(ZL.prototype,\"setAudioBufferPlaybackSpeed\",[XL,QL],Object.getOwnPropertyDescriptor(ZL.prototype,\"setAudioBufferPlaybackSpeed\"),ZL.prototype),ZL);class ik extends $L{get __className__(){return\"MixingAudioTrack\"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=OP().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,Zv(8,\"track-mix-\")),RP(this,\"trackList\",void 0),RP(this,\"destNode\",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(Jy.debug(\"add \".concat(e.getTrackId(),\" to mixing track\")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Jy.debug(\"track \".concat(e.getTrackId(),\" is already added\"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){Jy.debug(\"remove \".concat(e.getTrackId(),\" from mixing track\"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}xv(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof ik?t.emit(iP.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}class nk extends kP{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(sP.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),RP(this,\"audioBuffer\",void 0),RP(this,\"sourceNode\",void 0),RP(this,\"startPlayTime\",0),RP(this,\"startPlayOffset\",0),RP(this,\"pausePlayTime\",0),RP(this,\"options\",void 0),RP(this,\"currentLoopCount\",0),RP(this,\"currentPlaybackSpeed\",100),RP(this,\"_currentState\",\"stopped\"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?\"stopped\"===this.currentState?0:\"paused\"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){\"stopped\"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Jy.warning(\"can not set audio source options\")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState=\"playing\"}pauseProcessAudioBuffer(){this.sourceNode&&\"playing\"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState=\"paused\")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,\"playing\"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),\"playing\"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):\"paused\"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){\"paused\"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState=\"playing\")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&(\"playing\"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState=\"stopped\",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const rk=new Map;class ok{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(Jy.debug(\"[\".concat(this.trackId,\"] video-element-status change \").concat(this._videoElementStatus,\" => \").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){RP(this,\"trackId\",void 0),RP(this,\"config\",void 0),RP(this,\"onFirstVideoFrameDecoded\",void 0),RP(this,\"onVideoStateChanged\",void 0),RP(this,\"freezeTimeCounterList\",[]),RP(this,\"renderFreezeAccTime\",0),RP(this,\"isKeepLastFrame\",!1),RP(this,\"timeUpdatedCount\",0),RP(this,\"freezeTime\",0),RP(this,\"playbackTime\",0),RP(this,\"lastTimeUpdatedTime\",0),RP(this,\"autoplayFailed\",!1),RP(this,\"videoTrack\",void 0),RP(this,\"videoElement\",void 0),RP(this,\"cacheVideoElement\",void 0),RP(this,\"renderStats\",void 0),RP(this,\"_videoState\",mP.VideoStateStopped),RP(this,\"videoElementCheckInterval\",void 0),RP(this,\"videoElementFreezeTimeout\",void 0),RP(this,\"_videoElementStatus\",fP.NONE),RP(this,\"isGettingVideoDimensions\",!1),RP(this,\"startGetVideoDimensions\",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return Jy.debug(\"[\".concat(this.trackId,\"] current video dimensions:\"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),RP(this,\"autoResumeAfterInterruption\",(()=>{this.videoTrack&&\"live\"===this.videoTrack.readyState&&\"running\"===wP.curState&&(Jy.debug(\"[track-\".concat(this.trackId,\"] video element paused, auto resume for \").concat(bI())),HI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),RP(this,\"handleVideoEvents\",(e=>{switch(e.type){case\"play\":case\"playing\":this.startGetVideoDimensions(),this.videoElementStatus=fP.PLAYING;break;case\"loadeddata\":if(this.videoState=mP.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case\"canplay\":this.videoElementStatus=fP.CANPLAY;break;case\"stalled\":this.videoElementStatus=fP.STALLED;break;case\"suspend\":this.videoElementStatus=fP.SUSPEND;break;case\"pause\":this.videoElementStatus=fP.PAUSED,LI()||KI()||NI()&&this.autoplayFailed||!this.videoTrack||\"live\"!==this.videoTrack.readyState||(Jy.debug(\"[track-\".concat(this.trackId,\"] video element paused, auto resume\")),this.videoElement.play());break;case\"waiting\":this.videoElementStatus=fP.WAITING;break;case\"abort\":this.videoElementStatus=fP.ABORT;break;case\"ended\":this.videoElementStatus=fP.ENDED;break;case\"emptied\":this.videoElementStatus=fP.EMPTIED;break;case\"error\":{const e=this.videoElement.error;e?(this.videoElementStatus=fP.ERROR,Jy.error(\"[\".concat(this.trackId,\"] media error: \").concat(e.message,\" (\").concat(e.code,\")\"))):Jy.debug(\"[\".concat(this.trackId,\"] media not been an error.\"));break}case\"timeupdate\":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,sM.lastVisibleTime<sM.lastHiddenTime||i<sM.lastHiddenTime||i<sM.lastVisibleTime)return;for(t>Oy(\"VIDEO_FREEZE_DURATION\")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),RP(this,\"autoResumeAfterInterruptionOnIOS15_16\",(()=>{this.videoTrack&&\"live\"===this.videoTrack.readyState&&(Jy.debug(\"[track-\".concat(this.trackId,\"] video element paused, auto resume for \").concat(bI())),HI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement(\"video\"),wP.on(UD.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),wP.on(UD.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&XP(e,\"video\",t.message,this.trackId),\"NotAllowedError\"===t.name?(Jy.warning(\"detected video element autoplay failed\",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):Jy.warning(\"[\".concat(this.trackId,\"] play warning: \"),t)}));const i=vI();if((\"Safari\"===i.name&&15===Number(i.version)||GI())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform=\"rotateY(180deg)\")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement(\"canvas\");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext(\"2d\");if(!t)return Jy.error(\"create canvas context failed!\"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const i=t.getImageData(0,0,e.width,e.height);return e.remove(),i}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.createElement(\"canvas\");i.width=this.videoElement.videoWidth,i.height=this.videoElement.videoHeight;const n=i.getContext(\"2d\");return n?(n.drawImage(this.videoElement,0,0,i.width,i.height),new Gh(((n,r)=>{i.toBlob((async e=>{if(i.remove(),e){const t=await hL(e);n({buffer:t,width:i.width,height:i.height})}else r(new iv(tv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await uL(e)}destroy(){this.renderStats=void 0,wP.off(UD.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),wP.off(UD.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=mP.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=fP.INIT,!this.videoElementCheckInterval&&(sk.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=fP.DESTROYED)}),1e3),Oy(\"ENABLE_VIDEO_FRAME_CALLBACK\"))){var e,t;let i;const n=()=>{\"visible\"===document.visibilityState&&(document.removeEventListener(\"visibilitychange\",n),this.videoElementFreezeTimeout=window.setTimeout(r,Oy(\"VIDEO_FREEZE_DURATION\")))},r=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===mP.VideoStateDecoding&&(\"visible\"===document.visibilityState?this.videoState=mP.VideoStateFrozen:document.addEventListener(\"visibilitychange\",n))},o=(e,t)=>{if(this.videoElementStatus===fP.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=t.mediaTime):this.renderStats={lastTs:t.mediaTime,curTs:t.mediaTime,lastRenderNum:0,renderNum:0},i){const e=t.presentationTime-i.presentationTime;this.videoState===mP.VideoStateStarting&&(this.videoState=mP.VideoStateDecoding),this.videoState===mP.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(r,Oy(\"VIDEO_FREEZE_DURATION\"))),e<Oy(\"VIDEO_FREEZE_DURATION\")&&this.videoState===mP.VideoStateFrozen&&(this.videoState=mP.VideoStateDecoding),e>Oy(\"VIDEO_FREEZE_DURATION\")&&sM.lastVisibleTime>=sM.lastHiddenTime&&i.timestamp>sM.lastVisibleTime&&i.timestamp>sM.lastHiddenTime&&(this.renderFreezeAccTime+=e)}i=IP(IP({},t),{},{timestamp:e})}var n,s;Oy(\"ENABLE_VIDEO_FRAME_CALLBACK\")&&(null===(n=(s=this.videoElement).requestVideoFrameCallback)||void 0===n||n.call(s,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute(\"playsinline\",\"\"),XI()&&!Oy(\"HIDE_NO_POSTER\")&&(this.videoElement.poster=\"noposter\");const i=vI();\"Safari\"===i.name&&15===Number(i.version)||GI()||!this.config.mirror||(this.videoElement.style.transform=\"rotateY(180deg)\"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit=\"cover\",this.videoElement.setAttribute(\"muted\",\"\"),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,PI()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,PI()&&this.videoElement.load());const n=this.videoElement.play();void 0!==n&&n.catch((e=>{Jy.debug(\"[\".concat(this.trackId,\"] playback interrupted\"),e.toString())}))}resetVideoElement(){sk.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=fP.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{Jy.debug(\"[\".concat(this.trackId,\"] Video element for trackId:\").concat(this.trackId,\" autoplay resumed.\"))})).catch((e=>{Jy.error(e)})),this.autoplayFailed=!1,QI()?document.body.removeEventListener(\"click\",e,!0):(document.body.removeEventListener(\"touchstart\",e,!0),document.body.removeEventListener(\"mousedown\",e,!0))};QI()?document.body.addEventListener(\"click\",e,!0):(document.body.addEventListener(\"touchstart\",e,!0),document.body.addEventListener(\"mousedown\",e,!0)),JP()}}const sk=[\"play\",\"playing\",\"loadeddata\",\"canplay\",\"pause\",\"stalled\",\"suspend\",\"waiting\",\"abort\",\"emptied\",\"ended\",\"timeupdate\",\"error\"];class ak extends ok{constructor(e){super(e),RP(this,\"container\",void 0),RP(this,\"slot\",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,i):await uL(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement(\"video\"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement(\"div\")),this.container.id=\"agora-video-player-\".concat(this.trackId),this.container.style.width=\"100%\",this.container.style.height=\"100%\",this.container.style.position=\"relative\",this.container.style.overflow=\"hidden\",this.videoTrack?(this.container.style.backgroundColor=\"black\",Oy(\"KEEP_LAST_FRAME\")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id=\"video_\".concat(this.trackId),this.videoElement.className=\"agora_video_player\",this.videoElement.style.width=\"100%\",this.videoElement.style.height=\"100%\",this.videoElement.style.position=\"absolute\",this.videoElement.style.left=\"0\",this.videoElement.style.top=\"0\"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement(\"video\")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement(\"video\"))}getContainerElement(){return this.container}}var ck,dk,lk,uk,hk,pk,_k,Ek,fk,mk,Tk,Sk,gk,Rk,Ck,Ik,vk,yk,Ak,bk,wk,Ok,Nk,Dk,Pk,Lk,kk,Mk,Uk,xk,Vk,Fk,Bk,jk;let Gk=(ck=nA({argsMap:(e,t,i)=>[e.getTrackId(),\"string\"==typeof t?t:t instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\",i]}),dk=$P(),lk=nA({argsMap:e=>[e.getTrackId()]}),uk=uy(\"LocalVideoTrack\",\"_enabledMutex\"),hk=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),pk=$P(),_k=uy(\"LocalVideoTrack\",\"_enabledMutex\"),Ek=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),fk=$P(),mk=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),Tk=$P(),Sk=$P(),gk=nA({argsMap:(e,t,i)=>[e.getTrackId(),t,i]}),Rk=$P(),Ck=$P(),Ik=$P(),vk=$P(),yk=$P(),Ak=$P(),bk=$P(),wk=nA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Ok=nA({argsMap:e=>[e.getTrackId()]}),Nk=nA({argsMap:e=>[e.getTrackId()]}),Dk=nA({argsMap:(e,t,i)=>[e.getTrackId(),t.label,i]}),Pk=class e extends yP{get videoHeight(){if(NI()){const{height:e}=this._mediaStreamTrack.getSettings();return this._videoHeight=e,this._videoHeight}return this._videoHeight}get videoWidth(){if(NI()){const{width:e}=this._mediaStreamTrack.getSettings();return this._videoWidth=e,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==fP.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return\"LocalVideoTrack\"}constructor(e,t,i,n,r,o){if(super(e,r),RP(this,\"trackMediaType\",oP.VIDEO),RP(this,\"_player\",void 0),RP(this,\"isUseScaleResolutionDownBy\",!1),RP(this,\"_videoVisibleTimer\",null),RP(this,\"_previousVideoVisibleStatus\",void 0),RP(this,\"_clearPreviousVideoVisibleStatus\",(()=>this._previousVideoVisibleStatus=void 0)),RP(this,\"_encoderConfig\",void 0),RP(this,\"_scalabilityMode\",{numSpatialLayers:1,numTemporalLayers:1}),RP(this,\"_optimizationMode\",void 0),RP(this,\"_videoHeight\",void 0),RP(this,\"_videoWidth\",void 0),RP(this,\"_forceBitrateLimit\",void 0),RP(this,\"_enabled\",!0),RP(this,\"_processorDestination\",void 0),RP(this,\"_processorContext\",void 0),NI()){const{width:t,height:i}=e.getSettings();this._videoWidth=t,this._videoHeight=i}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=i,this._optimizationMode=n,this._hints=o||[],-1===this._hints.indexOf(ZD.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t,i){const n=vI();return!(n.name!==e||!n.osVersion)&&(i?Number(n.version)>=t&&Number(n.version)<=i:Number(n.version)===t)}(gI.CHROME,115)&&-1!==AI().indexOf(\"Windows\")){const t=function(e,t){if(\"VideoFrame\"in window&&\"TransformStream\"in window&&LD().supportWebRTCInsertableStream){const i=new MediaStreamTrackProcessor(e),n=new MediaStreamTrackGenerator({kind:\"video\"});let r,o,s=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),r&&(r.close(),r=void 0),e.stop(),o=void 0,n.removeEventListener(\"ended\",a)};let c=window.setInterval((()=>{if(o&&r&&Date.now()-s>(null!=t?t:1e3))try{\"live\"===n.readyState?o.enqueue(r.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const d=new TransformStream({transform:(e,t)=>{\"live\"===n.readyState?(o=t,s=Date.now(),void 0===r?(r=e,t.enqueue(e.clone())):(t.enqueue(r),r=e)):e.close()}});return n.addEventListener(\"ended\",a),i.readable.pipeThrough(d).pipeTo(n.writable),n}}(e);t&&(Jy.info(\"local screen video track begin to inject frame\"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(ZD.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new tL(this.getTrackId(),\"local\"),this._processorDestination=new eL(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"string\"==typeof e){const t=document.getElementById(e);t?e=t:(Jy.warning(\"[\".concat(this.getTrackId(),'] can not find \"#').concat(e,'\" element, use document.body')),e=document.body)}Jy.debug(\"[\".concat(this.getTrackId(),\"] start video playback in \").concat(e instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\"),JSON.stringify(t));const i=IP(IP(IP({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new ok(i):this._player=new ak(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(nP.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),Oy(\"CHECK_VIDEO_VISIBLE_INTERVAL\"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Jy.debug(\"[\".concat(this.getTrackId(),\"] stop video playback\")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Jy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Lv(this,QD.NEED_DISABLE_TRACK,this)}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to false error\"),e.toString()),e}return t||(this._enabled=!1),void Jy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to false success\"))}this._originMediaStreamTrack.enabled=!0;try{await Lv(this,QD.NEED_ENABLE_TRACK,this)}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to true error\"),e.toString()),e}Jy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to true success\")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck(\"muted\",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,Jy.debug(\"[\".concat(this.getTrackId(),\"] start set muted: \").concat(e)),e?await Lv(this,QD.NEED_MUTE_TRACK,this):await Lv(this,QD.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new iv(tv.TRACK_IS_DISABLED,\"can not set encoder configuration when track is disabled\");if(e=HD(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=aL({encoderConfig:e});(NI()||LI()||KI())&&(t.deviceId=void 0),Jy.debug(\"[\".concat(this.getTrackId(),\"] setEncoderConfiguration applyConstraints\"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new iv(tv.UNEXPECTED_ERROR,e.toString());throw Jy.error(\"[\".concat(this.getTrackId(),\"] applyConstraints error\"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(ZD.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Lv(this,QD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Jy)}}getStats(){Wv((()=>{Jy.warning(\"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead\")}),\"localVideoTrackGetStatsWarning\");return kv(this,QD.GET_STATS)||IP({},cP)}async setBeautyEffect(e){Jy.error(\"LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect\")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await uL(e)}async setBitrateLimit(e){if(Jy.debug(\"[\".concat(this.getTrackId(),\"] set bitrate limit, \").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Lv(this,QD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Jy)}}}async setOptimizationMode(e){if(\"motion\"!==e&&\"detail\"!==e&&\"balanced\"!==e)return void Jy.error(tv.INVALID_PARAMS,\"optimization mode must be motion, detail or balanced\");const t=this._optimizationMode;try{this._optimizationMode=e,await Lv(this,QD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(e){throw this._optimizationMode=t,Jy.error(\"[\".concat(this.getTrackId(),\"] set optimization mode failed\"),e.toString()),e}Jy.info(\"[\".concat(this.getTrackId(),\"] set optimization mode success (\").concat(e,\")\"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Jy.error(tv.INVALID_PARAMS,\"scalability mode currently not supported, no SVC.\"),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,Jy.info(\"[\".concat(this.getTrackId(),\"] set scalability mode success (\").concat(e,\")\"))}updateMediaStreamTrackResolution(){sL(this._originMediaStreamTrack).then((e=>{let[t,i]=e;this._videoHeight=i,this._videoWidth=t})).catch(ey)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:\"contain\"}}async setSenderConfiguration(e){if(!this._enabled)throw new iv(tv.TRACK_IS_DISABLED,\"can not set encoder configuration when track is disabled\");Jy.debug(\"[\".concat(this.getTrackId(),\"] setSenderConfiguration applyConstraints\"),JSON.stringify(e)),e=HD(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(ZD.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Lv(this,QD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Jy)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:i}=this.getMediaStreamTrackSettings();if(!e||!t||!i)return;const{bitrateMax:n,bitrateMin:r}=this._encoderConfig;if(null==r||null==n){const{max:o,min:s}=function(e,t,i,n,r){const o=Oy(\"BITRATE_ADAPTER_TYPE\");if(\"DEFAULT_BITRATE\"===o)return{min:n,max:r};if(void 0===r){var s;const a=Math.floor(200*Math.pow(i/15,.6)*Math.pow(e*t/640/360,.75));r=\"STANDARD_BITRATE\"===o?4*a:2*a,n=null!==(s=n)&&void 0!==s?s:a}else{var a;n=null!==(a=n)&&void 0!==a?a:Math.floor(r/10)}return{min:n,max:r}}(e,t,i,r,n);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,Jy.debug(\"[\".concat(this.getTrackId(),\"] update bitrate from profile, [w: \").concat(e,\", h: \").concat(t,\", fps: \").concat(i,\"] => [brMax: \").concat(o,\", brMin: \").concat(s,\"]\"))}}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=pv.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess(\"Video is visible\"):e.onSuccess(\"Invisible because of \".concat(t.reason))}return t}return}catch(e){throw new iv(tv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new iv(tv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;t&&(n=IP(IP({},n),HD(t))),n=jv(n);const r=Zv(8,\"track-video-cloned-\"),o=new e(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,jv(this._scalabilityMode),this._optimizationMode,r,jv(this._hints));return t&&n&&o.setEncoderConfiguration(n),Jy.debug(\"clone video track from \".concat(this.getTrackId(),\" to \").concat(r,\", clone \").concat(i)),o}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new iv(tv.INVALID_PARAMS,\"track should be an instance of MediaStreamTrack\");if(\"video\"!==e.kind)throw new iv(tv.INVALID_PARAMS,\"track should be a video MediaStreamTrack\");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}sendSeiData(e){if(Wv((()=>{rA.reportApiInvoke(null,{name:gv.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Rv.TRACER}).onSuccess(\"\")}),this._mediaStreamTrack.id||this.getTrackId()),!Oy(\"ENABLE_VIDEO_SEI\")||!Oy(\"ENABLE_ENCODED_TRANSFORM\"))return void Jy.warning('To send/receive SEI, please call AgoraRTC.setParameter(\"ENABLE_VIDEO_SEI\", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new iv(tv.INVALID_PARAMS,\"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.\").throw();const t=this.getRTCRtpTransceiver();if(!t)return void Jy.warning(\"Video track is not published, SEI can not be send\");const i=t.sender.getParameters();if(0===i.codecs.length)return;const n=i.codecs[0].mimeType.toLocaleLowerCase();\"video/h264\"===n?this.safeEmit(\"sei-to-send\",e):Jy.warning(\"SEI is not supported by \".concat(n))}bindProcessorDestinationEvents(){this.processorDestination.on(hP.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await Lv(this,QD.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Lv(this,QD.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(hP.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(pP.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(pP.REQUEST_CONSTRAINTS)}},gP(Pk.prototype,\"play\",[ck,dk],Object.getOwnPropertyDescriptor(Pk.prototype,\"play\"),Pk.prototype),gP(Pk.prototype,\"stop\",[lk],Object.getOwnPropertyDescriptor(Pk.prototype,\"stop\"),Pk.prototype),gP(Pk.prototype,\"setEnabled\",[uk,hk,pk],Object.getOwnPropertyDescriptor(Pk.prototype,\"setEnabled\"),Pk.prototype),gP(Pk.prototype,\"setMuted\",[_k,Ek,fk],Object.getOwnPropertyDescriptor(Pk.prototype,\"setMuted\"),Pk.prototype),gP(Pk.prototype,\"setEncoderConfiguration\",[mk,Tk],Object.getOwnPropertyDescriptor(Pk.prototype,\"setEncoderConfiguration\"),Pk.prototype),gP(Pk.prototype,\"getStats\",[Sk],Object.getOwnPropertyDescriptor(Pk.prototype,\"getStats\"),Pk.prototype),gP(Pk.prototype,\"setBeautyEffect\",[gk,Rk],Object.getOwnPropertyDescriptor(Pk.prototype,\"setBeautyEffect\"),Pk.prototype),gP(Pk.prototype,\"getCurrentFrameData\",[Ck],Object.getOwnPropertyDescriptor(Pk.prototype,\"getCurrentFrameData\"),Pk.prototype),gP(Pk.prototype,\"getCurrentFrameImage\",[Ik],Object.getOwnPropertyDescriptor(Pk.prototype,\"getCurrentFrameImage\"),Pk.prototype),gP(Pk.prototype,\"setBitrateLimit\",[vk],Object.getOwnPropertyDescriptor(Pk.prototype,\"setBitrateLimit\"),Pk.prototype),gP(Pk.prototype,\"setOptimizationMode\",[yk],Object.getOwnPropertyDescriptor(Pk.prototype,\"setOptimizationMode\"),Pk.prototype),gP(Pk.prototype,\"setScalabiltyMode\",[Ak],Object.getOwnPropertyDescriptor(Pk.prototype,\"setScalabiltyMode\"),Pk.prototype),gP(Pk.prototype,\"updateMediaStreamTrackResolution\",[bk],Object.getOwnPropertyDescriptor(Pk.prototype,\"updateMediaStreamTrackResolution\"),Pk.prototype),gP(Pk.prototype,\"pipe\",[wk],Object.getOwnPropertyDescriptor(Pk.prototype,\"pipe\"),Pk.prototype),gP(Pk.prototype,\"unpipe\",[Ok],Object.getOwnPropertyDescriptor(Pk.prototype,\"unpipe\"),Pk.prototype),gP(Pk.prototype,\"close\",[Nk],Object.getOwnPropertyDescriptor(Pk.prototype,\"close\"),Pk.prototype),gP(Pk.prototype,\"replaceTrack\",[Dk],Object.getOwnPropertyDescriptor(Pk.prototype,\"replaceTrack\"),Pk.prototype),Pk),Wk=(Lk=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),kk=$P(),Mk=uy(\"CameraVideoTrack\",\"_enabledMutex\"),Uk=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),xk=$P(),Vk=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),Fk=$P(),Bk=nA({argsMap:e=>[e.getTrackId()]}),jk=class e extends Gk{get __className__(){return\"CameraVideoTrack\"}constructor(e,t,i,n,r,o){super(e,HD(t.encoderConfig),n,r,o),RP(this,\"_config\",void 0),RP(this,\"_originalConstraints\",void 0),RP(this,\"_constraints\",void 0),RP(this,\"_enabled\",!0),RP(this,\"_deviceName\",\"default\"),RP(this,\"tryResumeVideoForIOS15_16WeChat\",(async()=>{(GI()||WI())&&!function(){const e=vI();if(e.os!==SI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 15===Number(t[0])&&Number(t[1])>=2}()&&YI()&&this._enabled&&!this._isClosed&&(Jy.debug(\"[\".concat(this.getTrackId(),\"] try capture camera media device for interrupted iOS 15 device on WeChat.\")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=i,this._constraints=i,this._deviceName=e.label,this._encoderConfig=HD(this._config.encoderConfig),wP.on(UD.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),wP.on(UD.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return\"string\"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(Jy.info(\"[\".concat(this.getTrackId(),\"] set device to \").concat(e)),this._enabled)try{const t=await YP.getDeviceById(e),i={};i.video=IP({},this._constraints),i.video.deviceId={exact:e},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let n=null;try{n=await GP(i,this.getTrackId())}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDevice failed\"),e.toString()),n=await GP({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}else try{const t=await YP.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}Jy.info(\"[\".concat(this.getTrackId(),\"] setDevice success\"))}async _setDeviceByFacingModel(e){Jy.info(\"[\".concat(this.getTrackId(),\"] set facingMode \").concat(e));const t={video:IP(IP({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await GP(t,this.getTrackId())}catch(t){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setDeviceByFacingModel failed\"),t.toString()),e=await GP({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName=\"\",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=IP({},t.video),Jy.info(\"[\".concat(this.getTrackId(),\"] setDeviceByFacingModel success\"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Jy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await GP({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await Lv(this,QD.NEED_ENABLE_TRACK,this)}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled true error\"),e.toString()),e}this.updateMediaStreamTrackResolution(),Jy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to true success\")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await Lv(this,QD.NEED_DISABLE_TRACK,this)}catch(e){throw Jy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to false error\"),e.toString()),e}Jy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to false success\"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new iv(tv.TRACK_IS_DISABLED,\"can not set encoder configuration when track is disabled\");e=HD(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate||e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate||e.bitrateMin);const i=Bv(this._config);i.encoderConfig=e;const n=aL(i);(NI()||LI()||KI())&&(n.deviceId=void 0),Jy.debug(\"[\".concat(this.getTrackId(),\"] setEncoderConfiguration applyConstraints\"),JSON.stringify(e),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(e){const t=new iv(tv.UNEXPECTED_ERROR,e.toString());throw Jy.error(\"[\".concat(this.getTrackId(),\"] applyConstraints error\"),t.toString()),t}this._config=i,this._constraints=n,this._originalConstraints=n,this._encoderConfig=e,-1===this._hints.indexOf(ZD.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Lv(this,QD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Jy)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:\"cover\"}}onTrackEnded(){if((LI()||KI())&&this._enabled&&!this._isClosed&&wP.duringInterruption){const e=async()=>{wP.off(UD.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Jy.debug(\"[\".concat(this.getTrackId(),\"] try capture camera media device for interrupted iOS device.\")),await this.setEnabled(!1),await this.setEnabled(!0))};wP.on(UD.IOS_INTERRUPTION_END,e)}else Jy.debug(\"[\".concat(this.getTrackId(),\"] track ended\")),this.safeEmit(nP.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,i=YP.searchDeviceIdByName(this._deviceName);if(i&&!t.deviceId&&(t.deviceId={exact:i}),this._enabled){const e=await GP({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),wP.off(UD.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),wP.off(UD.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;t&&(n=IP(IP({},n),HD(t))),n=jv(n);const r=Zv(8,\"track-cam-cloned-\"),o=new e(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,jv(IP(IP({},this._config),{},{encoderConfig:n})),jv(this._constraints),jv(this._scalabilityMode),this._optimizationMode,r);return t&&n&&o.setEncoderConfiguration(n),Jy.debug(\"clone track from \".concat(this.getTrackId(),\" to \").concat(r,\", clone \").concat(i)),o}bindProcessorContextEvents(){this.processorContext.on(pP.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,i)=>{try{const i=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(i),t()}catch(e){i(e)}})),this.processorContext.on(pP.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}},gP(jk.prototype,\"setDevice\",[Lk,kk],Object.getOwnPropertyDescriptor(jk.prototype,\"setDevice\"),jk.prototype),gP(jk.prototype,\"setEnabled\",[Mk,Uk,xk],Object.getOwnPropertyDescriptor(jk.prototype,\"setEnabled\"),jk.prototype),gP(jk.prototype,\"setEncoderConfiguration\",[Vk,Fk],Object.getOwnPropertyDescriptor(jk.prototype,\"setEncoderConfiguration\"),jk.prototype),gP(jk.prototype,\"close\",[Bk],Object.getOwnPropertyDescriptor(jk.prototype,\"close\"),jk.prototype),jk);function Hk(e,t,i,n){i.optimizationMode&&(n&&n.width&&n.height?(i.encoderConfig=IP(IP({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),\"motion\"!==i.optimizationMode&&\"detail\"!==i.optimizationMode||(t.contentHint=i.optimizationMode,t.contentHint===i.optimizationMode?Jy.debug(\"[\".concat(e,\"] set content hint to\"),i.optimizationMode):Jy.debug(\"[\".concat(e,\"] set content hint failed\")))):Jy.warning(\"[\".concat(e,\"] can not apply optimization mode bitrate config, no encoderConfig\")))}var Kk,Yk,qk,zk,Jk,Xk,Qk,Zk,$k,eM,tM,iM;class nM extends vP{getUserId(){return this._userId}constructor(e,t,i,n){super(e,\"track-\".concat(e.kind,\"-\").concat(t,\"-\").concat(n.clientId,\"_\").concat(Zv(5,\"\"))),RP(this,\"_userId\",void 0),RP(this,\"_uintId\",void 0),RP(this,\"_isDestroyed\",!1),RP(this,\"store\",void 0),RP(this,\"processor\",void 0),RP(this,\"processorContext\",void 0),this._userId=t,this._uintId=i,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,Jy.info(\"[\".concat(this.getTrackId(),\"] is destroyed\")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let rM=(Kk=nA({argsMap:(e,t,i)=>[e.getTrackId(),\"string\"==typeof t?t:t instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\",i]}),Yk=nA({argsMap:e=>[e.getTrackId()]}),qk=nA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),zk=nA({argsMap:e=>[e.getTrackId()]}),gP((Jk=class extends nM{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==fP.PLAYING)}get __className__(){return\"RemoteVideoTrack\"}constructor(e,t,i,n){super(e,t,i,n),RP(this,\"_videoVisibleTimer\",null),RP(this,\"_previousVideoVisibleStatus\",void 0),RP(this,\"_clearPreviousVideoVisibleStatus\",(()=>this._previousVideoVisibleStatus=void 0)),RP(this,\"trackMediaType\",oP.VIDEO),RP(this,\"_videoWidth\",void 0),RP(this,\"_videoHeight\",void 0),RP(this,\"_player\",void 0),RP(this,\"processorDestination\",void 0),RP(this,\"processorContext\",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new tL(this.getTrackId(),\"remote\"),this.processorDestination=new eL(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Wv((()=>{Jy.warning(\"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead\")}),\"remoteVideoTrackGetStatsWarning\"),kv(this,QD.GET_STATS)||IP({},uP)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"string\"==typeof e){const t=document.getElementById(e);t?e=t:(Jy.warning(\"[\".concat(this.getTrackId(),'] can not find \"#').concat(e,'\" element, use document.body')),e=document.body)}Jy.debug(\"[\".concat(this.getTrackId(),\"] start video playback in \").concat(e instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\"),JSON.stringify(t));const i=IP(IP({fit:\"cover\"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new ok(i):this._player=new ak(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),\"video\",void 0,void 0,Date.now()),this.safeEmit(rP.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(rP.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(rP.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),Oy(\"CHECK_VIDEO_VISIBLE_INTERVAL\"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Jy.debug(\"[\".concat(this.getTrackId(),\"] stop video playback\")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){sL(this._originMediaStreamTrack).then((e=>{let[t,i]=e;this._videoHeight=i,this._videoWidth=t})).catch(ey)}_updatePlayerSource(){Jy.debug(\"[\".concat(this.getTrackId(),\"] update player source track\")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=pv.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess(\"Video is visible\"):e.onSuccess(\"Invisible because of \".concat(t.reason))}return t}return}catch(e){throw new iv(tv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new iv(tv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(hP.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(hP.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(iP.SEI_RECEIVED,e)}}).prototype,\"play\",[Kk],Object.getOwnPropertyDescriptor(Jk.prototype,\"play\"),Jk.prototype),gP(Jk.prototype,\"stop\",[Yk],Object.getOwnPropertyDescriptor(Jk.prototype,\"stop\"),Jk.prototype),gP(Jk.prototype,\"pipe\",[qk],Object.getOwnPropertyDescriptor(Jk.prototype,\"pipe\"),Jk.prototype),gP(Jk.prototype,\"unpipe\",[zk],Object.getOwnPropertyDescriptor(Jk.prototype,\"unpipe\"),Jk.prototype),Jk),oM=(Xk=nA({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),Qk=nA({argsMap:(e,t)=>[e.getTrackId(),t]}),Zk=nA({argsMap:e=>[e.getTrackId()]}),$k=nA({argsMap:e=>[e.getTrackId()]}),eM=nA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),tM=nA({argsMap:e=>[e.getTrackId()]}),gP((iM=class extends nM{get isPlaying(){return this._useAudioElement?ZP.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return\"RemoteAudioTrack\"}constructor(e,t,i,n){super(e,t,i,n),RP(this,\"trackMediaType\",oP.AUDIO),RP(this,\"_source\",void 0),RP(this,\"_useAudioElement\",!0),RP(this,\"_volume\",100),RP(this,\"processorContext\",void 0),RP(this,\"processorDestination\",void 0),RP(this,\"_played\",!1),RP(this,\"_bypassWebAudio\",!1),Oy(\"DISABLE_WEBAUDIO\")?(this._source=new rL,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new MP(e,!0),Oy(\"REMOTE_AUDIO_TRACK_USES_WEB_AUDIO\")&&(this._useAudioElement=!1)),this._source.once(sP.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(rP.FIRST_FRAME_DECODED)})),this.processorContext=new nL(this._source.context,this.getTrackId(),\"remote\"),this.processorDestination=new iL(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(sP.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(sP.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(sP.ON_AUDIO_BUFFER),this._source.on(sP.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?ZP.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!kD())throw new iv(tv.NOT_SUPPORTED,\"your browser does not support setting the audio output device\");await ZP.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Wv((()=>{Jy.warning(\"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead\")}),\"remoteAudioTrackGetStatsWarning\"),kv(this,QD.GET_STATS)||IP({},dP)}play(){Jy.debug(\"[\".concat(this.getTrackId(),\"] start audio playback\")),this._played=!0,this._useAudioElement?(Jy.debug(\"[\".concat(this.getTrackId(),\"] use audio element to play\")),ZP.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){Jy.debug(\"[\".concat(this.getTrackId(),\"] stop audio playback\")),this._played=!1,this._useAudioElement?ZP.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Jy.debug(\"[\".concat(this.getTrackId(),\"] update player source track\")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&ZP.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new iv(tv.NOT_SUPPORTED,\"can not pipe extension when WebAudio disabled\");if(this.processor===e)return e;if(e._source)throw new iv(tv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new iv(tv.NOT_SUPPORTED,\"can not unpipe extension when WebAudio disabled\");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(hP.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(hP.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(hP.ON_TRACK),this.processorDestination.removeAllListeners(hP.ON_NODE)}}).prototype,\"setVolume\",[Xk],Object.getOwnPropertyDescriptor(iM.prototype,\"setVolume\"),iM.prototype),gP(iM.prototype,\"setPlaybackDevice\",[Qk],Object.getOwnPropertyDescriptor(iM.prototype,\"setPlaybackDevice\"),iM.prototype),gP(iM.prototype,\"play\",[Zk],Object.getOwnPropertyDescriptor(iM.prototype,\"play\"),iM.prototype),gP(iM.prototype,\"stop\",[$k],Object.getOwnPropertyDescriptor(iM.prototype,\"stop\"),iM.prototype),gP(iM.prototype,\"pipe\",[eM],Object.getOwnPropertyDescriptor(iM.prototype,\"pipe\"),iM.prototype),gP(iM.prototype,\"unpipe\",[tM],Object.getOwnPropertyDescriptor(iM.prototype,\"unpipe\"),iM.prototype),iM);const sM=new class extends mv{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),RP(this,\"_lastHiddenTime\",0),RP(this,\"_lastVisibleTime\",0),document.addEventListener(\"visibilitychange\",(()=>{\"hidden\"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),Jy.debug(\"document visibility went \".concat(document.visibilityState)),this.emit(\"VISIBILITY_CHANGE\",document.visibilityState)}))}};class aM extends mv{constructor(e,t){super(),RP(this,\"trackMediaType\",oP.DATA),RP(this,\"_version\",1),RP(this,\"_type\",3),RP(this,\"_config\",void 0),RP(this,\"_originDataChannel\",void 0),RP(this,\"_dataStreamPacketHeader\",new ArrayBuffer(4)),RP(this,\"_dataStreamPacketHandler\",{serialize:e=>e,deserialize:e=>e}),RP(this,\"_datachannelEventMap\",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return Oy(\"DATASTREAM_MAX_RETRANSMITS\")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:\"connecting\"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new Gh(((e,t)=>{if(this._originDataChannel){\"open\"===this._originDataChannel.readyState&&e();const i=setTimeout((()=>{var e;t(new iv(tv.DATACHANNEL_CONNECTION_TIMEOUT,\"Cannot create datachannel, id: \".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(i),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(i),new iv(tv.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new iv(tv.DATACHANNEL_CONNECTION_TIMEOUT,\"cannot find dataChannel\"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[SP.OPEN,SP.CLOSE,SP.ERROR].forEach((t=>{const i=()=>{this.emit(t)};this._datachannelEventMap.set(t,i),e.addEventListener(t,i)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[i,n]=t;e.removeEventListener(i,n)})),this._datachannelEventMap.clear()}}class cM extends aM{constructor(e){super(e),RP(this,\"_messageListener\",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error(\"invalid byteLength: the byte length must exceed \"+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),i=new DataView(t).getUint8(3);if(i!==this.id)return void(Oy(\"SHOW_DATASTREAM2_LOG\")&&Jy.debug(\"invalid datachannel id: \".concat(i,\" !== \").concat(this.id)));let n=e.data.slice(this._dataStreamPacketHeader.byteLength);n=this._dataStreamPacketHandler.deserialize(n),this.emit(SP.MESSAGE,n)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener(\"message\",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener(\"message\",this._messageListener)}}class dM extends aM{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const i=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);i.set(new Uint8Array(this._dataStreamPacketHeader),0),i.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(i.buffer)}}}function lM(){const e=new Blob([atob(\"ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==\")],{type:\"text/javascript\"});return setTimeout((()=>DD.revokeObjectURL(e)),0),new Worker(DD.createObjectURL(e))}const uM=new Map;const hM=new Map;function pM(e,t,i){let n=new Uint8Array(e,t,i),r=[],o=0;for(;r.length<i;)o+3<i&&0===n[o]&&0===n[o+1]&&3===n[o+2]&&(0===n[o+3]||1===n[o+3]||2===n[o+3]||3===n[o+3])?(r.push(n[o],n[o+1],n[o+3]),o+=4):(r.push(n[o]),o++);return new Uint8Array(r)}const _M=new Map;async function EM(e,t){if(!LD().supportWebRTCEncodedTransform)return void Jy.warning(\"browser not support video encoded transform\");if(_M.has(e))return;if(!e.track)return;const i={track:e.track};if(OI()){if(!e.createEncodedStreams)return void Jy.warning(\"browser not support createEncodedStreams() API\");let r=null;try{r=e.createEncodedStreams()}catch(e){return void Jy.error(\"create video-encoded-streams error\",e&&e.message)}let o=[];t.on(\"sei-to-send\",(e=>{o.push(e)}));const s=new TransformStream({transform(t,r){i.controller||(i.controller=r),e.track&&e.track.id!==i.track.id&&(Jy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n));const s=o.shift();s&&(t.data=function(e,t){const i=function(e){const t=e.length;let i=[],n=0;for(;n<t;)n+2<t&&0===e[n]&&0===e[n+1]&&(0===e[n+2]||1===e[n+2]||2===e[n+2]||3===e[n+2])?(i.push(e[n],e[n+1],3,e[n+2]),n+=3):(i.push(e[n]),n++);return new Uint8Array(i)}(t),n=i.length,r=Math.floor(n/255),o=n%255,s=new Uint8Array(6+r+1+n+e.byteLength);s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=6,s[5]=101;let a=0;for(;a<r;)s[6+a]=255,a++;return s[6+a]=o,a++,s.set(i,6+a),s.set(new Uint8Array(e),6+a+n),s.buffer}(t.data,s)),r.enqueue(t)}});r.readable.pipeThrough(s).pipeTo(r.writable)}else{if(!NI())return;{if(\"undefined\"==typeof RTCRtpScriptTransform)return void Jy.warning(\"browser not support RTCRtpScriptTransform\");const r=lM(),o=new MessageChannel;await new Gh((e=>r.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(r,{name:\"tx\",port:o.port2},[o.port2]);e.transform=s,await new Gh((e=>r.onmessage=t=>{\"started\"===t.data&&e(void 0)})),t.on(\"sei-to-send\",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var r;t.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==i.track.id&&(Jy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n))},i.worker=r}}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener(\"ended\",n)}const t=_M.get(e);if(t){_M.delete(e);try{var i,r;null===(i=t.controller)||void 0===i||i.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){Jy.warning(e&&e.message)}}}_M.set(e,i),e.track.addEventListener(\"ended\",n)}const fM=new Map;!function(){const e=vI();PD.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),PD.getStreamFromExtension=e.name===gI.CHROME&&Number(e.version)>34,PD.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!(\"currentDirection\"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver(\"audio\"),t=!0}catch(e){}return e.close(),t}(),PD.supportMinBitrate=e.name===gI.CHROME||e.name===gI.EDGE,PD.supportSetRtpSenderParameters=function(){const e=vI();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!JI()||!(!NI()&&!wI())||e.name===gI.FIREFOX&&Number(e.version)>=64)}(),e.name===gI.SAFARI&&(Number(e.version)>=14?PD.supportDualStream=!0:PD.supportDualStream=!1),PD.webAudioMediaStreamDest=function(){const e=vI();return!(e.name===gI.SAFARI&&Number(e.version)<12)}(),PD.supportReplaceTrack=!!window.RTCRtpSender&&\"function\"==typeof RTCRtpSender.prototype.replaceTrack,PD.supportWebGL=\"undefined\"!=typeof WebGLRenderingContext,PD.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,JI()||(PD.webAudioWithAEC=!0),PD.supportShareAudio=function(){const e=vI();return(e.os===SI.WIN_10||e.os===SI.WIN_81||e.os===SI.WIN_7||e.os===SI.LINUX||e.os===SI.MAC_OS||e.os===SI.CHROMIUM_OS)&&e.name===gI.CHROME&&Number(e.version)>=74}(),PD.supportDataChannel=!!(kI(76)||function(e){const t=vI();return!(t.name!==gI.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||xI(14)),PD.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!PI()&&!!e&&e.prototype.setConfiguration instanceof Function}(),PD.supportWebRTCEncodedTransform=function(){const e=vI();return\"Chrome\"===e.name&&Number(e.version)>=86||\"Safari\"===e.name&&Number(e.version)>=15}(),PD.supportWebRTCInsertableStream=function(){const e=vI();return(e.name===gI.CHROME||e.name===gI.EDGE)&&Number(e.version)>=94&&\"MediaStreamTrackGenerator\"in window&&\"MediaStreamTrackProcessor\"in window}(),PD.supportRequestVideoFrameCallback=\"requestVideoFrameCallback\"in HTMLVideoElement.prototype,PD.supportWebCrypto=\"undefined\"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle,Fv((()=>{PD.supportDualStreamEncoding=function(){const e=vI();return!!Oy(\"DISABLE_WEBAUDIO\")||(\"Safari\"===e.name&&Number(e.version)>=14||!!(\"Chrome\"===e.name&&/Windows/i.test(e.os||\"\")&&Number(e.version)>=100&&Oy(\"CHROME_DUAL_STREAM_USE_ENCODING\")))}(),Jy.info(\"browser compatibility\",JSON.stringify(PD),JSON.stringify(e))}))}();class mM extends mv{constructor(e,t){super(),ng(this,\"signal\",void 0),ng(this,\"token\",void 0),ng(this,\"tokenTimeout\",void 0),ng(this,\"tokenInterval\",void 0),ng(this,\"_sequence\",0),ng(this,\"userMap\",new Map),ng(this,\"encoder\",new TextEncoder),this.signal=e,this.token=t;const i=()=>{this.signal.connectionState===lb.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(i,1e3):this.tokenInterval=window.setTimeout(i,3*Oy(\"P2P_TOKEN_INTERVAL\"))};i()}async send(e,t,i,n,r){var o,s,a;if(0===this.userMap.size)return;const c=Array.from(Jw(o=this.userMap).call(o))[0].token;\"string\"!=typeof t&&(t=JSON.stringify(t)),n=null!==(s=n)&&void 0!==s?s:Zv(6,\"\"),r=null!==(a=r)&&void 0!==a?a:this._sequence++;const d={_id:n,_type:e,_seq:r,_message:t,token:\"\".concat(this.token,\"_\").concat(c)};Oy(\"SHOW_P2P_LOG\")&&Jy.debug(\"send message\",d,\"noNeedResponse : \".concat(i));this.splitMessage(JSON.stringify(d)).forEach((e=>{this.signal.request(hb.DATA_STREAM,{payload:Kv(this.encoder.encode(e))})}));const l=new Gh(((t,r)=>{const o=window.setTimeout((()=>{this.off(\"res-@\".concat(n,\"_ack\"),s),this.off(\"res-@\".concat(n),c),this.off(ow.ABORT,a),Jy.debug(\"[external-signal] request timeout, type: \".concat(e,\", requestId: \").concat(n)),0===this.userMap.size?r(new iv(tv.INVALID_REMOTE_USER)):r(new iv(tv.TIMEOUT))}),Oy(\"EXTERNAL_SIGNAL_REQUEST_TIMEOUT\")),s=()=>{o&&window.clearTimeout(o),this.off(ow.ABORT,a),i&&t()},a=()=>{o&&window.clearTimeout(o),this.off(\"res-@\".concat(n,\"_ack\"),s),this.off(\"res-@\".concat(n),c),r(new iv(tv.EXTERNAL_SIGNAL_ABORT,\"type: \".concat(e,\", requestId: \").concat(n)))};this.once(ow.ABORT,a),this.once(\"res-@\".concat(n,\"_ack\"),s);const c=(i,c)=>{l=!0,o&&window.clearTimeout(o),this.off(\"res-@\".concat(n,\"_ack\"),s),this.off(ow.ABORT,a),\"success\"===i?t(c):r(new iv(tv.P2P_MESSAGE_FAILED,\"request \".concat(e,\" failed, requestId: \").concat(n)))};let l=!1;i||(this.once(\"res-@\".concat(n),c),Qv(Oy(\"SIGNAL_REQUEST_TIMEOUT\")).then((()=>{l||Jy.warning(\"external_signal request timeout, type: \".concat(e,\", requestId: \").concat(n,\", \").concat(d))})))}));try{return await l}catch(o){if(o.code===tv.TIMEOUT)return await this.send(e,t,i,n,r);throw o}}onMessage(e){var t;const{_uid:i}=e;let n,r=this.userMap.get(i);if(r)n=r.splitMessageMap;else{if(this.userMap.size>0||!(\"_type\"in e)||e._type!==rw.CHECK)return;const{token:t}=e;n=new Map,r={uid:i,isStart:!0,token:t,splitMessageMap:n,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(i,r),this.signal.emit(_b.ON_USER_ONLINE,{uid:i}),this.handleUserOnline()}if(\"id\"in e&&\"total\"in e){var o;const{id:t,total:r}=e,s=null!==(o=n.get(t))&&void 0!==o?o:[];if(s.push(e),n.has(t)||n.set(t,s),s.length!==r)return;{const r=oE(s).call(s,((e,t)=>e.index-t.index)).map((e=>e.payload)).join(\"\");n.delete(t),(e=JSON.parse(r))._uid=i}}const{_type:s,token:a}=e;if(Dn(t=[rw.ACK,rw.CHECK]).call(t,s))return s===rw.CHECK&&this.handleCheckToken(r,a),void this.receiveMessage(e);a===\"\".concat(r.token,\"_\").concat(this.token)?this.handleReceivedMessage(e):Jy.debug('Receive unexpected message\", '.concat(a,\", cur_token: \").concat(r.token,\"_\").concat(this.token),e)}check(){const e={_id:Zv(6,\"\"),token:this.token,_type:rw.CHECK};Oy(\"SHOW_P2P_LOG\")&&Jy.debug(\"send message\",e),this.signal.request(hb.DATA_STREAM,{payload:Kv(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:rw.ACK,token:this.token};Oy(\"SHOW_P2P_LOG\")&&Jy.debug(\"send message\",t),this.signal.request(hb.DATA_STREAM,{payload:Kv(this.encoder.encode(JSON.stringify(t)))})}response(e,t,i){this.send(rw.RESPONSE,JSON.stringify({success:!i,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:i}=e;for(;t.has(i);){const n=t.get(i);t.delete(i),this.receiveMessage(n),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:i,_seq:n}=e,r=this.userMap.get(i),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:a}=r;if(n<a)return this.ack(e._id),void Jy.debug(\"[external-signal] receive old message, seq: \".concat(n,\", \").concat(e._message));o.set(n,e),s&&n===a&&(this.receiveMessage(e),o.delete(a),r.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:i,_message:n,_uid:r}=e;if(Oy(\"SHOW_P2P_LOG\")&&Jy.debug(\"receive message\",e),t){let o;switch(e._type!==rw.ACK&&(n&&(o=JSON.parse(n)),this.ack(e._id)),e._type){case rw.CANDIDATE:case rw.CONTROL:this.signal.emit(i,o,r);break;case rw.PUBLISH:case rw.UNPUBLISH:case rw.RESTART_ICE:case rw.CALL:o.uid=r,Pv(this.signal,i,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case rw.ACK:this.getListeners(\"res-@\".concat(t,\"_ack\")).length>0&&this.emit(\"res-@\".concat(t,\"_ack\"));break;case rw.RESPONSE:{const{success:e,message:i}=o;this.emit(\"res-@\".concat(t),e?\"success\":\"failed\",i);break}}}}splitMessage(e){if(e.length<mM.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:i}=JSON.parse(e),n=Zv(6,\"\");let r=0,o=800;const s=Math.ceil(e.length/o);for(;e.length>0;){r++;const a={id:n,index:r,total:s,payload:e.slice(0,o),token:\"\".concat(this.token,\"_\").concat(i)};JSON.stringify(a).length>mM.MAX_MESSAGE_SIZE?o-=50:(t.push(a),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(Jy.debug(\"token changed, from \".concat(e.token,\" to \").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{Jy.debug(\"token timeout, \".concat(t)),this.reset(e.uid)}),Oy(\"MAX_P2P_TIMEOUT\")),!0)}async handleUserOnline(){const e=await Pv(this.signal,rw.CALL,void 0),t=await this.send(rw.CALL,e);this.signal.emit(ub.P2P_CONNECTION,t,!0)}async reset(e,t){const i=this.userMap.get(e);i&&(this.emit(ow.ABORT),this.signal.emit(_b.ON_USER_OFFLINE,{uid:i.uid,reason:aw.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(Jy.debug(\"change local token from \".concat(t,\" to \").concat(t)),this.token=Zv(6,\"\")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(ow.ABORT)}}ng(mM,\"MAX_SIZE\",1),ng(mM,\"MAX_MESSAGE_SIZE\",1024);class TM extends mv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===lb.CONNECTED?this.emit(ub.WS_CONNECTED):e===lb.RECONNECTING?this.emit(ub.WS_RECONNECTING,this._websocketReconnectReason):e===lb.CLOSED&&this.emit(ub.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),ng(this,\"_disconnectedReason\",void 0),ng(this,\"_websocketReconnectReason\",void 0),ng(this,\"_connectionState\",lb.CLOSED),ng(this,\"reconnectToken\",void 0),ng(this,\"p2pToken\",void 0),ng(this,\"websocket\",void 0),ng(this,\"openConnectionTime\",void 0),ng(this,\"clientId\",void 0),ng(this,\"lastMsgTime\",Date.now()),ng(this,\"uploadCache\",[]),ng(this,\"uploadCacheInterval\",void 0),ng(this,\"rttRolling\",new Ey(5)),ng(this,\"pingpongTimer\",void 0),ng(this,\"pingpongTimeoutCount\",0),ng(this,\"joinResponse\",void 0),ng(this,\"multiIpOption\",void 0),ng(this,\"initError\",void 0),ng(this,\"spec\",void 0),ng(this,\"store\",void 0),ng(this,\"_external_signal\",void 0),ng(this,\"onWebsocketMessage\",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(ub.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,\"_id\")){const e=\"res-@\".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,\"_type\")){switch(t._type){case _b.ON_DATA_STREAM:return void this.handleDataStream(t._message);case _b.MUTE_AUDIO:case _b.MUTE_VIDEO:case _b.ON_P2P_LOST:case _b.ON_USER_ONLINE:return;case _b.ON_USER_OFFLINE:const{uid:e}=t._message;return Jy.debug(\"[\".concat(this.clientId,\"] user-offline uid: \").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===_b.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===_b.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(vv.UID_BANNED);break;case 15:this.close(vv.IP_BANNED);break;case 16:this.close(vv.CHANNEL_BANNED)}if(t._type===_b.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case db.ERR_LICENSE_MISSING:this.close(vv.LICENSE_MISSING);break;case db.ERR_LICENSE_EXPIRED:this.close(vv.LICENSE_EXPIRED);break;case db.ERR_LICENSE_MINUTES_EXCEEDED:this.close(vv.LICENSE_MINUTES_EXCEEDED);break;case db.ERR_LICENSE_PERIOD_INVALID:this.close(vv.LICENSE_PERIOD_INVALID);break;case db.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(vv.LICENSE_MULTIPLE_SDK_SERVICE);break;case db.ERR_LICENSE_ILLEGAL:this.close(vv.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new vw(\"gateway-\".concat(this.clientId),this.spec.retryConfig,!0,Oy(\"JOIN_GATEWAY_USE_DUAL_DOMAIN\"),Oy(\"JOIN_GATEWAY_USE_443PORT_ONLY\"),t),this.handleWebsocketEvents(),window.addEventListener(\"offline\",(()=>{this.connectionState===lb.CONNECTED&&this.reconnect(\"retry\",Ov.OFFLINE)})),this.p2pToken=Zv(6,\"\"),this._external_signal=new mM(this,this.p2pToken)}async request(e,t,i,n){const r=Zv(6,\"\"),o={_id:r,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new Gh(((e,t)=>{if(this.connectionState===lb.CONNECTED)return e();const i=()=>{this.off(ub.WS_CLOSED,n),e()},n=()=>{this.off(ub.WS_CONNECTED,i),t(new iv(tv.WS_ABORT))};this.once(ub.WS_CONNECTED,i),this.once(ub.WS_CLOSED,n)}));if(this.connectionState!==lb.CONNECTING&&this.connectionState!==lb.RECONNECTING||e===hb.JOIN||e===hb.REJOIN||await a(),this.websocket.sendMessage(o,!0),n)return;const c=new Gh(((i,n)=>{let o=!1;const a=(n,r)=>{o=!0,i({isSuccess:\"success\"===n,message:r||{}}),this.off(ub.WS_CLOSED,c),this.off(ub.WS_RECONNECTING,c),this.emit(ub.REQUEST_SUCCESS,e,t)};this.once(\"res-@\".concat(r),a);const c=()=>{n(new iv(tv.WS_ABORT,\"type: \".concat(e))),this.off(ub.WS_CLOSED,c),this.off(ub.WS_RECONNECTING,c),this.off(\"res-@\".concat(r),a)};this.once(ub.WS_CLOSED,c),this.once(ub.WS_RECONNECTING,c),Qv(Oy(\"SIGNAL_REQUEST_TIMEOUT\")).then((()=>{this.websocket.connectionID!==s||o||(Jy.warning(\"[\".concat(this.clientId,\"] ws request timeout, type: \").concat(e)),this.emit(ub.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(n){if(this.connectionState===lb.CLOSED||e===hb.LEAVE)throw new iv(tv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===hb.JOIN||e===hb.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=uw(l),h=new iv(tv.UNEXPECTED_RESPONSE,\"\".concat(u.desc,\": \").concat(d.message.error_str),{code:l,data:d.message,desc:u.desc});return\"success\"===u.action?d.message:(Jy.warning(\"[\".concat(this.clientId,\"] [\").concat(this.websocket.connectionID,\"] unexpected response from type \").concat(e,\", error_code: \").concat(l,\", message: \").concat(u.desc,\", action: \").concat(u.action)),l===db.ERR_TOO_MANY_BROADCASTERS?e===hb.JOIN||e===hb.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():\"failed\"===u.action?h.throw():\"quit\"===u.action?(this.initError=h,this.close(),h.throw()):(l===db.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,Jy.warning(\"[\".concat(this.clientId,\"] detect multi ip, recover\")),this.reconnect(\"recover\",Ov.MULTI_IP)):this.reconnect(u.action,Ov.SERVER_ERROR),e===hb.JOIN||e===hb.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new Gh((i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void Jy.warn(\"[\".concat(this.clientId,\"] no session id when upload wrtc stats\"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(pb.WRTC_STATS,t)}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=Oy(\"MAX_UPLOAD_CACHE\")||50;this.uploadCache.push(i),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==lb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Oy(\"UPLOAD_CACHE_INTERVAL\")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}async sendExtensionMessage(e,t,i){return await this._external_signal.send(e,t,i)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Gh(((t,i)=>{this.once(ub.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(ub.WS_CLOSED,(()=>i(this.initError||new iv(tv.WS_ABORT)))),this.connectionState=lb.CONNECTING,this.websocket.init(e).catch(i)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||vv.LEAVE,this.connectionState=lb.CLOSED,Jy.debug(\"[\".concat(this.clientId,\"] \")+\"will close websocket in signal\"),this.websocket.close(),this.p2pToken=Zv(6,\"\"),this._external_signal.clear(),this._external_signal=new mM(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(ub.ABORT_P2P_EXECUTION);const e=await Pv(this,ub.REQUEST_JOIN_INFO),t=await this.request(hb.JOIN,e);if(!t)return this.emit(ub.REPORT_JOIN_GATEWAY,tv.TIMEOUT,this.url||\"\"),!1;this.joinResponse=t,this.emit(ub.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=lb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const i=Hv(e.payload),n=(new TextDecoder).decode(i),r=JSON.parse(n);\"total\"in r&&\"id\"in r||Dn(t=Object.values(rw)).call(t,r._type)?(r._uid=e.uid,this._external_signal.onMessage(r)):this.emit(_b.ON_DATA_STREAM,e)}catch(t){this.emit(_b.ON_DATA_STREAM,e)}}handleNotification(e){Jy.debug(\"[\".concat(this.clientId,\"] receive notification: \"),e);const t=uw(e.code);if(\"success\"!==t.action){if(\"failed\"!==t.action)return\"quit\"===t.action?(\"ERR_REPEAT_JOIN_CHANNEL\"===t.desc&&this.close(vv.UID_BANNED),void this.close()):void this.reconnect(t.action,Ov.SERVER_ERROR);Jy.error(\"[\".concat(this.clientId,\"] ignore error: \"),t.desc)}}handlePingPong(){if(!this.websocket||\"connected\"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Oy(\"PING_PONG_TIME_OUT\"),t=Date.now();this.pingpongTimeoutCount>=e&&(Jy.warning(\"[\".concat(this.clientId,\"] PINGPONG Timeout. Last Socket Message: \").concat(t-this.lastMsgTime,\"ms\")),t-this.lastMsgTime>Oy(\"WEBSOCKET_TIMEOUT_MIN\"))?this.reconnect(\"retry\",Ov.TIMEOUT):this.request(hb.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Oy(\"REPORT_STATS\")&&this.send(hb.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(fb.RECONNECT_WAITTING_FINISH,(e=>{this.emit(ub.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(fb.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(ub.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(fb.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(fb.CLOSED,(()=>{this.connectionState=lb.CLOSED})),this.websocket.on(fb.FAILED,(()=>{this._disconnectedReason=vv.NETWORK_ERROR,this.connectionState=lb.CLOSED})),this.websocket.on(fb.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===lb.CONNECTED?this.connectionState=lb.RECONNECTING:this.connectionState=lb.CONNECTING})),this.websocket.on(fb.WILL_RECONNECT,((e,t,i)=>{\"retry\"!==e?(Jy.debug(\"\".concat(this.clientId,\" websocket will_connect event, renewSession reconnectMode is \").concat(e)),this.reconnectToken=void 0):Jy.debug(\"\".concat(this.clientId,\" reconnect mode is retry, no need to renew session\")),i(e)})),this.websocket.on(fb.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(ub.REPORT_JOIN_GATEWAY,e,this.url||\"\"),e instanceof iv&&e.code===tv.UNEXPECTED_RESPONSE&&e.data.code===db.ERR_NO_AUTHORIZED)return Jy.warning(\"[\".concat(this.clientId,\"] reconnect no authorized, recover\")),void this.reconnect(\"recover\",Ov.SERVER_ERROR);Jy.error(\"[\".concat(this.clientId,\"] join gateway request failed\"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect(\"tryNext\",Ov.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(fb.REQUEST_NEW_URLS,((e,t)=>{Pv(this,ub.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(fb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(_b.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var SM={exports:{}};!function(e,t){e.exports=(()=>{var e={8:(e,t,i)=>{i.r(t),i.d(t,{Parser:()=>C,Printer:()=>b,parse:()=>D,print:()=>P});const n=\"\\n\",r=\"\".concat(\"\\r\").concat(n),o=\" \";let s;function a(e){return e>=\"0\"&&e<=\"9\"}function c(e){return e>=\"!\"&&e<=\"~\"}function d(e){return c(e)||e>=\"Â\"&&e<=\"Ã¿\"}function l(e){return\"!\"===e||e>=\"#\"&&e<=\"'\"||e>=\"*\"&&e<=\"+\"||e>=\"-\"&&e<=\".\"||e>=\"0\"&&e<=\"9\"||e>=\"A\"&&e<=\"Z\"||e>=\"^\"&&e<=\"~\"}function u(e){return e>=\"1\"&&e<=\"9\"}function h(e){return e>=\"A\"&&e<=\"Z\"||e>=\"a\"&&e<=\"z\"}function p(e){return\"d\"===e||\"h\"===e||\"m\"===e||\"s\"===e}function _(e){return e>\"\u0001\"&&e<\"\\t\"||e>\"\\v\"&&e<\"\\f\"||e>\"\u000e\"&&e<\"Ã¿\"}function E(e){return h(e)||a(e)||\"+\"===e||\"/\"===e}function f(e){return a(e)||h(e)||\"+\"===e||\"/\"===e||\"-\"===e||\"_\"===e}function m(e){return h(e)||a(e)||\"+\"===e||\"/\"===e}function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.VERSION=\"v\",e.ORIGIN=\"o\",e.SESSION_NAME=\"s\",e.INFORMATION=\"i\",e.URI=\"u\",e.EMAIL=\"e\",e.PHONE=\"p\",e.CONNECTION=\"c\",e.BANDWIDTH=\"b\",e.TIME=\"t\",e.REPEAT=\"r\",e.ZONE_ADJUSTMENTS=\"z\",e.KEY=\"k\",e.ATTRIBUTE=\"a\",e.MEDIA=\"m\"}(s||(s={}));class R{consumeText(e,t){let i=t;for(;i<e.length;){const t=e[i];if(\"\\0\"===t||\"\\r\"===t||t===n)break;i+=1}if(i-t==0)throw new Error(\"Invalid text, at \".concat(e));return i}consumeUnicastAddress(e,t,i){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,i){let n=t;for(;i(e[n]);)n++;if(n-t==0)throw new Error(\"Invalid rule at \".concat(t,\".\"));return n}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error(\"Invalid space at \".concat(t,\".\"))}consumeIP4Address(e,t){let i=t;for(let t=0;t<4;t++)if(i=this.consumeDecimalUChar(e,i),3!==t){if(\".\"!==e[i])throw new Error(\"Invalid IP4 address.\");i++}return i}consumeDecimalUChar(e,t){let i=t;for(let t=0;t<3&&a(e[i]);t++,i++);if(i-t==0)throw new Error(\"Invalid decimal uchar.\");const n=parseInt(e.slice(t,i));if(n>=0&&n<=255)return i;throw new Error(\"Invalid decimal uchar\")}consumeIP6Address(e,t){let i=this.consumeHexpart(e,t);return\":\"===e[i]?(i+=1,i=this.consumeIP4Address(e,i),i):i}consumeHexpart(e,t){let i=t;if(\":\"===e[i]&&\":\"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}if(i=this.consumeHexseq(e,i),\":\"===e[i]&&\":\"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}return i}consumeHexseq(e,t){let i=t;for(;i=this.consumeHex4(e,i),\":\"===e[i]&&\":\"!==e[i+1];)i+=1;return i}consumeHex4(e,t){let i=0;for(;i<4;i++)if(!((n=e[t+i])>=\"0\"&&n<=\"9\"||n>=\"a\"&&n<=\"f\"||n>=\"A\"&&n<=\"F\")){if(0===i)throw new Error(\"Invalid hex 4\");break}var n;return t+i}consumeFQDN(e,t){let i=t;for(;a(e[i])||h(e[i])||\"-\"===e[i]||\".\"===e[i];)i+=1;if(i-t<4)throw new Error(\"Invalid FQDN\");return i}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,d)}consumeMulticastAddress(e,t,i){switch(i){case\"IP4\":case\"ip4\":return this.consumeIP4MulticastAddress(e,t);case\"IP6\":case\"ip6\":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(i){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const i=this.consumeHexpart(e,t);return\"/\"===e[i]?this.consumeInteger(e,i+1):i}consumeIP4MulticastAddress(e,t){let i=t+3;const n=e.slice(t,i),r=parseInt(n);if(r<224||r>239)throw new Error(\"Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.\");for(let t=0;t<3;t++){if(\".\"!==e[i])throw new Error(\"Invalid IP4 multicast address.\");i+=1,i=this.consumeDecimalUChar(e,i)}return\"/\"===e[i]&&(i+=1),i=this.consumeTTL(e,i),\"/\"===e[i]&&(i=this.consumeInteger(e,i)),i}consumeInteger(e,t){if(!u(e[t]))throw new Error(\"Invalid integer.\");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if(\"0\"===e[t])return t+1;if(!u(e[t]))throw new Error(\"Invalid TTL.\");t+=1;for(let i=0;i<2&&a(e[t]);i++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,l)}consumeTime(e,t){let i=t;if(\"0\"===e[i])return i+1;for(u(e[i])&&(i+=1);a(e[i]);)i++;if(i-t<10)throw new Error(\"Invalid time\");return i}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let i=t;return i=this.consumeOneOrMore(e,i,a),p(e[i])?i+1:i}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error(\"Invalid repeat interval\");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,i){for(let n=0;n<i.length;n++){if(t+n>=e.length)throw new Error(\"consume exceeding value length\");if(e[t+n]!==i[n])throw new Error(\"consume \".concat(i,\" failed at \").concat(n))}return t+i.length}consumeTill(e,t,i){let n=t;for(;n<e.length&&(\"string\"!=typeof i||e[n]!==i)&&(\"function\"!=typeof i||!i(e[n]));)n++;return n}}class C extends R{constructor(){super(),g(this,\"records\",[]),g(this,\"currentLine\",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!jp(e).call(e))).map(this.parseLine),this.currentLine=0;const i=this.parseVersion(),n=this.parseOrigin(),r=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),d=this.parseConnection(),l=this.parseBandWidth(),u=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),_=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error(\"parsing failed, non exhaustive sdp lines.\");return{version:i,origin:n,sessionName:r,information:o,uri:s,emails:a,phones:c,connection:d,bandwidths:l,timeFields:u,key:h,attributes:p,mediaDescriptions:_}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error(\"Record doesn't exit.\");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===n)return\"\\r\"===e[t-1]?r:n;throw new Error(\"Invalid newline character.\")}parseLine(e,t){if(e.length<2)throw new Error(\"Invalid sdp line, sdp line should be of form <type>=<value>.\");const i=e[0];if(\"=\"!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an \"=\" sign.');return{type:i,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new v;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(t,(e=>l(e)&&\":\"!==e)),_cur:0};\":\"===t.value[t.cur]&&(t.cur+=1,i.attValue=this.extractOneOrMore(t,_)),e.parse(i),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new y(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(e,(e=>l(e)&&\":\"!==e)),_cur:0};\":\"===e.value[e.cur]&&(e.cur+=1,i.attValue=this.extractOneOrMore(e,_)),t.parse(i),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if(\"prompt\"===e.value||\"clear:\"===e.value||\"base64:\"===e.value||\"uri:\"===e.value)return e.value;throw this.currentLine++,new Error(\"Invalid key.\")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const i=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let n=!1;\"-\"===e.value[e.cur]&&(n=!0,e.cur+=1);const r=this.extract(e,this.consumeTypedTime);t.push({time:i,typedTime:r,back:n})}catch(e){break}if(0===t.length)throw new Error(\"Invalid zone adjustments\");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const i=this.extract(t,this.consumeRepeatInterval),n=this.parseTypedTime(t);e.push({repeatInterval:i,typedTimes:n}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error(\"Invalid typed time.\");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const i=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:i}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const i=this.extractOneOrMore(t,l);if(\":\"!==t.value[t.cur])throw new Error(\"Invalid bandwidth field.\");t.cur++;const n=this.extractOneOrMore(t,a);e.push({bwtype:i,bandwidth:n}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error(\"first sdp record must be version\");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, \"v='.concat(e.value,'\"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error(\"second line of sdp must be origin\");const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:i,sessVersion:n,nettype:r,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:i,address:n}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let i=this.extract(e,this.consumePort);\"/\"===e.value[e.cur]&&(e.cur+=1,i+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const n=[];for(n.push(this.extract(e,this.consumeToken));\"/\"===e.value[e.cur];)e.cur+=1,n.push(this.extract(e,this.consumeToken));if(0===n.length)throw new Error(\"Invalid proto\");const r=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:i,protos:n,fmts:r}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),i=this.parseRepeat(),n=this.parseZone();e.push({time:t,repeats:i,zones:n})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),i=this.parseInformation(),n=this.parseConnections(),r=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:i,connections:n,bandwidths:r,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error(\"Invalid fmts\");return t}extract(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];const o=t.call(this,e.value,e.cur,...n),s=e.value.slice(e.cur,o);return e.cur=o,s}extractOneOrMore(e,t){const i=this.consumeOneOrMore(e.value,e.cur,t),n=e.value.slice(e.cur,i);return e.cur=i,n}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error(\"Invalid space at \".concat(e.cur,\".\"));e.cur+=1}}class I extends R{constructor(){super(...arguments),g(this,\"attributes\",void 0),g(this,\"digested\",!1)}extractOneOrMore(e,t,i){const n=this.consumeOneOrMore(e.attValue,e._cur,t),r=e.attValue.slice(e._cur,n),[o,s]=i||[];if(\"number\"==typeof o&&r.length<o)throw new Error(\"error in length, should be more or equal than \".concat(o,\" characters.\"));if(\"number\"==typeof s&&r.length>s)throw new Error(\"error in length, should be less or equal than \".concat(s,\" characters.\"));return e._cur=n,r}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error(\"Invalid space at \".concat(e._cur,\".\"));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error(\"Nothing to extract from attValue.\");for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];const o=t.call(this,e.attValue,e._cur,...n),s=e.attValue.slice(e._cur,o);return e._cur=o,s}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let i=0;i<t.length;i++)if(t[i]!==e.attValue[e._cur+i])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error(\"Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'\");this.attributes.iceUfrag=this.extractOneOrMore(e,E,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error(\"Invalid ice-pwd, should be only a single line if 'a=ice-pwd'\");this.attributes.icePwd=this.extractOneOrMore(e,E,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error(\"Invalid ice-options, should be only one 'ice-options' line\");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,E));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:i})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let i;\"/\"===this.peekChar(e)&&(this.extract(e,this.consume,\"/\"),i=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o),r=S(S({entry:parseInt(t,10)},i&&{direction:i}),{},{extensionName:n});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),r.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(r)}parseSetup(e){if(this.attributes.setup)throw new Error(\"must only be one single 'a=setup' line.\");const t=this.extract(e,this.consumeTill);if(\"active\"!==t&&\"passive\"!==t&&\"actpass\"!==t&&\"holdconn\"!==t)throw new Error(\"role must be one of 'active', 'passive', 'actpass', 'holdconn'.\");this.attributes.setup=t}}class v extends I{constructor(){super(...arguments),g(this,\"attributes\",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error(\"already digested\");try{switch(e.attField){case\"group\":this.parseGroup(e);break;case\"ice-lite\":this.parseIceLite();break;case\"ice-ufrag\":this.parseIceUfrag(e);break;case\"ice-pwd\":this.parseIcePwd(e);break;case\"ice-options\":this.parseIceOptions(e);break;case\"fingerprint\":this.parseFingerprint(e);break;case\"setup\":this.parseSetup(e);break;case\"tls-id\":this.parseTlsId(e);break;case\"identity\":this.parseIdentity(e);break;case\"extmap\":this.parseExtmap(e);break;case\"msid-semantic\":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error(\"parsing session attribute \".concat(e.attField,' error, \"a=').concat(e.attField,\":\").concat(e.attValue,'\"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error(\"attribute parsing error\")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),i.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:i})}parseIceLite(){if(this.attributes.iceLite)throw new Error(\"Invalid ice-lite, should be only a single line of 'a=ice-lite'\");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error(\"must be only one tld-id line\");this.attributes.tlsId=this.extractOneOrMore(e,f)}parseIdentity(e){const t=this.extractOneOrMore(e,m),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,\"=\");const n=this.extractOneOrMore(e,(e=>e!==o&&_(e)));i.push({name:t,value:n})}this.attributes.identities.push({assertionValue:t,extensions:i})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if(\"*\"===this.peekChar(e)){this.extract(e,this.consume,\"*\"),t.applyForAll=!0;break}{const i=this.extract(e,this.consumeTill,o);t.identifierList.push(i)}}this.attributes.msidSemantic=t}}class y extends I{constructor(e){super(),g(this,\"attributes\",void 0),-1!==e.protos.indexOf(\"RTP\")||e.protos.indexOf(\"rtp\"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error(\"already digested\");try{switch(e.attField){case\"extmap\":this.parseExtmap(e);break;case\"setup\":this.parseSetup(e);break;case\"ice-ufrag\":this.parseIceUfrag(e);break;case\"ice-pwd\":this.parseIcePwd(e);break;case\"ice-options\":this.parseIceOptions(e);break;case\"candidate\":this.parseCandidate(e);break;case\"remote-candidate\":this.parseRemoteCandidate(e);break;case\"end-of-candidates\":this.parseEndOfCandidates();break;case\"fingerprint\":this.parseFingerprint(e);break;case\"rtpmap\":this.parseRtpmap(e);break;case\"ptime\":this.parsePtime(e);break;case\"maxptime\":this.parseMaxPtime(e);break;case\"sendrecv\":case\"recvonly\":case\"sendonly\":case\"inactive\":this.parseDirection(e);break;case\"ssrc\":this.parseSSRC(e);break;case\"fmtp\":this.parseFmtp(e);break;case\"rtcp-fb\":this.parseRtcpFb(e);break;case\"rtcp-mux\":this.parseRTCPMux();break;case\"rtcp-mux-only\":this.parseRTCPMuxOnly();break;case\"rtcp-rsize\":this.parseRTCPRsize();break;case\"rtcp\":this.parseRTCP(e);break;case\"mid\":this.parseMid(e);break;case\"msid\":this.parseMsid(e);break;case\"imageattr\":this.parseImageAttr(e);break;case\"rid\":this.parseRid(e);break;case\"simulcast\":this.parseSimulcast(e);break;case\"sctp-port\":this.parseSctpPort(e);break;case\"max-message-size\":this.parseMaxMessageSize(e);break;case\"ssrc-group\":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error(\"parsing media attribute \".concat(e.attField,' error, \"a=').concat(e.attField,\":\").concat(e.attValue,'\"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error(\"attribute parsing error\")}parseCandidate(e){const t=this.extractOneOrMore(e,E,[1,32]);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const r=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const d=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,\"typ\"),this.consumeAttributeSpace(e);const l={foundation:t,componentId:i,transport:n,priority:r,connectionAddress:s,port:d,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e,\" raddr\")&&(this.extract(e,this.consume,\" raddr\"),this.consumeAttributeSpace(e),l.relAddr=this.extract(e,this.consumeAddress)),this.peek(e,\" rport\")&&(this.extract(e,this.consume,\" rport\"),this.consumeAttributeSpace(e),l.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),l.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(l)}parseRemoteCandidate(e){const t=[];for(;;){const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumePort);t.push({componentId:i,connectionAddress:n,port:r});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error(\"must be only one line of end-of-candidates\");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,\"/\");this.extract(e,this.consume,\"/\");const n={encodingName:i,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||\"/\"!==this.peekChar(e)||(this.extract(e,this.consume,\"/\"),n.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const r=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));r?r.rtpMap=n:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:n,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error(\"must be only one line of ptime\");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error(\"must be only one line of ptime\");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error(\"must be only one line of direction info\");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,\":\");let n;\":\"===this.peekChar(e)&&(this.extract(e,this.consume,\":\"),n=this.extract(e,this.consumeTill));const r=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));r?r.attributes[i]=n:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[i]:n}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill),n={};i.split(\";\").forEach((e=>{let[t,i]=e.split(\"=\");t=jp(t).call(t);const r=\"string\"==typeof i?jp(i).call(i):null;\"string\"==typeof t&&t.length>0&&(n[t]=r)}));const r=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));r?r.fmtp={parameters:n}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:n}})}parseFmtParameters(e){const t={},i=this.extract(e,this.consumeTill,\"=\");e._cur++;const n=this.extract(e,this.consumeTill,\";\");for(t[i]=n;\";\"===e.attValue[e._cur];){const i=this.extract(e,this.consumeTill,\"=\");e._cur++;const n=this.extract(e,this.consumeTill,\";\");t[i]=n}return t}parseRtcpFb(e){let t=\"\";t=\"*\"===this.peekChar(e)?this.extract(e,this.consume,\"*\"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,o);let n;if(\"trr-int\"===i)n={type:i,interval:this.extract(e,this.consumeTill)};else{const t={type:i};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),n=t}if(\"*\"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error(\"must be single line of rtcp-mux\");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error(\"must be single line of rtcp-only\");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error(\"must be single line of rtcp-rsize\");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error(\"must be single line of rtcp\");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,l,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,l,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>h(e)||a(e)||\"_\"===e||\"-\"===e));this.consumeAttributeSpace(e);const i={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,\"pt=\")){this.extract(e,this.consume,\"pt=\");const t=[];for(;;){const i=this.extract(e,this.consumeToken);t.push(i);try{this.extract(e,this.consume,\",\")}catch(e){break}}i.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case\"depend\":{const n={type:t,rids:this.extract(e,this.consume,\"=\").split(\",\")};i.params.push(n);break}default:{const n={type:t};\"=\"===this.peekChar(e)&&(this.extract(e,this.consume,\"=\"),n.val=this.extract(e,this.consumeTill,\";\")),i.params.push(n)}}try{this.extract(e,this.consume,\";\")}catch(e){break}}}this.attributes.rids.push(i)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error(\"must be single line of simulcast\");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);i.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:i})}}function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class b{constructor(){A(this,\"eol\",r)}print(e,t){let i=\"\";return t&&(this.eol=t),i+=this.printVersion(e.version),i+=this.printOrigin(e.origin),i+=this.printSessionName(e.sessionName),i+=this.printInformation(e.information),i+=this.printUri(e.uri),i+=this.printEmail(e.emails),i+=this.printPhone(e.phones),i+=this.printConnection(e.connection),i+=this.printBandwidth(e.bandwidths),i+=this.printTimeFields(e.timeFields),i+=this.printKey(e.key),i+=this.printSessionAttributes(e.attributes),i+=this.printMediaDescription(e.mediaDescriptions),i}printVersion(e){return\"v=\".concat(e).concat(this.eol)}printOrigin(e){return\"o=\".concat(e.username,\" \").concat(e.sessId,\" \").concat(e.sessVersion,\" \").concat(e.nettype,\" \").concat(e.addrtype,\" \").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?\"s=\".concat(e).concat(this.eol):\"\"}printInformation(e){return e?\"i=\".concat(e).concat(this.eol):\"\"}printUri(e){return e?\"u=\".concat(e).concat(this.eol):\"\"}printEmail(e){let t=\"\";for(const i of e)t+=\"e=\".concat(i).concat(this.eol);return t}printPhone(e){let t=\"\";for(const i of e)t+=\"e=\".concat(i).concat(this.eol);return t}printConnection(e){return e?\"c=\".concat(e.nettype,\" \").concat(e.addrtype,\" \").concat(e.address).concat(this.eol):\"\"}printBandwidth(e){let t=\"\";for(const i of e)t+=\"b=\".concat(i.bwtype,\":\").concat(i.bandwidth).concat(this.eol);return t}printTimeFields(e){let t=\"\";for(const i of e){t+=\"t=\".concat(i.time.startTime,\" \").concat(i.time.startTime).concat(this.eol);for(const e of i.repeats)t+=\"r=\".concat(e.repeatInterval,\" \").concat(e.typedTimes.join(\" \")).concat(this.eol);i.zoneAdjustments&&(t+=\"z=\",t+=\"z=\".concat(i.zoneAdjustments.map((e=>\"\".concat(e.time,\" \").concat(e.back?\"-\":\"\",\" \").concat(e.typedTime))).join(\" \")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?\"k=\".concat(e).concat(this.eol):\"\"}printAttributes(e){let t=\"\";for(const i of e)t+=\"a=\".concat(i.attField).concat(i.attValue?\":\".concat(i.attValue):\"\").concat(this.eol);return t}printMediaDescription(e){let t=\"\";for(const i of e)t+=this.printMedia(i.media),t+=this.printInformation(i.information),t+=this.printConnections(i.connections),t+=this.printBandwidth(i.bandwidths),t+=this.printKey(i.key),t+=this.printMediaAttributes(i);return t}printConnections(e){let t=\"\";for(const i of e)t+=this.printConnection(i);return t}printMedia(e){return\"m=\".concat(e.mediaType,\" \").concat(e.port,\" \").concat(e.protos.join(\"/\"),\" \").concat(e.fmts.join(\" \")).concat(this.eol)}printSessionAttributes(e){return new O(this.eol).print(e)}printMediaAttributes(e){return new N(this.eol).print(e)}}class w{constructor(e){A(this,\"eol\",void 0),this.eol=e}printIceUfrag(e){return void 0===e?\"\":\"a=ice-ufrag:\".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?\"\":\"a=ice-pwd:\".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?\"\":\"a=ice-options:\".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>\"a=fingerprint:\".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:\"\"}printExtmap(e){return e.map((e=>\"a=extmap:\".concat(e.entry).concat(e.direction?\"/\".concat(e.direction):\"\").concat(o).concat(e.extensionName).concat(e.extensionAttributes?\"\".concat(o).concat(e.extensionAttributes):\"\").concat(this.eol))).join(\"\")}printSetup(e){return void 0===e?\"\":\"a=setup:\".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>\"a=\".concat(e.attField).concat(e.attValue?\":\".concat(e.attValue):\"\").concat(this.eol))).join(\"\")}}class O extends w{print(e){let t=\"\";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t=\"\";return e.length>0&&(t+=e.map((e=>\"a=group:\".concat(e.semantic).concat(e.identificationTag.map((e=>\"\".concat(o).concat(e))).join(\"\")).concat(this.eol))).join(\"\")),t}printIceLite(e){return void 0===e?\"\":\"a=ice-lite\"+this.eol}printTlsId(e){return e?\"a=tls-id:\".concat(e).concat(this.eol):\"\"}printIdentity(e){return 0===e.length?\"\":e.map((e=>\"a=identity:\".concat(e.assertionValue).concat(e.extensions.map((e=>\"\".concat(o).concat(e.name).concat(e.value?\"=\".concat(e.value):\"\")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return\"\";let t=\"a=msid-semantic:\".concat(e.semantic);return e.applyForAll?t+=\"\".concat(o,\"*\"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>\"\".concat(o).concat(e)))),t+this.eol}}class N extends w{print(e){const t=e.attributes;let i=\"\";return i+=this.printRTCP(t.rtcp),i+=this.printIceUfrag(t.iceUfrag),i+=this.printIcePwd(t.icePwd),i+=this.printIceOptions(t.iceOptions),i+=this.printCandidates(t.candidates),i+=this.printRemoteCandidatesList(t.remoteCandidatesList),i+=this.printEndOfCandidates(t.endOfCandidates),i+=this.printFingerprints(t.fingerprints),i+=this.printSetup(t.setup),i+=this.printMid(t.mid),i+=this.printExtmap(t.extmaps),i+=this.printRTPRelated(t),i+=this.printPtime(t.ptime),i+=this.printMaxPtime(t.maxPtime),i+=this.printDirection(t.direction),i+=this.printSSRCGroups(t.ssrcGroups),i+=this.printSSRC(t.ssrcs),i+=this.printRTCPMux(t.rtcpMux),i+=this.printRTCPMuxOnly(t.rtcpMuxOnly),i+=this.printRTCPRsize(t.rtcpRsize),i+=this.printMSId(t.msids),i+=this.printImageattr(t.imageattr),i+=this.printRid(t.rids),i+=this.printSimulcast(t.simulcast),i+=this.printSCTPPort(t.sctpPort),i+=this.printMaxMessageSize(t.maxMessageSize),i+=this.printUnrecognized(t.unrecognized),i}printCandidates(e){return e.map((e=>\"a=candidate:\".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,\"typ\").concat(o).concat(e.type).concat(e.relAddr?\"\".concat(o,\"raddr\").concat(o).concat(e.relAddr):\"\").concat(e.relPort?\"\".concat(o,\"rport\").concat(o).concat(e.relPort):\"\").concat(Object.keys(e.extension).map((t=>\"\".concat(o).concat(t).concat(o).concat(e.extension[t]))).join(\"\")).concat(this.eol))).join(\"\")}printRemoteCandidatesList(e){return e.map((e=>\"a=remote-candidates:\".concat(e.join(o)).concat(this.eol))).join(\"\")}printEndOfCandidates(e){return void 0===e?\"\":\"a=end-of-candidates\"+this.eol}printRTPRelated(e){if(!e.payloads)return\"\";const t=e.payloads;let i=\"\";i+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback(\"*\",e))).join(\"\");for(const e of t)i+=this.printRtpMap(e.payloadType,e.rtpMap),i+=this.printFmtp(e.payloadType,e.fmtp),i+=e.rtcpFeedbacks.map((t=>this.printRTCPFeedback(e.payloadType,t))).join(\"\");return i}printFmtp(e,t){if(!t)return\"\";const i=Object.keys(t.parameters);return 1===i.length&&null===t.parameters[i[0]]?\"a=fmtp:\".concat(e).concat(o).concat(i[0]).concat(this.eol):\"a=fmtp:\".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>\"\".concat(e,\"=\").concat(t.parameters[e]))).join(\";\")).concat(this.eol)}printRtpMap(e,t){return t?\"a=rtpmap:\".concat(e).concat(o).concat(t.encodingName,\"/\").concat(t.clockRate).concat(t.encodingParameters?\"/\".concat(t.encodingParameters):\"\").concat(this.eol):\"\"}printRTCPFeedback(e,t){let i=\"a=rtcp-fb:\".concat(e).concat(o),n=t;return\"trr-int\"===n.type?i+=\"ttr-int\".concat(o).concat(n.interval):(i+=\"\".concat(n.type),n.parameter&&(i+=\"\".concat(o).concat(n.parameter),n.additional&&(i+=\"\".concat(o).concat(n.additional)))),i+this.eol}printPtime(e){return void 0===e?\"\":\"a=ptime:\".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?\"\":\"a=maxptime:\".concat(e).concat(this.eol)}printDirection(e){return void 0===e?\"\":\"a=\".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>\"a=ssrc:\".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?\":\".concat(e.attributes[t]):\"\").concat(this.eol))).join(\"\"))).join(\"\")}printRTCPMux(e){return void 0===e?\"\":\"a=rtcp-mux\".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?\"\":\"a=rtcp-mux-only\".concat(this.eol)}printRTCPRsize(e){return void 0===e?\"\":\"a=rtcp-rsize\".concat(this.eol)}printRTCP(e){if(void 0===e)return\"\";let t=\"a=rtcp:\".concat(e.port);return e.netType&&(t+=\"\".concat(o).concat(e.netType)),e.addressType&&(t+=\"\".concat(o).concat(e.addressType)),e.address&&(t+=\"\".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>\"a=msid:\".concat(e.id).concat(e.appdata?\"\".concat(o).concat(e.appdata):\"\").concat(this.eol))).join(\"\")}printImageattr(e){return e.map((e=>\"a=imageattr:\".concat(e).concat(this.eol))).join(\"\")}printRid(e){return e.map((e=>{let t=\"a=rid:\".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+=\"\".concat(o,\"pt=\").concat(e.payloads.join(\",\"))),e.params.length>0&&(t+=\"\".concat(o).concat(e.params.map((e=>\"depend\"===e.type?\"depend=\".concat(e.rids.join(\",\")):\"\".concat(e.type,\"=\").concat(e.val))).join(\";\"))),t+this.eol})).join(\"\")}printSimulcast(e){return void 0===e?\"\":\"a=simulcast:\".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?\"\":\"a=sctp-port:\".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?\"\":\"a=max-message-size:\".concat(e).concat(this.eol)}printMid(e){return void 0===e?\"\":\"a=mid:\".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>\"a=ssrc-group:\".concat(e.semantic).concat(e.ssrcIds.map((e=>\"\".concat(o).concat(e.toString(10)))).join(\"\")).concat(this.eol))).join(\"\")}}function D(e){return(new C).parse(e)}function P(e,t){return(new b).print(e,t)}}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i(8)})()}(SM);var gM=SM.exports;function RM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oy(\"SVC_MODE\");if(Oy(\"ENABLE_SVC\"))return function(e){return e in nb}(e)?e:nb.L1T3}function CM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function IM(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?CM(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CM(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function vM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;const{filterRTX:r,filterVideoFec:o,filterAudioFec:s,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:d}=i;let l=[],u=[],h=[],p=[],_=!1,E=!1;if(gM.parse(e).mediaDescriptions.forEach((e=>{n&&n!==e.attributes.direction||(\"video\"!==e.media.mediaType||_||(u=e.attributes.payloads,p=e.attributes.extmaps,_=!0),\"audio\"!==e.media.mediaType||E||(l=e.attributes.payloads,h=e.attributes.extmaps,E=!0))})),!p||0===u.length)throw new Error(\"Cannot get video capabilities from SDP.\");if(!h||0===l.length)throw new Error(\"Cannot get audio capabilities from SDP.\");if(u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:\"rrtr\"})})),l.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:\"rrtr\"})})),r&&(l=l.filter((e=>{var t;return\"rtx\"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return\"rtx\"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||\"\")}))),s&&(l=l.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||\"\")}))),a&&(null==a?void 0:a.length)>0&&(l=l.filter((e=>{var t;return Dn(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||\"\")}))),c&&(null==c?void 0:c.length)>0){const e=u.filter((e=>{var t;return Dn(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||\"\")}));u=e.concat(r?[]:GM(e,u))}const f=Oy(\"UNSUPPORTED_VIDEO_CODEC\");return f&&f.length>0&&(u=u.filter((e=>!(e.rtpMap&&Dn(f).call(f,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:l,videoCodecs:u,audioExtensions:h,videoExtensions:p}}function yM(e){const t=gM.parse(e);let i,n;for(const e of t.mediaDescriptions){if(!i){const t=e.attributes.iceUfrag,n=e.attributes.icePwd;if(!t||!n)throw new Error(\"Cannot get iceUfrag or icePwd from SDP.\");i={iceUfrag:t,icePwd:n}}if(!n){const t=e.attributes.fingerprints;t.length>0&&(n={fingerprints:t})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!i)throw new Error(\"Cannot get iceParameters or dtlsParameters from SDP.\");return{iceParameters:i,dtlsParameters:n}}function AM(e,t){const i=[],n=e.attributes.ssrcGroups.filter((e=>\"FID\"===e.semantic)),r=e.attributes.ssrcGroups.find((e=>\"SIM\"===e.semantic)),o=e.attributes.ssrcs;if(r)r.ssrcIds.forEach((e=>{var r;const o=null===(r=n.find((t=>t.ssrcIds[0]===e)))||void 0===r?void 0:r.ssrcIds[1];i.push({ssrcId:e,rtx:t?o:void 0})}));else if(n.length>0){const e=n[0].ssrcIds[0],r=n[0].ssrcIds[1];i.push({ssrcId:e,rtx:t?r:void 0})}else{if(0===o.length)throw new Error(\"No ssrcs found on local media description.\");i.push({ssrcId:o[0].ssrcId})}return i}function bM(e,t,i){const{cname:n}=e;let r;t?r=wM(t):(r=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:\"1\",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}))),Jy.debug(\"Using candidates from gateway.\"));const o={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},s={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let a;switch(e.dtlsParameters.role){case\"server\":a=\"passive\";break;case\"client\":a=\"active\";break;case\"auto\":a=\"actpass\"}const c=FM(e.rtpCapabilities),d=[];return Array.isArray(i)&&i.length>0&&i.forEach((e=>{d.push({kind:Hb.VIDEO,ssrcId:e.v,rtx:e.v_rtx,mslabel:\"\".concat(e.v,\"_\").concat(e.a)},{kind:Hb.AUDIO,ssrcId:e.a,mslabel:\"\".concat(e.v,\"_\").concat(e.a)})})),{dtlsParameters:o,iceParameters:s,candidates:r,rtpCapabilities:c,setup:a,cname:n,preSSRCs:d}}function wM(e){let t=[];return e.ip&&\"number\"==typeof e.port&&(t=[{foundation:\"udpcandidate\",componentId:\"1\",transport:\"udp\",priority:\"2103266323\",connectionAddress:e.ip,port:e.port.toString(),type:\"host\",extension:{}}],Jy.debug(\"Using remote candidate from AP \".concat(e.ip,\":\").concat(e.port)),e.ip6&&(t.push({foundation:\"udpcandidate\",componentId:\"1\",transport:\"udp\",priority:\"2103266323\",connectionAddress:e.ip6,port:e.port.toString(),type:\"host\",extension:{}}),Jy.debug(\"Using IPV6 remote candidate from AP \".concat(e.ip6,\":\").concat(e.port)))),t}function OM(e,t,i){const n=[],r=[];return e.forEach((e=>{let{ssrcId:o,rtx:s}=e;const a=Zv(8,\"track-\"),c={ssrcId:o,attributes:IM({label:a,mslabel:i=i||Zv(10,\"\"),msid:\"\".concat(i,\" \").concat(a)},t&&{cname:t})};if(n.push(c),void 0!==s){const e={ssrcId:s,attributes:IM({label:a,mslabel:i,msid:\"\".concat(i,\" \").concat(a)},t&&{cname:t})};n.push(e),r.push({semantic:\"FID\",ssrcIds:[o,s]})}})),e.length>1&&r.push({semantic:\"SIM\",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:n,ssrcGroups:r}}function NM(e,t){t instanceof $L&&e.attributes.payloads.forEach((e=>{var i;const n=null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase();if(!n||-1===[\"opus\",\"pcmu\",\"pcma\",\"g722\"].indexOf(n))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime=\"10\",e.fmtp.parameters.useinbandfec=\"1\";const r=t._encoderConfig;r&&\"pcmu\"!==n&&\"pcma\"!==n&&\"g722\"!==n&&(r.bitrate&&!PI()&&(e.fmtp.parameters.maxaveragebitrate=\"\".concat(Math.floor(1e3*r.bitrate))),r.sampleRate&&(e.fmtp.parameters.maxplaybackrate=\"\".concat(r.sampleRate),e.fmtp.parameters[\"sprop-maxcapturerate\"]=\"\".concat(r.sampleRate)),r.stereo&&(e.fmtp.parameters.stereo=\"1\",e.fmtp.parameters[\"sprop-stereo\"]=\"1\"))}))}function DM(e){const t=e.attributes.unrecognized.findIndex((e=>\"x-google-flag\"===e.attField&&\"conference\"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function PM(e,t){var i;if(!(t instanceof Gk&&t._encoderConfig&&-1===t._hints.indexOf(ZD.SCREEN_TRACK)))return;const n=t._encoderConfig;LD().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,i;Dn(t=[\"h264\",\"h265\",\"vp8\",\"vp9\",\"av1\"]).call(t,(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||\"\")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters[\"x-google-min-bitrate\"]=\"\".concat(n.bitrateMin))})),LD().supportMinBitrate&&!Dn(i=t._hints).call(i,ZD.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,i;Dn(t=[\"h264\",\"h265\",\"vp8\",\"vp9\",\"av1\"]).call(t,(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||\"\")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters[\"x-google-start-bitrate\"]=\"\".concat(Oy(\"X_GOOGLE_START_BITRATE\")||Math.floor(n.bitrateMax)))}))}function LM(e){if(\"video\"!==e.media.mediaType)return;const t=vI();if(t.name!==gI.SAFARI&&t.os!==SI.IOS)return;const i=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==i&&e.attributes.extmaps.splice(i,1)}function kM(e,t,i){if(!t)return;let n,r;if(\"video\"===e.media.mediaType?(n=i.videoExtensions,r=i.videoCodecs):(n=i.audioExtensions,r=i.audioCodecs),!0===t.twcc){const t=n.find((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName));if(t){e.attributes.extmaps.find((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"});const i=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>\"transport-cc\"===e.type))))))}(r,e.attributes.payloads);i.forEach((e=>{e.rtcpFeedbacks.find((e=>\"transport-cc\"===e.type))||e.rtcpFeedbacks.push({type:\"transport-cc\"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>\"transport-cc\"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=n.find((e=>\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"===e.extensionName));if(t){e.attributes.extmaps.find((e=>\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"});const i=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>\"goog-remb\"===e.type))))))}(r,e.attributes.payloads);i.forEach((e=>{e.rtcpFeedbacks.find((e=>\"goog-remb\"===e.type))||e.rtcpFeedbacks.push({type:\"goog-remb\"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>\"goog-remb\"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function MM(e,t,i){if(PI())return;if(\"video\"!==e.media.mediaType)return;if(!(t instanceof Gk))return;if(\"vp9\"!==i&&\"vp8\"!==i)return;if(\"vp8\"===i&&!Oy(\"SIMULCAST\"))return;if(\"vp9\"===i&&Oy(\"ENABLE_SVC\"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const n=\"vp8\"===i?2:t._scalabilityMode.numSpatialLayers,r=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>\"FID\"===e.semantic&&e.ssrcIds[0]===r.ssrcId)),s={semantic:\"SIM\",ssrcIds:[r.ssrcId]};for(let t=1;t<n;t++)e.attributes.ssrcs.push({ssrcId:r.ssrcId+t,attributes:Bv(r.attributes)}),s.ssrcIds.push(r.ssrcId+t),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+t,attributes:Bv(r.attributes)}),e.attributes.ssrcGroups.push({semantic:\"FID\",ssrcIds:[r.ssrcId+t,o.ssrcIds[1]+t]}));e.attributes.ssrcGroups.unshift(s)}async function UM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new RTCPeerConnection;i.addTransceiver(\"video\",{direction:\"sendonly\"}),i.addTransceiver(\"audio\",{direction:\"sendonly\"}),i.addTransceiver(\"video\",{direction:\"recvonly\"}),i.addTransceiver(\"audio\",{direction:\"recvonly\"});const n=(await i.createOffer()).sdp,{send:r,recv:o,sendrecv:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n=vM(i,e,t,\"sendonly\"),r=vM(i,e,t,\"recvonly\"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(VM(n,r,\"videoExtensions\",o,s,a),VM(n,r,\"videoCodecs\",o,s,a),VM(n,r,\"audioExtensions\",o,s,a),VM(n,r,\"audioCodecs\",o,s,a),Oy(\"RAISE_H264_BASELINE_PRIORITY\")){const e=a.videoCodecs.findIndex((e=>{var t,i;return\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&\"42001f\"===(null===(i=e.fmtp)||void 0===i?void 0:i.parameters[\"profile-level-id\"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){Jy.debug(\"raising H264 baseline profile priority\");const i=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,i)}-1!==t&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,i;return!(\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&\"42001f\"!==(null===(i=e.fmtp)||void 0===i?void 0:i.parameters[\"profile-level-id\"]))}))),-1!==t&&Oy(\"FILTER_SEND_H264_BASELINE\")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,i;return!(\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&\"42001f\"!==(null===(i=e.fmtp)||void 0===i?void 0:i.parameters[\"profile-level-id\"]))})))}}return{send:o,recv:s,sendrecv:a}}(e,t,n);try{i.close()}catch(e){}return{send:r,recv:o,sendrecv:s}}function xM(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=vM(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},\"recvonly\"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(VM(e,t,\"videoExtensions\",i,n,r),VM(e,t,\"videoCodecs\",i,n,r),VM(e,t,\"audioExtensions\",i,n,r),VM(e,t,\"audioCodecs\",i,n,r),Oy(\"RAISE_H264_BASELINE_PRIORITY\")){const e=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"===e.fmtp.parameters[\"profile-level-id\"]));if(-1!==e){const t=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){Jy.debug(\"raising H264 baseline profile priority\");const i=r.videoCodecs[e];r.videoCodecs.splice(e,1),r.videoCodecs.splice(t,0,i)}-1!==t&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"!==e.fmtp.parameters[\"profile-level-id\"]))))}}return{send:i,recv:n,sendrecv:r}}function VM(e,t,i,n,r,o){if(\"videoExtensions\"===i||\"audioExtensions\"===i){const s=[];return e[i].forEach((e=>{t[i].some(((t,i)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(i),!0}))?o[i].push(e):n[i].push(e)})),void t[i].forEach(((e,t)=>{-1===s.indexOf(t)&&r[i].push(e)}))}if(\"videoCodecs\"===i||\"audioCodecs\"===i){const s=[];return e[i].forEach((e=>{t[i].some(((t,i)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(i),!0}))?o[i].push(e):n[i].push(e)})),void t[i].forEach(((e,t)=>{-1===s.indexOf(t)&&r[i].push(e)}))}}function FM(e){const{send:t,recv:i,sendrecv:n}=e;if(!n){if(!t||!i)throw new Error(\"cannot merge rtp capabilities because one of send or recv is empty!\");return{send:t,recv:i}}let r,o;return t?(r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r.audioCodecs=[...t.audioCodecs,...n.audioCodecs],r.videoCodecs=[...t.videoCodecs,...n.videoCodecs],r.audioExtensions=[...t.audioExtensions,...n.audioExtensions],r.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):r=n,i?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...i.audioCodecs,...n.audioCodecs],o.videoCodecs=[...i.videoCodecs,...n.videoCodecs],o.audioExtensions=[...i.audioExtensions,...n.audioExtensions],o.videoExtensions=[...i.videoExtensions,...n.videoExtensions]):o=n,{send:r,recv:o}}function BM(e){if(\"audio\"!==e.media.mediaType)return;e.attributes.payloads.filter((e=>{var t;return\"opus\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo=\"1\",e.fmtp.parameters[\"sprop-stereo\"]=\"1\"}))}function jM(e,t,i,n){let r=[];if(e===Hb.VIDEO){if(Oy(\"H264_PROFILE_LEVEL_ID\")&&\"h264\"===n&&(r=t.videoCodecs.filter((e=>{var t;return Dn(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(t,n)&&e&&e.fmtp&&e.fmtp.parameters[\"profile-level-id\"]===Oy(\"H264_PROFILE_LEVEL_ID\")}))),!Array.isArray(r)||0===r.length){let e=[];const o=[],s=[],a=[];if(i.videoCodecs.forEach((t=>{const i=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||\"\";Dn(i).call(i,n)?e.push(t):Dn(i).call(i,\"vp9\")?o.push(t):Dn(i).call(i,\"vp8\")?s.push(t):Dn(i).call(i,\"h264\")&&a.push(t)})),0===e.length){let t=\"\";0!==o.length?(e=o,t=\"vp9\"):0!==s.length?(e=s,t=\"vp8\"):0!==a.length&&(e=a,t=\"h264\"),Jy.warning(\"codec \".concat(n,\" not included in rtpCapabilities, fallback to default payloads: \").concat(t))}0!==e.length&&(r=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(0===r.length&&(Jy.warning(\"codec \".concat(n,\" not included in rtpCapabilities, fallback to default payloads: \").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),r=t.videoCodecs),Oy(\"USE_PUB_RTX\")||Oy(\"USE_SUB_RTX\")){const e=GM(r,t.videoCodecs);r=[...r,...e]}}else r=t.audioCodecs.filter((e=>{var t;return Dn(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(t,n)})),0===r.length&&(Jy.warning(\"codec \".concat(n,\" not included in rtpCapabilities, fallback to opus\")),r=t.audioCodecs.filter((e=>{var t;return Dn(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(t,\"opus\")})));return r}function GM(e,t){const i=e.map((e=>e.payloadType.toString()));return t.filter((e=>e.rtpMap&&\"rtx\"===e.rtpMap.encodingName&&e.fmtp&&e.fmtp.parameters.apt&&Dn(i).call(i,e.fmtp&&e.fmtp.parameters.apt)))}async function WM(e,t,i){const n=t.toString(),r=KM(n,\"offer\",\"remote\",\"exchangeSDP\");await e.setRemoteDescription({type:\"offer\",sdp:n});const o=await e.createAnswer();if(!o.sdp)throw new Error(\"cannot get answer sdp\");let s=o.sdp;s=HM(s,i||{}),null==r||r(s||\"\"),await e.setLocalDescription({type:\"answer\",sdp:s})}function HM(e,t,i){const n=gM.parse(e),{useXR:r}=t;return n.mediaDescriptions.forEach((e=>{var t;e.attributes.mid&&(Array.isArray(i)&&!Dn(i).call(i,e.attributes.mid)||(\"audio\"===e.media.mediaType&&BM(e),r&&Dn(t=[\"audio\",\"video\"]).call(t,e.media.mediaType)&&e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>\"rrtr\"===e.type))&&e.rtcpFeedbacks.push({type:\"rrtr\"})}))))})),gM.print(n)}function KM(e,t,i,n){if(Oy(\"SDP_LOGGING\"))return Jy.upload(\"exchanging \".concat(i,\" \").concat(t,\" SDP during P2PConnection.\").concat(n,\"\\n\"),e),\"offer\"===t?e=>{KM(e,\"answer\",\"local\"===i?\"remote\":\"local\",n)}:void 0}function YM(e,t){return typeof Oy(e)===t?Oy(e):void 0}function qM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function zM(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?qM(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qM(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const JM=new Map;class XM extends mv{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,\"DISCONNECTED\"===e&&this._disconnectedReason?this.emit(kb.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(kb.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){Jy.debug(\"[\".concat(this.store.clientId,\"] set joinGatewayStartTime at \").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),ng(this,\"store\",void 0),ng(this,\"joinInfo\",void 0),ng(this,\"key\",void 0),ng(this,\"ntpOffset\",0),ng(this,\"signal\",void 0),ng(this,\"role\",void 0),ng(this,\"inChannelInfo\",{joinAt:null,duration:0}),ng(this,\"spec\",void 0),ng(this,\"_state\",\"DISCONNECTED\"),ng(this,\"_statsCollector\",void 0),ng(this,\"_disconnectedReason\",void 0),ng(this,\"isSignalRecover\",!1),ng(this,\"hasChangeBGPAddress\",!1),ng(this,\"trafficStatsInterval\",void 0),ng(this,\"networkQualityInterval\",void 0),ng(this,\"_joinGatewayStartTime\",0),ng(this,\"_signalTimeout\",!1),ng(this,\"_clientRoleOptions\",void 0),ng(this,\"_isProactiveJoin\",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new TM(zM(zM({},t),{},{retryConfig:t.websocketRetryConfig}),e):new Aw(zM(zM({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||\"audience\",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,i){this.store.joinGatewayStart(),\"disabled\"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const n=Date.now();let r=JM.get(e.cname);if(r||(r=new Map,JM.set(e.cname,r)),this._isProactiveJoin=!0,r.has(e.uid)){const t=new mb(tv.UID_CONFLICT);throw rA.joinGateway(e.sid,{lts:n,succ:!1,ec:t.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:\"0\",preload:e.preload}),this._isProactiveJoin=!1,t}r.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=n;const s=e.proxyServer;try{Jy.debug(\"[\".concat(this.store.clientId,\"] use websocket join uid \").concat(o));const t=e.gatewayAddrs.map((t=>{let{address:i}=t;const[n,r]=i.split(\":\"),o={host:n,port:r};return e.proxyServer&&(o.proxy=e.proxyServer),o}));o=(await this.signal.init(t,i)).uid,Jy.debug(\"[\".concat(this.store.clientId,\"] websocket join uid \").concat(o,\" cost \").concat(Date.now()-this.joinGatewayStartTime))}catch(t){var a;throw Jy.error(\"[\".concat(this.store.clientId,\"] User join failed\"),t.toString()),rA.joinGateway(e.sid,{lts:n,succ:!1,ec:(null===(a=t.data)||void 0===a?void 0:a.desc)||t.code,errorMsg:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:\"0\",preload:e.preload}),this._isProactiveJoin=!1,r.delete(e.uid),this.signal.close(),t}return this.state=\"CONNECTED\",this.inChannelInfo.joinAt=Date.now(),Jy.debug(\"[\".concat(this.store.clientId,\"] Connected to gateway server\")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{Jy.warning(\"[\".concat(this.store.clientId,\"] get traffic stats error\"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(kb.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(kb.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):\"CONNECTED\"===this.state&&this._statsCollector.trafficStats?this.emit(kb.NETWORK_QUALITY,{uplinkNetworkQuality:kw(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:kw(this._statsCollector.trafficStats.B_dnq)}):this.emit(kb.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(\"DISCONNECTED\"!==this.state){t!==vv.FALLBACK&&(this.state=\"DISCONNECTING\");try{e||this.signal.connectionState!==lb.CONNECTED||await function(e,t){return t===1/0?e:Gh.race([e,Xv(t)])}(this.signal.request(hb.LEAVE,void 0,!0),3e3)}catch(e){Jy.warning(\"[\".concat(this.store.clientId,\"] leave request failed, ignore\"),e)}this.signal.close(t),t!==vv.FALLBACK&&(this.state=\"DISCONNECTED\"),this.reset()}}async publish(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));const n={state:\"offer\",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:Oy(\"PUB_EXTEND\"),twcc:!!Oy(\"PUBLISH_TWCC\"),rtx:!!Oy(\"USE_PUB_RTX\")};try{return(await this.signal.request(hb.PUBLISH,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===db.ERR_PUBLISH_REQUEST_INVALID)return Jy.warning(\"[\".concat(this.store.clientId,\"] receive publish error code, retry\"),n.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw n}}async publishDataChannel(e,t,i){var n;if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));const r={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(n=t.maxRetransmits)&&void 0!==n?n:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(hb.PUBLISH_DATASTREAM,r,!0)}catch(n){if(i&&n.data&&n.data.code===db.ERR_PUBLISH_REQUEST_INVALID)return Jy.warning(\"[\".concat(this.store.clientId,\"] receive publish datachannels error code, retry\"),n.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw n}}async unpublish(e,t){try{if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));await this.signal.request(hb.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){Jy.warning(\"[\".concat(this.store.clientId,\"] unpublish warning: \"),e)}}async unpublishDataChannel(e){try{if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));await Gh.all(e.map((e=>this.signal.request(hb.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){Jy.warning(\"unpublish datachannels warning: \",e)}}async presubscribe(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not presubscribe when connection state is \".concat(this.state));const n={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Oy(\"SUBSCRIBE_TWCC\"),rtx:!!Oy(\"USE_SUB_RTX\")||void 0,extend:Oy(\"SUB_EXTEND\"),svc:Array.isArray(Oy(\"SVC\"))&&0!==Oy(\"SVC\").length?Oy(\"SVC\"):void 0};try{return await this.signal.request(hb.PRE_SUBSCRIBE,n,!0)}catch(n){if(i&&n.data&&n.data.code===db.ERR_SUBSCRIBE_REQUEST_INVALID)return Jy.warning(\"[\".concat(this.store.clientId,\"] pre-subscribe error, retry\"),n.toString()),this.presubscribe(e,t,!1);throw n}}async subscribe(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not subscribe when connection state is \".concat(this.state));const n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Oy(\"SUBSCRIBE_TWCC\"),rtx:!!Oy(\"USE_SUB_RTX\"),extend:Oy(\"SUB_EXTEND\"),ssrcId:t.ssrcId,svc:Array.isArray(Oy(\"SVC\"))&&0!==Oy(\"SVC\").length?Oy(\"SVC\"):void 0};try{return(await this.signal.request(hb.SUBSCRIBE,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===db.ERR_SUBSCRIBE_REQUEST_INVALID)return Jy.warning(\"[\".concat(this.store.clientId,\"] receiver subscribe error code, retry\"),n.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw n}}async subscribeDataChannel(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not subscribe datachannel when connection state is \".concat(this.state));const n={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(hb.SUBSCRIBE_DATASTREAM,n,!0)}catch(n){if(i&&n.data&&n.data.code===db.ERR_SUBSCRIBE_REQUEST_INVALID)return Jy.warning(\"[\".concat(this.store.clientId,\"] receiver subscribe datachannel error code, retry\"),n.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw n}}async subscribeAll(e,t){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not massSubscribe when connection state is \".concat(this.state));const i={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!Oy(\"USE_SUB_RTX\"),twcc:!!Oy(\"SUBSCRIBE_TWCC\"),svc:Array.isArray(Oy(\"SVC\"))&&0!==Oy(\"SVC\").length?Oy(\"SVC\"):void 0};try{return await this.signal.request(hb.SUBSCRIBE_STREAMS,i,!0)}catch(i){if(t&&i.data&&i.data.code===db.ERR_SUBSCRIBE_REQUEST_INVALID)return Jy.warning(\"[\".concat(this.store.clientId,\"] receiver massSubscribe error code, retry\"),i.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw i}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,i=e.width,n=e.height,r=!0;return\"number\"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(r=!1)),\"number\"!=typeof i&&(i=i.exact||i.ideal||i.max||i.min||0,i||(r=!1)),\"number\"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,t||(r=!1)),r?{stream_type:0,width:i,height:n,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(hb.SET_VIDEO_PROFILE,t);Jy.debug(\"[\".concat(this.store.clientId,\"] encoder config is not complete, do not report to gateway\"))}async unsubscribe(e,t){try{await this.signal.request(hb.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){Jy.warning(\"[\".concat(this.store.clientId,\"] unsubscribe warning: \"),e)}}async unsubscribeDataChannel(e,t){try{if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new mb(tv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));await Gh.all(e.map((e=>this.signal.request(hb.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){Jy.warning(\"unsubscribeDataChannel warning: \",e)}}async massUnsubscribe(e){try{await this.signal.request(hb.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){Jy.warning(\"[\".concat(this.store.clientId,\"] massUnsubscribeAll warning: \"),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(hb.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(hb.GATEWAY_INFO)}async renewToken(e){await this.signal.request(hb.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),\"CONNECTED\"!==this.state)return void(this.role=e);let i,n=0;\"audience\"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(i=this._clientRoleOptions.delay,n=1):n=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:n=0,await this.signal.request(hb.SET_CLIENT_ROLE,{role:e,level:n,delay:i,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(hb.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(hb.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(hb.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(hb.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(hb.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,i){if(this.signal instanceof TM)return this.signal.sendExtensionMessage(e,t,i)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),zM({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(hb.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=JM.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith(\"dc\")?e.match(/(dc\\:\\/\\/)?([^:]+):(\\d+)/):e.match(/(wss\\:\\/\\/)?([^:]+):(\\d+)/),t?{username:sA.username,password:sA.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}((\"disabled\"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||\"\");this.joinInfo.turnServer.serversFromGateway=[],e&&\"off\"!==this.joinInfo.turnServer.mode&&\"disabled\"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(zM(zM({},sA),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(\"CONNECTED\"!==this.state)return;const e=await this.signal.request(hb.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&Fv((()=>{this.emit(kb.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new mb(tv.UNEXPECTED_ERROR,\"can not generate join message, no join info\");const t=Object.assign({},this.joinInfo.apResponse);let i=Oy(\"REPORT_APP_SCENARIO\");if(\"string\"!=typeof i)try{i=JSON.stringify(i)}catch(e){i=void 0}i&&i.length>128&&(i=void 0);const n=!(PI()||MI(87)||MD())&&(\"boolean\"==typeof Oy(\"ENABLE_PRE_SUB\")&&Oy(\"ENABLE_PRE_SUB\")),r=!MD()&&YM(\"ENABLE_PREALLOC_PC\",\"boolean\"),o=zM({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Cy,browser:navigator.userAgent,process_id:Oy(\"PROCESS_ID\"),mode:this.store.useP2P?\"p2p\":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:Oy(\"JOIN_EXTEND\"),details:{6:this.joinInfo.stringUid,cservice_map:\"proxy3\"===this.joinInfo.cloudProxyServer?\"1\":\"proxy5\"===this.joinInfo.cloudProxyServer?\"2\":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:i,attributes:{userAttributes:{enablePublishedUserList:Oy(\"ENABLE_PUBLISHED_USER_LIST\"),maxSubscription:Oy(\"MAX_SUBSCRIPTION\"),subscribeAudioFilterTopN:\"number\"==typeof Oy(\"SUBSCRIBE_AUDIO_FILTER_TOPN\")?Oy(\"SUBSCRIBE_AUDIO_FILTER_TOPN\"):void 0,enablePublishAudioFilter:\"boolean\"==typeof Oy(\"ENABLE_PUBLISH_AUDIO_FILTER\")?Oy(\"ENABLE_PUBLISH_AUDIO_FILTER\"):void 0,enableUserLicenseCheck:\"boolean\"==typeof Oy(\"ENABLE_USER_LICENSE_CHECK\")?Oy(\"ENABLE_USER_LICENSE_CHECK\"):void 0,enableRTX:!0===Oy(\"USE_PUB_RTX\")||!0===Oy(\"USE_SUB_RTX\")||void 0,disableFEC:Oy(\"DISABLE_FEC\"),enableNTPReport:!!Oy(\"ENABLE_NTP_REPORT\")||void 0,enableInstantVideo:!!Oy(\"ENABLE_INSTANT_VIDEO\")||void 0,enableFulllinkAvSync:!!Oy(\"ENABLE_FULL_LINK_AV_SYNC\")||void 0,enableDataStream2:YM(\"ENABLE_DATASTREAM_2\",\"boolean\"),enableAutFeedback:!!Oy(\"ENABLE_AUT_FEEDBACK\")||void 0,rtm2Flag:\"number\"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!Oy(\"ENABLE_USER_AUTO_REBALANCE_CHECK\"),enableXR:YM(\"USE_XR\",\"boolean\"),enableLossbasedBwe:YM(\"ENABLE_LOSSBASED_BWE\",\"boolean\"),enableAutCC:!!Oy(\"ENABLE_AUT_CC\")||void 0,enableCCFallback:YM(\"ENABLE_CC_FALLBACK\",\"boolean\"),enablePreallocPC:r,preSubNum:n?YM(\"PRE_SUB_NUM\",\"number\"):void 0,enablePubTWCC:YM(\"PUBLISH_TWCC\",\"boolean\"),enableSubTWCC:YM(\"SUBSCRIBE_TWCC\",\"boolean\"),enablePubRTX:YM(\"USE_PUB_RTX\",\"boolean\"),enableSubRTX:YM(\"USE_SUB_RTX\",\"boolean\"),enableSubSVC:Oy(\"ENABLE_SVC\")?Oy(\"ENABLE_SVC_DEFAULT_CODECS\"):Array.isArray(Oy(\"SVC\"))&&0!==Oy(\"SVC\").length?Oy(\"SVC\"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(o.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(o.aes_mode=this.joinInfo.aesmode,Oy(\"ENCRYPT_AES\")?(o.aes_secret=this.joinInfo.aespassword,o.aes_encrypt=!0):o.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(o.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(o.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(o.default_video_stream=this.joinInfo.defaultVideoStream),o}getRejoinMessage(){if(!this.joinInfo)throw new mb(tv.UNEXPECTED_ERROR,\"can not generate rejoin message, no join info\");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(ub.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Dn(t=[\"tryNext\",\"recover\"]).call(t,e)&&this.joinInfo&&rA.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(ub.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(ub.WS_RECONNECTING,(e=>{this.joinInfo&&rA.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Ov.NETWORK_ERROR}),this.joinInfo&&(this.state=\"RECONNECTING\",rA.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:\"live\"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:\"audience\"===this.role?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(ub.WS_CLOSED,(e=>{let t;switch(e){case vv.LEAVE:t=Ov.LEAVE;break;case vv.UID_BANNED:case vv.IP_BANNED:case vv.CHANNEL_BANNED:case vv.SERVER_ERROR:t=Ov.SERVER_ERROR;break;case vv.FALLBACK:t=Ov.FALLBACK;break;case vv.LICENSE_MISSING:case vv.LICENSE_EXPIRED:case vv.LICENSE_MINUTES_EXCEEDED:case vv.LICENSE_PERIOD_INVALID:case vv.LICENSE_MULTIPLE_SDK_SERVICE:case vv.LICENSE_ILLEGAL:case vv.TOKEN_EXPIRE:t=e;break;default:t=Ov.NETWORK_ERROR}Jy.debug(\"[\".concat(this.store.clientId,\"] [signal] websocket closed, reason: \").concat(t||\"undefined -> \"+Ov.NETWORK_ERROR)),this.joinInfo&&rA.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===vv.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==vv.FALLBACK&&(this.state=\"DISCONNECTED\"),this.reset()})),this.signal.on(ub.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state=\"CONNECTED\",this.joinInfo&&(\"audience\"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(Jy.debug(\"[\".concat(this.store.clientId,\"] patch to send set client role, role: \").concat(this.role,\", mode: \").concat(this.spec.mode,\", level: \").concat(this._clientRoleOptions.level,\", delay: \").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),rA.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:\"0\",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/);if(!e)return void Jy.error(\"[\".concat(this.store.clientId,\"] set local access point after joined failed: \").concat(e));wy(\"EVENT_REPORT_DOMAIN\",e[1]),wy(\"EVENT_REPORT_BACKUP_DOMAIN\",e[1]),wy(\"LOG_UPLOAD_SERVER\",\"\".concat(e[1],\":6444\"))}})),this.signal.on(_b.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(ub.REQUEST_RECOVER,((e,t,i)=>{if(!this.joinInfo)return i(new mb(tv.UNEXPECTED_ERROR,\"gateway: can not recover, no join info\"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Pv(this,kb.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i)})),this.signal.on(ub.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:i,dtlsParameters:n,rtpCapabilities:r}=await Pv(this,kb.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:n,rtpCapabilities:r,version:\"2\"}}))})),this.signal.on(ub.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(ub.REPORT_JOIN_GATEWAY,((e,t)=>{if(!this.joinInfo)return;let i,n=\"\";var r;e instanceof mb?(i=(null===(r=e.data)||void 0===r?void 0:r.desc)||e.code,n=e.message):i=e;rA.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:i,errorMsg:n,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:\"0\",preload:this.joinInfo.preload}),this._isProactiveJoin=!1})),this.signal.on(ub.IS_P2P_DISCONNECTED,(e=>{e(Mv(this,kb.IS_P2P_DISCONNECTED))})),this.signal.on(ub.DISCONNECT_P2P,(()=>{this.emit(kb.DISCONNECT_P2P)})),this.signal.on(ub.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(ub.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(ub.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(kb.JOIN_RESPONSE,e,t)})),this.signal.on(ub.PRE_CONNECT_PC,(async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const e=this.getCurrentGatewayAddress(),t=Oy(\"FINGERPRINT\")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){const i=wM(e);this.emit(kb.PRE_CONNECT_PC,{candidates:i,fingerprint:t})}}}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(hb.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] tryUnsubBeforeResub warning\"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(hb.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw Jy.warning(\"unsubscribe datachannel warning\",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(hb.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] tryUnpubBeforeRepub warning: \"),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(hb.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw Jy.warning(\"unpublish datastream warning: \",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(hb.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] tryMassUnsubBeforeResub warning\"),e),e}}async muteLocal(e,t){const i={action:e.find((e=>e.stream_type===Lb.Audio))?\"mute_local_audio\":\"mute_local_video\",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(hb.CONTROL,i,!0,!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] gateway muteLocal warning: \"),e),e}}async unmuteLocal(e,t){const i={action:e.find((e=>e.stream_type===Lb.Audio))?\"unmute_local_audio\":\"unmute_local_video\",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(hb.CONTROL,i,!0,!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] gateway unmuteLocal warning: \"),e),e}}async muteRemote(e,t){const i={action:e===Hb.AUDIO?\"mute_remote_audio\":\"mute_remote_video\",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(hb.CONTROL,i,!0,!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] gateway muteRemote warning: \"),e),e}}async unmuteRemote(e,t){const i={action:e===Hb.AUDIO?\"unmute_remote_audio\":\"unmute_remote_video\",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(hb.CONTROL,i,!0,!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] gateway unmuteRemote warning: \"),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(hb.RESTART_ICE,t,!0)}catch(e){throw Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.restartICE warning: \"),e),e}}reconnect(){\"CONNECTED\"===this.state&&this.signal.reconnect(void 0,Ov.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!Oy(\"GATEWAY_WSS_ADDRESS\"))return Oy(\"USE_CANDIDATE_FROM_AP_DETAIL\")&&null!==(e=this.joinInfo)&&void 0!==e&&e.apGatewayAddress?(Jy.debug(\"[\".concat(this.store.clientId,\"] use candidate from ap detail, \").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):null!==(t=this.joinInfo)&&void 0!==t&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(hb.SET_PARAMETER,{enablePublishAudioFilter:e})}}let QM=0,ZM=0;function $M(e,t,i,n){return new Gh(((r,o)=>{t.timeout=t.timeout||Oy(\"HTTP_CONNECT_TIMEOUT\"),t.responseType=t.responseType||\"json\",t.data&&!i?(t.data=JSON.stringify(t.data),QM+=zv(t.data)):i&&(t.data.size?QM+=t.data.size:t.data instanceof FormData?QM+=Jv(t.data):QM+=zv(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers[\"Content-Type\"]=t.headers[\"Content-Type\"]||\"application/json\",t.method=\"POST\",t.url=e,pI.request(t).then((e=>{\"string\"==typeof e.data?ZM+=zv(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?ZM+=e.data.byteLength:ZM+=zv(JSON.stringify(e.data)),n&&r({data:e.data,headers:e.headers}),r(e.data)})).catch((e=>{pI.isCancel(e)?o(new mb(tv.OPERATION_ABORTED,\"cancel token canceled\")):\"ECONNABORTED\"===e.code?o(new mb(tv.NETWORK_TIMEOUT,e.message)):e.response?o(new mb(tv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new mb(tv.NETWORK_ERROR,e.message))}))}))}\n/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */!function(){var e;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e};var r,o=function(e){e=[\"object\"==typeof globalThis&&globalThis,e,\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof t&&t];for(var i=0;i<e.length;++i){var n=e[i];if(n&&n.Math==Math)return n}throw Error(\"Cannot find global object\")}(this);function s(e,t){if(t)e:{var i=o;e=e.split(\".\");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in i))break e;i=i[s]}(t=t(r=i[e=e[e.length-1]]))!=r&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t=\"undefined\"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}if(s(\"Symbol\",(function(e){function t(e,t){this.A=e,n(this,\"description\",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var i=\"jscomp_symbol_\"+(1e9*Math.random()>>>0)+\"_\",r=0;return function e(n){if(this instanceof e)throw new TypeError(\"Symbol is not a constructor\");return new t(i+(n||\"\")+\"_\"+r++,n)}})),s(\"Symbol.iterator\",(function(e){if(e)return e;e=Symbol(\"Symbol.iterator\");for(var t=\"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"),r=0;r<t.length;r++){var s=o[t[r]];\"function\"==typeof s&&\"function\"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(i(this))}})}return e})),\"function\"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var d;e:{var l={};try{l.__proto__={a:!0},d=l.a;break e}catch(e){}d=!1}r=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+\" is not extensible\");return e}:null}var u=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError(\"Generator is already running\");e.m=!0}function _(e,t){return e.h=3,{value:t}}function E(e){this.g=new h,this.G=e}function f(e,t,i,n){try{var r=t.call(e.g.j,i);if(!(r instanceof Object))throw new TypeError(\"Iterator result \"+r+\" is not an object\");if(!r.done)return e.g.m=!1,r;var o=r.value}catch(t){return e.g.j=null,e.g.s(t),m(e)}return e.g.j=null,n.call(e.g,o),m(e)}function m(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function T(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var i=e.g.j;return i?f(e,\"return\"in i?i.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),m(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e,t){return t=new T(new E(t)),u&&e.prototype&&u(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},E.prototype.o=function(e){return p(this.g),this.g.j?f(this,this.g.j.next,e,this.g.o):(this.g.o(e),m(this))},E.prototype.s=function(e){return p(this.g),this.g.j?f(this,this.g.j.throw,e,this.g.o):(this.g.s(e),m(this))},s(\"Array.prototype.entries\",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+=\"\");var i=0,n=!1,r={next:function(){if(!n&&i<e.length){var r=i++;return{value:t(r,e[r]),done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}})),\"undefined\"!=typeof Blob&&(\"undefined\"==typeof FormData||!FormData.prototype.keys)){var g=function(e,t){for(var i=0;i<e.length;i++)t(e[i])},R=function(e){return e.replace(/\\r?\\n|\\r/g,\"\\r\\n\")},C=function(e,t,i){return t instanceof Blob?(i=void 0!==i?String(i+\"\"):\"string\"==typeof t.name?t.name:\"blob\",t.name===i&&\"[object Blob]\"!==Object.prototype.toString.call(t)||(t=new File([t],i)),[String(e),t]):[String(e),String(t)]},I=function(e,t){if(e.length<t)throw new TypeError(t+\" argument required, but only \"+e.length+\" present.\")},v=\"object\"==typeof globalThis?globalThis:\"object\"==typeof window?window:\"object\"==typeof self?self:this,y=v.FormData,A=v.XMLHttpRequest&&v.XMLHttpRequest.prototype.send,b=v.Request&&v.fetch,w=v.navigator&&v.navigator.sendBeacon,O=v.Element&&v.Element.prototype,N=v.Symbol&&Symbol.toStringTag;N&&(Blob.prototype[N]||(Blob.prototype[N]=\"Blob\"),\"File\"in v&&!File.prototype[N]&&(File.prototype[N]=\"File\"));try{new File([],\"\")}catch(e){v.File=function(e,t,i){return e=new Blob(e,i||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(i&&void 0!==i.lastModified?new Date(i.lastModified):new Date)},toString:{value:function(){return\"[object File]\"}}}),N&&Object.defineProperty(e,N,{value:\"File\"}),e}}var D=function(e){return e.replace(/\\n/g,\"%0A\").replace(/\\r/g,\"%0D\").replace(/\"/g,\"%22\")},P=function(e){this.i=[];var t=this;e&&g(e.elements,(function(e){if(e.name&&!e.disabled&&\"submit\"!==e.type&&\"button\"!==e.type&&!e.matches(\"form fieldset[disabled] *\"))if(\"file\"===e.type){var i=e.files&&e.files.length?e.files:[new File([],\"\",{type:\"application/octet-stream\"})];g(i,(function(i){t.append(e.name,i)}))}else\"select-multiple\"===e.type||\"select-one\"===e.type?g(e.options,(function(i){!i.disabled&&i.selected&&t.append(e.name,i.value)})):\"checkbox\"===e.type||\"radio\"===e.type?e.checked&&t.append(e.name,e.value):(i=\"textarea\"===e.type?R(e.value):e.value,t.append(e.name,i))}))};if((e=P.prototype).append=function(e,t,i){I(arguments,2),this.i.push(C(e,t,i))},e.delete=function(e){I(arguments,1);var t=[];e=String(e),g(this.i,(function(i){i[0]!==e&&t.push(i)})),this.i=t},e.entries=function e(){var t,i=this;return S(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<i.i.length?e=_(e,i.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){I(arguments,1);for(var i=c(this),n=i.next();!n.done;n=i.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.call(t,r,n,this)}},e.get=function(e){I(arguments,1);var t=this.i;e=String(e);for(var i=0;i<t.length;i++)if(t[i][0]===e)return t[i][1];return null},e.getAll=function(e){I(arguments,1);var t=[];return e=String(e),g(this.i,(function(i){i[0]===e&&t.push(i[1])})),t},e.has=function(e){I(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,i,n,r,o=this;return S(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,r=c(n),_(e,r.next().value));i=t.next(),e.h=2}))},e.set=function(e,t,i){I(arguments,2),e=String(e);var n=[],r=C(e,t,i),o=!0;g(this.i,(function(t){t[0]===e?o&&(o=!n.push(r)):n.push(t)})),o&&n.push(r),this.i=n},e.values=function e(){var t,i,n,r,o=this;return S(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,(r=c(n)).next(),_(e,r.next().value));i=t.next(),e.h=2}))},P.prototype._asNative=function(){for(var e=new y,t=c(this),i=t.next();!i.done;i=t.next()){var n=c(i.value);i=n.next().value,n=n.next().value,e.append(i,n)}return e},P.prototype._blob=function(){var e=\"----formdata-polyfill-\"+Math.random(),t=[],i=\"--\"+e+'\\r\\nContent-Disposition: form-data; name=\"';return this.forEach((function(e,n){return\"string\"==typeof e?t.push(i+D(R(n))+'\"\\r\\n\\r\\n'+R(e)+\"\\r\\n\"):t.push(i+D(R(n))+'\"; filename=\"'+D(e.name)+'\"\\r\\nContent-Type: '+(e.type||\"application/octet-stream\")+\"\\r\\n\\r\\n\",e,\"\\r\\n\")})),t.push(\"--\"+e+\"--\"),new Blob(t,{type:\"multipart/form-data; boundary=\"+e})},P.prototype[Symbol.iterator]=function(){return this.entries()},P.prototype.toString=function(){return\"[object FormData]\"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),N&&(P.prototype[N]=\"FormData\"),A){var L=v.XMLHttpRequest.prototype.setRequestHeader;v.XMLHttpRequest.prototype.setRequestHeader=function(e,t){L.call(this,e,t),\"content-type\"===e.toLowerCase()&&(this.B=!0)},v.XMLHttpRequest.prototype.send=function(e){e instanceof P?(e=e._blob(),this.B||this.setRequestHeader(\"Content-Type\",e.type),A.call(this,e)):A.call(this,e)}}b&&(v.fetch=function(e,t){return t&&t.body&&t.body instanceof P&&(t.body=t.body._blob()),b.call(this,e,t)}),w&&(v.navigator.sendBeacon=function(e,t){return t instanceof P&&(t=t._asNative()),w.call(this,e,t)}),v.FormData=P}}();const eU=()=>{const e=Oy(\"AREAS\");0===e.length&&e.push(xb.GLOBAL);return Jn(e).call(e,((e,t,i)=>{const n=tU(t);return n?0===i?n:\"\".concat(e,\",\").concat(n):e}),\"\")},tU=e=>e===xb.OVERSEA?\"\".concat(Fb.ASIA,\",\").concat(Fb.EUROPE,\",\").concat(Fb.AFRICA,\",\").concat(Fb.NORTH_AMERICA,\",\").concat(Fb.SOUTH_AMERICA,\",\").concat(Fb.OCEANIA):Fb[e],iU=e=>{const t={CODE:\"\",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const i=Bb[e],n=Object.keys(i);n&&n.map((e=>{\"CODE\"!==e&&(t[e]=t[e].concat(i[e]))}))})),t},nU={GLOBAL:{ASIA:[xb.CHINA,xb.JAPAN,xb.INDIA,xb.KOREA,xb.HKMC],EUROPE:[],NORTH_AMERICA:[xb.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},rU=Object.keys(nU[xb.GLOBAL]),oU=[xb.CHINA,xb.NORTH_AMERICA,xb.EUROPE,xb.ASIA,xb.JAPAN,xb.INDIA,xb.OCEANIA,xb.SOUTH_AMERICA,xb.AFRICA,xb.KOREA,xb.HKMC,xb.US],sU=function(e,t){let i=[];if(Dn(e).call(e,xb.GLOBAL)){const o=[xb.GLOBAL,xb.OVERSEA],s=Object.keys(Bb);if(t===xb.GLOBAL)throw new mb(tv.INVALID_PARAMS,\"GLOBAL is an invalid excludedArea value\");if(t===xb.CHINA)i=[xb.OVERSEA];else if(r=t,Dn(rU).call(rU,r)){const e=(n=t,nU[xb.GLOBAL][n]||[]),r=[...o,t,...e];i=s.filter((e=>!Dn(r).call(r,e)))}else if(function(e){let t=!1;return rU.forEach((i=>{var n;Dn(n=nU[xb.GLOBAL][i]).call(n,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return rU.forEach((i=>{var n;Dn(n=nU[xb.GLOBAL][i]).call(n,e)&&(t=i)})),t}(t),n=[...o,e,t];i=s.filter((e=>!Dn(n).call(n,e)))}else i=e;i=function(e){const t=[];return oU.forEach((i=>{Dn(e).call(e,i)&&t.push(i)})),t.concat(e.filter((e=>!Dn(oU).call(oU,e))))}(i)}else i=e;var n,r;return i};function aU(e){var t,i;if(!e&&Dn(t=Oy(\"AREAS\")).call(t,xb.EXTENSIONS))return Jy.debug(\"update area from ap : reset\"),void cU(oA,!0);if(!Dn(i=Oy(\"AREAS\")).call(i,xb.GLOBAL)||!e)return;let n=Bb.EXTENSIONS;n&&(n={CODE:tU(xb.EXTENSIONS),WEBCS_DOMAIN:[\"ap-web-1-\".concat(e,\".agora.io\")],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],PROXY_CS:[\"proxy-ap-web-\".concat(e,\".agora.io\")],CDS_AP:[\"cds-ap-web-1-\".concat(e,\".agora.io\"),\"cds-ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],ACCOUNT_REGISTER:[\"sua-ap-web-1-\".concat(e,\".agora.io\"),\"sua-ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],UAP_AP:[\"uap-ap-web-1-\".concat(e,\".agora.io\"),\"uap-ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],EVENT_REPORT_DOMAIN:[\"statscollector-1-\".concat(e,\".agora.io\")],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-\".concat(e,\".agora.io\")],LOG_UPLOAD_SERVER:[\"logservice-\".concat(e,\".agora.io\")],PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy-\".concat(e,\".agora.io\")]},Jy.debug(\"update area from ap success: \".concat(e,\",config is \"),n),wy(\"AREAS\",[xb.EXTENSIONS],!0),Object.keys(n).map((e=>{if(\"LOG_UPLOAD_SERVER\"===e||\"EVENT_REPORT_DOMAIN\"===e||\"EVENT_REPORT_BACKUP_DOMAIN\"===e||\"PROXY_SERVER_TYPE3\"===e){wy(e,n[e][0])}else wy(e,n[e])})))}function cU(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=rA.reportApiInvoke(null,{name:gv.SET_AREA,options:e,tag:Rv.TRACER});try{let n=[];if(\"string\"==typeof e&&(n=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Dn(Vb).call(Vb,e))throw new mb(tv.INVALID_PARAMS,\"invalid area code\")})),n=e),\"[object Object]\"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:i}=e;if(!t)throw new mb(tv.INVALID_PARAMS,\"area code is needed\");let r=t;\"string\"==typeof t&&(r=[t]),n=i?sU(r,i):r}if(!t){if(Ny.AREAS){const e=new mb(tv.PROHIBITED_OPERATION,\"setArea is prohibited because of config-distribute\");return i.onError(e),void Jy.warning(\"setArea is prohibited because of config-distribute\")}if(Dn(n).call(n,xb.GLOBAL)&&Oy(\"AREAS\")===xb.EXTENSIONS){const e=new mb(tv.PROHIBITED_OPERATION,\"setArea is prohibited because of ap extensions\");return i.onError(e),void Jy.warning(\"setArea is prohibited because of ap extensions\")}}wy(\"AREAS\",n,t);const r=iU(n);Object.keys(r).map((e=>{if(\"LOG_UPLOAD_SERVER\"===e||\"EVENT_REPORT_DOMAIN\"===e||\"EVENT_REPORT_BACKUP_DOMAIN\"===e||\"PROXY_SERVER_TYPE3\"===e){wy(e,r[e][0])}else wy(e,r[e])})),Jy.debug(\"set area success:\",n.join(\",\"))}catch(e){throw i.onError(e),e}i.onSuccess()}function dU(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function lU(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dU(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let uU=1;function hU(e,t,i,n,r){uU+=1;const o={sid:i.sid,command:\"convergeAllocateEdge\",uid:\"666\",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:uU,requestId:uU,version:Cy,cname:i.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,d=e[0];return _y((async()=>{a=Date.now();const e=await $M(d,{data:s,cancelToken:n,headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"61\"}});if(c=Date.now()-a,0!==e.code){const t=new mb(tv.UNEXPECTED_RESPONSE,\"live streaming ap error, code\"+e.code,{retry:!0,responseTime:c});throw Jy.error(t.toString()),t}const i=JSON.parse(e.json_body);if(200!==i.code){const e=new mb(tv.UNEXPECTED_RESPONSE,\"live streaming app center error, code: \".concat(i.code,\", reason: \").concat(i.reason),{code:i.code,responseTime:c});throw Jy.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new mb(tv.UNEXPECTED_RESPONSE,\"live streaming app center empty server\",{code:i.code,responseTime:c});throw Jy.error(e.toString()),e}const r=function(e,t){return{addressList:e.servers.map((e=>\"wss://\".concat(e.address.replace(/\\./g,\"-\"),\".\").concat(Oy(\"WORKER_DOMAIN\"),\":\").concat(e.wss,\"?serviceName=\").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(i,t);return Oy(\"LIVE_STREAMING_ADDRESS\")&&(r.addressList=Oy(\"LIVE_STREAMING_ADDRESS\")instanceof Array?Oy(\"LIVE_STREAMING_ADDRESS\"):[Oy(\"LIVE_STREAMING_ADDRESS\")]),lU(lU({},r),{},{responseTime:c})}),((n,r)=>(rA.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(n.addressList),firstSuccess:0===r,responseTime:c,serverIp:e[r%e.length]}),!1)),((n,r)=>(rA.apworkerEvent(i.sid,{success:!1,sc:n.data&&n.data.code||200,serviceName:t,responseTime:c,serverIp:e[r%e.length]}),!!(n.code!==tv.OPERATION_ABORTED&&n.code!==tv.UNEXPECTED_RESPONSE||n.data&&n.data.retry)&&(d=e[(r+1)%e.length],!0))),r)}let pU=1;function _U(e,t,i,n){let{url:r,areaCode:o}=e;const{clientId:s,sid:a}=t,c=Date.now();let d;const[l,u]=SU(t,o,[bw.CHOOSE_SERVER]);let h=Uv.networkState;return _y((async()=>{h&&Uv.networkState===Nv.OFFLINE&&Uv.onlineWaiter&&await Gh.race([Uv.onlineWaiter,Qv(n&&n.maxRetryTimeout||hy.maxRetryTimeout)]),h=Uv.networkState;const{data:e,headers:o}=await $M(r,{data:l,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0,!0);d=\"1\"===o.http3?1:-1,rA.reportResourceTiming(r,a),fU(e,r,t,c,[bw.CHOOSE_SERVER],d);const s=Mw(e,bw.CHOOSE_SERVER);return mU(s),Dw(s,r)}),(e=>(e&&rA.joinChooseServer(a,{lts:c,succ:!0,csAddr:r,opid:u,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[bw.CHOOSE_SERVER].toString(),isHttp3:d}),!1)),(e=>e.code!==tv.OPERATION_ABORTED&&(e.code===tv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(rA.joinChooseServer(a,{lts:c,succ:!1,csAddr:r,serverList:null,opid:u,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[bw.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:h}),isHttp3:d}),Jy.warning(\"[\".concat(s||\"sid-\".concat(a.slice(0,6)),\"] Choose server network error, retry\"),e),!0))),n)}function EU(e,t,i,n){let r,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),[d,l]=SU(t,s,a);let u;return _y((async()=>{u&&Uv.networkState===Nv.OFFLINE&&Uv.onlineWaiter&&await Gh.race([Uv.onlineWaiter,Qv(n&&n.maxRetryTimeout||hy.maxRetryTimeout)]),u=Uv.networkState;const{data:e,headers:s}=await $M(o,{data:d,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0,!0);r=\"1\"===s.http3?1:-1,rA.reportResourceTiming(o,t.sid),fU(e,o,t,c,a,r);const l=Mw(e,bw.CHOOSE_SERVER),h=Mw(e,\"proxy5\"===t.cloudProxyServer?bw.CLOUD_PROXY_5:\"proxy3\"===t.cloudProxyServer||\"proxy4\"===t.cloudProxyServer?bw.CLOUD_PROXY:bw.CLOUD_PROXY_FALLBACK);return mU(l),{gatewayInfo:Dw(l,o),proxyInfo:h,url:o}}),(e=>(e.gatewayInfo&&rA.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:l,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:r}),e.proxyInfo&&rA.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(\",\"),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==tv.OPERATION_ABORTED&&(e.code===tv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(rA.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:u})}),Jy.warning(\"[\".concat(t.clientId,\"] multi unilbs network error, retry\"),e),!0))),n)}const fU=(e,t,i,n,r,o)=>{const{sid:s,clientId:a,cloudProxyServer:c}=i,d=[],l=i=>{4096===i.flag?rA.joinChooseServer(s,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:i.error.message,csIp:i.error.data&&i.error.data.csIp,unilbsServerIds:r.toString(),isHttp3:o}):1048576!==i.flag&&4194304!==i.flag&&4194310!==i.flag||rA.joinWebProxyAP(s,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:i.error.code,eventType:c,unilbsServerIds:r.toString()})};if(e.response_body.forEach((t=>{const i=t.buffer.code;if(23===t.uri&&0===i&&!t.buffer.edges_services)if(4194310===t.buffer.flag)Jy.warning(\"no edge services in ap response of proxy fallback, will not set proxy in iceServers\"),t.buffer.edges_services=[];else{const i={error:new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,\"no edge services in ap response\",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};d.push(i),l(i)}if(0!==i){const n=dw(i),r={error:new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,n.desc,{desc:n.desc,retry:n.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?Jy.warning(r.error.toString()):d.push(r),l(r)}})),d.length)throw Jy.warning(\"[\".concat(a||\"sid-\".concat(s.slice(0,6)),\"] multi unilbs \").concat(t,\" failed, \").concat(d.map((e=>\"flag: \".concat(e.flag,\", message: \").concat(e.error.message,\", retry: \").concat(e.error.data.retry))).join(\" | \"))),new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,d.map((e=>\"flag: \".concat(e.flag,\", message: \").concat(e.error.message))).join(\" | \"),{retry:!!d.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(d.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},mU=e=>{var t,i,n,r;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,\"void gateway address\",{retry:!0,csIp:e.detail&&e.detail[502]});Oy(\"AP_AREA\")&&(null!==(n=e.detail)&&void 0!==n&&n[23]&&\"string\"==typeof(null===(r=e.detail)||void 0===r?void 0:r[23])?aU(e.detail[23].toLowerCase()):aU());if(null!==(t=e.detail)&&void 0!==t&&t[19]&&\"string\"==typeof(null===(i=e.detail)||void 0===i?void 0:i[19])){const t=e.detail[19],i=null==t?void 0:t.split(\";\");for(let t=0;t<i.length;t++){var o;const n=jp(o=i[t]).call(o);e.addresses[t]&&i&&(e.addresses[t].fingerprint=n)}}if(Oy(\"GATEWAY_ADDRESS\")&&Oy(\"GATEWAY_ADDRESS\").length>0){Jy.debug(\"assign gateway address to\",Oy(\"GATEWAY_ADDRESS\"));const t=Oy(\"GATEWAY_ADDRESS\").map((t=>{var i,n;const r=null!==(i=null===(n=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===n?void 0:n.fingerprint)&&void 0!==i?i:\"\";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:r}}));e.addresses=t}},TU=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=dw(t.buffer.code);throw new mb(tv.UPDATE_TICKET_FAILED,\"[\".concat(t.buffer.code,\"]: \").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw Jy.debug(\"update ticket request received ap response without response body:\",t),new mb(tv.UPDATE_TICKET_FAILED,\"cannot find response body from ap response\",{retry:!1})},SU=(e,t,i)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:lU({6:e.stringUid,11:t,12:Oy(\"USE_NEW_TOKEN\")?\"1\":void 0,22:t},e.apRTM?{26:\"RTM2\"}:{}),key:e.token,service_ids:i,uid:e.uid||0}}]};r.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const o=new FormData;return o.append(\"request\",JSON.stringify(r)),[o,n]},gU=(e,t)=>{const i=Math.floor(Math.random()*10**12),n={appid:e.appId,client_ts:Date.now(),opid:i,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:\"\",6:e.stringUid,12:\"1\"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},r=new FormData;return r.append(\"request\",JSON.stringify(n)),[r,i]};let RU=0;function CU(e){return Gh.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const IU=async e=>{let{fragementLength:t,referenceList:i,asyncMapHandler:n,allFailedhandler:r,promisesCollector:o}=e,s=0;const a=t;let c,d=0;const l=async()=>{const e=(()=>{const e=s*a,t=e+a;return i.slice(e,t).map(n)})();o&&o.push(...e);try{c=await CU(e)}catch(e){if(d+=a,s++,!(d>=i.length))return void await l();r(e)}e.forEach((e=>e.cancel()))};return await l(),c},vU=async e=>{let{referenceList:t,asyncMapHandler:i,closeFn:n}=e;const r=t.length;let o=0;const s=async()=>{const e=i(t.shift());try{return await e}catch(e){if(o++,o>=r||null!=n&&n(e))throw e;return s()}};return s()};async function yU(e,t,i,n){const r=async function(e,t,i,n){let r=null;const o=[],s=async()=>{const r=Oy(\"WEBCS_DOMAIN\").slice(0,Oy(\"AJAX_REQUEST_CONCURRENT\")).map((t=>({url:e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v2/transpond/webrtc?v=2\"):\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),areaCode:eU()}))),s=n.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:r.map((e=>e.url))}),a=await IU({fragementLength:Oy(\"FRAGEMENT_LENGTH\"),referenceList:r,asyncMapHandler:n=>(Jy.debug(\"[\".concat(e.clientId,\"] Connect to choose_server:\"),n.url),_U(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},s),e[0]},promisesCollector:o});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},s),a},a=async()=>{if(await Qv(1e3),null!==r)return r;const s=Oy(\"WEBCS_DOMAIN_BACKUP_LIST\").map((t=>({url:e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v2/transpond/webrtc?v=2\"):\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),areaCode:eU()}))),a=n.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:s.map((e=>e.url))}),c=await IU({fragementLength:Oy(\"FRAGEMENT_LENGTH\"),referenceList:s,asyncMapHandler:n=>(Jy.debug(\"[\".concat(e.clientId,\"] Connect to backup choose_server:\"),n.url),_U(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},a),e[0]},promisesCollector:o});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},a),c};try{return r=await CU([s(),a()]),o.length&&o.forEach((e=>e.cancel&&\"function\"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}(e,t,i,n);return{gatewayInfo:await r}}async function AU(e,t,i,n,r){const o=e.cloudProxyServer;if(\"disabled\"===o){if(!n)return;if(e.useLocalAccessPoint)return await yU(e,t,i,r);if(Oy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\")){const{gatewayInfo:n,proxyInfo:o}=await DU(e,t,i,r);if(e.turnServer&&\"auto\"!==e.turnServer.mode)return{gatewayInfo:n};const a=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||sA.tcpport,udpport:e.udpport||sA.udpport,username:e.username||sA.username,password:e.password||sA.password,forceturn:!1,security:!0})));if(r.useP2P){var s;const t=null!==(s=e.uid)&&void 0!==s?s:n.uid,i=\"glb:\".concat(t.toString()),r=await fv(i),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||sA.tcpport,udpport:e.udpport||sA.udpport,username:i,password:r,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:\"manual\",servers:a},{gatewayInfo:n}}return await yU(e,t,i,r)}const{proxyInfo:a,gatewayInfo:c}=await DU(e,t,i,r),d={gatewayInfo:c},l=a.map((e=>({turnServerURL:e.address,tcpport:\"proxy3\"===o?void 0:e.tcpport?e.tcpport:sA.tcpport,udpport:\"proxy4\"===o?void 0:e.udpport?e.udpport:sA.udpport,username:e.username||sA.username,password:e.password||sA.password,forceturn:\"proxy4\"!==o,security:\"proxy5\"===o})));if(r.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,i=\"glb:\".concat(t.toString()),n=await fv(i),r=a.map((e=>({turnServerURL:e.address,tcpport:\"proxy3\"===o?void 0:e.tcpport||sA.tcpport,udpport:\"proxy4\"===o?void 0:e.udpport||sA.udpport,username:i,password:n,forceturn:\"proxy4\"!==o,security:\"proxy5\"===o})));l.push(...r)}return e.turnServer={mode:\"manual\",servers:l},Jy.debug(\"[\".concat(e.clientId,\"] set proxy server: \").concat(e.proxyServer,\", mode: \").concat(o)),d}async function bU(e,t,i,n,r){const o=Oy(\"ACCOUNT_REGISTER\").slice(0,Oy(\"AJAX_REQUEST_CONCURRENT\"));let s=[];s=t.proxyServer?o.map((e=>\"https://\".concat(t.proxyServer,\"/ap/?url=\").concat(e+\"/api/v1\"))):o.map((e=>\"https://\".concat(e,\"/api/v1\")));const a=null==r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"stringUID\",urls:s});try{const o=await async function(e,t,i,n,r){const o=Date.now(),s={sid:i.sid,opid:10,appid:i.appId,string_uid:t};let a=e[0];const c=await _y((()=>$M(a+\"\".concat(-1===a.indexOf(\"?\")?\"?\":\"&\",\"action=stringuid\"),{data:s,cancelToken:n,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":72}})),((i,n)=>{if(0===i.code){if(i.uid<=0||i.uid>=Math.pow(2,32))throw Jy.error(\"Invalid Uint Uid \".concat(t,\" => \").concat(i.uid),i),rA.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:tv.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new mb(tv.INVALID_UINT_UID_FROM_STRING_UID);return rA.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:null,extend:s}),!1}const r=dw(i.code);return r.retry&&(a=e[(n+1)%e.length]),rA.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:r.desc,extend:s}),r.retry}),((t,i)=>t.code!==tv.OPERATION_ABORTED&&(rA.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(i+1)%e.length],!0)),r);if(0!==c.code){const e=dw(c.code);throw new mb(tv.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,i,n);return null==r||r.recordJoinChannelService({status:\"success\",endTs:Date.now()},a),o.uid}catch(e){throw null==r||r.recordJoinChannelService({status:\"error\",endTs:Date.now(),errors:[e]},a),e}}async function wU(e,t,i){const n=Oy(\"ACCOUNT_REGISTER\");let r=[];r=t.proxyServer?n.map((e=>\"https://\".concat(t.proxyServer,\"/ap/?url=\").concat(e+\"/api/v1\"))):n.map((e=>\"https://\".concat(e,\"/api/v1\")));try{const n=await vU({referenceList:r,asyncMapHandler:n=>async function(e,t,i,n){const r=Date.now(),o={sid:i.sid,opid:10,appid:i.appId,string_uid:t};try{const t=await $M(e+\"\".concat(-1===e.indexOf(\"?\")?\"?\":\"&\",\"action=stringuid\"),{data:o,cancelToken:n,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":72}});if(0!==t.code){const e=dw(t.code);throw new mb(tv.UNEXPECTED_RESPONSE,\"preload sua error:\".concat(e.desc),e)}if(t.uid<=0||t.uid>=Math.pow(2,32))throw new mb(tv.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:r,url:e,req:o,uid:t.uid,elapse:Date.now()-r}}catch(e){throw e}}(n,e,t,i),closeFn:e=>e.code===tv.OPERATION_ABORTED||e.code===tv.UNEXPECTED_RESPONSE&&!e.data.retry});return n}catch(e){throw e}}async function OU(e,t,i){const n=Oy(\"CDS_AP\").slice(0,Oy(\"AJAX_REQUEST_CONCURRENT\")).map((t=>e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v1\"):\"https://\".concat(t,\"/api/v1?action=config\"))),r=n.map((n=>function(e,t,i,n){const r=vI(),o={flag:64,cipher_method:0,features:{device:r.name,system:r.os,system_general:navigator.userAgent,vendor:t.appId,version:Cy,cname:t.cname,sid:t.sid,session_id:t.sid,detail:\"\",proxyServer:t.proxyServer}};return _y((()=>$M(e,{data:o,timeout:1e3,cancelToken:i,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":54}})),void 0,(e=>e.code!==tv.OPERATION_ABORTED),n)}(n,e,t,i)));let o=null,s=null,a={};try{o=await CU(r)}catch(e){if(e.code===tv.OPERATION_ABORTED)throw e;s=e}r.forEach((e=>e.cancel()));if(rA.reportApiInvoke(e.sid,{name:gv.REQUEST_CONFIG_DISTRIBUTE,options:{error:s,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,i=Object.keys(t),n={};return i.forEach((e=>{var i;const r=jp(i=e.slice(4)).call(i),o=JSON.parse(t[e])[1];n[r]=o})),n}(o)}catch(e){}return a}async function NU(e,t){const i=Oy(\"WEBCS_DOMAIN\").concat(Oy(\"WEBCS_DOMAIN_BACKUP_LIST\")).map((e=>({url:\"https://\".concat(e,\"/api/v2/transpond/webrtc?v=2\"),areaCode:eU(),serviceIds:[bw.CHOOSE_SERVER,bw.CLOUD_PROXY_FALLBACK]})));try{const n=await vU({referenceList:i,asyncMapHandler:i=>async function(e,t,i){let n,{url:r,areaCode:o,serviceIds:s}=e;const a=Date.now(),[c,d]=SU(t,o,s);let l=Uv.networkState;try{l&&Uv.networkState===Nv.OFFLINE&&Uv.onlineWaiter&&await Gh.race([Uv.onlineWaiter,Qv(hy.maxRetryTimeout)]),l=Uv.networkState;const{data:e,headers:t}=await $M(r,{data:c,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0,!0);n=\"1\"===t.http3?1:-1;const o=e=>{const t=[];if(e.response_body.forEach((i=>{const n=i.buffer.code;if(23===i.uri&&0===n&&!i.buffer.edges_services)if(4194310===i.buffer.flag)i.buffer.edges_services=[];else{const n={error:new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,\"no edge services in ap response\",{retry:!0,csIp:e.detail[502]}),flag:i.buffer.flag};t.push(n)}if(0!==n){const r=dw(n),o={error:new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:i.buffer.flag};4194310===i.buffer.flag?Jy.warning(o.error.toString()):t.push(o)}})),t.length)throw new mb(tv.CAN_NOT_GET_GATEWAY_SERVER,t.map((e=>\"flag: \".concat(e.flag,\", message: \").concat(e.error.message))).join(\" | \"),{retry:!!t.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(t.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})};o(e);const s=Mw(e,bw.CHOOSE_SERVER),u=Mw(e,bw.CLOUD_PROXY_FALLBACK);return mU(s),{gatewayInfo:Dw(s,r),proxyInfo:u,opid:d,requestTime:a,url:r,isHttp3:n,elapse:Date.now()-a}}catch(e){throw e}}(i,e,t),closeFn:e=>e.code===tv.OPERATION_ABORTED||e.code===tv.CAN_NOT_GET_GATEWAY_SERVER&&!e.data.retry});return n}catch(e){throw e}}async function DU(e,t,i,n){const r=Oy(\"PROXY_SERVER_TYPE3\"),o=(e,t,i)=>{let n=i||r;return Array.isArray(n)&&(n=t%2==0?r[1]:r[0]),\"https://\".concat(n,\"/ap/?url=\").concat(e)};let s=null;const a=[],c=async()=>{const r=Oy(\"WEBCS_DOMAIN\").slice(0,Oy(\"AJAX_REQUEST_CONCURRENT\")).map(((t,i)=>{let n;return n=\"disabled\"===e.cloudProxyServer&&e.proxyServer?o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i,e.proxyServer):\"disabled\"===e.cloudProxyServer||\"fallback\"===e.cloudProxyServer?\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"):o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i),{url:n,areaCode:eU(),serviceIds:[bw.CHOOSE_SERVER,\"proxy5\"===e.cloudProxyServer?bw.CLOUD_PROXY_5:\"proxy3\"===e.cloudProxyServer||\"proxy4\"===e.cloudProxyServer?bw.CLOUD_PROXY:bw.CLOUD_PROXY_FALLBACK]}})),s=n.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:r.map((e=>e.url))}),c=await IU({fragementLength:Oy(\"FRAGEMENT_LENGTH\"),referenceList:r,asyncMapHandler:n=>(Jy.debug(\"[\".concat(e.clientId,\"] Connect to choose_server:\"),n.url),EU(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},s),e[0]},promisesCollector:a});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},s),c},d=async()=>{if(await Qv(1e3),null!==s)return s;const r=Oy(\"WEBCS_DOMAIN_BACKUP_LIST\").map(((t,i)=>{let n;return n=\"disabled\"===e.cloudProxyServer&&e.proxyServer?o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i,e.proxyServer):\"disabled\"===e.cloudProxyServer||\"fallback\"===e.cloudProxyServer?\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"):o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i),{url:n,areaCode:eU(),serviceIds:[bw.CHOOSE_SERVER,\"proxy5\"===e.cloudProxyServer?bw.CLOUD_PROXY_5:\"proxy3\"===e.cloudProxyServer||\"proxy4\"===e.cloudProxyServer?bw.CLOUD_PROXY:bw.CLOUD_PROXY_FALLBACK]}})),c=n.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:r.map((e=>e.url))}),d=await IU({fragementLength:Oy(\"FRAGEMENT_LENGTH\"),referenceList:r,asyncMapHandler:n=>(Jy.debug(\"[\".concat(e.clientId,\"] Connect to backup choose_server:\"),n.url),EU(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},c),e[0]},promisesCollector:a});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},c),d};let l,u,h;try{({gatewayInfo:l,proxyInfo:u,url:h}=await CU([c(),d()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&\"function\"==typeof e.cancel&&e.cancel())),!l||!u)throw new mb(tv.UNEXPECTED_ERROR,\"missing gateway or proxy response\").print();if(e.apUrl=h,\"disabled\"!==e.cloudProxyServer&&Array.isArray(r)&&h){const t=/^https?:\\/\\/(.+?)(\\/.*)?$/.exec(h)[1];Dn(r).call(r,t)&&(e.proxyServer=t,Jy.setProxyServer(t),rA.setProxyServer(t))}return s={gatewayInfo:l,proxyInfo:await Uw(u,l.uid)},s}async function PU(e,t,i){const n=Oy(\"UAP_AP\").slice(0,Oy(\"AJAX_REQUEST_CONCURRENT\")).map((t=>e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v1?action=uap\"):\"https://\".concat(t,\"/api/v1?action=uap\"))),r=n.map((n=>function(e,t,i,n){const r={command:\"convergeAllocateEdge\",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:Cy,cname:t.cname,uid:t.uid.toString(),requestId:pU,seq:pU};pU+=1;const o={service_name:\"tele_channel\",json_body:JSON.stringify(r)};return _y((async()=>{const t=await $M(e,{data:o,cancelToken:i,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":61}});if(0!==t.code){const e=new mb(tv.UNEXPECTED_RESPONSE,\"cross channel ap error, code\"+t.code,{retry:!0});throw Jy.error(e.toString()),e}const n=JSON.parse(t.json_body);if(200!==n.code){const e=new mb(tv.UNEXPECTED_RESPONSE,\"cross channel app center error, code: \".concat(n.code,\", reason: \").concat(n.reason));throw Jy.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new mb(tv.UNEXPECTED_RESPONSE,\"cross channel app center empty server\");throw Jy.error(e.toString()),e}return{vid:n.vid,workerToken:n.workerToken,addressList:(Oy(\"CHANNEL_MEDIA_RELAY_SERVERS\")||n.servers).map((e=>\"wss://\".concat(e.address.replace(/\\./g,\"-\"),\".\").concat(Oy(\"WORKER_DOMAIN\"),\":\").concat(e.wss)))}}),void 0,(e=>!!(e.code!==tv.OPERATION_ABORTED&&e.code!==tv.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),n)}(n,e,t,i)));try{const e=await CU(r);return r.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function LU(e,t,i){let n=null;const r=[],o=async o=>{const s=Oy(o?\"WEBCS_DOMAIN_BACKUP_LIST\":\"WEBCS_DOMAIN\").map((t=>e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v2/transpond/webrtc?v=2\"):\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\")));return o&&(await Qv(1e3),null!==n)?n:await IU({fragementLength:Oy(\"FRAGEMENT_LENGTH\"),referenceList:s,asyncMapHandler:n=>(Jy.debug(\"[\".concat(e.clientId,\"] update ticket, Connect to \").concat(o?\"backup\":\"\",\" choose_server:\"),n),function(e,t,i,n){const[r]=gU(t,[bw.CHOOSE_SERVER]);let o=Uv.networkState;return _y((async()=>{o&&Uv.networkState===Nv.OFFLINE&&Uv.onlineWaiter&&await Gh.race([Uv.onlineWaiter,Qv(n&&n.maxRetryTimeout||hy.maxRetryTimeout)]),o=Uv.networkState;const t=await $M(e,{data:r,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0);return TU(t,e)}),(()=>!1),(e=>e.code!==tv.OPERATION_ABORTED&&(e.code===tv.UPDATE_TICKET_FAILED?e.data.retry:(Jy.warning(\"[\".concat(t.clientId,\"] update ticket network error, retry\"),e),!0))),n)}(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:r})};try{return n=await CU([o(!1),o(!0)]),r.length&&r.forEach((e=>e.cancel&&\"function\"==typeof e.cancel&&e.cancel())),n}catch(e){throw e[0]}}function kU(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function MU(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?kU(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kU(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class UU extends mv{get isSuccess(){return!!this.configs}constructor(){super(),ng(this,\"configs\",void 0),ng(this,\"joinInfo\",void 0),ng(this,\"cancelToken\",void 0),ng(this,\"retryConfig\",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),ng(this,\"interval\",void 0),ng(this,\"mutex\",new ly(\"config-distribute\")),ng(this,\"mutableParamsRead\",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),Oy(\"ENABLE_CONFIG_DISTRIBUTE\")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),Oy(\"CONFIG_DISTRIBUTE_INTERVAL\")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){if(!this.mutex.isLocked)return;(await this.mutex.lock())()}async updateConfigDistribute(){if(!this.mutableParamsRead){this.mutableParamsRead=!0;rA.reportApiInvoke(null,{options:void 0,name:gv.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Rv.TRACER}).onSuccess(JSON.stringify(Ny))}if(!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Jy.debug(\"[config-distribute] get config distribute interrupted have no joininfo\");let e;const t=await this.mutex.lock();try{e=await OU(this.joinInfo,this.cancelToken,this.retryConfig),Jy.debug(\"[config-distribute] get config distribute\",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new mb(tv.NETWORK_RESPONSE_ERROR,e);Jy.warning(\"[config-distribute] \".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(jb.UPDATE_BITRATE_LIMIT,e):this.emit(jb.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&MU({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const i=oE(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let t=0;t<i.length;t++)for(let n=i.length-1;n>t;n--){const t=i[n];if(\"number\"==typeof e[t].__priority){const r=e[t].__priority,o=i[n-1];if(\"number\"==typeof e[o].__priority){if(!(r>e[o].__priority))continue;{const e=t;i[n]=i[n-1],i[n-1]=e}}else{const e=t;i[n]=i[n-1],i[n-1]=e}}}const n={};i.forEach((t=>{const i=e[t],r=i.__expires;Object.keys(i).forEach((e=>{\"__priority\"===e||\"__expires\"===e||Object.prototype.hasOwnProperty.call(n,e)||(n[e]=MU({value:i[e]},r&&{expires:r}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((i=>{switch(i){case\"ENABLE_EVENT_REPORT\":case\"UPLOAD_LOG\":case\"ENABLE_AG_ADAPTATION\":case\"FORCE_AG_HIGH_FRAMERATE\":case\"FORCE_SUPPORT_AG_ADAPTATION\":case\"ENCODER_CONFIG_LIMIT\":case\"CAMERA_CAPTURE_CONFIG\":case\"ENABLE_PRELOAD\":if(Object.prototype.hasOwnProperty.call(by,i)){const{value:n,expires:r}=e[i];if(r&&r<=t)return;Ny[i]=n,by[i]=n,Jy.debug(\"Update global parameters from config distribute\",i,n)}}}))}catch(t){Jy.error(\"Error update config immediately: \".concat(e),t.message)}}(n);const e=JSON.stringify(n),t=window.btoa(e);window.localStorage.setItem(\"websdk_ng_global_parameter\",t),Jy.debug(\"Caching global parameters \".concat(e))}catch(e){Jy.error(\"Error caching global parameters:\",e.message)}}}class xU extends mv{constructor(){super(...arguments),ng(this,\"resultStorage\",new Map)}setLocalAudioStats(e,t,i){this.record(\"AUDIO_INPUT_LEVEL_TOO_LOW\",e,this.checkAudioInputLevel(i,t)),this.record(\"SEND_AUDIO_BITRATE_TOO_LOW\",e,this.checkSendAudioBitrate(i,t))}setLocalVideoStats(e,t,i){this.record(\"SEND_VIDEO_BITRATE_TOO_LOW\",e,this.checkSendVideoBitrate(i,t)),this.record(\"FRAMERATE_INPUT_TOO_LOW\",e,this.checkFramerateInput(i,t)),this.record(\"FRAMERATE_SENT_TOO_LOW\",e,this.checkFramerateSent(i))}setRemoteAudioStats(e,t){const i=e.getUserId();this.record(\"AUDIO_OUTPUT_LEVEL_TOO_LOW\",i,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const i=e.getUserId();this.record(\"RECV_VIDEO_DECODE_FAILED\",i,this.checkVideoDecode(t))}record(e,t,i){if(Oy(\"STATS_UPDATE_INTERVAL\")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const n=this.resultStorage.get(e);if(n&&(n.result.push(i),n.result.length>=5)){var r;const i=Dn(r=n.result).call(r,!0);n.isPrevNormal&&!i&&this.emit(\"exception\",VU[e],e,t),!n.isPrevNormal&&i&&this.emit(\"exception\",VU[e]+2e3,e+\"_RECOVER\",t),n.isPrevNormal=i,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof ik&&!t.isActive||(!!t.muted||0!==e.sendVolumeLevel)}checkFramerateInput(e,t){let i=null;t._encoderConfig&&t._encoderConfig.frameRate&&(i=Pw(t._encoderConfig.frameRate));const n=e.captureFrameRate;return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof ik&&!t.isActive||(!!t.muted||0!==e.sendBitrate)}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const VU={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};const FU=new class{markSubscribeStart(e,t){performance.mark(\"agora-web-sdk/\".concat(e,\"/subscribe-\").concat(t))}markPublishStart(e,t){performance.mark(\"agora-web-sdk/\".concat(e,\"/publish-\").concat(t))}measureFromSubscribeStart(e,t){const i=performance.getEntriesByName(\"agora-web-sdk/\".concat(e,\"/subscribe-\").concat(t));if(i.length>0){const e=i[i.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const i=performance.getEntriesByName(\"agora-web-sdk/\".concat(e,\"/publish-\").concat(t));if(i.length>0){const e=i[i.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function BU(e,t){this.v=e,this.k=t}function jU(e){return new BU(e,0)}var GU=jh,WU=Sl;wi({target:\"Promise\",stat:!0,forced:!0},{withResolvers:function(){var e=WU.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var HU=Sl,KU=el;wi({target:\"Promise\",stat:!0,forced:!0},{try:function(e){var t=HU.f(this),i=KU(e);return(i.error?t.reject:t.resolve)(i.value),t.promise}});var YU=i(GU),qU=im.f(\"asyncIterator\"),zU=i(qU);function JU(e){var t,i;function n(t,i){try{var o=e[t](i),s=o.value,a=s instanceof BU;YU.resolve(a?s.v:s).then((function(i){if(a){var c=\"return\"===t?\"return\":\"next\";if(!s.k||i.done)return n(c,i);i=e[c](i).value}r(o.done?\"return\":\"normal\",i)}),(function(e){n(\"throw\",e)}))}catch(e){r(\"throw\",e)}}function r(e,r){switch(e){case\"return\":t.resolve({value:r,done:!0});break;case\"throw\":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new YU((function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};i?i=i.next=a:(t=i=a,n(e,r))}))},\"function\"!=typeof e.return&&(this.return=void 0)}function XU(e){return function(){return new JU(e.apply(this,arguments))}}JU.prototype[\"function\"==typeof ZS&&zU||\"@@asyncIterator\"]=function(){return this},JU.prototype.next=function(e){return this._invoke(\"next\",e)},JU.prototype.throw=function(e){return this._invoke(\"throw\",e)},JU.prototype.return=function(e){return this._invoke(\"return\",e)};var QU=i(ie.Object.getOwnPropertySymbols),ZU=wi,$U=qi.indexOf,ex=Bn,tx=v([].indexOf),ix=!!tx&&1/tx([1],1,-0)<0;ZU({target:\"Array\",proto:!0,forced:ix||!ex(\"indexOf\")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return ix?tx(this,e,t)||0:$U(this,e,t)}});var nx=Xi(\"Array\").indexOf,rx=l,ox=nx,sx=Array.prototype,ax=function(e){var t=e.indexOf;return e===sx||rx(sx,e)&&t===sx.indexOf?ox:t},cx=i(ax);function dx(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=IA(e);for(n=0;n<o.length;n++)i=o[n],cx(t).call(t,i)>=0||(r[i]=e[i]);return r}(e,t);if(QU){var o=QU(e);for(n=0;n<o.length;n++)i=o[n],cx(t).call(t,i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function lx(e){if(Array.isArray(e))return e.map((e=>e));if(!ux(e))return e;const t={};for(const i in e){const n=e[i];ux(n)||Array.isArray(n)?t[i]=lx(n):t[i]=n}return t}function ux(e){return!(\"object\"!=typeof e||Array.isArray(e)||!e)}class hx{constructor(e){ng(this,\"input\",[]),ng(this,\"size\",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const px={address:\"unknown\",candidateType:\"unknown\",id:\"unknown\",port:0,priority:0,protocol:\"unknown\",type:\"unknown\"},_x={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:\"unknown\",localCandidate:px,remoteCandidate:px}},Ex={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},fx={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},mx={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},Tx={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function Sx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function gx(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Sx(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Sx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class Rx{constructor(e,t){ng(this,\"onFirstVideoReceived\",void 0),ng(this,\"onFirstVideoDecoded\",void 0),ng(this,\"onFirstAudioReceived\",void 0),ng(this,\"onFirstVideoDecodedTimeout\",void 0),ng(this,\"onFirstAudioDecoded\",void 0),ng(this,\"onSelectedLocalCandidateChanged\",void 0),ng(this,\"onSelectedRemoteCandidateChanged\",void 0),ng(this,\"videoIsReady\",!1),ng(this,\"videoIsReady2\",{}),ng(this,\"pc\",void 0),ng(this,\"options\",void 0),ng(this,\"intervalTimer\",void 0),ng(this,\"stats\",lx(_x)),ng(this,\"isFirstVideoReceived\",{}),ng(this,\"isFirstVideoDecoded\",{}),ng(this,\"isFirstAudioReceived\",{}),ng(this,\"isFirstAudioDecoded\",{}),ng(this,\"isFirstVideoDecodedTimeout\",{}),ng(this,\"lossRateWindowStats\",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Gh((e=>{e({local:gx({},px),remote:gx({},px)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,i=[\"videoSend\",\"audioSend\",\"videoRecv\",\"audioRecv\"];let n=0,r=0,o=0,s=0;for(const a of i)e[a].forEach(((e,i)=>{if(!this.lossRateWindowStats[t-1][a][i]||!this.lossRateWindowStats[0][a][i])return;const c=this.lossRateWindowStats[t-1][a][i].packets-this.lossRateWindowStats[0][a][i].packets,d=this.lossRateWindowStats[t-1][a][i].packetsLost-this.lossRateWindowStats[0][a][i].packetsLost;\"videoSend\"===a||\"audioSend\"===a?(n+=c,o+=d):(r+=c,s+=d),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||d<=0?0:d/(c+d)}));e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=r<=0||s<=0?0:s/(r+s)}}function Cx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ix(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Cx(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class vx extends Rx{constructor(){super(...arguments),ng(this,\"_stats\",_x),ng(this,\"lastDecodeVideoReceiverStats\",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=lx(_x);const i=t.filter((e=>\"ssrc\"===e.type));this.processSSRCStats(i);const n=t.find((e=>\"VideoBwe\"===e.type));n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const i=Dn(t=e.id).call(t,\"send\");switch(\"\".concat(e.mediaType,\"_\").concat(i?\"send\":\"recv\")){case\"video_send\":{const t=lx(fx);t.codec=e.googCodecName,t.adaptionChangeReason=\"none\",e.googCpuLimitedResolution&&(t.adaptionChangeReason=\"cpu\"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason=\"bandwidth\"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case\"video_recv\":{const t=lx(Ex),i=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),i){const n=i.stats,r=Date.now()-i.lts;t.framesDecodeFreezeTime=n.framesDecodeFreezeTime,t.framesDecodeInterval=n.framesDecodeInterval,t.framesDecodeCount>n.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(i.lts=Date.now(),t.framesDecodeInterval=r,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<i.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Ix({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case\"audio_recv\":{const t=lx(Tx);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case\"audio_send\":{const t=lx(mx);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new Gh(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const i={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{i[t]=e.stat(t)})),t.push(i)})),t}}function yx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ax(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?yx(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class bx extends Rx{constructor(){super(...arguments),ng(this,\"_stats\",_x),ng(this,\"report\",void 0),ng(this,\"lastDecodeVideoReceiverStats\",new Map),ng(this,\"lastVideoFramesRecv\",new Map),ng(this,\"lastVideoFramesSent\",new Map),ng(this,\"lastVideoFramesDecode\",new Map),ng(this,\"lastVideoFramesOutput\",new Map),ng(this,\"lastVideoJBDelay\",new Map),ng(this,\"lastAudioJBDelay\",new Map),ng(this,\"mediaBytesSent\",new Map),ng(this,\"mediaBytesRetransmit\",new Map),ng(this,\"mediaBytesTargetEncode\",new Map),ng(this,\"lastEncoderMs\",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=lx(_x),this.report.forEach((e=>{switch(e.type){case rb.OUTBOUND:case rb.INBOUND:{const t=e.mediaType||e.kind,i=!t&&\"frameWidth\"in e,n=!t&&!(\"frameWidth\"in e);e.type===rb.OUTBOUND?\"audio\"===t||n?this.processAudioOutboundStats(e):(\"video\"===t||i)&&this.processVideoOutboundStats(e):e.type===rb.INBOUND&&(\"audio\"===t||n?this.processAudioInboundStats(e):(\"video\"===t||i)&&this.processVideoInboundStats(e));break}case rb.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case rb.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:Ax({},px),remote:Ax({},px)};return e.forEach((i=>{let n;if(i.type===rb.TRANSPORT&&(n=e.get(i.selectedCandidatePairId)),i.type===rb.CANDIDATE_PAIR&&i.selected&&(n=i),n){const i=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(n.localCandidateId){const r=e.get(n.localCandidateId);r&&i(t.local,r)}if(n.remoteCandidateId){const r=e.get(n.remoteCandidateId);r&&i(t.remote,r)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===rb.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===rb.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===rb.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Ax({},t),Ax({},this.stats.selectedCandidatePair.localCandidate)),e.type===rb.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Ax({},t),Ax({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=lx(Tx),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),\"number\"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=lx(Ex),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;const i=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),r=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,i=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,i),this.isFirstVideoDecoded[t.ssrc]=!0}if(i){const n=i.stats,r=o-i.lts;t.framesDecodeFreezeTime=n.framesDecodeFreezeTime,t.framesDecodeInterval=n.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&r>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>n.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(i.lts=Date.now(),t.framesDecodeInterval=r,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(i.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-i.qpSum)/(e.framesDecoded-i.stats.framesDecodeCount))}n&&o-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((o-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(r&&o-r.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-r.count)/((o-r.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):r?t.outputFrameRate=r.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Ax({},t),lts:i?i.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=lx(fx),this._stats.videoSend.push(t));const i=this.mediaBytesSent.get(e.ssrc);if(i)i.add(e.bytesSent);else{const t=new hx(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new hx(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new hx(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const i=this.lastEncoderMs.get(e.ssrc);if(!i||i.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const n=e.framesEncoded-i.lastFrameCount,r=e.totalEncodeTime-i.lastEncoderTime;t.avgEncodeMs=1e3*r/n}}if(e.framesEncoded&&e.qpSum){const i=this.lastEncoderMs.get(e.ssrc);!i||i.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-i.lastQpSum)/(e.framesEncoded-i.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const i=this.findRemoteStatsId(e.ssrc,rb.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=lx(mx),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const i=this.findRemoteStatsId(e.ssrc,rb.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}}findRemoteStatsId(e,t){var i;const n=Array.from(Jw(i=this.report).call(i)).find((i=>i.type===t&&i.ssrc===e));return n?n.id:null}processVideoMediaSource(e,t){const i=this.report.get(e);i&&i.width&&i.height&&i.framesPerSecond&&(t.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})}processAudioMediaSource(e,t){const i=this.report.get(e);i&&(t.inputLevel=i.audioLevel)}processVideoTrackSenderStats(e,t,i){var n,r,o,s;const a=t?this.report.get(t):void 0,c=null!==(n=null==a?void 0:a.framesSent)&&void 0!==n?n:e.framesSent;if(\"number\"!=typeof c)return;let d=null!==(r=null==a?void 0:a.frameWidth)&&void 0!==r?r:e.frameWidth,l=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight,u=null!==(s=null==a?void 0:a.framesPerSecond)&&void 0!==s?s:e.framesPerSecond;if(\"number\"==typeof d&&\"number\"==typeof l||(d=0,l=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(i.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(i.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(i.ssrc,{count:c,lts:e,rate:0})}i.sentFrame={width:d,height:l,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,i){var n,r,o,s,a;const c=t?this.report.get(t):void 0,d=null!==(n=null==c?void 0:c.framesReceived)&&void 0!==n?n:e.framesReceived,l=null!==(r=null==c?void 0:c.frameWidth)&&void 0!==r?r:e.frameWidth,u=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if(\"number\"==typeof d){const e=this.lastVideoFramesRecv.get(i.ssrc),t=Date.now();i.framesReceivedCount=d;let n=0;e&&t-e.lts>=800?(n=Math.round((d-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(i.ssrc,{count:d,lts:t,rate:n})):e?n=e.rate:this.lastVideoFramesRecv.set(i.ssrc,{count:d,lts:t,rate:0}),i.receivedFrame={width:l||0,height:u||0,frameRate:n||0},i.decodedFrame={width:l||0,height:u||0,frameRate:i.decodeFrameRate||0},i.outputFrame={width:l||0,height:u||0,frameRate:i.outputFrameRate||i.decodeFrameRate||0}}if(h&&p){const e=this.lastVideoJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const n=p-e.jitterBufferEmittedCount;n>0&&(t=1e3*(h-e.jitterBufferDelay)/n),i.jitterBufferMs=t,i.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(i.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p,jitterBufferMs:i.currentDelayMs})}}processAudioTrackSenderStats(e,t,i){var n,r,o,s;const a=t?this.report.get(t):void 0,c=null!==(n=null!==(r=null==a?void 0:a.echoReturnLoss)&&void 0!==r?r:e.echoReturnLoss)&&void 0!==n?n:0,d=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;i.aecReturnLoss=c,i.aecReturnLossEnhancement=d}processAudioTrackReceiverStats(e,t,i){var n,r,o,s,a,c,d;const l=t?this.report.get(t):void 0,u=null!==(n=null==l?void 0:l.removedSamplesForAcceleration)&&void 0!==n?n:e.removedSamplesForAcceleration,h=null!==(r=null==l?void 0:l.totalSamplesReceived)&&void 0!==r?r:e.totalSamplesReceived,p=null!==(o=null==l?void 0:l.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,_=null!==(s=null==l?void 0:l.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,E=null!==(a=null==l?void 0:l.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,f=null!==(c=null==l?void 0:l.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,m=null!==(d=null==l?void 0:l.concealedSamples)&&void 0!==d?d:e.concealedSamples;if(u&&h&&(i.accelerateRate=u/h),p&&_){const e=this.lastAudioJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const n=_-e.jitterBufferEmittedCount;n>0&&(t=1e3*(p-e.jitterBufferDelay)/n),i.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(i.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:_,jitterBufferMs:i.jitterBufferMs})}i.outputLevel=E;let T=1920;f&&h&&(T=h/f/50,i.receivedFrames=Math.round(h/T)),m&&(i.droppedFrames=Math.round(m/T))}processRemoteInboundStats(e,t){const i=this.report.get(e);i&&(t.packetsLost=i.packetsLost,i.roundTripTime&&(t.rttMs=1e3*i.roundTripTime),i.jitter&&(t.jitterMs=1e3*i.jitter),i.timestamp&&(t.timestamp=i.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return\"\";const i=t.mimeType.match(/\\/(.*)$/);return i&&i[1]?i[1]:\"\"}updateSendBitrate(){let e=0,t=null,i=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{i=null===i?e.diffMean():i+e.diffMean()}));const n=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==i&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))}}class wx extends Rx{updateStats(){return Gh.resolve()}}function Ox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]*/i);return e&&e[0]?Number(e[0].split(\"/\")[1]):null}();return o?o<76?new vx(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):new bx(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):function(e){if(!window.RTCStatsReport)return!1;const t=e.getStats();return!!(t instanceof Gh||function(e){return!!e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof e.then}(t))}(e)?new bx(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):new wx(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r})}let Nx=class{get localCapabilities(){return Bv(this._localCapabilities)}get rtpCapabilities(){return Bv(this._rtpCapabilities)}get candidates(){return Bv(this._candidates)}get iceParameters(){return Bv(this._iceParameters)}get dtlsParameters(){return Bv(this._dtlsParameters)}constructor(e){ng(this,\"sessionDesc\",void 0),ng(this,\"_localCapabilities\",void 0),ng(this,\"_rtpCapabilities\",void 0),ng(this,\"_candidates\",void 0),ng(this,\"_iceParameters\",void 0),ng(this,\"_dtlsParameters\",void 0),ng(this,\"setup\",void 0),ng(this,\"currentMidIndex\",void 0),ng(this,\"cname\",\"o/i14u9pJrxRKAsu\"),ng(this,\"firefoxSsrcMidMap\",new Map),e=Bv(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,localCapabilities:o,direction:s,setup:a,videoCodec:c,audioCodec:d}=e;let l;this.setup=a,l=s===Eb.RECEIVE_ONLY?gM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=extmap-allow-mixed\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\"):gM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=extmap-allow-mixed\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=recvonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=recvonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\"),this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=o;const u=s===Eb.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=s===Eb.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=s===Eb.RECEIVE_ONLY?r.send.videoCodecs:jM(Hb.VIDEO,u,h,c),_=s===Eb.RECEIVE_ONLY?r.send.audioCodecs:jM(Hb.AUDIO,u,h,d);for(const e of l.mediaDescriptions)e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=i.fingerprints,e.attributes.candidates=n,e.attributes.setup=this.setup,\"application\"===e.media.mediaType&&(e.attributes.sctpPort=\"5000\"),\"video\"===e.media.mediaType&&(e.media.fmts=p.map((e=>e.payloadType.toString(10))),e.attributes.payloads=p,e.attributes.extmaps=u.videoExtensions),\"audio\"===e.media.mediaType&&(e.media.fmts=_.map((e=>e.payloadType.toString(10))),e.attributes.payloads=_,e.attributes.extmaps=u.audioExtensions,BM(e));this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return gM.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,i,n,r){i=i.replace(/ /g,\"-\");const{ssrcs:o,ssrcGroups:s}=OM(t,this.cname,Oy(\"SYNC_GROUP\")?i:void 0),a=this.findPreloadMediaDesc(o);if(a){if(PI()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,n);let i;return-1===t?(i=this.createOrRecycleSendMedia(e,o,s,\"sendonly\",n,r),this.updateBundleMids()):(i=Bv(this.sessionDesc.mediaDescriptions[t]),i.attributes.direction=\"sendonly\",i.attributes.ssrcs=o,i.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(i,r)),PI()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,i.attributes.mid),{needExchangeSDP:!0,mid:i.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,i){const n=[];return e.forEach((e=>{const r=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(r);let s,a=!1;-1===o?(a=!0,s=this.createOrRecycleRecvMedia(e,[],\"recvonly\",t,i),this.updateBundleMids()):(s=Bv(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction=\"recvonly\"),n.push({mid:s.attributes.mid,needCreateTransceiver:a})})),n}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");t.forEach((e=>{e.media.port=\"0\",e.attributes.direction=\"inactive\"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:i,address:n,port:r,type:o,relatedAddress:s,relatedPort:a,priority:c}=new RTCIceCandidate(e),d={foundation:null!=t?t:\"\",componentId:\"1\",transport:null!=i?i:\"\",priority:c?c+\"\":\"\",connectionAddress:null!=n?n:\"\",port:r?r+\"\":\"\",type:o?o+\"\":\"\",relAddr:null!=s?s:\"\",relPort:a?a+\"\":\"\",extension:{}};this.candidates.some((e=>e.priority===d.priority&&e.connectionAddress===d.connectionAddress&&e.port===d.port))||(this._candidates.push(d),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,i,n,r){const o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,a=jM(o,s,this.localCapabilities.send,o===Hb.AUDIO?r:n),c=o===Hb.VIDEO?s.videoExtensions:s.audioExtensions,d=\"\".concat(++this.currentMidIndex);let l={media:{mediaType:o,port:\"9\",protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(d)}};l=this.mungRecvMediaDsec(l,e);const u=this.findFirstClosedMedia(o);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"inactive\"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"recvonly\"}))}findAvailableMediaIndex(e,t,i){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&\"0\"!==n.media.port&&(\"sendonly\"===n.attributes.direction||\"sendrecv\"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(PI()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||\"0\"!==n.attributes.mid&&\"1\"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r&&n.attributes.mid===i}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const i=t.media.mediaType===e&&\"0\"!==t.media.port&&(\"recvonly\"===t.attributes.direction||\"sendrecv\"===t.attributes.direction);return\"0\"!==t.attributes.mid&&\"1\"!==t.attributes.mid&&i}))}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}restartICE(e){e=Bv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,i,n,r,o){const s=this.rtpCapabilities.send,a=e===Hb.VIDEO?s.videoCodecs:s.audioCodecs,c=e===Hb.VIDEO?s.videoExtensions:s.audioExtensions;PI()&&(r=\"\".concat(++this.currentMidIndex));let d={media:{mediaType:e,port:\"9\",protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:r}};d=this.mungSendMediaDesc(d,o);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}mungRecvMediaDsec(e,t,i){const n=Bv(e);return DM(n),NM(n,t),PM(n,t),LM(n),kM(n,i,this.localCapabilities.send),n}mungSendMediaDesc(e,t){const i=Bv(e);return kM(i,t,this.localCapabilities.recv),BM(i),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>\"0\"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var i;return(null===(i=t.attributes)||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>PI()?\"0\"===t.media.port&&t.media.mediaType===e:\"0\"===t.media.port))}};const Dx=[\"sdp\"];var Px;function Lx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function kx(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Lx(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Lx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let Mx=(Px=class e extends Gb{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,i,n){super(t,i),ng(this,\"direction\",void 0),ng(this,\"name\",void 0),ng(this,\"store\",void 0),ng(this,\"spec\",void 0),ng(this,\"peerConnection\",void 0),ng(this,\"initialOffer\",void 0),ng(this,\"transport\",void 0),ng(this,\"statsFilter\",void 0),ng(this,\"localCandidateCount\",0),ng(this,\"_isInRestartIce\",!1),ng(this,\"mutex\",new ly(\"P2PConnection-mutex\")),ng(this,\"onLocalCandidate\",void 0),ng(this,\"remoteSDP\",void 0),ng(this,\"pendingCandidates\",[]),ng(this,\"localCapabilities\",void 0),ng(this,\"isReady\",!1),ng(this,\"restartCnt\",0),ng(this,\"curTurnServerIndex\",0),this.store=i,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,i.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=n?n:Eb.SEND_ONLY,this.name=this.direction===Eb.SEND_ONLY?\"sendP2PConnection\":\"recvP2PConnection\",this.statsFilter=Ox(this.peerConnection,Oy(\"STATS_UPDATE_INTERVAL\"),void 0,PI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await UM();if(this.localCapabilities=FM(t),e){const{sdp:t}=e,i=dx(e,Dx),n=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=vM(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},\"sendonly\"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(VM(t,e,\"videoExtensions\",i,n,r),VM(t,e,\"videoCodecs\",i,n,r),VM(t,e,\"audioExtensions\",i,n,r),VM(t,e,\"audioCodecs\",i,n,r),Oy(\"RAISE_H264_BASELINE_PRIORITY\")){const e=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"===e.fmtp.parameters[\"profile-level-id\"]));if(-1!==e){const t=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){Jy.debug(\"raising H264 baseline profile priority\");const i=r.videoCodecs[e];r.videoCodecs.splice(e,1),r.videoCodecs.splice(t,0,i)}-1!==t&&Oy(\"FILTER_SEND_H264_BASELINE\")&&(i.videoCodecs=i.videoCodecs.filter((e=>!(e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"!==e.fmtp.parameters[\"profile-level-id\"]))))}}return{send:i,recv:n,sendrecv:r}}({},{},t);this.remoteSDP=new Nx({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:n,localCapabilities:this.localCapabilities,direction:this.direction,setup:\"actpass\",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:\"offer\",sdp:this.remoteSDP.toString()}),this.isReady=!0;const r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error(\"Cannot get answer sdp when trying to establish PeerConnection.\");const o=yM(r.sdp);await this.peerConnection.setLocalDescription(r);const s=await xM({},{},r.sdp);this.localCapabilities=FM(s);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),kx(kx({},o),{},{sdp:r.sdp})}{this.peerConnection.addTransceiver(\"video\",{direction:\"sendonly\"}),this.peerConnection.addTransceiver(\"audio\",{direction:\"sendonly\"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");const t=yM(e.sdp);return this.initialOffer=e,kx(kx({},t),{},{sdp:e.sdp})}}catch(e){throw new iv(tv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error(\"Cannot establish P2PConnection without initial offer.\");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:i,dtlsParameters:n}=e,r=await xM({},{},t);this.remoteSDP=new Nx({remoteIceParameters:i,remoteDtlsParameters:n,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:\"active\",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:\"answer\",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.connect failed; \".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new iv(tv.ADD_CANDIDATE_FAILED,\"P2PConnection.addRemoteCandidate failed; \".concat(e.toString()))}}send(e,t,i){var n=this;return XU((function*(){const r=yield jU(n.mutex.lock(\"From P2PConnection.send\"));try{if(!n.remoteSDP)throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");const o=[],s=n.remoteSDP.receive(e,t,i);e.forEach(((e,t)=>{if(s[t].needCreateTransceiver){const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:\"sendonly\"});o.push(t),e._updateRtpTransceiver(t)}else{const i=n.peerConnection.getTransceivers().find((e=>e.mid===s[t].mid));if(!i)throw new Error(\"cannot find transceiver when sendPeerconnection send, mid is \".concat(s[t].mid));o.push(i),e._updateRtpTransceiver(i)}})),PI()&&!0===Oy(\"SIMULCAST\")&&(yield jU(n.applySimulcastForFirefox(o,e)));const a=s.map((e=>e.mid)),c=yield jU(n.peerConnection.createOffer()),d=n.mungSendOfferSDP(c.sdp,e,a),l=gM.parse(d),u=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"Cannot extract ssrc from mediaDescription.\");return AM(t,Oy(\"USE_PUB_RTX\"))})),h=o.map(((e,t)=>{const i=a[t];return{localSSRC:u[t],id:i}}));yield jU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:d}));try{yield h}catch(e){const t=n.remoteSDP.toString();throw yield jU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:d})),yield jU(n.peerConnection.setRemoteDescription({type:\"answer\",sdp:t})),yield jU(n.stopSending(a,!0)),e}yield jU(n.applySimulcastEncodings(o,e)),yield jU(n.applySendEncodings(o,e));const p=n.remoteSDP.toString(),_=n.logSDPExchange(d,\"offer\",\"local\",\"send\");return null==_||_(p),yield jU(n.setRemoteDescription({type:\"answer\",sdp:p})),o.map(((e,t)=>{const i=a[t];return{localSSRC:u[t],id:i}}))}catch(e){throw e instanceof iv?e:new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.send failed; \".concat(e.toString()))}finally{r()}}))()}async stopSending(e,t){const i=t?void 0:await this.mutex.lock(\"From P2PConnection.stopSending\");try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length (\".concat(t.length,\") doesn't match mids' length (\").concat(e.length,\") when trying to call P2PConnection.stopSending.\"));t.map((e=>{var t;e.direction=\"inactive\",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||\"\",\"offer\",\"local\",\"stopSending\");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.setRemoteDescription({type:\"answer\",sdp:o})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.stopSending failed; \".concat(e.toString()))}finally{i&&i()}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);if(o){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"receive\");await this.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(n.sdp,r,e);null==i||i(o||\"\"),await this.peerConnection.setLocalDescription({type:\"answer\",sdp:o}),Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" by exchanging SDP.\"))}else Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" no need to exchange SDP.\"));const s=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!s||null===s.mid)throw new Error(\"Cannot get transceiver after setLocalDescription.\");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async mockReceive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);if(o){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"receive\");await this.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(n.sdp,r,e);null==i||i(o||\"\"),await this.peerConnection.setLocalDescription({type:\"answer\",sdp:o}),Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" by exchanging SDP.\"))}else Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" no need to exchange SDP.\"))}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"stopReceiving\");await this.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===vy.Auto&&(this.store.p2pTransport=vy.SdRtn,LD().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,LD().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");const{iceParameters:t}=yM(e.sdp);return this.store.descriptionStart(),this.direction===Eb.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===Eb.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:\"offer\",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error(\"Cannot get answer sdp when trying to iceRestart.\");const{iceParameters:t}=yM(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:\"answer\",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,\"closed\"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,\"offer\",\"local\",\"updateEncoderConfig\");await this.peerConnection.setLocalDescription({type:\"offer\",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===i.length&&(this.isVP8Simulcast(t)?PI()||await this.applySimulcastEncodings(i,[t]):await this.applySendEncodings(i,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getTransceivers().find((e=>e.mid===t));i&&await i.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:i,remote:n}=t.getSelectedCandidatePair();return{local:kx(kx({},px),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:kx(kx({},px),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Dn(e=[\"connected\",\"completed\"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;\"connected\"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{if(e.candidate){var t;if(e.candidate.candidate)null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON());this.localCandidateCount+=1}else Jy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] local candidate count\"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={iceServers:[]};var o;t.iceServers?r.iceServers=t.iceServers:t.turnServer&&\"off\"!==t.turnServer.mode&&(yv(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,i,n)),Oy(\"USE_TURN_SERVER_OF_GATEWAY\")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,i,n)),Dn(o=[vy.Relay,vy.SdRtn]).call(o,i)&&(r.iceTransportPolicy=\"relay\"),Oy(\"FORCE_TURN_TCP\")?r.iceTransportPolicy=\"relay\":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(r.iceTransportPolicy=\"relay\")}))));return Oy(\"ENABLE_ENCODED_TRANSFORM\")&&LD().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),Jy.debug(\"P2PConnection p2pTransport is \".concat(i)),r}static turnServerConfigToIceServers(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[],r=e.filter((e=>e.tcpport));Jy.debug(\"P2PConnection turnServers is \".concat(r,\", current index is \").concat(i));const o=r.length>i?r[i]:r[0];switch(t){case vy.SdRtn:const t=e.filter((e=>{var t;return Dn(t=e.username).call(t,\"glb:\")&&e.turnServerURL==e.turnServerURL})),r=t.length>i?t[i]:t[0];r&&(n.push({username:r.username,credential:r.password,credentialType:\"password\",urls:\"turn:\".concat(Nw(r.turnServerURL),\":\").concat(r.tcpport,\"?transport=udp\")}),n.push({username:r.username,credential:r.password,credentialType:\"password\",urls:\"turns:\".concat(Nw(r.turnServerURL),\":\").concat(r.tcpport,\"?transport=tcp\")}));break;case vy.Relay:o&&(n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turn:\".concat(o.turnServerURL,\":\").concat(o.tcpport,\"?transport=udp\")}),n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turns:\".concat(Nw(o.turnServerURL),\":\").concat(o.tcpport,\"?transport=tcp\")}));break;default:o&&(n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turn:\".concat(o.turnServerURL,\":\").concat(o.tcpport,\"?transport=udp\")}),n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turns:\".concat(Nw(o.turnServerURL),\":\").concat(o.tcpport,\"?transport=tcp\")}),n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"stun:\".concat(o.turnServerURL,\":\").concat(o.tcpport)}))}return n}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,\"error\"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var i;t&&(null===(i=this.onICETransportStateChange)||void 0===i||i.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:i}=t.getSelectedCandidatePair();Jy.info(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] selectedcandidatepairchange: local \").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),\", remote \").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),\" )\"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var i;if(!t){t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))}if(!t)return Jy.warn(\"[\".concat(e.getTrackId(),\"] no rtpSender found}\"));if(this.isVP8Simulcast(e))return Jy.warn(\"[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings\");if(!LD().supportSetRtpSenderParameters)return Jy.warn(\"[updateRtpSenderEncodings] Browser not support set rtp-sender parameters\");const n={},r={};switch(e._optimizationMode){case\"motion\":n.degradationPreference=\"maintain-framerate\";break;case\"detail\":n.degradationPreference=\"maintain-resolution\";break;default:n.degradationPreference=\"balanced\"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:i,scaleResolutionDownBy:n}=e._encoderConfig;t&&(r.maxBitrate=1e3*t),Dn(o=e._hints).call(o,ZD.LOW_STREAM)&&(i&&(r.maxFramerate=Pw(i)),n&&n>=1&&(r.scaleResolutionDownBy=n))}if(Oy(\"DSCP_TYPE\")&&JI()){var s;const e=Oy(\"DSCP_TYPE\");Dn(s=[\"very-low\",\"low\",\"medium\",\"high\"]).call(s,e)&&(r.networkPriority=e)}const a=t.getParameters(),c=null===(i=a.encodings)||void 0===i?void 0:i[0];PI()&&!c&&(n.encodings=[r]),c&&Object.assign(c,r),Object.assign(a,n),Jy.debug(\"[\".concat(e.getTrackId(),\"] updateRtpSenderEncodings: \").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!LD().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){const n=e[i],r=t[i];r instanceof Gk&&!this.isVP8Simulcast(r)&&await this.updateRtpSenderEncodings(r,n.sender)}}catch(e){Jy.debug(\"[\".concat(this.store.clientId,\"] Apply RTPSendEncodings failed.\"))}}mungSendOfferSDP(e,t,i){const n=gM.parse(e);return t.forEach(((e,t)=>{const r=i[t],o=n.mediaDescriptions.find((e=>e.attributes.mid===r));o&&(NM(o,e),MM(o,e,this.store.codec))})),gM.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var i,n,r,o,s;const c=e[a],d=t[a];if(d instanceof Gk&&!Dn(i=d._hints).call(i,ZD.LOW_STREAM)&&null!==(n=d._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=d._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=d._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&\"vp8\"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:\"m\",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:\"h\",active:!0,maxBitrate:t.high}];const i=c.sender.getParameters();await c.sender.setParameters(Object.assign(i,e))}}}async applySimulcastEncodings(e,t){if(!PI()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof Gk&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:\"high\",priority:\"high\",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:\"low\",priority:\"low\",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,r))}}}isVP8Simulcast(e){var t,i,n,r,o;return!!(e instanceof Gk&&Oy(\"SIMULCAST\")&&\"vp8\"===this.store.codec&&!Dn(t=e._hints).call(t,ZD.LOW_STREAM)&&null!==(i=e._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,i,n){if(Oy(\"SDP_LOGGING\"))return Jy.upload(\"[\".concat(this.store.clientId,\"] exchanging \").concat(i,\" \").concat(t,\" SDP during P2PConnection.\").concat(n,\"\\n\"),e),\"offer\"===t?e=>{this.logSDPExchange(e,\"answer\",\"local\"===i?\"remote\":\"local\",n)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((e=>{e.direction=\"inactive\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"muteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteLocal failed; \".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((async e=>{e.direction=\"sendonly\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"unmuteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteLocal failed; \".concat(e.toString()))}}async getRemoteSSRC(e,t){var i,n;if(t=null!==(i=t)&&void 0!==i?i:null===(n=this.currentRemoteDescription)||void 0===n?void 0:n.sdp){var r;const i=null===(r=gM.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===r?void 0:r.attributes.ssrcs;return null==i?void 0:i[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Dn(t=[\"connected\",\"completed\"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,i){const n=gM.parse(e),r=n.mediaDescriptions.find((e=>e.attributes.mid===t));return r&&i===Hb.AUDIO&&\"audio\"===r.media.mediaType&&BM(r),gM.print(n)}},ib(Px.prototype,\"establish\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"establish\"),Px.prototype),ib(Px.prototype,\"connect\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"connect\"),Px.prototype),ib(Px.prototype,\"receive\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"receive\"),Px.prototype),ib(Px.prototype,\"mockReceive\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"mockReceive\"),Px.prototype),ib(Px.prototype,\"stopReceiving\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"stopReceiving\"),Px.prototype),ib(Px.prototype,\"restartICE\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"restartICE\"),Px.prototype),ib(Px.prototype,\"close\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"close\"),Px.prototype),ib(Px.prototype,\"updateEncoderConfig\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"updateEncoderConfig\"),Px.prototype),ib(Px.prototype,\"updateSendParameters\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"updateSendParameters\"),Px.prototype),ib(Px.prototype,\"replaceTrack\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"replaceTrack\"),Px.prototype),ib(Px.prototype,\"muteLocal\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"muteLocal\"),Px.prototype),ib(Px.prototype,\"unmuteLocal\",[Ux],Object.getOwnPropertyDescriptor(Px.prototype,\"unmuteLocal\"),Px.prototype),Px);function Ux(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"From P2PConnection.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}function xx(e,t){let i=document.createElement(\"video\"),n=document.createElement(\"canvas\");i.setAttribute(\"style\",\"display:none\"),n.setAttribute(\"style\",\"display:none\"),i.setAttribute(\"muted\",\"\"),i.muted=!0,i.setAttribute(\"autoplay\",\"\"),i.autoplay=!0,i.setAttribute(\"playsinline\",\"\"),n.width=Pw(t.width),n.height=Pw(t.height);const r=Pw(t.framerate||15);document.body.append(i),document.body.append(n);let o=e._mediaStreamTrack;i.srcObject=new MediaStream([o]),i.play();const s=n.getContext(\"2d\");if(!s)throw new mb(tv.UNEXPECTED_ERROR,\"can not get canvas context\");const a=LD(),c=n.captureStream(a.supportRequestFrame?0:r).getVideoTracks()[0];c.canvas||(c.canvas=n),n.startCapture=()=>{if(!i)return n.stopCapture&&n.stopCapture();if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const e=i.videoWidth,t=i.videoHeight/e,r=n.width*t;Math.abs(r-n.height)>=2&&(Jy.debug(\"adjust low stream resolution\",\"\".concat(n.width,\"x\").concat(n.height,\" -> \").concat(n.width,\"x\").concat(r)),n.height=r)}s.drawImage(i,0,0,n.width,n.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,i.srcObject=new MediaStream([o]))},n.stopCapture=PP((()=>n.startCapture&&n.startCapture()),r);const d=c.stop;return c.stop=()=>{d.call(c),i&&(i.remove(),i.srcObject=null,i=null),n&&(n.width=0,n.remove(),n.stopCapture&&n.stopCapture(),n.startCapture=void 0,n.stopCapture=void 0,n=null),Jy.debug(\"clean low stream renderer\")},c}var Vx=function(e){return e[e.HEIGHT=2033]=\"HEIGHT\",e[e.FRAME_RATE=2034]=\"FRAME_RATE\",e[e.WIDTH=2035]=\"WIDTH\",e}(Vx||{}),Fx=function(e){return e[e.FRAME_RATE=2002]=\"FRAME_RATE\",e[e.WIDTH=2003]=\"WIDTH\",e[e.HEIGHT=2004]=\"HEIGHT\",e[e.PACKAGE_LOST=2005]=\"PACKAGE_LOST\",e[e.AVG_ENCODE=2007]=\"AVG_ENCODE\",e[e.NACKS=2009]=\"NACKS\",e[e.PLIS=2010]=\"PLIS\",e[e.FIRS=2011]=\"FIRS\",e[e.BITRATE=2012]=\"BITRATE\",e[e.PACKAGE_RATE=2031]=\"PACKAGE_RATE\",e[e.ADAPTATION=2032]=\"ADAPTATION\",e[e.ACTUAL_ENCODED=2060]=\"ACTUAL_ENCODED\",e[e.BANDWIDTH=2061]=\"BANDWIDTH\",e[e.RETRANSMIT=2062]=\"RETRANSMIT\",e[e.TARGET_ENCODED=2064]=\"TARGET_ENCODED\",e[e.TRANSMIT=2066]=\"TRANSMIT\",e[e.FREEZE=2082]=\"FREEZE\",e[e.DISABLED=2095]=\"DISABLED\",e[e.PLAYER_STATUS=2128]=\"PLAYER_STATUS\",e[e.QP_SUM=2143]=\"QP_SUM\",e}(Fx||{}),Bx=function(e){return e[e.BITRATE=2069]=\"BITRATE\",e[e.PACKAGE_LOST=2070]=\"PACKAGE_LOST\",e[e.PACKAGE_RATE=2071]=\"PACKAGE_RATE\",e[e.HEIGHT=2073]=\"HEIGHT\",e[e.FRAME_RATE=2075]=\"FRAME_RATE\",e[e.WIDTH=2077]=\"WIDTH\",e}(Bx||{}),jx=function(e){return e[e.JITTER=-1]=\"JITTER\",e[e.PACKAGE_LOST=2014]=\"PACKAGE_LOST\",e[e.WIDTH=2018]=\"WIDTH\",e[e.HEIGHT=2019]=\"HEIGHT\",e[e.FRAME_RATE=2020]=\"FRAME_RATE\",e[e.JITTER_BUFFER=2023]=\"JITTER_BUFFER\",e[e.CURRENT_DELAY=2024]=\"CURRENT_DELAY\",e[e.NACKS=2026]=\"NACKS\",e[e.PLIS=2027]=\"PLIS\",e[e.FIRS=2028]=\"FIRS\",e[e.BITRATE=2029]=\"BITRATE\",e[e.PACKAGE_RATE=2078]=\"PACKAGE_RATE\",e[e.FREEZE=2084]=\"FREEZE\",e[e.DISABLED=2101]=\"DISABLED\",e[e.PLAYER_STATUS=2129]=\"PLAYER_STATUS\",e[e.QP_SUM=2144]=\"QP_SUM\",e[e.I_FRAME_DELAY=2149]=\"I_FRAME_DELAY\",e}(jx||{}),Gx=function(e){return e[e.FRAME_RATE_DECODE=2021]=\"FRAME_RATE_DECODE\",e[e.FRAME_RATE_RENDER=2022]=\"FRAME_RATE_RENDER\",e[e.FRAME_RATE_OUTPUT=2155]=\"FRAME_RATE_OUTPUT\",e[e.FREEZE_TIME=2109]=\"FREEZE_TIME\",e[e.FREEZE_TIME_RENDER=2147]=\"FREEZE_TIME_RENDER\",e[e.FREEZE_DURATION=2156]=\"FREEZE_DURATION\",e}(Gx||{}),Wx=function(e){return e[e.PCM_LEVEL=2104]=\"PCM_LEVEL\",e}(Wx||{}),Hx=function(e){return e[e.PACKAGE_LOST=-1]=\"PACKAGE_LOST\",e[e.LEVEL=2038]=\"LEVEL\",e[e.BITRATE=2039]=\"BITRATE\",e[e.PACKAGE_RATE=2040]=\"PACKAGE_RATE\",e[e.AEC_RETURN_LOSS=2041]=\"AEC_RETURN_LOSS\",e[e.AEC_RETURN_LOSS_ENH=2042]=\"AEC_RETURN_LOSS_ENH\",e[e.FREEZE=2081]=\"FREEZE\",e[e.DISABLED=2096]=\"DISABLED\",e}(Hx||{}),Kx=function(e){return e[e.BITRATE=2044]=\"BITRATE\",e[e.PACKAGE_LOST=2045]=\"PACKAGE_LOST\",e[e.PACKAGE_RATE=2046]=\"PACKAGE_RATE\",e[e.CURRENT_DELAY=2047]=\"CURRENT_DELAY\",e[e.JITTER_BUFFER=2054]=\"JITTER_BUFFER\",e[e.JITTER=2055]=\"JITTER\",e[e.FREEZE=2083]=\"FREEZE\",e[e.DISABLED=2102]=\"DISABLED\",e[e.PCM_LEVEL=2105]=\"PCM_LEVEL\",e[e.PLAYER_STATUS=2130]=\"PLAYER_STATUS\",e[e.CONCEALED_SAMPLES=2148]=\"CONCEALED_SAMPLES\",e}(Kx||{}),Yx=function(e){return e[e.FREEZE_TIME=-1]=\"FREEZE_TIME\",e[e.LEVEL=2043]=\"LEVEL\",e}(Yx||{}),qx=function(e){return e[e.RTT=2006]=\"RTT\",e[e.CONN_TYPE=801]=\"CONN_TYPE\",e}(qx||{});const zx=1e3,Jx=3;function Xx(e,t,i){null!=i&&Number.isFinite(i)&&(e[t]=Math.round(Math.max(0,i)))}function Qx(e){const t={[qx.CONN_TYPE]:0,[qx.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case\"relay\":{const i=e.selectedCandidatePair.localCandidate.relayProtocol;\"udp\"===i&&(t[qx.CONN_TYPE]=1),\"tcp\"===i&&(t[qx.CONN_TYPE]=3),\"tls\"===i&&(t[qx.CONN_TYPE]=4);break}case\"srflx\":t[qx.CONN_TYPE]=2}return t}function Zx(e){let t=0;switch(e){case\"none\":t=0;break;case\"cpu\":t=1;break;case\"bandwidth\":t=2;break;case\"other\":t=3}return t}class $x extends mv{constructor(e){super(),ng(this,\"store\",void 0),ng(this,\"uploadWRTCStatsTimer\",void 0),ng(this,\"uploadOutboundDenoiserStatsTimer\",void 0),ng(this,\"uploadExtStatsTimer\",void 0),ng(this,\"uploadExtUsageStatsTimer\",void 0),ng(this,\"uploadInboundExtStatsTimer\",void 0),ng(this,\"requestStats\",void 0),ng(this,\"requestTransportStats\",void 0),ng(this,\"requestLocalMedia\",void 0),ng(this,\"requestRemoteMedia\",void 0),ng(this,\"requestAllTracks\",void 0),ng(this,\"requestVideoIsReady\",void 0),ng(this,\"requestUploadStats\",void 0),ng(this,\"requestUpload\",void 0),ng(this,\"uploadOutboundStarted\",!1),ng(this,\"uploadInboundStarted\",!1),ng(this,\"uploadTransportStarted\",!1),ng(this,\"uploadExtensionUsageStarted\",!1),ng(this,\"lastRecvStats\",void 0),ng(this,\"lastSendStats\",void 0),ng(this,\"lastFullRecvStats\",void 0),ng(this,\"lastFullSendStats\",void 0),ng(this,\"needUploadRenderFreezeTime\",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,i;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(i=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!i&&this.uploadInboundStarted&&(i=this.requestStats(!0)),t||i){const n={};if(this.uploadTransportStarted&&t){const r=this.getTransportStats(t,i,e);r&&(n.misc=[r])}if(this.uploadOutboundStarted&&t){const i=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);i&&(n.outbound=[i])}if(this.uploadInboundStarted&&i){const t=this.getInboundStats(i,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(n.inbound=t)}this.requestUploadStats(n)}this.lastRecvStats=i,this.lastSendStats=t,e||(this.lastFullRecvStats=i,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==Jx),++e===Jx+1&&(e=1)}),zx)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,i){if(!this.requestStats)return;if(i)return null==e.rtt?void 0:{addition:{[qx.RTT]:e.rtt,[qx.CONN_TYPE]:void 0}};const n=Qx(e);if(this.store.useP2P){if(t){const e=Qx(t);n[qx.CONN_TYPE]+=e[qx.CONN_TYPE]<<3}n[qx.CONN_TYPE]+=110}else n[qx.CONN_TYPE]+=100;return{addition:n}}getOutboundStats(e,t,i){if(!this.requestUploadStats||!this.requestLocalMedia)return;const n=this.requestLocalMedia();if(!n||0===n.length)return;let r,o,s;return n.forEach((n=>{let[a,{track:c,ssrcs:d}]=n;switch(a){case qb.LocalVideoLowTrack:case qb.LocalVideoTrack:if(a===qb.LocalVideoTrack){const n=function(e,t,i,n,r){const o=t.videoSend.find((t=>t.ssrc===e));if(!o)return;const s={},{sentFrame:a,inputFrame:c}=o;if(c&&a){const e=c.frameRate,t=a.frameRate;s[Fx.FREEZE]=function(e,t){let i=!0;return i=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),i}(e,t)?1:0}if(Xx(s,Fx.QP_SUM,o.qpSumPerFrame),r)return s;switch(a&&(Xx(s,Fx.HEIGHT,a.height),Xx(s,Fx.WIDTH,a.width),Xx(s,Fx.FRAME_RATE,a.frameRate)),s[Fx.DISABLED]=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?1:0,o.adaptionChangeReason){case\"none\":s[Fx.ADAPTATION]=0;break;case\"cpu\":s[Fx.ADAPTATION]=1;break;case\"bandwidth\":s[Fx.ADAPTATION]=2;break;case\"other\":s[Fx.ADAPTATION]=3}let d=0;o.adaptionChangeReason&&(d+=Zx(o.adaptionChangeReason)),t.qualityLimitationReason&&(d+=Zx(t.qualityLimitationReason)<<3),s[Fx.ADAPTATION]=d,s[Fx.PLAYER_STATUS]=TP[n._player?n._player.videoElementStatus:\"uninit\"],Xx(s,Fx.NACKS,o.nacksCount),Xx(s,Fx.PLIS,o.plisCount),Xx(s,Fx.FIRS,o.firsCount),Xx(s,Fx.AVG_ENCODE,o.avgEncodeMs);const l=i&&i.videoSend.find((t=>t.ssrc===e));if(l){let e=r?zx:zx*Jx;l.timestamp&&o.timestamp&&(e=o.timestamp-l.timestamp),null!=l.packets&&null!=o.packets&&Xx(s,Fx.PACKAGE_RATE,1e3*(o.packets-l.packets)/e),null!=o.packetsLost&&null!=l.packetsLost&&Xx(s,Fx.PACKAGE_LOST,o.packetsLost-l.packetsLost),null!=l.bytes&&null!=o.bytes&&Xx(s,Fx.BITRATE,8*(o.bytes-l.bytes)/e)}return s}(d[0].ssrcId,e,t,c,i),r=i?null:function(e,t,i){const n=t.videoSend.find((t=>t.ssrc===e));if(!n)return null;const r={},o=n.inputFrame,s=o&&o.height||i&&i.videoHeight||0,a=o&&o.width||i&&i.videoWidth||0,c=o&&o.frameRate||0;return Xx(r,Vx.HEIGHT,s),Xx(r,Vx.WIDTH,a),Xx(r,Vx.FRAME_RATE,c),r}(d[0].ssrcId,e,c),s=i?null:function(e){const t={};return Xx(t,Fx.RETRANSMIT,e.bitrate.retransmit),Xx(t,Fx.TARGET_ENCODED,e.bitrate.targetEncoded),Xx(t,Fx.ACTUAL_ENCODED,e.bitrate.actualEncoded),Xx(t,Fx.TRANSMIT,e.bitrate.transmit),Xx(t,Fx.BANDWIDTH,e.sendBandwidth),t}(e);o=Object.assign({},n,r,s)}else s=i?void 0:function(e,t,i){const n=t.videoSend.find((t=>t.ssrc===e));if(!n)return;const r={},o=n.sentFrame;if(o&&(Xx(r,Bx.HEIGHT,o.height),Xx(r,Bx.WIDTH,o.width),Xx(r,Bx.FRAME_RATE,o.frameRate)),i){const t=i.videoSend.find((t=>t.ssrc===e));if(t){let e=zx*Jx;t.timestamp&&n.timestamp&&(e=n.timestamp-t.timestamp),null!=t.packets&&null!=n.packets&&Xx(r,Bx.PACKAGE_RATE,1e3*(n.packets-t.packets)/e),null!=n.packetsLost&&null!=t.packetsLost&&Xx(r,Bx.PACKAGE_LOST,n.packetsLost-t.packetsLost),null!=t.bytes&&null!=n.bytes&&Xx(r,Bx.BITRATE,8*(n.bytes-t.bytes)/e)}}return r}(d[0].ssrcId,e,t);break;case qb.LocalAudioTrack:r=i?void 0:function(e,t,i,n){const r=t.audioSend.find((t=>t.ssrc===e));if(!r)return;const o={};o[Hx.DISABLED]=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?1:0;const s=100*n._source.getAccurateVolumeLevel(),a=r.inputLevel;if(null!=a){const e=Math.ceil(50*Math.log10(100*a+1));Xx(o,Hx.LEVEL,e)}Xx(o,Wx.PCM_LEVEL,s),Xx(o,Hx.AEC_RETURN_LOSS,r.aecReturnLoss),Xx(o,Hx.AEC_RETURN_LOSS_ENH,r.aecReturnLossEnhancement),o[Hx.FREEZE]=0;const c=i&&i.audioSend.find((t=>t.ssrc===e));if(c){let e=zx*Jx;c.timestamp&&r.timestamp&&(e=r.timestamp-c.timestamp),null!=c.bytes&&null!=r.bytes&&Xx(o,Hx.BITRATE,8*(r.bytes-c.bytes)/e),null!=c.packets&&null!=r.packets&&Xx(o,Hx.PACKAGE_RATE,1e3*(r.packets-c.packets)/e)}return o}(d[0].ssrcId,e,t,c)}})),{high:o,low:s,audio:r}}getInboundStats(e,t,i){if(!this.requestRemoteMedia)return;const n=this.requestRemoteMedia()||[],r=[];return n.forEach((n=>{let[o,s]=n;const a={peer:o.uid};if(s.has(Hb.VIDEO)&&o.videoTrack){const n=o._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(o._videoSSRC)||!1,r=o.videoTrack?function(e,t,i,n,r,o,s){var a;const c=t.videoRecv.find((t=>t.ssrc===e));if(!c)return;const d={},{receivedFrame:l,outputFrame:u,decodeFrameRate:h}=c,p=i&&i.videoRecv.find((t=>t.ssrc===e));if(d[jx.FREEZE]=r&&IV.isRemoteVideoFreeze(n,c,p)?1:0,Xx(d,Gx.FRAME_RATE_DECODE,h),Xx(d,jx.QP_SUM,c.qpSumPerFrame),c.framesRateFirefox&&Xx(d,jx.FRAME_RATE,c.framesRateFirefox),l&&Xx(d,jx.FRAME_RATE,l.frameRate),p){const e=t.timestamp-i.timestamp||(s?zx:Jx*zx);null!=c.packetsLost&&null!=p.packetsLost&&Xx(d,jx.PACKAGE_LOST,c.packetsLost-p.packetsLost),null!=p.bytes&&null!=c.bytes&&Xx(d,jx.BITRATE,8*(c.bytes-p.bytes)/e),null!=p.packets&&null!=c.packets&&Xx(d,jx.PACKAGE_RATE,1e3*(c.packets-p.packets)/e)}if(s)return d;l?(Xx(d,jx.HEIGHT,l.height),Xx(d,jx.WIDTH,l.width)):n&&(Xx(d,jx.HEIGHT,n._videoHeight||0),Xx(d,jx.WIDTH,n._videoWidth||0)),u&&Xx(d,Gx.FRAME_RATE_OUTPUT,u.frameRate);const _=null===(a=n._player)||void 0===a?void 0:a.rendFrameRate.toFixed(0);if(_&&Xx(d,Gx.FRAME_RATE_RENDER,+_),Xx(d,jx.JITTER_BUFFER,c.jitterBufferMs),Xx(d,jx.CURRENT_DELAY,c.currentDelayMs),Xx(d,jx.FIRS,c.firsCount),Xx(d,jx.NACKS,c.nacksCount),Xx(d,jx.PLIS,c.plisCount),n){d[jx.DISABLED]=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?0:1;const e=n._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:i,videoElementStatus:n}=e;if(t&&t.length>0&&Xx(d,Gx.FREEZE_TIME,t.splice(0,1)[0]),o&&\"visible\"===sM.visibility&&n===fP.PLAYING&&LD().supportRequestVideoFrameCallback){const t=Math.min(6e3,i);e.renderFreezeAccTime=Math.max(0,i-t),Xx(d,Gx.FREEZE_TIME_RENDER,t)}if(\"number\"==typeof c.totalFreezesDuration){const e=p&&p.totalFreezesDuration?c.totalFreezesDuration-p.totalFreezesDuration:c.totalFreezesDuration;Xx(d,Gx.FREEZE_DURATION,1e3*e)}}}if(d[jx.PLAYER_STATUS]=TP[n._player?n._player.videoElementStatus:\"uninit\"],p&&void 0!==c.totalInterFrameDelay&&void 0!==c.totalSquaredInterFrameDelay&&void 0!==p.totalInterFrameDelay&&void 0!==p.totalSquaredInterFrameDelay){const e=c.totalInterFrameDelay-p.totalInterFrameDelay,t=c.totalSquaredInterFrameDelay-p.totalSquaredInterFrameDelay,i=c.framesDecodeCount-p.framesDecodeCount,n=e/i*1e3,r=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/i)/i));!isNaN(r)&&n+r>Math.max(3*n,n+150)&&(d[jx.I_FRAME_DELAY]=r)}return d}(o._videoSSRC,e,t,o.videoTrack,!0===n,this.needUploadRenderFreezeTime,i):void 0;r&&(a.video=r)}if(s.has(Hb.AUDIO)&&o.audioTrack){const n=o.audioTrack?function(e,t,i,n,r){const o=t.audioRecv.find((t=>t.ssrc===e));if(!o)return;const s={},a=i&&i.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:d}=o;var l,u;if(Xx(s,Kx.JITTER,o.jitterMs),null!=c&&null!=d&&(s[Kx.FREEZE]=(u=d,0===(l=c)||100*u/l>20?1:0)),a){const e=t.timestamp-i.timestamp||(r?zx:zx*Jx);null!=o.packets&&null!=a.packets&&Xx(s,Kx.PACKAGE_RATE,1e3*(o.packets-a.packets)/e),null!=a.bytes&&null!=o.bytes&&Xx(s,Kx.BITRATE,8*(o.bytes-a.bytes)/e),null!=o.packetsLost&&null!=a.packetsLost&&Xx(s,Kx.PACKAGE_LOST,o.packetsLost-a.packetsLost)}if(r)return s;const h=100*n._source.getAccurateVolumeLevel(),p=o.outputLevel;if(null!=p){const e=Math.ceil(50*Math.log10(100*p+1));Xx(s,Yx.LEVEL,e)}if(Xx(s,Kx.PCM_LEVEL,h),n&&(s[Kx.DISABLED]=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?0:1),Xx(s,Kx.JITTER_BUFFER,o.jitterBufferMs),Xx(s,Kx.CURRENT_DELAY,o.jitterBufferMs),s[Kx.PLAYER_STATUS]=TP[ZP.getPlayerState(n.getTrackId())],a){const e=o.concealedSamples-a.concealedSamples;e>0&&Xx(s,Kx.CONCEALED_SAMPLES,e)}return s}(o._audioSSRC,e,t,o.audioTrack,i):void 0;n&&(a.audio=n)}(a.video||a.audio)&&r.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,r}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof ek));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(pb.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{if(!this.requestUpload||!this.requestRemoteMedia)return;(this.requestRemoteMedia()||[]).forEach((e=>{let[t,i]=e;if(i.has(Hb.VIDEO)&&t.videoTrack){t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}if(i.has(Hb.AUDIO)&&t.audioTrack){t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),i={connectionInterval:Oy(\"EXTENSION_USAGE_UPLOAD_INTERVAL\")/1e3,details:[],lts:t};let n=[];const r=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of r)!e.muted&&e.enabled&&(n=n.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,t]of o)t.has(Hb.VIDEO)&&e.videoTrack&&(n=n.concat(await e.videoTrack.getProcessorUsage())),t.has(Hb.AUDIO)&&e.audioTrack&&(n=n.concat(await e.audioTrack.getProcessorUsage()));if(0===n.length)return;i.details=function(e,t){const i={};for(const{id:s,value:a,level:c,direction:d}of e){var n;const e=null!==(n=t.get(s))&&void 0!==n?n:0,l=2===a?e+Oy(\"EXTENSION_USAGE_UPLOAD_INTERVAL\")/1e3:e;var r,o;t.set(s,l),i[s]?(2===a&&(i[s].value=a),c>i[s].level&&(i[s].level=c),\"remote\"===d&&(i[s].remoteUidCount+=1),i[s].totalTs=null!==(r=t.get(s))&&void 0!==r?r:0):i[s]={value:a,level:c,remoteUidCount:\"local\"===d?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(i).map((e=>{const{level:t,value:n,totalTs:r}=i[e];return{id:e,level:t,value:n,totalTs:r}}))}(n,e);const s=Date.now(),a=s>t?s:t+1;this.requestUpload&&this.requestUpload(pb.EXTENSION_USAGE_STATS,{usageStats:i,sendTs:a})}),Oy(\"EXTENSION_USAGE_UPLOAD_INTERVAL\"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class eV{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){ng(this,\"uid\",void 0),ng(this,\"_uintid\",void 0),ng(this,\"_trust_in_room_\",!0),ng(this,\"_trust_audio_enabled_state_\",!0),ng(this,\"_trust_video_enabled_state_\",!0),ng(this,\"_trust_audio_mute_state_\",!0),ng(this,\"_trust_video_mute_state_\",!0),ng(this,\"_audio_muted_\",!1),ng(this,\"_video_muted_\",!1),ng(this,\"_audio_enabled_\",!0),ng(this,\"_video_enabled_\",!0),ng(this,\"_audio_added_\",!1),ng(this,\"_video_added_\",!1),ng(this,\"_is_pre_created\",!1),ng(this,\"_video_pre_subscribed\",!1),ng(this,\"_audio_pre_subscribed\",!1),ng(this,\"_trust_video_stream_added_state_\",!0),ng(this,\"_trust_audio_stream_added_state_\",!0),ng(this,\"_audioTrack\",void 0),ng(this,\"_videoTrack\",void 0),ng(this,\"_dataChannels\",[]),ng(this,\"_audioSSRC\",void 0),ng(this,\"_videoSSRC\",void 0),ng(this,\"_audioOrtc\",void 0),ng(this,\"_videoOrtc\",void 0),ng(this,\"_cname\",void 0),ng(this,\"_rtxSsrcId\",void 0),ng(this,\"_videoMid\",void 0),ng(this,\"_audioMid\",void 0),this.uid=e,this._uintid=t}}let tV=function(e){return e.SEND_ONLY=\"SEND_ONLY\",e.RECEIVE_ONLY=\"RECEIVE_ONLY\",e}({});function iV(e,t){var i;let n;switch(t){case qb.LocalAudioTrack:n=Lb.Audio;break;case qb.LocalVideoTrack:n=Dn(i=e._hints).call(i,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalVideoLowTrack:n=Lb.Low}return n}function nV(e){const t=LD();if(e.some((e=>e._bypassWebAudio)))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio\");if(!t.webAudioMediaStreamDest)throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks because your browser does not support audio mixing\")}function rV(e,t){nV(e);const i=t||new ik;return e.forEach((e=>i.addAudioTrack(e))),i}var oV,sV,aV,cV,dV,lV,uV,hV,pV,_V,EV,fV;function mV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function TV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?mV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let SV=(oV=gV(tV.SEND_ONLY),sV=gV(tV.SEND_ONLY),aV=gV(),cV=gV(tV.RECEIVE_ONLY),dV=gV(tV.RECEIVE_ONLY),lV=gV(tV.RECEIVE_ONLY),uV=gV(tV.RECEIVE_ONLY),hV=gV(tV.RECEIVE_ONLY),pV=gV(tV.RECEIVE_ONLY),_V=gV(),EV=gV(tV.RECEIVE_ONLY),fV=class extends mv{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(Jb.StateChange,t,this._state)}constructor(e,t){super(),ng(this,\"isPlanB\",!1),ng(this,\"store\",void 0),ng(this,\"statsUploader\",void 0),ng(this,\"sendConnection\",void 0),ng(this,\"recvConnection\",void 0),ng(this,\"localTrackMap\",new Map),ng(this,\"remoteUserMap\",new Map),ng(this,\"localDataChannels\",[]),ng(this,\"pendingLocalTracks\",[]),ng(this,\"pendingRemoteTracks\",[]),ng(this,\"statsCollector\",void 0),ng(this,\"dtlsFailedCount\",0),ng(this,\"sendMutex\",new ly(\"P2PChannel2-send-mutex\")),ng(this,\"recvMutex\",new ly(\"P2PChannel2-recv-mutex\")),ng(this,\"_state\",zb.Disconnected),ng(this,\"_restartStates\",[\"disconnected\",\"failed\"]),ng(this,\"reconnectInterval\",void 0),ng(this,\"uploadUnplinkStarted\",!1),ng(this,\"uploadDownlinkStarted\",!1),ng(this,\"uplinkStateUploadInterval\",void 0),ng(this,\"downlinkStatsUploadInterval\",void 0),ng(this,\"handleMuteLocalTrack\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleMuteLocalTrack\");try{if(!this.sendConnection||this.state!==zb.Connected)return void i(new iv(tv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.\"));const s=this.filterTobeMutedTracks(e);if(0===s.length)return void t();const a=s.find((e=>\"videoLowTrack\"===e[0]));if(a){a[1].track._originMediaStreamTrack.stop()}await this.sendConnection.muteLocal(s.map((e=>{let[,{id:t}]=e;return t})));let c=!1;var r,o;if(\"video\"===e.trackMediaType)c=!(null===(r=this.localTrackMap.get(qb.LocalAudioTrack))||void 0===r||!r.track._muted);else c=void 0===(null===(o=this.localTrackMap.get(qb.LocalVideoTrack))||void 0===o?void 0:o.id);const d=this.createMuteMessage(s);await Lv(this,Jb.RequestMuteLocal,d);const l=\"video\"===e.trackMediaType?sw.MUTE_LOCAL_VIDEO:sw.MUTE_LOCAL_AUDIO;await Lv(this,Jb.RequestP2PMuteLocal,{action:l,message:d,isMuteAll:c}),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleUnmuteLocalTrack\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleUnmuteLocalTrack\");try{if(!this.sendConnection||this.state!==zb.Connected)return void i(new iv(tv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established.\"));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r),s=\"video\"===e.trackMediaType?sw.UNMUTE_LOCAL_VIDEO:sw.UNMUTE_LOCAL_AUDIO;await Lv(this,Jb.RequestP2PMuteLocal,{action:s,message:o}),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleUpdateVideoEncoder\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleSetVideoEncoder\");try{const i=this.localTrackMap.get(qb.LocalVideoTrack);if(!this.sendConnection||!i||i.track!==e||this.state!==zb.Connected)return void t();const{id:r,track:o}=i;r&&(await this.sendConnection.updateSendParameters(r,o),await this.sendConnection.updateEncoderConfig(r,o),this.emit(Jb.UpdateVideoEncoder,o)),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleUpdateVideoSendParameters\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleUpdateVideoSendParameters\");try{const i=this.localTrackMap.get(qb.LocalVideoTrack);if(!this.sendConnection||!i||i.track!==e||this.state!==zb.Connected)return void t();const{id:r,track:o}=i;r&&await this.sendConnection.updateSendParameters(r,o),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleReplaceTrack\",(async(e,t,i,n)=>{let r;Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2 handleReplaceTrack for [track-id-\").concat(e.getTrackId(),\"]\")),\"boolean\"==typeof n&&n||(r=await this.sendMutex.lock(\"From P2PChannel2.handleReplaceTrack\"));try{var o;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(!this.sendConnection||!i||void 0===i[1].id||this.state!==zb.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,i[1].id)),i[0]===qb.LocalVideoTrack&&LD().supportDualStreamEncoding){const t=this.localTrackMap.get(qb.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}}t()}catch(e){i(e)}finally{var s;null===(s=r)||void 0===s||s()}})),ng(this,\"handleGetLocalVideoStats\",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),ng(this,\"handleGetLocalAudioStats\",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),ng(this,\"handleGetRemoteVideoStats\",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),ng(this,\"handleGetRemoteAudioStats\",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new $x(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&(\"disconnected\"!==e.iceConnectionState&&\"failed\"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),Oy(\"ICE_RESTART_INTERVAL\"))}async startP2PConnection(e,t){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support startP2PConnection.\")}async connect(e){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support connect.\")}async startP2P(e,t){let i;try{if(t){this.recvConnection&&(Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.startP2P reset recvConnection.\")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),i=await this.recvMutex.lock(\"From P2PChannel.startP2P\"),this.recvConnection=new Mx(e,this.store,Eb.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const n=await this.recvConnection.establish(t);return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}{this.state=zb.New,this.sendConnection&&(Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.startP2P reset sendConnection.\")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),i=await this.sendMutex.lock(\"From P2PChannel.startP2P\"),this.sendConnection=new Mx(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{i&&i()}}async p2pConnect(e){if(!this.sendConnection)throw new iv(tv.UNEXPECTED_ERROR,\"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .\");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=zb.Connected}async addRemoteCandidate(e,t){if(t===Eb.RECEIVE_ONLY){if(!this.sendConnection)throw new iv(tv.UNEXPECTED_ERROR,\"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .\");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new iv(tv.UNEXPECTED_ERROR,\"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .\");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,i){var n=this;return XU((function*(){const r=yield jU(n.sendMutex.lock(\"From P2PChannel.publish\"));try{if(!n.sendConnection||n.state!==zb.Connected){n.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===n.pendingLocalTracks.indexOf(e)));return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(t))}n.store.pubId=n.store.pubId+1,FU.markPublishStart(n.store.clientId,n.store.pubId);const o=n.filterTobePublishedTracks(e,t,i);if(0===o.length)return void(yield jU(n.tryToUnmuteAudio(e)));o.forEach((e=>{let{track:t,type:i}=e;const r=Date.now();n.store.publish(t.getTrackId(),i===qb.LocalAudioTrack?\"audio\":\"video\",r)})),n.bindLocalTrackEvents(o);const s=yield jU(n.sendConnection.send(o.map((e=>{let{track:t}=e;return t})),n.store.codec,n.store.audioCodec)),a=(yield jU(s.next())).value,c=n.createGatewayPublishMessage(o,a);try{yield c}catch(e){throw s.throw(e),(null==e?void 0:e.code)===tv.WS_ABORT&&o.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(o),e}yield jU(s.next()),o.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.statsUploader.startUploadOutboundStats(),n.assignLocalTracks(o,a),o.forEach((e=>{let{track:t,type:i}=e;const r=Date.now();n.store.publish(t.getTrackId(),i===qb.LocalAudioTrack?\"audio\":\"video\",void 0,r)})),n.startUploadUplinkState()}finally{r()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==zb.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Dn(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const i=t.find((e=>\"videoLowTrack\"===e[0]));if(i){i[1].track.close()}const n=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:i}]=e;return{type:t,track:i}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===zb.Connected){if(i){i[1].track.close()}return n}e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((i=>{let[n,{track:r,ssrcs:o}]=i;const s={stream_type:iV(r,n),ssrcs:o};r._muted||!r._enabled?e.push(s):t.push(s)})),e.length>0&&e.forEach((e=>{Lv(this,Jb.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{Lv(this,Jb.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return XU((function*(){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support publishLowStream.\")}))()}async republish(){this.pendingLocalTracks.length>0&&(Jy.debug(\"[\".concat(this.store.clientId,\"] Emit P2PChannelEvents.RequestRePublish to republish tracks.\")),await Pv(this,Jb.RequestRePublish,this.pendingLocalTracks),this.emit(Jb.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support unpublishLowStream.\")}async subscribe(e,t,i,n){var r;if(!this.recvConnection)throw new iv(tv.INVALID_OPERATION,\"Cannot subscribe remote user when recvConnection disconnected.\");if(null!==(r=this.remoteUserMap.get(e))&&void 0!==r&&r.has(t))return;const{track:o,mid:s,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:i}],String(e.uid),n);t===Hb.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new oM(o,e.uid,e._uintid,this.store),Jy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote audio track: \").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=i,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new rM(o,e.uid,e._uintid,this.store),Jy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote video track: \").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const d=this.pendingRemoteTracks.findIndex((i=>{let{user:n,kind:r}=i;return n.uid===e.uid&&t===r}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(Jb.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,i,n){if(!this.recvConnection)throw new iv(tv.INVALID_OPERATION,\"Cannot subscribe remote user when recvConnection disconnected.\");await this.recvConnection.mockReceive(t,[{ssrcId:i}],String(e.uid),n)}async unsubscribe(e,t,i){const n=this.pendingRemoteTracks.filter((i=>{let{user:n,kind:r}=i;return void 0!==t?n.uid===e.uid&&t===r:n.uid===e.uid}));if(n.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||i||n.forEach((t=>{let{kind:i}=t;var n;if(i===Hb.AUDIO)null===(n=e._audioTrack)||void 0===n||n._destroy(),e._audioTrack=void 0;else if(i===Hb.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const r=this.filterTobeUnSubscribedTracks(e,t);0!==r.length&&(await this.recvConnection.stopReceiving(r.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),r.forEach((e=>{let[t,{kind:n}]=e;var r,o;n===Hb.VIDEO&&t._videoSSRC&&(null===(r=this.recvConnection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(n===Hb.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),i||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(n===Hb.AUDIO){var s;if(this.unbindRemoteTrackEvents(t._audioTrack),!i)null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}})),r.forEach((e=>{let[,{kind:t}]=e;Lv(this,Jb.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[Hb.VIDEO,Hb.AUDIO].forEach((e=>{t.has(e)?Lv(this,Jb.RequestP2PUnmuteRemote,e):Lv(this,Jb.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support massSubscribe.\")}async massSubscribeNoLock(e){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support massSubscribeNoLock.\")}async massUnsubscribe(e){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support massUnsubscribe.\")}async massUnsubscribeNoLock(e){throw new iv(tv.NOT_SUPPORTED,\"p2p mode does not support massUnsubscribeNoLock.\")}async muteRemote(e,t){if(!this.recvConnection)return;const i=this.remoteUserMap.get(e);if(!i)return void Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.muteRemote has no remote user \").concat(e.uid,\".\"));if(!i.get(t))return void Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.muteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"));const n=t===Hb.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==n&&this.recvConnection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const i=this.remoteUserMap.get(e);if(!i)return void Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.unmuteRemote has no remote user \").concat(e.uid,\".\"));i.get(t)||Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.unmuteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"))}getAllTracks(e){const t=this.localTrackMap.get(qb.LocalAudioTrack);if((null==t?void 0:t.track)instanceof ik){const i=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==qb.LocalAudioTrack})).filter((t=>{let[i]=t;return!(e&&i===qb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[i]=t;return!(e&&i===qb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,i,n,r){if(e){const i=this.localTrackMap.get(qb.LocalAudioTrack),o=n?this.localTrackMap.get(qb.LocalVideoLowTrack):this.localTrackMap.get(qb.LocalVideoTrack);rA.publish(this.store.sessionId,{eventElapse:FU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==i?void 0:i.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(ZD.SCREEN_TRACK)),audio:!!i,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var o;i||(i=[]);const s=i.find((e=>e instanceof $L)),a=n?null===(o=this.localTrackMap.get(qb.LocalVideoTrack))||void 0===o?void 0:o.track:i.find((e=>e instanceof Gk));rA.publish(this.store.sessionId,{eventElapse:FU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(ZD.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,i,n){const r=n===Hb.VIDEO?i._videoSSRC:i._audioSSRC;r&&rA.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Hb.VIDEO,audio:n===Hb.AUDIO,peerid:i.uid,subscribeRequestid:n===Hb.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:FU.measureFromSubscribeStart(this.store.clientId,r)})}reset(){Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2.reset\")),this.sendMutex=new ly(\"P2PChannel2-send-mutex\"),this.sendMutex=new ly(\"P2PChannel2-recv-mutex\"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(qb.LocalAudioTrack);if((null==e?void 0:e.track)instanceof ik){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=zb.Disconnected}getStats(e){var t,i;return e?null===(i=this.recvConnection)||void 0===i?void 0:i.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(qb.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(qb.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof Gk||t&&t.track instanceof $L?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}getRemoteMedia(e){var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(qb.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=oE(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2.disconnectForReconnect closing P2PConnection\")),this.state=zb.Reconnecting,Oy(\"KEEP_LAST_FRAME\")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var i;t._videoTrack&&t._videoTrack._player&&(null===(i=t._videoTrack._player.getVideoElement())||void 0===i||i.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[i,{track:n}]=e;switch(i){case qb.LocalVideoTrack:Dn(t=n._hints).call(t,ZD.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case qb.LocalAudioTrack:n instanceof ik?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case qb.LocalVideoLowTrack:}})),this.emit(Jb.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;Array.from(d_(i).call(i)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(Jb.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2 disconnected, waiting to reconnect.\")))}hasPendingRemoteMedia(e,t){for(const i of this.pendingRemoteTracks){const{user:n,kind:r}=i;if((e instanceof eV?e.uid:e)===n.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let i,n;if(e===Eb.SEND_ONLY){if(!this.sendConnection)throw new iv(tv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.\");i=await this.sendMutex.lock(\"From P2PChannel.restartICE\"),n=this.sendConnection}else{if(!this.recvConnection)throw new iv(tv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.\");i=await this.recvMutex.lock(\"From P2PChannel.restartICE\"),n=this.recvConnection}try{if(t){const e=await n.restartICE(t);return n.isInRestartIce=!1,e}{const e=await n.restartICE();if(e){const t=await Pv(this,Jb.RequestP2PRestartICE,{direction:Eb.RECEIVE_ONLY,iceParameter:e});await n.restartICE(t),n.isInRestartIce=!1}}}finally{i()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(qb.LocalVideoTrack),i=this.localTrackMap.get(qb.LocalAudioTrack),n=e.videoSend.find((e=>{var i;return e.ssrc===(null==t||null===(i=t.ssrcs)||void 0===i?void 0:i[0].ssrcId)})),r=e.audioSend.find((e=>{var t;return e.ssrc===(null==i||null===(t=i.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!n||!r)return 1;const o=kv(this,Jb.NeedSignalRTT),s=n?n.rttMs:void 0,a=r?r.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,u=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(ZD.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,i=e.bitrate.actualEncoded;if(t&&i){const e=(1e3*t-i)/(1e3*t);return aA[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((i=>{let[n]=i;const r=n._audioSSRC,o=n._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===r)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=kv(this,Jb.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*l/1500;u&&(p=.6*h*100/50+.2*l/1500+.2*u/400);t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new Gh(((t,i)=>{this.handleMuteLocalTrack(e,t,i)}))}filterTobePublishedTracks(e,t,i){const n=[],r=LD(),o=this.getAllTracks();e=Vv(e=e.filter((e=>-1===o.indexOf(e))));let s=!1,a=!1;for(const o of e){if(o instanceof Gk&&(this.localTrackMap.has(qb.LocalVideoTrack)||s?new iv(tv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:o,type:qb.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(o,i);n.push({track:e,type:qb.LocalVideoLowTrack})}if(o instanceof $L){const e=this.localTrackMap.get(qb.LocalAudioTrack);if(e){if(!(e.track instanceof ik))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");if(o._bypassWebAudio)throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio\");e.track.addAudioTrack(o),this.bindLocalAudioTrackEvents(o,!0)}else if(a){const e=n.find((e=>{let{type:t}=e;return t===qb.LocalAudioTrack}));if(!(e.track instanceof ik))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");if(o._bypassWebAudio)throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio\");e.track.addAudioTrack(o)}else{if(!r.webAudioMediaStreamDest||o instanceof ik||o._bypassWebAudio)n.push({track:o,type:qb.LocalAudioTrack});else{const e=new ik;e.addAudioTrack(o),n.push({track:e,type:qb.LocalAudioTrack})}a=!0}}}return n}filterTobeUnpublishedTracks(e){const t=[],i=this.getAllTracks();e=Vv(e=e.filter((e=>-1!==i.indexOf(e))));for(const i of e){if(i instanceof $L){const e=this.localTrackMap.get(qb.LocalAudioTrack);if(!e)continue;e.track instanceof ik?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([qb.LocalAudioTrack,e]),e.track.close())):t.push([qb.LocalAudioTrack,e])}if(i instanceof Gk){const e=this.localTrackMap.get(qb.LocalVideoTrack);if(!e)continue;t.push([qb.LocalVideoTrack,e]);const i=this.localTrackMap.get(qb.LocalVideoLowTrack);i&&t.push([qb.LocalVideoLowTrack,i])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:i}=e;switch(i){case qb.LocalVideoTrack:t.addListener(QD.GET_STATS,this.handleGetLocalVideoStats),t.addListener(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(QD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(QD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case qb.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case qb.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof ik?e.trackList.forEach((e=>{e.addListener(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(QD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(QD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:i}]=e;return{track:i,type:t}}))),e.forEach((e=>{let{track:t,type:i}=e;switch(i){case qb.LocalVideoTrack:t.off(QD.GET_STATS,this.handleGetLocalVideoStats),t.off(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(QD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(QD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case qb.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case qb.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof ik?e.trackList.forEach((e=>{e.off(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(QD.GET_STATS,this.handleGetLocalAudioStats),e.off(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(QD.GET_STATS,this.handleGetLocalAudioStats),e.off(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof rM&&t.addListener(QD.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof oM&&t.addListener(QD.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(QD.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;i.has(Hb.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),i.has(Hb.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,i)=>{var n;let r,{track:o,type:s}=e;switch(s){case qb.LocalAudioTrack:r=Lb.Audio;break;case qb.LocalVideoTrack:r=Dn(n=o._hints).call(n,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalVideoLowTrack:r=Lb.Low}return{kind:s===qb.LocalAudioTrack?Hb.AUDIO:Hb.VIDEO,stream_type:r,mid:t[i].id,ssrcs:t[i].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case qb.LocalVideoTrack:i=Dn(t=r._hints).call(t,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalAudioTrack:i=Lb.Audio;break;case qb.LocalVideoLowTrack:i=Lb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,i)=>{let{track:n,type:r}=e;this.localTrackMap.set(r,{track:n,id:t[i].id,ssrcs:t[i].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var i;Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: \").concat(e.name,\".onConnectionStateChange(\").concat(t,\")\")),this.emit(Jb.PeerConnectionStateChange,t),\"connected\"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),\"connected\"===t&&(e.isInRestartIce=!1),Dn(i=this._restartStates).call(i,t)&&!e.isInRestartIce&&(\"disconnected\"===t&&await Qv(800),\"disconnected\"!==e.iceConnectionState&&\"failed\"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{\"connected\"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICEConnectionStateChange(\").concat(e,\")\")),rA.reportApiInvoke(this.store.sessionId,{name:\"ICEConnectionStateChange\",options:e,tag:Rv.TRACER}).onSuccess(),this.emit(Jb.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICETransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportStateChange=e=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportError=e=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportError(\").concat(e,\")\"))},e.onFirstAudioDecoded=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var n;i&&(this.store.subscribe(i.uid,\"audio\",void 0,void 0,void 0,Date.now()),null===(n=i.audioTrack)||void 0===n||n.emit(rP.FIRST_FRAME_DECODED),rA.firstRemoteFrame(this.store.sessionId,$y.FIRST_AUDIO_DECODE,eA.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));i&&rA.firstRemoteFrame(this.store.sessionId,$y.FIRST_AUDIO_RECEIVED,eA.FIRST_AUDIO_RECEIVED,{peer:i._uintid,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,i)=>{this.reportVideoFirstFrameDecoded(e,t,i)},e.onFirstVideoReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));i&&rA.firstRemoteFrame(this.store.sessionId,$y.FIRST_VIDEO_RECEIVED,eA.FIRST_VIDEO_RECEIVED,{peer:i._uintid,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const i=\"relay\"===e.candidateType,n=\"relay\"===t.candidateType;\"unknown\"!==t.candidateType&&i===n||this.emit(Jb.ConnectionTypeChange,i),Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedLocalCandidateChanged(\").concat(JSON.stringify(Vw(t)),\" -> \").concat(JSON.stringify(Vw(e)),\")\"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedRemoteCandidateChanged(\").concat(JSON.stringify(Vw(t)),\" -> \").concat(JSON.stringify(Vw(e)),\")\"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(Jb.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===Eb.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PChannel-\").concat(t.name,\"] start use restartICE\")),e===Eb.SEND_ONLY?this.restartICE(e):Pv(this,Jb.RequestP2PRestartICE,{direction:Eb.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const i=this.localTrackMap.get(qb.LocalAudioTrack);if(e instanceof $L&&(null==i?void 0:i.track)instanceof ik)return i.track.isActive||t.push([qb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n&&(t.push(n),n[0]===qb.LocalVideoTrack)){const e=this.localTrackMap.get(qb.LocalVideoLowTrack);e&&t.push([qb.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],i=this.localTrackMap.get(qb.LocalAudioTrack);if(e instanceof $L&&(null==i?void 0:i.track)instanceof ik)return i.track.isActive&&t.push([qb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n)if(n[0]===qb.LocalVideoTrack){t.push(n);const e=this.localTrackMap.get(qb.LocalVideoLowTrack);e&&t.push([qb.LocalVideoLowTrack,e])}else t.push(n);return t}createMuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case qb.LocalAudioTrack:i=Lb.Audio;break;case qb.LocalVideoTrack:i=Dn(t=r._hints).call(t,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalVideoLowTrack:i=Lb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case qb.LocalAudioTrack:i=Lb.Audio;break;case qb.LocalVideoTrack:i=Dn(t=r._hints).call(t,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalVideoLowTrack:i=Lb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const i=[],n=this.remoteUserMap.get(e);if(!n)return i;if(t){const r=n.get(t);if(!r)return i;i.push([e,{kind:t,id:r}])}else Array.from(n.entries()).forEach((t=>{let[n,r]=t;i.push([e,{kind:n,id:r}])}));return i}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[i,{kind:n,id:r}]=e;switch(n){case Hb.VIDEO:return void(i._videoSSRC&&t.push({stream_type:Hb.VIDEO,ssrcId:i._videoSSRC}));case Hb.AUDIO:return void(i._audioSSRC&&t.push({stream_type:Hb.AUDIO,ssrcId:i._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:i}]=e;const n=this.remoteUserMap.get(t);n&&(n.delete(i),0===Array.from(n.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(qb.LocalVideoTrack),i=this.localTrackMap.get(qb.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),i&&e.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return\"connected\"!==e&&\"connected\"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof $L){const i=this.filterTobeUnmutedTracks(e[t]);if(0===i.length)continue;const n=this.createUnmuteMessage(i);return void await Lv(this,Jb.RequestUnmuteLocal,n)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Jb.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Jb.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Qv(py(this.dtlsFailedCount,hy)),this.emit(Jb.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(qb.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof Gk))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof Gk)).length>1)throw new iv(tv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof $L)).length>1&&(e.some((e=>e instanceof $L&&e._bypassWebAudio))||!LD().webAudioMediaStreamDest))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");for(const t of e){if(t instanceof Gk&&this.pendingLocalTracks.some((e=>e instanceof Gk)))throw new iv(tv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof $L&&this.pendingLocalTracks.some((e=>e instanceof $L))&&(!LD().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof $L&&e._bypassWebAudio))))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\")}}getLowVideoTrack(e,t){const i=!Oy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&LD().supportDualStreamEncoding,n=TV(TV({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=i?e._mediaStreamTrack.clone():xx(e,n);const o=Zv(8,\"track-low-\"),s=new Gk(r,TV(TV({},i&&{scaleResolutionDownBy:xw(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return s.on(iP.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,$D.LOW_STREAM)})),s._hints.push(ZD.LOW_STREAM),e.addListener(QD.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.recvMutex.lock(\"From P2PChannel2.globalLock\")}reportVideoFirstFrameDecoded(e,t,i,n){var r;const o=Array.from(d_(r=this.remoteUserMap).call(r)).find((t=>t._videoSSRC===e));if(o){n||this.store.subscribe(o.uid,\"video\",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,s=r.subscribe.find((e=>e.userId===o.uid&&\"video\"===e.type));rA.firstRemoteVideoDecode(this.store.sessionId,$y.FIRST_VIDEO_DECODE,eA.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:i,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,i){if(!this.recvConnection)return!1;const n=this.remoteUserMap.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const o=await this.recvConnection.getRemoteSSRC(r);return void 0!==o&&o!==i}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new iv(tv.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new iv(tv.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new iv(tv.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new iv(tv.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new iv(tv.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new iv(tv.NOT_SUPPORTED)}async preConnect(e){throw new iv(tv.NOT_SUPPORTED)}getEstablishParams(){throw new iv(tv.NOT_SUPPORTED)}async reSubscribe(e){throw new iv(tv.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new iv(tv.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:i}]=e;t===qb.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,$D.LOW_STREAM):i._updateRtpTransceiver(void 0)}))}},ib(fV.prototype,\"p2pConnect\",[oV],Object.getOwnPropertyDescriptor(fV.prototype,\"p2pConnect\"),fV.prototype),ib(fV.prototype,\"unpublish\",[sV],Object.getOwnPropertyDescriptor(fV.prototype,\"unpublish\"),fV.prototype),ib(fV.prototype,\"unpublishLowStream\",[aV],Object.getOwnPropertyDescriptor(fV.prototype,\"unpublishLowStream\"),fV.prototype),ib(fV.prototype,\"subscribe\",[cV],Object.getOwnPropertyDescriptor(fV.prototype,\"subscribe\"),fV.prototype),ib(fV.prototype,\"mockSubscribe\",[dV],Object.getOwnPropertyDescriptor(fV.prototype,\"mockSubscribe\"),fV.prototype),ib(fV.prototype,\"unsubscribe\",[lV],Object.getOwnPropertyDescriptor(fV.prototype,\"unsubscribe\"),fV.prototype),ib(fV.prototype,\"muteRemote\",[uV],Object.getOwnPropertyDescriptor(fV.prototype,\"muteRemote\"),fV.prototype),ib(fV.prototype,\"unmuteRemote\",[hV],Object.getOwnPropertyDescriptor(fV.prototype,\"unmuteRemote\"),fV.prototype),ib(fV.prototype,\"hasRemoteMediaWithLock\",[pV],Object.getOwnPropertyDescriptor(fV.prototype,\"hasRemoteMediaWithLock\"),fV.prototype),ib(fV.prototype,\"disconnectForReconnect\",[_V],Object.getOwnPropertyDescriptor(fV.prototype,\"disconnectForReconnect\"),fV.prototype),ib(fV.prototype,\"remoteMediaSsrcChanged\",[EV],Object.getOwnPropertyDescriptor(fV.prototype,\"remoteMediaSsrcChanged\"),fV.prototype),fV);function gV(e){return function(t,i,n){const r=t[i];if(\"function\"!=typeof r)throw new Error(\"Cannot use mutex on object property.\");return n.value=async function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];switch(e){case tV.SEND_ONLY:{const e=await this.sendMutex.lock(\"From P2PChannel2.\".concat(i));try{return await r.apply(this,n)}finally{e()}}case tV.RECEIVE_ONLY:{const e=await this.recvMutex.lock(\"From P2PChannel2.\".concat(i));try{return await r.apply(this,n)}finally{e()}}default:{const e=await this.sendMutex.lock(\"From P2PChannel2.\".concat(i)),t=await this.recvMutex.lock(\"From P2PChannel2.\".concat(i));try{return await r.apply(this,n)}finally{e(),t()}}}},n}}function RV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function CV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?RV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):RV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class IV{constructor(e){ng(this,\"store\",void 0),ng(this,\"onStatsException\",void 0),ng(this,\"onUploadPublishDuration\",void 0),ng(this,\"onStatsChanged\",void 0),ng(this,\"localStats\",new Map),ng(this,\"remoteStats\",new Map),ng(this,\"updateStatsInterval\",void 0),ng(this,\"trafficStats\",void 0),ng(this,\"trafficStatsPeerList\",[]),ng(this,\"uplinkStats\",void 0),ng(this,\"exceptionMonitor\",void 0),ng(this,\"p2pChannel\",void 0),ng(this,\"scalabilityMode\",nb.L1T1),ng(this,\"updateStats\",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.exceptionMonitor=new xU,this.exceptionMonitor.on(\"exception\",((e,t,i)=>{this.onStatsException&&this.onStatsException(e,t,i)}))}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(qb.LocalAudioTrack)||CV({},aP)}getLocalVideoTrackStats(){return this.localStats.get(qb.LocalVideoTrack)||CV({},cP)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const i=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return i&&(t.publishDuration=i.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.audioStats;r&&(i[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{audioStats:r}]=e;r&&(i[n]=t(n,r))}));return i}getRemoteNetworkQualityStats(e){const t={};if(e){var i;const n=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.networkStats;n&&(t[e]=n)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[i,{networkStats:n}]=e;n&&(t[i]=n)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const i=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return i&&(t.publishDuration=i.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.videoStats;r&&(i[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{videoStats:r}]=e;r&&(i[n]=t(n,r))}));return i}getRTCStats(){let e=0,t=0,i=0,n=0;const r=this.localStats.get(qb.LocalAudioTrack);r&&(e+=r.sendBytes,t+=r.sendBitrate);const o=this.localStats.get(qb.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(qb.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:r}=e;t&&(i+=t.receiveBytes,n+=t.receiveBitrate),r&&(i+=r.receiveBytes,n+=r.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:i,RecvBitrate:n,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd));e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const i=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),n=null!=i&&i.videoSSRC?FU.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,r=null!=i&&i.audioSSRC?FU.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,n>r?n:r),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Jy.debug(\"[\".concat(this.store.clientId,\"]: Period fir changes to \").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,i){if(!e)return!1;const n=!!i&&t.framesDecodeFreezeTime>i.framesDecodeFreezeTime,r=!i||t.framesDecodeCount>i.framesDecodeCount;return n||!r}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&(e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3)}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[i,n]=t;switch(i){case qb.LocalVideoTrack:case qb.LocalVideoLowTrack:{const t=n,o=CV({},cP),s=e.getStats(),a=e.getLocalMedia(i);if(s){const i=s.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(i){const n=e.getLocalVideoSize(),r=e.getEncoderConfig(qb.LocalVideoTrack);\"H264\"!==i.codec&&\"H265\"!==i.codec&&\"VP8\"!==i.codec&&\"VP9\"!==i.codec&&\"AV1X\"!==i.codec&&\"AV1\"!==i.codec||(o.codecType=i.codec),o.sendBytes=i.bytes,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0,i.inputFrame?(o.captureFrameRate=i.inputFrame.frameRate,o.captureResolutionHeight=i.inputFrame.height,o.captureResolutionWidth=i.inputFrame.width):n&&(o.captureResolutionWidth=n.width,o.captureResolutionHeight=n.height),i.sentFrame?(o.sendFrameRate=i.sentFrame.frameRate,o.sendResolutionHeight=i.sentFrame.height,o.sendResolutionWidth=i.sentFrame.width):n&&(o.sendResolutionWidth=n.width,o.sendResolutionHeight=n.height),i.avgEncodeMs&&(o.encodeDelay=i.avgEncodeMs),r&&r.bitrateMax&&(o.targetSendBitrate=1e3*r.bitrateMax),o.sendPackets=i.packets,o.sendPacketsLost=i.packetsLost,o.sendJitterMs=i.jitterMs,o.sendRttMs=i.rttMs,o.totalDuration=t?t.totalDuration+1:1,o.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(i)&&(o.totalFreezeTime+=1),i.scalabilityMode&&this.scalabilityMode!==i.scalabilityMode&&(Jy.debug(\"[\".concat(this.store.clientId,\"]: The scalabilityMode of the video sending stream is \").concat(i.scalabilityMode)),this.scalabilityMode=i.scalabilityMode)}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var r;if(this.localStats.set(i,o),(null==t?void 0:t.sendResolutionWidth)!==o.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==o.sendResolutionHeight)null===(r=this.onStatsChanged)||void 0===r||r.call(this,\"resolution\",{width:o.sendResolutionWidth,height:o.sendResolutionHeight});o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case qb.LocalAudioTrack:{const t=n,r=CV({},aP),o=e.getStats(),s=e.getLocalMedia(i);if(o){const i=o.audioSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(i){if(\"opus\"!==i.codec&&\"aac\"!==i.codec&&\"PCMU\"!==i.codec&&\"PCMA\"!==i.codec&&\"G722\"!==i.codec||(r.codecType=i.codec),i.inputLevel)r.sendVolumeLevel=Math.round(32767*i.inputLevel);else{const t=e.getLocalAudioVolume();t&&(r.sendVolumeLevel=Math.round(32767*t))}r.sendBytes=i.bytes,r.sendPackets=i.packets,r.sendPacketsLost=i.packetsLost,r.sendJitterMs=i.jitterMs,r.sendRttMs=i.rttMs,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0}}this.trafficStats&&(r.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(qb.LocalAudioTrack,r),r&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,r);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var i,n;let[r,{videoStats:o,audioStats:s,videoPcStats:a}]=t;const c=s,d=o,l=a,u=CV({},dP),h=CV({},uP),p=CV({},lP),{audioTrack:_,videoTrack:E,audioSSRC:f,videoSSRC:m}=e.getRemoteMedia(r);let T;T=e instanceof SV?e.getStats(!0):e.getStats();const S=null===(i=T)||void 0===i?void 0:i.audioRecv.find((e=>e.ssrc===f)),g=null===(n=T)||void 0===n?void 0:n.videoRecv.find((e=>e.ssrc===m)),R=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===r));if(S&&(\"opus\"!==S.codec&&\"aac\"!==S.codec&&\"PCMU\"!==S.codec&&\"PCMA\"!==S.codec&&\"G722\"!==S.codec||(u.codecType=S.codec),S.outputLevel?u.receiveLevel=Math.round(32767*S.outputLevel):_&&(u.receiveLevel=Math.round(32767*_.getVolumeLevel())),u.receiveBytes=S.bytes,u.receivePackets=S.packets,u.receivePacketsLost=S.packetsLost,u.receivePacketsDiscarded=S.packetsDiscarded,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=S.jitterBufferMs,u.totalDuration>10&&IV.isRemoteAudioFreeze(_)&&(u.totalFreezeTime+=1)),g){\"H264\"!==g.codec&&\"H265\"!==g.codec&&\"VP8\"!==g.codec&&\"VP9\"!==g.codec&&\"AV1X\"!==g.codec&&\"AV1\"!==g.codec||(h.codecType=g.codec),h.receiveBytes=g.bytes,h.receiveBitrate=d?8*Math.max(0,h.receiveBytes-d.receiveBytes):0,h.decodeFrameRate=g.decodeFrameRate<0?0:g.decodeFrameRate,h.renderFrameRate=g.decodeFrameRate<0?0:g.decodeFrameRate,g.outputFrame&&(h.renderFrameRate=g.outputFrame.frameRate),g.receivedFrame?(h.receiveFrameRate=g.receivedFrame.frameRate,h.receiveResolutionHeight=g.receivedFrame.height,h.receiveResolutionWidth=g.receivedFrame.width):E&&(h.receiveResolutionHeight=E._videoHeight||0,h.receiveResolutionWidth=E._videoWidth||0),void 0!==g.framesRateFirefox&&(h.receiveFrameRate=Math.round(g.framesRateFirefox)),h.receivePackets=g.packets,h.receivePacketsLost=g.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=d?d.totalDuration+1:1,h.totalFreezeTime=d?d.totalFreezeTime:0,h.receiveDelay=g.jitterBufferMs||0;const t=!!m&&e.getRemoteVideoIsReady(m);E&&t&&IV.isRemoteVideoFreeze(E,g,l)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}R&&(u.end2EndDelay=R.B_ad,h.end2EndDelay=R.B_vd,u.transportDelay=R.B_ed,h.transportDelay=R.B_ed,u.currentPacketLossRate=R.B_ealr4/100,h.currentPacketLossRate=R.B_evlr4/100,p.uplinkNetworkQuality=R.B_punq?R.B_punq:0,p.downlinkNetworkQuality=R.B_pdnq?R.B_pdnq:0),this.remoteStats.set(r,{audioStats:u,videoStats:h,videoPcStats:g,networkStats:p}),_&&this.exceptionMonitor.setRemoteAudioStats(_,u),E&&this.exceptionMonitor.setRemoteVideoStats(E,h)}))}}class vV{constructor(){ng(this,\"destChannelMediaInfos\",new Map),ng(this,\"srcChannelMediaInfo\",void 0)}setSrcChannelInfo(e){wb(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){wb(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){Tb(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function yV(e){if(!(e instanceof vV)){return new mb(tv.INVALID_PARAMS,\"Config should be instance of [ChannelMediaRelayConfiguration]\").throw()}const t=e.getSrcChannelMediaInfo(),i=e.getDestChannelMediaInfo();if(!t){return new mb(tv.INVALID_PARAMS,\"srcChannelMediaInfo should not be empty\").throw()}if(0===i.size){return new mb(tv.INVALID_PARAMS,\"destChannelMediaInfo should not be empty\").throw()}}function AV(e){var t={},i=!1;function n(t,n){return i=!0,{done:!1,value:new BU(n=new YU((function(i){i(e[t](n))})),1)}}return t[void 0!==ZS&&$S||\"@@iterator\"]=function(){return this},t.next=function(e){return i?(i=!1,e):n(\"next\",e)},\"function\"==typeof e.throw&&(t.throw=function(e){if(i)throw i=!1,e;return n(\"throw\",e)}),\"function\"==typeof e.return&&(t.return=function(e){return i?(i=!1,e):n(\"return\",e)}),t}var bV=i(qU);function wV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function OV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?wV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var NV;function DV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function PV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?DV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let LV=(NV=class e extends Wb{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")).filter((e=>{var t;return Dn(t=Object.keys(Ly)).call(t,e)})))]}constructor(t,i){super(t,i),ng(this,\"store\",void 0),ng(this,\"peerConnection\",void 0),ng(this,\"remoteSDP\",void 0),ng(this,\"initialOffer\",void 0),ng(this,\"statsFilter\",void 0),ng(this,\"useRTX\",!1),ng(this,\"localCapabilities\",void 0),ng(this,\"localCandidateCount\",0),ng(this,\"allCandidatesReceived\",!1),ng(this,\"establishPromise\",void 0),ng(this,\"mutex\",new ly(\"P2PConnection-mutex\")),this.store=i,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=Ox(this.peerConnection,Oy(\"STATS_UPDATE_INTERVAL\"),void 0,PI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");const t=yM(e.sdp),i=vM(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:Oy(\"FILTER_VIDEO_FEC\"),filterAudioFec:Oy(\"FILTER_AUDIO_FEC\"),filterAudioCodec:[\"opus\"]});return this.localCapabilities=i,this.initialOffer=e,PV(PV({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:i},offerSDP:e.sdp})}catch(e){throw new iv(tv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async updateRemoteConnect(){}async connect(e){try{if(!this.initialOffer)throw new Error(\"Cannot establish P2PConnection without initial offer.\");this.remoteSDP=new class{constructor(e){ng(this,\"sessionDesc\",void 0),ng(this,\"localCapabilities\",void 0),ng(this,\"rtpCapabilities\",void 0),ng(this,\"candidates\",void 0),ng(this,\"iceParameters\",void 0),ng(this,\"dtlsParameters\",void 0),ng(this,\"setup\",void 0),ng(this,\"currentMidIndex\",void 0),ng(this,\"cname\",void 0),e=Bv(e);const{iceParameters:t,dtlsParameters:i,candidates:n,rtpCapabilities:r,setup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,d=gM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE audio video\\na=msid-semantic: WMS\\na=ice-lite\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:audio\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:video\\n\");this.rtpCapabilities=r,this.candidates=n,this.iceParameters=t,this.dtlsParameters=i,this.setup=o,this.localCapabilities=s,this.cname=c;for(let e=0;e<d.mediaDescriptions.length;e++){const s=d.mediaDescriptions[e];if(s.attributes.iceUfrag=t.iceUfrag,s.attributes.icePwd=t.icePwd,s.attributes.fingerprints=i.fingerprints,s.attributes.candidates=n,s.attributes.setup=o,\"video\"===s.media.mediaType){s.media.fmts=r.videoCodecs.map((e=>e.payloadType.toString(10)));let e=r.videoCodecs.filter((e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:Dn(i=t.encodingName.toLowerCase()).call(i,a)}));0===e.length&&(e=r.videoCodecs),s.attributes.payloads=e,s.attributes.extmaps=r.videoExtensions}\"audio\"===s.media.mediaType&&(s.media.fmts=r.audioCodecs.map((e=>e.payloadType.toString(10))),s.attributes.payloads=r.audioCodecs,s.attributes.extmaps=r.audioExtensions),d.mediaDescriptions[e]=this.mungMediaDesc(s)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return gM.print(this.sessionDesc)}send(e,t,i){const{ssrcs:n,ssrcGroups:r}=OM(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===Hb.VIDEO?\"video\"===t.media.mediaType:\"audio\"===t.media.mediaType)),s=n[0].attributes.label,a=n[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(n),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(r),{id:s,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:i}=e;return this.send(t,i,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const i=[],n=[],r=[];t.attributes.ssrcs.forEach((t=>{Dn(e).call(e,t.attributes.label||\"\")?r.push(t):i.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Dn(t=r.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||n.push(e)})),t.attributes.ssrcs=i,t.attributes.ssrcGroups=n}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.mute.\"));t.attributes.direction=\"inactive\"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.unmute.\"));t.attributes.direction=\"sendonly\"}receive(e,t,i){e.forEach(((e,t)=>{const i=e._mediaStreamTrack,n=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===i.kind)),r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],e);this.sessionDesc.mediaDescriptions[n]=r}))}stopReceiving(e){}updateCandidates(e){e===Kb.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>\"tcp\"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(OV(OV({},e),{},{foundation:\"tcpcandidate\",priority:Number(e.priority)-1+\"\",transport:\"tcp\",port:Number(e.port)+90+\"\"}))})):this.candidates=this.candidates.filter((e=>\"tcp\"!==e.transport));for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}restartICE(e){e=Bv(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}mungRecvMediaDsec(e,t){const i=Bv(e);return NM(i,t),PM(i,t),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,i){const n=this.sessionDesc.mediaDescriptions.find((t=>e===Hb.VIDEO?\"video\"===t.attributes.mid:\"audio\"===t.attributes.mid));if(n){const e=n.attributes.ssrcs.find((e=>e.attributes.label===t));var r;e&&(e.attributes.label=i,null===(r=e.attributes.msid)||void 0===r||r.replace(t,i))}}mungMediaDesc(e){const t=Bv(e);return DM(t),function(e){const t=e.attributes.extmaps.find((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>\"transport-cc\"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const i of t.attributes.ssrcs)if(i.attributes.label===e)return[i]}}(PV(PV({},e),{},{rtpCapabilities:e.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const t=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:t})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.connect failed; \".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new iv(tv.NOT_SUPPORTED,\"Planb mode does not support createDataChannels.\")}getPreMedia(e){}send(e,t){var i=this;return XU((function*(){const n=yield jU(i.mutex.lock());try{if(!i.remoteSDP)throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");const r=e.map((e=>i.peerConnection.addTrack(e._mediaStreamTrack))),o=yield jU(i.peerConnection.createOffer()),s=gM.parse(o.sdp),a=e.map((e=>{const t=e._mediaStreamTrack,n=s.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!n)throw new Error(\"Cannot extract ssrc from mediaDescription.\");return function(e,t,i){const n=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),r=e.attributes.ssrcGroups;if(0===n.length)throw new Error(\"Cannot extract ssrc from plan-b SDP.\");if(r&&n.length>1){const e=r.find((e=>-1!==e.ssrcIds.indexOf(n[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:i?e.ssrcIds[1]:void 0}]:[{ssrcId:n[0].ssrcId}]}return[{ssrcId:n[0].ssrcId}]}(n,t.id,i.useRTX)}));let c;try{c=yield a}catch(e){throw r.forEach((e=>{NI()&&e.replaceTrack(null),i.peerConnection.removeTrack(e)})),e}const d=i.mungSendOfferSDP(o.sdp,e);i.remoteSDP.receive(e,t,c);const l=i.remoteSDP.toString();return yield jU(i.peerConnection.setLocalDescription({type:\"offer\",sdp:d})),yield jU(i.applySendEncodings(r,e)),yield jU(i.peerConnection.setRemoteDescription({type:\"answer\",sdp:l})),e.map(((e,t)=>{const i=e._mediaStreamTrack.id;return{localSSRC:a[t],id:i}}))}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.send failed; \".concat(e.toString()))}finally{n()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");const t=this.peerConnection.getSenders().filter((t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||\"\")}));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");t.map((e=>{NI()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const i=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(i),this.remoteSDP.stopReceiving(e);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:n})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.stopSending failed; \".concat(e.toString()))}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{id:i,mslabel:r}=this.remoteSDP.send(e,t,n),o=new Gh(((t,n)=>{const o=setTimeout((()=>{n(new Error(\"Cannot receive track, id: \".concat(i)))}),1e4),s=n=>{const a=vI();if((\"Safari\"===a.name&&11===Number(a.version)||LI())&&n.track.id!==i&&n.streams[0].id===r){var c;const r=n.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,i,n.track.id),this.peerConnection.removeEventListener(\"track\",s),clearTimeout(o),void t(r)}if(n.track.id===i)return this.peerConnection.removeEventListener(\"track\",s),clearTimeout(o),void t(n.track)};this.peerConnection.addEventListener(\"track\",s)})),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:s});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a);return{track:await o,id:i}}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const i=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(i)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");const t=this.peerConnection.getSenders().filter((t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||\"\")}));if(t.length!==e.length)throw new Error(\"sender' length doesn't match mids' length.\");t.map((e=>{if(NI()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteLocal failed; \".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");const t=this.peerConnection.getSenders().filter((t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||\"\")}));if(t.length!==e.length)throw new Error(\"Senders' length doesn't match mids' length.\");t.map((async e=>{if(NI()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const i=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(i);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:n})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteLocal failed; \".concat(e.toString()))}}restartICE(e){var t=this;return XU((function*(){const i=yield jU(t.mutex.lock(\"From P2PConnection.restartICE\"));try{if(!t.remoteSDP)throw new Error(\"Cannot restartICE before remoteSDP created.\");if(LD().supportPCSetConfiguration){const i=t.peerConnection.getConfiguration(),n=e===Kb.RELAY?\"relay\":\"all\";i.iceTransportPolicy!==n&&(Jy.debug(\"[\".concat(t.store.clientId,\"] restartICE change iceTransportPolicy from [\").concat(i.iceTransportPolicy,\"] to [\").concat(n,\"]\")),i.iceTransportPolicy=n,t.peerConnection.setConfiguration(i))}else if(e===Kb.RELAY)return;e!==Kb.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield jU(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");const r=yM(n.sdp),{remoteIceParameters:o}=yield r.iceParameters;t.remoteSDP.restartICE(o);const s=t.remoteSDP.toString();yield jU(t.peerConnection.setLocalDescription(n)),yield jU(t.peerConnection.setRemoteDescription({type:\"answer\",sdp:s}))}catch(e){Jy.warning(\"[\".concat(t.store.clientId,\"] restart ICE failed, abort operation\"),e)}finally{i()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,\"closed\"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");const e=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const n=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:\"offer\",sdp:i}),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:n})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getSenders().filter((t=>{var i;return(null===(i=t.track)||void 0===i?void 0:i.id)===e}));1===i.length&&await this.applySendEncodings(i,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getSenders().find((e=>{var i;return(null===(i=e.track)||void 0===i?void 0:i.id)===t}));i&&await i.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new iv(tv.NOT_SUPPORTED,\"Planb mode does not support createDataChannels.\")}stopDataChannels(e){throw new iv(tv.NOT_SUPPORTED,\"Planb mode does not support stopDataChannels.\")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Jy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] local candidate count\"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Jy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] onicecandidate timeout, local candidate count\"),this.localCandidateCount))}),Oy(\"CANDIDATE_TIMEOUT\"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[],sdpSemantics:\"plan-b\"};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&\"off\"!==t.turnServer.mode&&(yv(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),Oy(\"USE_TURN_SERVER_OF_GATEWAY\")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy=\"relay\")})))),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turns:\".concat(e.turnServerURL,\":\").concat(e.tcpport,\"?transport=tcp\")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.udpport,\"?transport=udp\")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.tcpport,\"?transport=tcp\")}))})),t}async updateRtpSenderEncodings(e,t){var i;if(!t){t=this.peerConnection.getSenders().find((t=>{var i;return(null===(i=t.track)||void 0===i?void 0:i.id)===e._mediaStreamTrack.id}))}if(!t)return Jy.warn(\"[\".concat(e.getTrackId(),\"] no rtpSender found}\"));if(!LD().supportSetRtpSenderParameters)return Jy.warn(\"Browser not support set rtp-sender parameters\");const n={},r={};if(e instanceof Gk)switch(e._optimizationMode){case\"motion\":n.degradationPreference=\"maintain-framerate\";break;case\"detail\":n.degradationPreference=\"maintain-resolution\";break;default:n.degradationPreference=\"balanced\"}if(Oy(\"DSCP_TYPE\")&&JI()){var o;const e=Oy(\"DSCP_TYPE\");Dn(o=[\"very-low\",\"low\",\"medium\",\"high\"]).call(o,e)&&(r.networkPriority=e)}const s=t.getParameters(),a=null===(i=s.encodings)||void 0===i?void 0:i[0];a&&Object.assign(a,r),Object.assign(s,n),Jy.debug(\"[\".concat(e.getTrackId(),\"] updateRtpSenderEncodings: \").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!LD().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){const n=e[i],r=t[i];n&&r&&await this.updateRtpSenderEncodings(r,n)}}catch(e){Jy.debug(\"[\".concat(this.store.clientId,\"] Apply RTPSendEncodings failed.\"))}}mungSendOfferSDP(e,t){const i=gM.parse(e);return t.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=i.mediaDescriptions.find((e=>e.attributes.mid===n.kind));r&&NM(r,e)})),gM.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.batchReceive before remoteSDP created.\");const t=this.remoteSDP.batchSend(e).map(((t,i)=>{let{id:n,mslabel:r}=t;const{kind:o}=e[i];return new Gh(((e,t)=>{const i=setTimeout((()=>{t(new Error(\"Cannot receive track, id: \".concat(n)))}),1e4),s=t=>{const a=vI();if(\"Safari\"===a.name&&11===Number(a.version)&&t.track.id!==n&&t.streams[0].id===r){var c;const r=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,n,t.track.id),this.peerConnection.removeEventListener(\"track\",s),clearTimeout(i),void e({track:r,id:n})}if(t.track.id===n)return this.peerConnection.removeEventListener(\"track\",s),clearTimeout(i),void e({track:t.track,id:n})};this.peerConnection.addEventListener(\"track\",s)}))})),i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:i});const n=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(n),await Gh.all(t)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(LD().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}},ib(NV.prototype,\"connect\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"connect\"),NV.prototype),ib(NV.prototype,\"stopSending\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"stopSending\"),NV.prototype),ib(NV.prototype,\"receive\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"receive\"),NV.prototype),ib(NV.prototype,\"stopReceiving\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"stopReceiving\"),NV.prototype),ib(NV.prototype,\"muteRemote\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"muteRemote\"),NV.prototype),ib(NV.prototype,\"unmuteRemote\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"unmuteRemote\"),NV.prototype),ib(NV.prototype,\"muteLocal\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"muteLocal\"),NV.prototype),ib(NV.prototype,\"unmuteLocal\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"unmuteLocal\"),NV.prototype),ib(NV.prototype,\"close\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"close\"),NV.prototype),ib(NV.prototype,\"updateEncoderConfig\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"updateEncoderConfig\"),NV.prototype),ib(NV.prototype,\"updateSendParameters\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"updateSendParameters\"),NV.prototype),ib(NV.prototype,\"replaceTrack\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"replaceTrack\"),NV.prototype),ib(NV.prototype,\"getRemoteSSRC\",[kV],Object.getOwnPropertyDescriptor(NV.prototype,\"getRemoteSSRC\"),NV.prototype),NV);function kV(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"Locking from P2PConnection.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}function MV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function UV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?MV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const xV=\"9\",VV=4e4;class FV{get localCapabilities(){return Bv(this._localCapabilities)}get rtpCapabilities(){return Bv(this._rtpCapabilities)}get candidates(){return Bv(this._candidates)}get iceParameters(){return Bv(this._iceParameters)}get dtlsParameters(){return Bv(this._dtlsParameters)}constructor(e){ng(this,\"sessionDesc\",void 0),ng(this,\"_localCapabilities\",void 0),ng(this,\"_rtpCapabilities\",void 0),ng(this,\"_candidates\",void 0),ng(this,\"_iceParameters\",void 0),ng(this,\"_dtlsParameters\",void 0),ng(this,\"setup\",void 0),ng(this,\"currentMidIndex\",void 0),ng(this,\"cname\",void 0),ng(this,\"firefoxSsrcMidMap\",new Map),e=Bv(e);const{iceParameters:t,dtlsParameters:i,candidates:n,rtpCapabilities:r,setup:o,localCapabilities:s,cname:a}=e;this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=s,this.setup=o,this.cname=a,this.sessionDesc=this.updateRemoteRTPCapabilities(r),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){const t=this.candidates,i=this.dtlsParameters,n=this.iceParameters,r=this.rtpCapabilities.send;let o=this.sessionDesc.mediaDescriptions.length-1;for(let s=1;s<e;s++){const e=2*s+2e4,a=2*s+VV,{ssrcs:c,ssrcGroups:d}=OM([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:u}=OM([{ssrcId:a,rtx:Oy(\"USE_SUB_RTX\")?a+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:\"video\",port:xV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:r.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.videoExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:r.videoCodecs,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:\"sendonly\",rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:\"audio\",port:xV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:r.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.audioExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:r.audioCodecs,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:\"sendonly\",rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return gM.print(this.sessionDesc)}send(e,t,i,n){const{ssrcs:r,ssrcGroups:o}=OM(t,this.cname,Oy(\"SYNC_GROUP\")?i:void 0),s=this.findPreloadMediaDesc(r);if(s){if(PI()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,s.attributes.mid),n&&(n.twcc||n.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,n),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,r);let i;return-1===t||1===t&&(NI()||function(){const e=vI();return!(e.name!==gI.CHROME||!e.osVersion)&&Number(e.version)<=90}())||0===t&&Oy(\"USE_SUB_RTX\")||jI()?(i=this.createOrRecycleSendMedia(e,r,o,\"sendonly\",n),this.updateBundleMids()):(i=Bv(this.sessionDesc.mediaDescriptions[t]),i.attributes.direction=\"sendonly\",i.attributes.ssrcs=r,i.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(i,n)),PI()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,i.attributes.mid),{mid:i.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:i,mslabel:n}=e;return this.send(t,i,n)})),i=[];let n=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:r}=e;r&&(n=!0),i.push(t)})),{mids:i,needExchangeSDP:n}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");t.forEach((e=>{\"0\"===e.attributes.mid||PI()||jI()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction=\"inactive\",e.media.port=\"0\")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.mute.\"));t.attributes.direction=\"inactive\"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.unmute.\"));t.attributes.direction=\"sendonly\"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"inactive\"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"recvonly\"}))}receive(e,t,i,n){e.forEach(((e,r)=>{this.createOrRecycleRecvMedia(e,[],\"recvonly\",t,i,n[r])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");t.forEach((e=>{e.media.port=\"0\",e.attributes.direction=\"inactive\"})),this.updateBundleMids()}updateRemoteRTPCapabilities(e){const t=this.sessionDesc||gM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=ice-lite\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\");this._rtpCapabilities=e;const i=this.rtpCapabilities.send,n=this.localCapabilities.send;for(const e of t.mediaDescriptions){if(e.attributes.iceUfrag=this._iceParameters.iceUfrag,e.attributes.icePwd=this._iceParameters.icePwd,e.attributes.fingerprints=this._dtlsParameters.fingerprints,e.attributes.candidates=this._candidates,e.attributes.setup=this.setup,\"application\"===e.media.mediaType&&(e.attributes.sctpPort=\"5000\"),\"video\"===e.media.mediaType)if(0===i.videoCodecs.length){const t=n.videoCodecs.filter((e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:Dn(i=t.encodingName.toLowerCase()).call(i,\"vp8\")}))||[n.videoCodecs[0]];e.media.fmts=t.map((e=>e.payloadType.toString(10))),e.attributes.payloads=t,e.attributes.extmaps=[]}else if(e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.videoCodecs,e.attributes.extmaps=i.videoExtensions,Oy(\"PRELOAD_MEDIA_COUNT\")>0){const{ssrcs:t,ssrcGroups:i}=OM([{ssrcId:VV,rtx:Oy(\"USE_SUB_RTX\")?40001:void 0}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}if(\"audio\"===e.media.mediaType)if(0===i.audioCodecs.length){const t=n.audioCodecs.filter((e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:Dn(i=t.encodingName.toLowerCase()).call(i,\"opus\")}))||[n.audioCodecs[0]];e.media.fmts=t.map((e=>e.payloadType.toString(10))),e.attributes.payloads=t,e.attributes.extmaps=[]}else if(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions,BM(e),Oy(\"PRELOAD_MEDIA_COUNT\")>0){const{ssrcs:t,ssrcGroups:i}=OM([{ssrcId:2e4}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){const t=this._candidates.filter((e=>\"udp\"===e.transport));if(e===Kb.TCP){if(0===t.length)return;if(Oy(\"TCP_CANDIDATE_ONLY\")){const e=this._candidates.filter((e=>\"tcp\"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(UV(UV({},t),{},{foundation:\"tcpcandidate\",priority:Number(t.priority)-1+\"\",transport:\"tcp\",port:Number(t.port)+90+\"\"}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(UV(UV({},t),{},{foundation:\"tcpcandidate\",priority:Number(t.priority)-1+\"\",transport:\"tcp\",port:Number(t.port)+90+\"\"}))})),this._candidates=[...t,...e]}}else if(e===Kb.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>\"tcp\"===e.transport));e.forEach((e=>{t.push(UV(UV({},e),{},{foundation:\"udpcandidate\",priority:Number(e.priority)+1+\"\",transport:\"udp\",port:Number(e.port)-90+\"\"}))})),this._candidates=[...t,...e]}}else if(0===t.length){this._candidates.filter((e=>\"tcp\"===e.transport)).forEach((e=>{t.push(UV(UV({},e),{},{foundation:\"udpcandidate\",priority:Number(e.priority)+1+\"\",transport:\"udp\",port:Number(e.port)-90+\"\"}))})),this._candidates=t}else this._candidates=this._candidates.filter((e=>\"tcp\"!==e.transport));for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}restartICE(e){e=Bv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((i=>{const n=i.media.mediaType===e&&\"0\"!==i.media.port&&(\"sendonly\"===i.attributes.direction||\"sendrecv\"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(PI()){if(n){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||\"0\"!==i.attributes.mid&&\"1\"!==i.attributes.mid)||!(!e||e!==i.attributes.mid)}return!1}return n}))}createOrRecycleDataChannel(){for(const e of this.sessionDesc.mediaDescriptions)if(\"application\"===e.media.mediaType)return{mediaDesc:e,needExchangeSDP:!1};this.currentMidIndex+=1;const e=\"\".concat(this.currentMidIndex),t={media:{mediaType:\"application\",port:xV,protos:[\"UDP\",\"DTLS\",\"SCTP\"],fmts:[\"webrtc-datachannel\"]},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,mid:\"\".concat(e),sctpPort:\"5000\"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,i,n,r,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=jM(s,a,this.localCapabilities.send,s===Hb.VIDEO?n:r),d=s===Hb.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const l=\"\".concat(this.currentMidIndex);let u={media:{mediaType:s,port:xV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:d,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(l)}};u=this.mungRecvMediaDsec(u,e,o);const h=this.findFirstClosedMedia(s);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,i){const n=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")).filter((e=>{var t;return Dn(t=Object.keys(Ly)).call(t,e)})))],r=new Set(t);if(n.every((e=>r.has(e))))return Jy.debug(\"codecs has not changed, no need to updateRemoteCodec, codecs: \".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var i;return Dn(i=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(i,t)}))));if(0===o.length)return Jy.debug(\"updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: \".concat(n,\" codecs: \").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")))];let a;if(Jy.debug(\"updateRemoteCodec, from \".concat(n,\" to \").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>\"video\"===e.media.mediaType&&\"recvonly\"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Dn(e).call(e,t.attributes.mid)&&\"recvonly\"===t.attributes.direction)),a.length!==e.length)return Jy.debug(\"updateRemoteCodec failed, because cannot find mids, mids: \".concat(e,\", codecs: \").concat(t)),!1;if(Oy(\"USE_PUB_RTX\")||Oy(\"USE_SUB_RTX\")){const e=GM(o,this.rtpCapabilities.recv.videoCodecs);o.push(...e)}this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,d=this.rtpCapabilities.recv,l=jM(Hb.VIDEO,d,c,i);return a.forEach((e=>{const t=l.map((e=>e.payloadType.toString(10)));Jy.debug(\"updateRemoteCodec mid: \".concat(e.attributes.mid,\", from \").concat(e.attributes.payloads,\" to \").concat(l)),e.attributes.payloads=l,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,i,n,r){const o=this.rtpCapabilities.send,s=e===Hb.VIDEO?o.videoCodecs:o.audioCodecs,a=e===Hb.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c=\"\".concat(this.currentMidIndex);let d={media:{mediaType:e,port:xV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(c)}};d=this.mungSendMediaDesc(d,r);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>\"0\"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,i){const n=Bv(e);return DM(n),NM(n,t),PM(n,t),LM(n),kM(n,i,this.localCapabilities.send),n}mungSendMediaDesc(e,t){const i=Bv(e);return kM(i,t,this.localCapabilities.recv),BM(i),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>PI()?\"0\"===t.media.port&&t.media.mediaType===e:\"0\"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var i;return(null===(i=t.attributes)||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function BV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function jV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?BV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let GV=function(e){return e.BANDWIDTH=\"bandwidth\",e.CPU=\"cpu\",e.NONE=\"none\",e.OTHER=\"other\",e}({});var WV=function(e){return e[e.DOWN=0]=\"DOWN\",e[e.UP=1]=\"UP\",e}(WV||{});const HV=new Map;function KV(e,t,i,n){let{scale:r}=e;if(0===r&&n===WV.UP||r>=t.length-1&&n===WV.DOWN)return e;let o=jV(jV({},e),{},{scale:n===WV.DOWN?++r:--r});switch(i){case\"maintain-framerate\":o=jV(jV({},o),t[r].motion);break;case\"maintain-resolution\":o=jV(jV({},o),t[r].detail);break;case\"balanced\":o=jV(jV({},o),t[r].balanced)}return o}function YV(e,t){if(t){const i={overUse:0,underUse:0,adaptationList:qV(t)};HV.set(e,i)}else HV.delete(e)}function qV(e){const t=jV({},e),{bitrateMax:i,frameRate:n,scaleResolutionDownBy:r,bitrateMin:o}=t,{MIN_FRAME_RATE:s,MAX_THRESHOLD_FRAMERATE:a,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:d,BITRATE_MAX_THRESHOLD:l,BWE_SCALE_UP_THRESHOLD:u,BWE_SCALE_DOWN_THRESHOLD:h,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:_,BALANCE_BITRATE_FACTOR:E,BALANCE_FRAMERATE_FACTOR:f,BALANCE_RESOLUTION_FACTOR:m,MOTION_RESOLUTION_FACTOR:T,MOTION_BITRATE_FACTOR:S,DETAIL_FRAMERATE_FACTOR:g,DETAIL_BITRATE_FACTOR:R}=yy,C=Math.min(t.frameRate,a),I=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(h,1)*i),bwe_up:i,fps_down:Math.round(Math.pow(p,1)*C),fps_up:n},balanced:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:i,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:i,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:i,bitrateMin:o}}];for(let e=1;e<=c;e++){const t={bwe_up:Math.round(Math.pow(u,e)*i),bwe_down:Math.round(Math.pow(h,e+1)*i),fps_up:Math.round(Math.pow(_,e)*C),fps_down:Math.round(Math.pow(p,e+1)*C)},a={scaleResolutionDownBy:r/Math.pow(m,e),frameRate:Math.max(Math.round(Math.pow(f,e)*n),s),bitrateMax:Math.max(Math.round(Math.pow(E,e)*i),l),bitrateMin:Math.max(Math.round(Math.pow(E,e)*o),d)},c={scaleResolutionDownBy:r/Math.pow(T,e),frameRate:n,bitrateMax:Math.max(Math.round(Math.pow(S,e)*i),l),bitrateMin:Math.max(Math.round(Math.pow(S,e)*o),d)},v={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(g,e)*n),s),bitrateMax:Math.max(Math.round(Math.pow(R,e)*i),l),bitrateMin:Math.max(Math.round(Math.pow(R,e)*o),d)};I.push({scale:e,threshold:t,balanced:a,motion:c,detail:v})}return I}function zV(e,t,i,n,r,o){const s=HV.get(e)||{overUse:0,underUse:0,adaptationList:qV(r)},{adaptationList:a}=s;HV.set(e,s);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:d}=yy,{scale:l}=n;let u,h;return\"number\"==typeof t&&t>0&&function(e,t,i,n){if(t>=i.length)return!1;let{threshold:{fps_down:r}}=i[t];return Oy(\"FORCE_AG_HIGH_FRAMERATE\")&&\"maintain-framerate\"===n&&(r=i[0].threshold.fps_down),e<r}(t,l,a,o)&&(s.overUse++,h=GV.CPU,s.overUse>c)||\"number\"==typeof i&&i>0&&function(e,t,i){if(t>=i.length)return!1;const{threshold:{bwe_down:n}}=i[t];return e<n}(i,l,a)&&(s.overUse++,h=GV.BANDWIDTH,s.overUse>c)?(s.overUse=0,s.underUse=0,u=KV(n,a,o,WV.DOWN),[u,h]):(\"number\"==typeof t&&t>0&&\"number\"==typeof i&&i>0&&function(e,t,i,n){if(0===t)return;let{threshold:{fps_up:r}}=i[t];return Oy(\"FORCE_AG_HIGH_FRAMERATE\")&&\"maintain-framerate\"===n&&(r=i[1].threshold.fps_up),e>r}(t,l,a,o)&&function(e,t,i){if(0===t)return;const{threshold:{bwe_up:n}}=i[t];return e>n}(i,l,a)&&(s.underUse++,s.underUse>d&&(s.overUse=0,s.underUse=0,u=KV(n,a,o,WV.UP),0===u.scale&&(h=GV.NONE))),[u,h])}function JV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function XV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?JV(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function QV(e){var t;return!!Oy(\"ENABLE_AG_ADAPTATION\")&&(!!(e instanceof Wk||Dn(t=e._hints).call(t,ZD.CUSTOM_TRACK))&&(!!Oy(\"FORCE_SUPPORT_AG_ADAPTATION\")||!!(function(e){const t=vI();if(t.os!==SI.IOS||!t.osVersion)return!1;const i=t.osVersion.split(\".\");return Number(i[0])>=e}(14)&&VI(17,4,!0)||xI(14)&&FI(17,4,!0))))}const ZV=new Map;function $V(e,t){const i=ZV.get(e);if(i){const{timer:t}=i;window.clearTimeout(t),ZV.delete(e)}t.qualityLimitationReason=GV.NONE,YV(e)}var eF;function tF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function iF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?tF(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let nF=(eF=class e extends Wb{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")).filter((e=>{var t;return Dn(t=Object.keys(Ly)).call(t,e)})))]}constructor(t,i){super(t,i),ng(this,\"store\",void 0),ng(this,\"peerConnection\",void 0),ng(this,\"id\",Zv(5,\"connection-\")),ng(this,\"remoteSDP\",void 0),ng(this,\"initialOffer\",void 0),ng(this,\"transportEventReceiver\",void 0),ng(this,\"statsFilter\",void 0),ng(this,\"extension\",{useXR:Oy(\"USE_XR\")}),ng(this,\"localCapabilities\",void 0),ng(this,\"remoteCodecs\",void 0),ng(this,\"localCandidateCount\",0),ng(this,\"allCandidatesReceived\",!1),ng(this,\"isPreallocation\",!1),ng(this,\"preSSRCMap\",new Map),ng(this,\"dataStreamChannelMap\",new Map),ng(this,\"establishPromise\",void 0),ng(this,\"recoveredDataChannelIds\",[]),ng(this,\"currentDataChannelId\",1),ng(this,\"mutex\",new ly(\"P2PConnection-mutex\")),ng(this,\"qualityLimitationReason\",GV.NONE),this.store=i,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=Ox(this.peerConnection,Oy(\"STATS_UPDATE_INTERVAL\"),void 0,PI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(e){const t=this.preSSRCMap.get(e);if(void 0!==t){const e=this.peerConnection.getTransceivers().find((e=>e.mid===t));if(e)return{transceiver:e,track:e.receiver.track,id:t}}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,!this.remoteSDP)return void Jy.debug(\"[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: \".concat(this.localCodecs,\", codecs: \").concat(t));if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||\"\",\"offer\",\"local\",\"muteLocal\");await this.peerConnection.setLocalDescription(e);const i=this.remoteSDP.toString();null==t||t(i),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:i})}else Jy.debug(\"[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.\")}async establish(){try{this.peerConnection.addTransceiver(\"video\",{direction:\"recvonly\"}),this.peerConnection.addTransceiver(\"audio\",{direction:\"recvonly\"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");const t=yM(e.sdp),i=await UM({filterRTX:!Oy(\"USE_PUB_RTX\")&&!Oy(\"USE_SUB_RTX\"),filterVideoFec:Oy(\"FILTER_VIDEO_FEC\"),filterAudioFec:Oy(\"FILTER_AUDIO_FEC\"),filterVideoCodec:Oy(\"FILTER_VIDEO_CODEC\")},this.extension);return this.localCapabilities=FM(i),this.initialOffer=e,iF(iF({},t),{},{rtpCapabilities:i,offerSDP:e.sdp})}catch(e){throw new iv(tv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error(\"Cannot establish P2PConnection without initial offer.\");this.remoteSDP=new FV(iF(iF({},e),{},{localCapabilities:this.localCapabilities})),e.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const t=this.remoteSDP.toString(),i=HM(this.initialOffer.sdp,this.extension),n=this.logSDPExchange(i||\"\",\"offer\",\"local\",\"connect\");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:\"offer\",sdp:i}),null==n||n(t),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:t});const r=this.peerConnection.getTransceivers()[0];if(null!=r&&r.receiver&&this.tryBindTransportEvents(r.receiver),Oy(\"PRELOAD_MEDIA_COUNT\")>0){this.remoteSDP.preloadRemoteMedia(Oy(\"PRELOAD_MEDIA_COUNT\"));const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}const{preSSRCs:o}=e;if(Array.isArray(o)&&o.length>0){const{mids:e}=this.remoteSDP.batchSend(o.map((e=>({kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(o[t].ssrcId,e)})),await WM(this.peerConnection,this.remoteSDP,this.extension),Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] pre-batchReceive exchange SDP.\"))}}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.connect failed; \".concat(e.toString()))}}async updateRemoteConnect(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateRemoteConnect before remote SDP created\");const{rtpCapabilities:t}=e;this.remoteSDP.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:i}=e;if(Array.isArray(i)&&i.length>0){const{mids:e}=this.remoteSDP.batchSend(i.map((e=>Object.assign({},{kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(i[t].ssrcId,e)}))}await WM(this.peerConnection,this.remoteSDP,this.extension),Jy.debug(\"[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.\")}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.updateRemoteConnect failed; \".concat(e.toString()))}}send(e,t,i){var n=this;return XU((function*(){const r=yield jU(n.mutex.lock(\"From P2PConnection.send\"));try{if(!n.remoteSDP)throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");const o=[];e.forEach((e=>{const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:\"sendonly\"});o.push(t),e._updateRtpTransceiver(t)})),PI()&&!0===Oy(\"SIMULCAST\")&&(yield jU(n.applySimulcastForFirefox(o,e)));const s=yield jU(n.peerConnection.createOffer()),a=n.remoteSDP.predictReceivingMids(e.length),c=n.mungSendOfferSDP(s.sdp,e,a),d=gM.parse(c),l=a.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"Cannot extract ssrc from mediaDescription.\");return AM(t,Oy(\"USE_PUB_RTX\"))}));let u;try{u=yield l}catch(r){u=[],n.remoteSDP.receive(e,t,i,u);const o=n.remoteSDP.toString();throw yield jU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:c})),yield jU(n.peerConnection.setRemoteDescription({type:\"answer\",sdp:o})),yield jU(n.stopSending(a,!0)),r}n.remoteSDP.receive(e,t,i,u);const h=n.remoteSDP.toString(),p=n.logSDPExchange(c,\"offer\",\"local\",\"send\");return yield jU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:c})),yield jU(n.applySimulcastEncodings(o,e)),yield jU(n.applySendEncodings(o,e)),null==p||p(h),yield jU(n.peerConnection.setRemoteDescription({type:\"answer\",sdp:h})),o.map(((e,t)=>{const i=a[t];return{localSSRC:l[t],id:i,transceiver:e}}))}catch(e){throw e instanceof iv?e:new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.send failed; \".concat(e.toString()))}finally{r()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.createDataChannels before remote SDP created\");let i=this.dataStreamChannelMap.get(e);if(i&&\"open\"===i.readyState)Jy.debug(\"[P2PConnection] Channels are already available and can be reused directly.\");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(\"number\"!=typeof t)throw new Error(\"create DataChannel error, because cannot get dc id\");i=this.peerConnection.createDataChannel(\"datastream-channel\",{id:t,negotiated:!0,ordered:!1,maxRetransmits:Oy(\"DATASTREAM_MAX_RETRANSMITS\")}),i.binaryType=\"arraybuffer\",this.dataStreamChannelMap.set(e,i)}t.forEach((e=>{e._updateOriginDataChannel(i)}));const{needExchangeSDP:n}=this.remoteSDP.sendDataChannel();if(n){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),Jy.debug(\"[P2PConnection] createDataChannels by exchanging SDP.\")}else Jy.debug(\"[P2PConnection] createDataChannels no need to exchange SDP.\");return}catch(e){throw e instanceof iv?e:new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.createDataChannels failed; \".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof iv?e:new iv(tv.DATACHANNEL_FAILED,\"P2PConnection.stopDataChannels failed; \".concat(e.toString()))}}async stopSending(e,t){const i=t?void 0:await this.mutex.lock(\"From P2PConnection.stopSending\");try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");t.map((e=>{var t;$V(this.id+e.mid,this),e.direction=\"inactive\",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||\"\",\"offer\",\"local\",\"stopSending\");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:o})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.stopSending failed; \".concat(e.toString()))}finally{i&&i()}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);o&&(await WM(this.peerConnection,this.remoteSDP,this.extension),Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" by exchanging SDP.\")));const s=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!s)throw new Error(\"Cannot get transceiver after setLocalDescription.\");return{track:s.receiver.track,id:r,transceiver:s}}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.batchReceive before remoteSDP created.\");const{mids:t,needExchangeSDP:i}=this.remoteSDP.batchSend(e);return i&&(await WM(this.peerConnection,this.remoteSDP,this.extension),Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] batchReceive by exchanging SDP.\"))),t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error(\"Cannot get transceiver after setLocalDescription.\");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");e.forEach((e=>{Array.from(this.preSSRCMap.entries()).some((t=>{let[i,n]=t;if(n===e)return this.preSSRCMap.delete(i),!0}))})),this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"stopReceiving\");await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteRemote mid=\".concat(e,\" before remote SDP created.\"));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"muteRemote\");await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteRemote failed; \".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteRemote mid=\".concat(e,\" before remote SDP created.\"));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"unmuteRemote\");await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteRemote failed; \".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((e=>{e.direction=\"inactive\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"muteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteLocal failed; \".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((async(e,t)=>{e.direction=\"sendonly\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"unmuteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteLocal failed; \".concat(e.toString()))}}restartICE(e){var t=this;return XU((function*(){const i=yield jU(t.mutex.lock(\"From P2PConnection.restartICE\"));try{if(!t.remoteSDP)throw new Error(\"Cannot restartICE before remoteSDP created.\");if(LD().supportPCSetConfiguration){const i=t.peerConnection.getConfiguration(),n=e===Kb.RELAY?\"relay\":\"all\";i.iceTransportPolicy!==n&&(Jy.debug(\"[\".concat(t.store.clientId,\"] restartICE change iceTransportPolicy from [\").concat(i.iceTransportPolicy,\"] to [\").concat(n,\"]\")),i.iceTransportPolicy=n,t.peerConnection.setConfiguration(i))}else if(e===Kb.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield jU(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");const r=yM(n.sdp),{remoteIceParameters:o}=yield r.iceParameters;t.remoteSDP.restartICE(o);const s=t.remoteSDP.toString(),a=t.logSDPExchange(n.sdp||\"\",\"offer\",\"local\",\"restartICE\");t.store.descriptionStart(),yield jU(t.peerConnection.setLocalDescription(n)),null==a||a(s),yield jU(t.peerConnection.setRemoteDescription({type:\"answer\",sdp:s}))}catch(e){Jy.warning(\"[\".concat(t.store.clientId,\"] restart ICE failed, abort operation\"),e)}finally{i()}}))()}close(){var e;this.peerConnection.getTransceivers().forEach((e=>{$V(this.id+e.mid,this)})),this.preSSRCMap.clear(),this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,\"closed\"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return iF(iF({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,\"offer\",\"local\",\"updateEncoderConfig\");await this.peerConnection.setLocalDescription({type:\"offer\",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new iv(tv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===i.length&&(this.isVP8Simulcast(t)?PI()||await this.applySimulcastEncodings(i,[t]):await this.applySendEncodings(i,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getTransceivers().find((e=>e.mid===t));i&&await i.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:i,remote:n}=t.getSelectedCandidatePair();return{local:iF(iF({},px),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:iF(iF({},px),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Jy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] local candidate count\"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Jy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] onicecandidate timeout, local candidate count\"),this.localCandidateCount))}),Oy(\"CANDIDATE_TIMEOUT\"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[]};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&\"off\"!==t.turnServer.mode&&(yv(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),Oy(\"USE_TURN_SERVER_OF_GATEWAY\")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),Oy(\"FORCE_TURN_TCP\")?i.iceTransportPolicy=\"relay\":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy=\"relay\")})))),Oy(\"ENABLE_ENCODED_TRANSFORM\")&&LD().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turns:\".concat(Nw(e.turnServerURL),\":\").concat(e.tcpport,\"?transport=tcp\")}):(e.udpport&&!Oy(\"FORCE_TURN_TCP\")&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.udpport,\"?transport=udp\")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.tcpport,\"?transport=tcp\")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,\"error\"in e?e.error:e)};const i=t.iceTransport;i&&(i.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var i;e&&(null===(i=this.onICETransportStateChange)||void 0===i||i.call(this,e))},i.getSelectedCandidatePair&&(i.onselectedcandidatepairchange=()=>{if(i.getSelectedCandidatePair()){const{local:e,remote:t}=i.getSelectedCandidatePair();Jy.info(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] selectedcandidatepairchange: local \").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),\", remote \").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port}),\" )\"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var i,n;if(!t){const i=this.peerConnection.getSenders();t=i.find((t=>t.track===e._mediaStreamTrack))}if(!t)return Jy.warn(\"[\".concat(e.getTrackId(),\"] no rtpSender found}\"));if(this.isVP8Simulcast(e))return Jy.warn(\"[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings\");if(!LD().supportSetRtpSenderParameters)return Jy.warn(\"[updateRtpSenderEncodings] Browser not support set rtp-sender parameters\");const r={},o={};switch(e._optimizationMode){case\"motion\":r.degradationPreference=\"maintain-framerate\";break;case\"detail\":r.degradationPreference=\"maintain-resolution\";break;case\"balanced\":r.degradationPreference=\"balanced\"}const s=function(e,t){return e.getTransceivers().find((e=>e.sender.track===t||e.receiver.track===t))}(this.peerConnection,e._mediaStreamTrack),a=dL(e);if(QV(e)&&s&&t&&a&&this.getLocalVideoStats&&Dn(i=[\"vp8\",\"vp9\"]).call(i,this.store.codec)){var c;const i=r.degradationPreference||(Dn(c=e._hints).call(c,ZD.CUSTOM_TRACK)?Oy(\"CUSTOM_ADAPTATION_DEFAULT_MODE\"):\"maintain-framerate\");!function(e,t,i,n,r,o){if($V(e,i),r(t),\"balanced\"!==n&&\"maintain-framerate\"!==n&&\"maintain-resolution\"!==n)return;let s=-1;YV(e,t);const a=window.setInterval((()=>{const a=ZV.get(e);if(!Oy(\"ENABLE_AG_ADAPTATION\")||!a)return $V(e,i),void r(t);const c=o();if(c.sendPackets>0&&c.OutgoingAvailableBandwidth>0){if(-1===s)return void(s=Date.now());if(Date.now()-s<1e3)return;const o=c.sendFrameRate,d=c.OutgoingAvailableBandwidth,[l,u]=zV(e,o,d,a.adaptationConfig,t,n);u&&(i.qualityLimitationReason=u),l&&a.adaptationConfig.scale!==l.scale&&(Jy.debug(\"[\".concat(e,\"] applyAdaptation: \").concat(i.qualityLimitationReason,\"\\n           sendFps \").concat(o,\", bwe \").concat(d,\", switch from \").concat(a.adaptationConfig.scale,\" to \").concat(l.scale,\" \")),a.adaptationConfig=XV(XV({},a.adaptationConfig),l),r(l))}}),Oy(\"CHECK_LOCAL_STATS_INTERVAL\")),c=XV({},t);ZV.set(e,{timer:a,adaptationConfig:c,originConfig:t,adaptationFunc:r}),Jy.debug(\"[\".concat(e,\"] start adaptation, originConfig: \").concat(JSON.stringify(t),\", degradationPreference: \").concat(n))}(this.id+s.mid,a,this,i,(e=>{t&&this.updateAdaptation(t,e)}),this.getLocalVideoStats.bind(this))}if(e._encoderConfig){var d;const{bitrateMax:t,frameRate:i,scaleResolutionDownBy:n}=e._encoderConfig;t&&(o.maxBitrate=1e3*t),(Dn(d=e._hints).call(d,ZD.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(i&&(o.maxFramerate=Pw(i)),n&&n>=1&&(o.scaleResolutionDownBy=n))}const{maxFramerate:l}=Oy(\"ENCODER_CONFIG_LIMIT\");if(l&&\"number\"==typeof l&&(o.maxFramerate=o.maxFramerate?Math.min(o.maxFramerate,l):l),Oy(\"DSCP_TYPE\")&&JI()){var u;const e=Oy(\"DSCP_TYPE\");Dn(u=[\"very-low\",\"low\",\"medium\",\"high\"]).call(u,e)&&(o.networkPriority=e)}const h=t.getParameters(),p=null===(n=h.encodings)||void 0===n?void 0:n[0];PI()&&!p&&(r.encodings=[o]),p&&Object.assign(p,o),Object.assign(h,r),Jy.debug(\"[\".concat(e.getTrackId(),\"] updateRtpSenderEncodings: \").concat(JSON.stringify(h.encodings))),await t.setParameters(h),await async function(e,t,i){try{var n;if(!LD().supportSetRtpSenderParameters)return;if(!function(e){return\"vp9\"===e}(e)||!Oy(\"ENABLE_SVC\"))return;const r={},o={},s=t.getParameters(),a=null===(n=s.encodings)||void 0===n?void 0:n[0];o.scalabilityMode=RM(i),a&&Object.assign(a,o),Object.assign(s,r),await t.setParameters(s),Jy.debug(\"[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: \".concat(JSON.stringify(s.encodings)))}catch(e){Jy.debug(\"[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed\",e)}}(this.store.codec,t,Oy(\"SVC_MODE\"))}async updateAdaptation(e,t){var i,n;if(!e)return Jy.debug(\"[updateAdaptation] no rtpSender found\");if(!LD().supportSetRtpSenderParameters)return Jy.debug(\"[updateAdaptation] Browser not support set rtp-sender parameters\");const r={},{bitrateMax:o,frameRate:s,scaleResolutionDownBy:a}=t;o&&(r.maxBitrate=1e3*o),s&&(r.maxFramerate=Pw(s)),a&&a>=1&&Dn(i=[\"vp8\",\"vp9\"]).call(i,this.store.codec)&&(r.scaleResolutionDownBy=a);const c=e.getParameters(),d=null===(n=c.encodings)||void 0===n?void 0:n[0];d&&Object.assign(d,r),Object.assign(c,{});try{await e.setParameters(c),Jy.debug(\"[updateAdaptation] updateRtpSenderEncodings: \".concat(JSON.stringify(c.encodings)))}catch(t){!(\"transport\"in e)||e.transport&&\"connected\"===e.transport.state?\"connected\"!==this.peerConnectionState?Jy.debug(\"[updateAdaptation] peerConnection not connected}\"):Jy.debug(\"[updateAdaptation] updateRtpSenderEncodings failed\",t):Jy.debug(\"[updateAdaptation] rtpSender transport not connected}\")}}async applySendEncodings(e,t){try{if(!LD().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){const n=e[i],r=t[i];r instanceof Gk&&!this.isVP8Simulcast(r)&&await this.updateRtpSenderEncodings(r,n.sender)}}catch(e){Jy.debug(\"[\".concat(this.store.clientId,\"] Apply RTPSendEncodings failed.\"))}}mungSendOfferSDP(e,t,i){const n=gM.parse(e);return t.forEach(((e,t)=>{const r=i[t],o=n.mediaDescriptions.find((e=>e.attributes.mid===r));o&&(NM(o,e),MM(o,e,this.store.codec))})),gM.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var i,n,r,o,s;const c=e[a],d=t[a];if(d instanceof Gk&&!Dn(i=d._hints).call(i,ZD.LOW_STREAM)&&null!==(n=d._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=d._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=d._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&\"vp8\"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:\"m\",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:\"h\",active:!0,maxBitrate:t.high}];const i=c.sender.getParameters();await c.sender.setParameters(Object.assign(i,e))}}}async applySimulcastEncodings(e,t){if(!PI()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof Gk&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:\"high\",priority:\"high\",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:\"low\",priority:\"low\",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,r))}}}isVP8Simulcast(e){var t,i,n,r,o;return!!(e instanceof Gk&&Oy(\"SIMULCAST\")&&\"vp8\"===this.store.codec&&!Dn(t=e._hints).call(t,ZD.LOW_STREAM)&&null!==(i=e._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,i,n){if(Oy(\"SDP_LOGGING\"))return Jy.upload(\"[\".concat(this.store.clientId,\"] exchanging \").concat(i,\" \").concat(t,\" SDP during P2PConnection.\").concat(n,\"\\n\"),e),\"offer\"===t?e=>{this.logSDPExchange(e,\"answer\",\"local\"===i?\"remote\":\"local\",n)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return t&&0!==t.length?t[0].ssrcId:void 0}setConfiguration(t){if(LD().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}},ib(eF.prototype,\"updateRemoteRTPCapabilities\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"updateRemoteRTPCapabilities\"),eF.prototype),ib(eF.prototype,\"connect\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"connect\"),eF.prototype),ib(eF.prototype,\"updateRemoteConnect\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"updateRemoteConnect\"),eF.prototype),ib(eF.prototype,\"createDataChannels\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"createDataChannels\"),eF.prototype),ib(eF.prototype,\"receive\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"receive\"),eF.prototype),ib(eF.prototype,\"batchReceive\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"batchReceive\"),eF.prototype),ib(eF.prototype,\"stopReceiving\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"stopReceiving\"),eF.prototype),ib(eF.prototype,\"muteRemote\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"muteRemote\"),eF.prototype),ib(eF.prototype,\"unmuteRemote\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"unmuteRemote\"),eF.prototype),ib(eF.prototype,\"muteLocal\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"muteLocal\"),eF.prototype),ib(eF.prototype,\"unmuteLocal\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"unmuteLocal\"),eF.prototype),ib(eF.prototype,\"close\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"close\"),eF.prototype),ib(eF.prototype,\"updateEncoderConfig\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"updateEncoderConfig\"),eF.prototype),ib(eF.prototype,\"updateSendParameters\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"updateSendParameters\"),eF.prototype),ib(eF.prototype,\"replaceTrack\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"replaceTrack\"),eF.prototype),ib(eF.prototype,\"updateAdaptation\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"updateAdaptation\"),eF.prototype),ib(eF.prototype,\"getRemoteSSRC\",[rF],Object.getOwnPropertyDescriptor(eF.prototype,\"getRemoteSSRC\"),eF.prototype),eF);function rF(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"From P2PConnection.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}var oF;function sF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function aF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?sF(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function cF(e){var t,i,n,r=2;for(\"undefined\"!=typeof Symbol&&(i=bV,n=Symbol.iterator);r--;){if(i&&null!=(t=e[i]))return t.call(e);if(n&&null!=(t=e[n]))return new dF(t.call(e));i=\"@@asyncIterator\",n=\"@@iterator\"}throw new TypeError(\"Object is not async iterable\")}function dF(e){function t(e){if(Object(e)!==e)return Gh.reject(new TypeError(e+\" is not an object.\"));var t=e.done;return Gh.resolve(e.value).then((function(e){return{value:e,done:t}}))}return dF=function(e){this.s=e,this.n=e.next},dF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Gh.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Gh.reject(e):t(i.apply(this.s,arguments))}},new dF(e)}let lF=(oF=class extends mv{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(Jb.StateChange,t,this._state)}constructor(e,t){super(),ng(this,\"isPlanB\",void 0),ng(this,\"store\",void 0),ng(this,\"statsUploader\",void 0),ng(this,\"connection\",void 0),ng(this,\"localTrackMap\",new Map),ng(this,\"remoteUserMap\",new Map),ng(this,\"localDataChannels\",[]),ng(this,\"remoteDataChannelMap\",new Map),ng(this,\"pendingLocalTracks\",[]),ng(this,\"pendingRemoteTracks\",[]),ng(this,\"pendingLocalDataChannels\",[]),ng(this,\"pendingRemoteDataChannels\",[]),ng(this,\"statsCollector\",void 0),ng(this,\"shouldForwardP2PCreation\",void 0),ng(this,\"iceFailedCount\",0),ng(this,\"dtlsFailedCount\",0),ng(this,\"mutex\",new ly(\"P2PChannel-mutex\")),ng(this,\"_state\",zb.Disconnected),ng(this,\"_pcStatsUploadType\",Oy(\"NEW_ICE_RESTART\")?Yb.FIRST_CONNECTION:Yb.OLD_FIRST_CONNECTION),ng(this,\"_isInRestartIce\",!1),ng(this,\"_isStartRestartIce\",!1),ng(this,\"_restartStates\",[\"disconnected\",\"failed\"]),ng(this,\"_restartTimer\",void 0),ng(this,\"_isFirstConnected\",!0),ng(this,\"handleMuteLocalTrack\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleMuteLocalTrack\");try{if(!this.connection||this.state!==zb.Connected)return void i(new iv(tv.INVALID_OPERATION,\"Cannot call P2PChannel.handleMuteLocalTrack before connection established.\"));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>\"videoLowTrack\"===e[0]));if(o){o[1].track._originMediaStreamTrack.stop()}await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createMuteMessage(r);await Lv(this,Jb.RequestMuteLocal,s),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleUnmuteLocalTrack\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleUnmuteLocalTrack\");try{if(!this.connection||this.state!==zb.Connected)return void i(new iv(tv.INVALID_OPERATION,\"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.\"));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>\"videoLowTrack\"===e[0]));if(o){const t=o[1];if(t.track._originMediaStreamTrack.stop(),!Oy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&LD().supportDualStreamEncoding){const i=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i}else{const i=xx(e,Mv(this,Jb.RequestLowStreamParameter));t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i}await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createUnmuteMessage(r);await Lv(this,Jb.RequestUnmuteLocal,s),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleUpdateVideoEncoder\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleSetVideoEncoder\");try{const i=this.localTrackMap.get(qb.LocalVideoTrack);if(!this.connection||!i||i.track!==e||this.state!==zb.Connected)return void t();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),await this.connection.updateEncoderConfig(r,o),this.emit(Jb.UpdateVideoEncoder,o),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleUpdateVideoSendParameters\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleUpdateVideoSendParameters\");try{const i=this.localTrackMap.get(qb.LocalVideoTrack);if(!this.connection||!i||i.track!==e||this.state!==zb.Connected)return void t();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),t()}catch(e){i(e)}finally{n()}})),ng(this,\"handleReplaceMixingTrack\",(async(e,t,i,n)=>{if(!this.connection||this.state!==zb.Connected)return void t();const r=rV([e]);let o;Jy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection will replace audioTrack [\").concat(r.getTrackId(),\"]\")),\"boolean\"==typeof n&&n||(o=await this.mutex.lock(\"From P2PChannel.handleReplaceMixingTrack\"));try{await this.replaceTrack(e,r),t()}catch(e){i(e)}finally{var s;null===(s=o)||void 0===s||s()}})),ng(this,\"handleReplaceTrack\",(async(e,t,i,n)=>{let r;Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel handleReplaceTrack for [track-id-\").concat(e.getTrackId(),\"]\")),\"boolean\"==typeof n&&n||(r=await this.mutex.lock(\"From P2PChannel.handleReplaceTrack\"));try{var o;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(!this.connection||!i||this.state!==zb.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,i[1].id)),this.isPlanB){const t=i[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(i[0],t)}if(i[0]===qb.LocalVideoTrack&&!Oy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&LD().supportDualStreamEncoding){const t=this.localTrackMap.get(qb.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}}t()}catch(e){i(e)}finally{var s;null===(s=r)||void 0===s||s()}})),ng(this,\"handleGetRTCStats\",(e=>{e(this.statsCollector.getRTCStats())})),ng(this,\"handleGetLocalVideoStats\",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),ng(this,\"handleGetLocalAudioStats\",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),ng(this,\"handleGetRemoteVideoStats\",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),ng(this,\"handleGetRemoteAudioStats\",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new $x(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!LD().supportUnifiedPlan||Oy(\"CHROME_FORCE_PLAN_B\")&&JI(),this.shouldForwardP2PCreation=Oy(\"FORWARD_P2P_CREATION\")&&LD().supportPCSetConfiguration&&zI(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new LV({},this.store):new nF({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=zb.New;const i=this.shouldForwardP2PCreation&&\"closed\"===(null===(t=this.connection)||void 0===t?void 0:t.peerConnectionState);if(this.shouldForwardP2PCreation&&!i||(i&&this.connection&&(Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.startP2PConnection ForwardP2P closed.\")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new LV(e,this.store):new nF(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new iv(tv.UNEXPECTED_ERROR,\"Cannot P2PChannel.startConnection before P2PConnection initialization .\");return this._pcStatsUploadType=Oy(\"NEW_ICE_RESTART\")?Yb.FIRST_CONNECTION:Yb.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new iv(tv.UNEXPECTED_ERROR,\"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .\");Oy(\"ENABLE_PREALLOC_PC\")&&this.state===zb.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=zb.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[i]=e;return Dn(t=[qb.LocalVideoLowTrack,qb.LocalVideoTrack]).call(t,i)})),i=t.map((e=>{let[,{id:t}]=e;return t})),n=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof nF){if(rA.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(n),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Dn(e).call(e,this.store.codec)){const t=[\"vp9\",\"vp8\",\"h264\"].find((t=>Dn(e).call(e,t)));t&&(this.store.codec=t,Jy.debug(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\" updateRemoteRTPCapabilities] default codec is not available, hence the fallback to \").concat(t,\".\")))}this.connection.updateRemoteRTPCapabilities(i,e)}}async getEstablishParams(){var e;if(this.connection instanceof nF&&\"closed\"!==this.connection.peerConnectionState&&Dn(e=[zb.New,zb.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==zb.Connected){if(this.state===zb.Disconnected)throw new iv(tv.UNEXPECTED_ERROR,\"PeerConnection already disconnected.\");return e.forEach((e=>{var t;Dn(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)})),[]}const t=this.filterTobePublishedDataChannels(e);return 0===t.length?[]:(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),\"datachannel\",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+\"\",\"datachannel\",void 0,t)})),e.map((e=>({streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId}))))}publish(e,t,i){var n=this;return XU((function*(){const r=yield jU(n.mutex.lock(\"From P2PChannel.publish\"));try{if(!n.connection||n.state!==zb.Connected){if(n.state===zb.Disconnected)throw new iv(tv.UNEXPECTED_ERROR,\"PeerConnection already disconnected.\");n.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===n.pendingLocalTracks.indexOf(e)));return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(t))}n.store.pubId=n.store.pubId+1,FU.markPublishStart(n.store.clientId,n.store.pubId);const o=n.filterTobePublishedTracks(e,t,i);if(0===o.length)return void(yield jU(n.tryToUnmuteAudio(e)));yield*AV(cF(n.doPublish(n.connection,o)))}finally{r()}}))()}doPublish(e,t){var i=this;return XU((function*(){t.forEach((e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===qb.LocalAudioTrack?\"audio\":\"video\",r)})),i.bindLocalTrackEvents(t);const n=t.map((e=>{let{track:t}=e;return t})),r=yield jU(e.send(t.map((e=>{let{track:t}=e;return t})),i.store.codec,i.store.audioCodec)),o=(yield jU(r.next())).value,s=i.createGatewayPublishMessage(t,o);let a;try{a=yield s}catch(e){throw r.throw(e),(null==e?void 0:e.code)===tv.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===i.pendingLocalTracks.indexOf(t)&&i.pendingLocalTracks.push(t)})),i.unbindLocalTrackEvents(t),e}const c=i.mapPubResToRemoteConfig(s,a),d=(yield jU(r.next(c))).value,l=Oy(\"ENABLE_VIDEO_SEI\");n.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&l&&(e.trackMediaType===Hb.VIDEO?await EM(t.sender,e):e.trackMediaType===Hb.AUDIO&&await async function(e){if(!LD().supportWebRTCEncodedTransform)return void Jy.warning(\"browser not support audio encoded transform\");if(uM.has(e))return;if(!e.track)return;const t={track:e.track};if(OI()){if(!e.createEncodedStreams)return void Jy.warning(\"browser not support createEncodedStreams() API\");let n=null;try{n=e.createEncodedStreams()}catch(e){return void Jy.error(\"create audio-encoded-streams error\",e&&e.message)}const r=new TransformStream({transform(n,r){t.controller||(t.controller=r),e.track&&e.track.id!==t.track.id&&(Jy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i)),r.enqueue(n)}});n.readable.pipeThrough(r).pipeTo(n.writable)}else if(NI()){if(\"undefined\"==typeof RTCRtpScriptTransform)return void Jy.warning(\"browser not support RTCRtpScriptTransform\");const n=lM(),r=new MessageChannel;await new Gh((e=>n.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(n,{name:\"tx\",port:r.port2},[r.port2]);e.transform=o,await new Gh((e=>n.onmessage=t=>{\"started\"===t.data&&e(void 0)})),r.port1.onmessage=n=>{var r;n.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==t.track.id&&(Jy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i))},t.worker=n}function i(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener(\"ended\",i)}const t=uM.get(e);if(t){uM.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){Jy.warning(e&&e.message)}}}uM.set(e,t),e.track.addEventListener(\"ended\",i)}(t.sender))})),t.forEach((e=>{let{type:t}=e;i.statsCollector.addLocalStats(t)})),i.assignLocalTracks(t,d),i.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===qb.LocalAudioTrack?\"audio\":\"video\",void 0,r)}))}))()}async updateVideoStreamParameter(e,t){const i=this.localTrackMap.get(t);if(!i)return;if(!(i.track instanceof Gk))return Jy.warn(\"[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack\");if(!(this.connection instanceof nF||this.connection instanceof LV))return Jy.warn(\"[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB\");const{track:n}=i,r=function(e,t){const i={};return e.height&&e.width&&(i.scaleResolutionDownBy=xw(e,t)),i.maxFramerate=e.framerate?Pw(e.framerate):void 0,i.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,i}(e,n);if(n._encoderConfig||(n._encoderConfig={}),t!==qb.LocalVideoLowTrack||!Oy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&LD().supportDualStreamEncoding)null!=r.scaleResolutionDownBy&&(n._encoderConfig.scaleResolutionDownBy=r.scaleResolutionDownBy);else{const t=n._originMediaStreamTrack;if(!t.canvas)return Jy.warn(\"[\".concat(n.getTrackId(),\"] no canvas on track\"));!function(e,t){const i=e.canvas;t.width&&(i.width=Pw(t.width)),t.height&&(i.height=Pw(t.height)),t.framerate&&(i.stopCapture&&i.stopCapture(),i.stopCapture=PP((()=>{!i.startCapture&&i.stopCapture&&i.stopCapture(),i.startCapture&&i.startCapture()}),Pw(t.framerate)))}(t,e)}null!=r.maxBitrate&&(n._encoderConfig.bitrateMax=r.maxBitrate/1e3),null!=r.maxFramerate&&(n._encoderConfig.frameRate&&\"object\"==typeof n._encoderConfig.frameRate?n._encoderConfig.frameRate.max=r.maxFramerate:n._encoderConfig.frameRate={max:r.maxFramerate}),Jy.debug(\"[\".concat(n.getTrackId(),\"] LowStreamEncoderConfig: , \").concat(JSON.stringify(n._encoderConfig))),await this.connection.updateRtpSenderEncodings(n)}publishLowStream(e){var t=this;return XU((function*(){if(!t.connection||t.state!==zb.Connected)return;const i=yield jU(t.mutex.lock(\"Locking from P2PChannel.publishLowStream\"));try{const r=t.localTrackMap.get(qb.LocalVideoTrack);if(!r)throw new iv(tv.UNEXPECTED_ERROR,\"Could not find high stream\");if(t.localTrackMap.has(qb.LocalVideoLowTrack))throw new iv(tv.UNEXPECTED_ERROR,\"[\".concat(t.store.clientId,\"] Can't publish low stream when stream already publish\"));const o=[{track:t.getLowVideoTrack(r.track,e),type:qb.LocalVideoLowTrack}];if(yield*AV(cF(t.doPublish(t.connection,o))),r.track.muted||!r.track.enabled){var n;const e=null===(n=t.localTrackMap.get(qb.LocalVideoLowTrack))||void 0===n?void 0:n.id;void 0!==e&&(yield jU(t.connection.muteLocal([e])))}}finally{i()}}))()}async republish(){this.pendingLocalTracks.length>0&&(Jy.debug(\"[\".concat(this.store.clientId,\"] Emit P2PChannelEvents.RequestRePublish to republish tracks.\")),await Pv(this,Jb.RequestRePublish,this.pendingLocalTracks),this.emit(Jb.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(Jy.debug(\"Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels.\"),await Pv(this,Jb.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let e=this.pendingRemoteTracks.length-1;e>=0;e--){const{user:t,kind:i}=this.pendingRemoteTracks[e];(i!==Hb.AUDIO||t._audio_added_&&t._audioSSRC)&&(i!==Hb.VIDEO||t._video_added_&&t._videoSSRC)||this.pendingRemoteTracks.splice(e,1)}if(e)await Pv(this,Jb.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:e,kind:t}of this.pendingRemoteTracks)await this.subscribe(e,t,t===Hb.VIDEO?e._videoSSRC:e._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(Jb.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==zb.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const i=t.find((e=>\"videoLowTrack\"===e[0]));if(i){i[1].track.close()}return this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==zb.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==zb.Connected)return;const e=this.localTrackMap.get(qb.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[qb.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const i=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:i}]=e;return{type:t,track:i}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),i}async subscribeDataChannel(e,t){if(!this.connection||this.state!==zb.Connected)throw new iv(tv.INVALID_OPERATION,\"Cannot subscribe remote user when peerConnection disconnected.\");const i=t.filter((t=>{var i;return!(null!==(i=this.remoteDataChannelMap.get(e))&&void 0!==i&&i.get(t.id))}));if(0!==i.length)return await this.connection.createDataChannels(e.uid,i),i.forEach((t=>{var i;this.remoteDataChannelMap.has(e)?null===(i=this.remoteDataChannelMap.get(e))||void 0===i||i.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const n=this.pendingRemoteDataChannels.findIndex((i=>{let{user:n,id:r}=i;return n.uid===e.uid&&r===t.id}));-1!==n&&this.pendingRemoteDataChannels.splice(n,1)})),i.map((e=>e.id))}async subscribe(e,t,i,n,r){var o;if(!this.connection||this.state!==zb.Connected)throw new iv(tv.INVALID_OPERATION,\"Cannot subscribe remote user when peerConnection disconnected.\");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a,c;const d=this.connection.getPreMedia(i);if(d)Jy.debug(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] preSSRCMap has ssrcId: \").concat(i,\", no need to send sub to gateway.\")),c=d.transceiver,s=d.track,a=d.id;else if(r){const i=r.find((e=>{let{stream_type:i}=e;return i===t}));if(!i)throw new iv(tv.UNEXPECTED_ERROR,\"Cannot subscribe to remote \".concat(t,\" for user: \").concat(e.uid,\" because subscribe answer from gateway does not contain stream_type: \").concat(t,\".\"));const n=await this.connection.receive(t,i.ssrcs,String(e._uintid),i.attributes);this.connection instanceof nF&&(c=n.transceiver),s=n.track,a=n.id}else{const r=await this.connection.receive(t,[{ssrcId:i,rtx:n}],String(e._uintid),void 0);this.connection instanceof nF&&(c=r.transceiver),s=r.track,a=r.id}t===Hb.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new oM(s,e.uid,e._uintid,this.store),Jy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote audio track: \").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new rM(s,e.uid,e._uintid,this.store),Jy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote video track: \").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),Oy(\"ENABLE_VIDEO_SEI\")&&c&&(t==Hb.VIDEO?await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!LD().supportWebRTCEncodedTransform)return void Jy.warning(\"browser not support video encoded transform\");if(!e.track)return;if(fM.has(e)){const i=fM.get(e);return void(i&&(i.onSei=t.onSei))}const i={track:e.track,onSei:t.onSei};if(OI()){if(!e.createEncodedStreams)return void Jy.warning(\"browser not support createEncodedStreams() API\");let t=null;try{t=e.createEncodedStreams()}catch(e){return void Jy.error(\"create video-encoded-streams error\",e&&e.message)}const r=new TransformStream({transform(t,r){i.controller||(i.controller=r),e.track&&e.track.id!==i.track.id&&(Jy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n));const o=function(e){const t=new DataView(e.data);let i=0;for(;i+4<e.data.byteLength;){if(0===t.getUint8(i+0)&&0===t.getUint8(i+1)&&0===t.getUint8(i+2)&&1===t.getUint8(i+3)&&6===t.getUint8(i+4)){let n=i+6,r=0,o=0;for(;255===(o=t.getUint8(n++));)r+=255;r+=o;const s=pM(e.data,n,r);return new Uint8Array(s)}i++}return null}(t);o&&i.onSei&&i.onSei(o),r.enqueue(t)}});t.readable.pipeThrough(r).pipeTo(t.writable)}else if(NI()){if(\"undefined\"==typeof RTCRtpScriptTransform)return void Jy.warning(\"browser not support RTCRtpScriptTransform\");const t=lM(),r=new MessageChannel;await new Gh((e=>t.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:\"rx\",port:r.port2},[r.port2]);e.transform=o,await new Gh((e=>t.onmessage=t=>{\"started\"===t.data&&e(void 0)})),r.port1.onmessage=t=>{var r;t.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==i.track.id?(Jy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n)):t.data.sei&&i.onSei&&i.onSei(t.data.sei)},i.worker=t}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener(\"ended\",n)}!function(e){const t=fM.get(e);if(t){fM.delete(e);try{var i,n;null===(i=t.controller)||void 0===i||i.terminate(),null===(n=t.worker)||void 0===n||n.terminate()}catch(e){Jy.warning(e&&e.message)}}}(e)}fM.set(e,i),e.track.addEventListener(\"ended\",n)}(c.receiver,{onSei:t=>{var i;null===(i=e._videoTrack)||void 0===i||i._onSei(t)}}):t==Hb.AUDIO&&await async function(e){if(!LD().supportWebRTCEncodedTransform)return void Jy.warning(\"browser not support audio encoded transform\");if(hM.has(e))return;const t={track:e.track};if(OI()){if(!e.createEncodedStreams)return void Jy.warning(\"browser not support createEncodedStreams() API\");let n=null;try{n=e.createEncodedStreams()}catch(e){return void Jy.error(\"create audio-encoded-streams error\",e&&e.message)}const r=new TransformStream({transform(n,r){t.controller||(t.controller=r),e.track&&e.track.id!==t.track.id&&(Jy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i)),r.enqueue(n)}});n.readable.pipeThrough(r).pipeTo(n.writable)}else if(NI()){if(\"undefined\"==typeof RTCRtpScriptTransform)return void Jy.warning(\"browser not support RTCRtpScriptTransform\");const n=lM(),r=new MessageChannel;await new Gh((e=>n.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(n,{name:\"rx\",port:r.port2},[r.port2]);e.transform=o,await new Gh((e=>n.onmessage=t=>{\"started\"===t.data&&e(void 0)})),r.port1.onmessage=n=>{var r;n.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==t.track.id&&(Jy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i))},t.worker=n}function i(){e.track.removeEventListener(\"ended\",i),function(e){const t=hM.get(e);if(t){hM.delete(e);try{var i,n;null===(i=t.controller)||void 0===i||i.terminate(),null===(n=t.worker)||void 0===n||n.terminate()}catch(e){Jy.warning(e&&e.message)}}}(e)}hM.set(e,t),e.track.addEventListener(\"ended\",i)}(c.receiver));const l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const u=this.pendingRemoteTracks.findIndex((i=>{let{user:n,kind:r}=i;return n.uid===e.uid&&t===r}));-1!==u&&(this.pendingRemoteTracks.splice(u,1),this.emit(Jb.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==zb.Connected)throw new iv(tv.INVALID_OPERATION,\"Cannot subscribeAll remote users when peerConnection disconnected.\");e=e.filter((e=>{var t;let{user:i,mediaType:n}=e;return!(null!==(t=this.remoteUserMap.get(i))&&void 0!==t&&t.has(n))}));const t=[],i=new Map;e.forEach((e=>{if(!this.connection)return;const n=this.connection.getPreMedia(e.ssrcId);n?i.set(e.ssrcId,n):t.push(e)}));const n=await this.connection.batchReceive(t.map((e=>{let{user:t,mediaType:i,ssrcId:n,rtxSsrcId:r}=e;return{kind:i,ssrcMsg:[{ssrcId:n,rtx:r}],mslabel:String(t._uintid)}})));t.forEach(((e,t)=>{i.set(e.ssrcId,n[t])})),e.forEach((e=>{let{user:t,mediaType:n,ssrcId:r}=e;const o=i.get(r);if(!o)return void Jy.debug(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] cannot find \").concat(t.uid,\" subscribe data,\").concat(n,\", \").concat(r));const{track:s,id:a,transceiver:c}=o;n===Hb.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new oM(s,t.uid,t._uintid,this.store),Jy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote audio track: \").concat(t._audioTrack.getTrackId()))),c&&t._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new rM(s,t.uid,t._uintid,this.store),Jy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote video track: \").concat(t._videoTrack.getTrackId()))),c&&t._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._videoTrack));const d=this.remoteUserMap.get(t);d?d.set(n,a):this.remoteUserMap.set(t,new Map([[n,a]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:i,kind:r}=e;return i.uid===t.uid&&n===r}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(Jb.MediaReconnectEnd,t.uid))}))}async unsubscribe(e,t,i){const n=this.pendingRemoteTracks.filter((i=>{let{user:n,kind:r}=i;return void 0!==t?n.uid===e.uid&&t===r:n.uid===e.uid}));if(n.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===zb.Connected||i||n.forEach((t=>{let{kind:i}=t;var n;if(i===Hb.AUDIO)null===(n=e._audioTrack)||void 0===n||n._destroy(),e._audioTrack=void 0;else if(i===Hb.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==zb.Connected)return;const r=this.filterTobeUnSubscribedTracks(e,t);if(0===r.length)return;await this.connection.stopReceiving(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(r);return this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),r.forEach((e=>{let[t,{kind:n}]=e;var r,o;n===Hb.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(n===Hb.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),i||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(n===Hb.AUDIO){var s;if(this.unbindRemoteTrackEvents(t._audioTrack),!i)null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const i=this.filterTobeUnSubscribedDataChannels(e,t);if(0===i.length)return;t.forEach((e=>{e._close()}));const n=this.remoteDataChannelMap.get(e);return i.forEach((e=>{n&&n.delete(e.id)})),n&&0===n.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),i.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:n}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:r}=e;return void 0!==n?t.uid===i.uid&&n===r:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==zb.Connected)return void t.forEach((e=>{let{user:t,kind:i}=e;var n;if(i===Hb.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(i===Hb.VIDEO){var r;null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0}}));const i=Jn(e).call(e,((e,t)=>{let{user:i,mediaType:n}=t;const r=this.filterTobeUnSubscribedTracks(i,n);return e.concat(r)}),[]);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const n=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:i}]=e;var n,r;i===Hb.VIDEO&&t._videoSSRC&&(null===(n=this.connection)||void 0===n||n.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(i===Hb.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0;else if(i===Hb.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),n}isPreSubScribe(e){if(!this.connection||this.state!==zb.Connected)return!1;return!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.muteRemote has no remote user \").concat(e.uid,\".\"));if(!i.get(t))return void Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.muteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"));const n=t===Hb.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==n&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.unmuteRemote has no remote user \").concat(e.uid,\".\"));i.get(t)||Jy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.unmuteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"))}getAllTracks(e){const t=this.localTrackMap.get(qb.LocalAudioTrack);if((null==t?void 0:t.track)instanceof ik){const i=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==qb.LocalAudioTrack})).filter((t=>{let[i]=t;return!(e&&i===qb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[i]=t;return!(e&&i===qb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,i,n,r){if(e){const i=this.localTrackMap.get(qb.LocalAudioTrack),o=n?this.localTrackMap.get(qb.LocalVideoLowTrack):this.localTrackMap.get(qb.LocalVideoTrack);rA.publish(this.store.sessionId,{eventElapse:FU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==i?void 0:i.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(ZD.SCREEN_TRACK)),audio:!!i,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var o;i||(i=[]);const s=i.find((e=>e instanceof $L)),a=n?null===(o=this.localTrackMap.get(qb.LocalVideoTrack))||void 0===o?void 0:o.track:i.find((e=>e instanceof Gk));rA.publish(this.store.sessionId,{eventElapse:FU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(ZD.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,i,n){const r=n===Hb.VIDEO?i._videoSSRC:i._audioSSRC;r&&rA.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Hb.VIDEO,audio:n===Hb.AUDIO,peerid:i.uid,subscribeRequestid:r,p2pid:this.store.p2pId,eventElapse:FU.measureFromSubscribeStart(this.store.clientId,r),preSsrc:this.isPreSubScribe(r)})}reset(){Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel.reset\")),this.mutex=new ly(\"P2PChannel-mutex\"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new LV({},this.store):new nF({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(qb.LocalAudioTrack);if((null==e?void 0:e.track)instanceof ik){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=zb.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(qb.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(qb.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof Gk||t&&t.track instanceof $L?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}getRemoteMedia(e){var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(qb.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=oE(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel.disconnectForReconnect closing P2PConnection\")),this.state=zb.Reconnecting,Oy(\"KEEP_LAST_FRAME\")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var i;t._videoTrack&&t._videoTrack._player&&(null===(i=t._videoTrack._player.getVideoElement())||void 0===i||i.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new LV({},this.store):new nF({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[i,{track:n}]=e;switch(i){case qb.LocalVideoTrack:Dn(t=n._hints).call(t,ZD.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case qb.LocalAudioTrack:n instanceof ik?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case qb.LocalVideoLowTrack:}})),this.emit(Jb.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;Array.from(d_(i).call(i)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(Jb.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,i]=e;Array.from(d_(i).call(i)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel disconnected, waiting to reconnect.\")))}hasPendingRemoteDataChannel(e,t){for(const i of this.pendingRemoteDataChannels){const{user:n,id:r}=i;if((e instanceof eV?e.uid:e)===n.uid&&r===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const i of this.pendingRemoteTracks){const{user:n,kind:r}=i;if((e instanceof eV?e.uid:e)===n.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return XU((function*(){if(!t.connection||t.state!==zb.Connected)return;const i=yield jU(t.mutex.lock(\"From P2PChannel.restartICE\"));let n;try{n=yield jU(t.connection.restartICE(e));const r=yield jU(n.next());if(r.done)return;const o=r.value,s=yield o;switch(t.reportPCDisconnectedOrFailed(e),e){case Kb.TCP:t._pcStatsUploadType=Yb.TCP_RESTART;break;case Kb.RELAY:t._pcStatsUploadType=Yb.RELAY_RESTART;break;default:t._pcStatsUploadType=Yb.OLD_RESTART}t._isInRestartIce=!0,n.next(s)}catch(e){var r;null===(r=n)||void 0===r||r.throw(e)}finally{i()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(qb.LocalVideoTrack),i=this.localTrackMap.get(qb.LocalAudioTrack),n=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),r=e.audioSend.find((e=>e.ssrc===(null==i?void 0:i.ssrcs[0].ssrcId)));if(!n||!r)return 1;const o=kv(this,Jb.NeedSignalRTT),s=n?n.rttMs:void 0,a=r?r.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,u=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(ZD.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,i=e.bitrate.actualEncoded;if(t&&i){const e=(1e3*t-i)/(1e3*t);return aA[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((i=>{let[n]=i;const r=n._audioSSRC,o=n._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===r)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=kv(this,Jb.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*l/1500;u&&(p=.6*h*100/50+.2*l/1500+.2*u/400);t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new Gh(((t,i)=>{this.handleMuteLocalTrack(e,t,i)}))}async replaceTrack(e,t){var i;if(Jy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel replaceTrack from [\").concat(e.getTrackId(),\"] to [\").concat(t.getTrackId(),\"]\")),!this.connection||this.state!==zb.Connected)return;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(!n)return;const r=n[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:r}]),this.bindLocalTrackEvents([{track:t,type:r}]),n[1].track=t),await(null===(i=this.connection)||void 0===i?void 0:i.replaceTrack(t,n[1].id)),this.isPlanB){const e=n[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(r,e)}if(r===qb.LocalVideoTrack&&!Oy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&LD().supportDualStreamEncoding){const t=this.localTrackMap.get(qb.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}}}filterTobePublishedTracks(e,t,i){const n=[],r=this.getAllTracks();e=Vv(e=e.filter((e=>-1===r.indexOf(e))));let o,s=!1;const a=this.localTrackMap.get(qb.LocalAudioTrack);for(const r of e){if(r instanceof Gk&&(this.localTrackMap.has(qb.LocalVideoTrack)||s?new iv(tv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:r,type:qb.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(r,i);n.push({track:e,type:qb.LocalVideoLowTrack})}if(r instanceof $L)if(a){const e=a.track;if(e instanceof ik)nV([r]),e.addAudioTrack(r),this.bindLocalAudioTrackEvents(r,!0);else{const t=rV([e,r]);Jy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection will replace audioTrack [\").concat(t.getTrackId(),\"]\")),this.replaceTrack(e,t)}}else if(o instanceof ik)nV([r]),o.addAudioTrack(r);else if(o||!r._useAudioElement&&LD().webAudioMediaStreamDest&&!r._bypassWebAudio){o=rV(o?[r,o]:[r])}else o=r}return o&&(Jy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection will send audioTrack [\").concat(o.getTrackId(),\"]\")),n.push({track:o,type:qb.LocalAudioTrack})),n}filterTobeUnpublishedTracks(e){const t=[],i=this.getAllTracks();e=Vv(e=e.filter((e=>-1!==i.indexOf(e))));for(const i of e){if(i instanceof $L){const e=this.localTrackMap.get(qb.LocalAudioTrack);if(!e)continue;e.track instanceof ik?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([qb.LocalAudioTrack,e]),e.track.close())):t.push([qb.LocalAudioTrack,e])}if(i instanceof Gk){const e=this.localTrackMap.get(qb.LocalVideoTrack);if(!e)continue;t.push([qb.LocalVideoTrack,e]);const i=this.localTrackMap.get(qb.LocalVideoLowTrack);i&&t.push([qb.LocalVideoLowTrack,i])}}return t}filterTobePublishedDataChannels(e){return e=(e=Vv(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return e=(e=(e=Vv(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:i}=e;switch(i){case qb.LocalVideoTrack:t.addListener(QD.GET_STATS,this.handleGetLocalVideoStats),t.addListener(QD.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(QD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(QD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case qb.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case qb.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof ik?e.trackList.forEach((e=>{e.addListener(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(QD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(QD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(QD.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:i}]=e;return{track:i,type:t}}))),e.forEach((e=>{let{track:t,type:i}=e;switch(i){case qb.LocalVideoTrack:t.off(QD.GET_STATS,this.handleGetLocalVideoStats),t.off(QD.GET_RTC_STATS,this.handleGetRTCStats),t.off(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(QD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(QD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case qb.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case qb.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof ik?e.trackList.forEach((e=>{e.off(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(QD.GET_STATS,this.handleGetLocalAudioStats),e.off(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(QD.GET_STATS,this.handleGetLocalAudioStats),e.off(QD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(QD.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(QD.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(QD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(QD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof rM&&t.addListener(QD.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof oM&&t.addListener(QD.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(QD.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;i.has(Hb.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),i.has(Hb.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,i)=>{var n;let r,o,{track:s,type:a}=e;switch(a){case qb.LocalAudioTrack:r=Lb.Audio,o={dtx:s instanceof ek&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case qb.LocalVideoTrack:r=Dn(n=s._hints).call(n,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High,o=aF(aF({},Lw(s)),{},{codec:this.store.codec,svc_mode:RM()});break;case qb.LocalVideoLowTrack:r=Lb.Low,o=aF(aF({},Lw(s)),{},{codec:this.store.codec,svc_mode:RM()})}return{stream_type:r,attributes:o,ssrcs:t[i]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case qb.LocalVideoTrack:i=Dn(t=r._hints).call(t,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalAudioTrack:i=Lb.Audio;break;case qb.LocalVideoLowTrack:i=Lb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,i)=>{let{track:n,type:r}=e;this.localTrackMap.set(r,{track:n,id:t[i].id,ssrcs:t[i].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onConnectionStateChange(\").concat(t,\")\")),this.emit(Jb.PeerConnectionStateChange,t),\"connected\"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),\"connected\"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),Oy(\"NEW_ICE_RESTART\")){var i;if(Dn(i=this._restartStates).call(i,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{if(\"disconnected\"===e.iceConnectionState||\"checking\"===e.iceConnectionState||\"failed\"===e.iceConnectionState){Jy.debug(\"[\".concat(this.store.clientId,\"] [P2PChannel] start use restartICE, type is \").concat(t));\"CONNECTED\"===kv(this,Jb.QueryClientConnectionState)&&this.emit(Jb.RequestRestartICE,t)}},i=()=>{\"disconnected\"!==e.iceConnectionState&&\"checking\"!==e.iceConnectionState&&\"failed\"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),Jy.debug(\"[\".concat(this.store.clientId,\"] P2PConnection disconnected timeout, force reconnect\")),setTimeout((()=>this.emit(Jb.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},n=Oy(\"ICE_RESTART_INTERVAL\");return void(this._restartTimer=window.setTimeout((()=>{if(Oy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE\")&&LD().supportPCSetConfiguration)t(Kb.RELAY),this._restartTimer=window.setTimeout(i,n);else if(PI())t(Kb.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(t(Kb.TCP),LD().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(Kb.RELAY),this._restartTimer=window.setTimeout(i,n)}),n));this._restartTimer=window.setTimeout(i,n)}}),800))}}else{if(\"disconnected\"===t&&\"disconnected\"===e.iceConnectionState)return setTimeout((()=>{if(\"disconnected\"===e.iceConnectionState&&Oy(\"ICE_RESTART\")){\"CONNECTED\"===kv(this,Jb.QueryClientConnectionState)&&this.emit(Jb.RequestRestartICE)}}),800),void setTimeout((()=>{\"disconnected\"===e.peerConnectionState&&(Jy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection disconnected timeout 4000ms, force reconnect\")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(Jb.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);\"failed\"===t&&(Jy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection state failed, force reconnect\")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(Jb.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{\"connected\"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICEConnectionStateChange(\").concat(e,\")\")),rA.reportApiInvoke(this.store.sessionId,{name:\"ICEConnectionStateChange\",options:e,tag:Rv.TRACER}).onSuccess(),this.emit(Jb.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICETransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportStateChange=e=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportError=e=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportError(\").concat(e,\")\"))},e.onFirstAudioDecoded=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var n;i&&(this.store.subscribe(i.uid,\"audio\",void 0,void 0,void 0,Date.now()),null===(n=i.audioTrack)||void 0===n||n.emit(rP.FIRST_FRAME_DECODED),rA.firstRemoteFrame(this.store.sessionId,$y.FIRST_AUDIO_DECODE,eA.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));i&&rA.firstRemoteFrame(this.store.sessionId,$y.FIRST_AUDIO_RECEIVED,eA.FIRST_AUDIO_RECEIVED,{peer:i._uintid,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,i)=>{this.reportVideoFirstFrameDecoded(e,t,i)},e.onFirstVideoReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));i&&rA.firstRemoteFrame(this.store.sessionId,$y.FIRST_VIDEO_RECEIVED,eA.FIRST_VIDEO_RECEIVED,{peer:i._uintid,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const i=\"relay\"===e.candidateType,n=\"relay\"===t.candidateType;\"unknown\"!==t.candidateType&&i===n||this.emit(Jb.ConnectionTypeChange,i),Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedLocalCandidateChanged(\").concat(JSON.stringify(Vw(t)),\" -> \").concat(JSON.stringify(Vw(e)),\")\"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{Jy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedRemoteCandidateChanged(\").concat(JSON.stringify(Vw(t)),\" -> \").concat(JSON.stringify(Vw(e)),\")\"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const e=this.statsCollector.getLocalVideoTrackStats(),t=this.statsCollector.getRTCStats();return aF(aF({},e),t)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const i=this.localTrackMap.get(qb.LocalAudioTrack);if(e instanceof $L&&(null==i?void 0:i.track)instanceof ik)return i.track.isActive||t.push([qb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n&&(t.push(n),n[0]===qb.LocalVideoTrack)){const e=this.localTrackMap.get(qb.LocalVideoLowTrack);e&&t.push([qb.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],i=this.localTrackMap.get(qb.LocalAudioTrack);if(e instanceof $L&&(null==i?void 0:i.track)instanceof ik)return i.track.isActive&&t.push([qb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n)if(n[0]===qb.LocalVideoTrack){t.push(n);const e=this.localTrackMap.get(qb.LocalVideoLowTrack);e&&t.push([qb.LocalVideoLowTrack,e])}else t.push(n);return t}createMuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case qb.LocalAudioTrack:i=Lb.Audio;break;case qb.LocalVideoTrack:i=Dn(t=r._hints).call(t,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalVideoLowTrack:i=Lb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case qb.LocalAudioTrack:i=Lb.Audio;break;case qb.LocalVideoTrack:i=Dn(t=r._hints).call(t,ZD.SCREEN_TRACK)?Lb.Screen:Lb.High;break;case qb.LocalVideoLowTrack:i=Lb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const i=[],n=this.remoteUserMap.get(e);if(!n)return i;if(t){const r=n.get(t);if(!r)return i;i.push([e,{kind:t,id:r}])}else Array.from(n.entries()).forEach((t=>{let[n,r]=t;i.push([e,{kind:n,id:r}])}));return i}filterTobeUnSubscribedDataChannels(e,t){const i=[];return t.forEach((t=>{var n;null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.has(t.id)&&i.push(t)})),i}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[i,{kind:n,id:r}]=e;switch(n){case Hb.VIDEO:return void(i._videoSSRC&&t.push({stream_type:Hb.VIDEO,ssrcId:i._videoSSRC}));case Hb.AUDIO:return void(i._audioSSRC&&t.push({stream_type:Hb.AUDIO,ssrcId:i._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[i,{kind:n}]=e;if(t.has(i)){let e=t.get(i);n===Hb.VIDEO?e|=Ub.Video:e|=Ub.Audio,t.set(i,e)}else n===Hb.VIDEO?t.set(i,Ub.Video):t.set(i,Ub.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,i]=e;return{stream_id:t.uid,stream_type:i}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:i}]=e;const n=this.remoteUserMap.get(t);n&&(n.delete(i),0===Array.from(n.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(qb.LocalVideoTrack),i=this.localTrackMap.get(qb.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),i&&e.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.connection){return\"connected\"!==this.connection.peerConnectionState}return!0}mapPubResToRemoteConfig(e,t){return e.map(((e,i)=>{var n;let{stream_type:r}=e;return null===(n=t.find((e=>{let{stream_type:t}=e;return r===t})))||void 0===n?void 0:n.attributes}))}async tryToUnmuteAudio(e){for(let i=0;i<e.length;i++)if(e[i]instanceof $L){var t;const n=this.filterTobeUnmutedTracks(e[i]);if(0===n.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(n.map((e=>{let[,{id:t}]=e;return t}))));const r=this.createUnmuteMessage(n);return void await Lv(this,Jb.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Jb.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Jb.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Qv(py(this.dtlsFailedCount,hy)),this.emit(Jb.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await Pv(this,Jb.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(Jb.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(qb.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof Gk))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof Gk)).length>1)throw new iv(tv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof $L)).length>1&&(e.some((e=>e instanceof $L&&e._bypassWebAudio))||!LD().webAudioMediaStreamDest))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");for(const t of e){if(t instanceof Gk&&this.pendingLocalTracks.some((e=>e instanceof Gk)))throw new iv(tv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof $L&&this.pendingLocalTracks.some((e=>e instanceof $L))&&(!LD().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof $L&&e._bypassWebAudio))))throw new iv(tv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\")}}getLowVideoTrack(e,t){const i=!Oy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&LD().supportDualStreamEncoding,n=aF(aF({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=i?e._mediaStreamTrack.clone():xx(e,n);const o=Zv(8,\"track-low-\"),s=new Gk(r,aF(aF({},i&&{scaleResolutionDownBy:xw(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return s.on(iP.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,$D.LOW_STREAM)})),s._hints.push(ZD.LOW_STREAM),e.on(\"sei-to-send\",(e=>{s.emit(\"sei-to-send\",e)})),e.addListener(QD.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.mutex.lock(\"From P2PChannel.globalLock\")}async reportPCStats(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof nF){var r,o,s,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:d,dtlsTransportState:l,peerConnectionState:u}=this.connection,{local:h,remote:p}=await this.connection.getSelectedCandidatePair();rA.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:d,dtlsstate:l,connectionstate:u,intSucc:t?1:2,error:n,selectedLocalCandidateProtocol:null!==(r=null==h?void 0:h.protocol)&&void 0!==r?r:\"\",selectedLocalCandidateType:null!==(o=h.candidateType)&&void 0!==o?o:\"\",selectedLocalCandidateAddress:\"\".concat(h.address,\":\").concat(h.port),selectedRemoteCandidateProtocol:null!==(s=p.protocol)&&void 0!==s?s:\"\",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:\"\",selectedRemoteCandidateAddress:\"\".concat(p.address,\":\").concat(p.port),restartCnt:i,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,i,n){var r;const o=Array.from(d_(r=this.remoteUserMap).call(r)).find((t=>t._videoSSRC===e));if(o){n||this.store.subscribe(o.uid,\"video\",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,s=r.subscribe.find((e=>e.userId===o.uid&&\"video\"===e.type));rA.firstRemoteVideoDecode(this.store.sessionId,$y.FIRST_VIDEO_DECODE,eA.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:i,subscribeElapse:FU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:n?1:0,firstFrame:(null==s?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,i){if(!this.connection)return!1;const n=this.remoteUserMap.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const o=await this.connection.getRemoteSSRC(r);return void 0!==o&&o!==i}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:i}]=e;t===qb.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,$D.LOW_STREAM):i._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof nF&&(\"disconnected\"!==this.connection.iceConnectionState&&\"checking\"!==this.connection.iceConnectionState&&\"failed\"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===Yb.TCP_RESTART&&e===Kb.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,Yb.DISCONNECTED_OR_FAILED)))}},ib(oF.prototype,\"startP2PConnection\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"startP2PConnection\"),oF.prototype),ib(oF.prototype,\"connect\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"connect\"),oF.prototype),ib(oF.prototype,\"updateRemoteRTPCapabilities\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"updateRemoteRTPCapabilities\"),oF.prototype),ib(oF.prototype,\"publishDataChannel\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"publishDataChannel\"),oF.prototype),ib(oF.prototype,\"unpublish\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"unpublish\"),oF.prototype),ib(oF.prototype,\"unpublishDataChannel\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"unpublishDataChannel\"),oF.prototype),ib(oF.prototype,\"unpublishLowStream\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"unpublishLowStream\"),oF.prototype),ib(oF.prototype,\"subscribeDataChannel\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"subscribeDataChannel\"),oF.prototype),ib(oF.prototype,\"subscribe\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"subscribe\"),oF.prototype),ib(oF.prototype,\"massSubscribe\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"massSubscribe\"),oF.prototype),ib(oF.prototype,\"unsubscribe\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"unsubscribe\"),oF.prototype),ib(oF.prototype,\"unsubscribeDataChannel\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"unsubscribeDataChannel\"),oF.prototype),ib(oF.prototype,\"massUnsubscribe\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"massUnsubscribe\"),oF.prototype),ib(oF.prototype,\"muteRemote\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"muteRemote\"),oF.prototype),ib(oF.prototype,\"unmuteRemote\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"unmuteRemote\"),oF.prototype),ib(oF.prototype,\"hasRemoteMediaWithLock\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"hasRemoteMediaWithLock\"),oF.prototype),ib(oF.prototype,\"disconnectForReconnect\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"disconnectForReconnect\"),oF.prototype),ib(oF.prototype,\"updateBitrateLimit\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"updateBitrateLimit\"),oF.prototype),ib(oF.prototype,\"remoteMediaSsrcChanged\",[uF],Object.getOwnPropertyDescriptor(oF.prototype,\"remoteMediaSsrcChanged\"),oF.prototype),oF);function uF(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"From P2PChannel.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}const hF={};function pF(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&Jy.debug(\"install service \".concat(e.name)),hF[e.name]=e}function _F(e){const t=hF[e];if(!t)throw new iv(tv.INVALID_OPERATION,\"\".concat(e,\" not found, please use AgoraRTC.use(\").concat(e,\"Service) to load it first\"));return t}function EF(e,t){return _F(\"DataStream\").create(e,t)}function fF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function mF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fF(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const TF=Date.now(),SF=20,gF=new Map,RF=new Map;async function CF(e){const t=gF.get(e),i=Array.isArray(t)&&t[t.length-1],n=RF.get(e);if(!i)return void(n.isSyncing=!1);const r={uid:i.uid,payload:i.payload};0===n.firstRecvTs&&(n.firstRecvTs=i.recvTs,n.firstSendTs=i.sendTs);const o=i.sendTs-n.firstSendTs,s=o-(Date.now()-n.firstRecvTs);s>0&&(n.firstRecvTs=Date.now()-o);let a=i.mediaDelay+s;a<=0?(t.pop(),IF(i.context,r),a=0):a=Math.min(a,SF),setTimeout((()=>t.length&&CF(e)),a)}function IF(e,t){e.safeEmit(wv.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function vF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return IF(i,{uid:e.uid,payload:e.payload});const n=\"\".concat(i.id,\"-\").concat(e.uid),r=gF.get(n)||[],o=r.findIndex((t=>e.sendTs>=t.sendTs)),s=mF(mF({},e),{},{context:i,mediaDelay:t,recvTs:Date.now()});-1===o?r.push(s):r.splice(o,0,s),gF.set(n,r);let a=!1;var c;RF.has(n)?a=!(null===(c=RF.get(n))||void 0===c||!c.isSyncing):RF.set(n,{isSyncing:a,firstRecvTs:0,firstSendTs:0});a||CF(n)}const yF=vI().name;function AF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function bF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?AF(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const wF=\"websdk_ng_cache_parameter\",OF=Oy(\"MAX_PRELOAD_ASYNC_LENGTH\"),NF=1e4,DF=new Map,PF=[];let LF=null,kF=0,MF=0;const UF=new Map,xF=function(e,t){const i=[];let n=0;const r=async()=>{const e=i.shift();e&&await e(),i.length>0&&n<t?r():n--};return async function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return new Gh((async(o,a)=>{i.push((async()=>{try{const t=await e(...s);o(t)}catch(e){a(e)}})),n<t&&(n++,r())}))}}(FF,OF),VF=pI.CancelToken.source();async function FF(e,t,i,n,r,o){try{if(!Oy(\"ENABLE_PRELOAD\"))return;if(!LD().supportWebCrypto)return void Wv((()=>{Jy.warn(\"Your browser does not support preloading, this feature  be run in a secure environment\")}),\"preload_webcrypto_not_supported\");if(!i&&null!==i)throw new iv(tv.INVALID_PARAMS,\"Invalid token: \".concat(i,\". If you don not use token, set it to null\"));i&&av(i,\"token\",1,2047),av(e,\"appid\",1,2047),Tb(t),n&&Sb(n);const s=$v();Jy.debug(\"preload channel \".concat(t,\", uid is \").concat(n));const a={appId:e,cname:t,token:i||e,uid:\"string\"!=typeof n?n:null,sid:s,proxyServer:r};let c,d;\"string\"==typeof n?(a.stringUid=n,[d,c]=await Gh.all([wU(n,{sid:s,appId:e},VF.token),NU(bF(bF({},a),{},{token:i||e,uid:0}),VF.token)]),a.uid=d.uid,c.gatewayInfo.uid=a.uid,c.gatewayInfo.res.uid=a.uid):(o&&(a.stringUid=o),c=await NU(a,VF.token));const l={sid:s,appId:e,cname:t,token:i||e,uid:a.stringUid||n,intUid:a.uid||c.gatewayInfo.uid,stringUid:a.stringUid,ts:Date.now(),sua:d,ap:c};await async function(e){let t;try{e.uid&&jF({appId:e.appId,cname:e.cname,token:e.token,uid:e.uid,stringUid:e.stringUid});const i=qF(e),n=await async function(e,t){try{const i=await window.crypto.subtle.importKey(\"raw\",Yv(t),\"AES-GCM\",!1,[\"encrypt\"]),n=await window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:new Uint8Array(1)},i,Hv(window.btoa(JSON.stringify(e))));return Kv(new Uint8Array(n))}catch(e){return}}(e,e.token||e.appId);if(!n)return;t=KF(wF);const r=t?JSON.parse(t):[];r.push({[i]:n}),r.length>Oy(\"AP_CACHE_NUM\")&&r.shift(),YF(wF,JSON.stringify(r))}catch(e){Jy.warn(\"Error caching server parameters:\",e.message),YF(wF,\"\")}}(l),kF++}catch(e){throw MF++,function(e){LF||(LF=window.setTimeout((()=>{let t=\"\";UF.forEach(((e,i)=>{t+=\"\".concat(i,\": \").concat(e,\" ;\")})),rA.reportApiInvoke(null,{name:gv.PRELOAD,options:{success:kF,failed:MF,err:t}}).onError(e),kF=0,MF=0,UF.clear(),LF=null}),NF));const t=UF.get(e.code)||0;UF.set(e.code,t+1)}(e),e}}async function BF(e){try{const t=jF(e);if(!t||\"disabled\"!==e.cloudProxyServer)return;const i=await async function(e,t){try{const i=await window.crypto.subtle.importKey(\"raw\",Yv(t),\"AES-GCM\",!1,[\"decrypt\"]),n=await window.crypto.subtle.decrypt({name:\"AES-GCM\",iv:new Uint8Array(1)},i,Hv(e));return JSON.parse(window.atob(Kv(new Uint8Array(n))))}catch(e){return}}(t,e.token||e.appId);if(!i)return;if(!function(e,t){const i=e.cname===t.cname&&e.appId===t.appId&&e.token===t.token;if(!i)return!1;return t.stringUid?e.stringUid===t.stringUid:\"number\"==typeof t.uid?e.uid===t.uid:e.uid==t.uid}(i,e))return;if(i&&Date.now()-i.ts<Oy(\"AP_CACHE_LIFETIME\"))return i}catch(e){Jy.warn(\"Error get preloadInfo\",e.message)}}function jF(e){let t;try{if(t=KF(wF),!t)return;const i=JSON.parse(t),n=qF(e),r=function(e,t){for(let i=e.length-1;i>=0;i--)if(t(e[i]))return i;return-1}(i,(e=>n in e));if(-1===r)return;const o=i.splice(r,1)[0];return YF(wF,JSON.stringify(i)),o[n]}catch(e){Jy.warn(\"Error delete preload info: \".concat(t),e.message),YF(wF,\"\")}}function GF(e){if(e){let t=DF.get(e);t&&(window.clearTimeout(t),t=null,DF.delete(e)),Dn(PF).call(PF,e)||\"disabled\"!==e.cloudProxyServer||PF.push(e)}if(DF.size<Oy(\"AP_CACHE_NUM\")&&PF.length>0){const e=PF.shift();DF.set(e,window.setTimeout((async()=>{const{appId:t,cname:i,token:n,stringUid:r,uid:o,proxyServer:s}=e;try{await xF(t,i,n,o,s,r),DF.has(e)&&GF(e)}catch(t){Jy.warn(\"update preload failed\",t.message),WF(e)}}),Oy(\"AP_UPDATE_INTERVAL\")))}}function WF(e){const t=PF.indexOf(e);-1!==t&&PF.splice(t,1);let i=DF.get(e);i&&(window.clearTimeout(i),i=null,DF.delete(e),GF())}function HF(e,t){const i=e.sua,n=e.ap;t&&i&&rA.reqUserAccount(e.sid,{lts:i.requestTime,elapse:i.elapse,success:!0,serverAddr:i.url,stringUid:t,uid:e.intUid,errorCode:null,extend:i.req}),rA.reportResourceTiming(e.ap.url,e.sid),rA.joinWebProxyAP(e.sid,{lts:n.requestTime,elapse:n.elapse,sucess:1,apServerAddr:n.url,turnServerAddrList:n.proxyInfo.addresses.map((e=>e.ip)).join(\",\"),eventType:\"disabled\",unilbsServerIds:[bw.CHOOSE_SERVER,bw.CLOUD_PROXY_FALLBACK].toString()}),rA.joinChooseServer(e.sid,{lts:n.requestTime,elapse:n.elapse,succ:!0,csAddr:n.url,opid:n.opid,serverList:n.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,cid:n.gatewayInfo.cid.toString(),uid:n.gatewayInfo.uid.toString(),csIp:n.gatewayInfo.csIp,unilbsServerIds:[bw.CHOOSE_SERVER].toString(),isHttp3:n.isHttp3})}function KF(e){return window.atob(window.localStorage.getItem(e)||\"\")}function YF(e,t){window.localStorage.setItem(e,window.btoa(t))}function qF(e){let t=\"\".concat(e.appId,\"_\").concat(e.cname);return\"string\"==typeof e.uid&&(t+=\"_s_\".concat(e.uid)),\"number\"==typeof e.uid&&(t+=\"_\".concat(e.uid)),e.token&&(t+=\"_\".concat(e.token)),ay(t)}function zF(e){let t=function(){const e=ZF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let i=e.appId;void 0!==i&&(dB(t,10),oB(t,i));let n=e.cid;void 0!==n&&(dB(t,16),dB(t,n));let r=e.cname;void 0!==r&&(dB(t,26),oB(t,r));let o=e.deviceId;void 0!==o&&(dB(t,34),oB(t,o));let s=e.elapse;void 0!==s&&(dB(t,40),uB(t,s));let a=e.fileSize;void 0!==a&&(dB(t,48),uB(t,QF(a)));let c=e.height;void 0!==c&&(dB(t,56),uB(t,QF(c)));let d=e.jpg;void 0!==d&&(dB(t,66),dB(t,d.length),nB(t,d));let l=e.networkType;void 0!==l&&(dB(t,72),uB(t,QF(l)));let u=e.osType;void 0!==u&&(dB(t,80),uB(t,QF(u)));let h=e.requestId;void 0!==h&&(dB(t,90),oB(t,h));let p=e.sdkVersion;void 0!==p&&(dB(t,98),oB(t,p));let _=e.sequence;void 0!==_&&(dB(t,104),uB(t,QF(_)));let E=e.sid;void 0!==E&&(dB(t,114),oB(t,E));let f=e.timestamp;void 0!==f&&(dB(t,120),uB(t,f));let m=e.uid;void 0!==m&&(dB(t,128),dB(t,m));let T=e.vid;void 0!==T&&(dB(t,136),dB(t,T));let S=e.width;void 0!==S&&(dB(t,144),uB(t,QF(S)));let g=e.service;void 0!==g&&(dB(t,152),dB(t,g));let R=e.callbackData;void 0!==R&&(dB(t,162),dB(t,R.length),nB(t,R));let C=e.ticket;void 0!==C&&(dB(t,170),oB(t,C));let I=e.vendorConfigs;void 0!==I&&(dB(t,178),oB(t,I))}(e,t),function(e){let t=e.bytes,i=e.limit;return t.length===i?t:t.subarray(0,i)}(t)}function JF(e){return function(e){let t={};e:for(;!eB(e);){let i=cB(e);switch(i>>>3){case 0:break e;case 1:t.code=cB(e);break;case 2:t.msg=rB(e,cB(e));break;case 3:t.requestId=rB(e,cB(e));break;case 4:t.timestamp=lB(e,!1);break;default:XF(e,7&i)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function XF(e,t){switch(t){case 0:for(;128&sB(e););break;case 2:$F(e,cB(e));break;case 5:$F(e,4);break;case 1:$F(e,8);break;default:throw new Error(\"Unimplemented type: \"+t)}}function QF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let ZF=[];function $F(e,t){if(e.offset+t>e.limit)throw new Error(\"Skip past limit\");e.offset+=t}function eB(e){return e.offset>=e.limit}function tB(e,t){let i=e.bytes,n=e.offset,r=e.limit,o=n+t;if(o>i.length){let t=new Uint8Array(2*o);t.set(i),e.bytes=t}return e.offset=o,o>r&&(e.limit=o),n}function iB(e,t){let i=e.offset;if(i+t>e.limit)throw new Error(\"Read past limit\");return e.offset+=t,i}function nB(e,t){let i=tB(e,t.length);e.bytes.set(t,i)}function rB(e,t){let i=iB(e,t),n=String.fromCharCode,r=e.bytes,o=\"ï¿½\",s=\"\";for(let e=0;e<t;e++){let a,c,d,l,u=r[e+i];0==(128&u)?s+=n(u):192==(224&u)?e+1>=t?s+=o:(a=r[e+i+1],128!=(192&a)?s+=o:(l=(31&u)<<6|63&a,l<128?s+=o:(s+=n(l),e++))):224==(240&u)?e+2>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],32896!=(49344&(a|c<<8))?s+=o:(l=(15&u)<<12|(63&a)<<6|63&c,l<2048||l>=55296&&l<=57343?s+=o:(s+=n(l),e+=2))):240==(248&u)?e+3>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],d=r[e+i+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(l=(7&u)<<18|(63&a)<<12|(63&c)<<6|63&d,l<65536||l>1114111?s+=o:(l-=65536,s+=n(55296+(l>>10),56320+(1023&l)),e+=3))):s+=o}return s}function oB(e,t){let i=t.length,n=0;for(let e=0;e<i;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<i&&(r=(r<<10)+t.charCodeAt(++e)-56613888),n+=r<128?1:r<2048?2:r<65536?3:4}dB(e,n);let r=tB(e,n),o=e.bytes;for(let e=0;e<i;e++){let n=t.charCodeAt(e);n>=55296&&n<=56319&&e+1<i&&(n=(n<<10)+t.charCodeAt(++e)-56613888),n<128?o[r++]=n:(n<2048?o[r++]=n>>6&31|192:(n<65536?o[r++]=n>>12&15|224:(o[r++]=n>>18&7|240,o[r++]=n>>12&63|128),o[r++]=n>>6&63|128),o[r++]=63&n|128)}}function sB(e){return e.bytes[iB(e,1)]}function aB(e,t){let i=tB(e,1);e.bytes[i]=t}function cB(e){let t,i=0,n=0;do{t=sB(e),i<32&&(n|=(127&t)<<i),i+=7}while(128&t);return n}function dB(e,t){for(t>>>=0;t>=128;)aB(e,127&t|128),t>>>=7;aB(e,t)}function lB(e,t){let i,n=0,r=0,o=0;return i=sB(e),n=127&i,128&i&&(i=sB(e),n|=(127&i)<<7,128&i&&(i=sB(e),n|=(127&i)<<14,128&i&&(i=sB(e),n|=(127&i)<<21,128&i&&(i=sB(e),r=127&i,128&i&&(i=sB(e),r|=(127&i)<<7,128&i&&(i=sB(e),r|=(127&i)<<14,128&i&&(i=sB(e),r|=(127&i)<<21,128&i&&(i=sB(e),o=127&i,128&i&&(i=sB(e),o|=(127&i)<<7))))))))),{low:n|r<<28,high:r>>>4|o<<24,unsigned:t}}function uB(e,t){let i=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,o=0===r?0===n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10,s=tB(e,o),a=e.bytes;switch(o){case 10:a[s+9]=r>>>7&1;case 9:a[s+8]=9!==o?128|r:127&r;case 8:a[s+7]=8!==o?n>>>21|128:n>>>21&127;case 7:a[s+6]=7!==o?n>>>14|128:n>>>14&127;case 6:a[s+5]=6!==o?n>>>7|128:n>>>7&127;case 5:a[s+4]=5!==o?128|n:127&n;case 4:a[s+3]=4!==o?i>>>21|128:i>>>21&127;case 3:a[s+2]=3!==o?i>>>14|128:i>>>14&127;case 2:a[s+1]=2!==o?i>>>7|128:i>>>7&127;case 1:a[s]=1!==o?128|i:127&i}}const hB={},pB={},_B=4294967296,EB=_B*_B,fB=EB/2,mB=CB(0,!0),TB=CB(0),SB=IB(0,-2147483648,!1),gB=IB(-1,2147483647,!1),RB=IB(-1,-1,!0);function CB(e,t){let i,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=pB[e],n)?n:(i=IB(e,0,!0),r&&(pB[e]=i),i):(r=-128<=(e|=0)&&e<128)&&(n=hB[e],n)?n:(i=IB(e,e<0?-1:0,!1),r&&(hB[e]=i),i)}function IB(e,t,i){return{low:0|e,high:0|t,unsigned:!!i}}function vB(e,t){if(isNaN(e))return t?mB:TB;if(t){if(e<0)return mB;if(e>=EB)return RB}else{if(e<=-fB)return SB;if(e+1>=fB)return gB}return e<0?t?mB:TB:IB(e%_B|0,e/_B|0,t)}function yB(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class AB extends mv{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(iw.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),ng(this,\"name\",\"AgoraRTCImageModeration\"),ng(this,\"_connectionState\",tw.CONNECTING),ng(this,\"_sequence\",0),ng(this,\"_moderationStartTime\",void 0),ng(this,\"_workerConnection\",void 0),ng(this,\"_workerMessageLengthLimit\",void 0),ng(this,\"_qualityRatio\",void 0),ng(this,\"_connectInfo\",void 0),ng(this,\"_cancelTokenSource\",pI.CancelToken.source()),ng(this,\"_retryConfig\",void 0),ng(this,\"_moderationInterval\",void 0),ng(this,\"_moderationTimer\",null),ng(this,\"_moderationMode\",1),ng(this,\"_quality\",1),ng(this,\"_qualityTimer\",null),ng(this,\"_ticket\",void 0),ng(this,\"_moderationIntervalMinimum\",void 0),ng(this,\"_uploadFailedNum\",0),ng(this,\"_uploadNum\",0),ng(this,\"_uploadTimer\",null),ng(this,\"_extraInfo\",void 0),ng(this,\"_vendor\",\"\"),ng(this,\"_encoder\",new TextEncoder),ng(this,\"_moderationId\",void 0),ng(this,\"inspectImage\",(()=>{if(this.connectionState!==tw.CONNECTED)throw new mb(tv.OPERATION_ABORTED,\"image moderation service connection status is \".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===tw.CONNECTED?this.requestToInspectImage():Jy.debug(\"[\".concat(this._moderationId,\"] Moderation State is not connected , \"),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=Zv(5,\"image-moderation-\"),this._workerMessageLengthLimit=Oy(\"IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT\"),this._moderationIntervalMinimum=Oy(\"IMAGE_MODERATION_INTERVAL_MINIMUM\"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=Oy(\"IMAGE_MODERATION_QUALITY_RATIO\"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new yw(\"worker-\"+this._moderationId,hy),this.on(iw.STATE_CHANGE,((e,t)=>{Jy.debug(\"[\".concat(this._moderationId,\"] Moderation operation :\").concat(nw[e],\" \").concat(t||\"\"))})),this.handleWorkerEvents()}async init(e,t){this.emit(iw.STATE_CHANGE,nw.CONNECT_AP),this._connectInfo=e;const i=this._cancelTokenSource.token;return this._retryConfig=t,new Gh(((n,r)=>{this.on(iw.CONNECTION_STATE_CHANGE,((e,t)=>{e===tw.CONNECTED&&n()})),this.requestAP(e,i,t).then((e=>{this.connectWorker(e)})).catch((e=>{r(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),Jy.debug(\"[\".concat(this._moderationId,\"] updateConfig: \").concat(JSON.stringify(e))),this.connectionState===tw.CONNECTED&&this.inspectImage()}async requestAP(e,t,i){const n=Oy(\"WEBCS_DOMAIN\").map((e=>\"https://\".concat(e,\"/api/v1\"))),r=await function(e,t,i,n){let{appId:r,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;RU++;const l=\"moderation_plugin\",u={service_name:l,json_body:JSON.stringify({appId:r,areaCode:o,cname:s,command:\"allocateEdge\",requestId:RU,seq:RU,sid:a,appToken:c,ts:Date.now(),uid:d+\"\"})};let h,p,_=e[0];return _y((async()=>{h=Date.now();const e=await $M(_,{data:u,cancelToken:i,headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"61\"},params:{action:\"wrtc_gateway\"}});if(p=Date.now()-h,0!==e.code){const t=new mb(tv.UNEXPECTED_RESPONSE,\"moderation plugin ap error, code\"+e.code,{retry:!0,responseTime:p});throw Jy.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new mb(tv.UNEXPECTED_RESPONSE,\"moderation plugin ap error, code: \".concat(t.code,\", reason: \").concat(t.reason),{code:t.code,responseTime:p});throw Jy.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new mb(tv.UNEXPECTED_RESPONSE,\"moderation plugin ap empty server\",{code:t.code,responseTime:p});throw Jy.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new mb(tv.UNEXPECTED_RESPONSE,\"moderation plugin ap empty port\",{code:t.code,responseTime:p});throw Jy.error(e.toString()),e}const n=Oy(\"IMAGE_MODERATION_WORKER_HOST\");return{addressList:t.servers.map((e=>{let{address:t,wss:i}=e;if(t&&i)return\"wss://\".concat(t.replace(/\\./g,\"-\"),\".\").concat(n,\":\").concat(i,\"/moderation\")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,i)=>(rA.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===i,responseTime:p,serverIp:e[i%e.length]}),!1)),((t,i)=>(rA.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[i%e.length]}),!!(t.code!==tv.OPERATION_ABORTED&&t.code!==tv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(_=e[(i+1)%e.length],!0))),n)}(n,e,t,i);this.emit(iw.STATE_CHANGE,nw.AP_CONNECTED);const{addressList:o,ticket:s}=r;return this._ticket=s,o}async connectWorker(e){this.emit(iw.STATE_CHANGE,nw.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(fb.CONNECTED,(async()=>{this.emit(iw.STATE_CHANGE,nw.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=tw.CONNECTED})),this._workerConnection.on(fb.CLOSED,(()=>{this.connectionState=tw.CLOSED})),this._workerConnection.on(fb.FAILED,(()=>{this.connectionState=tw.CLOSED})),this._workerConnection.on(fb.RECONNECTING,(()=>{this.connectionState=this.connectionState===tw.CONNECTED?tw.RECONNECTING:tw.CONNECTING})),this._workerConnection.on(fb.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=JF(new Uint8Array(e.data));Oy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")&&Jy.debug(\"[\".concat(this._moderationId,\"] Response message for worker of image moderation \"),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,Jy.error(\"[\".concat(this._moderationId,\"] Error response from worke, code is \").concat(t.code,\", msg is \").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{rA.reportApiInvoke(this._connectInfo.sid||null,{name:gv.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:Rv.TRACER}).onError(new mb(tv.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),Oy(\"IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL\"))))}else Jy.error(\"[\".concat(this._moderationId,\"] Unexpected message type from worker\"))})),this._workerConnection.on(fb.WILL_RECONNECT,((e,t,i)=>{\"recover\"===e&&i(e),i(\"tryNext\")})),this._workerConnection.on(fb.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=kv(this,iw.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(Oy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")&&Jy.debug(\"Only the track being played can be inspected\"));this._sequence++;const i=await this.generateRequestData(e,t);this._workerConnection.sendMessage(i,!0,!0)}else Oy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")&&Jy.debug(\"Only the track being published can be inspected\")}async generateRequestData(e,t){let{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage(\"image/jpeg\",this.quality),l=await lL(d,i,n),u=this._sequence+\"-\"+r+\"-\"+a+\"-\"+c+\"-\"+Zv(12,\"\"),h={appId:i,cid:r,cname:n,deviceId:\"\",elapse:AB.intToLong(Number(c-this._moderationStartTime)),fileSize:d.buffer.byteLength,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:u,sdkVersion:\"4.22.0\",sequence:this._sequence,sid:s,timestamp:vB(c),uid:a,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete h.callbackData;const p=zF(h);if(p.byteLength<this._workerMessageLengthLimit){if(Oy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")){const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?yB(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yB(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},h);delete e.jpg,Jy.debug(\"[\".concat(this._moderationId,\"] Request message for worker of image moderation service: \"),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=pI.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=tw.CLOSED,this.emit(iw.STATE_CHANGE,nw.CLOSED)}}function bB(e){if(ov(e.interval,\"interval\",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new mb(tv.INVALID_PARAMS,\"config.extraInfo length cannot exceed 1024 bytes\");if(e&&e.vendor&&e.vendor.length>1024)throw new mb(tv.INVALID_PARAMS,\"config.vendor length cannot exceed 1024 bytes\")}const wB={name:\"ImageModeration\",create:function(e){let{config:t}=e;return bB(t),new AB(t)}};var OB,NB,DB,PB,LB,kB,MB,UB,xB,VB,FB,BB,jB,GB,WB,HB,KB,YB,qB,zB,JB,XB,QB,ZB,$B,ej,tj,ij,nj,rj,oj,sj,aj,cj,dj,lj,uj,hj,pj,_j,Ej;function fj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function mj(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fj(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fj(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}ly.setLogger(Jy);let Tj=(OB=nA(),NB=nA({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof yP))return[t];t=[t]}return t.map((e=>e?Object(e).toString():\"null\"))}}),DB=nA({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==oP.DATA?(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))):[t.getChannelId()])}),PB=nA({argsMap:(e,t,i,n)=>[\"object\"==typeof t?t.uid:t,i,n]}),LB=nA({argsMap:(e,t,i)=>[t,i]}),kB=nA({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:i}=e;return[null==t?void 0:t.uid,i]}))}),MB=nA({argsMap:(e,t,i,n)=>[\"object\"==typeof t?t.uid:t,i,n]}),UB=nA({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:i}=e;return{uid:null==t?void 0:t.uid,mediaType:i}}))}),xB=nA(),VB=nA(),FB=nA(),BB=nA(),jB=nA(),GB=nA(),WB=nA(),HB=nA(),KB=nA(),YB=nA(),qB=nA(),zB=nA(),JB=nA(),XB=nA(),QB=nA({argsMap:(e,t)=>[t]}),ZB=nA(),$B=nA(),ej=nA(),tj=nA(),ij=nA(),nj=nA(),rj=nA(),oj=nA(),sj=nA({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),aj=nA(),cj=nA(),dj=nA(),lj=nA(),uj=nA(),hj=nA(),pj=nA({reportResult:!0}),_j=nA(),Ej=class extends mv{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||\"audience\"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||\"opus\"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return\"Client\"}constructor(e){let t;if(super(),ng(this,\"store\",void 0),ng(this,\"_uid\",void 0),ng(this,\"_channelName\",void 0),ng(this,\"_uintUid\",void 0),ng(this,\"_users\",[]),ng(this,\"_config\",void 0),ng(this,\"_clientId\",void 0),ng(this,\"_appId\",void 0),ng(this,\"_sessionId\",null),ng(this,\"_key\",void 0),ng(this,\"_rtmConfig\",{}),ng(this,\"_joinInfo\",void 0),ng(this,\"_gateway\",void 0),ng(this,\"_statsCollector\",void 0),ng(this,\"_configDistribute\",void 0),ng(this,\"_leaveMutex\",new ly(\"client-leave\")),ng(this,\"_publishMutex\",new ly(\"client-publish\")),ng(this,\"_renewTokenMutex\",new ly(\"client-renewtoken\")),ng(this,\"_subscribeMutex\",new ly(\"client-subscribe\")),ng(this,\"_encryptionMode\",\"none\"),ng(this,\"_encryptionSecret\",null),ng(this,\"_encryptionSalt\",null),ng(this,\"_encryptDataStream\",!1),ng(this,\"_encryptDataStreamKey\",null),ng(this,\"_encryptDataStreamIv\",null),ng(this,\"_proxyServer\",void 0),ng(this,\"_turnServer\",{servers:[],mode:\"auto\"}),ng(this,\"_cloudProxyServerMode\",\"disabled\"),ng(this,\"_isDualStreamEnabled\",!1),ng(this,\"_defaultStreamFallbackType\",void 0),ng(this,\"_lowStreamParameter\",void 0),ng(this,\"_streamFallbackTypeCacheMap\",new Map),ng(this,\"_remoteStreamTypeCacheMap\",new Map),ng(this,\"_axiosCancelSource\",pI.CancelToken.source()),ng(this,\"_audioVolumeIndicationInterval\",void 0),ng(this,\"_networkQualityInterval\",void 0),ng(this,\"_userOfflineTimeout\",void 0),ng(this,\"_streamRemovedTimeout\",void 0),ng(this,\"_liveTranscodeStreamingClient\",void 0),ng(this,\"_liveRawStreamingClient\",void 0),ng(this,\"_channelMediaRelayClient\",void 0),ng(this,\"_networkQualitySensitivity\",\"normal\"),ng(this,\"_p2pChannel\",void 0),ng(this,\"_useLocalAccessPoint\",!1),ng(this,\"_setLocalAPVersion\",void 0),ng(this,\"_joinAndNotLeaveYet\",!1),ng(this,\"_numberOfJoinCount\",0),ng(this,\"_remoteDefaultVideoStreamType\",void 0),ng(this,\"_inspect\",void 0),ng(this,\"_moderation\",void 0),ng(this,\"_license\",void 0),ng(this,\"_pendingPublishedUsers\",[]),ng(this,\"ntpAlignErrorCount\",0),ng(this,\"remoteInboundOffset\",0),ng(this,\"_handleLocalTrackEnable\",((e,t,i)=>{this.publish(e,!1).then(t).catch(i)})),ng(this,\"_handleLocalTrackDisable\",((e,t,i)=>{this.unpublish(e).then(t).catch(i)})),ng(this,\"_handleUserOnline\",(e=>{if(Oy(\"BLOCK_LOCAL_CLIENT\")&&dA(e.uid,this.channelName))return void Jy.debug(\"[\".concat(e.uid,\"] will be ignored in local\"));this.isStringUID&&\"string\"!=typeof e.uid&&Jy.error(\"[\".concat(this._clientId,\"] StringUID is Mixed with UintUID\"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(wv.USER_JOINED,t));else{const t=new eV(e.uid,e.uint_id||e.uid);this._users.push(t),Jy.debug(\"[\".concat(this._clientId,\"] user online\"),e.uid),this.safeEmit(wv.USER_JOINED,t)}})),ng(this,\"_handleUserOffline\",(e=>{if(Oy(\"BLOCK_LOCAL_CLIENT\")&&dA(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:xv(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),Jy.debug(\"[\".concat(this._clientId,\"] user offline\"),e.uid,\"reason:\",e.reason),this.safeEmit(wv.USER_LEAVED,t,e.reason))})),ng(this,\"_handleAddAudioOrVideoStream\",((e,t,i,n,r,o,s)=>{if(Oy(\"BLOCK_LOCAL_CLIENT\")&&dA(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void Jy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_add_stream)\"));Jy.debug(\"[\".concat(this._clientId,\"] stream added with uid \").concat(t,\", type \").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c=\"audio\"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=r||t),\"audio\"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,\"audio\"===e?(a._audio_added_=!0,void 0!==i&&(a._audioSSRC=i),void 0!==n&&(a._cname=n),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==i&&(a._videoSSRC=i),void 0!==n&&(a._cname=n),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),(\"audio\"===e?a.hasAudio:a.hasVideo)&&!c&&(Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(a.uid,\" published \").concat(e)),this.safeEmit(wv.USER_PUBLISHED,a,e)),\"video\"===e?rA.onGatewayStream(this._sessionId,$y.ON_ADD_VIDEO_STREAM,eA.ON_ADD_VIDEO_STREAM,{peer:r||t,ssrc:a._videoSSRC}):rA.onGatewayStream(this._sessionId,$y.ON_ADD_AUDIO_STREAM,eA.ON_ADD_AUDIO_STREAM,{peer:r||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,i).then((t=>{if(t&&(Jy.debug(\"[\".concat(this._clientId,\"] resubscribe \").concat(e,\" for user \").concat(a.uid,\" after rejoin because SSRC id changed.\")),this._p2pChannel instanceof lF))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{Jy.error(\"[\".concat(this._clientId,\"] resubscribe error\"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(Jy.debug(\"[\".concat(this._clientId,\"] resubscribe \").concat(e,\" for user \").concat(a.uid,\" after reconnect.\")),this._subscribe(a,e,!0).catch((e=>{Jy.error(\"[\".concat(this._clientId,\"] resubscribe error\"),e.toString())})))})),ng(this,\"_handleRemoveStream\",(e=>{if(Oy(\"BLOCK_LOCAL_CLIENT\")&&dA(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void Jy.warning(\"[\".concat(this._clientId,\"] can not find target user!(on_remove_stream)\"));Jy.debug(\"[\".concat(this._clientId,\"] stream removed with uid \").concat(e.uid));let i=()=>{};t.hasAudio&&t.hasVideo?i=()=>{Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished audio track\")),this.safeEmit(wv.USER_UNPUBLISHED,t,\"audio\"),Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished video track\")),this.safeEmit(wv.USER_UNPUBLISHED,t,\"video\")}:t.hasVideo?i=()=>{Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished video track\")),this.safeEmit(wv.USER_UNPUBLISHED,t,\"video\")}:t.hasAudio&&(i=()=>{Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished audio track\")),this.safeEmit(wv.USER_UNPUBLISHED,t,\"audio\")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof lF&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),rA.onGatewayStream(this._sessionId,$y.ON_REMOVE_STREAM,eA.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),i()})),ng(this,\"_handleSetStreamLocalEnable\",((e,t,i)=>{if(Oy(\"BLOCK_LOCAL_CLIENT\")&&dA(t,this.channelName))return;const n=this._users.find((e=>e.uid===t));if(!n)return void Jy.error(\"[\".concat(this._clientId,\"] can not find target user!(disable_local)\"));Jy.debug(\"[\".concat(this._clientId,\"] local \").concat(e,\" \").concat(i?\"enabled\":\"disabled\",\" with uid \").concat(t));const r=\"audio\"===e?n.hasAudio:n.hasVideo;if(\"audio\"===e){n._trust_audio_enabled_state_=!0;const e=n._audio_enabled_;if(n._audio_enabled_=i,n._audio_enabled_===e)return;{const e=n._audio_enabled_?\"enable-local-audio\":\"disable-local-audio\";Jy.debug(\"[\".concat(this._clientId,\"] user-info-updated, uid: \").concat(t,\", msg: \").concat(e)),this.safeEmit(wv.USER_INFO_UPDATED,t,e)}}else{n._trust_video_enabled_state_=!0;const e=n._video_enabled_;if(n._video_enabled_=i,n._video_enabled_===e)return;{const e=n._video_enabled_?\"enable-local-video\":\"disable-local-video\";Jy.debug(\"[\".concat(this._clientId,\"] user-info-update, uid: \").concat(t,\", msg: \").concat(e)),this.safeEmit(wv.USER_INFO_UPDATED,t,e)}}const o=\"audio\"===e?n.hasAudio:n.hasVideo;return r!==o?!r&&o?(Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t,\" published \").concat(e)),void this.safeEmit(wv.USER_PUBLISHED,n,e)):(\"video\"===e&&n._videoTrack&&n._videoTrack._destroy(),\"audio\"===e&&n._audioTrack,this._p2pChannel.muteRemote(n,e),Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t,\" unpublished \").concat(e)),void this.safeEmit(wv.USER_UNPUBLISHED,n,e)):void 0})),ng(this,\"_handleMuteStream\",((e,t,i)=>{if(Oy(\"BLOCK_LOCAL_CLIENT\")&&dA(e,this.channelName))return;Jy.debug(\"[\".concat(this._clientId,\"] receive mute message\"),e,t,i);const n=this._users.find((t=>t.uid===e));if(!n)return void Jy.warning(\"[\".concat(this._clientId,\"] can not find remote user, ignore mute event, uid: \").concat(e));const r=\"audio\"===t?n.hasAudio:n.hasVideo;if(\"audio\"===t){n._trust_audio_mute_state_=!0;const t=n._audio_muted_;if(n._audio_muted_=i,n._audio_muted_===t)return;{const t=n._audio_muted_?\"mute-audio\":\"unmute-audio\";Jy.debug(\"[\".concat(this._clientId,\"] user-info-update, uid: \").concat(e,\", msg: \").concat(t)),this.safeEmit(wv.USER_INFO_UPDATED,e,t)}}else{n._trust_video_mute_state_=!0;const t=n._video_muted_;if(n._video_muted_=i,n._video_muted_===t)return;{const t=n._video_muted_?\"mute-video\":\"unmute-video\";Jy.debug(\"[\".concat(this._clientId,\"] user-info-update, uid: \").concat(e,\", msg: \").concat(t)),this.safeEmit(wv.USER_INFO_UPDATED,e,t)}}const o=\"audio\"===t?n.hasAudio:n.hasVideo;if(r!==o){if(!r&&o){return(\"audio\"===t?n._audioSSRC:n._videoSSRC)?(Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e,\" published \").concat(t)),void this.safeEmit(wv.USER_PUBLISHED,n,t)):void Jy.warning(\"[\".concat(this._clientId,\"] remote user \").concat(e,\" receive \").concat(t,\" unmute message  before add stream message, \").concat(t,\" SSRC doesn't exist yet.\"))}\"video\"===t&&n._videoTrack&&!n._video_pre_subscribed&&n._videoTrack._destroy(),\"audio\"===t&&n._audioTrack,this._p2pChannel.muteRemote(n,t),Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e,\" unpublished \").concat(t)),this.safeEmit(wv.USER_UNPUBLISHED,n,t)}})),ng(this,\"_handleP2PLost\",(async e=>{Jy.debug(\"[\".concat(this._clientId,\"] receive p2p lost\"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():Jy.warning(\"[\".concat(this._clientId,\"] P2PLost stream not found\"),e)})),ng(this,\"_handleTokenWillExpire\",(()=>{Jy.debug(\"[\".concat(this._clientId,\"] received message onTokenPrivilegeWillExpire\")),this.safeEmit(wv.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),ng(this,\"_handleBeforeUnload\",(e=>{\"beforeunload\"===e.type&&void 0!==e.returnValue&&\"\"!==e.returnValue||(this.leave(),Jy.info(\"[\".concat(this._clientId,\"] auto leave onbeforeunload or pagehide\")))})),ng(this,\"_handleUpdateNetworkQuality\",(()=>{if(\"normal\"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(wv.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(wv.NETWORK_QUALITY,e)})),ng(this,\"_handleP2PAddAudioOrVideoStream\",((e,t,i,n)=>{const r=this._users.find((e=>e.uid===t));if(!r)return void Jy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_add_stream)\"));Jy.debug(\"[\".concat(this._clientId,\"] stream added with uid \").concat(t,\", type \").concat(e)),this.store.subscribe(r.uid,e,void 0,void 0,void 0,Date.now());const o=\"audio\"===e?r.hasAudio:r.hasVideo;\"audio\"===e?r._trust_audio_stream_added_state_=!0:r._trust_video_stream_added_state_=!0,\"audio\"===e?(r._audio_added_=!0,void 0!==i&&(r._audioSSRC=i),void 0!==n&&(r._audioMid=n)):(r._video_added_=!0,void 0!==i&&(r._videoSSRC=i),void 0!==n&&(r._videoMid=n)),(\"audio\"===e?r.hasAudio:r.hasVideo)&&!o&&(Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(r.uid,\" published \").concat(e)),this.safeEmit(wv.USER_PUBLISHED,r,e)),this._p2pChannel.hasPendingRemoteMedia(r,e)&&(Jy.debug(\"[\".concat(this._clientId,\"] resubscribe \").concat(e,\" for user \").concat(r.uid,\" after reconnect.\")),this._subscribe(r,e,!0).catch((e=>{Jy.error(\"[\".concat(this._clientId,\"] resubscribe error\"),e.toString())})))})),this._config=e,this._clientId=Zv(5,\"client-\"),this.store=new Py(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),Jy.info(\"[\".concat(this._clientId,\"] Initializing AgoraRTC client v\").concat(Cy,\" build: \").concat(Ay,\", mode: \").concat(this.mode,\", codec: \").concat(this.codec)),e.clientRoleOptions)try{bv(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){Jy.warning(\"[\".concat(this._clientId,\"] \").concat(e.toString()))}this._statsCollector=new IV(this.store),this._statsCollector.onStatsException=(e,t,i)=>{Jy.debug(\"[\".concat(this._clientId,\"] receive exception msg, code: \").concat(e,\", msg: \").concat(t,\", uid: \").concat(i)),this.safeEmit(wv.EXCEPTION,{code:e,msg:t,uid:i})},this._statsCollector.onUploadPublishDuration=(e,t,i,n)=>{const r=this._users.find((t=>t.uid===e));r&&rA.peerPublishStatus(this._sessionId,{subscribeElapse:n,audioPublishDuration:t,videoPublishDuration:i,peer:r._uintid})},this.store.useP2P=\"p2p\"===e.mode,this._gateway=new XM(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||hy,httpRetryConfig:e.httpRetryConfig||hy,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new UU,this.store.useP2P?(this._p2pChannel=new SV(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new lF(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,i,n,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];wy(\"JOIN_GATEWAY_USE_443PORT_ONLY\",o),wy(\"JOIN_GATEWAY_USE_DUAL_DOMAIN\",s);const a=this._gateway.signal.websocket;return a instanceof vw&&(a.use443PortOnly=o,a.tryDoubleDomain=s),async function(e,t,i){fI.get(e)||fI.set(e,[]),mI.get(e)||mI.set(e,t),TI.get(e)||TI.set(e,0);const n=fI.get(e),r=mI.get(e);if(!n||!r)throw new Error(\"concurrent: deferQueue or maxConcurrency is null\");if(TI.get(e)===r){const e=EI();n.push(e),await e.promise}TI.set(e,TI.get(e)+1);for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];const c=await i(...s);return TI.set(e,TI.get(e)-1),TI.get(e)===r-1&&n.length>0&&(n[0].resolve(),n.shift()),0===TI.get(e)&&(fI.set(e,[]),mI.set(e,0),TI.set(e,0)),c}(\"client.join\",Oy(\"JOIN_MAX_CONCURRENCY\"),this.join.bind(this),e,t,i,n,r)}async join(e,t,i,n,r){const o=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);const s=\"HTTPS\"===(fy||fy||(fy=(window.location.protocol.split(\":\")[0]||\"\").toUpperCase(),fy)),a=Ry()?window.isSecureContext:\"Browser Not Support\";if(!Ry()&&!s||!window.isSecureContext){const e=\"The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser\";Jy.warning(e)}\"DISCONNECTED\"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),Jy.debug(\"[\".concat(this._clientId,\"] set avoidJoinStart to \").concat(this.store.avoidJoinStart))),rA.setAppId(e);try{if(!i&&null!==i)throw new mb(tv.INVALID_PARAMS,\"Invalid token: \".concat(i,\". If you don not use token, set it to null\"));i&&av(i,\"token\",1,2047),av(e,\"appid\",1,2047),Tb(t),n&&Sb(n),r&&av(r,\"optionalInfo\",1,2047)}catch(r){throw rA.reportApiInvoke($v(),{name:gv.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Rv.TRACER}).onError(r),r}if(this._leaveMutex.isLocked){Jy.debug(\"[\".concat(this._clientId,\"] join: waiting leave operation\"));(await this._leaveMutex.lock())(),Jy.debug(\"[\".concat(this._clientId,\"] join: continue\"))}if(this._joinAndNotLeaveYet=!0,\"DISCONNECTED\"!==this.connectionState){const r=new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already in connecting/connected state\"));throw rA.reportApiInvoke($v(),{name:gv.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Rv.TRACER}).onError(r),r}this._gateway.state=\"CONNECTING\";const c=await BF({appId:e,cname:t,uid:n,stringUid:\"string\"==typeof n?n:void 0,token:i||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"));const d=(null==c?void 0:c.sid)||$v();Jy.info(\"[\".concat(this._clientId,\"] start join channel \").concat(t,\", join number: \").concat(o)),this._sessionId||(this._sessionId=d,this.store.sessionId=this._sessionId);const l=rA.reportApiInvoke(d,{name:gv.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Rv.TRACER}),u=mj(mj({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:\"string\"!=typeof n?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),\"string\"==typeof n&&(u.stringUid=n,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),\"none\"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await(async e=>{const t=function(e){const t=window.atob(\"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\\nxQiYDz3vqa6bP29adwIDAQAB\"),i=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e+=1)i[e]=t.charCodeAt(e);return i}(),i=await window.crypto.subtle.importKey(\"spki\",t,{name:\"RSA-OAEP\",hash:\"SHA-256\"},!0,[\"encrypt\"]),n=_v(e),r=await window.crypto.subtle.encrypt({name:\"RSA-OAEP\"},i,n);return function(e){let t=\"\";for(let i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return window.btoa(t)}(new Uint8Array(r))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(\"aes-128-gcm2\"===this._encryptionMode||\"aes-256-gcm2\"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=Oy(\"USE_PURE_ENCRYPTION_MASTER_KEY\")?e.encode(u.appId+this._encryptionSecret+this._encryptionSecret):e.encode(u.appId+u.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,i){const n=await window.crypto.subtle.importKey(\"raw\",t,\"PBKDF2\",!1,[\"deriveBits\",\"deriveKey\"]),r=\"aes-128-gcm2\"===e?128:256,o=await window.crypto.subtle.deriveBits({name:\"PBKDF2\",iterations:Uy,hash:\"SHA-256\",salt:i},n,r+My);return new Uint8Array(o).subarray(r/8)}(this._encryptionMode,t,Hv(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,i){const n=await window.crypto.subtle.importKey(\"raw\",t,\"PBKDF2\",!1,[\"deriveBits\",\"deriveKey\"]),r=\"aes-128-gcm2\"===e?128:256;return await window.crypto.subtle.deriveKey({name:\"PBKDF2\",iterations:Uy,hash:\"SHA-256\",salt:i},n,{name:\"AES-GCM\",length:r},!0,[\"encrypt\",\"decrypt\"])}(this._encryptionMode,t,Hv(this._encryptionSalt))}else a?Jy.warning(\"[\".concat(this._clientId,\"] encrypt datastream must be running in a secure context, fallback to plain data stream\")):Jy.warning(\"[\".concat(this._clientId,\"] current browser do not support WebCrypto ,fallback to plain data stream\")),this._encryptDataStream=!1;else this._encryptDataStream=!1,Jy.debug(\"[\".concat(this._clientId,\"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream\"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:u.stringUid});const h=this._sessionId;setTimeout((()=>{\"CONNECTING\"===this.connectionState&&h===this._sessionId&&rA.joinChannelTimeout(this._sessionId,5)}),5e3);try{var p;let n;const r=u.cloudProxyServer;if(Dn(p=[\"proxy3\",\"proxy4\",\"proxy5\"]).call(p,r)){const e=Oy(\"PROXY_SERVER_TYPE3\");Array.isArray(e)?u.proxyServer=e[0]:u.proxyServer=e}if(rA.setProxyServer(u.proxyServer),Jy.setProxyServer(u.proxyServer),this.store.requestAPStart(),c){if(Jy.debug(\"[\".concat(this._clientId,\"] get serverInfo Success from Preload Cache \").concat(u.stringUid?\", \".concat(u.stringUid,\" => \").concat(c.intUid):\"\",\" \")),u.stringUid&&!u.uid&&(u.uid=c.intUid),n={gatewayInfo:c.ap.gatewayInfo},Oy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\")&&\"auto\"===u.turnServer.mode)if(0===c.ap.proxyInfo.addresses.length)Jy.warning(\"no edge services in ap response of proxy fallback, will not set proxy in iceServers\");else{const e=(await Uw(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map((e=>({turnServerURL:e.address,tcpport:e.tcpport||sA.tcpport,udpport:e.udpport||sA.udpport,username:e.username||sA.username,password:e.password||sA.password,forceturn:!1,security:!0})));u.turnServer={mode:\"manual\",servers:e}}HF(c,u.stringUid)}else{if(u.stringUid&&!u.uid){let e;[e,n]=await Gh.all([bU(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||hy,this.store),AU(u,this._axiosCancelSource.token,this._config.httpRetryConfig||hy,!0,this.store)]),Jy.debug(\"[\".concat(this._clientId,\"] getUserAccount Success \").concat(u.stringUid,\" => \").concat(e)),u.uid=e,n.gatewayInfo.uid=e,n.gatewayInfo.res.uid=e}else n=await AU(u,this._axiosCancelSource.token,this._config.httpRetryConfig||hy,!0,this.store);if(!this._joinAndNotLeaveYet)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"))}this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(jb.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=i||e;const o=n.gatewayInfo,s=u.uid?u.uid:o.uid;this._joinInfo=mj(mj({},u),{},{cid:o.cid,uid:s,vid:o.vid,apResponse:o.res,apGatewayAddress:o.apGatewayAddress,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=s;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"));l.onSuccess(a),this._appId=e,this._channelName=u.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(NI()?\"beforeunload\":\"pagehide\",this._handleBeforeUnload),this._statsCollector.startUpdateStats()}),0);const d=u.stringUid?\"string uid: \".concat(u.stringUid,\",uid: \").concat(u.uid):\"uid: \".concat(this._uid);return Jy.info(\"[\".concat(this._clientId,\"] Joining channel success: channel: \").concat(t,\",\").concat(d)),setTimeout((()=>{Jy.startUpload()}),5e3),this.store.joinEnd(),_=this,Dn(cA).call(cA,_)||cA.push(_),\"disabled\"===this._cloudProxyServerMode&&LD().supportWebCrypto&&Oy(\"ENABLE_PRELOAD\")&&GF(this._joinInfo),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===tv.OPERATION_ABORTED?Jy.warning(\"[\".concat(this._clientId,\"] join number: \").concat(o,\", Joining channel failed, rollback\"),t):Jy.error(\"[\".concat(this._clientId,\"] join number: \").concat(o,\", Joining channel failed, rollback\"),t),t.code!==tv.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state=\"DISCONNECTED\",this._reset()),l.onError(t),t}var _}_joinGateway(){if(!this._joinInfo||!this._key)throw new mb(tv.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(\"disabled\"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!Oy(\"JOIN_WITH_FALLBACK_SIGNAL_PROXY\")))}async leave(){Jy.info(\"[\".concat(this._clientId,\"] Leaving channel\")),window.removeEventListener(NI()?\"beforeunload\":\"pagehide\",this._handleBeforeUnload),this._reset(),function(e){const t=cA.indexOf(e);-1!==t&&cA.splice(t,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if(\"DISCONNECTED\"===this.connectionState)return Jy.info(\"[\".concat(this._clientId,\"] Leaving channel repeated, success\")),void e();await this._gateway.leave(\"CONNECTED\"!==this.connectionState),Jy.info(\"[\".concat(this._clientId,\"] Leaving channel success\")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof yP))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new mb(tv.INVALID_PARAMS,\"param list is empty\");const i=e;if(\"audience\"===this._gateway.role)throw new mb(tv.INVALID_OPERATION,\"audience can not publish stream\");for(const e of i){if(!(e instanceof yP))throw new mb(tv.INVALID_PARAMS,\"parameter is not local track\");if(!e._enabled&&t)throw new mb(tv.TRACK_IS_DISABLED,\"can not publish a disabled track: \".concat(e.getTrackId()))}Jy.info(\"[\".concat(this._clientId,\"] Publishing tracks, id \").concat(i.map((e=>\"\".concat(e.getTrackId(),\" \")))));const n=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&i.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof Gk&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(i),Jy.info(\"[\".concat(this._clientId,\"] Publish success, id \").concat(i.map((e=>\"\".concat(e.getTrackId(),\" \")))))}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] publish error\"),e.toString()),e}finally{n()}}async _publishDataChannel(e){ov(e.id,\"id\",0,65535,!0),nv(e.ordered,\"ordered\"),av(e.metadata,\"metadata\",0,512),Jy.info(\"[\".concat(this._clientId,\"] Publishing datachannels, id \").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new mb(tv.INVALID_PARAMS,\"Invalid id: \".concat(e.id,\". If you want to republish the datachannel, unpublish first\"));if(!this._joinInfo||void 0===this._uid)throw new mb(tv.INVALID_OPERATION,\"Can't publish datachannel, haven't joined yet!\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"can not publish datachannel in \".concat(this.connectionState,\" state\"));if(\"auto\"===this._turnServer.mode&&Oy(\"FORCE_TURN\")&&!Oy(\"TURN_ENABLE_TCP\")&&!Oy(\"TURN_ENABLE_UDP\"))throw new mb(tv.UNEXPECTED_ERROR,\"force TURN With No TURN Configuration\");const i=function(e){return EF(e,!1)}(e),n=await this._p2pChannel.publishDataChannel([i]);if(n.length>0){if(\"number\"!=typeof i._originDataChannelId)throw Jy.error(\"[\".concat(this._clientId,\"] can not publish with mediaType datachannel, cannot get RTCDatachannel id\")),new mb(tv.CREATE_DATACHANNEL_ERROR);try{await Gh.all(n.map((e=>this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)))),await i._waitTillOpen()}catch(e){if(e.code!==tv.DISCONNECT_P2P)throw e}}return Jy.info(\"[\".concat(this._clientId,\"] Publish dataChannels success, id \").concat(i.id)),i}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] publish datachannels error\"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new mb(tv.INVALID_OPERATION,\"Can't unpublish stream, haven't joined yet!\");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof yP))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);Jy.info(\"[\".concat(this._clientId,\"] Unpublish tracks, tracks \").concat(t.map((e=>\"\".concat(e.getTrackId(),\" \"))),\" \"));const i=await this._publishMutex.lock();try{if(this._p2pChannel instanceof SV){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(rw.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),Jy.info(\"[\".concat(this._clientId,\"] Unpublish success,tracks \").concat(t.map((e=>\"\".concat(e.getTrackId())))))}}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] unpublish error\"),e.toString()),e}finally{i&&i()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),Jy.info(\"[\".concat(this._clientId,\"] Unpublish datachannels, datachannels \").concat(e.map((e=>\"\".concat(e.id,\" \"))),\" \"));const t=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublishDataChannel(e);i&&await this._gateway.unpublishDataChannel(i),Jy.info(\"[\".concat(this._clientId,\"] Unpublish dataChannel success,dataChannel \").concat(e.map((e=>\"\".concat(e.id)))))}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] unpublish dataChannel error\"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,i){if(!(e instanceof eV)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");e=t}return\"datachannel\"===t?this._subscribeDataChannel(e,i):this._subscribe(e,t)}async presubscribe(e,t){if(rv(t,\"mediaType\",[\"audio\",\"video\"]),this._p2pChannel instanceof SV)throw new mb(tv.INVALID_OPERATION,\"can't presub at p2p mode\");if(!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"can't presub when not join\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"can't presub in \".concat(this.connectionState,\" state\"));const i=t===Hb.AUDIO,n=t===Hb.VIDEO,r=await this._subscribeMutex.lock();try{const{ssrcId:o,ortc:s,rtxSsrcId:a,cname:c,uint_id:d}=await this._gateway.presubscribe(e,t,!0);if(null==o)throw new mb(tv.UNEXPECTED_RESPONSE,\"no ssrc id\");let l=this._users.find((t=>t.uid===e));l||(l=new eV(e,d||e),l._is_pre_created=!0,this._users.push(l)),c&&(l._cname=c),l._uintid||(l._uintid=d||e),i&&(l._audioSSRC=o,l._audio_pre_subscribed=!0,s&&(l._audioOrtc=s)),n&&(l._videoSSRC=o,l._video_pre_subscribed=!0,s&&(l._videoOrtc=s),null!=a&&(l._rtxSsrcId=a)),Jy.info(\"[\".concat(this._clientId,\"] presub succeed ssrc: \").concat(o)),await this._p2pChannel.subscribe(l,t,o,a,s);const u=i?l._audioTrack:l._videoTrack;if(!u)throw new mb(tv.UNEXPECTED_ERROR,\"can not find remote track in user\");return i&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),n&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),u}catch(t){throw Jy.error(\"[\".concat(this._clientId,\"] presub user \").concat(e,\" error\"),t),t}finally{r()}}async _subscribeDataChannel(e,t){var i;if(ov(t,\"channelId\",0,65535,!0),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe datachannel, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe datachannel in \".concat(this.connectionState,\" state\"));const n=this._users.find((t=>t===e));if(!n)throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", this user is not in the channel\")),new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", user is not published\")),new mb(tv.INVALID_REMOTE_USER,\"user is not published\");const r=null===(i=e._dataChannels)||void 0===i?void 0:i.find((e=>e.id===t));if(!r)throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType datachannel, remote datachannel is not published\")),new mb(tv.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();Jy.info(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\", mediaType: datachannel\"));try{const t=await this._p2pChannel.subscribeDataChannel(e,[r]);if(t&&Dn(t).call(t,r.id))try{var s;if(\"number\"!=typeof r._originDataChannelId)throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType datachannel, cannot get RTCDatachannel\")),new mb(tv.CREATE_DATACHANNEL_ERROR);const t={id:r.id,datachannelId:r._originDataChannelId,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:null!==(s=r.metadata)&&void 0!==s?s:\"\"};await this._gateway.subscribeDataChannel(e.uid,t,!0),await r._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==tv.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[r]),t;await this._p2pChannel.unsubscribeDataChannel(e,[r]),this._p2pChannel.setPendingRemoteDataChannel(e,r.id)}return Jy.info(\"[\".concat(this._clientId,\"] subscribe success user \").concat(e.uid,\", mediaType: datachannel\")),r}finally{o()}}async _p2pSubscribe(e,t,i){if(rv(t,\"mediaType\",[\"audio\",\"video\"]),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe stream, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe stream in \".concat(this.connectionState,\" state\"));const n=this._users.find((t=>t===e));if(!n){const t=new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", this user is not in the channel\")),t}if(!e.hasAudio&&!e.hasVideo){const t=new mb(tv.INVALID_REMOTE_USER,\"user is not published\");throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", user is not published\")),t}if(!i&&(\"audio\"===t&&!e.hasAudio||\"video\"===t&&!e.hasVideo)){const i=new mb(tv.REMOTE_USER_IS_NOT_PUBLISHED);throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType \").concat(t,\", remote track is not published\")),i}const r=await this._subscribeMutex.lock();Jy.info(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\", mediaType: \").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const i=\"audio\"===t?e._audioSSRC:e._videoSSRC,n=\"audio\"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof SV&&await this._p2pChannel.subscribe(e,t,i,n)}catch(e){throw e}Jy.info(\"[\".concat(this._clientId,\"] subscribe success user \").concat(e.uid,\", mediaType: \").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{Jy.warning(\"[\".concat(this._clientId,\"] auto set fallback failed\"),e)}));const i=\"audio\"===t?e._audioTrack:e._videoTrack;if(!i)throw new mb(tv.UNEXPECTED_ERROR,\"can not find remote track in user object\");return i}catch(t){throw Jy.error(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\" error\"),t),t}finally{r()}}async _subscribe(e,t,i){if(this._p2pChannel instanceof SV)return this._p2pSubscribe(e,t);if(rv(t,\"mediaType\",[\"audio\",\"video\"]),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe stream, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe stream in \".concat(this.connectionState,\" state\"));const n=this._users.find((t=>t===e));if(!n){const t=new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", this user is not in the channel\")),t}if(!e.hasAudio&&!e.hasVideo){const t=new mb(tv.INVALID_REMOTE_USER,\"user is not published\");throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", user is not published\")),t}if(!(i||(\"audio\"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&(\"video\"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const i=new mb(tv.REMOTE_USER_IS_NOT_PUBLISHED);throw Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType \").concat(t,\", remote track is not published\")),i}let r=\"audio\"===t?e._audioSSRC:e._videoSSRC,o=\"audio\"===t?e._audioOrtc:e._videoOrtc,s=\"video\"===t?e._rtxSsrcId:void 0,a={stream_type:\"audio\"===t?Hb.AUDIO:Hb.VIDEO,ssrcId:r};const c=await this._subscribeMutex.lock();Jy.info(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\", mediaType: \").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const i=\"audio\"===t?e._audioSSRC:e._videoSSRC;void 0!==i&&i!==r&&(r=i,o=\"audio\"===t?e._audioOrtc:e._videoOrtc,s=\"video\"===t?e._rtxSsrcId:void 0,a={stream_type:\"audio\"===t?Hb.AUDIO:Hb.VIDEO,ssrcId:r}),FU.markSubscribeStart(this.store.clientId,r),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,r,s,o);try{this._p2pChannel.isPreSubScribe(r)||await this._gateway.subscribe(e.uid,a,!0)}catch(i){if((null==i?void 0:i.code)!==tv.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),i;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(i){throw this._p2pChannel.reportSubscribeEvent(!1,null==i?void 0:i.code,e,t),i}Jy.info(\"[\".concat(this._clientId,\"] subscribe success user \").concat(e.uid,\", mediaType: \").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{Jy.warning(\"[\".concat(this._clientId,\"] auto set fallback failed\"),e)}));const i=\"audio\"===t?e._audioTrack:e._videoTrack;if(!i)throw new mb(tv.UNEXPECTED_ERROR,\"can not find remote track in user object\");return i}catch(t){throw Jy.error(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\" error\"),t),t}finally{c()}}async massSubscribe(e){if(cv(e,\"subscribeList\"),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe stream, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Can't subscribe stream in \".concat(this.connectionState,\" state\"));const t=Date.now(),i=new Map,n=await this._subscribeMutex.lock();Jy.info(\"[\".concat(this._clientId,\"]start massSubscribe user \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i)})).join(\"; \")));const r=(e=[...e]).map((e=>{let{user:t,mediaType:i}=e;return{user:t,mediaType:i}})),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const n=e[t],{user:o,mediaType:s}=n;if(rv(s,\"mediaType\",[\"audio\",\"video\"]),!o){const e=new mb(tv.INVALID_PARAMS,\"user property does not exist in subscribeList item\");throw Jy.error(\"[\".concat(this._clientId,\"] user property does not exist in subscribeList item\")),e}const a=this._users.find((e=>e===o));if(!a){const i=new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");Jy.error(\"[\".concat(this._clientId,\"] can not massSubscribe \").concat(o.uid,\", this user is not in the channel\")),r[t].error=i,e.splice(t,1);continue}if(\"audio\"===s&&(!o.hasAudio||void 0===o._audioSSRC)||\"video\"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const i=new mb(tv.REMOTE_USER_IS_NOT_PUBLISHED);Jy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(o.uid,\" with mediaType \").concat(s,\", remote user is not published\")),r[t].error=i,e.splice(t,1);continue}const c=Ub.Video|Ub.LwoVideo,d=i.get(o);if(d){if(\"video\"===s?d&c:d&Ub.Audio){e.splice(t,1),Jy.warning(\"[\".concat(this._clientId,\"] repeat massSubscribe user:\").concat(o.uid,\", mediaType:\").concat(s,\" twice\"));continue}i.set(o,d|(\"video\"===s?c:Ub.Audio))}else i.set(o,\"video\"===s?c:Ub.Audio)}for(let t=e.length-1;t>=0;t--){const n=e[t],{user:r,mediaType:o}=n,s=Ub.Video|Ub.LwoVideo;if(this._p2pChannel.hasRemoteMedia(r,o)){await this._p2pChannel.unmuteRemoteNoLock(r,o);const n=i.get(r);i.set(r,\"video\"===o?n^s:n^Ub.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);let a=Jn(s=Array.from(i.entries())).call(s,((e,t)=>{let[i,n]=t;if(0===n)return e;const r={stream_id:i.uid,stream_type:n};return n&Ub.Audio&&(r.audio_ssrc=i._audioSSRC),n&Ub.Video&&(r.video_ssrc=i._videoSSRC),e.push(r),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:i}=e;return{user:t,mediaType:i,ssrcId:i===Hb.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:i===Hb.VIDEO?t._rtxSsrcId:void 0}})));const i=new Map;if(a=a.filter((e=>e.video_ssrc&&!this._p2pChannel.isPreSubScribe(e.video_ssrc)||e.audio_ssrc&&!this._p2pChannel.isPreSubScribe(e.audio_ssrc)||!e.video_ssrc&&!e.audio_ssrc)),a.length>0){const e=await this._gateway.subscribeAll(a,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:n,audio_error_code:r,error_code:o}=e;(n||r||o)&&i.set(t,{video_error_code:n,audio_error_code:r,error_code:o})}))}if(Array.from(i.entries()).length>0){const e=[];Array.from(i.entries()).forEach((t=>{let[i,n]=t;const r=this.remoteUsers.find((e=>e.uid===i));if(r){let t;n.error_code||n.video_error_code&&n.audio_error_code?t=void 0:n.video_error_code?t=Hb.VIDEO:n.audio_error_code&&(t=Hb.AUDIO),e.push({user:r,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of r){const t=i.get(e.user.uid);if(t){const i=t.error_code||\"audio\"===e.mediaType&&t.audio_error_code||\"video\"===e.mediaType&&t.video_error_code;if(i){const t=uw(i);Jy.error(\"user:\".concat(e.user.uid,\" mediaType:\").concat(e.mediaType,\" has massSubscribe error \").concat(t.desc)),e.error=new mb(tv.SUBSCRIBE_FAILED,\"code \".concat(i,\": \").concat(t.desc))}}e.error||(\"video\"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(r.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),r.forEach((e=>{var i;rA.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(i=e.error)||void 0===i?void 0:i.code)||null,video:e.mediaType===Hb.VIDEO,audio:e.mediaType===Hb.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===Hb.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(e.user._videoSSRC)},!0)})),Jy.info(\"[\".concat(this._clientId,\"] massSubscribe success \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i)})).join(\"; \"))),r}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),n()}}async unsubscribe(e,t,i){if(!(e instanceof eV)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");e=t}if(t||this.store.useP2P){if(\"datachannel\"===t)return this._unsubscribeDataChannel(e,i)}else await this._unsubscribeDataChannel(e,i);if(t&&rv(t,\"mediaType\",[\"audio\",\"video\"]),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't unsubscribe stream, haven't joined yet!\");const n=this._users.find((t=>t===e));if(!n){const t=new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Jy.error(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(e.uid,\", user is not in the channel\")),t}Jy.info(\"[\".concat(this._clientId,\"] unsubscribe uid: \").concat(e.uid,\", mediaType: \").concat(t));const r=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof SV)await this._p2pChannel.unsubscribe(e,t);else{const i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),t&&\"audio\"!==t||(e._audio_pre_subscribed=!1),t&&\"video\"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&xv(this._users,e),Jy.info(\"[\".concat(this._clientId,\"] unsubscribe success uid: \").concat(e.uid,\", mediaType: \").concat(t))}}catch(t){if(t.code===tv.DISCONNECT_P2P)return void Jy.warning(\"disconnecting p2p, abort unsubscribe request.\");throw Jy.error(\"[\".concat(this._clientId,\"] unsubscribe user \").concat(e.uid,\" error\"),t.toString()),t}finally{r()}}async _unsubscribeDataChannel(e,t){if(t&&ov(t,\"id\",0,65535,!0),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't unsubscribe datachannel, haven't joined yet!\");const i=this._users.find((t=>t===e));if(!i){const t=new mb(tv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Jy.error(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(e.uid,\", user is not in the channel\")),t}let n;if(\"number\"==typeof t){const i=e._dataChannels.find((e=>e.id===t));i&&(n=[i])}else n=e._dataChannels;if(void 0===n){const i=new mb(tv.REMOTE_USER_IS_NOT_PUBLISHED);throw Jy.error(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(e.uid,\" with channelId \").concat(t,\", remote datachannel is not published\")),i}Jy.info(\"[\".concat(this._clientId,\"] unsubscribe uid: \").concat(e.uid,\", mediaType: datachannel, ids: \").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),Jy.info(\"[\".concat(this._clientId,\"] unsubscribe datachannel success uid: \").concat(e.uid,\", mediaType: datachannel, ids: \").concat(t))}catch(t){if(t.code===tv.DISCONNECT_P2P)return void Jy.warning(\"disconnecting p2p, abort unsubscribe request.\");throw Jy.error(\"[\".concat(this._clientId,\"] unsubscribe user \").concat(e.uid,\" error\"),t.toString()),t}}async massUnsubscribe(e){if(cv(e,\"unsubscribeList\"),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't unsubscribeAll stream, haven't joined yet!\");Jy.info(\"[\".concat(this._clientId,\"] start massUnsubscribe \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i,\";\")})).join())),e=[...e];const t=new Map;for(let i=e.length-1;i>=0;i--){const{user:n,mediaType:r}=e[i];if(!n){const e=new mb(tv.INVALID_PARAMS,\"user property does not exist in unsubscribeList item\");throw Jy.error(\"[\".concat(this._clientId,\"] user property does not exist in unsubscribeList item\")),e}rv(r,\"mediaType\",[\"video\",\"audio\",void 0]);const o=this._users.find((e=>e===n));if(!o){Jy.warning(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(n.uid,\", user is not in the channel\")),e.splice(i,1);continue}const s=Ub.Video|Ub.LwoVideo;if(t.has(n)){const o=t.get(n);let a;switch(r){case\"video\":a=o&s;break;case\"audio\":a=o&Ub.Audio;break;default:a=o&(Ub.Audio|s)}if(a){Jy.warning(\"[\".concat(this._clientId,\"] repeat massUnsubscribe user:\").concat(n.uid,\",mediaType:\").concat(r,\" twice.\")),e.splice(i,1);continue}r?\"audio\"===r?t.set(n,o|Ub.Audio):\"video\"===r&&t.set(n,o|s):t.set(n,o|Ub.Audio|s)}else r?\"audio\"===r?t.set(n,Ub.Audio):\"video\"===r&&t.set(n,s):t.set(n,Ub.Audio|s)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),Jy.info(\"[\".concat(this._clientId,\"] massUnsubscribe success \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i,\";\")})).join()))}catch(e){if(e.code===tv.DISCONNECT_P2P)return void Jy.warning(\"[\".concat(this._clientId,\"] disconnecting p2p, abort unsubscribe request.\"));throw Jy.error(\"[\".concat(this._clientId,\"] massUnsubscribe error\"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new iv(tv.INVALID_PARAMS);dv(e.width)||sv(e.width,\"streamParameter.width\"),dv(e.height)||sv(e.height,\"streamParameter.height\"),dv(e.framerate)||sv(e.framerate,\"streamParameter.framerate\"),dv(e.bitrate)||ov(e.bitrate,\"streamParameter.bitrate\")}(e),(!e.width&&e.height||e.width&&!e.height)&&Jy.warning(\"[\".concat(this._clientId,\"] The width and height parameters take effect only when both are set\")),Jy.info(\"[\".concat(this._clientId,\"] set low stream parameter to\"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,qb.LocalVideoLowTrack)}async enableDualStream(){if(!LD().supportDualStream)throw rA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new mb(tv.NOT_SUPPORTED,\"Your browser is not support dual stream\");if(this._isDualStreamEnabled)throw new mb(tv.INVALID_OPERATION,\"Dual stream is already enabled\");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw rA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,rA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),Jy.info(\"[\".concat(this._clientId,\"] enable dual stream\"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"Can't publish stream, haven't joined yet!\");if(this._p2pChannel.getLocalMedia(qb.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw rA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,rA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),Jy.info(\"[\".concat(this._clientId,\"] disable dual stream\"))}}async setClientRole(e,t){if(function(e){rv(e,\"role\",[\"audience\",\"host\"])}(e),t&&bv(t),\"rtc\"===this.mode||\"p2p\"===this.mode)throw Jy.warning(\"[\".concat(this._clientId,\"]\").concat(this.mode,\" mode can not use setClientRole\")),new mb(tv.INVALID_OPERATION,\"\".concat(this.mode,\" mode can not use setClientRole\"));if(t&&t.level&&\"host\"===e)throw new mb(tv.INVALID_OPERATION,\"host mode can not set audience latency level\");if(\"audience\"===e&&this._p2pChannel.hasLocalMedia())throw new mb(tv.INVALID_OPERATION,\"can not set client role to audience when publishing stream\");await this._gateway.setClientRole(e,t),this._config.role=e,Jy.info(\"[\".concat(this._clientId,\"] set client role to \").concat(e,\", level: \").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const i=t.timestamp-Date.now();return Math.abs(i)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?i:0}getNtpWallTimeInMs(){return\"visible\"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(av(e,\"proxyServer\"),!t){if(\"DISCONNECTED\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Set proxy server before join channel\");if(\"disabled\"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new mb(tv.INVALID_OPERATION,\"You have already set the proxy\")}this._proxyServer=e,rA.setProxyServer(this._proxyServer),Jy.setProxyServer(this._proxyServer),Jy.info(\"[\".concat(this._clientId,\"] Set proxy server \").concat(t?\"by initialize call\":\"\",\" success.\"))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(\"DISCONNECTED\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Set turn server before join channel\");if(\"disabled\"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new mb(tv.INVALID_OPERATION,\"You have already set the proxy\")}if(yv(e))return this._turnServer={servers:e,mode:\"original-manual\"},void Jy.info(\"[\".concat(this._clientId,\"] Set original turnserver \").concat(t?\"by initialize call\":\"\",\" success: \").concat(e.map((e=>e.urls)).join(\",\"),\".\"));e.forEach((e=>Av(e))),this._turnServer={servers:e,mode:\"manual\"},Jy.info(\"[\".concat(this._clientId,\"] Set turnserver \").concat(t?\"by initialize call\":\"\",\" success.\"))}setLicense(e){if(\"DISCONNECTED\"!==this.connectionState){throw new mb(tv.INVALID_OPERATION,\"you should set license before join channel\")}if(av(e,\"license\",32,32),!/^[A-Za-z\\d]+$/.test(e))throw new mb(tv.INVALID_PARAMS,\"license should only contains characters from A-Z a-z 0-9\");this._license=e,Jy.info(\"[\".concat(this._clientId,\"] set license success\"),e)}startProxyServer(e){if(\"DISCONNECTED\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Start proxy server before join channel\");if(this._proxyServer||\"manual\"===this._turnServer.mode||this._useLocalAccessPoint)throw new mb(tv.INVALID_OPERATION,\"You have already set the proxy\");const t=[3,4,5];let i;switch(void 0===e&&(e=3),e){case 1:case 2:throw new mb(tv.NOT_SUPPORTED,\"proxy mode 1/2 has been deprecated and not supported.\");case 3:i=\"proxy3\";break;case 4:i=\"proxy4\";break;case 5:i=\"proxy5\";break;default:throw new mb(tv.INVALID_PARAMS,\"proxy server mode must be \".concat(t.join(\"|\")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,Jy.info(\"[\".concat(this._clientId,\"] set cloud proxy server mode to\"),this._cloudProxyServerMode)}stopProxyServer(){if(\"DISCONNECTED\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"Stop proxy server after leave channel\");rA.setProxyServer(),Jy.setProxyServer(),this._cloudProxyServerMode=\"disabled\",this.store.cloudProxyServerMode=\"disabled\",Jy.info(\"[\".concat(this._clientId,\"] set cloud proxy server mode to\"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:\"auto\",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new mb(tv.INVALID_PARAMS,\"accessPoints is required.\");cv(e.accessPoints.serverList,\"accessPoints.serverList\"),av(e.accessPoints.domain,\"accessPoints.domain\");const t=(e,t)=>{ov(e,t,0,65535,!0)};let i=443;if(e.accessPoints.port&&(t(e.accessPoints.port,\"accessPoints.port\"),i=e.accessPoints.port),this._proxyServer||\"disabled\"!==this._cloudProxyServerMode)throw new mb(tv.INVALID_OPERATION,\"set local access point failed, You have already set the cloud proxy\");Oy(\"CLOSE_AFB_FOR_LOCAL_AP\")&&(wy(\"JOIN_WITH_FALLBACK_SIGNAL_PROXY\",!1),wy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\",!1));const n=/^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/,r=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>n.test(e)?\"\".concat(e.replace(/\\./g,\"-\"),\".\").concat(r):e)),s=o.map((e=>\"\".concat(e,\":\").concat(i)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,wy(\"WEBCS_DOMAIN\",s),wy(\"WEBCS_DOMAIN_BACKUP_LIST\",s),wy(\"GATEWAY_DOMAINS\",[r]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(cv(e.report.hostname,\"report.hostname\"),wy(\"EVENT_REPORT_DOMAIN\",e.report.hostname[0]),wy(\"EVENT_REPORT_BACKUP_DOMAIN\",e.report.hostname[1]||e.report.hostname[0])):(wy(\"EVENT_REPORT_DOMAIN\",o[0]),wy(\"EVENT_REPORT_BACKUP_DOMAIN\",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,\"report.port\"),a=e.report.port),wy(\"STATS_COLLECTOR_PORT\",a),e.report?wy(\"ENABLE_EVENT_REPORT\",!0):wy(\"ENABLE_EVENT_REPORT\",!1);let c=\"\";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(cv(e.log.hostname,\"log.hostname\"),c=e.log.hostname[0]):c=o[0];let d=6444;e.log&&e.log.port&&(t(e.log.port,\"log.port\"),d=e.log.port),wy(\"LOG_UPLOAD_SERVER\",\"\".concat(c,\":\").concat(d));let l=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(cv(e.cds.hostname,\"cds.hostname\"),l=e.cds.hostname):l=o;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,\"cds.port\"),u=e.cds.port),wy(\"CDS_AP\",l.map((e=>\"\".concat(e,\":\").concat(u)))),e.cds?wy(\"ENABLE_CONFIG_DISTRIBUTE\",!0):wy(\"ENABLE_CONFIG_DISTRIBUTE\",!1),Jy.info(\"set local access point v2 success\")}setLocalAccessPoints(e,t){if(cv(e,\"serverList\"),av(t,\"domain\"),this._proxyServer||\"disabled\"!==this._cloudProxyServerMode)throw new mb(tv.INVALID_OPERATION,\"set local access point failed, You have already set the cloud proxy\");const i=/^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/;e=e.map((e=>i.test(e)?\"\".concat(e.replace(/\\./g,\"-\"),\".\").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,wy(\"WEBCS_DOMAIN\",e),wy(\"WEBCS_DOMAIN_BACKUP_LIST\",e),wy(\"GATEWAY_DOMAINS\",[t]),wy(\"EVENT_REPORT_DOMAIN\",e[0]),wy(\"EVENT_REPORT_BACKUP_DOMAIN\",e[1]||e[0]),wy(\"LOG_UPLOAD_SERVER\",\"\".concat(e[0],\":6444\")),Jy.info(\"[\".concat(this._clientId,\"] set local access point success\"))}async setRemoteDefaultVideoStreamType(e){if(rv(e,\"streamType\",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] set default remote video stream type error\"),e.toString()),e}else Jy.debug(\"[\".concat(this._clientId,\"] haven't joined yet, cache remoteDefaultVideoStreamType \").concat(e))}async setRemoteVideoStreamType(e,t){rv(t,\"streamType\",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] set remote video stream type error\"),e.toString()),e}Jy.info(\"[\".concat(this._clientId,\"] set remote \").concat(e,\" video stream type to \").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){rv(t,\"fallbackType\",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] set stream fallback option\"),e.toString()),e}Jy.info(\"[\".concat(this._clientId,\"] set remote \").concat(e,\" stream fallback type to \").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,i,n){!function(e){rv(e,\"encryptionMode\",[\"aes-128-xts\",\"aes-256-xts\",\"aes-128-ecb\",\"sm4-128-ecb\",\"aes-128-gcm\",\"aes-256-gcm\",\"aes-128-gcm2\",\"aes-256-gcm2\",\"none\"])}(e),av(t,\"secret\");const r=[\"aes-128-gcm2\",\"aes-256-gcm2\"];if(Dn(r).call(r,e)){if(!i||!(i instanceof Uint8Array&&32===i.length))throw new mb(tv.INVALID_PARAMS,\"salt must be an Uint8Array and exactly equal to 32 bytes\")}else if(i)throw new mb(tv.INVALID_PARAMS,\"current encrypt mode does not need salt\");if(n){if(nv(n,\"encryptDataStream\"),!Dn(r).call(r,e))throw new mb(tv.INVALID_PARAMS,\"current encrypt mode does not support data stream\");this._encryptDataStream=!0}new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\\\"|{}\\\\[\\\\]])(?=.{8,})\").test(t)||Jy.warning(\"The secret is not strong:\\n      The secret must contain at least 1 lowercase alphabetical character,\\n      The secret must contain at least 1 uppercase alphabetical character,\\n      The secret must contain at least 1 numeric character,\\n      The secret must contain at least one special character,\\n      The secret must be eight characters or longer.\\n      \"),this._encryptionMode=e,this._encryptionSecret=t,i&&(this._encryptionSalt=Kv(i))}async renewToken(e){if(av(e,\"token\",1,2047),!this._key||!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"renewToken should not be called before user join\");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const i=await this._renewTokenMutex.lock();try{if(Oy(\"USE_NEW_TOKEN\")){Jy.debug(\"[\".concat(this._clientId,\"] start renew token with ticket from unilbs\"));const t=await LU(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||hy);Jy.debug(\"[\".concat(this._clientId,\"] get ticket from unilbs success\")),await this._gateway.renewToken({token:e,ticket:t})}else Jy.debug(\"[\".concat(this._clientId,\"] start renew token without ticket\")),await this._gateway.renewToken({token:e});Jy.debug(\"[\".concat(this._clientId,\"] renewToken success\"))}catch(e){throw this._key=t,this._joinInfo.token=t,Jy.error(\"[\".concat(this._clientId,\"] renewToken failed\"),e.toString()),e}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?Jy.warning(\"you have already enabled audio volume indicator!\"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(wv.VOLUME_INDICATOR,e)}),Oy(\"AUDIO_VOLUME_INDICATION_INTERVAL\")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(\"h264\"!==this.codec)throw new mb(tv.LIVE_STREAMING_INVALID_RAW_STREAM,\"raw streaming is only support h264\");if(!this._p2pChannel.hasLocalMedia())throw new mb(tv.LIVE_STREAMING_INVALID_RAW_STREAM,\"can not find stream to raw streaming\")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new mb(tv.LIVE_STREAMING_TASK_CONFLICT);const i=t?gb.TRANSCODE:gb.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(e,i)}setLiveTranscoding(e){return this._createLiveStreamingClient(gb.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new mb(tv.INVALID_PARAMS,\"can not find live streaming url to stop\");await Gh.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async startChannelMediaRelay(e){yV(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){yV(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"can not send data stream, not joined\");if((\"string\"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),\"string\"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let n=!1;this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Dn(t=[\"aes-128-gcm2\",\"aes-256-gcm2\"]).call(t,this._encryptionMode)&&(n=!0,e.payload=await async function(e,t,i){var n;const r=Jn(n=Array.from(i)).call(n,((e,t)=>e+t),0),o={serverTs:0,seq:Vy++,length:i.length,checkSum:r},s=new Uint8Array(oy(r,2)),a=new ArrayBuffer(xy),c=new DataView(a);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const d=16-i.length%16;i=qv(i,new Uint8Array(d));const l=await window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:e,tagLength:ky,additionalData:s},t,i);return qv(new Uint8Array(a),new Uint8Array(l))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload));if(new Blob([e.payload]).size>1024)throw new mb(tv.INVALID_PARAMS,n?\"encrypted stream message out of range.\":\"stream message out of range.\");return this._gateway.signal.request(hb.DATA_STREAM,{payload:Kv(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-TF},!i)}sendMetadata(e){if(!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"can not send metadata, not joined\");if(new Blob([e]).size>1024)throw new mb(tv.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(hb.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Kv(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(Qy),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"can not send custom report, not joined\");await rA.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){rv(t.spatialLayer,\"spatialLayer\",[0,1,2,3]),rv(t.temporalLayer,\"temporalLayer\",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Jy.error(\"[\".concat(this._clientId,\"] pick SVC layer failed\"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:i}=e;if(nv(t,\"apRTM\"),ov(i,\"rtmFlag\",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=i,Jy.debug(\"[\".concat(this._clientId,\"] setRTMconfig \").concat(JSON.stringify(e),\" in \").concat(this.connectionState,\" state\")),(\"CONNECTED\"===this.connectionState||\"RECONNECTING\"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=i,this._gateway.setRTM2Flag(i)}_reset(){if(Jy.debug(\"[\".concat(this._clientId,\"] reset client\")),this._axiosCancelSource.cancel(),this._axiosCancelSource=pI.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&WF(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode=\"none\",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),\"fallback\"===this._cloudProxyServerMode&&(this._cloudProxyServerMode=\"disabled\",this.store.cloudProxyServerMode=\"disabled\"),this._p2pChannel.reset(),this._publishMutex=new ly(\"client-publish\"),this._subscribeMutex=new ly(\"client-subscribe\"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var i;const n=e||$v();e?Jy.debug(\"[\".concat(this._clientId,\"] new Session \").concat(n)):Jy.debug(\"[\".concat(this._clientId,\"] renewSession \").concat(this._sessionId,\" => \").concat(n));const r=e?\"\":this._sessionId||\"\";this._sessionId=n,this.store.sessionId=n;const o={lts:(new Date).getTime(),mode:this.mode,buildFormat:1,stringUid:(null==t?void 0:t.stringUid)||(null===(i=this._joinInfo)||void 0===i?void 0:i.stringUid),channelProfile:\"live\"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:r,clientRole:\"audience\"===this.role?2:1};rA.sessionInit(this._sessionId,mj({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new mb(tv.INVALID_OPERATION,\"Can't publish stream, haven't joined yet!\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"can not publish stream in \".concat(this.connectionState,\" state\"));if(\"auto\"===this._turnServer.mode&&Oy(\"FORCE_TURN\")&&!Oy(\"TURN_ENABLE_TCP\")&&!Oy(\"TURN_ENABLE_UDP\"))throw new mb(tv.UNEXPECTED_ERROR,\"force TURN With No TURN Configuration\");Jy.debug(\"[\".concat(this._clientId,\"] publish high stream\"));try{const i=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof SV){const e=(await i.next()).value;if(e){try{await this._gateway.sendExtensionMessage(rw.PUBLISH,e,!0)}catch(e){throw i.throw(e),e}await i.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const n=(await i.next()).value;if(n){var t;let e;try{e=await this._gateway.publish(this._uid,n,!0)}catch(e){if(e.code!==tv.DISCONNECT_P2P)throw i.throw(e),e}await i.next((null===(t=e)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof Gk&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===tv.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new mb(tv.INVALID_OPERATION,\"Can't publish stream, haven't joined yet!\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"can not publish stream in \".concat(this.connectionState,\" state\"));Jy.debug(\"[\".concat(this._clientId,\"] publish low stream\"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),i=(await e.next()).value;if(i){var t;let n;try{n=await this._gateway.publish(this._uid,i,!0)}catch(t){if(t.code!==tv.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=n)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===tv.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId){return new mb(tv.INVALID_OPERATION,\"can not create live streaming client, please join channel first\").throw()}const e=(t={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},_F(\"LiveStreaming\").create(t));var t;return e.onLiveStreamError=(e,t)=>{rA.reportApiInvoke(this._sessionId,{name:gv.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Rv.TRACER}).onSuccess(),this.safeEmit(wv.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{rA.reportApiInvoke(this._sessionId,{name:gv.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Rv.TRACER}).onSuccess(),this.safeEmit(wv.LIVE_STREAMING_WARNING,e,t)},e.on(Ab.REQUEST_WORKER_MANAGER_LIST,((e,t,i)=>{if(!this._joinInfo)return i(new mb(tv.INVALID_OPERATION,\"can not find join info to get worker manager\"));(async function(e,t,i,n){const r=Oy(\"UAP_AP\").slice(0,Oy(\"AJAX_REQUEST_CONCURRENT\")).map((e=>t.proxyServer?\"https://\".concat(t.proxyServer,\"/ap/?url=\").concat(e+\"/api/v1?action=uap\"):\"https://\".concat(e,\"/api/v1?action=uap\")));return await hU(r,e,t,i,n)})(e,this._joinInfo,this._axiosCancelSource.token,hy).then(t).catch(i)})),e};return e===gb.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo){return new mb(tv.INVALID_OPERATION,\"can not create channel media relay client, please join channel first\").throw()}if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:i}=this.getLocalVideoStats(),n=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:i}},_F(\"ChannelMediaRelay\").create(e));n.on(\"state\",(e=>{e===Db.RELAY_STATE_FAILURE&&n&&n.dispose(),this.safeEmit(wv.CHANNEL_MEDIA_RELAY_STATE,e)})),n.on(\"event\",(e=>{this.safeEmit(wv.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient=n,this._statsCollector.onStatsChanged=(e,t)=>{var i;\"resolution\"===e&&(null===(i=this._channelMediaRelayClient)||void 0===i||i.setVideoProfile(t))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:i,deleted:n}=e,r=[];if(t){const e=[];this._users.forEach((t=>{t._dataChannels.forEach((n=>{i.every((e=>e.uid!==t._uintid||e.stream_id!==n.id))&&e.push({uid:t._uintid,stream_id:n.id,ordered:n.ordered,max_retrans_times:n.maxRetransmits,metadata:n.metadata})}))})),e.length>0&&this._handleUpdateDataChannel({added:[],deleted:e})}Array.isArray(i)&&i.length>0&&i.forEach((e=>{const{uid:i,stream_id:n,ordered:o,max_retrans_times:s,metadata:a}=e,c=this._users.find((e=>e._uintid===i));if(!c)return void Jy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_add_data_channel)\"));Jy.debug(\"[\".concat(this._clientId,\"] data_channel added with uid \").concat(i)),Dn(r).call(r,c)||r.push(c),c._uintid||(c._uintid=i);if(!(-1!==c._dataChannels.findIndex((t=>t.id===e.stream_id)))){const e={id:n,ordered:!!o,maxRetransmits:s,metadata:a},i=function(e){return EF(e,!0)}(e);c._dataChannels.push(i),Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(c.uid,\" published datachannel\")),t||this.safeEmit(wv.USER_PUBLISHED,c,\"datachannel\",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(Jy.debug(\"[\".concat(this._clientId,\"] resubscribe datachannel for user \").concat(c.uid,\" after reconnect.\")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{Jy.error(\"[\".concat(this._clientId,\"] resubscribe datachannel error\"),e.toString())})))})),t&&(this.safeEmit(wv.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:t,stream_id:i}=e,n=this._users.find((e=>e._uintid===t));if(!n)return void Jy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_delete_data_channel)\"));const r=n._dataChannels.find((t=>t.id===e.stream_id));r&&(Jy.debug(\"[\".concat(this._clientId,\"] data_stream delete with uid \").concat(t)),this._p2pChannel.unsubscribeDataChannel(n,[r]).then((e=>{if(n._dataChannels=n._dataChannels.filter((e=>e!==r)),e)return this._gateway.unsubscribeDataChannel(e,n.uid)})),Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t,\" unpublished datachannel ,id:\").concat(r.id)),this.safeEmit(wv.USER_UNPUBLISHED,n,\"datachannel\",r._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){Jy.debug(\"[\".concat(this._clientId,\"] datachannel removed with uid \").concat(e.uid));const i=()=>{Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished datachannel\")),t._dataChannels.forEach((e=>{this.safeEmit(wv.USER_UNPUBLISHED,t,\"datachannel\",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),i()}}else Jy.warning(\"[\".concat(this._clientId,\"] can not find target user!(on_remove_datachannel)\"))}_handleGatewayEvents(){this._gateway.on(kb.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(kb.CONNECTION_STATE_CHANGE,((e,t,i)=>{var n;if(i===vv.FALLBACK)return;const r=()=>{this.safeEmit(wv.CONNECTION_STATE_CHANGE,e,t,i)};if(rA.reportApiInvoke(this._sessionId||(null===(n=this._gateway.joinInfo)||void 0===n?void 0:n.sid)||null,{name:gv.CONNECTION_STATE_CHANGE,options:[e,t,i],tag:Rv.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:i})),Jy.info(\"[\".concat(this._clientId,\"] connection state change: \").concat(t,\" -> \").concat(e)),\"DISCONNECTED\"===e)return this._reset(),void r();if(\"RECONNECTING\"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(\"CONNECTED\"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{Jy.warning(\"[\".concat(this._clientId,\"] auto set stream fallback option failed\"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{Jy.warning(\"[\".concat(this._clientId,\"] auto set remote stream type failed\"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{Jy.debug(\"[\".concat(this._clientId,\"] setRemoteDefaultVideoStreamType after gateway connected\"))})).catch((e=>{Jy.error(\"[\".concat(this._clientId,\"] setRemoteDefaultVideoStreamType after gateway failed, \").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{if(\"CONNECTED\"!==this.connectionState)return;this._userOfflineTimeout=void 0;this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{Jy.debug(\"[\".concat(this._clientId,\"] user offline timeout, emit user offline \").concat(e.uid)),this._handleUserOffline({uid:e.uid})}))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{\"CONNECTED\"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch audio unmute event \").concat(e.uid)),this._handleMuteStream(e.uid,Hb.AUDIO,!1)),e._trust_video_mute_state_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch video unmute event \").concat(e.uid)),this._handleMuteStream(e.uid,Hb.VIDEO,!1)),e._trust_audio_enabled_state_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch enable local audio \").concat(e.uid)),this._handleSetStreamLocalEnable(\"audio\",e.uid,!0)),e._trust_video_enabled_state_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch enable local video \").concat(e.uid)),this._handleSetStreamLocalEnable(\"video\",e.uid,!0)),e._trust_video_stream_added_state_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch reset video stream added \").concat(e.uid)),this._handleResetAddStream(e,\"video\")),e._trust_audio_stream_added_state_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch reset audio stream added \").concat(e.uid)),this._handleResetAddStream(e,\"audio\")),e._video_added_||e._audio_added_||(Jy.debug(\"[\".concat(this._clientId,\"] auto dispatch stream remove \").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}r()})),this._gateway.on(kb.REQUEST_NEW_GATEWAY_LIST,(async(e,t)=>{if(!this._joinInfo)return t(new mb(tv.UNEXPECTED_ERROR,\"can not recover, no join info\"));try{let t;const i=await BF(mj(mj({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));i?(t=i.ap,HF(i),this._joinInfo.preload=!0):(t=await yU(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||hy,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const n=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[i,r]=t.split(\":\");this._joinInfo&&this._joinInfo.proxyServer?n.push({proxy:this._joinInfo.proxyServer,host:i,port:r}):n.push({host:i,port:r})})),e(n)}catch(e){t(e)}})),this._gateway.on(kb.NETWORK_QUALITY,(e=>{\"normal\"===this._networkQualitySensitivity&&this.safeEmit(wv.NETWORK_QUALITY,e)})),this._gateway.on(kb.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(wv.STREAM_TYPE_CHANGED,e,t);rA.reportApiInvoke(this._sessionId,{name:gv.STREAM_TYPE_CHANGE,options:[e,t],tag:Rv.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(kb.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(kb.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,i)=>{try{let i=await this._p2pChannel.getEstablishParams();Oy(\"ENABLE_PREALLOC_PC\")&&i||(i=await this._p2pChannel.startP2PConnection(e)),t(i)}catch(e){i(e)}})),this._gateway.on(kb.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const i=bM(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(i)})),this._gateway.on(kb.PRE_CONNECT_PC,(async e=>{const{candidates:t,fingerprint:i}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var n;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:e,cid:r}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:\"\".concat(r,\"_\").concat(e),icePwd:\"\".concat(r,\"_\").concat(e)},dtlsParameters:{fingerprints:[{hashFunction:\"sha-256\",fingerprint:null!==(n=Oy(\"FINGERPRINT\"))&&void 0!==n?n:i}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:\"active\",cname:\"o/i14u9pJrxRKAsu\",preallocation:!0})}}))}_handleGatewaySignalEvents(){this._gateway.signal.on(_b.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(_b.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(_b.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream(\"audio\",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(_b.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream(\"video\",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(_b.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(_b.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)})),this._gateway.signal.on(_b.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(_b.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(_b.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,Hb.AUDIO,!0))),this._gateway.signal.on(_b.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,Hb.AUDIO,!1))),this._gateway.signal.on(_b.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,Hb.VIDEO,!0))),this._gateway.signal.on(_b.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,Hb.VIDEO,!1))),this._gateway.signal.on(_b.RECEIVE_METADATA,(e=>{const t=Hv(e.metadata);this.safeEmit(wv.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(_b.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let i=Hv(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Dn(t=[\"aes-128-gcm2\",\"aes-256-gcm2\"]).call(t,this._encryptionMode)){if(e.payload.length<xy)throw new mb(tv.UNEXPECTED_RESPONSE,\"payload length \".concat(e.payload.length,\" is less than header length \").concat(xy));const t=await async function(e,t,i){const n=i.subarray(0,xy),r=n.slice(8,xy),o=(r[0]<<8)+r[1],s=(n[6]<<8)+n[7],a=await window.crypto.subtle.decrypt({name:\"AES-GCM\",iv:e,tagLength:ky,additionalData:new Uint8Array(oy(o,2))},t,i.subarray(xy));return new Uint8Array(a).subarray(0,s)}(this._encryptDataStreamIv,this._encryptDataStreamKey,i);i=t}let n=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),i=this.remoteUsers.find((t=>t.uid===e.uid)),r=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==i?void 0:i._audioSSRC)));n=null==r?void 0:r.jitterBufferMs}null==n&&(n=0),vF(mj(mj({},e),{},{payload:i}),n,{id:this._clientId,onStreamMessage:\"function\"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(_b.ON_CRYPT_ERROR,(()=>{Wv((()=>{Jy.warning(\"[\".concat(this._clientId,\"] on crypt error\")),this.safeEmit(wv.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(_b.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(_b.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{Jy.warning(\"[\".concat(this._clientId,\"] received message onTokenPrivilegeDidExpire, please get new token and join again\")),this._gateway.leave(!0,vv.TOKEN_EXPIRE),this.safeEmit(wv.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(_b.ON_STREAM_FALLBACK_UPDATE,(e=>{Jy.debug(\"[\".concat(this._clientId,\"] stream fallback peerId: \").concat(e.stream_id,\", attr: \").concat(e.stream_type)),this.safeEmit(wv.STREAM_FALLBACK,e.stream_id,1===e.stream_type?\"fallback\":\"recover\")})),this._gateway.signal.on(_b.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),Jy.info(\"[\".concat(this._clientId,\"] on publish stream, \").concat(JSON.stringify(e))))})),this._gateway.signal.on(_b.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable(\"video\",e.uid,!0)})),this._gateway.signal.on(_b.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable(\"video\",e.uid,!1)})),this._gateway.signal.on(ub.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case hb.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var i,n;const r=e.some((e=>{let{stream_type:t}=e;return t===Lb.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==Lb.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t===Lb.Screen||t===Lb.ScreenLow}));\"offer\"===t.state&&rA.publish(this._joinInfo.sid,{eventElapse:FU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:tv.TIMEOUT,audio:r,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:r?null===(i=e.find((e=>{let{stream_type:t}=e;return t===Lb.Audio})))||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId.toString():void 0,videoName:o?null===(n=e.find((e=>{let{stream_type:t}=e;return t!==Lb.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0})}break}case hb.SUBSCRIBE:t&&rA.subscribe(this._joinInfo.sid,{succ:!1,ec:tv.TIMEOUT,audio:t.stream_type===Hb.AUDIO,video:t.stream_type===Hb.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:FU.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}})),this._gateway.signal.on(_b.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(_b.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;Oy(\"BLOCK_LOCAL_CLIENT\")&&(e.users=e.users.filter((e=>!dA(e.string_id||e.stream_id,this.channelName))));const t=[],i=[];for(const n of e.users){let e=this._users.find((e=>e._uintid===n.stream_id));e?e._trust_in_room_=!0:(e=new eV(n.string_id||n.stream_id,n.stream_id),this._users.push(e),0===this.getListeners(wv.PUBLISHED_USER_LIST).length&&(Jy.debug(\"[\".concat(this._clientId,\"] user online\"),n.stream_id),this.safeEmit(wv.USER_JOINED,e)));const r=Ub.Audio&n.stream_type,o=(Ub.Video|Ub.LwoVideo)&n.stream_type,s=0!=(65280&n.stream_type),a=r&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=n.video_ssrc,e._rtxSsrcId=n.video_rtx),r&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=n.audio_ssrc),r&&!a&&0===this.getListeners(wv.PUBLISHED_USER_LIST).length&&(Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e.uid,\" published audio\")),this.safeEmit(wv.USER_PUBLISHED,e,\"audio\")),o&&!c&&0===this.getListeners(wv.PUBLISHED_USER_LIST).length&&(Jy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e.uid,\" published video\")),this.safeEmit(wv.USER_PUBLISHED,e,\"video\")),(r&&!a||o&&!c||s)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,\"video\")&&i.push({user:e,mediaType:\"video\"}),r&&this._p2pChannel.hasPendingRemoteMedia(e,\"audio\")&&i.push({user:e,mediaType:\"audio\"})}i.length>0&&(Jy.debug(\"[\".concat(this._clientId,\"] RE massSubscribe after reconnect \").concat(i.map((e=>\"user: \".concat(e.user.uid,\", mediaType: \").concat(e.mediaType))).join(\"; \"),\" \")),this.massSubscribe(i).catch((e=>{Jy.error(\"[\".concat(this._clientId,\"] mass resubscribe error\"),e.toString())}))),this.getListeners(wv.PUBLISHED_USER_LIST).length>0?Oy(\"ENABLE_DATASTREAM_2\")?this._pendingPublishedUsers=t:(Jy.info(\"[\".concat(this._clientId,\"] client emit user-list event, users: \").concat(t.map((e=>e.uid)).join(\", \"))),this.safeEmit(wv.PUBLISHED_USER_LIST,t)):Jy.info(\"[\".concat(this._clientId,\"] client not emit user-list event case there is no user-list listener, users: \").concat(t.map((e=>e.uid)).join(\", \")))})),this._gateway.signal.on(_b.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof lF&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Dn(t=Object.keys(Ly)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(_b.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(rw.PUBLISH,((e,t,i)=>{const{uid:n}=e;e.forEach((e=>{const{kind:r,ssrcs:o,mid:s,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(r,n,o[0].ssrcId,s);const c=this._users.find((e=>e.uid===n));return c&&this._p2pChannel instanceof SV?this._p2pChannel.mockSubscribe(c,r,o[0].ssrcId,s).then((()=>{t()})).catch(i):t(),this._handleMuteStream(n,r,!!a)}))})),this._gateway.signal.on(rw.CALL,(async(e,t,i)=>{if(this._p2pChannel instanceof SV)try{var n;t(await this._p2pChannel.startP2P({turnServer:null===(n=this._joinInfo)||void 0===n?void 0:n.turnServer},e))}catch(e){i(e)}})),this._gateway.signal.on(ub.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof SV&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(rw.UNPUBLISH,(async(e,t,i)=>{if(this._p2pChannel instanceof SV){const{unpubMsg:n,uid:r}=e,o=this._users.find((e=>e.uid===r));if(!o)return Jy.warning(\"[\".concat(this._clientId,\"] can not find remote user, ignore mute event, uid: \").concat(r)),void t();try{n.forEach((async e=>{let{stream_type:t}=e;const i=t===Lb.Audio?Hb.AUDIO:Hb.VIDEO;await this._p2pChannel.unsubscribe(o,i),this._handleMuteStream(r,i,!0)})),t()}catch(e){i(e)}}})),this._gateway.signal.on(rw.CONTROL,(async(e,t)=>{const{action:i}=e;switch(i){case sw.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,Hb.VIDEO,!0);break;case sw.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,Hb.AUDIO,!0);break;case sw.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream(\"video\",t),this._handleMuteStream(t,Hb.VIDEO,!1);break;case sw.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream(\"audio\",t),this._handleMuteStream(t,Hb.AUDIO,!1)}})),this._gateway.signal.on(rw.RESTART_ICE,(async(e,t,i)=>{if(this._p2pChannel instanceof SV)try{const{direction:i,iceParameter:n}=e;if(i!==Eb.SEND_ONLY||n){t(await this._p2pChannel.restartICE(i,n))}else this._p2pChannel.handleDisconnect(i),t()}catch(e){i(e)}})),this._gateway.signal.on(rw.CANDIDATE,(e=>{if(this._p2pChannel instanceof SV){const{candidate:t,direction:i}=e;this._p2pChannel.addRemoteCandidate(t,i)}})),this._p2pChannel.on(Jb.RequestP2PRestartICE,(async(e,t,i)=>{try{const{direction:i}=e;t(await this._gateway.sendExtensionMessage(rw.RESTART_ICE,e,i===Eb.SEND_ONLY))}catch(e){i(e)}})),this._p2pChannel.on(Jb.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(rw.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(Jb.RequestP2PMuteLocal,(async(e,t,i)=>{try{await this._gateway.sendExtensionMessage(rw.CONTROL,e,!0),t()}catch(e){i(e)}})),this._p2pChannel.on(Jb.RequestP2PUnmuteRemote,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===tv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Jb.RequestP2PMuteRemote,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===tv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Jb.StateChange,((e,t)=>{t===zb.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(Jb.RequestMuteLocal,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===tv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Jb.RequestUnmuteLocal,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===tv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Jb.RequestRePublish,((e,t,i)=>{this.publish(e,!1).then(t).catch(i)})),this._p2pChannel.on(Jb.RequestRePublishDataChannel,((e,t,i)=>{Gh.all(e.map((async e=>{const t=await this._p2pChannel.publishDataChannel([e]);try{t.forEach((e=>{this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)}))}catch(e){if(e.code!==tv.DISCONNECT_P2P)throw e}}))).then(t).catch(i)})),this._p2pChannel.on(Jb.RequestReSubscribe,(async(e,t,i)=>{try{for(const{user:t,kind:i}of e)i===Hb.VIDEO?await this.subscribe(t,\"video\"):await this.subscribe(t,\"audio\");t()}catch(e){i(e)}})),this._p2pChannel.on(Jb.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(Jb.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(Jb.MediaReconnectStart,(e=>{this.safeEmit(wv.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(Jb.MediaReconnectEnd,(e=>{this.safeEmit(wv.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(Jb.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(Jb.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof SV)return;const t=await this._p2pChannel.restartICE(e),i=await t.next();if(i.done)return;const n=i.value;let r;try{r=await this._gateway.restartICE({iceParameters:n})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(r);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(Jb.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(Jb.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:r,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:i,rtpCapabilities:n}),s=bM(r,o);await this._p2pChannel.connect(s),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(Jb.RequestUnpublishForReconnectPC,(async(e,t,i)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):i()})),this._p2pChannel.on(Jb.P2PLost,(()=>{this.safeEmit(wv.P2P_LOST,this.store.uid)})),this._p2pChannel.on(Jb.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(Jb.ConnectionTypeChange,(e=>{this.safeEmit(wv.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(Jb.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(Jb.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||\"CONNECTED\"!==this.connectionState)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] can not create content inspect, please join channel first\"));if(this._inspect)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Inspect content service already in connecting/connected state\"));try{const i=(t={config:e},_F(\"ContentInspect\").create(t));this._inspect=i,this.handleVideoInspectEvents(i);const{appId:n,cname:r,sid:o,token:s,uid:a,cid:c,vid:d}=this._joinInfo;await i.init({appId:n,areaCode:\"\",cname:r,sid:o,token:s,uid:a,cid:c,vid:d?Number(d):0},hy)}catch(e){throw Array.isArray(e)?e[0]:e}var t}handleVideoInspectEvents(e){e.on(Zb.CONNECTION_STATE_CHANGE,((t,i)=>{if(this.safeEmit(wv.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,i),i===Xb.CONNECTED){if(\"CONNECTED\"!==this.connectionState)return void this.safeEmit(wv.CONTENT_INSPECT_ERROR,new mb(tv.OPERATION_ABORTED,\"Content inspect was cancelled because it left the channel\"));e.inspectImage()}})),e.on(Zb.INSPECT_RESULT,((e,t)=>{var i;if((null==t?void 0:t.code)===tv.INVALID_OPERATION&&\"DISCONNECTED\"===this.connectionState)return Jy.debug(\"Stop inspect content because that has left channel\"),null==this||null===(i=this._inspect)||void 0===i||i.close(),void(this._inspect=void 0);this.safeEmit(wv.CONTENT_INSPECT_RESULT,e,t)})),e.on(Zb.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>\"video\"===e.trackMediaType))[0])}))}async disableContentInspect(){if(!this._inspect)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] inspectVideoContent not started\"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(nv(e,\"enabled\"),e){if(!t)throw new mb(tv.INVALID_PARAMS,\"config is required\");if(bB(t),!this._joinInfo)throw new mb(tv.INVALID_OPERATION,\"can not create image moderation, please join channel first\");try{if(this._moderation)this._moderation.updateConfig(t);else{const e=(i={config:t},_F(\"ImageModeration\").create(i));this._moderation=e,this.handleImageModerationEvents(e);const{appId:n,cname:r,sid:o,token:s,uid:a,cid:c,vid:d}=this._joinInfo;await e.init({appId:n,areaCode:\"\",cname:r,sid:o,token:s,uid:a,cid:c,vid:d?Number(d):0},hy)}}catch(e){throw Array.isArray(e)?e[0]:e}}else{var i;if(!this._moderation)throw new mb(tv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] image moderation not started\"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}handleImageModerationEvents(e){e.on(iw.CONNECTION_STATE_CHANGE,((t,i)=>{if(this.safeEmit(wv.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,i),t===tw.CONNECTED){if(\"CONNECTED\"!==this.connectionState)throw this.setImageModeration(!1),new mb(tv.OPERATION_ABORTED,\"Image moderation was cancelled because it left the channel\");e.inspectImage()}})),e.on(iw.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>\"video\"===e.trackMediaType))[0])}))}setP2PTransport(e){if(function(e){rv(e,\"transport\",[\"default\",\"auto\",\"relay\",\"sd-rtn\"])}(e),\"p2p\"!==this.mode)throw new mb(tv.INVALID_OPERATION,\"only p2p mode can set p2pTransport\");this.store.p2pTransport=e,Jy.info(\"[\".concat(this._clientId,\"] set client p2pTransport to \").concat(e))}getJoinChannelServiceRecords(){return Jy.debug(\"getJoinChannelServiceRecords\"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){nv(e,\"enabled\"),wy(\"ENABLE_PUBLISH_AUDIO_FILTER\",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case\"audio\":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case\"video\":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},ib(Ej.prototype,\"leave\",[OB],Object.getOwnPropertyDescriptor(Ej.prototype,\"leave\"),Ej.prototype),ib(Ej.prototype,\"publish\",[NB],Object.getOwnPropertyDescriptor(Ej.prototype,\"publish\"),Ej.prototype),ib(Ej.prototype,\"unpublish\",[DB],Object.getOwnPropertyDescriptor(Ej.prototype,\"unpublish\"),Ej.prototype),ib(Ej.prototype,\"subscribe\",[PB],Object.getOwnPropertyDescriptor(Ej.prototype,\"subscribe\"),Ej.prototype),ib(Ej.prototype,\"presubscribe\",[LB],Object.getOwnPropertyDescriptor(Ej.prototype,\"presubscribe\"),Ej.prototype),ib(Ej.prototype,\"massSubscribe\",[kB],Object.getOwnPropertyDescriptor(Ej.prototype,\"massSubscribe\"),Ej.prototype),ib(Ej.prototype,\"unsubscribe\",[MB],Object.getOwnPropertyDescriptor(Ej.prototype,\"unsubscribe\"),Ej.prototype),ib(Ej.prototype,\"massUnsubscribe\",[UB],Object.getOwnPropertyDescriptor(Ej.prototype,\"massUnsubscribe\"),Ej.prototype),ib(Ej.prototype,\"setLowStreamParameter\",[xB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setLowStreamParameter\"),Ej.prototype),ib(Ej.prototype,\"enableDualStream\",[VB],Object.getOwnPropertyDescriptor(Ej.prototype,\"enableDualStream\"),Ej.prototype),ib(Ej.prototype,\"disableDualStream\",[FB],Object.getOwnPropertyDescriptor(Ej.prototype,\"disableDualStream\"),Ej.prototype),ib(Ej.prototype,\"setClientRole\",[BB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setClientRole\"),Ej.prototype),ib(Ej.prototype,\"setProxyServer\",[jB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setProxyServer\"),Ej.prototype),ib(Ej.prototype,\"setTurnServer\",[GB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setTurnServer\"),Ej.prototype),ib(Ej.prototype,\"setLicense\",[WB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setLicense\"),Ej.prototype),ib(Ej.prototype,\"startProxyServer\",[HB],Object.getOwnPropertyDescriptor(Ej.prototype,\"startProxyServer\"),Ej.prototype),ib(Ej.prototype,\"stopProxyServer\",[KB],Object.getOwnPropertyDescriptor(Ej.prototype,\"stopProxyServer\"),Ej.prototype),ib(Ej.prototype,\"setLocalAccessPointsV2\",[YB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setLocalAccessPointsV2\"),Ej.prototype),ib(Ej.prototype,\"setLocalAccessPoints\",[qB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setLocalAccessPoints\"),Ej.prototype),ib(Ej.prototype,\"setRemoteDefaultVideoStreamType\",[zB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setRemoteDefaultVideoStreamType\"),Ej.prototype),ib(Ej.prototype,\"setRemoteVideoStreamType\",[JB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setRemoteVideoStreamType\"),Ej.prototype),ib(Ej.prototype,\"setStreamFallbackOption\",[XB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setStreamFallbackOption\"),Ej.prototype),ib(Ej.prototype,\"setEncryptionConfig\",[QB],Object.getOwnPropertyDescriptor(Ej.prototype,\"setEncryptionConfig\"),Ej.prototype),ib(Ej.prototype,\"renewToken\",[ZB],Object.getOwnPropertyDescriptor(Ej.prototype,\"renewToken\"),Ej.prototype),ib(Ej.prototype,\"enableAudioVolumeIndicator\",[$B],Object.getOwnPropertyDescriptor(Ej.prototype,\"enableAudioVolumeIndicator\"),Ej.prototype),ib(Ej.prototype,\"startLiveStreaming\",[ej],Object.getOwnPropertyDescriptor(Ej.prototype,\"startLiveStreaming\"),Ej.prototype),ib(Ej.prototype,\"setLiveTranscoding\",[tj],Object.getOwnPropertyDescriptor(Ej.prototype,\"setLiveTranscoding\"),Ej.prototype),ib(Ej.prototype,\"stopLiveStreaming\",[ij],Object.getOwnPropertyDescriptor(Ej.prototype,\"stopLiveStreaming\"),Ej.prototype),ib(Ej.prototype,\"startChannelMediaRelay\",[nj],Object.getOwnPropertyDescriptor(Ej.prototype,\"startChannelMediaRelay\"),Ej.prototype),ib(Ej.prototype,\"updateChannelMediaRelay\",[rj],Object.getOwnPropertyDescriptor(Ej.prototype,\"updateChannelMediaRelay\"),Ej.prototype),ib(Ej.prototype,\"stopChannelMediaRelay\",[oj],Object.getOwnPropertyDescriptor(Ej.prototype,\"stopChannelMediaRelay\"),Ej.prototype),ib(Ej.prototype,\"sendCustomReportMessage\",[sj],Object.getOwnPropertyDescriptor(Ej.prototype,\"sendCustomReportMessage\"),Ej.prototype),ib(Ej.prototype,\"pickSVCLayer\",[aj],Object.getOwnPropertyDescriptor(Ej.prototype,\"pickSVCLayer\"),Ej.prototype),ib(Ej.prototype,\"setRTMConfig\",[cj],Object.getOwnPropertyDescriptor(Ej.prototype,\"setRTMConfig\"),Ej.prototype),ib(Ej.prototype,\"enableContentInspect\",[dj],Object.getOwnPropertyDescriptor(Ej.prototype,\"enableContentInspect\"),Ej.prototype),ib(Ej.prototype,\"disableContentInspect\",[lj],Object.getOwnPropertyDescriptor(Ej.prototype,\"disableContentInspect\"),Ej.prototype),ib(Ej.prototype,\"setImageModeration\",[uj],Object.getOwnPropertyDescriptor(Ej.prototype,\"setImageModeration\"),Ej.prototype),ib(Ej.prototype,\"setP2PTransport\",[hj],Object.getOwnPropertyDescriptor(Ej.prototype,\"setP2PTransport\"),Ej.prototype),ib(Ej.prototype,\"getJoinChannelServiceRecords\",[pj],Object.getOwnPropertyDescriptor(Ej.prototype,\"getJoinChannelServiceRecords\"),Ej.prototype),ib(Ej.prototype,\"setPublishAudioFilterEnabled\",[_j],Object.getOwnPropertyDescriptor(Ej.prototype,\"setPublishAudioFilterEnabled\"),Ej.prototype),Ej);class Sj{constructor(e,t){ng(this,\"id\",0),ng(this,\"element\",void 0),ng(this,\"peerPair\",void 0),ng(this,\"context\",void 0),ng(this,\"audioPlayerElement\",void 0),ng(this,\"audioTrack\",void 0),Sj.count+=1,this.id=Sj.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement(\"audio\");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const i=\"offer\"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(i),\"complete\"===e.iceGatheringState?e.localDescription:new Gh((t=>{e.onicegatheringstatechange=()=>{\"complete\"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const i=await e(this.peerPair[0],\"offer\");await t(this.peerPair[1],i);const n=await e(this.peerPair[1],\"answer\");await t(this.peerPair[0],n)}catch(e){throw new mb(tv.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination();this.context.createMediaElementSource(e).connect(t)}catch(e){throw new mb(tv.LOCAL_AEC_ERROR,e.toString()).print()}if(!t){throw new mb(tv.LOCAL_AEC_ERROR,\"no dest node when local aec\").print()}const i=t.stream.getAudioTracks()[0];return this.audioTrack=i,i}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){Jy.debug(\"close echo cancellation unit, id is\",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}var gj,Rj;ng(Sj,\"count\",0);const Cj=window.AudioContext||window.webkitAudioContext;const Ij=new(gj=nA({report:rA}),ib((Rj=class{constructor(){ng(this,\"units\",[]),ng(this,\"context\",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return Jy.debug(\"the system does not need to process local aec\"),-1;this.context||(this.context=new Cj);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new Sj(e,this.context),this.units.push(t)),t.startEchoCancellation(),Jy.debug(\"start processing local audio echo cancellation, id is\",t.id),t.id}_doesEnvironmentNeedAEC(){return vI().name!==gI.SAFARI}}).prototype,\"processExternalMediaAEC\",[gj],Object.getOwnPropertyDescriptor(Rj.prototype,\"processExternalMediaAEC\"),Rj.prototype),Rj);function vj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yj(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vj(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vj(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Aj=window||document;function bj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Aj)return;const i=QK._cspEventHandlerPointer;if(i&&t)return void console.error(i,t);const n=e=>{if(!(e&&e.blockedURI&&(QK.onSecurityPolicyViolation||QK.getListeners(ew.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;Oy(\"CSP_DETECTED_HOSTNAME_LIST\").some((e=>Dn(t).call(t,e)))&&(QK.onSecurityPolicyViolation&&\"function\"==typeof QK.onSecurityPolicyViolation&&QK.onSecurityPolicyViolation(e),QK.getListeners(ew.SECURITY_POLICY_VIOLATION).length>0&&QK.safeEmit(ew.SECURITY_POLICY_VIOLATION,e))};i&&Aj.removeEventListener(\"securitypolicyviolation\",i),(t||e&&\"function\"==typeof e||QK.getListeners(ew.SECURITY_POLICY_VIOLATION).length>0)&&Aj.addEventListener(\"securitypolicyviolation\",n),QK._cspEventHandlerPointer=n}var wj=l,Oj=VR,Nj=RegExp.prototype,Dj=function(e){return e===Nj||wj(Nj,e)?Oj(e):e.flags},Pj=i(Dj);function Lj(e){let t=e.length;for(;--t>=0;)e[t]=0}const kj=256,Mj=286,Uj=30,xj=15,Vj=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Fj=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Bj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jj=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gj=new Array(576);Lj(Gj);const Wj=new Array(60);Lj(Wj);const Hj=new Array(512);Lj(Hj);const Kj=new Array(256);Lj(Kj);const Yj=new Array(29);Lj(Yj);const qj=new Array(Uj);function zj(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let Jj,Xj,Qj;function Zj(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Lj(qj);const $j=e=>e<256?Hj[e]:Hj[256+(e>>>7)],eG=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},tG=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,eG(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},iG=(e,t,i)=>{tG(e,i[2*t],i[2*t+1])},nG=(e,t)=>{let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},rG=(e,t,i)=>{const n=new Array(16);let r,o,s=0;for(r=1;r<=xj;r++)s=s+i[r-1]<<1,n[r]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=nG(n[t]++,t))}},oG=e=>{let t;for(t=0;t<Mj;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Uj;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},sG=e=>{e.bi_valid>8?eG(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},aG=(e,t,i,n)=>{const r=2*t,o=2*i;return e[r]<e[o]||e[r]===e[o]&&n[t]<=n[i]},cG=(e,t,i)=>{const n=e.heap[i];let r=i<<1;for(;r<=e.heap_len&&(r<e.heap_len&&aG(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!aG(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n},dG=(e,t,i)=>{let n,r,o,s,a=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+a++],n+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===n?iG(e,r,t):(o=Kj[r],iG(e,o+kj+1,t),s=Vj[o],0!==s&&(r-=Yj[o],tG(e,r,s)),n--,o=$j(n),iG(e,o,i),s=Fj[o],0!==s&&(n-=qj[o],tG(e,n,s)))}while(a<e.sym_next);iG(e,256,t)},lG=(e,t)=>{const i=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,d=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==i[2*s]?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):i[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,i[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=n[2*c+1]);for(t.max_code=d,s=e.heap_len>>1;s>=1;s--)cG(e,i,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],cG(e,i,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,i[2*c]=i[2*s]+i[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,i[2*s+1]=i[2*a+1]=c,e.heap[1]=c++,cG(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const i=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,l,u,h,p,_,E=0;for(h=0;h<=xj;h++)e.bl_count[h]=0;for(i[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)l=e.heap[d],h=i[2*i[2*l+1]+1]+1,h>c&&(h=c,E++),i[2*l+1]=h,l>n||(e.bl_count[h]++,p=0,l>=a&&(p=s[l-a]),_=i[2*l],e.opt_len+=_*(h+p),o&&(e.static_len+=_*(r[2*l+1]+p)));if(0!==E){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,E-=2}while(E>0);for(h=c;0!==h;h--)for(l=e.bl_count[h];0!==l;)u=e.heap[--d],u>n||(i[2*u+1]!==h&&(e.opt_len+=(h-i[2*u+1])*i[2*u],i[2*u+1]=h),l--)}})(e,t),rG(i,d,e.bl_count)},uG=(e,t,i)=>{let n,r,o=-1,s=t[1],a=0,c=7,d=4;for(0===s&&(c=138,d=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=t[2*(n+1)+1],++a<c&&r===s||(a<d?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=r,0===s?(c=138,d=3):r===s?(c=6,d=3):(c=7,d=4))},hG=(e,t,i)=>{let n,r,o=-1,s=t[1],a=0,c=7,d=4;for(0===s&&(c=138,d=3),n=0;n<=i;n++)if(r=s,s=t[2*(n+1)+1],!(++a<c&&r===s)){if(a<d)do{iG(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(iG(e,r,e.bl_tree),a--),iG(e,16,e.bl_tree),tG(e,a-3,2)):a<=10?(iG(e,17,e.bl_tree),tG(e,a-3,3)):(iG(e,18,e.bl_tree),tG(e,a-11,7));a=0,o=r,0===s?(c=138,d=3):r===s?(c=6,d=3):(c=7,d=4)}};let pG=!1;const _G=(e,t,i,n)=>{tG(e,0+(n?1:0),3),sG(e),eG(e,i),eG(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i};var EG=e=>{pG||((()=>{let e,t,i,n,r;const o=new Array(16);for(i=0,n=0;n<28;n++)for(Yj[n]=i,e=0;e<1<<Vj[n];e++)Kj[i++]=n;for(Kj[i-1]=n,r=0,n=0;n<16;n++)for(qj[n]=r,e=0;e<1<<Fj[n];e++)Hj[r++]=n;for(r>>=7;n<Uj;n++)for(qj[n]=r<<7,e=0;e<1<<Fj[n]-7;e++)Hj[256+r++]=n;for(t=0;t<=xj;t++)o[t]=0;for(e=0;e<=143;)Gj[2*e+1]=8,e++,o[8]++;for(;e<=255;)Gj[2*e+1]=9,e++,o[9]++;for(;e<=279;)Gj[2*e+1]=7,e++,o[7]++;for(;e<=287;)Gj[2*e+1]=8,e++,o[8]++;for(rG(Gj,287,o),e=0;e<Uj;e++)Wj[2*e+1]=5,Wj[2*e]=nG(e,5);Jj=new zj(Gj,Vj,257,Mj,xj),Xj=new zj(Wj,Fj,0,Uj,xj),Qj=new zj(new Array(0),Bj,0,19,7)})(),pG=!0),e.l_desc=new Zj(e.dyn_ltree,Jj),e.d_desc=new Zj(e.dyn_dtree,Xj),e.bl_desc=new Zj(e.bl_tree,Qj),e.bi_buf=0,e.bi_valid=0,oG(e)},fG=(e,t,i,n)=>{let r,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<kj;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),lG(e,e.l_desc),lG(e,e.d_desc),s=(e=>{let t;for(uG(e,e.dyn_ltree,e.l_desc.max_code),uG(e,e.dyn_dtree,e.d_desc.max_code),lG(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*jj[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==t?_G(e,t,i,n):4===e.strategy||o===r?(tG(e,2+(n?1:0),3),dG(e,Gj,Wj)):(tG(e,4+(n?1:0),3),((e,t,i,n)=>{let r;for(tG(e,t-257,5),tG(e,i-1,5),tG(e,n-4,4),r=0;r<n;r++)tG(e,e.bl_tree[2*jj[r]+1],3);hG(e,e.dyn_ltree,t-1),hG(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),dG(e,e.dyn_ltree,e.dyn_dtree)),oG(e),n&&sG(e)},mG=(e,t,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(Kj[i]+kj+1)]++,e.dyn_dtree[2*$j(t)]++),e.sym_next===e.sym_end),TG=e=>{tG(e,2,3),iG(e,256,Gj),(e=>{16===e.bi_valid?(eG(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},SG={_tr_init:EG,_tr_stored_block:_G,_tr_flush_block:fG,_tr_tally:mG,_tr_align:TG};var gG=(e,t,i,n)=>{let r=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do{r=r+t[n++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0};const RG=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var CG=(e,t,i,n)=>{const r=RG,o=n+i;e^=-1;for(let i=n;i<o;i++)e=e>>>8^r[255&(e^t[i])];return-1^e},IG={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"},vG={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:yG,_tr_stored_block:AG,_tr_flush_block:bG,_tr_tally:wG,_tr_align:OG}=SG,{Z_NO_FLUSH:NG,Z_PARTIAL_FLUSH:DG,Z_FULL_FLUSH:PG,Z_FINISH:LG,Z_BLOCK:kG,Z_OK:MG,Z_STREAM_END:UG,Z_STREAM_ERROR:xG,Z_DATA_ERROR:VG,Z_BUF_ERROR:FG,Z_DEFAULT_COMPRESSION:BG,Z_FILTERED:jG,Z_HUFFMAN_ONLY:GG,Z_RLE:WG,Z_FIXED:HG,Z_DEFAULT_STRATEGY:KG,Z_UNKNOWN:YG,Z_DEFLATED:qG}=vG,zG=286,JG=30,XG=19,QG=2*zG+1,ZG=15,$G=258,eW=262,tW=42,iW=113,nW=666,rW=(e,t)=>(e.msg=IG[t],t),oW=e=>2*e-(e>4?9:0),sW=e=>{let t=e.length;for(;--t>=0;)e[t]=0},aW=e=>{let t,i,n,r=e.w_size;t=e.hash_size,n=t;do{i=e.head[--n],e.head[n]=i>=r?i-r:0}while(--t);t=r,n=t;do{i=e.prev[--n],e.prev[n]=i>=r?i-r:0}while(--t)};let cW=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask;const dW=e=>{const t=e.state;let i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},lW=(e,t)=>{bG(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,dW(e.strm)},uW=(e,t)=>{e.pending_buf[e.pending++]=t},hW=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},pW=(e,t,i,n)=>{let r=e.avail_in;return r>n&&(r=n),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),i),1===e.state.wrap?e.adler=gG(e.adler,t,r,i):2===e.state.wrap&&(e.adler=CG(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)},_W=(e,t)=>{let i,n,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-eW?e.strstart-(e.w_size-eW):0,d=e.window,l=e.w_mask,u=e.prev,h=e.strstart+$G;let p=d[o+s-1],_=d[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(i=t,d[i+s]===_&&d[i+s-1]===p&&d[i]===d[o]&&d[++i]===d[o+1]){o+=2,i++;do{}while(d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&o<h);if(n=$G-(h-o),o=h-$G,n>s){if(e.match_start=t,s=n,n>=a)break;p=d[o+s-1],_=d[o+s]}}}while((t=u[t&l])>c&&0!=--r);return s<=e.lookahead?s:e.lookahead},EW=e=>{const t=e.w_size;let i,n,r;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-eW)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),aW(e),n+=t),0===e.strm.avail_in)break;if(i=pW(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=cW(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=cW(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<eW&&0!==e.strm.avail_in)},fW=(e,t)=>{let i,n,r,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(i=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,n=e.strstart-e.block_start,i>n+e.strm.avail_in&&(i=n+e.strm.avail_in),i>r&&(i=r),i<o&&(0===i&&t!==LG||t===NG||i!==n+e.strm.avail_in))break;s=t===LG&&i===n+e.strm.avail_in?1:0,AG(e,0,0,s),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,dW(e.strm),n&&(n>i&&(n=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,i-=n),i&&(pW(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==NG&&t!==LG&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(pW(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,o=r>e.w_size?e.w_size:r,n=e.strstart-e.block_start,(n>=o||(n||t===LG)&&t!==NG&&0===e.strm.avail_in&&n<=r)&&(i=n>r?r:n,s=t===LG&&0===e.strm.avail_in&&i===n?1:0,AG(e,e.block_start,i,s),e.block_start+=i,dW(e.strm)),s?3:1)},mW=(e,t)=>{let i,n;for(;;){if(e.lookahead<eW){if(EW(e),e.lookahead<eW&&t===NG)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=cW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-eW&&(e.match_length=_W(e,i)),e.match_length>=3)if(n=wG(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=cW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=cW(e,e.ins_h,e.window[e.strstart+1]);else n=wG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(lW(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===LG?(lW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(lW(e,!1),0===e.strm.avail_out)?1:2},TW=(e,t)=>{let i,n,r;for(;;){if(e.lookahead<eW){if(EW(e),e.lookahead<eW&&t===NG)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=cW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-eW&&(e.match_length=_W(e,i),e.match_length<=5&&(e.strategy===jG||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=wG(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=cW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(lW(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=wG(e,0,e.window[e.strstart-1]),n&&lW(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=wG(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===LG?(lW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(lW(e,!1),0===e.strm.avail_out)?1:2};function SW(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}const gW=[new SW(0,0,0,0,fW),new SW(4,4,8,4,mW),new SW(4,5,16,8,mW),new SW(4,6,32,32,mW),new SW(4,4,16,16,TW),new SW(8,16,32,32,TW),new SW(8,16,128,128,TW),new SW(8,32,128,256,TW),new SW(32,128,258,1024,TW),new SW(32,258,258,4096,TW)];function RW(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qG,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*QG),this.dyn_dtree=new Uint16Array(2*(2*JG+1)),this.bl_tree=new Uint16Array(2*(2*XG+1)),sW(this.dyn_ltree),sW(this.dyn_dtree),sW(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ZG+1),this.heap=new Uint16Array(2*zG+1),sW(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*zG+1),sW(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const CW=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==tW&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==iW&&t.status!==nW?1:0},IW=e=>{if(CW(e))return rW(e,xG);e.total_in=e.total_out=0,e.data_type=YG;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?tW:iW,e.adler=2===t.wrap?0:1,t.last_flush=-2,yG(t),MG},vW=e=>{const t=IW(e);return t===MG&&(e=>{e.window_size=2*e.w_size,sW(e.head),e.max_lazy_match=gW[e.level].max_lazy,e.good_match=gW[e.level].good_length,e.nice_match=gW[e.level].nice_length,e.max_chain_length=gW[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},yW=(e,t,i,n,r,o)=>{if(!e)return xG;let s=1;if(t===BG&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||i!==qG||n<8||n>15||t<0||t>9||o<0||o>HG||8===n&&1!==s)return rW(e,xG);8===n&&(n=9);const a=new RW;return e.state=a,a.strm=e,a.status=tW,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=i,vW(e)};var AW=(e,t)=>{if(CW(e)||t>kG||t<0)return e?rW(e,xG):xG;const i=e.state;if(!e.output||0!==e.avail_in&&!e.input||i.status===nW&&t!==LG)return rW(e,0===e.avail_out?FG:xG);const n=i.last_flush;if(i.last_flush=t,0!==i.pending){if(dW(e),0===e.avail_out)return i.last_flush=-1,MG}else if(0===e.avail_in&&oW(t)<=oW(n)&&t!==LG)return rW(e,FG);if(i.status===nW&&0!==e.avail_in)return rW(e,FG);if(i.status===tW&&0===i.wrap&&(i.status=iW),i.status===tW){let t=qG+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=GG||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,hW(i,t),0!==i.strstart&&(hW(i,e.adler>>>16),hW(i,65535&e.adler)),e.adler=1,i.status=iW,dW(e),0!==i.pending)return i.last_flush=-1,MG}if(57===i.status)if(e.adler=0,uW(i,31),uW(i,139),uW(i,8),i.gzhead)uW(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),uW(i,255&i.gzhead.time),uW(i,i.gzhead.time>>8&255),uW(i,i.gzhead.time>>16&255),uW(i,i.gzhead.time>>24&255),uW(i,9===i.level?2:i.strategy>=GG||i.level<2?4:0),uW(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(uW(i,255&i.gzhead.extra.length),uW(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=CG(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(uW(i,0),uW(i,0),uW(i,0),uW(i,0),uW(i,0),uW(i,9===i.level?2:i.strategy>=GG||i.level<2?4:0),uW(i,3),i.status=iW,dW(e),0!==i.pending)return i.last_flush=-1,MG;if(69===i.status){if(i.gzhead.extra){let t=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let r=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>t&&(e.adler=CG(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex+=r,dW(e),0!==i.pending)return i.last_flush=-1,MG;t=0,n-=r}let r=new Uint8Array(i.gzhead.extra);i.pending_buf.set(r.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>t&&(e.adler=CG(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=CG(e.adler,i.pending_buf,i.pending-n,n)),dW(e),0!==i.pending)return i.last_flush=-1,MG;n=0}t=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,uW(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=CG(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=CG(e.adler,i.pending_buf,i.pending-n,n)),dW(e),0!==i.pending)return i.last_flush=-1,MG;n=0}t=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,uW(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=CG(e.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(dW(e),0!==i.pending))return i.last_flush=-1,MG;uW(i,255&e.adler),uW(i,e.adler>>8&255),e.adler=0}if(i.status=iW,dW(e),0!==i.pending)return i.last_flush=-1,MG}if(0!==e.avail_in||0!==i.lookahead||t!==NG&&i.status!==nW){let n=0===i.level?fW(i,t):i.strategy===GG?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(EW(e),0===e.lookahead)){if(t===NG)return 1;break}if(e.match_length=0,i=wG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(lW(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===LG?(lW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(lW(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===WG?((e,t)=>{let i,n,r,o;const s=e.window;for(;;){if(e.lookahead<=$G){if(EW(e),e.lookahead<=$G&&t===NG)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){o=e.strstart+$G;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<o);e.match_length=$G-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=wG(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=wG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(lW(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===LG?(lW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(lW(e,!1),0===e.strm.avail_out)?1:2})(i,t):gW[i.level].func(i,t);if(3!==n&&4!==n||(i.status=nW),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),MG;if(2===n&&(t===DG?OG(i):t!==kG&&(AG(i,0,0,!1),t===PG&&(sW(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),dW(e),0===e.avail_out))return i.last_flush=-1,MG}return t!==LG?MG:i.wrap<=0?UG:(2===i.wrap?(uW(i,255&e.adler),uW(i,e.adler>>8&255),uW(i,e.adler>>16&255),uW(i,e.adler>>24&255),uW(i,255&e.total_in),uW(i,e.total_in>>8&255),uW(i,e.total_in>>16&255),uW(i,e.total_in>>24&255)):(hW(i,e.adler>>>16),hW(i,65535&e.adler)),dW(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?MG:UG)},bW=(e,t)=>{let i=t.length;if(CW(e))return xG;const n=e.state,r=n.wrap;if(2===r||1===r&&n.status!==tW||n.lookahead)return xG;if(1===r&&(e.adler=gG(e.adler,t,i,0)),n.wrap=0,i>=n.w_size){0===r&&(sW(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(i-n.w_size,i),0),t=e,i=n.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,EW(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=cW(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,EW(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=r,MG},wW={deflateInit:(e,t)=>yW(e,t,qG,15,8,KG),deflateInit2:yW,deflateReset:vW,deflateResetKeep:IW,deflateSetHeader:(e,t)=>CW(e)||2!==e.state.wrap?xG:(e.state.gzhead=t,MG),deflate:AW,deflateEnd:e=>{if(CW(e))return xG;const t=e.state.status;return e.state=null,t===iW?rW(e,VG):MG},deflateSetDictionary:bW,deflateInfo:\"pako deflate (from Nodeca project)\"};const OW=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var NW={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if(\"object\"!=typeof i)throw new TypeError(i+\"must be non-object\");for(const t in i)OW(i,t)&&(e[t]=i[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,n=0,r=e.length;t<r;t++){let r=e[t];i.set(r,n),n+=r.length}return i}};let DW=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){DW=!1}const PW=new Uint8Array(256);for(let e=0;e<256;e++)PW[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;PW[254]=PW[254]=1;var LW={string2buf:e=>{if(\"function\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,r,o,s=e.length,a=0;for(r=0;r<s;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),a+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?t[o++]=i:i<2048?(t[o++]=192|i>>>6,t[o++]=128|63&i):i<65536?(t[o++]=224|i>>>12,t[o++]=128|i>>>6&63,t[o++]=128|63&i):(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63,t[o++]=128|i>>>6&63,t[o++]=128|63&i);return t},buf2string:(e,t)=>{const i=t||e.length;if(\"function\"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,r;const o=new Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){o[r++]=t;continue}let s=PW[t];if(s>4)o[r++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<i;)t=t<<6|63&e[n++],s--;s>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=55296|t>>10&1023,o[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&DW)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i=\"\";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i})(o,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+PW[e[i]]>t?i:t}};var kW=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0};const MW=Object.prototype.toString,{Z_NO_FLUSH:UW,Z_SYNC_FLUSH:xW,Z_FULL_FLUSH:VW,Z_FINISH:FW,Z_OK:BW,Z_STREAM_END:jW,Z_DEFAULT_COMPRESSION:GW,Z_DEFAULT_STRATEGY:WW,Z_DEFLATED:HW}=vG;function KW(e){this.options=NW.assign({level:GW,method:HW,chunkSize:16384,windowBits:15,memLevel:8,strategy:WW},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new kW,this.strm.avail_out=0;let i=wW.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==BW)throw new Error(IG[i]);if(t.header&&wW.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e=\"string\"==typeof t.dictionary?LW.string2buf(t.dictionary):\"[object ArrayBuffer]\"===MW.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=wW.deflateSetDictionary(this.strm,e),i!==BW)throw new Error(IG[i]);this._dict_set=!0}}function YW(e,t){const i=new KW(t);if(i.push(e,!0),i.err)throw i.msg||IG[i.err];return i.result}KW.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?FW:UW,\"string\"==typeof e?i.input=LW.string2buf(e):\"[object ArrayBuffer]\"===MW.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(o===xW||o===VW)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=wW.deflate(i,o),r===jW)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=wW.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===BW;if(0!==i.avail_out){if(o>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},KW.prototype.onData=function(e){this.chunks.push(e)},KW.prototype.onEnd=function(e){e===BW&&(this.result=NW.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var qW={Deflate:KW,deflate:YW,deflateRaw:function(e,t){return(t=t||{}).raw=!0,YW(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,YW(e,t)},constants:vG};const zW=16209;var JW=function(e,t){let i,n,r,o,s,a,c,d,l,u,h,p,_,E,f,m,T,S,g,R,C,I,v,y;const A=e.state;i=e.next_in,v=e.input,n=i+(e.avail_in-5),r=e.next_out,y=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),a=A.dmax,c=A.wsize,d=A.whave,l=A.wnext,u=A.window,h=A.hold,p=A.bits,_=A.lencode,E=A.distcode,f=(1<<A.lenbits)-1,m=(1<<A.distbits)-1;e:do{p<15&&(h+=v[i++]<<p,p+=8,h+=v[i++]<<p,p+=8),T=_[h&f];t:for(;;){if(S=T>>>24,h>>>=S,p-=S,S=T>>>16&255,0===S)y[r++]=65535&T;else{if(!(16&S)){if(0==(64&S)){T=_[(65535&T)+(h&(1<<S)-1)];continue t}if(32&S){A.mode=16191;break e}e.msg=\"invalid literal/length code\",A.mode=zW;break e}g=65535&T,S&=15,S&&(p<S&&(h+=v[i++]<<p,p+=8),g+=h&(1<<S)-1,h>>>=S,p-=S),p<15&&(h+=v[i++]<<p,p+=8,h+=v[i++]<<p,p+=8),T=E[h&m];i:for(;;){if(S=T>>>24,h>>>=S,p-=S,S=T>>>16&255,!(16&S)){if(0==(64&S)){T=E[(65535&T)+(h&(1<<S)-1)];continue i}e.msg=\"invalid distance code\",A.mode=zW;break e}if(R=65535&T,S&=15,p<S&&(h+=v[i++]<<p,p+=8,p<S&&(h+=v[i++]<<p,p+=8)),R+=h&(1<<S)-1,R>a){e.msg=\"invalid distance too far back\",A.mode=zW;break e}if(h>>>=S,p-=S,S=r-o,R>S){if(S=R-S,S>d&&A.sane){e.msg=\"invalid distance too far back\",A.mode=zW;break e}if(C=0,I=u,0===l){if(C+=c-S,S<g){g-=S;do{y[r++]=u[C++]}while(--S);C=r-R,I=y}}else if(l<S){if(C+=c+l-S,S-=l,S<g){g-=S;do{y[r++]=u[C++]}while(--S);if(C=0,l<g){S=l,g-=S;do{y[r++]=u[C++]}while(--S);C=r-R,I=y}}}else if(C+=l-S,S<g){g-=S;do{y[r++]=u[C++]}while(--S);C=r-R,I=y}for(;g>2;)y[r++]=I[C++],y[r++]=I[C++],y[r++]=I[C++],g-=3;g&&(y[r++]=I[C++],g>1&&(y[r++]=I[C++]))}else{C=r-R;do{y[r++]=y[C++],y[r++]=y[C++],y[r++]=y[C++],g-=3}while(g>2);g&&(y[r++]=y[C++],g>1&&(y[r++]=y[C++]))}break}}break}}while(i<n&&r<s);g=p>>3,i-=g,p-=g<<3,h&=(1<<p)-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<s?s-r+257:257-(r-s),A.hold=h,A.bits=p};const XW=15,QW=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ZW=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$W=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),eH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tH=(e,t,i,n,r,o,s,a)=>{const c=a.bits;let d,l,u,h,p,_,E=0,f=0,m=0,T=0,S=0,g=0,R=0,C=0,I=0,v=0,y=null;const A=new Uint16Array(16),b=new Uint16Array(16);let w,O,N,D=null;for(E=0;E<=XW;E++)A[E]=0;for(f=0;f<n;f++)A[t[i+f]]++;for(S=c,T=XW;T>=1&&0===A[T];T--);if(S>T&&(S=T),0===T)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(m=1;m<T&&0===A[m];m++);for(S<m&&(S=m),C=1,E=1;E<=XW;E++)if(C<<=1,C-=A[E],C<0)return-1;if(C>0&&(0===e||1!==T))return-1;for(b[1]=0,E=1;E<XW;E++)b[E+1]=b[E]+A[E];for(f=0;f<n;f++)0!==t[i+f]&&(s[b[t[i+f]]++]=f);if(0===e?(y=D=s,_=20):1===e?(y=QW,D=ZW,_=257):(y=$W,D=eH,_=0),v=0,f=0,E=m,p=o,g=S,R=0,u=-1,I=1<<S,h=I-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){w=E-R,s[f]+1<_?(O=0,N=s[f]):s[f]>=_?(O=D[s[f]-_],N=y[s[f]-_]):(O=96,N=0),d=1<<E-R,l=1<<g,m=l;do{l-=d,r[p+(v>>R)+l]=w<<24|O<<16|N|0}while(0!==l);for(d=1<<E-1;v&d;)d>>=1;if(0!==d?(v&=d-1,v+=d):v=0,f++,0==--A[E]){if(E===T)break;E=t[i+s[f]]}if(E>S&&(v&h)!==u){for(0===R&&(R=S),p+=m,g=E-R,C=1<<g;g+R<T&&(C-=A[g+R],!(C<=0));)g++,C<<=1;if(I+=1<<g,1===e&&I>852||2===e&&I>592)return 1;u=v&h,r[u]=S<<24|g<<16|p-o|0}}return 0!==v&&(r[p+v]=E-R<<24|64<<16|0),a.bits=S,0};const{Z_FINISH:iH,Z_BLOCK:nH,Z_TREES:rH,Z_OK:oH,Z_STREAM_END:sH,Z_NEED_DICT:aH,Z_STREAM_ERROR:cH,Z_DATA_ERROR:dH,Z_MEM_ERROR:lH,Z_BUF_ERROR:uH,Z_DEFLATED:hH}=vG,pH=16180,_H=16190,EH=16191,fH=16192,mH=16194,TH=16199,SH=16200,gH=16206,RH=16209,CH=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function IH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vH=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<pH||t.mode>16211?1:0},yH=e=>{if(vH(e))return cH;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=pH,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,oH},AH=e=>{if(vH(e))return cH;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,yH(e)},bH=(e,t)=>{let i;if(vH(e))return cH;const n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?cH:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,AH(e))},wH=(e,t)=>{if(!e)return cH;const i=new IH;e.state=i,i.strm=e,i.window=null,i.mode=pH;const n=bH(e,t);return n!==oH&&(e.state=null),n};let OH,NH,DH=!0;const PH=e=>{if(DH){OH=new Int32Array(512),NH=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tH(1,e.lens,0,288,OH,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tH(2,e.lens,0,32,NH,0,e.work,{bits:5}),DH=!1}e.lencode=OH,e.lenbits=9,e.distcode=NH,e.distbits=5},LH=(e,t,i,n)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(i-o.wsize,i),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),o.window.set(t.subarray(i-n,i-n+r),o.wnext),(n-=r)?(o.window.set(t.subarray(i-n,i),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var kH=(e,t)=>{let i,n,r,o,s,a,c,d,l,u,h,p,_,E,f,m,T,S,g,R,C,I,v=0;const y=new Uint8Array(4);let A,b;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vH(e)||!e.output||!e.input&&0!==e.avail_in)return cH;i=e.state,i.mode===EH&&(i.mode=fH),s=e.next_out,r=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,d=i.hold,l=i.bits,u=a,h=c,I=oH;e:for(;;)switch(i.mode){case pH:if(0===i.wrap){i.mode=fH;break}for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(2&i.wrap&&35615===d){0===i.wbits&&(i.wbits=15),i.check=0,y[0]=255&d,y[1]=d>>>8&255,i.check=CG(i.check,y,2,0),d=0,l=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg=\"incorrect header check\",i.mode=RH;break}if((15&d)!==hH){e.msg=\"unknown compression method\",i.mode=RH;break}if(d>>>=4,l-=4,C=8+(15&d),0===i.wbits&&(i.wbits=C),C>15||C>i.wbits){e.msg=\"invalid window size\",i.mode=RH;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&d?16189:EH,d=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(i.flags=d,(255&Pj(i))!==hH){e.msg=\"unknown compression method\",i.mode=RH;break}if(57344&Pj(i)){e.msg=\"unknown header flags set\",i.mode=RH;break}i.head&&(i.head.text=d>>8&1),512&Pj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,i.check=CG(i.check,y,2,0)),d=0,l=0,i.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.head&&(i.head.time=d),512&Pj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,y[2]=d>>>16&255,y[3]=d>>>24&255,i.check=CG(i.check,y,4,0)),d=0,l=0,i.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&Pj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,i.check=CG(i.check,y,2,0)),d=0,l=0,i.mode=16184;case 16184:if(1024&Pj(i)){for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.length=d,i.head&&(i.head.extra_len=d),512&Pj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,i.check=CG(i.check,y,2,0)),d=0,l=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&Pj(i)&&(p=i.length,p>a&&(p=a),p&&(i.head&&(C=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(o,o+p),C)),512&Pj(i)&&4&i.wrap&&(i.check=CG(i.check,n,p,o)),a-=p,o+=p,i.length-=p),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&Pj(i)){if(0===a)break e;p=0;do{C=n[o+p++],i.head&&C&&i.length<65536&&(i.head.name+=String.fromCharCode(C))}while(C&&p<a);if(512&Pj(i)&&4&i.wrap&&(i.check=CG(i.check,n,p,o)),a-=p,o+=p,C)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&Pj(i)){if(0===a)break e;p=0;do{C=n[o+p++],i.head&&C&&i.length<65536&&(i.head.comment+=String.fromCharCode(C))}while(C&&p<a);if(512&Pj(i)&&4&i.wrap&&(i.check=CG(i.check,n,p,o)),a-=p,o+=p,C)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&Pj(i)){for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(4&i.wrap&&d!==(65535&i.check)){e.msg=\"header crc mismatch\",i.mode=RH;break}d=0,l=0}i.head&&(i.head.hcrc=Pj(i)>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=EH;break;case 16189:for(;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}e.adler=i.check=CH(d),d=0,l=0,i.mode=_H;case _H:if(0===i.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,i.hold=d,i.bits=l,aH;e.adler=i.check=1,i.mode=EH;case EH:if(t===nH||t===rH)break e;case fH:if(i.last){d>>>=7&l,l-=7&l,i.mode=gH;break}for(;l<3;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}switch(i.last=1&d,d>>>=1,l-=1,3&d){case 0:i.mode=16193;break;case 1:if(PH(i),i.mode=TH,t===rH){d>>>=2,l-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg=\"invalid block type\",i.mode=RH}d>>>=2,l-=2;break;case 16193:for(d>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if((65535&d)!=(d>>>16^65535)){e.msg=\"invalid stored block lengths\",i.mode=RH;break}if(i.length=65535&d,d=0,l=0,i.mode=mH,t===rH)break e;case mH:i.mode=16195;case 16195:if(p=i.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;r.set(n.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,i.length-=p;break}i.mode=EH;break;case 16196:for(;l<14;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(i.nlen=257+(31&d),d>>>=5,l-=5,i.ndist=1+(31&d),d>>>=5,l-=5,i.ncode=4+(15&d),d>>>=4,l-=4,i.nlen>286||i.ndist>30){e.msg=\"too many length or distance symbols\",i.mode=RH;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;l<3;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.lens[w[i.have++]]=7&d,d>>>=3,l-=3}for(;i.have<19;)i.lens[w[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,A={bits:i.lenbits},I=tH(0,i.lens,0,19,i.lencode,0,i.work,A),i.lenbits=A.bits,I){e.msg=\"invalid code lengths set\",i.mode=RH;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;v=i.lencode[d&(1<<i.lenbits)-1],f=v>>>24,m=v>>>16&255,T=65535&v,!(f<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(T<16)d>>>=f,l-=f,i.lens[i.have++]=T;else{if(16===T){for(b=f+2;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(d>>>=f,l-=f,0===i.have){e.msg=\"invalid bit length repeat\",i.mode=RH;break}C=i.lens[i.have-1],p=3+(3&d),d>>>=2,l-=2}else if(17===T){for(b=f+3;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=f,l-=f,C=0,p=3+(7&d),d>>>=3,l-=3}else{for(b=f+7;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=f,l-=f,C=0,p=11+(127&d),d>>>=7,l-=7}if(i.have+p>i.nlen+i.ndist){e.msg=\"invalid bit length repeat\",i.mode=RH;break}for(;p--;)i.lens[i.have++]=C}}if(i.mode===RH)break;if(0===i.lens[256]){e.msg=\"invalid code -- missing end-of-block\",i.mode=RH;break}if(i.lenbits=9,A={bits:i.lenbits},I=tH(1,i.lens,0,i.nlen,i.lencode,0,i.work,A),i.lenbits=A.bits,I){e.msg=\"invalid literal/lengths set\",i.mode=RH;break}if(i.distbits=6,i.distcode=i.distdyn,A={bits:i.distbits},I=tH(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,A),i.distbits=A.bits,I){e.msg=\"invalid distances set\",i.mode=RH;break}if(i.mode=TH,t===rH)break e;case TH:i.mode=SH;case SH:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,i.hold=d,i.bits=l,JW(e,h),s=e.next_out,r=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,d=i.hold,l=i.bits,i.mode===EH&&(i.back=-1);break}for(i.back=0;v=i.lencode[d&(1<<i.lenbits)-1],f=v>>>24,m=v>>>16&255,T=65535&v,!(f<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(m&&0==(240&m)){for(S=f,g=m,R=T;v=i.lencode[R+((d&(1<<S+g)-1)>>S)],f=v>>>24,m=v>>>16&255,T=65535&v,!(S+f<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=S,l-=S,i.back+=S}if(d>>>=f,l-=f,i.back+=f,i.length=T,0===m){i.mode=16205;break}if(32&m){i.back=-1,i.mode=EH;break}if(64&m){e.msg=\"invalid literal/length code\",i.mode=RH;break}i.extra=15&m,i.mode=16201;case 16201:if(i.extra){for(b=i.extra;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,l-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;v=i.distcode[d&(1<<i.distbits)-1],f=v>>>24,m=v>>>16&255,T=65535&v,!(f<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(0==(240&m)){for(S=f,g=m,R=T;v=i.distcode[R+((d&(1<<S+g)-1)>>S)],f=v>>>24,m=v>>>16&255,T=65535&v,!(S+f<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=S,l-=S,i.back+=S}if(d>>>=f,l-=f,i.back+=f,64&m){e.msg=\"invalid distance code\",i.mode=RH;break}i.offset=T,i.extra=15&m,i.mode=16203;case 16203:if(i.extra){for(b=i.extra;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,l-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg=\"invalid distance too far back\",i.mode=RH;break}i.mode=16204;case 16204:if(0===c)break e;if(p=h-c,i.offset>p){if(p=i.offset-p,p>i.whave&&i.sane){e.msg=\"invalid distance too far back\",i.mode=RH;break}p>i.wnext?(p-=i.wnext,_=i.wsize-p):_=i.wnext-p,p>i.length&&(p=i.length),E=i.window}else E=r,_=s-i.offset,p=i.length;p>c&&(p=c),c-=p,i.length-=p;do{r[s++]=E[_++]}while(--p);0===i.length&&(i.mode=SH);break;case 16205:if(0===c)break e;r[s++]=i.length,c--,i.mode=SH;break;case gH:if(i.wrap){for(;l<32;){if(0===a)break e;a--,d|=n[o++]<<l,l+=8}if(h-=c,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=Pj(i)?CG(i.check,r,h,s-h):gG(i.check,r,h,s-h)),h=c,4&i.wrap&&(Pj(i)?d:CH(d))!==i.check){e.msg=\"incorrect data check\",i.mode=RH;break}d=0,l=0}i.mode=16207;case 16207:if(i.wrap&&Pj(i)){for(;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(4&i.wrap&&d!==(4294967295&i.total)){e.msg=\"incorrect length check\",i.mode=RH;break}d=0,l=0}i.mode=16208;case 16208:I=sH;break e;case RH:I=dH;break e;case 16210:return lH;default:return cH}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,i.hold=d,i.bits=l,(i.wsize||h!==e.avail_out&&i.mode<RH&&(i.mode<gH||t!==iH))&&LH(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=Pj(i)?CG(i.check,r,h,e.next_out-h):gG(i.check,r,h,e.next_out-h)),e.data_type=i.bits+(i.last?64:0)+(i.mode===EH?128:0)+(i.mode===TH||i.mode===mH?256:0),(0===u&&0===h||t===iH)&&I===oH&&(I=uH),I},MH={inflateReset:AH,inflateReset2:bH,inflateResetKeep:yH,inflateInit:e=>wH(e,15),inflateInit2:wH,inflate:kH,inflateEnd:e=>{if(vH(e))return cH;let t=e.state;return t.window&&(t.window=null),e.state=null,oH},inflateGetHeader:(e,t)=>{if(vH(e))return cH;const i=e.state;return 0==(2&i.wrap)?cH:(i.head=t,t.done=!1,oH)},inflateSetDictionary:(e,t)=>{const i=t.length;let n,r,o;return vH(e)?cH:(n=e.state,0!==n.wrap&&n.mode!==_H?cH:n.mode===_H&&(r=1,r=gG(r,t,i,0),r!==n.check)?dH:(o=LH(e,t,i,i),o?(n.mode=16210,lH):(n.havedict=1,oH)))},inflateInfo:\"pako inflate (from Nodeca project)\"};var UH=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1};const xH=Object.prototype.toString,{Z_NO_FLUSH:VH,Z_FINISH:FH,Z_OK:BH,Z_STREAM_END:jH,Z_NEED_DICT:GH,Z_STREAM_ERROR:WH,Z_DATA_ERROR:HH,Z_MEM_ERROR:KH}=vG;function YH(e){this.options=NW.assign({chunkSize:65536,windowBits:15,to:\"\"},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new kW,this.strm.avail_out=0;let i=MH.inflateInit2(this.strm,t.windowBits);if(i!==BH)throw new Error(IG[i]);if(this.header=new UH,MH.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=LW.string2buf(t.dictionary):\"[object ArrayBuffer]\"===xH.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=MH.inflateSetDictionary(this.strm,t.dictionary),i!==BH)))throw new Error(IG[i])}function qH(e,t){const i=new YH(t);if(i.push(e),i.err)throw i.msg||IG[i.err];return i.result}YH.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?FH:VH,\"[object ArrayBuffer]\"===xH.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),o=MH.inflate(i,s),o===GH&&r&&(o=MH.inflateSetDictionary(i,r),o===BH?o=MH.inflate(i,s):o===HH&&(o=GH));i.avail_in>0&&o===jH&&i.state.wrap>0&&0!==e[i.next_in];)MH.inflateReset(i),o=MH.inflate(i,s);switch(o){case WH:case HH:case GH:case KH:return this.onEnd(o),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||o===jH))if(\"string\"===this.options.to){let e=LW.utf8border(i.output,i.next_out),t=i.next_out-e,r=LW.buf2string(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(o!==BH||0!==a){if(o===jH)return o=MH.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},YH.prototype.onData=function(e){this.chunks.push(e)},YH.prototype.onEnd=function(e){e===BH&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=NW.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var zH={Inflate:YH,inflate:qH,inflateRaw:function(e,t){return(t=t||{}).raw=!0,qH(e,t)},ungzip:qH,constants:vG};const{Deflate:JH,deflate:XH,deflateRaw:QH,gzip:ZH}=qW,{Inflate:$H,inflate:eK,inflateRaw:tK,ungzip:iK}=zH;var nK=XH,rK=eK,oK=function(e){return e[e.ONE_BYTE=0]=\"ONE_BYTE\",e[e.TWO_BYTE=1]=\"TWO_BYTE\",e}(oK||{});class sK{constructor(){ng(this,\"_sequence\",0),ng(this,\"_startTime\",Date.now()),ng(this,\"isUseOneByte\",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const i=new Uint8Array(4);i.set([1,0,0,0]);const n={id:0,length:4,data:i.buffer},r={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[n]};t.commonPacketHeader.extension=1,t.extension=r,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;Oy(\"SHOW_DATASTREAM2_LOG\")&&Jy.debug(\"send data header: \".concat(JSON.stringify(t.commonPacketHeader)));const i=new ArrayBuffer(t.commonPacketHeader.length),n=new Uint8Array(i),r=new DataView(i);let o=0;if(r.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,r.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,r.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);n.set(new Uint8Array(e),o),o+=e.byteLength}if(n.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error(\"serialize error!\");return i}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let i=0;const n=t.getUint16(i,!0);i+=2;const r={length:16383&n,reserved:(16384&n)>>14,extension:(32768&n)>>15,sequence:t.getUint16(i+2,!0)<<16|t.getUint16(i,!0)};let o,s;if(i+=4,Oy(\"SHOW_DATASTREAM2_LOG\")&&Jy.debug(\"receive data header: \".concat(JSON.stringify(r))),t.getUint16(i,!0),i+=2,r.extension){s=this.deserializeExtension(e.slice(i)),i+=2+s.length,o=e.slice(i);let t=!1;if(s.datas.length>0){const e=s.datas.find((e=>0===e.id));if(e){t=1==(1&new DataView(e.data).getUint32(0,!0))}}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:i,datas:n}=e,r=new ArrayBuffer(i+2),o=new Uint8Array(r),s=new DataView(r);let a=0;if(s.setUint8(a++,t),s.setUint8(a++,i),n.forEach((e=>{t?(s.setUint8(a++,e.id),s.setUint8(a++,e.length),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(s.setUint8(a++,e.id|e.length<<4),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==i+2)throw Error(\"serialize extension error, is \".concat(a,\"!==\").concat(i+2));return r}deserializeExtension(e){const t=new DataView(e);let i=0;const n=t.getUint8(i);i++;const r=t.getUint8(i);i++;const o=n===oK.TWO_BYTE,s=[],a=new DataView(e,2);let c=0;for(;c<r;){let e=0,t=0,i=new ArrayBuffer(0);o?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(i=a.buffer.slice(c+2,c+2+t),c+=i.byteLength),s.push({id:e,length:t,data:i})}if(c!==r)throw Error(\"parse error\");return{profile:n,length:r,datas:s}}decompress(e){return rK(new Uint8Array(e))}compress(e){return nK(new Uint8Array(e))}}const aK={name:\"DataStream\",create:(e,t)=>{const i=t?new cM(e):new dM(e);return i.useDataStream(new sK),i}};class cK extends mv{constructor(e,t,i){super(),ng(this,\"ws\",void 0),ng(this,\"requestId\",1),ng(this,\"heartBeatTimer\",void 0),ng(this,\"joinInfo\",void 0),ng(this,\"clientId\",void 0),ng(this,\"onOpen\",(()=>{this.emit(\"open\"),this.startHeartBeatCheck()})),ng(this,\"onClose\",(e=>{this.emit(\"close\"),this.dispose()})),ng(this,\"onMessage\",(e=>{const t=JSON.parse(e.data);if(!t||\"serverResponse\"!==t.command||!t.requestId)return t&&\"serverStatus\"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit(\"status\",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit(\"req_\".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new yw(\"cross-channel-\".concat(this.clientId),i),this.ws.on(fb.RECONNECTING,(()=>{this.ws.reconnectMode=\"retry\",this.emit(\"reconnecting\")})),this.ws.on(fb.CONNECTED,this.onOpen),this.ws.on(fb.ON_MESSAGE,this.onMessage),this.ws.on(fb.CLOSED,this.onClose)}isConnect(){return\"connected\"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new Gh(((t,i)=>{const n=window.setTimeout((()=>{i(new mb(tv.TIMEOUT,\"wait status timeout, status: \".concat(e)))}),5e3);this.once(e,(r=>{window.clearTimeout(n),r.state&&0!==r.state?i(new mb(tv.CROSS_CHANNEL_WAIT_STATUS_ERROR,\"wait status error, status: \".concat(e))):t(void 0)})),this.once(\"dispose\",(()=>{window.clearTimeout(n),i(new mb(tv.WS_ABORT))}))}))}async request(e){if(\"closed\"===this.ws.state)throw new mb(tv.WS_DISCONNECT);const t=()=>new Gh(((e,t)=>{this.ws.once(fb.CLOSED,(()=>t(new mb(tv.WS_ABORT)))),this.ws.once(fb.CONNECTED,e)}));\"connected\"!==this.ws.state&&await t();const i=this.sendMessage(e),n=new Gh(((e,t)=>{const n=()=>{t(new mb(tv.WS_ABORT))};this.ws.once(fb.RECONNECTING,n),this.ws.once(fb.CLOSED,n),this.once(\"req_\".concat(i),e),Qv(3e3).then((()=>{this.removeAllListeners(\"req_\".concat(i)),this.ws.off(fb.RECONNECTING,n),this.ws.off(fb.CLOSED,n),t(new mb(tv.TIMEOUT,\"cross channel ws request timeout\"))}))})),r=await n;if(!r||200!==r.code)throw new mb(tv.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,\"response: \".concat(JSON.stringify(r)));return r}async connect(e){this.ws.removeAllListeners(fb.REQUEST_NEW_URLS),this.ws.on(fb.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit(\"dispose\"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:\"ping\",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class dK extends mv{set state(e){e!==this._state&&(e!==Db.RELAY_STATE_FAILURE&&(this.errorCode=Pb.RELAY_OK),this.emit(\"state\",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,i,n,r){super(),ng(this,\"joinInfo\",void 0),ng(this,\"sid\",void 0),ng(this,\"clientId\",void 0),ng(this,\"cancelToken\",pI.CancelToken.source()),ng(this,\"workerToken\",void 0),ng(this,\"requestId\",0),ng(this,\"signal\",void 0),ng(this,\"prevChannelMediaConfig\",void 0),ng(this,\"httpRetryConfig\",void 0),ng(this,\"_resolution\",void 0),ng(this,\"_state\",Db.RELAY_STATE_IDLE),ng(this,\"errorCode\",Pb.RELAY_OK),ng(this,\"onStatus\",(e=>{Jy.debug(\"[\".concat(this.clientId,\"] ChannelMediaStatus: \").concat(JSON.stringify(e))),e&&e.command&&(\"onAudioPacketReceived\"===e.command&&this.emit(\"event\",Nb.PACKET_RECEIVED_AUDIO_FROM_SRC),\"onVideoPacketReceived\"===e.command&&this.emit(\"event\",Nb.PACKET_RECEIVED_VIDEO_FROM_SRC),\"onSrcTokenPrivilegeDidExpire\"===e.command&&(this.errorCode=Pb.SRC_TOKEN_EXPIRED,this.state=Db.RELAY_STATE_FAILURE),\"onDestTokenPrivilegeDidExpire\"===e.command&&(this.errorCode=Pb.DEST_TOKEN_EXPIRED,this.state=Db.RELAY_STATE_FAILURE))})),ng(this,\"onReconnect\",(async()=>{Jy.debug(\"[\".concat(this.clientId,\"] ChannelMediaSocket disconnect, reconnecting\")),this.emit(\"event\",Nb.NETWORK_DISCONNECTED),this.state=Db.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==Db.RELAY_STATE_IDLE&&(Jy.error(\"auto restart channel media relay failed\",e.toString()),this.errorCode=Pb.SERVER_CONNECTION_LOST,this.state=Db.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=$v(),this.signal=new cK(this.joinInfo,this.clientId,i),this.httpRetryConfig=n,this._resolution=r}async startChannelMediaRelay(e){if(this.state!==Db.RELAY_STATE_IDLE)throw new mb(tv.INVALID_OPERATION);this.state=Db.RELAY_STATE_CONNECTING,await this.connect(),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: connect success\"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&\"SetSourceChannel\"===e.data.serverResponse.command)throw new mb(tv.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&\"SetDestChannelStatus\"===e.serverResponse.command)throw new mb(tv.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&\"StartPacketTransfer\"===e.serverResponse.command)throw new mb(tv.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==Db.RELAY_STATE_RUNNING)throw new mb(tv.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==Db.RELAY_STATE_RUNNING)throw new mb(tv.INVALID_OPERATION);const t=this.genMessage(Ob.SetVideoProfile);await this.signal.request(t),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: setVideoProfile success\"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Jy.debug(\"[\".concat(this.clientId,\"] stopChannelMediaRelay: send stop message success\")),this.state=Db.RELAY_STATE_IDLE,this.dispose()}dispose(){Jy.debug(\"[\".concat(this.clientId,\"] disposeChannelMediaRelay\")),this.cancelToken.cancel(),this.cancelToken=pI.CancelToken.source(),this.state=Db.RELAY_STATE_IDLE,this.emit(\"dispose\"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await PU(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit(\"event\",Nb.NETWORK_CONNECTED),this.signal.on(\"status\",this.onStatus),this.signal.on(\"reconnecting\",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(Ob.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus(\"Normal Quit\"),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: StopPacketTransfer success\"));const i=this.genMessage(Ob.SetSdkProfile,e);await this.signal.request(i),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetSdkProfile success\"));const n=this.genMessage(Ob.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus(\"SetSourceChannelStatus\"),this.emit(\"event\",Nb.PACKET_JOINED_SRC_CHANNEL),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetSourceChannel success\"));const r=this.genMessage(Ob.SetSourceUserId,e);await this.signal.request(r),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetSourceUserId success\"));const o=this.genMessage(Ob.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus(\"SetDestChannelStatus\"),this.emit(\"event\",Nb.PACKET_JOINED_DEST_CHANNEL),Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetDestChannel success\"));const s=this.genMessage(Ob.StartPacketTransfer,e);await this.signal.request(s),this.emit(\"event\",Nb.PACKET_SENT_TO_DEST_CHANNEL),this.state=Db.RELAY_STATE_RUNNING,Jy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: StartPacketTransfer success\")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(Ob.UpdateDestChannel,e);await this.signal.request(t),this.emit(\"event\",Nb.PACKET_UPDATE_DEST_CHANNEL),Jy.debug(\"[\".concat(this.clientId,\"] sendUpdateMessage: UpdateDestChannel success\"))}async sendStopRelayMessage(){const e=this.genMessage(Ob.StopPacketTransfer);await this.signal.request(e),Jy.debug(\"[\".concat(this.clientId,\"] sendStopRelayMessage: StopPacketTransfer success\"))}genMessage(e,t){const i=[],n=[],r=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Cy,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};\"4.22.0\"===o.sdkVersion&&(o.sdkVersion=\"0.0.1\");let s=null,a=null;switch(e){case Ob.SetSdkProfile:return o.clientRequest={command:\"SetSdkProfile\",type:\"multi_channel\"},o;case Ob.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new mb(tv.UNEXPECTED_ERROR,\"can not find source config\");return o.clientRequest={command:\"SetSourceChannel\",uid:\"0\",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case Ob.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new mb(tv.UNEXPECTED_ERROR,\"can not find source config\");return o.clientRequest={command:\"SetSourceUserId\",uid:a.uid+\"\"},o;case Ob.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new mb(tv.UNEXPECTED_ERROR,\"can not find dest config\");return s.forEach((e=>{i.push(e.channelName),n.push(e.uid+\"\"),r.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:\"SetDestChannel\",channelName:i,uid:n,token:r},o;case Ob.StartPacketTransfer:return o.clientRequest={command:\"StartPacketTransfer\"},o;case Ob.Reconnect:return o.clientRequest={command:\"Reconnect\"},o;case Ob.StopPacketTransfer:return o.clientRequest={command:\"StopPacketTransfer\"},o;case Ob.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new mb(tv.UNEXPECTED_ERROR,\"can not find dest config\");return s.forEach((e=>{i.push(e.channelName),n.push(e.uid+\"\"),r.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:\"UpdateDestChannel\",channelName:i,uid:n,token:r},o;case Ob.SetVideoProfile:o.clientRequest={command:\"SetVideoProfile\",width:this._resolution.width,height:this._resolution.height}}return o}}const lK={name:\"ChannelMediaRelay\",create:function(e){return new dK(e.joinInfo,e.clientId,e.websocketRetryConfig||hy,e.httpRetryConfig||hy,e.resolution)}};function uK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function hK(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?uK(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uK(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class pK extends mv{constructor(e,t,i,n){super(),ng(this,\"spec\",void 0),ng(this,\"token\",void 0),ng(this,\"websocket\",void 0),ng(this,\"pingpongTimer\",void 0),ng(this,\"reconnectMode\",\"retry\"),ng(this,\"serviceMode\",void 0),ng(this,\"reqId\",0),ng(this,\"commandReqId\",0),ng(this,\"handleWebSocketOpen\",(()=>{this.reconnectMode=\"retry\",this.startPingPong()})),ng(this,\"handleWebSocketMessage\",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit(\"@\".concat(t.requestId,\"-\").concat(t.sid),t):(rA.workerEvent(this.spec.sid,{actionType:\"status\",serverCode:t.code,workerType:this.serviceMode===gb.TRANSCODE?1:2}),this.emit(yb.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new yw(\"live-streaming\",i),this.websocket.on(fb.CONNECTED,this.handleWebSocketOpen),this.websocket.on(fb.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(fb.REQUEST_NEW_URLS,((e,t)=>{Pv(this,yb.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(fb.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,i,n){this.reqId+=1,\"request\"===e&&(this.commandReqId+=1);const r=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new mb(tv.UNEXPECTED_ERROR);const s=hK({command:e,sdkVersion:\"4.22.0\"===Cy?\"0.0.1\":Cy,seq:o,requestId:o,allocate:i,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if(\"closed\"===this.websocket.state)throw new mb(tv.WS_DISCONNECT);const a=()=>new Gh(((e,t)=>{this.websocket.once(fb.CLOSED,(()=>t(new mb(tv.WS_ABORT)))),this.websocket.once(fb.CONNECTED,e)}));\"connected\"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new Gh(((e,t)=>{const i=()=>{t(new mb(tv.WS_ABORT))};this.websocket.once(fb.RECONNECTING,i),this.websocket.once(fb.CLOSED,i),this.once(\"@\".concat(o,\"-\").concat(this.spec.sid),(t=>{e(t)}))}));n&&rA.workerEvent(this.spec.sid,hK(hK({},n),{},{requestId:r,actionType:\"request\",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const d=Date.now();this.websocket.sendMessage(s);let l=null;try{l=await c}catch(n){if(\"closed\"===this.websocket.state)throw n;return await a(),await this.request(e,t,i)}return n&&rA.workerEvent(this.spec.sid,hK(hK({},n),{},{requestId:r,actionType:\"response\",payload:JSON.stringify(l.serverResponse),serverCode:l.code,success:200===l.code,responseTime:Date.now()-d})),200!==l.code&&this.handleResponseError(l),l}tryNextAddress(){this.reconnectMode=\"tryNext\",this.websocket.reconnect(\"tryNext\")}close(){const e=\"4.22.0\"===Cy?\"0.0.1\":Cy;this.reqId+=1,\"connected\"===this.websocket.state?(this.websocket.sendMessage({command:\"request\",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:\"DestroyWorker\"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case bb.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Jy.warning(\"live stream response already exists stream\");case bb.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case bb.LIVE_STREAM_RESPONSE_BAD_STREAM:case bb.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new mb(tv.LIVE_STREAMING_INVALID_ARGUMENT,\"\",{code:e.code}).throw();case bb.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(\"UnpublishStream\"===e.serverResponse.command)return;throw new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"live stream response wm worker not exist\",{retry:!0});case bb.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new mb(tv.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,\"\",{code:e.code}).throw();case bb.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new mb(tv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(yb.WARNING,t,e.serverResponse.url)}case bb.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new mb(tv.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(yb.WARNING,t,e.serverResponse.url)}case bb.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"live stream response wm worker not exist\",{retry:!0});case bb.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new mb(tv.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,\"\",{code:e.code}).throw();case bb.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new mb(tv.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(yb.WARNING,t,e.serverResponse.url)}case bb.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"\",{code:e.code}).throw();case bb.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"live stream resource limit\",{retry:!0,changeAddress:!0});case bb.LIVE_STREAM_RESPONSE_WORKER_LOST:case bb.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(\"UnpublishStream\"===e.serverResponse.command)return;throw new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"error fail send message\",{retry:!0,changeAddress:!0});case bb.ERROR_FAIL_SEND_MESSAGE:if(\"UnpublishStream\"===e.serverResponse.command)return;if(\"UpdateTranscoding\"===e.serverResponse.command||\"ControlStream\"===e.serverResponse.command)return new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"error fail send message\",{code:e.code}).throw();throw new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"error fail send message\",{retry:!0,changeAddress:!0});case bb.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case bb.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case bb.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case bb.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new mb(tv.LIVE_STREAMING_CDN_ERROR,\"\",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{\"connected\"===this.websocket.state&&this.request(\"ping\",{}).catch(ey)}),6e3)}}function _K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function EK(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_K(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_K(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class fK extends mv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hy,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hy;super(),ng(this,\"onLiveStreamWarning\",void 0),ng(this,\"onLiveStreamError\",void 0),ng(this,\"spec\",void 0),ng(this,\"retryTimeout\",1e4),ng(this,\"connection\",void 0),ng(this,\"httpRetryConfig\",void 0),ng(this,\"wsRetryConfig\",void 0),ng(this,\"streamingTasks\",new Map),ng(this,\"isStartingStreamingTask\",!1),ng(this,\"taskMutex\",new ly(\"live-streaming\")),ng(this,\"cancelToken\",pI.CancelToken.source()),ng(this,\"transcodingConfig\",void 0),ng(this,\"uapResponse\",void 0),ng(this,\"lastTaskId\",1),ng(this,\"statusError\",new Map),this.spec=e,this.httpRetryConfig=i,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=EK(EK({},vb),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(Jy.debug(\"[\".concat(this.spec.clientId,\"] set transcoding config, fix video codec profile: \").concat(t.videoCodecProfile,\" -> 100\")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>EK(EK(EK({},Rb),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){dv(e.width)||ov(e.width,\"config.width\",0,1e4),dv(e.height)||ov(e.height,\"config.height\",0,1e4),dv(e.videoBitrate)||ov(e.videoBitrate,\"config.videoBitrate\",1,1e6),dv(e.videoFrameRate)||ov(e.videoFrameRate,\"config.videoFrameRate\"),dv(e.lowLatency)||nv(e.lowLatency,\"config.lowLatency\"),dv(e.audioSampleRate)||rv(e.audioSampleRate,\"config.audioSampleRate\",[32e3,44100,48e3]),dv(e.audioBitrate)||ov(e.audioBitrate,\"config.audioBitrate\",1,128),dv(e.audioChannels)||rv(e.audioChannels,\"config.audioChannels\",[1,2,3,4,5]),dv(e.videoGop)||ov(e.videoGop,\"config.videoGop\"),dv(e.videoCodecProfile)||rv(e.videoCodecProfile,\"config.videoCodecProfile\",[66,77,100]),dv(e.userCount)||ov(e.userCount,\"config.userCount\",0,17),dv(e.backgroundColor)||ov(e.backgroundColor,\"config.backgroundColor\",0,16777215),dv(e.userConfigExtraInfo)||av(e.userConfigExtraInfo,\"config.userConfigExtraInfo\",0,4096,!1),e.transcodingUsers&&!dv(e.transcodingUsers)&&(cv(e.transcodingUsers,\"config.transcodingUsers\"),e.transcodingUsers.forEach(((e,t)=>{Sb(e.uid),dv(e.x)||ov(e.x,\"transcodingUser[\".concat(t,\"].x\"),0,1e4),dv(e.y)||ov(e.y,\"transcodingUser[\".concat(t,\"].y\"),0,1e4),dv(e.width)||ov(e.width,\"transcodingUser[\".concat(t,\"].width\"),0,1e4),dv(e.height)||ov(e.height,\"transcodingUser[\".concat(t,\"].height\"),0,1e4),dv(e.zOrder)||ov(e.zOrder-1,\"transcodingUser[\".concat(t,\"].zOrder\"),0,100),dv(e.alpha)||ov(e.alpha,\"transcodingUser[\".concat(t,\"].alpha\"),0,1,!1)}))),dv(e.watermark)||Ib(e.watermark,\"watermark\"),dv(e.backgroundImage)||Ib(e.backgroundImage,\"backgroundImage\"),e.images&&!dv(e.images)&&(cv(e.images,\"config.images\"),e.images.forEach(((e,t)=>{Ib(e,\"images[\".concat(t,\"]\"))})))}(t);const i=[];t.images&&i.push(...t.images.map((e=>EK(EK(EK({},Cb),e),{},{zOrder:255})))),t.backgroundImage&&(i.push(EK(EK(EK({},Cb),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(i.push(EK(EK(EK({},Cb),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=i,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>EK({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const n=(t.userConfigs||[]).map((e=>\"number\"==typeof e.uid?Gh.resolve(e.uid):bU(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await Gh.all(n)).forEach(((e,i)=>{t.userConfigs&&t.userConfigs[i]&&(t.userConfigs[i].uid=e)})),this.transcodingConfig=t,this.connection)try{var r;const e=await this.connection.request(\"request\",{clientRequest:{command:\"UpdateTranscoding\",transcodingConfig:this.transcodingConfig}},!1,{command:\"UpdateTranscoding\",workerType:1,requestByUser:!0,tid:Array.from(Jw(r=this.streamingTasks).call(r)).map((e=>e.taskId)).join(\"#\")});Jy.debug(\"[\".concat(this.spec.clientId,\"] update live transcoding config success, code: \").concat(e.code,\", config:\"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{Jy.warning(\"[\".concat(this.spec.clientId,\"] live streaming receive error\"),e.toString(),\"try to republish\",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{Jy.debug(\"[\".concat(this.spec.clientId,\"] live streaming republish \").concat(t.url,\" success\"))})).catch((e=>{Jy.error(\"[\".concat(this.spec.clientId,\"] live streaming republish failed\"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}async startLiveStreamingTask(e,t,i){if(!this.transcodingConfig&&t===gb.TRANSCODE)throw new mb(tv.INVALID_OPERATION,\"[LiveStreaming] no transcoding config found, can not start transcoding streaming task\");const n={command:\"PublishStream\",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};Jy.debug(\"[\".concat(this.spec.clientId,\"] start live streaming \").concat(e,\", mode: \").concat(t));const r=await this.taskMutex.lock();if(!this.connection&&i)return void r();if(this.streamingTasks.get(e)&&!i)return r(),new mb(tv.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw r(),e}switch(t){case gb.TRANSCODE:n.transcodingConfig=EK({},this.transcodingConfig);case gb.RAW:}this.uapResponse&&this.uapResponse.vid&&(n.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const s=new Gh(((t,n)=>{Qv(this.retryTimeout).then((()=>{if(i)return n(i);const t=this.statusError.get(e);return t?(this.statusError.delete(e),n(t)):void 0}))})),a=await Gh.race([this.connection.request(\"request\",{clientRequest:n},!0,{url:e,command:\"PublishStream\",workerType:t===gb.TRANSCODE?1:2,requestByUser:!i,tid:o.toString()}),s]);this.isStartingStreamingTask=!1,Jy.debug(\"[\".concat(this.spec.clientId,\"] live streaming started, code: \").concat(a.code)),this.streamingTasks.set(e,{clientRequest:n,mode:t,url:e,taskId:o}),r()}catch(n){if(r(),this.isStartingStreamingTask=!1,!n.data||!n.data.retry||i)throw n;return n.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,n)):await this.startLiveStreamingTask(e,t,n)}}stopLiveStreamingTask(e){return new Gh(((t,i)=>{const n=this.streamingTasks.get(e);if(!n||!this.connection)return new mb(tv.UNEXPECTED_ERROR,\"can not find streaming task to stop\").throw();const r=n.mode;n.abortTask=()=>{Jy.debug(\"[\".concat(this.spec.clientId,\"] stop live streaming success(worker exception)\")),this.streamingTasks.delete(e),t()},this.connection.request(\"request\",{clientRequest:{command:\"UnpublishStream\",url:n.url}},!1,{url:e,command:\"UnPublishStream\",workerType:r===gb.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((i=>{Jy.debug(\"[\".concat(this.spec.clientId,\"] stop live streaming success, code: \").concat(i.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&(this.connection&&this.connection.close(),this.connection=void 0),t()})).catch(i)}))}resetAllTask(){var e;const t=Array.from(Jw(e=this.streamingTasks).call(e));this.terminate();for(const e of t)this.startLiveStreamingTask(e.url,e.mode).catch((t=>{this.onLiveStreamError&&this.onLiveStreamError(e.url,t)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=pI.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new mb(tv.UNEXPECTED_ERROR,\"live streaming connection has already connected\");const t=await Pv(this,Ab.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new pK(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(yb.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(yb.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(yb.REQUEST_NEW_ADDRESS,((t,i)=>{if(!this.connection)return i(new mb(tv.UNEXPECTED_ERROR,\"can not get new live streaming address list\"));Pv(this,Ab.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(i)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||\"empty_url\",i=this.streamingTasks.get(t),n=e.reason;switch(e.code){case bb.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case bb.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case bb.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case bb.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const n=new mb(tv.LIVE_STREAMING_CDN_ERROR,\"\",{code:e.code});if(i)return Jy.error(n.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,n);if(!this.isStartingStreamingTask)return;this.statusError.set(t,n)}case bb.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new mb(tv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case bb.LIVE_STREAM_RESPONSE_WORKER_LOST:case bb.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var r;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(Jw(r=this.streamingTasks).call(r));for(const i of t)i.abortTask?i.abortTask():(Jy.warning(\"[\".concat(this.spec.clientId,\"] publish stream status code\"),e.code,\"try to republish\",i.url),this.startLiveStreamingTask(i.url,i.mode,new mb(tv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"\",{code:e.code})).then((()=>{Jy.debug(\"[\".concat(this.spec.clientId,\"] republish live stream success\"),i.url)})).catch((e=>{Jy.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(i.url,e)})));return}}}hasUrl(e){return this.streamingTasks.has(e)}}const mK={name:\"LiveStreaming\",create:function(e){return new fK(e.joinInfo,e.websocketRetryConfig||hy,e.httpRetryConfig||hy)}};function TK(e){let t=OK();return function(e,t){let i=e.appId;void 0!==i&&(WK(t,10),UK(t,i));let n=e.cid;void 0!==n&&(WK(t,16),WK(t,n));let r=e.cname;void 0!==r&&(WK(t,26),UK(t,r));let o=e.deviceId;void 0!==o&&(WK(t,34),UK(t,o));let s=e.elapse;void 0!==s&&(WK(t,40),HK(t,s));let a=e.fileSize;void 0!==a&&(WK(t,48),HK(t,bK(a)));let c=e.height;void 0!==c&&(WK(t,56),HK(t,bK(c)));let d=e.jpg;void 0!==d&&(WK(t,66),WK(t,d.length),function(e,t){let i=LK(e,t.length);e.bytes.set(t,i)}(t,d));let l=e.networkType;void 0!==l&&(WK(t,72),HK(t,bK(l)));let u=e.osType;void 0!==u&&(WK(t,80),HK(t,bK(u)));let h=e.requestId;void 0!==h&&(WK(t,90),UK(t,h));let p=e.sdkVersion;void 0!==p&&(WK(t,98),UK(t,p));let _=e.sequence;void 0!==_&&(WK(t,104),HK(t,bK(_)));let E=e.sid;void 0!==E&&(WK(t,114),UK(t,E));let f=e.timestamp;void 0!==f&&(WK(t,120),HK(t,f));let m=e.uid;void 0!==m&&(WK(t,128),WK(t,m));let T=e.vid;void 0!==T&&(WK(t,136),WK(t,T));let S=e.width;void 0!==S&&(WK(t,144),HK(t,bK(S)));let g=e.service;void 0!==g&&(WK(t,152),WK(t,g));let R=e.callbackData;void 0!==R&&(WK(t,162),UK(t,R));let C=e.jpgEncryption;void 0!==C&&(WK(t,168),WK(t,C));let I=e.requestType;void 0!==I&&(WK(t,176),WK(t,I));let v=e.scorePorn;void 0!==v&&(WK(t,185),jK(t,v));let y=e.scoreSexy;void 0!==y&&(WK(t,193),jK(t,y));let A=e.scoreNeutral;void 0!==A&&(WK(t,201),jK(t,A));let b=e.scene;void 0!==b&&(WK(t,208),WK(t,b));let w=e.ossFilePrefix;void 0!==w&&(WK(t,218),UK(t,w));let O=e.serviceVendor;if(void 0!==O)for(let e of O){WK(t,226);let i=OK();RK(e,i),WK(t,i.limit),xK(t,i),NK(i)}}(e,t),function(e){let t=e.bytes,i=e.limit;return t.length===i?t:t.subarray(0,i)}(t)}function SK(e){return function(e){let t={};e:for(;!PK(e);){let i=GK(e);switch(i>>>3){case 0:break e;case 1:t.code=GK(e);break;case 2:t.msg=MK(e,GK(e));break;case 3:{let i=CK(e);t.data=gK(e),e.limit=i;break}default:IK(e,7&i)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function gK(e){let t={};e:for(;!PK(e);){let i=GK(e);switch(i>>>3){case 0:break e;case 1:t.requestId=MK(e,GK(e));break;case 2:t.requestType=GK(e)>>>0;break;case 3:t.scorePorn=BK(e);break;case 4:t.scoreSexy=BK(e);break;case 5:t.scoreNeutral=BK(e);break;case 6:t.requestScene=GK(e)>>>0;break;case 7:t.scene=GK(e)>>>0;break;default:IK(e,7&i)}}return t}function RK(e,t){let i=e.service;void 0!==i&&(WK(t,8),WK(t,i));let n=e.vendor;void 0!==n&&(WK(t,16),WK(t,n));let r=e.token;void 0!==r&&(WK(t,26),UK(t,r));let o=e.callbackUrl;void 0!==o&&(WK(t,34),UK(t,o))}function CK(e){let t=GK(e),i=e.limit;return e.limit=e.offset+t,i}function IK(e,t){switch(t){case 0:for(;128&VK(e););break;case 2:DK(e,GK(e));break;case 5:DK(e,4);break;case 1:DK(e,8);break;default:throw new Error(\"Unimplemented type: \"+t)}}let vK=new Float32Array(1);new Uint8Array(vK.buffer);let yK=new Float64Array(1),AK=new Uint8Array(yK.buffer);function bK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let wK=[];function OK(){const e=wK.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function NK(e){wK.push(e)}function DK(e,t){if(e.offset+t>e.limit)throw new Error(\"Skip past limit\");e.offset+=t}function PK(e){return e.offset>=e.limit}function LK(e,t){let i=e.bytes,n=e.offset,r=e.limit,o=n+t;if(o>i.length){let t=new Uint8Array(2*o);t.set(i),e.bytes=t}return e.offset=o,o>r&&(e.limit=o),n}function kK(e,t){let i=e.offset;if(i+t>e.limit)throw new Error(\"Read past limit\");return e.offset+=t,i}function MK(e,t){let i=kK(e,t),n=String.fromCharCode,r=e.bytes,o=\"ï¿½\",s=\"\";for(let e=0;e<t;e++){let a,c,d,l,u=r[e+i];0==(128&u)?s+=n(u):192==(224&u)?e+1>=t?s+=o:(a=r[e+i+1],128!=(192&a)?s+=o:(l=(31&u)<<6|63&a,l<128?s+=o:(s+=n(l),e++))):224==(240&u)?e+2>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],32896!=(49344&(a|c<<8))?s+=o:(l=(15&u)<<12|(63&a)<<6|63&c,l<2048||l>=55296&&l<=57343?s+=o:(s+=n(l),e+=2))):240==(248&u)?e+3>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],d=r[e+i+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(l=(7&u)<<18|(63&a)<<12|(63&c)<<6|63&d,l<65536||l>1114111?s+=o:(l-=65536,s+=n(55296+(l>>10),56320+(1023&l)),e+=3))):s+=o}return s}function UK(e,t){let i=t.length,n=0;for(let e=0;e<i;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<i&&(r=(r<<10)+t.charCodeAt(++e)-56613888),n+=r<128?1:r<2048?2:r<65536?3:4}WK(e,n);let r=LK(e,n),o=e.bytes;for(let e=0;e<i;e++){let n=t.charCodeAt(e);n>=55296&&n<=56319&&e+1<i&&(n=(n<<10)+t.charCodeAt(++e)-56613888),n<128?o[r++]=n:(n<2048?o[r++]=n>>6&31|192:(n<65536?o[r++]=n>>12&15|224:(o[r++]=n>>18&7|240,o[r++]=n>>12&63|128),o[r++]=n>>6&63|128),o[r++]=63&n|128)}}function xK(e,t){let i=LK(e,t.limit),n=e.bytes,r=t.bytes;for(let e=0,o=t.limit;e<o;e++)n[e+i]=r[e]}function VK(e){return e.bytes[kK(e,1)]}function FK(e,t){let i=LK(e,1);e.bytes[i]=t}function BK(e){let t=kK(e,8),i=e.bytes;return AK[0]=i[t++],AK[1]=i[t++],AK[2]=i[t++],AK[3]=i[t++],AK[4]=i[t++],AK[5]=i[t++],AK[6]=i[t++],AK[7]=i[t++],yK[0]}function jK(e,t){let i=LK(e,8),n=e.bytes;yK[0]=t,n[i++]=AK[0],n[i++]=AK[1],n[i++]=AK[2],n[i++]=AK[3],n[i++]=AK[4],n[i++]=AK[5],n[i++]=AK[6],n[i++]=AK[7]}function GK(e){let t,i=0,n=0;do{t=VK(e),i<32&&(n|=(127&t)<<i),i+=7}while(128&t);return n}function WK(e,t){for(t>>>=0;t>=128;)FK(e,127&t|128),t>>>=7;FK(e,t)}function HK(e,t){let i=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,o=0===r?0===n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10,s=LK(e,o),a=e.bytes;switch(o){case 10:a[s+9]=r>>>7&1;case 9:a[s+8]=9!==o?128|r:127&r;case 8:a[s+7]=8!==o?n>>>21|128:n>>>21&127;case 7:a[s+6]=7!==o?n>>>14|128:n>>>14&127;case 6:a[s+5]=6!==o?n>>>7|128:n>>>7&127;case 5:a[s+4]=5!==o?128|n:127&n;case 4:a[s+3]=4!==o?i>>>21|128:i>>>21&127;case 3:a[s+2]=3!==o?i>>>14|128:i>>>14&127;case 2:a[s+1]=2!==o?i>>>7|128:i>>>7&127;case 1:a[s]=1!==o?128|i:127&i}}function KK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const YK=new Map([[\"moderation\",1],[\"supervise\",2]]);function qK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}class zK extends mv{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(Zb.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Jn(t=e.map((e=>YK.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),ng(this,\"name\",\"AgoraRTCVideoContentInspect\"),ng(this,\"_connectionState\",Xb.CONNECTING),ng(this,\"_innerConnectionState\",void 0),ng(this,\"sequence\",0),ng(this,\"inspectStartTime\",void 0),ng(this,\"workerManagerConnection\",void 0),ng(this,\"workerConnection\",void 0),ng(this,\"workerMessageLengthLimit\",void 0),ng(this,\"inspectIntervalMinimum\",void 0),ng(this,\"qualityRatio\",void 0),ng(this,\"_connectInfo\",void 0),ng(this,\"_cancelTokenSource\",pI.CancelToken.source()),ng(this,\"_retryConfig\",void 0),ng(this,\"wmSequence\",0),ng(this,\"inspectInterval\",void 0),ng(this,\"inspectTimer\",null),ng(this,\"ossFilePrefix\",void 0),ng(this,\"extraInfo\",void 0),ng(this,\"_inspectType\",void 0),ng(this,\"_inspectMode\",void 0),ng(this,\"_quality\",1),ng(this,\"qualityTimer\",null),ng(this,\"_inspectId\",void 0),ng(this,\"_needWorkUrlOnly\",!1),ng(this,\"inspectImage\",(()=>{if(this.connectionState!==Xb.CONNECTED)throw new mb(tv.OPERATION_ABORTED,\"content inspect service connection status is \".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===Xb.CONNECTED?this.requestToInspectImage():Jy.debug(\"[\".concat(this._inspectId,\"] Inspect State is not connected , \"),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=Zv(5,\"inspect-\"),this.workerMessageLengthLimit=Oy(\"VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT\"),this.inspectIntervalMinimum=Oy(\"VIDEO_INSPECT_INTERVAL_MINIMUM\"),this.qualityRatio=Oy(\"VIDEO_INSPECT_QUALITY_RATIO\"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new yw(\"worker-manager-\"+this._inspectId,hy),this.on(Zb.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,Jy.debug(\"[\".concat(this._inspectId,\"] Inspect operation :\").concat(Qb[e],\" \").concat(t||\"\"))})),this.handleWorkerManagerEvents(),this.workerConnection=new yw(\"worker-\"+this._inspectId,hy),this.handleWorkerEvents()}async init(e,t){this.emit(Zb.STATE_CHANGE,Qb.CONNECT_AP),this._connectInfo=e;const i=this._cancelTokenSource.token;return this._retryConfig=t,new Gh(((n,r)=>{this.on(Zb.CONNECTION_STATE_CHANGE,((e,t)=>{t===Xb.CONNECTED&&n()})),this.requestAP(e,i,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{r(e)}))}))}async requestAP(e,t,i){const n=Oy(\"WEBCS_DOMAIN\").map((e=>\"https://\".concat(e,\"/api/v1\"))),r=await function(e,t,i,n){let{appId:r,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;RU++;const l=\"image_moderation_api\",u={service_name:l,json_body:JSON.stringify({appId:r,areaCode:o,cname:s,command:\"allocateEdge\",requestId:RU,seq:RU,sid:a,token:c,ts:Date.now(),uid:d+\"\"})};let h,p,_=e[0];return _y((async()=>{h=Date.now();const e=await $M(_,{data:u,cancelToken:i,headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"61\"},params:{action:\"wrtc_gateway\"}});if(p=Date.now()-h,0!==e.code){const t=new mb(tv.UNEXPECTED_RESPONSE,\"image inspect ap error, code\"+e.code,{retry:!0,responseTime:p});throw Jy.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new mb(tv.UNEXPECTED_RESPONSE,\"image inspect ap error, code: \".concat(t.code,\", reason: \").concat(t.reason),{code:t.code,responseTime:p});throw Jy.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new mb(tv.UNEXPECTED_RESPONSE,\"image inspect ap empty server\",{code:t.code,responseTime:p});throw Jy.error(e.toString()),e}const n=Oy(\"VIDEO_INSPECT_WORKER_MANAGER_HOST\"),r=Oy(\"VIDEO_INSPECT_WORKER_MANAGER_PORT\");return{addressList:t.servers.map((e=>{let{address:t,wss:i}=e;if(t&&i)return\"wss://\".concat(t.replace(/\\./g,\"-\"),\".\").concat(n,\":\").concat(r||i)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,i)=>(rA.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===i,responseTime:p,serverIp:e[i%e.length]}),!1)),((t,i)=>(rA.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[i%e.length]}),!!(t.code!==tv.OPERATION_ABORTED&&t.code!==tv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(_=e[(i+1)%e.length],!0))),n)}(n,e,t,i);this.emit(Zb.STATE_CHANGE,Qb.AP_CONNECTED);const{addressList:o}=r;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(Zb.STATE_CHANGE,Qb.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(fb.CONNECTED,(async()=>{this.emit(Zb.STATE_CHANGE,Qb.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+\"\",sdkVersion:\"4.22.0\",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:\"join\"}},!0)})),this.workerManagerConnection.on(fb.CLOSED,(()=>{this._innerConnectionState<Qb.GET_WORKER_MANAGER_RESPONSE&&Jy.debug(\"[\".concat(this._inspectId,\"] Inspect worker manager is closed before connecting worker\"))})),this.workerManagerConnection.on(fb.FAILED,(()=>{this._innerConnectionState<Qb.GET_WORKER_MANAGER_RESPONSE&&Jy.debug(\"[\".concat(this._inspectId,\"] Connecting inspect worker manager is failed before connecting worker\"))})),this.workerManagerConnection.on(fb.RECONNECTING,(()=>{this._innerConnectionState<Qb.GET_WORKER_MANAGER_RESPONSE&&Jy.debug(\"[\".concat(this._inspectId,\"] Inspect worker manager is reconnecting before connecting worker\"))})),this.workerManagerConnection.on(fb.ON_MESSAGE,(async e=>{this.emit(Zb.STATE_CHANGE,Qb.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const i=JSON.parse(e.data);if(200!==i.code)throw Jy.error(\"[\".concat(this._inspectId,\"] Unexpected code \").concat(i.code,\" from worker manager\")),new mb(tv.UNEXPECTED_RESPONSE,\"response code of worker is unexpected\",i);if(!(i.serverResponse&&i.serverResponse.portWss&&t))throw Jy.error(\"[\".concat(this._inspectId,\"] Unexpected content from worker manager : \").concat(JSON.stringify(i))),new mb(tv.UNEXPECTED_RESPONSE,\"response content of worker is unexpected\",i);{const e=Oy(\"VIDEO_INSPECT_WORKER_PORT\")||i.serverResponse.portWss,n=t.replace(/:\\d+\\/?$/,\":\".concat(e));this.emit(Zb.STATE_CHANGE,Qb.CONNECT_WORKER,n),this._needWorkUrlOnly?this.emit(Zb.REQUEST_NEW_WORKER_URL,n):await this.connectWorker(n)}})),this.workerManagerConnection.on(fb.WILL_RECONNECT,((e,t,i)=>{i(e)})),this.workerManagerConnection.on(fb.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(fb.CONNECTED,(async()=>{this.emit(Zb.STATE_CHANGE,Qb.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Xb.CONNECTED})),this.workerConnection.on(fb.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const i=SK(new Uint8Array(e.data));if(Oy(\"SHOW_VIDEO_INSPECT_WORKER_MESSAGE\")&&Jy.debug(\"[\".concat(this._inspectId,\"] Response message for worker of inspect content \"),JSON.stringify(i)),200===i.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&\"supervise\"===this.inspectType[0])return void this.emit(Zb.INSPECT_RESULT,void 0,void 0);if(i.data&&i.data.scorePorn&&i.data.scoreSexy&&i.data.scoreNeutral){var t;const e={porn:i.data.scorePorn,sexy:i.data.scoreSexy,neutral:i.data.scoreNeutral},n=Jn(t=Object.keys(e)).call(t,((t,i)=>e[t]>e[i]?t:i),\"porn\"),r=Object.keys(e).find((e=>e===n));this.emit(Zb.INSPECT_RESULT,r)}else this.emit(Zb.INSPECT_RESULT,void 0,new mb(tv.UNEXPECTED_RESPONSE,i.code+\"\",\"There is an unexpected data on message\"))}else this.emit(Zb.INSPECT_RESULT,void 0,new mb(tv.UNEXPECTED_RESPONSE,i.code+\"\",i.msg))}else Jy.error(\"[\".concat(this._inspectId,\"] Unexpected message type from worker\")),this.emit(Zb.INSPECT_RESULT,void 0,new mb(tv.UNEXPECTED_RESPONSE,\"invalid worker message type\"))})),this.workerConnection.on(fb.CLOSED,(()=>{this.connectionState=Xb.CLOSED})),this.workerConnection.on(fb.FAILED,(()=>{this.connectionState=Xb.CLOSED})),this.workerConnection.on(fb.RECONNECTING,(()=>{this.connectionState=this.connectionState===Xb.CONNECTED?Xb.RECONNECTING:Xb.CONNECTING})),this.workerConnection.on(fb.WILL_RECONNECT,((e,t,i)=>{\"recover\"===e&&i(e),i(\"tryNext\")})),this.workerConnection.on(fb.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(Zb.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}async requestToInspectImage(){this.sequence++;const e=kv(this,Zb.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(Zb.INSPECT_RESULT,void 0,new mb(tv.INVALID_OPERATION,\"Only the track being played can be inspected\"));const i=await this.generateRequestData(e,t);this.workerConnection.sendMessage(i,!0,!0)}else this.emit(Zb.INSPECT_RESULT,void 0,new mb(tv.INVALID_OPERATION,\"Only the track being published can be inspected\"))}async generateRequestData(e,t){let{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage(\"image/jpeg\",this.quality),l=await lL(d,i,n),u=this.sequence+\"-\"+r+\"-\"+a+\"-\"+c+\"-\"+Zv(12,\"\"),h={appId:i,cid:r,cname:n,deviceId:\"\",elapse:qK(Number(c-this.inspectStartTime)),fileSize:l.byteLength,jpgEncryption:2,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:u,sdkVersion:\"4.22.0\",sequence:this.sequence,sid:s,timestamp:qK(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const p=TK(h);if(p.byteLength<this.workerMessageLengthLimit){if(Oy(\"SHOW_VIDEO_INSPECT_WORKER_MESSAGE\")){const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?KK(Object(i),!0).forEach((function(t){ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KK(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},h);delete e.jpg,Jy.debug(\"[\".concat(this._inspectId,\"] Request message for worker of inspect content \"),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=pI.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Xb.CLOSED,this.emit(Zb.STATE_CHANGE,Qb.CLOSED)}}const JK={name:\"ContentInspect\",create:function(e){let{config:t}=e;return function(e){if(!e)throw new mb(tv.INVALID_PARAMS,\"inspectConfig is necessary.\");if(!e.inspectType||!Array.isArray(e.inspectType))throw new mb(tv.INVALID_PARAMS,\"inspectConfig.inspectType is necessary and is an instance of Array.\");{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Dn(t=[\"supervise\",\"moderation\"]).call(t,e))throw new mb(tv.INVALID_PARAMS,\"\".concat(e,\" is not a valid inspect type.\"))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new mb(tv.INVALID_PARAMS,\"inspectConfig.extraInfo length cannot exceed 1024 bytes\")}(t),new zK(t)}};wy(\"PROCESS_ID\",\"process-\".concat(Zv(8,\"\"),\"-\").concat(Zv(4,\"\"),\"-\").concat(Zv(4,\"\"),\"-\").concat(Zv(4,\"\"),\"-\").concat(Zv(12,\"\"))),function(){let e;try{e=window.localStorage.getItem(\"websdk_ng_global_parameter\")}catch(e){return void Jy.error(\"Error loading sdk config\",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),i=Date.now();Jy.debug(\"Loading global parameters from cache\",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(by,e)){const{value:n,expires:r}=t[e];if(r&&r<=i)return;Ny[e]=n,by[e]=n}}))}catch(t){Jy.error(\"Error loading mutableParamsCache: \".concat(e),t.message)}}(),Array.isArray(Ny.AREAS)&&Ny.AREAS.length>0&&cU(Ny.AREAS,!0);const XK=(e,t,i)=>{Jy.debug(\"setParameter key:\".concat(e,\", value:\").concat(JSON.stringify(t))),wy(e,t,i)};pF(lK,!1),pF(mK,!1),pF(wB,!1),pF(JK,!1),pF(aK,!1);const QK=function(e){const t=new mv,i=e,n={getListeners:t.getListeners.bind(t),on:(e,i)=>(function(e,t){e===ew.SECURITY_POLICY_VIOLATION&&bj(t,!0)}(e,i),t.on.bind(t)(e,i)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return yj(yj({},i),n)}({__TRACK_LIST__:JD,VERSION:Cy,BUILD:Ay,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:XK,getParameter:Oy,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const i=await async function(e){let t;return LD().supportUnifiedPlan?(e.addTransceiver(\"video\",{direction:\"recvonly\"}),e.addTransceiver(\"audio\",{direction:\"recvonly\"}),t=(await e.createOffer()).sdp):t=(await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,t}(t);if(!i)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push(\"VP8\"),e.match(/ VP9/i)&&t.video.push(\"VP9\"),e.match(/ AV1/i)&&t.video.push(\"AV1\"),e.match(/ H264/i)&&t.video.push(\"H264\"),e.match(/ H265/i)&&t.video.push(\"H265\"),e.match(/ opus/i)&&t.audio.push(\"OPUS\"),e.match(/ PCMU/i)&&t.audio.push(\"PCMU\"),e.match(/ PCMA/i)&&t.audio.push(\"PCMA\"),e.match(/ G722/i)&&t.audio.push(\"G722\"),t}(i)}catch(e){throw new mb(tv.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=rA.reportApiInvoke(null,{name:gv.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Rv.TRACER});let t=!1;try{const e=window.RTCPeerConnection,i=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket;t=!!(e&&i&&n),t&&zI()&&MI(75)&&(new e).close()}catch(e){return Jy.error(\"check system requirement failed: \",e),!1}let i=!1;const n=vI();n.name===gI.CHROME&&Number(n.version)>=58&&(\"WebKit\"!==CI.engine.name||function(){const e=vI();if(wI()){if(e.os===SI.MAC_OS)return!0;if(e.os===SI.IOS){const e=CI.os.version&&CI.os.version.split(\".\");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}())&&(i=!0),(n.name===gI.FIREFOX&&Number(n.version)>=56||n.name===gI.OPERA&&Number(n.version)>=45||n.name===gI.SAFARI&&Number(n.version)>=11||\"WebKit\"===n.name&&(LI()||KI())&&n.osVersion&&Number(n.osVersion.split(\".\")[0])>=11||YI()||vI().name===gI.QQ)&&(i=!0),Jy.debug(\"checkSystemRequirements, api:\",t,\"browser\",i);const r=t&&i;return e.onSuccess(r),r},getDevices:function(e){return YP.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return YP.getRecordingDevices(e)},getCameras:function(e){return YP.getCamerasDevices(e)},getElectronScreenSources:VP,getPlaybackDevices:function(e){return YP.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:\"vp8\",audioCodec:\"opus\",mode:\"rtc\"};const i=rA.reportApiInvoke(null,{name:gv.CREATE_CLIENT,options:[t],tag:Rv.TRACER});try{!function(e){rv(e.codec,\"config.codec\",[\"vp8\",\"vp9\",\"av1\",\"h264\",\"h265\"]),rv(e.mode,\"config.mode\",[\"rtc\",\"live\",\"p2p\"]),void 0!==e.audioCodec&&rv(e.audioCodec,\"config.audioCodec\",[\"opus\",\"pcmu\",\"pcma\",\"g722\"]),void 0!==e.proxyServer&&av(e.proxyServer,\"config.proxyServer\",1,1e4),void 0!==e.turnServer&&Av(e.turnServer),void 0!==e.httpRetryConfig&&Cv(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Cv(e.websocketRetryConfig)}(t)}catch(e){throw i.onError(e),e}return(VI(16,0,!0)||FI(16,0,!0))&&(\"vp9\"===t.codec&&(t.codec=\"vp8\",Jy.debug(\"browser not support vp9, force use vp8\")),wy(\"UNSUPPORTED_VIDEO_CODEC\",[\"vp9\"])),void 0===t.audioCodec&&(t.audioCodec=\"opus\"),i.onSuccess(),new Tj(mj(mj({forceWaitGatewayResponse:!0},t),{},{role:Dn(e=[\"rtc\",\"p2p\"]).call(e,t.mode)?\"host\":t.role||\"audience\"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Oy(\"CAMERA_CAPTURE_CONFIG\"),i=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_CAM_VIDEO_TRACK,options:[IP({},e),t]});t&&(e.encoderConfig=t);const n=aL(e),r=Zv(8,\"track-cam-\");let o=null;Jy.info(\"start create camera video track with config\",JSON.stringify(e),\"trackId\",r);try{o=(await GP({video:n},r)).getVideoTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new iv(tv.UNEXPECTED_ERROR,\"can not find track in media stream\");return i.onError(e),e.throw(Jy)}e.optimizationMode&&Hk(r,o,e,HD(e.encoderConfig));const s=new Wk(o,e,n,e.scalabiltyMode?YD(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return i.onSuccess(s.getTrackId()),Jy.info(\"create camera video success, trackId:\",r),s},createCustomVideoTrack:function(e){const t=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),i=new Gk(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?YD(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,Zv(8,\"track-cus-\"),[ZD.CUSTOM_TRACK]);return t.onSuccess(i.getTrackId()),Jy.info(\"create custom video track success with config\",e,\"trackId\",i.getTrackId()),i},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"disable\";const i=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_SCREEN_VIDEO_TRACK,options:[IP({},e),t]});e.encoderConfig?\"string\"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig=\"1080p_2\";const n=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&OI()&&(t.extensionId=e.extensionId);const{displaySurface:i,selfBrowserSurface:n,surfaceSwitching:r,systemAudio:o}=e;(kI(107)||UI(107)||BI(93))&&(i&&(rv(i,\"displaySurface\",[\"browser\",\"window\",\"monitor\"]),t.displaySurface=i),n?(rv(n,\"selfBrowserSurface\",[\"exclude\",\"include\"]),t.selfBrowserSurface=n):t.selfBrowserSurface=\"include\",r&&(rv(r,\"surfaceSwitching\",[\"exclude\",\"include\"]),t.surfaceSwitching=r)),(kI(105)||UI(105)||BI(91))&&o&&(rv(o,\"systemAudio\",[\"exclude\",\"include\"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const s=e.encoderConfig?KD(e.encoderConfig):null;return t.mandatory={chromeMediaSource:\"desktop\",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&(s.frameRate&&(\"number\"==typeof s.frameRate?(t.mandatory.maxFrameRate=s.frameRate,t.mandatory.minFrameRate=s.frameRate):(t.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,t.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),t.frameRate=s.frameRate),s.width&&(t.width=s.width),s.height&&(t.height=s.height)),t}(e),r=Zv(8,\"track-scr-v-\");let o=null,s=null;const a=LD();if(!a.supportShareAudio&&\"enable\"===t){const e=new iv(tv.NOT_SUPPORTED,\"your browser or platform is not support share-screen with audio\");return i.onError(e),e.throw(Jy)}Jy.info(\"start create screen video track with config\",e,\"withAudio\",t,\"trackId\",r);try{const e=await GP({screen:n,screenAudio:\"auto\"===t?a.supportShareAudio:\"enable\"===t},r);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new iv(tv.UNEXPECTED_ERROR,\"can not find track in media stream\");return i.onError(e),e.throw(Jy)}if(!s&&\"enable\"===t){o&&o.stop();const e=new iv(tv.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw(Jy)}e.optimizationMode||(e.optimizationMode=\"detail\"),e.optimizationMode&&(Hk(r,o,e,e.encoderConfig&&KD(e.encoderConfig)||void 0),e.encoderConfig&&\"string\"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new Gk(o,e.encoderConfig?KD(e.encoderConfig):{},e.scalabiltyMode?YD(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r,[ZD.SCREEN_TRACK]);if(!s)return i.onSuccess(c.getTrackId()),Jy.info(\"create screen video track success\",\"video:\",c.getTrackId()),c;const d=new $L(s,void 0,Zv(8,\"track-scr-a-\"),!1);return i.onSuccess([c.getTrackId(),d.getTrackId()]),Jy.info(\"create screen video track success\",\"video:\",c.getTrackId(),\"audio:\",d.getTrackId()),[c,d]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Oy(\"CAMERA_CAPTURE_CONFIG\"),n=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,i]});i&&(t.encoderConfig=i);const r=aL(t),o=cL(e),s=Zv(8,\"track-mic-\"),a=Zv(8,\"track-cam-\");let c=null,d=null;Jy.info(\"start create camera video track(\".concat(a,\") and microphone audio track(\").concat(s,\") with config, audio: \").concat(JSON.stringify(e),\", video: \").concat(JSON.stringify(t)));try{const e=await GP({audio:o,video:r},\"\".concat(s,\"-\").concat(a));c=e.getAudioTracks()[0],d=e.getVideoTracks()[0]}catch(e){throw n.onError(e),e}if(!c||!d){const e=new iv(tv.UNEXPECTED_ERROR,\"can not find tracks in media stream\");return n.onError(e),e.throw(Jy)}t.optimizationMode&&Hk(a,d,t,HD(t.encoderConfig));const l=new ek(c,e,o,s),u=new Wk(d,t,r,t.scalabiltyMode?YD(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return n.onSuccess([l.getTrackId(),u.getTrackId()]),Jy.info(\"create camera video track(\".concat(a,\") and microphone audio track(\").concat(s,\") success\")),[l,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_MIC_AUDIO_TRACK,options:[e]}),i=cL(e),n=Zv(8,\"track-mic-\");let r=null;Jy.info(\"start create microphone audio track with config\",JSON.stringify(e),\"trackId\",n);try{r=(await GP({audio:i},n)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new iv(tv.UNEXPECTED_ERROR,\"can not find track in media stream\");return t.onError(e),e.throw(Jy)}const o=new ek(r,e,i,n);return t.onSuccess(o.getTrackId()),Jy.info(\"create microphone audio track success, trackId:\",n),o},createCustomAudioTrack:function(e){const t=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),i=new $L(e.mediaStreamTrack,e.encoderConfig?zD(e.encoderConfig):{},Zv(8,\"track-cus-\"),!1);return Jy.info(\"create custom audio track success with config\",e,\"trackId\",i.getTrackId()),t.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:i,encoderConfig:n}=e;let{source:r}=e;const o={source:r instanceof AudioBuffer?\"AudioBuffer\":r instanceof File?null!==(t=File.name)&&void 0!==t?t:\"File\":r,cacheOnlineFile:i,encoderConfig:n},s=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(Oy(\"DISABLE_WEBAUDIO\"))throw new iv(tv.NOT_SUPPORTED,\"can not create BufferSourceAudioTrack when WebAudio disabled\");const a=Zv(8,\"track-buf-\");Jy.info(\"start create buffer source audio track with config\",JSON.stringify(o),\"trackId\",a);const c=r;if(!(r instanceof AudioBuffer))try{r=await async function(e,t){let i=null;if(\"string\"==typeof e){const t=rk.get(e);if(t)return Jy.debug(\"use cached audio resource: \",e),t;try{i=(await _y((()=>pI.get(e,{responseType:\"arraybuffer\"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new iv(tv.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new Gh(((t,i)=>{const n=new FileReader;n.onload=e=>{e.target?t(e.target.result):i(new iv(tv.READ_LOCAL_AUDIO_FILE_ERROR))},n.onerror=()=>{i(new iv(tv.READ_LOCAL_AUDIO_FILE_ERROR))},n.readAsArrayBuffer(e)}));i=await t}const n=await function(e){const t=OP();return new Gh(((i,n)=>{t.decodeAudioData(e,(e=>{i(e)}),(e=>{n(new iv(tv.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(i);return\"string\"==typeof e&&t&&rk.set(e,n),n}(r,i)}catch(e){return s.onError(e),e.throw(Jy)}const d=new nk(r),l=new tk(c,d,n?zD(n):{},a);return Jy.info(\"create buffer source audio track success, trackId:\",a),s.onSuccess(l.getTrackId()),l},setAppType:function(e){if(Jy.debug(\"setAppType: \".concat(e)),!(Number.isInteger(e)&&e>=0))throw Jy.debug(\"Invalid appType\"),new mb(tv.INVALID_PARAMS,\"invalid app type\",e);wy(\"APP_TYPE\",Math.floor(e))},setLogLevel:function(e){Jy.setLogLevel(e)},enableLogUpload:function(){Oy(\"USE_NEW_LOG\")?wy(\"UPLOAD_LOG\",!0):Jy.enableLogUpload()},disableLogUpload:function(){Oy(\"USE_NEW_LOG\")?wy(\"UPLOAD_LOG\",!1):Jy.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new vV},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof $L||e instanceof oM)){const e=new mb(tv.INVALID_TRACK,\"the parameter is not a audio track\");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof $L?e.getTrackLabel():\"remote_track\",r=e.getVolumeLevel();let o=r,s=r;const a=Date.now();return new Gh((r=>{const c=setInterval((()=>{const d=e.getVolumeLevel();o=d>o?d:o,s=d<s?d:s;const l=o-s>1e-4,u=Date.now()-a;if(l||u>t){clearInterval(c);const t=l,s={duration:u,deviceLabel:n,maxVolumeLevel:o,result:t};Jy.info(\"[track-\".concat(e.getTrackId(),\"] check audio track active completed. \").concat(JSON.stringify(s))),i.onSuccess(s),r(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=rA.reportApiInvoke(null,{tag:Rv.TRACER,name:gv.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Gk||e instanceof rM)){const e=new mb(tv.INVALID_TRACK,\"the parameter is not a video track\");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof Gk?e.getTrackLabel():\"remote_track\",r=e.getMediaStreamTrack(!0),o=document.createElement(\"video\");o.style.width=\"1px\",o.style.height=\"1px\",o.setAttribute(\"muted\",\"\"),o.muted=!0,o.setAttribute(\"playsinline\",\"\"),o.controls=!1,(NI()||wI())&&(o.style.opacity=\"0.01\",o.style.position=\"fixed\",o.style.left=\"0\",o.style.top=\"0\",document.body.appendChild(o)),o.srcObject=new MediaStream([r]),o.play();const s=document.createElement(\"canvas\");s.width=160,s.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,i,n){let r,o=0,s=null;return new Gh(((a,c)=>{function d(){o>n&&r&&(r(),a(o));const t=i.getContext(\"2d\");if(!t){const e=new mb(tv.UNEXPECTED_ERROR,\"can not get canvas 2d context.\");return Jy.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const d=t.getImageData(0,0,i.width,i.height),l=Math.floor(d.data.length/3);if(s){for(let e=0;e<l;e+=3)if(d.data[e]!==s[e])return o+=1,void(s=d.data);s=d.data}else s=d.data}setTimeout((()=>{r&&(r(),a(o))}),t),r=PP((()=>{d()}),30)}))}(o,t,s,4),c=Date.now()-e}catch(e){throw i.onError(e),e}yF===gI.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const d=a>4,l={duration:c,changedPicNum:a,deviceLabel:n,result:d};return Jy.info(\"[track-\".concat(e.getTrackId(),\"] check video track active completed. \").concat(JSON.stringify(l))),i.onSuccess(l),d},setArea:cU,audioElementPlayCenter:ZP,resumeAudioContext:function(){ZP.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){Ij.processExternalMediaAEC(e)},registerExtensions:function(e){const t=Oy(\"PLUGIN_INFO\")||[];e.forEach((e=>{\"name\"in e&&!Dn(t).call(t,e.name)&&t.push(e.name);const i=e;i.__registered__=!0,i.logger.hookLog=Jy.extLog,i.reporter.hookApiInvoke=rA.extApiInvoke,i.parameters&&Object.keys(i.parameters).forEach((e=>{i.parameters[e]=Oy(e)}))})),XK(\"PLUGIN_INFO\",t)},ChannelMediaRelayError:Pb,ChannelMediaRelayEvent:Nb,ChannelMediaRelayState:Db,RemoteStreamFallbackType:tP,RemoteStreamType:eP,ConnectionDisconnectedReason:vv,AudienceLatencyLevelType:Iv,AREAS:xb,preload:async function(e,t,i,n){return FF(e,t,i,n)}});return Object.defineProperties(QK,{onAudioAutoplayFailed:{get:()=>zP.onAudioAutoplayFailed,set:e=>{zP.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>zP.onAutoplayFailed,set:e=>{zP.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>QK._onSecurityPolicyViolation,set(e){QK._onSecurityPolicyViolation=e,bj(e)}},__CLIENT_LIST__:{get:()=>Oy(\"SHOW_GLOBAL_CLIENT_LIST\")?cA:[]}}),YP.on(EP.CAMERA_DEVICE_CHANGED,(e=>{Jy.info(\"camera device changed\",JSON.stringify(e)),QK.onCameraChanged&&QK.onCameraChanged(e),QK.safeEmit(ew.CAMERA_CHANGED,e)})),YP.on(EP.RECORDING_DEVICE_CHANGED,(e=>{Jy.info(\"microphone device changed\",JSON.stringify(e)),QK.onMicrophoneChanged&&QK.onMicrophoneChanged(e),QK.safeEmit(ew.MICROPHONE_CHANGED,e)})),YP.on(EP.PLAYOUT_DEVICE_CHANGED,(e=>{Jy.debug(\"playout device changed\",JSON.stringify(e)),QK.onPlaybackDeviceChanged&&QK.onPlaybackDeviceChanged(e),QK.safeEmit(ew.PLAYBACK_DEVICE_CHANGED,e)})),ZP.onAutoplayFailed=()=>{Jy.info(\"detect audio element autoplay failed\"),zP.onAudioAutoplayFailed&&zP.onAudioAutoplayFailed()},wP.on(\"autoplay-failed\",(()=>{Jy.info(\"detect webaudio autoplay failed\"),zP.onAudioAutoplayFailed&&zP.onAudioAutoplayFailed(),QK.safeEmit(ew.AUTOPLAY_FAILED)})),wP.on(UD.STATE_CHANGE,((e,t)=>{Jy.info(\"audio context state changed: \".concat(t,\" => \").concat(e)),QK.onAudioContextStateChanged&&QK.onAudioContextStateChanged(e,t),QK.safeEmit(ew.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),Uv.on(Dv.NETWORK_STATE_CHANGE,((e,t)=>{Jy.info(\"[network-indicator] network state changed, \".concat(t,\" => \").concat(e))})),window&&(window.__ARTC__=QK),QK}));\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js?");

/***/ }),

/***/ "./node_modules/agora-rtm-sdk/agora-rtm.js":
/*!*************************************************!*\
  !*** ./node_modules/agora-rtm-sdk/agora-rtm.js ***!
  \*************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("/*! @preserve\n * AgoraRTM Web SDK 2.2.1 - commit: v2.2.1-0-g69f68c57-dirty - fusion: false\n * Copyright (C) 2018-2024 Agora Lab.\n * This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT\n * A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/\n */\n!function(A,e){ true?module.exports=e(__webpack_require__(/*! agora-rtc-sdk-ng */ \"./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.js\")):0}(this,(function(AgoraRTC){\"use strict\";function _applyDecoratedDescriptor(A,e,t,o,g){var i={};return Object.keys(o).forEach((function(A){i[A]=o[A]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,(\"value\"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce((function(t,o){return o(A,e,t)||t}),i),g&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(g):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(A,e,i),null):i}function _defineProperty$1(A,e,t){return(e=_toPropertyKey(e))in A?Object.defineProperty(A,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):A[e]=t,A}function ownKeys(A,e){var t=Object.keys(A);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(A);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(A,e).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread2(A){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach((function(e){_defineProperty$1(A,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(t,e))}))}return A}function _objectWithoutProperties(A,e){if(null==A)return{};var t,o,g=_objectWithoutPropertiesLoose(A,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(A);for(o=0;o<i.length;o++)t=i[o],e.includes(t)||{}.propertyIsEnumerable.call(A,t)&&(g[t]=A[t])}return g}function _objectWithoutPropertiesLoose(A,e){if(null==A)return{};var t={};for(var o in A)if({}.hasOwnProperty.call(A,o)){if(e.includes(o))continue;t[o]=A[o]}return t}function _toPrimitive(A,e){if(\"object\"!=typeof A||!A)return A;var t=A[Symbol.toPrimitive];if(void 0!==t){var o=t.call(A,e||\"default\");if(\"object\"!=typeof o)return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(A)}function _toPropertyKey(A){var e=_toPrimitive(A,\"string\");return\"symbol\"==typeof e?e:e+\"\"}let subscribedState=function(A){return A.UNSUBSCRIBED=\"UNSUBSCRIBED\",A.SUBSCRIBED=\"SUBSCRIBED\",A}({}),MessageType$1=function(A){return A.STRING=\"STRING\",A.BINARY=\"BINARY\",A}({}),LegacyAreaCode=function(A){return A.CN=\"CN\",A.NA=\"NA\",A.EU=\"EU\",A.AS=\"AS\",A.JP=\"JP\",A.IN=\"IN\",A.GLOB=\"GLOB\",A.OC=\"OC\",A.SA=\"SA\",A.AF=\"AF\",A.KR=\"KR\",A.US=\"US\",A.OVS=\"OVS\",A}({}),AreaCode=function(A){return A.GLOBAL=\"GLOBAL\",A.INDIA=\"INDIA\",A.JAPAN=\"JAPAN\",A.ASIA=\"ASIA\",A.EUROPE=\"EUROPE\",A.CHINA=\"CHINA\",A.NORTH_AMERICA=\"NORTH_AMERICA\",A}({}),LinkStateChangeReason4Report=function(A){return A[A.UNKNOWN=0]=\"UNKNOWN\",A[A.LOGIN=1]=\"LOGIN\",A[A.LOGIN_SUCCESS=2]=\"LOGIN_SUCCESS\",A[A.LOGIN_TIMEOUT=3]=\"LOGIN_TIMEOUT\",A[A.LOGIN_NOT_AUTHORIZED=4]=\"LOGIN_NOT_AUTHORIZED\",A[A.LOGIN_REJECTED=5]=\"LOGIN_REJECTED\",A[A.RELOGIN=6]=\"RELOGIN\",A[A.LOGOUT=7]=\"LOGOUT\",A[A.AUTO_RECONNECT=8]=\"AUTO_RECONNECT\",A[A.RECONNECT_TIMEOUT=9]=\"RECONNECT_TIMEOUT\",A[A.RECONNECT_SUCCESS=10]=\"RECONNECT_SUCCESS\",A[A.JOIN=11]=\"JOIN\",A[A.JOIN_SUCCESS=12]=\"JOIN_SUCCESS\",A[A.JOIN_FAILED=13]=\"JOIN_FAILED\",A[A.REJOIN=14]=\"REJOIN\",A[A.LEAVE=15]=\"LEAVE\",A[A.INVALID_TOKEN=16]=\"INVALID_TOKEN\",A[A.TOKEN_EXPIRED=17]=\"TOKEN_EXPIRED\",A[A.INCONSISTENT_APP_ID=18]=\"INCONSISTENT_APP_ID\",A[A.INVALID_CHANNEL_NAME=19]=\"INVALID_CHANNEL_NAME\",A[A.INVALID_USER_ID=20]=\"INVALID_USER_ID\",A[A.NOT_INITIALIZED=21]=\"NOT_INITIALIZED\",A[A.RTM_SERVICE_NOT_CONNECTED=22]=\"RTM_SERVICE_NOT_CONNECTED\",A[A.CHANNEL_INSTANCE_EXCEED_LIMITATION=23]=\"CHANNEL_INSTANCE_EXCEED_LIMITATION\",A[A.OPERATION_RATE_EXCEED_LIMITATION=24]=\"OPERATION_RATE_EXCEED_LIMITATION\",A[A.CHANNEL_IN_ERROR_STATE=25]=\"CHANNEL_IN_ERROR_STATE\",A[A.PRESENCE_NOT_CONNECTED=26]=\"PRESENCE_NOT_CONNECTED\",A[A.SAME_UID_LOGIN=27]=\"SAME_UID_LOGIN\",A[A.KICKED_OUT_BY_SERVER=28]=\"KICKED_OUT_BY_SERVER\",A[A.KEEP_ALIVE_TIMEOUT=29]=\"KEEP_ALIVE_TIMEOUT\",A[A.CONNECTION_ERROR=30]=\"CONNECTION_ERROR\",A[A.PRESENCE_NOT_READY=31]=\"PRESENCE_NOT_READY\",A[A.NETWORK_CHANGE=32]=\"NETWORK_CHANGE\",A[A.SERVICE_NOT_SUPPORTED=33]=\"SERVICE_NOT_SUPPORTED\",A[A.STREAM_CHANNEL_NOT_AVAILABLE=34]=\"STREAM_CHANNEL_NOT_AVAILABLE\",A[A.STORAGE_NOT_AVAILABLE=35]=\"STORAGE_NOT_AVAILABLE\",A[A.LOCK_NOT_AVAILABLE=36]=\"LOCK_NOT_AVAILABLE\",A}({}),LinkStateChangeReasonDescription=function(A){return A.UNKNOWN=\"Unknown\",A.LOGIN=\"Perform login operation\",A.LOGIN_SUCCESS=\"Login success\",A.LOGIN_TIMEOUT=\"Login timeout\",A.LOGIN_NOT_AUTHORIZED=\"Login not authorized\",A.LOGIN_REJECTED=\"Login rejected\",A.RELOGIN=\"Perform login operation again\",A.LOGOUT=\"Logout success\",A.AUTO_RECONNECT=\"Reconnecting\",A.RECONNECT_TIMEOUT=\"Reconnect timeout\",A.RECONNECT_SUCCESS=\"Reconnect success\",A.JOIN=\"Perform join operation\",A.JOIN_SUCCESS=\"Join channel success\",A.JOIN_FAILED=\"Join channel failed\",A.REJOIN=\"Perform join operation again\",A.LEAVE=\"Leave channel success\",A.INVALID_TOKEN=\"Invalid token\",A.TOKEN_EXPIRED=\"Token expired\",A.INCONSISTENT_APP_ID=\"Inconsistent app ID\",A.INVALID_CHANNEL_NAME=\"Invalid channel name\",A.INVALID_USER_ID=\"Invalid user id\",A.NOT_INITIALIZED=\"Not initialized\",A.RTM_SERVICE_NOT_CONNECTED=\"RTM service not connected\",A.CHANNEL_INSTANCE_EXCEED_LIMITATION=\"Channel instance exceed limitation\",A.OPERATION_RATE_EXCEED_LIMITATION=\"Operation rate exceed limitation\",A.CHANNEL_IN_ERROR_STATE=\"Channel in error state\",A.PRESENCE_NOT_CONNECTED=\"Presence not connected\",A.SAME_UID_LOGIN=\"The same uid login on another device\",A.KICKED_OUT_BY_SERVER=\"Kicked out by server\",A.KEEP_ALIVE_TIMEOUT=\"Keep alive timeout\",A.CONNECTION_ERROR=\"Connection error\",A.PRESENCE_NOT_READY=\"Presence not ready\",A.NETWORK_CHANGE=\"Network change\",A.SERVICE_NOT_SUPPORTED=\"Service not supported\",A.STREAM_CHANNEL_NOT_AVAILABLE=\"Stream channel not available\",A.STORAGE_NOT_AVAILABLE=\"Storage service is not available\",A.LOCK_NOT_AVAILABLE=\"Lock service is not available\",A}({}),ChannelTypeEnum=function(A){return A[A.MESSAGE=1]=\"MESSAGE\",A[A.STREAM=2]=\"STREAM\",A[A.USER=3]=\"USER\",A}({});var ConstantsType=Object.freeze({__proto__:null,AreaCode:AreaCode,ChannelTypeEnum:ChannelTypeEnum,LegacyAreaCode:LegacyAreaCode,LinkStateChangeReason4Report:LinkStateChangeReason4Report,LinkStateChangeReasonDescription:LinkStateChangeReasonDescription,MessageType:MessageType$1,subscribedState:subscribedState}),commonjsGlobal=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function getDefaultExportFromCjs(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,\"default\")?A.default:A}function getAugmentedNamespace(A){if(A.__esModule)return A;var e=A.default;if(\"function\"==typeof e){var t=function A(){return this instanceof A?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,\"__esModule\",{value:!0}),Object.keys(A).forEach((function(e){var o=Object.getOwnPropertyDescriptor(A,e);Object.defineProperty(t,e,o.get?o:{enumerable:!0,get:function(){return A[e]}})})),t}function format(A){var e=Array.prototype.slice.call(arguments,1);return e.length&&(A=A.replace(/(%?)(%([jds]))/g,(function(A,t,o,g){var i=e.shift();switch(g){case\"s\":i=\"\"+i;break;case\"d\":i=Number(i);break;case\"j\":i=JSON.stringify(i)}return t?(e.unshift(i),A):i}))),e.length&&(A+=\" \"+e.join(\" \")),\"\"+(A=A.replace(/%{2,2}/g,\"%\"))}var format_1=format,format$1=getDefaultExportFromCjs(format_1),_extendStatics=function(A,e){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])},_extendStatics(A,e)};function __extends$3(A,e){function t(){this.constructor=A}_extendStatics(A,e),A.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function isFunction$7(A){return\"function\"==typeof A}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$1={Promise:void 0,set useDeprecatedSynchronousErrorHandling(A){A&&(new Error).stack;_enable_super_gross_mode_that_will_cause_bad_things=A},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(A){setTimeout((function(){throw A}),0)}var empty$1={closed:!0,next:function(A){},error:function(A){if(config$1.useDeprecatedSynchronousErrorHandling)throw A;hostReportError(A)},complete:function(){}},isArray$h=function(){return Array.isArray||function(A){return A&&\"number\"==typeof A.length}}();function isObject$e(A){return null!==A&&\"object\"==typeof A}var UnsubscriptionErrorImpl$1=function(){function A(A){return Error.call(this),this.message=A?A.length+\" errors occurred during unsubscription:\\n\"+A.map((function(A,e){return e+1+\") \"+A.toString()})).join(\"\\n  \"):\"\",this.name=\"UnsubscriptionError\",this.errors=A,this}return A.prototype=Object.create(Error.prototype),A}(),UnsubscriptionError$1=UnsubscriptionErrorImpl$1,Subscription$2=function(){function A(A){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,A&&(this._ctorUnsubscribe=!0,this._unsubscribe=A)}return A.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,o=t._parentOrParents,g=t._ctorUnsubscribe,i=t._unsubscribe,r=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof A)o.remove(this);else if(null!==o)for(var n=0;n<o.length;++n){o[n].remove(this)}if(isFunction$7(i)){g&&(this._unsubscribe=void 0);try{i.call(this)}catch(A){e=A instanceof UnsubscriptionError$1?flattenUnsubscriptionErrors$1(A.errors):[A]}}if(isArray$h(r)){n=-1;for(var I=r.length;++n<I;){var s=r[n];if(isObject$e(s))try{s.unsubscribe()}catch(A){e=e||[],A instanceof UnsubscriptionError$1?e=e.concat(flattenUnsubscriptionErrors$1(A.errors)):e.push(A)}}}if(e)throw new UnsubscriptionError$1(e)}},A.prototype.add=function(e){var t=e;if(!e)return A.EMPTY;switch(typeof e){case\"function\":t=new A(e);case\"object\":if(t===this||t.closed||\"function\"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof A)){var o=t;(t=new A)._subscriptions=[o]}break;default:throw new Error(\"unrecognized teardown \"+e+\" added to Subscription.\")}var g=t._parentOrParents;if(null===g)t._parentOrParents=this;else if(g instanceof A){if(g===this)return t;t._parentOrParents=[g,this]}else{if(-1!==g.indexOf(this))return t;g.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t},A.prototype.remove=function(A){var e=this._subscriptions;if(e){var t=e.indexOf(A);-1!==t&&e.splice(t,1)}},A.EMPTY=function(A){return A.closed=!0,A}(new A),A}();function flattenUnsubscriptionErrors$1(A){return A.reduce((function(A,e){return A.concat(e instanceof UnsubscriptionError$1?e.errors:e)}),[])}var rxSubscriber=function(){return\"function\"==typeof Symbol?Symbol(\"rxSubscriber\"):\"@@rxSubscriber_\"+Math.random()}(),Subscriber=function(A){function e(t,o,g){var i=A.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=empty$1;break;case 1:if(!t){i.destination=empty$1;break}if(\"object\"==typeof t){t instanceof e?(i.syncErrorThrowable=t.syncErrorThrowable,i.destination=t,t.add(i)):(i.syncErrorThrowable=!0,i.destination=new SafeSubscriber(i,t));break}default:i.syncErrorThrowable=!0,i.destination=new SafeSubscriber(i,t,o,g)}return i}return __extends$3(e,A),e.prototype[rxSubscriber]=function(){return this},e.create=function(A,t,o){var g=new e(A,t,o);return g.syncErrorThrowable=!1,g},e.prototype.next=function(A){this.isStopped||this._next(A)},e.prototype.error=function(A){this.isStopped||(this.isStopped=!0,this._error(A))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,A.prototype.unsubscribe.call(this))},e.prototype._next=function(A){this.destination.next(A)},e.prototype._error=function(A){this.destination.error(A),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var A=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=A,this},e}(Subscription$2),SafeSubscriber=function(A){function e(e,t,o,g){var i,r=A.call(this)||this;r._parentSubscriber=e;var n=r;return isFunction$7(t)?i=t:t&&(i=t.next,o=t.error,g=t.complete,t!==empty$1&&(isFunction$7((n=Object.create(t)).unsubscribe)&&r.add(n.unsubscribe.bind(n)),n.unsubscribe=r.unsubscribe.bind(r))),r._context=n,r._next=i,r._error=o,r._complete=g,r}return __extends$3(e,A),e.prototype.next=function(A){if(!this.isStopped&&this._next){var e=this._parentSubscriber;config$1.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,A)&&this.unsubscribe():this.__tryOrUnsub(this._next,A)}},e.prototype.error=function(A){if(!this.isStopped){var e=this._parentSubscriber,t=config$1.useDeprecatedSynchronousErrorHandling;if(this._error)t&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,A),this.unsubscribe()):(this.__tryOrUnsub(this._error,A),this.unsubscribe());else if(e.syncErrorThrowable)t?(e.syncErrorValue=A,e.syncErrorThrown=!0):hostReportError(A),this.unsubscribe();else{if(this.unsubscribe(),t)throw A;hostReportError(A)}}},e.prototype.complete=function(){var A=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var t=function(){return A._complete.call(A._context)};config$1.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(A,e){try{A.call(this._context,e)}catch(A){if(this.unsubscribe(),config$1.useDeprecatedSynchronousErrorHandling)throw A;hostReportError(A)}},e.prototype.__tryOrSetError=function(A,e,t){if(!config$1.useDeprecatedSynchronousErrorHandling)throw new Error(\"bad call\");try{e.call(this._context,t)}catch(e){return config$1.useDeprecatedSynchronousErrorHandling?(A.syncErrorValue=e,A.syncErrorThrown=!0,!0):(hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var A=this._parentSubscriber;this._context=null,this._parentSubscriber=null,A.unsubscribe()},e}(Subscriber);function canReportError(A){for(;A;){var e=A,t=e.closed,o=e.destination,g=e.isStopped;if(t||g)return!1;A=o&&o instanceof Subscriber?o:null}return!0}function toSubscriber(A,e,t){if(A){if(A instanceof Subscriber)return A;if(A[rxSubscriber])return A[rxSubscriber]()}return A||e||t?new Subscriber(A,e,t):new Subscriber(empty$1)}var observable=function(){return\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\"}();function identity$5(A){return A}function pipe(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];return pipeFromArray(A)}function pipeFromArray(A){return 0===A.length?identity$5:1===A.length?A[0]:function(e){return A.reduce((function(A,e){return e(A)}),e)}}var Observable=function(){function A(A){this._isScalar=!1,A&&(this._subscribe=A)}return A.prototype.lift=function(e){var t=new A;return t.source=this,t.operator=e,t},A.prototype.subscribe=function(A,e,t){var o=this.operator,g=toSubscriber(A,e,t);if(o?g.add(o.call(g,this.source)):g.add(this.source||config$1.useDeprecatedSynchronousErrorHandling&&!g.syncErrorThrowable?this._subscribe(g):this._trySubscribe(g)),config$1.useDeprecatedSynchronousErrorHandling&&g.syncErrorThrowable&&(g.syncErrorThrowable=!1,g.syncErrorThrown))throw g.syncErrorValue;return g},A.prototype._trySubscribe=function(A){try{return this._subscribe(A)}catch(e){config$1.useDeprecatedSynchronousErrorHandling&&(A.syncErrorThrown=!0,A.syncErrorValue=e),canReportError(A)?A.error(e):console.warn(e)}},A.prototype.forEach=function(A,e){var t=this;return new(e=getPromiseCtor(e))((function(e,o){var g;g=t.subscribe((function(e){try{A(e)}catch(A){o(A),g&&g.unsubscribe()}}),o,e)}))},A.prototype._subscribe=function(A){var e=this.source;return e&&e.subscribe(A)},A.prototype[observable]=function(){return this},A.prototype.pipe=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];return 0===A.length?this:pipeFromArray(A)(this)},A.prototype.toPromise=function(A){var e=this;return new(A=getPromiseCtor(A))((function(A,t){var o;e.subscribe((function(A){return o=A}),(function(A){return t(A)}),(function(){return A(o)}))}))},A.create=function(e){return new A(e)},A}();function getPromiseCtor(A){if(A||(A=config$1.Promise||Promise),!A)throw new Error(\"no Promise impl found\");return A}var ObjectUnsubscribedErrorImpl=function(){function A(){return Error.call(this),this.message=\"object unsubscribed\",this.name=\"ObjectUnsubscribedError\",this}return A.prototype=Object.create(Error.prototype),A}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(A){function e(e,t){var o=A.call(this)||this;return o.subject=e,o.subscriber=t,o.closed=!1,o}return __extends$3(e,A),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var A=this.subject,e=A.observers;if(this.subject=null,e&&0!==e.length&&!A.isStopped&&!A.closed){var t=e.indexOf(this.subscriber);-1!==t&&e.splice(t,1)}}},e}(Subscription$2),SubjectSubscriber=function(A){function e(e){var t=A.call(this,e)||this;return t.destination=e,t}return __extends$3(e,A),e}(Subscriber),Subject=function(A){function e(){var e=A.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return __extends$3(e,A),e.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},e.prototype.lift=function(A){var e=new AnonymousSubject(this,this);return e.operator=A,e},e.prototype.next=function(A){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,t=e.length,o=e.slice(),g=0;g<t;g++)o[g].next(A)},e.prototype.error=function(A){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=A,this.isStopped=!0;for(var e=this.observers,t=e.length,o=e.slice(),g=0;g<t;g++)o[g].error(A);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var A=this.observers,e=A.length,t=A.slice(),o=0;o<e;o++)t[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError;return A.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(A){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(A.error(this.thrownError),Subscription$2.EMPTY):this.isStopped?(A.complete(),Subscription$2.EMPTY):(this.observers.push(A),new SubjectSubscription(this,A))},e.prototype.asObservable=function(){var A=new Observable;return A.source=this,A},e.create=function(A,e){return new AnonymousSubject(A,e)},e}(Observable),AnonymousSubject=function(A){function e(e,t){var o=A.call(this)||this;return o.destination=e,o.source=t,o}return __extends$3(e,A),e.prototype.next=function(A){var e=this.destination;e&&e.next&&e.next(A)},e.prototype.error=function(A){var e=this.destination;e&&e.error&&this.destination.error(A)},e.prototype.complete=function(){var A=this.destination;A&&A.complete&&this.destination.complete()},e.prototype._subscribe=function(A){return this.source?this.source.subscribe(A):Subscription$2.EMPTY},e}(Subject);function refCount(){return function(A){return A.lift(new RefCountOperator(A))}}var RefCountOperator=function(){function A(A){this.connectable=A}return A.prototype.call=function(A,e){var t=this.connectable;t._refCount++;var o=new RefCountSubscriber(A,t),g=e.subscribe(o);return o.closed||(o.connection=t.connect()),g},A}(),RefCountSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.connectable=t,o}return __extends$3(e,A),e.prototype._unsubscribe=function(){var A=this.connectable;if(A){this.connectable=null;var e=A._refCount;if(e<=0)this.connection=null;else if(A._refCount=e-1,e>1)this.connection=null;else{var t=this.connection,o=A._connection;this.connection=null,!o||t&&o!==t||o.unsubscribe()}}else this.connection=null},e}(Subscriber),ConnectableObservable=function(A){function e(e,t){var o=A.call(this)||this;return o.source=e,o.subjectFactory=t,o._refCount=0,o._isComplete=!1,o}return __extends$3(e,A),e.prototype._subscribe=function(A){return this.getSubject().subscribe(A)},e.prototype.getSubject=function(){var A=this._subject;return A&&!A.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var A=this._connection;return A||(this._isComplete=!1,(A=this._connection=new Subscription$2).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),A.closed&&(this._connection=null,A=Subscription$2.EMPTY)),A},e.prototype.refCount=function(){return refCount()(this)},e}(Observable),connectableObservableDescriptor=function(){var A=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:A._subscribe},_isComplete:{value:A._isComplete,writable:!0},getSubject:{value:A.getSubject},connect:{value:A.connect},refCount:{value:A.refCount}}}(),ConnectableSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.connectable=t,o}return __extends$3(e,A),e.prototype._error=function(e){this._unsubscribe(),A.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),A.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var A=this.connectable;if(A){this.connectable=null;var e=A._connection;A._refCount=0,A._subject=null,A._connection=null,e&&e.unsubscribe()}},e}(SubjectSubscriber),GroupedObservable=function(A){function e(e,t,o){var g=A.call(this)||this;return g.key=e,g.groupSubject=t,g.refCountSubscription=o,g}return __extends$3(e,A),e.prototype._subscribe=function(A){var e=new Subscription$2,t=this.refCountSubscription,o=this.groupSubject;return t&&!t.closed&&e.add(new InnerRefCountSubscription(t)),e.add(o.subscribe(A)),e},e}(Observable),InnerRefCountSubscription=function(A){function e(e){var t=A.call(this)||this;return t.parent=e,e.count++,t}return __extends$3(e,A),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(A.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(Subscription$2),BehaviorSubject=function(A){function e(e){var t=A.call(this)||this;return t._value=e,t}return __extends$3(e,A),Object.defineProperty(e.prototype,\"value\",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=A.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){A.prototype.next.call(this,this._value=e)},e}(Subject),Action$2=function(A){function e(e,t){return A.call(this)||this}return __extends$3(e,A),e.prototype.schedule=function(A,e){return this},e}(Subscription$2),AsyncAction$2=function(A){function e(e,t){var o=A.call(this,e,t)||this;return o.scheduler=e,o.work=t,o.pending=!1,o}return __extends$3(e,A),e.prototype.schedule=function(A,e){if(void 0===e&&(e=0),this.closed)return this;this.state=A;var t=this.id,o=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(o,t,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this},e.prototype.requestAsyncId=function(A,e,t){return void 0===t&&(t=0),setInterval(A.flush.bind(A,this),t)},e.prototype.recycleAsyncId=function(A,e,t){if(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(A,e){if(this.closed)return new Error(\"executing a cancelled action\");this.pending=!1;var t=this._execute(A,e);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(A,e){var t=!1,o=void 0;try{this.work(A)}catch(A){t=!0,o=!!A&&A||new Error(A)}if(t)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var A=this.id,e=this.scheduler,t=e.actions,o=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&t.splice(o,1),null!=A&&(this.id=this.recycleAsyncId(e,A,null)),this.delay=null},e}(Action$2),QueueAction=function(A){function e(e,t){var o=A.call(this,e,t)||this;return o.scheduler=e,o.work=t,o}return __extends$3(e,A),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),t>0?A.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return t>0||this.closed?A.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,o){return void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0?A.prototype.requestAsyncId.call(this,e,t,o):e.flush(this)},e}(AsyncAction$2),Scheduler$2=function(){function A(e,t){void 0===t&&(t=A.now),this.SchedulerAction=e,this.now=t}return A.prototype.schedule=function(A,e,t){return void 0===e&&(e=0),new this.SchedulerAction(this,A).schedule(t,e)},A.now=function(){return Date.now()},A}(),AsyncScheduler$2=function(A){function e(t,o){void 0===o&&(o=Scheduler$2.now);var g=A.call(this,t,(function(){return e.delegate&&e.delegate!==g?e.delegate.now():o()}))||this;return g.actions=[],g.active=!1,g.scheduled=void 0,g}return __extends$3(e,A),e.prototype.schedule=function(t,o,g){return void 0===o&&(o=0),e.delegate&&e.delegate!==this?e.delegate.schedule(t,o,g):A.prototype.schedule.call(this,t,o,g)},e.prototype.flush=function(A){var e=this.actions;if(this.active)e.push(A);else{var t;this.active=!0;do{if(t=A.execute(A.state,A.delay))break}while(A=e.shift());if(this.active=!1,t){for(;A=e.shift();)A.unsubscribe();throw t}}},e}(Scheduler$2),QueueScheduler=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends$3(e,A),e}(AsyncScheduler$2),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,EMPTY=new Observable((function(A){return A.complete()}));function empty(A){return A?emptyScheduled(A):EMPTY}function emptyScheduled(A){return new Observable((function(e){return A.schedule((function(){return e.complete()}))}))}function isScheduler(A){return A&&\"function\"==typeof A.schedule}var subscribeToArray=function(A){return function(e){for(var t=0,o=A.length;t<o&&!e.closed;t++)e.next(A[t]);e.complete()}},NotificationKind;function scheduleArray(A,e){return new Observable((function(t){var o=new Subscription$2,g=0;return o.add(e.schedule((function(){g!==A.length?(t.next(A[g++]),t.closed||o.add(this.schedule())):t.complete()}))),o}))}function fromArray(A,e){return e?scheduleArray(A,e):new Observable(subscribeToArray(A))}function of(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];var t=A[A.length-1];return isScheduler(t)?(A.pop(),scheduleArray(A,t)):fromArray(A)}function throwError(A,e){return new Observable(e?function(t){return e.schedule(dispatch$7,0,{error:A,subscriber:t})}:function(e){return e.error(A)})}function dispatch$7(A){var e=A.error;A.subscriber.error(e)}NotificationKind||(NotificationKind={});var Notification=function(){function A(A,e,t){this.kind=A,this.value=e,this.error=t,this.hasValue=\"N\"===A}return A.prototype.observe=function(A){switch(this.kind){case\"N\":return A.next&&A.next(this.value);case\"E\":return A.error&&A.error(this.error);case\"C\":return A.complete&&A.complete()}},A.prototype.do=function(A,e,t){switch(this.kind){case\"N\":return A&&A(this.value);case\"E\":return e&&e(this.error);case\"C\":return t&&t()}},A.prototype.accept=function(A,e,t){return A&&\"function\"==typeof A.next?this.observe(A):this.do(A,e,t)},A.prototype.toObservable=function(){switch(this.kind){case\"N\":return of(this.value);case\"E\":return throwError(this.error);case\"C\":return empty()}throw new Error(\"unexpected notification kind value\")},A.createNext=function(e){return void 0!==e?new A(\"N\",e):A.undefinedValueNotification},A.createError=function(e){return new A(\"E\",void 0,e)},A.createComplete=function(){return A.completeNotification},A.completeNotification=new A(\"C\"),A.undefinedValueNotification=new A(\"N\",void 0),A}();function observeOn(A,e){return void 0===e&&(e=0),function(t){return t.lift(new ObserveOnOperator(A,e))}}var ObserveOnOperator=function(){function A(A,e){void 0===e&&(e=0),this.scheduler=A,this.delay=e}return A.prototype.call=function(A,e){return e.subscribe(new ObserveOnSubscriber(A,this.scheduler,this.delay))},A}(),ObserveOnSubscriber=function(A){function e(e,t,o){void 0===o&&(o=0);var g=A.call(this,e)||this;return g.scheduler=t,g.delay=o,g}return __extends$3(e,A),e.dispatch=function(A){var e=A.notification,t=A.destination;e.observe(t),this.unsubscribe()},e.prototype.scheduleMessage=function(A){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new ObserveOnMessage(A,this.destination)))},e.prototype._next=function(A){this.scheduleMessage(Notification.createNext(A))},e.prototype._error=function(A){this.scheduleMessage(Notification.createError(A)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},e}(Subscriber),ObserveOnMessage=function(){return function(A,e){this.notification=A,this.destination=e}}(),ReplaySubject=function(A){function e(e,t,o){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var g=A.call(this)||this;return g.scheduler=o,g._events=[],g._infiniteTimeWindow=!1,g._bufferSize=e<1?1:e,g._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(g._infiniteTimeWindow=!0,g.next=g.nextInfiniteTimeWindow):g.next=g.nextTimeWindow,g}return __extends$3(e,A),e.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}A.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),e)),this._trimBufferThenGetEvents()),A.prototype.next.call(this,e)},e.prototype._subscribe=function(A){var e,t=this._infiniteTimeWindow,o=t?this._events:this._trimBufferThenGetEvents(),g=this.scheduler,i=o.length;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=Subscription$2.EMPTY:(this.observers.push(A),e=new SubjectSubscription(this,A)),g&&A.add(A=new ObserveOnSubscriber(A,g)),t)for(var r=0;r<i&&!A.closed;r++)A.next(o[r]);else for(r=0;r<i&&!A.closed;r++)A.next(o[r].value);return this.hasError?A.error(this.thrownError):this.isStopped&&A.complete(),e},e.prototype._getNow=function(){return(this.scheduler||queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var A=this._getNow(),e=this._bufferSize,t=this._windowTime,o=this._events,g=o.length,i=0;i<g&&!(A-o[i].time<t);)i++;return g>e&&(i=Math.max(i,g-e)),i>0&&o.splice(0,i),o},e}(Subject),ReplayEvent=function(){return function(A,e){this.time=A,this.value=e}}(),AsyncSubject=function(A){function e(){var e=null!==A&&A.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return __extends$3(e,A),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),Subscription$2.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),Subscription$2.EMPTY):A.prototype._subscribe.call(this,e)},e.prototype.next=function(A){this.hasCompleted||(this.value=A,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||A.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&A.prototype.next.call(this,this.value),A.prototype.complete.call(this)},e}(Subject),nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(A){return A in activeHandles&&(delete activeHandles[A],!0)}var Immediate={setImmediate:function(A){var e=nextHandle++;return activeHandles[e]=!0,RESOLVED.then((function(){return findAndClearHandle(e)&&A()})),e},clearImmediate:function(A){findAndClearHandle(A)}},AsapAction=function(A){function e(e,t){var o=A.call(this,e,t)||this;return o.scheduler=e,o.work=t,o}return __extends$3(e,A),e.prototype.requestAsyncId=function(e,t,o){return void 0===o&&(o=0),null!==o&&o>0?A.prototype.requestAsyncId.call(this,e,t,o):(e.actions.push(this),e.scheduled||(e.scheduled=Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,t,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return A.prototype.recycleAsyncId.call(this,e,t,o);0===e.actions.length&&(Immediate.clearImmediate(t),e.scheduled=void 0)},e}(AsyncAction$2),AsapScheduler=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends$3(e,A),e.prototype.flush=function(A){this.active=!0,this.scheduled=void 0;var e,t=this.actions,o=-1,g=t.length;A=A||t.shift();do{if(e=A.execute(A.state,A.delay))break}while(++o<g&&(A=t.shift()));if(this.active=!1,e){for(;++o<g&&(A=t.shift());)A.unsubscribe();throw e}},e}(AsyncScheduler$2),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,asyncScheduler=new AsyncScheduler$2(AsyncAction$2),async=asyncScheduler,AnimationFrameAction=function(A){function e(e,t){var o=A.call(this,e,t)||this;return o.scheduler=e,o.work=t,o}return __extends$3(e,A),e.prototype.requestAsyncId=function(e,t,o){return void 0===o&&(o=0),null!==o&&o>0?A.prototype.requestAsyncId.call(this,e,t,o):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,t,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return A.prototype.recycleAsyncId.call(this,e,t,o);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)},e}(AsyncAction$2),AnimationFrameScheduler=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends$3(e,A),e.prototype.flush=function(A){this.active=!0,this.scheduled=void 0;var e,t=this.actions,o=-1,g=t.length;A=A||t.shift();do{if(e=A.execute(A.state,A.delay))break}while(++o<g&&(A=t.shift()));if(this.active=!1,e){for(;++o<g&&(A=t.shift());)A.unsubscribe();throw e}},e}(AsyncScheduler$2),animationFrameScheduler=new AnimationFrameScheduler(AnimationFrameAction),animationFrame=animationFrameScheduler,VirtualTimeScheduler=function(A){function e(e,t){void 0===e&&(e=VirtualAction),void 0===t&&(t=Number.POSITIVE_INFINITY);var o=A.call(this,e,(function(){return o.frame}))||this;return o.maxFrames=t,o.frame=0,o.index=-1,o}return __extends$3(e,A),e.prototype.flush=function(){for(var A,e,t=this.actions,o=this.maxFrames;(e=t[0])&&e.delay<=o&&(t.shift(),this.frame=e.delay,!(A=e.execute(e.state,e.delay))););if(A){for(;e=t.shift();)e.unsubscribe();throw A}},e.frameTimeFactor=10,e}(AsyncScheduler$2),VirtualAction=function(A){function e(e,t,o){void 0===o&&(o=e.index+=1);var g=A.call(this,e,t)||this;return g.scheduler=e,g.work=t,g.index=o,g.active=!0,g.index=e.index=o,g}return __extends$3(e,A),e.prototype.schedule=function(t,o){if(void 0===o&&(o=0),!this.id)return A.prototype.schedule.call(this,t,o);this.active=!1;var g=new e(this.scheduler,this.work);return this.add(g),g.schedule(t,o)},e.prototype.requestAsyncId=function(A,t,o){void 0===o&&(o=0),this.delay=A.frame+o;var g=A.actions;return g.push(this),g.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(A,e,t){},e.prototype._execute=function(e,t){if(!0===this.active)return A.prototype._execute.call(this,e,t)},e.sortActions=function(A,e){return A.delay===e.delay?A.index===e.index?0:A.index>e.index?1:-1:A.delay>e.delay?1:-1},e}(AsyncAction$2);function noop$3(){}function isObservable(A){return!!A&&(A instanceof Observable||\"function\"==typeof A.lift&&\"function\"==typeof A.subscribe)}var ArgumentOutOfRangeErrorImpl=function(){function A(){return Error.call(this),this.message=\"argument out of range\",this.name=\"ArgumentOutOfRangeError\",this}return A.prototype=Object.create(Error.prototype),A}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl,EmptyErrorImpl=function(){function A(){return Error.call(this),this.message=\"no elements in sequence\",this.name=\"EmptyError\",this}return A.prototype=Object.create(Error.prototype),A}(),EmptyError=EmptyErrorImpl,TimeoutErrorImpl=function(){function A(){return Error.call(this),this.message=\"Timeout has occurred\",this.name=\"TimeoutError\",this}return A.prototype=Object.create(Error.prototype),A}(),TimeoutError=TimeoutErrorImpl;function map$1(A,e){return function(t){if(\"function\"!=typeof A)throw new TypeError(\"argument is not a function. Are you looking for `mapTo()`?\");return t.lift(new MapOperator(A,e))}}var MapOperator=function(){function A(A,e){this.project=A,this.thisArg=e}return A.prototype.call=function(A,e){return e.subscribe(new MapSubscriber(A,this.project,this.thisArg))},A}(),MapSubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.project=t,g.count=0,g.thisArg=o||g,g}return __extends$3(e,A),e.prototype._next=function(A){var e;try{e=this.project.call(this.thisArg,A,this.count++)}catch(A){return void this.destination.error(A)}this.destination.next(e)},e}(Subscriber);function bindCallback(A,e,t){if(e){if(!isScheduler(e))return function(){for(var o=[],g=0;g<arguments.length;g++)o[g]=arguments[g];return bindCallback(A,t).apply(void 0,o).pipe(map$1((function(A){return isArray$h(A)?e.apply(void 0,A):e(A)})))};t=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var g,i=this,r={context:i,subject:g,callbackFunc:A,scheduler:t};return new Observable((function(o){if(t){var n={args:e,subscriber:o,params:r};return t.schedule(dispatch$6,0,n)}if(!g){g=new AsyncSubject;try{A.apply(i,e.concat([function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];g.next(A.length<=1?A[0]:A),g.complete()}]))}catch(A){canReportError(g)?g.error(A):console.warn(A)}}return g.subscribe(o)}))}}function dispatch$6(A){var e=this,t=A.args,o=A.subscriber,g=A.params,i=g.callbackFunc,r=g.context,n=g.scheduler,I=g.subject;if(!I){I=g.subject=new AsyncSubject;try{i.apply(r,t.concat([function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];var o=A.length<=1?A[0]:A;e.add(n.schedule(dispatchNext$2,0,{value:o,subject:I}))}]))}catch(A){I.error(A)}}this.add(I.subscribe(o))}function dispatchNext$2(A){var e=A.value,t=A.subject;t.next(e),t.complete()}function bindNodeCallback(A,e,t){if(e){if(!isScheduler(e))return function(){for(var o=[],g=0;g<arguments.length;g++)o[g]=arguments[g];return bindNodeCallback(A,t).apply(void 0,o).pipe(map$1((function(A){return isArray$h(A)?e.apply(void 0,A):e(A)})))};t=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var g={subject:void 0,args:e,callbackFunc:A,scheduler:t,context:this};return new Observable((function(o){var i=g.context,r=g.subject;if(t)return t.schedule(dispatch$5,0,{params:g,subscriber:o,context:i});if(!r){r=g.subject=new AsyncSubject;try{A.apply(i,e.concat([function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];var t=A.shift();t?r.error(t):(r.next(A.length<=1?A[0]:A),r.complete())}]))}catch(A){canReportError(r)?r.error(A):console.warn(A)}}return r.subscribe(o)}))}}function dispatch$5(A){var e=this,t=A.params,o=A.subscriber,g=A.context,i=t.callbackFunc,r=t.args,n=t.scheduler,I=t.subject;if(!I){I=t.subject=new AsyncSubject;try{i.apply(g,r.concat([function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];var o=A.shift();if(o)e.add(n.schedule(dispatchError,0,{err:o,subject:I}));else{var g=A.length<=1?A[0]:A;e.add(n.schedule(dispatchNext$1,0,{value:g,subject:I}))}}]))}catch(A){this.add(n.schedule(dispatchError,0,{err:A,subject:I}))}}this.add(I.subscribe(o))}function dispatchNext$1(A){var e=A.value,t=A.subject;t.next(e),t.complete()}function dispatchError(A){var e=A.err;A.subject.error(e)}var OuterSubscriber=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends$3(e,A),e.prototype.notifyNext=function(A,e,t,o,g){this.destination.next(e)},e.prototype.notifyError=function(A,e){this.destination.error(A)},e.prototype.notifyComplete=function(A){this.destination.complete()},e}(Subscriber),InnerSubscriber=function(A){function e(e,t,o){var g=A.call(this)||this;return g.parent=e,g.outerValue=t,g.outerIndex=o,g.index=0,g}return __extends$3(e,A),e.prototype._next=function(A){this.parent.notifyNext(this.outerValue,A,this.outerIndex,this.index++,this)},e.prototype._error=function(A){this.parent.notifyError(A,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Subscriber),subscribeToPromise=function(A){return function(e){return A.then((function(A){e.closed||(e.next(A),e.complete())}),(function(A){return e.error(A)})).then(null,hostReportError),e}};function getSymbolIterator(){return\"function\"==typeof Symbol&&Symbol.iterator?Symbol.iterator:\"@@iterator\"}var iterator=getSymbolIterator(),subscribeToIterable=function(A){return function(e){for(var t=A[iterator]();;){var o=void 0;try{o=t.next()}catch(A){return e.error(A),e}if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return\"function\"==typeof t.return&&e.add((function(){t.return&&t.return()})),e}},subscribeToObservable=function(A){return function(e){var t=A[observable]();if(\"function\"!=typeof t.subscribe)throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");return t.subscribe(e)}},isArrayLike$9=function(A){return A&&\"number\"==typeof A.length&&\"function\"!=typeof A};function isPromise(A){return!!A&&\"function\"!=typeof A.subscribe&&\"function\"==typeof A.then}var subscribeTo=function(A){if(A&&\"function\"==typeof A[observable])return subscribeToObservable(A);if(isArrayLike$9(A))return subscribeToArray(A);if(isPromise(A))return subscribeToPromise(A);if(A&&\"function\"==typeof A[iterator])return subscribeToIterable(A);var e=isObject$e(A)?\"an invalid object\":\"'\"+A+\"'\";throw new TypeError(\"You provided \"+e+\" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\")};function subscribeToResult(A,e,t,o,g){if(void 0===g&&(g=new InnerSubscriber(A,t,o)),!g.closed)return e instanceof Observable?e.subscribe(g):subscribeTo(e)(g)}var NONE={};function combineLatest(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];var t=void 0,o=void 0;return isScheduler(A[A.length-1])&&(o=A.pop()),\"function\"==typeof A[A.length-1]&&(t=A.pop()),1===A.length&&isArray$h(A[0])&&(A=A[0]),fromArray(A,o).lift(new CombineLatestOperator(t))}var CombineLatestOperator=function(){function A(A){this.resultSelector=A}return A.prototype.call=function(A,e){return e.subscribe(new CombineLatestSubscriber(A,this.resultSelector))},A}(),CombineLatestSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.resultSelector=t,o.active=0,o.values=[],o.observables=[],o}return __extends$3(e,A),e.prototype._next=function(A){this.values.push(NONE),this.observables.push(A)},e.prototype._complete=function(){var A=this.observables,e=A.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var t=0;t<e;t++){var o=A[t];this.add(subscribeToResult(this,o,void 0,t))}}},e.prototype.notifyComplete=function(A){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(A,e,t){var o=this.values,g=o[t],i=this.toRespond?g===NONE?--this.toRespond:this.toRespond:0;o[t]=e,0===i&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(A){var e;try{e=this.resultSelector.apply(this,A)}catch(A){return void this.destination.error(A)}this.destination.next(e)},e}(OuterSubscriber);function scheduleObservable(A,e){return new Observable((function(t){var o=new Subscription$2;return o.add(e.schedule((function(){var g=A[observable]();o.add(g.subscribe({next:function(A){o.add(e.schedule((function(){return t.next(A)})))},error:function(A){o.add(e.schedule((function(){return t.error(A)})))},complete:function(){o.add(e.schedule((function(){return t.complete()})))}}))}))),o}))}function schedulePromise(A,e){return new Observable((function(t){var o=new Subscription$2;return o.add(e.schedule((function(){return A.then((function(A){o.add(e.schedule((function(){t.next(A),o.add(e.schedule((function(){return t.complete()})))})))}),(function(A){o.add(e.schedule((function(){return t.error(A)})))}))}))),o}))}function scheduleIterable(A,e){if(!A)throw new Error(\"Iterable cannot be null\");return new Observable((function(t){var o,g=new Subscription$2;return g.add((function(){o&&\"function\"==typeof o.return&&o.return()})),g.add(e.schedule((function(){o=A[iterator](),g.add(e.schedule((function(){if(!t.closed){var A,e;try{var g=o.next();A=g.value,e=g.done}catch(A){return void t.error(A)}e?t.complete():(t.next(A),this.schedule())}})))}))),g}))}function isInteropObservable(A){return A&&\"function\"==typeof A[observable]}function isIterable$1(A){return A&&\"function\"==typeof A[iterator]}function scheduled(A,e){if(null!=A){if(isInteropObservable(A))return scheduleObservable(A,e);if(isPromise(A))return schedulePromise(A,e);if(isArrayLike$9(A))return scheduleArray(A,e);if(isIterable$1(A)||\"string\"==typeof A)return scheduleIterable(A,e)}throw new TypeError((null!==A&&typeof A||A)+\" is not observable\")}function from(A,e){return e?scheduled(A,e):A instanceof Observable?A:new Observable(subscribeTo(A))}var SimpleInnerSubscriber=function(A){function e(e){var t=A.call(this)||this;return t.parent=e,t}return __extends$3(e,A),e.prototype._next=function(A){this.parent.notifyNext(A)},e.prototype._error=function(A){this.parent.notifyError(A),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Subscriber),SimpleOuterSubscriber=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends$3(e,A),e.prototype.notifyNext=function(A){this.destination.next(A)},e.prototype.notifyError=function(A){this.destination.error(A)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Subscriber);function innerSubscribe(A,e){if(!e.closed){if(A instanceof Observable)return A.subscribe(e);var t;try{t=subscribeTo(A)(e)}catch(A){e.error(A)}return t}}function mergeMap(A,e,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),\"function\"==typeof e?function(o){return o.pipe(mergeMap((function(t,o){return from(A(t,o)).pipe(map$1((function(A,g){return e(t,A,o,g)})))}),t))}:(\"number\"==typeof e&&(t=e),function(e){return e.lift(new MergeMapOperator(A,t))})}var MergeMapOperator=function(){function A(A,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=A,this.concurrent=e}return A.prototype.call=function(A,e){return e.subscribe(new MergeMapSubscriber(A,this.project,this.concurrent))},A}(),MergeMapSubscriber=function(A){function e(e,t,o){void 0===o&&(o=Number.POSITIVE_INFINITY);var g=A.call(this,e)||this;return g.project=t,g.concurrent=o,g.hasCompleted=!1,g.buffer=[],g.active=0,g.index=0,g}return __extends$3(e,A),e.prototype._next=function(A){this.active<this.concurrent?this._tryNext(A):this.buffer.push(A)},e.prototype._tryNext=function(A){var e,t=this.index++;try{e=this.project(A,t)}catch(A){return void this.destination.error(A)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(A){var e=new SimpleInnerSubscriber(this),t=this.destination;t.add(e);var o=innerSubscribe(A,e);o!==e&&t.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(A){this.destination.next(A)},e.prototype.notifyComplete=function(){var A=this.buffer;this.active--,A.length>0?this._next(A.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(SimpleOuterSubscriber);function mergeAll(A){return void 0===A&&(A=Number.POSITIVE_INFINITY),mergeMap(identity$5,A)}function concatAll(){return mergeAll(1)}function concat(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];return concatAll()(of.apply(void 0,A))}function defer(A){return new Observable((function(e){var t;try{t=A()}catch(A){return void e.error(A)}return(t?from(t):empty()).subscribe(e)}))}function forkJoin(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(1===A.length){var t=A[0];if(isArray$h(t))return forkJoinInternal(t,null);if(isObject$e(t)&&Object.getPrototypeOf(t)===Object.prototype){var o=Object.keys(t);return forkJoinInternal(o.map((function(A){return t[A]})),o)}}if(\"function\"==typeof A[A.length-1]){var g=A.pop();return forkJoinInternal(A=1===A.length&&isArray$h(A[0])?A[0]:A,null).pipe(map$1((function(A){return g.apply(void 0,A)})))}return forkJoinInternal(A,null)}function forkJoinInternal(A,e){return new Observable((function(t){var o=A.length;if(0!==o)for(var g=new Array(o),i=0,r=0,n=function(n){var I=from(A[n]),s=!1;t.add(I.subscribe({next:function(A){s||(s=!0,r++),g[n]=A},error:function(A){return t.error(A)},complete:function(){++i!==o&&s||(r===o&&t.next(e?e.reduce((function(A,e,t){return A[e]=g[t],A}),{}):g),t.complete())}}))},I=0;I<o;I++)n(I);else t.complete()}))}function fromEvent(A,e,t,o){return isFunction$7(t)&&(o=t,t=void 0),o?fromEvent(A,e,t).pipe(map$1((function(A){return isArray$h(A)?o.apply(void 0,A):o(A)}))):new Observable((function(o){setupSubscription(A,e,(function(A){arguments.length>1?o.next(Array.prototype.slice.call(arguments)):o.next(A)}),o,t)}))}function setupSubscription(A,e,t,o,g){var i;if(isEventTarget(A)){var r=A;A.addEventListener(e,t,g),i=function(){return r.removeEventListener(e,t,g)}}else if(isJQueryStyleEventEmitter(A)){var n=A;A.on(e,t),i=function(){return n.off(e,t)}}else if(isNodeStyleEventEmitter(A)){var I=A;A.addListener(e,t),i=function(){return I.removeListener(e,t)}}else{if(!A||!A.length)throw new TypeError(\"Invalid event target\");for(var s=0,C=A.length;s<C;s++)setupSubscription(A[s],e,t,o,g)}o.add(i)}function isNodeStyleEventEmitter(A){return A&&\"function\"==typeof A.addListener&&\"function\"==typeof A.removeListener}function isJQueryStyleEventEmitter(A){return A&&\"function\"==typeof A.on&&\"function\"==typeof A.off}function isEventTarget(A){return A&&\"function\"==typeof A.addEventListener&&\"function\"==typeof A.removeEventListener}function fromEventPattern(A,e,t){return t?fromEventPattern(A,e).pipe(map$1((function(A){return isArray$h(A)?t.apply(void 0,A):t(A)}))):new Observable((function(t){var o,g=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];return t.next(1===A.length?A[0]:A)};try{o=A(g)}catch(A){return void t.error(A)}if(isFunction$7(e))return function(){return e(g,o)}}))}function generate(A,e,t,o,g){var i,r;if(1==arguments.length){var n=A;r=n.initialState,e=n.condition,t=n.iterate,i=n.resultSelector||identity$5,g=n.scheduler}else void 0===o||isScheduler(o)?(r=A,i=identity$5,g=o):(r=A,i=o);return new Observable((function(A){var o=r;if(g)return g.schedule(dispatch$4,0,{subscriber:A,iterate:t,condition:e,resultSelector:i,state:o});for(;;){if(e){var n=void 0;try{n=e(o)}catch(e){return void A.error(e)}if(!n){A.complete();break}}var I=void 0;try{I=i(o)}catch(e){return void A.error(e)}if(A.next(I),A.closed)break;try{o=t(o)}catch(e){return void A.error(e)}}}))}function dispatch$4(A){var e=A.subscriber,t=A.condition;if(!e.closed){if(A.needIterate)try{A.state=A.iterate(A.state)}catch(A){return void e.error(A)}else A.needIterate=!0;if(t){var o=void 0;try{o=t(A.state)}catch(A){return void e.error(A)}if(!o)return void e.complete();if(e.closed)return}var g;try{g=A.resultSelector(A.state)}catch(A){return void e.error(A)}if(!e.closed&&(e.next(g),!e.closed))return this.schedule(A)}}function iif(A,e,t){return void 0===e&&(e=EMPTY),void 0===t&&(t=EMPTY),defer((function(){return A()?e:t}))}function isNumeric(A){return!isArray$h(A)&&A-parseFloat(A)+1>=0}function interval(A,e){return void 0===A&&(A=0),void 0===e&&(e=async),(!isNumeric(A)||A<0)&&(A=0),e&&\"function\"==typeof e.schedule||(e=async),new Observable((function(t){return t.add(e.schedule(dispatch$3,A,{subscriber:t,counter:0,period:A})),t}))}function dispatch$3(A){var e=A.subscriber,t=A.counter,o=A.period;e.next(t),this.schedule({subscriber:e,counter:t+1,period:o},o)}function merge(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];var t=Number.POSITIVE_INFINITY,o=null,g=A[A.length-1];return isScheduler(g)?(o=A.pop(),A.length>1&&\"number\"==typeof A[A.length-1]&&(t=A.pop())):\"number\"==typeof g&&(t=A.pop()),null===o&&1===A.length&&A[0]instanceof Observable?A[0]:mergeAll(t)(fromArray(A,o))}var NEVER=new Observable(noop$3);function never(){return NEVER}function onErrorResumeNext(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(0===A.length)return EMPTY;var t=A[0],o=A.slice(1);return 1===A.length&&isArray$h(t)?onErrorResumeNext.apply(void 0,t):new Observable((function(A){var e=function(){return A.add(onErrorResumeNext.apply(void 0,o).subscribe(A))};return from(t).subscribe({next:function(e){A.next(e)},error:e,complete:e})}))}function pairs(A,e){return new Observable(e?function(t){var o=Object.keys(A),g=new Subscription$2;return g.add(e.schedule(dispatch$2,0,{keys:o,index:0,subscriber:t,subscription:g,obj:A})),g}:function(e){for(var t=Object.keys(A),o=0;o<t.length&&!e.closed;o++){var g=t[o];A.hasOwnProperty(g)&&e.next([g,A[g]])}e.complete()})}function dispatch$2(A){var e=A.keys,t=A.index,o=A.subscriber,g=A.subscription,i=A.obj;if(!o.closed)if(t<e.length){var r=e[t];o.next([r,i[r]]),g.add(this.schedule({keys:e,index:t+1,subscriber:o,subscription:g,obj:i}))}else o.complete()}function not(A,e){function t(){return!t.pred.apply(t.thisArg,arguments)}return t.pred=A,t.thisArg=e,t}function filter(A,e){return function(t){return t.lift(new FilterOperator(A,e))}}var FilterOperator=function(){function A(A,e){this.predicate=A,this.thisArg=e}return A.prototype.call=function(A,e){return e.subscribe(new FilterSubscriber(A,this.predicate,this.thisArg))},A}(),FilterSubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.predicate=t,g.thisArg=o,g.count=0,g}return __extends$3(e,A),e.prototype._next=function(A){var e;try{e=this.predicate.call(this.thisArg,A,this.count++)}catch(A){return void this.destination.error(A)}e&&this.destination.next(A)},e}(Subscriber);function partition(A,e,t){return[filter(e,t)(new Observable(subscribeTo(A))),filter(not(e,t))(new Observable(subscribeTo(A)))]}function race(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(1===A.length){if(!isArray$h(A[0]))return A[0];A=A[0]}return fromArray(A,void 0).lift(new RaceOperator)}var RaceOperator=function(){function A(){}return A.prototype.call=function(A,e){return e.subscribe(new RaceSubscriber(A))},A}(),RaceSubscriber=function(A){function e(e){var t=A.call(this,e)||this;return t.hasFirst=!1,t.observables=[],t.subscriptions=[],t}return __extends$3(e,A),e.prototype._next=function(A){this.observables.push(A)},e.prototype._complete=function(){var A=this.observables,e=A.length;if(0===e)this.destination.complete();else{for(var t=0;t<e&&!this.hasFirst;t++){var o=subscribeToResult(this,A[t],void 0,t);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(A,e,t){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==t){var g=this.subscriptions[o];g.unsubscribe(),this.remove(g)}this.subscriptions=null}this.destination.next(e)},e}(OuterSubscriber);function range(A,e,t){return void 0===A&&(A=0),new Observable((function(o){void 0===e&&(e=A,A=0);var g=0,i=A;if(t)return t.schedule(dispatch$1,0,{index:g,count:e,start:A,subscriber:o});for(;;){if(g++>=e){o.complete();break}if(o.next(i++),o.closed)break}}))}function dispatch$1(A){var e=A.start,t=A.index,o=A.count,g=A.subscriber;t>=o?g.complete():(g.next(e),g.closed||(A.index=t+1,A.start=e+1,this.schedule(A)))}function timer(A,e,t){void 0===A&&(A=0);var o=-1;return isNumeric(e)?o=Number(e)<1?1:Number(e):isScheduler(e)&&(t=e),isScheduler(t)||(t=async),new Observable((function(e){var g=isNumeric(A)?A:+A-t.now();return t.schedule(dispatch,g,{index:0,period:o,subscriber:e})}))}function dispatch(A){var e=A.index,t=A.period,o=A.subscriber;if(o.next(e),!o.closed){if(-1===t)return o.complete();A.index=e+1,this.schedule(A,t)}}function using(A,e){return new Observable((function(t){var o,g;try{o=A()}catch(A){return void t.error(A)}try{g=e(o)}catch(A){return void t.error(A)}var i=(g?from(g):EMPTY).subscribe(t);return function(){i.unsubscribe(),o&&o.unsubscribe()}}))}function zip(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];var t=A[A.length-1];return\"function\"==typeof t&&A.pop(),fromArray(A,void 0).lift(new ZipOperator(t))}var ZipOperator=function(){function A(A){this.resultSelector=A}return A.prototype.call=function(A,e){return e.subscribe(new ZipSubscriber(A,this.resultSelector))},A}(),ZipSubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.resultSelector=t,g.iterators=[],g.active=0,g.resultSelector=\"function\"==typeof t?t:void 0,g}return __extends$3(e,A),e.prototype._next=function(A){var e=this.iterators;isArray$h(A)?e.push(new StaticArrayIterator(A)):\"function\"==typeof A[iterator]?e.push(new StaticIterator(A[iterator]())):e.push(new ZipBufferIterator(this.destination,this,A))},e.prototype._complete=function(){var A=this.iterators,e=A.length;if(this.unsubscribe(),0!==e){this.active=e;for(var t=0;t<e;t++){var o=A[t];if(o.stillUnsubscribed)this.destination.add(o.subscribe());else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var A=this.iterators,e=A.length,t=this.destination,o=0;o<e;o++){if(\"function\"==typeof(r=A[o]).hasValue&&!r.hasValue())return}var g=!1,i=[];for(o=0;o<e;o++){var r,n=(r=A[o]).next();if(r.hasCompleted()&&(g=!0),n.done)return void t.complete();i.push(n.value)}this.resultSelector?this._tryresultSelector(i):t.next(i),g&&t.complete()},e.prototype._tryresultSelector=function(A){var e;try{e=this.resultSelector.apply(this,A)}catch(A){return void this.destination.error(A)}this.destination.next(e)},e}(Subscriber),StaticIterator=function(){function A(A){this.iterator=A,this.nextResult=A.next()}return A.prototype.hasValue=function(){return!0},A.prototype.next=function(){var A=this.nextResult;return this.nextResult=this.iterator.next(),A},A.prototype.hasCompleted=function(){var A=this.nextResult;return Boolean(A&&A.done)},A}(),StaticArrayIterator=function(){function A(A){this.array=A,this.index=0,this.length=0,this.length=A.length}return A.prototype[iterator]=function(){return this},A.prototype.next=function(A){var e=this.index++,t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},A.prototype.hasValue=function(){return this.array.length>this.index},A.prototype.hasCompleted=function(){return this.array.length===this.index},A}(),ZipBufferIterator=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.parent=t,g.observable=o,g.stillUnsubscribed=!0,g.buffer=[],g.isComplete=!1,g}return __extends$3(e,A),e.prototype[iterator]=function(){return this},e.prototype.next=function(){var A=this.buffer;return 0===A.length&&this.isComplete?{value:null,done:!0}:{value:A.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(A){this.buffer.push(A),this.parent.checkIterators()},e.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},e}(SimpleOuterSubscriber),_esm5=Object.freeze({__proto__:null,ArgumentOutOfRangeError:ArgumentOutOfRangeError,AsyncSubject:AsyncSubject,BehaviorSubject:BehaviorSubject,ConnectableObservable:ConnectableObservable,EMPTY:EMPTY,EmptyError:EmptyError,GroupedObservable:GroupedObservable,NEVER:NEVER,Notification:Notification,get NotificationKind(){return NotificationKind},ObjectUnsubscribedError:ObjectUnsubscribedError,Observable:Observable,ReplaySubject:ReplaySubject,Scheduler:Scheduler$2,Subject:Subject,Subscriber:Subscriber,Subscription:Subscription$2,TimeoutError:TimeoutError,UnsubscriptionError:UnsubscriptionError$1,VirtualAction:VirtualAction,VirtualTimeScheduler:VirtualTimeScheduler,animationFrame:animationFrame,animationFrameScheduler:animationFrameScheduler,asap:asap,asapScheduler:asapScheduler,async:async,asyncScheduler:asyncScheduler,bindCallback:bindCallback,bindNodeCallback:bindNodeCallback,combineLatest:combineLatest,concat:concat,config:config$1,defer:defer,empty:empty,forkJoin:forkJoin,from:from,fromEvent:fromEvent,fromEventPattern:fromEventPattern,generate:generate,identity:identity$5,iif:iif,interval:interval,isObservable:isObservable,merge:merge,never:never,noop:noop$3,observable:observable,of:of,onErrorResumeNext:onErrorResumeNext,pairs:pairs,partition:partition,pipe:pipe,queue:queue,queueScheduler:queueScheduler,race:race,range:range,scheduled:scheduled,throwError:throwError,timer:timer,using:using,zip:zip});const addPeriodIfNeeded=A=>\"string\"==typeof A?A.endsWith(\".\")?A:\"\".concat(A,\".\"):A;function genErrorMessage(A,e){const t=\"number\"==typeof e?e:void 0!==e&&\"string\"!=typeof e?e.code:void 0,o=\"number\"!=typeof e&&\"string\"!=typeof e&&void 0!==e&&void 0!==e.serverCode?e.serverCode:void 0,g=\"\".concat(void 0!==t?\"Error Code \".concat(t):\"\").concat(void 0!==o?\", server Code \".concat(o):\"\");let i;return i=\"string\"==typeof A&&A?addPeriodIfNeeded(A):Array.isArray(A)&&\"string\"==typeof A[0]&&A[0]?addPeriodIfNeeded(format$1(A[0],...A.slice(1))):\"\",\"\".concat(\"\"===g?\"\":\"\".concat(g,\" - \")).concat(i)}class RTMBaseError extends Error{constructor(A,e,t){var o;let g;super(genErrorMessage(e,t)),_defineProperty$1(this,\"originalError\",void 0),_defineProperty$1(this,\"code\",void 0),_defineProperty$1(this,\"serverCode\",void 0),_defineProperty$1(this,\"error\",void 0),_defineProperty$1(this,\"reason\",void 0),_defineProperty$1(this,\"operation\",void 0),_defineProperty$1(this,\"errorCode\",void 0),\"number\"==typeof t?this.code=t:\"string\"==typeof t?this.name=t:void 0!==t&&(t.originalError&&(this.originalError=t.originalError),void 0!==t.code&&(this.code=t.code),void 0!==t.serverCode&&(this.serverCode=t.serverCode)),g=\"string\"==typeof e&&e?addPeriodIfNeeded(e):Array.isArray(e)&&\"string\"==typeof e[0]&&e[0]?addPeriodIfNeeded(format$1(e[0],...e.slice(1))):\"\",this.error=!0,this.errorCode=null!==(o=this.code)&&void 0!==o?o:0,this.operation=null!=A?A:\"\",this.reason=g}}class RtmInternalError extends Error{constructor(A,e){super(genErrorMessage(A,e)),_defineProperty$1(this,\"name\",\"RtmInternalError\"),_defineProperty$1(this,\"code\",void 0),this.code=e}}const genError=()=>class extends RtmInternalError{constructor(A){const e=Object.keys(A);super(A[e[0]],e[0])}},CommonError=genError();class RtmTimeoutError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmTimeoutError\")}}class RtmInvalidArgumentError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmInvalidArgumentError\")}}class RtmInvalidStatusError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmInvalidStatusError\")}}class RtmLimitExceededError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmLimitExceededError\")}}class RtmInvokeTooOftenError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmInvokeTooOftenError\")}}class RtmUnavailableError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmUnavailableError\"),_defineProperty$1(this,\"statusCode\",void 0)}}class RtmUnauthenticatedError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmUnauthenticatedError\"),_defineProperty$1(this,\"serverCode\",void 0)}}class RtmUnknownError extends RTMBaseError{constructor(){super(...arguments),_defineProperty$1(this,\"name\",\"RtmUnknownError\")}}const isTimeout=A=>A instanceof RtmTimeoutError||A instanceof TimeoutError,isRtmError=A=>A instanceof RTMBaseError,isNoLogged=A=>A instanceof RtmInvalidStatusError;function getType(A){return Object.prototype.toString.call(A).slice(8,-1)}function isUndefined$2(A){return\"Undefined\"===getType(A)}function isNull$2(A){return\"Null\"===getType(A)}function isPlainObject$3(A){return\"Object\"===getType(A)&&(A.constructor===Object&&Object.getPrototypeOf(A)===Object.prototype)}function isEmptyObject(A){return isPlainObject$3(A)&&0===Object.keys(A).length}function isAnyObject(A){return\"Object\"===getType(A)}function isFunction$6(A){return\"function\"==typeof A}function isString(A){return\"String\"===getType(A)}function isNumber(A){return\"Number\"===getType(A)&&!isNaN(A)}function isBoolean(A){return\"Boolean\"===getType(A)}function isSymbol$6(A){return\"Symbol\"===getType(A)}function isPrimitive(A){return isBoolean(A)||isNull$2(A)||isUndefined$2(A)||isNumber(A)||isString(A)||isSymbol$6(A)}function isNil(A){return null==A}var isNil_1=isNil,isNil$1=getDefaultExportFromCjs(isNil_1);function copyArray$3(A,e){var t=-1,o=A.length;for(e||(e=Array(o));++t<o;)e[t]=A[t];return e}var _copyArray=copyArray$3,nativeFloor=Math.floor,nativeRandom=Math.random;function baseRandom$2(A,e){return A+nativeFloor(nativeRandom()*(e-A+1))}var _baseRandom=baseRandom$2,baseRandom$1=_baseRandom;function shuffleSelf$2(A,e){var t=-1,o=A.length,g=o-1;for(e=void 0===e?o:e;++t<e;){var i=baseRandom$1(t,g),r=A[i];A[i]=A[t],A[t]=r}return A.length=e,A}var _shuffleSelf=shuffleSelf$2,copyArray$2=_copyArray,shuffleSelf$1=_shuffleSelf;function arrayShuffle$1(A){return shuffleSelf$1(copyArray$2(A))}var _arrayShuffle=arrayShuffle$1;function arrayMap$5(A,e){for(var t=-1,o=null==A?0:A.length,g=Array(o);++t<o;)g[t]=e(A[t],t,A);return g}var _arrayMap=arrayMap$5,arrayMap$4=_arrayMap;function baseValues$1(A,e){return arrayMap$4(e,(function(e){return A[e]}))}var _baseValues=baseValues$1;function baseTimes$1(A,e){for(var t=-1,o=Array(A);++t<A;)o[t]=e(t);return o}var _baseTimes=baseTimes$1,freeGlobal$1=\"object\"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=\"object\"==typeof self&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function(\"return this\")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(A){var e=hasOwnProperty$c.call(A,symToStringTag$1),t=A[symToStringTag$1];try{A[symToStringTag$1]=void 0;var o=!0}catch(A){}var g=nativeObjectToString$1.call(A);return o&&(e?A[symToStringTag$1]=t:delete A[symToStringTag$1]),g}var _getRawTag=getRawTag$1,objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(A){return nativeObjectToString.call(A)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$6(A){return null==A?void 0===A?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(A)?getRawTag(A):objectToString(A)}var _baseGetTag=baseGetTag$6;function isObjectLike$9(A){return null!=A&&\"object\"==typeof A}var isObjectLike_1=isObjectLike$9,baseGetTag$5=_baseGetTag,isObjectLike$8=isObjectLike_1,argsTag$3=\"[object Arguments]\";function baseIsArguments$1(A){return isObjectLike$8(A)&&baseGetTag$5(A)==argsTag$3}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$7=isObjectLike_1,objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty,propertyIsEnumerable$1=objectProto$d.propertyIsEnumerable,isArguments$4=baseIsArguments(function(){return arguments}())?baseIsArguments:function(A){return isObjectLike$7(A)&&hasOwnProperty$b.call(A,\"callee\")&&!propertyIsEnumerable$1.call(A,\"callee\")},isArguments_1=isArguments$4,isArray$g=Array.isArray,isArray_1$1=isArray$g,isBuffer$4={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$4.exports,function(A,e){var t=_root,o=stubFalse_1,g=e&&!e.nodeType&&e,i=g&&A&&!A.nodeType&&A,r=i&&i.exports===g?t.Buffer:void 0,n=(r?r.isBuffer:void 0)||o;A.exports=n}(isBuffer$4,isBuffer$4.exports);var isBufferExports=isBuffer$4.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex$4(A,e){var t=typeof A;return!!(e=null==e?MAX_SAFE_INTEGER$1:e)&&(\"number\"==t||\"symbol\"!=t&&reIsUint.test(A))&&A>-1&&A%1==0&&A<e}var _isIndex=isIndex$4,MAX_SAFE_INTEGER=9007199254740991;function isLength$3(A){return\"number\"==typeof A&&A>-1&&A%1==0&&A<=MAX_SAFE_INTEGER}var isLength_1=isLength$3,baseGetTag$4=_baseGetTag,isLength$2=isLength_1,isObjectLike$6=isObjectLike_1,argsTag$2=\"[object Arguments]\",arrayTag$2=\"[object Array]\",boolTag$3=\"[object Boolean]\",dateTag$3=\"[object Date]\",errorTag$2=\"[object Error]\",funcTag$2=\"[object Function]\",mapTag$5=\"[object Map]\",numberTag$3=\"[object Number]\",objectTag$4=\"[object Object]\",regexpTag$3=\"[object RegExp]\",setTag$5=\"[object Set]\",stringTag$3=\"[object String]\",weakMapTag$2=\"[object WeakMap]\",arrayBufferTag$3=\"[object ArrayBuffer]\",dataViewTag$4=\"[object DataView]\",float32Tag$2=\"[object Float32Array]\",float64Tag$2=\"[object Float64Array]\",int8Tag$2=\"[object Int8Array]\",int16Tag$2=\"[object Int16Array]\",int32Tag$2=\"[object Int32Array]\",uint8Tag$2=\"[object Uint8Array]\",uint8ClampedTag$2=\"[object Uint8ClampedArray]\",uint16Tag$2=\"[object Uint16Array]\",uint32Tag$2=\"[object Uint32Array]\",typedArrayTags={};function baseIsTypedArray$1(A){return isObjectLike$6(A)&&isLength$2(A.length)&&!!typedArrayTags[baseGetTag$4(A)]}typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0,typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$2]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$4(A){return function(e){return A(e)}}var _baseUnary=baseUnary$4,_nodeUtil={exports:{}};_nodeUtil.exports,function(A,e){var t=_freeGlobal,o=e&&!e.nodeType&&e,g=o&&A&&!A.nodeType&&A,i=g&&g.exports===o&&t.process,r=function(){try{var A=g&&g.require&&g.require(\"util\").types;return A||i&&i.binding&&i.binding(\"util\")}catch(A){}}();A.exports=r}(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$3=_baseUnary,nodeUtil$2=_nodeUtilExports,nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$3(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3,baseTimes=_baseTimes,isArguments$3=isArguments_1,isArray$f=isArray_1$1,isBuffer$3=isBufferExports,isIndex$3=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function arrayLikeKeys$2(A,e){var t=isArray$f(A),o=!t&&isArguments$3(A),g=!t&&!o&&isBuffer$3(A),i=!t&&!o&&!g&&isTypedArray$2(A),r=t||o||g||i,n=r?baseTimes(A.length,String):[],I=n.length;for(var s in A)!e&&!hasOwnProperty$a.call(A,s)||r&&(\"length\"==s||g&&(\"offset\"==s||\"parent\"==s)||i&&(\"buffer\"==s||\"byteLength\"==s||\"byteOffset\"==s)||isIndex$3(s,I))||n.push(s);return n}var _arrayLikeKeys=arrayLikeKeys$2,objectProto$b=Object.prototype;function isPrototype$3(A){var e=A&&A.constructor;return A===(\"function\"==typeof e&&e.prototype||objectProto$b)}var _isPrototype=isPrototype$3;function overArg$2(A,e){return function(t){return A(e(t))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$2=_isPrototype,nativeKeys=_nativeKeys,objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function baseKeys$1(A){if(!isPrototype$2(A))return nativeKeys(A);var e=[];for(var t in Object(A))hasOwnProperty$9.call(A,t)&&\"constructor\"!=t&&e.push(t);return e}var _baseKeys=baseKeys$1;function isObject$d(A){var e=typeof A;return null!=A&&(\"object\"==e||\"function\"==e)}var isObject_1$1=isObject$d,baseGetTag$3=_baseGetTag,isObject$c=isObject_1$1,asyncTag=\"[object AsyncFunction]\",funcTag$1=\"[object Function]\",genTag$1=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction$5(A){if(!isObject$c(A))return!1;var e=baseGetTag$3(A);return e==funcTag$1||e==genTag$1||e==asyncTag||e==proxyTag}var isFunction_1$1=isFunction$5,isFunction$4=isFunction_1$1,isLength$1=isLength_1;function isArrayLike$8(A){return null!=A&&isLength$1(A.length)&&!isFunction$4(A)}var isArrayLike_1=isArrayLike$8,arrayLikeKeys$1=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$7=isArrayLike_1;function keys$7(A){return isArrayLike$7(A)?arrayLikeKeys$1(A):baseKeys(A)}var keys_1=keys$7,baseValues=_baseValues,keys$6=keys_1;function values$2(A){return null==A?[]:baseValues(A,keys$6(A))}var values_1=values$2,values$3=getDefaultExportFromCjs(values_1),shuffleSelf=_shuffleSelf,values$1=values_1;function baseShuffle$1(A){return shuffleSelf(values$1(A))}var _baseShuffle=baseShuffle$1,arrayShuffle=_arrayShuffle,baseShuffle=_baseShuffle,isArray$e=isArray_1$1;function shuffle(A){return(isArray$e(A)?arrayShuffle:baseShuffle)(A)}var shuffle_1=shuffle,shuffle$1=getDefaultExportFromCjs(shuffle_1);function arraySome$2(A,e){for(var t=-1,o=null==A?0:A.length;++t<o;)if(e(A[t],t,A))return!0;return!1}var _arraySome=arraySome$2;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$5(A,e){return A===e||A!=A&&e!=e}var eq_1=eq$5,eq$4=eq_1;function assocIndexOf$4(A,e){for(var t=A.length;t--;)if(eq$4(A[t][0],e))return t;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(A){var e=this.__data__,t=assocIndexOf$3(e,A);return!(t<0)&&(t==e.length-1?e.pop():splice.call(e,t,1),--this.size,!0)}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(A){var e=this.__data__,t=assocIndexOf$2(e,A);return t<0?void 0:e[t][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(A){return assocIndexOf$1(this.__data__,A)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(A,e){var t=this.__data__,o=assocIndexOf(t,A);return o<0?(++this.size,t.push([A,e])):t[o][1]=e,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var o=A[e];this.set(o[0],o[1])}}ListCache$4.prototype.clear=listCacheClear,ListCache$4.prototype.delete=listCacheDelete,ListCache$4.prototype.get=listCacheGet,ListCache$4.prototype.has=listCacheHas,ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(A){var e=this.__data__,t=e.delete(A);return this.size=e.size,t}var _stackDelete=stackDelete$1;function stackGet$1(A){return this.__data__.get(A)}var _stackGet=stackGet$1;function stackHas$1(A){return this.__data__.has(A)}var _stackHas=stackHas$1,root$7=_root,coreJsData$1=root$7[\"__core-js_shared__\"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||\"\"),uid?\"Symbol(src)_1.\"+uid:\"\"),uid;function isMasked$1(A){return!!maskSrcKey&&maskSrcKey in A}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(A){if(null!=A){try{return funcToString$2.call(A)}catch(A){}try{return A+\"\"}catch(A){}}return\"\"}var _toSource=toSource$2,isFunction$3=isFunction_1$1,isMasked=_isMasked,isObject$b=isObject_1$1,toSource$1=_toSource,reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g,reIsHostCtor=/^\\[object .+?Constructor\\]$/,funcProto$1=Function.prototype,objectProto$9=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$8=objectProto$9.hasOwnProperty,reIsNative=RegExp(\"^\"+funcToString$1.call(hasOwnProperty$8).replace(reRegExpChar,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative$1(A){return!(!isObject$b(A)||isMasked(A))&&(isFunction$3(A)?reIsNative:reIsHostCtor).test(toSource$1(A))}var _baseIsNative=baseIsNative$1;function getValue$1(A,e){return null==A?void 0:A[e]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(A,e){var t=getValue(A,e);return baseIsNative(t)?t:void 0}var _getNative=getNative$7,getNative$6=_getNative,root$6=_root,Map$5=getNative$6(root$6,\"Map\"),_Map=Map$5,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,\"create\"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(A){var e=this.has(A)&&delete this.__data__[A];return this.size-=e?1:0,e}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2=\"__lodash_hash_undefined__\",objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashGet$1(A){var e=this.__data__;if(nativeCreate$2){var t=e[A];return t===HASH_UNDEFINED$2?void 0:t}return hasOwnProperty$7.call(e,A)?e[A]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashHas$1(A){var e=this.__data__;return nativeCreate$1?void 0!==e[A]:hasOwnProperty$6.call(e,A)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1=\"__lodash_hash_undefined__\";function hashSet$1(A,e){var t=this.__data__;return this.size+=this.has(A)?0:1,t[A]=nativeCreate&&void 0===e?HASH_UNDEFINED$1:e,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var o=A[e];this.set(o[0],o[1])}}Hash$1.prototype.clear=hashClear,Hash$1.prototype.delete=hashDelete,Hash$1.prototype.get=hashGet,Hash$1.prototype.has=hashHas,Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$4=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$4||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(A){var e=typeof A;return\"string\"==e||\"number\"==e||\"symbol\"==e||\"boolean\"==e?\"__proto__\"!==A:null===A}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(A,e){var t=A.__data__;return isKeyable(e)?t[\"string\"==typeof e?\"string\":\"hash\"]:t.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(A){var e=getMapData$3(this,A).delete(A);return this.size-=e?1:0,e}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(A){return getMapData$2(this,A).get(A)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(A){return getMapData$1(this,A).has(A)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(A,e){var t=getMapData(this,A),o=t.size;return t.set(A,e),this.size+=t.size==o?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var o=A[e];this.set(o[0],o[1])}}MapCache$3.prototype.clear=mapCacheClear,MapCache$3.prototype.delete=mapCacheDelete,MapCache$3.prototype.get=mapCacheGet,MapCache$3.prototype.has=mapCacheHas,MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,ListCache$1=_ListCache,Map$3=_Map,MapCache$2=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(A,e){var t=this.__data__;if(t instanceof ListCache$1){var o=t.__data__;if(!Map$3||o.length<LARGE_ARRAY_SIZE$1-1)return o.push([A,e]),this.size=++t.size,this;t=this.__data__=new MapCache$2(o)}return t.set(A,e),this.size=t.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$4(A){var e=this.__data__=new ListCache(A);this.size=e.size}Stack$4.prototype.clear=stackClear,Stack$4.prototype.delete=stackDelete,Stack$4.prototype.get=stackGet,Stack$4.prototype.has=stackHas,Stack$4.prototype.set=stackSet;var _Stack=Stack$4,HASH_UNDEFINED=\"__lodash_hash_undefined__\";function setCacheAdd$1(A){return this.__data__.set(A,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(A){return this.__data__.has(A)}var _setCacheHas=setCacheHas$1,MapCache$1=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(A){var e=-1,t=null==A?0:A.length;for(this.__data__=new MapCache$1;++e<t;)this.add(A[e])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd,SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function cacheHas$2(A,e){return A.has(e)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome$1=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(A,e,t,o,g,i){var r=t&COMPARE_PARTIAL_FLAG$5,n=A.length,I=e.length;if(n!=I&&!(r&&I>n))return!1;var s=i.get(A),C=i.get(e);if(s&&C)return s==e&&C==A;var E=-1,a=!0,B=t&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(i.set(A,e),i.set(e,A);++E<n;){var Q=A[E],c=e[E];if(o)var l=r?o(c,Q,E,e,A,i):o(Q,c,E,A,e,i);if(void 0!==l){if(l)continue;a=!1;break}if(B){if(!arraySome$1(e,(function(A,e){if(!cacheHas$1(B,e)&&(Q===A||g(Q,A,t,o,i)))return B.push(e)}))){a=!1;break}}else if(Q!==c&&!g(Q,c,t,o,i)){a=!1;break}}return i.delete(A),i.delete(e),a}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$3=root$5.Uint8Array,_Uint8Array=Uint8Array$3;function mapToArray$1(A){var e=-1,t=Array(A.size);return A.forEach((function(A,o){t[++e]=[o,A]})),t}var _mapToArray=mapToArray$1;function setToArray$3(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=A})),t}var _setToArray=setToArray$3,Symbol$4=_Symbol,Uint8Array$2=_Uint8Array,eq$3=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2=\"[object Boolean]\",dateTag$2=\"[object Date]\",errorTag$1=\"[object Error]\",mapTag$4=\"[object Map]\",numberTag$2=\"[object Number]\",regexpTag$2=\"[object RegExp]\",setTag$4=\"[object Set]\",stringTag$2=\"[object String]\",symbolTag$3=\"[object Symbol]\",arrayBufferTag$2=\"[object ArrayBuffer]\",dataViewTag$3=\"[object DataView]\",symbolProto$2=Symbol$4?Symbol$4.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function equalByTag$1(A,e,t,o,g,i,r){switch(t){case dataViewTag$3:if(A.byteLength!=e.byteLength||A.byteOffset!=e.byteOffset)return!1;A=A.buffer,e=e.buffer;case arrayBufferTag$2:return!(A.byteLength!=e.byteLength||!i(new Uint8Array$2(A),new Uint8Array$2(e)));case boolTag$2:case dateTag$2:case numberTag$2:return eq$3(+A,+e);case errorTag$1:return A.name==e.name&&A.message==e.message;case regexpTag$2:case stringTag$2:return A==e+\"\";case mapTag$4:var n=mapToArray;case setTag$4:var I=o&COMPARE_PARTIAL_FLAG$4;if(n||(n=setToArray$2),A.size!=e.size&&!I)return!1;var s=r.get(A);if(s)return s==e;o|=COMPARE_UNORDERED_FLAG$2,r.set(A,e);var C=equalArrays$1(n(A),n(e),o,g,i,r);return r.delete(A),C;case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(A)==symbolValueOf$1.call(e)}return!1}var _equalByTag=equalByTag$1;function arrayPush$3(A,e){for(var t=-1,o=e.length,g=A.length;++t<o;)A[g+t]=e[t];return A}var _arrayPush=arrayPush$3,arrayPush$2=_arrayPush,isArray$d=isArray_1$1;function baseGetAllKeys$2(A,e,t){var o=e(A);return isArray$d(A)?o:arrayPush$2(o,t(A))}var _baseGetAllKeys=baseGetAllKeys$2;function arrayFilter$1(A,e){for(var t=-1,o=null==A?0:A.length,g=0,i=[];++t<o;){var r=A[t];e(r,t,A)&&(i[g++]=r)}return i}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(A){return null==A?[]:(A=Object(A),arrayFilter(nativeGetSymbols$1(A),(function(e){return propertyIsEnumerable.call(A,e)})))}:stubArray$1,_getSymbols=getSymbols$3,baseGetAllKeys$1=_baseGetAllKeys,getSymbols$2=_getSymbols,keys$5=keys_1;function getAllKeys$2(A){return baseGetAllKeys$1(A,keys$5,getSymbols$2)}var _getAllKeys=getAllKeys$2,getAllKeys$1=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function equalObjects$1(A,e,t,o,g,i){var r=t&COMPARE_PARTIAL_FLAG$3,n=getAllKeys$1(A),I=n.length;if(I!=getAllKeys$1(e).length&&!r)return!1;for(var s=I;s--;){var C=n[s];if(!(r?C in e:hasOwnProperty$5.call(e,C)))return!1}var E=i.get(A),a=i.get(e);if(E&&a)return E==e&&a==A;var B=!0;i.set(A,e),i.set(e,A);for(var Q=r;++s<I;){var c=A[C=n[s]],l=e[C];if(o)var u=r?o(l,c,C,e,A,i):o(c,l,C,A,e,i);if(!(void 0===u?c===l||g(c,l,t,o,i):u)){B=!1;break}Q||(Q=\"constructor\"==C)}if(B&&!Q){var h=A.constructor,d=e.constructor;h==d||!(\"constructor\"in A)||!(\"constructor\"in e)||\"function\"==typeof h&&h instanceof h&&\"function\"==typeof d&&d instanceof d||(B=!1)}return i.delete(A),i.delete(e),B}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$4=_root,DataView$2=getNative$4(root$4,\"DataView\"),_DataView=DataView$2,getNative$3=_getNative,root$3=_root,Promise$2=getNative$3(root$3,\"Promise\"),_Promise=Promise$2,getNative$2=_getNative,root$2=_root,Set$3=getNative$2(root$2,\"Set\"),_Set=Set$3,getNative$1=_getNative,root$1=_root,WeakMap$2=getNative$1(root$1,\"WeakMap\"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$2=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag$3=\"[object Map]\",objectTag$3=\"[object Object]\",promiseTag=\"[object Promise]\",setTag$3=\"[object Set]\",weakMapTag$1=\"[object WeakMap]\",dataViewTag$2=\"[object DataView]\",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$4=baseGetTag$2;(DataView$1&&getTag$4(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$2&&getTag$4(new Map$2)!=mapTag$3||Promise$1&&getTag$4(Promise$1.resolve())!=promiseTag||Set$2&&getTag$4(new Set$2)!=setTag$3||WeakMap$1&&getTag$4(new WeakMap$1)!=weakMapTag$1)&&(getTag$4=function(A){var e=baseGetTag$2(A),t=e==objectTag$3?A.constructor:void 0,o=t?toSource(t):\"\";if(o)switch(o){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return e});var _getTag=getTag$4,Stack$3=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$3=_getTag,isArray$c=isArray_1$1,isBuffer$2=isBufferExports,isTypedArray$1=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag$1=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\",objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function baseIsEqualDeep$1(A,e,t,o,g,i){var r=isArray$c(A),n=isArray$c(e),I=r?arrayTag$1:getTag$3(A),s=n?arrayTag$1:getTag$3(e),C=(I=I==argsTag$1?objectTag$2:I)==objectTag$2,E=(s=s==argsTag$1?objectTag$2:s)==objectTag$2,a=I==s;if(a&&isBuffer$2(A)){if(!isBuffer$2(e))return!1;r=!0,C=!1}if(a&&!C)return i||(i=new Stack$3),r||isTypedArray$1(A)?equalArrays(A,e,t,o,g,i):equalByTag(A,e,I,t,o,g,i);if(!(t&COMPARE_PARTIAL_FLAG$2)){var B=C&&hasOwnProperty$4.call(A,\"__wrapped__\"),Q=E&&hasOwnProperty$4.call(e,\"__wrapped__\");if(B||Q){var c=B?A.value():A,l=Q?e.value():e;return i||(i=new Stack$3),g(c,l,t,o,i)}}return!!a&&(i||(i=new Stack$3),equalObjects(A,e,t,o,g,i))}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$5=isObjectLike_1;function baseIsEqual$2(A,e,t,o,g){return A===e||(null==A||null==e||!isObjectLike$5(A)&&!isObjectLike$5(e)?A!=A&&e!=e:baseIsEqualDeep(A,e,t,o,baseIsEqual$2,g))}var _baseIsEqual=baseIsEqual$2,Stack$2=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(A,e,t,o){var g=t.length,i=g,r=!o;if(null==A)return!i;for(A=Object(A);g--;){var n=t[g];if(r&&n[2]?n[1]!==A[n[0]]:!(n[0]in A))return!1}for(;++g<i;){var I=(n=t[g])[0],s=A[I],C=n[1];if(r&&n[2]){if(void 0===s&&!(I in A))return!1}else{var E=new Stack$2;if(o)var a=o(s,C,I,A,e,E);if(!(void 0===a?baseIsEqual$1(C,s,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,o,E):a))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$a=isObject_1$1;function isStrictComparable$2(A){return A==A&&!isObject$a(A)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$4=keys_1;function getMatchData$1(A){for(var e=keys$4(A),t=e.length;t--;){var o=e[t],g=A[o];e[t]=[o,g,isStrictComparable$1(g)]}return e}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(A,e){return function(t){return null!=t&&(t[A]===e&&(void 0!==e||A in Object(t)))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(A){var e=getMatchData(A);return 1==e.length&&e[0][2]?matchesStrictComparable$1(e[0][0],e[0][1]):function(t){return t===A||baseIsMatch(t,A,e)}}var _baseMatches=baseMatches$1,baseGetTag$1=_baseGetTag,isObjectLike$4=isObjectLike_1,symbolTag$2=\"[object Symbol]\";function isSymbol$5(A){return\"symbol\"==typeof A||isObjectLike$4(A)&&baseGetTag$1(A)==symbolTag$2}var isSymbol_1=isSymbol$5,isArray$b=isArray_1$1,isSymbol$4=isSymbol_1,reIsDeepProp=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey$3(A,e){if(isArray$b(A))return!1;var t=typeof A;return!(\"number\"!=t&&\"symbol\"!=t&&\"boolean\"!=t&&null!=A&&!isSymbol$4(A))||(reIsPlainProp.test(A)||!reIsDeepProp.test(A)||null!=e&&A in Object(e))}var _isKey=isKey$3,MapCache=_MapCache,FUNC_ERROR_TEXT$1=\"Expected a function\";function memoize$1(A,e){if(\"function\"!=typeof A||null!=e&&\"function\"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);var t=function(){var o=arguments,g=e?e.apply(this,o):o[0],i=t.cache;if(i.has(g))return i.get(g);var r=A.apply(this,o);return t.cache=i.set(g,r)||i,r};return t.cache=new(memoize$1.Cache||MapCache),t}memoize$1.Cache=MapCache;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(A){var e=memoize(A,(function(A){return t.size===MAX_MEMOIZE_SIZE&&t.clear(),A})),t=e.cache;return e}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,reEscapeChar=/\\\\(\\\\)?/g,stringToPath$1=memoizeCapped((function(A){var e=[];return 46===A.charCodeAt(0)&&e.push(\"\"),A.replace(rePropName,(function(A,t,o,g){e.push(o?g.replace(reEscapeChar,\"$1\"):t||A)})),e})),_stringToPath=stringToPath$1,Symbol$3=_Symbol,arrayMap$3=_arrayMap,isArray$a=isArray_1$1,isSymbol$3=isSymbol_1,INFINITY$3=1/0,symbolProto$1=Symbol$3?Symbol$3.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(A){if(\"string\"==typeof A)return A;if(isArray$a(A))return arrayMap$3(A,baseToString$1)+\"\";if(isSymbol$3(A))return symbolToString?symbolToString.call(A):\"\";var e=A+\"\";return\"0\"==e&&1/A==-INFINITY$3?\"-0\":e}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$2(A){return null==A?\"\":baseToString(A)}var toString_1=toString$2,isArray$9=isArray_1$1,isKey$2=_isKey,stringToPath=_stringToPath,toString$1=toString_1;function castPath$6(A,e){return isArray$9(A)?A:isKey$2(A,e)?[A]:stringToPath(toString$1(A))}var _castPath=castPath$6,isSymbol$2=isSymbol_1,INFINITY$2=1/0;function toKey$6(A){if(\"string\"==typeof A||isSymbol$2(A))return A;var e=A+\"\";return\"0\"==e&&1/A==-INFINITY$2?\"-0\":e}var _toKey=toKey$6,castPath$5=_castPath,toKey$5=_toKey;function baseGet$5(A,e){for(var t=0,o=(e=castPath$5(e,A)).length;null!=A&&t<o;)A=A[toKey$5(e[t++])];return t&&t==o?A:void 0}var _baseGet=baseGet$5,baseGet$4=_baseGet;function get$1(A,e,t){var o=null==A?void 0:baseGet$4(A,e);return void 0===o?t:o}var get_1=get$1;function baseHasIn$1(A,e){return null!=A&&e in Object(A)}var _baseHasIn=baseHasIn$1,castPath$4=_castPath,isArguments$2=isArguments_1,isArray$8=isArray_1$1,isIndex$2=_isIndex,isLength=isLength_1,toKey$4=_toKey;function hasPath$1(A,e,t){for(var o=-1,g=(e=castPath$4(e,A)).length,i=!1;++o<g;){var r=toKey$4(e[o]);if(!(i=null!=A&&t(A,r)))break;A=A[r]}return i||++o!=g?i:!!(g=null==A?0:A.length)&&isLength(g)&&isIndex$2(r,g)&&(isArray$8(A)||isArguments$2(A))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(A,e){return null!=A&&hasPath(A,e,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$3=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(A,e){return isKey$1(A)&&isStrictComparable(e)?matchesStrictComparable(toKey$3(A),e):function(t){var o=get(t,A);return void 0===o&&o===e?hasIn(t,A):baseIsEqual(e,o,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$4(A){return A}var identity_1=identity$4;function baseProperty$1(A){return function(e){return null==e?void 0:e[A]}}var _baseProperty=baseProperty$1,baseGet$3=_baseGet;function basePropertyDeep$1(A){return function(e){return baseGet$3(e,A)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey$2=_toKey;function property$1(A){return isKey(A)?baseProperty(toKey$2(A)):basePropertyDeep(A)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$3=identity_1,isArray$7=isArray_1$1,property=property_1;function baseIteratee$8(A){return\"function\"==typeof A?A:null==A?identity$3:\"object\"==typeof A?isArray$7(A)?baseMatchesProperty(A[0],A[1]):baseMatches(A):property(A)}var _baseIteratee=baseIteratee$8;function createBaseFor$1(A){return function(e,t,o){for(var g=-1,i=Object(e),r=o(e),n=r.length;n--;){var I=r[A?n:++g];if(!1===t(i[I],I,i))break}return e}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$2=createBaseFor(),_baseFor=baseFor$2,baseFor$1=_baseFor,keys$3=keys_1;function baseForOwn$2(A,e){return A&&baseFor$1(A,e,keys$3)}var _baseForOwn=baseForOwn$2,isArrayLike$6=isArrayLike_1;function createBaseEach$1(A,e){return function(t,o){if(null==t)return t;if(!isArrayLike$6(t))return A(t,o);for(var g=t.length,i=e?g:-1,r=Object(t);(e?i--:++i<g)&&!1!==o(r[i],i,r););return t}}var _createBaseEach=createBaseEach$1,baseForOwn$1=_baseForOwn,createBaseEach=_createBaseEach,baseEach$2=createBaseEach(baseForOwn$1),_baseEach=baseEach$2,baseEach$1=_baseEach;function baseSome$1(A,e){var t;return baseEach$1(A,(function(A,o,g){return!(t=e(A,o,g))})),!!t}var _baseSome=baseSome$1,eq$2=eq_1,isArrayLike$5=isArrayLike_1,isIndex$1=_isIndex,isObject$9=isObject_1$1;function isIterateeCall$3(A,e,t){if(!isObject$9(t))return!1;var o=typeof e;return!!(\"number\"==o?isArrayLike$5(t)&&isIndex$1(e,t.length):\"string\"==o&&e in t)&&eq$2(t[e],A)}var _isIterateeCall=isIterateeCall$3,arraySome=_arraySome,baseIteratee$7=_baseIteratee,baseSome=_baseSome,isArray$6=isArray_1$1,isIterateeCall$2=_isIterateeCall;function some(A,e,t){var o=isArray$6(A)?arraySome:baseSome;return t&&isIterateeCall$2(A,e,t)&&(e=void 0),o(A,baseIteratee$7(e))}var some_1=some,some$1=getDefaultExportFromCjs(some_1),Symbol$2=_Symbol,isArguments$1=isArguments_1,isArray$5=isArray_1$1,spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable$1(A){return isArray$5(A)||isArguments$1(A)||!!(spreadableSymbol&&A&&A[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$1=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(A,e,t,o,g){var i=-1,r=A.length;for(t||(t=isFlattenable),g||(g=[]);++i<r;){var n=A[i];e>0&&t(n)?e>1?baseFlatten$2(n,e-1,t,o,g):arrayPush$1(g,n):o||(g[g.length]=n)}return g}var _baseFlatten=baseFlatten$2,baseEach=_baseEach,isArrayLike$4=isArrayLike_1;function baseMap$1(A,e){var t=-1,o=isArrayLike$4(A)?Array(A.length):[];return baseEach(A,(function(A,g,i){o[++t]=e(A,g,i)})),o}var _baseMap=baseMap$1;function baseSortBy$1(A,e){var t=A.length;for(A.sort(e);t--;)A[t]=A[t].value;return A}var _baseSortBy=baseSortBy$1,isSymbol$1=isSymbol_1;function compareAscending$1(A,e){if(A!==e){var t=void 0!==A,o=null===A,g=A==A,i=isSymbol$1(A),r=void 0!==e,n=null===e,I=e==e,s=isSymbol$1(e);if(!n&&!s&&!i&&A>e||i&&r&&I&&!n&&!s||o&&r&&I||!t&&I||!g)return 1;if(!o&&!i&&!s&&A<e||s&&t&&g&&!o&&!i||n&&t&&g||!r&&g||!I)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(A,e,t){for(var o=-1,g=A.criteria,i=e.criteria,r=g.length,n=t.length;++o<r;){var I=compareAscending(g[o],i[o]);if(I)return o>=n?I:I*(\"desc\"==t[o]?-1:1)}return A.index-e.index}var _compareMultiple=compareMultiple$1,arrayMap$2=_arrayMap,baseGet$2=_baseGet,baseIteratee$6=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary$2=_baseUnary,compareMultiple=_compareMultiple,identity$2=identity_1,isArray$4=isArray_1$1;function baseOrderBy$1(A,e,t){e=e.length?arrayMap$2(e,(function(A){return isArray$4(A)?function(e){return baseGet$2(e,1===A.length?A[0]:A)}:A})):[identity$2];var o=-1;e=arrayMap$2(e,baseUnary$2(baseIteratee$6));var g=baseMap(A,(function(A,t,g){return{criteria:arrayMap$2(e,(function(e){return e(A)})),index:++o,value:A}}));return baseSortBy(g,(function(A,e){return compareMultiple(A,e,t)}))}var _baseOrderBy=baseOrderBy$1;function apply$1(A,e,t){switch(t.length){case 0:return A.call(e);case 1:return A.call(e,t[0]);case 2:return A.call(e,t[0],t[1]);case 3:return A.call(e,t[0],t[1],t[2])}return A.apply(e,t)}var _apply=apply$1,apply=_apply,nativeMax$3=Math.max;function overRest$2(A,e,t){return e=nativeMax$3(void 0===e?A.length-1:e,0),function(){for(var o=arguments,g=-1,i=nativeMax$3(o.length-e,0),r=Array(i);++g<i;)r[g]=o[e+g];g=-1;for(var n=Array(e+1);++g<e;)n[g]=o[g];return n[e]=t(r),apply(A,this,n)}}var _overRest=overRest$2;function constant$1(A){return function(){return A}}var constant_1=constant$1,getNative=_getNative,defineProperty$2=function(){try{var A=getNative(Object,\"defineProperty\");return A({},\"\",{}),A}catch(A){}}(),_defineProperty=defineProperty$2,constant=constant_1,defineProperty$1=_defineProperty,identity$1=identity_1,baseSetToString$1=defineProperty$1?function(A,e){return defineProperty$1(A,\"toString\",{configurable:!0,enumerable:!1,value:constant(e),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(A){var e=0,t=0;return function(){var o=nativeNow(),g=HOT_SPAN-(o-t);if(t=o,g>0){if(++e>=HOT_COUNT)return arguments[0]}else e=0;return A.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$2=shortOut(baseSetToString),_setToString=setToString$2,identity=identity_1,overRest$1=_overRest,setToString$1=_setToString;function baseRest$2(A,e){return setToString$1(overRest$1(A,e,identity),A+\"\")}var _baseRest=baseRest$2,baseFlatten$1=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest$1=_baseRest,isIterateeCall$1=_isIterateeCall,sortBy=baseRest$1((function(A,e){if(null==A)return[];var t=e.length;return t>1&&isIterateeCall$1(A,e[0],e[1])?e=[]:t>2&&isIterateeCall$1(e[0],e[1],e[2])&&(e=[e[0]]),baseOrderBy(A,baseFlatten$1(e,1),[])})),sortBy_1=sortBy,sortBy$1=getDefaultExportFromCjs(sortBy_1),baseRandom=_baseRandom;function arraySample$2(A){var e=A.length;return e?A[baseRandom(0,e-1)]:void 0}var _arraySample=arraySample$2,arraySample$1=_arraySample,values=values_1;function baseSample$1(A){return arraySample$1(values(A))}var _baseSample=baseSample$1,arraySample=_arraySample,baseSample=_baseSample,isArray$3=isArray_1$1;function sample(A){return(isArray$3(A)?arraySample:baseSample)(A)}var sample_1=sample,sample$1=getDefaultExportFromCjs(sample_1),nativeMax$2=Math.max,nativeMin$1=Math.min;function baseInRange$1(A,e,t){return A>=nativeMin$1(e,t)&&A<nativeMax$2(e,t)}var _baseInRange=baseInRange$1,reWhitespace=/\\s/;function trimmedEndIndex$1(A){for(var e=A.length;e--&&reWhitespace.test(A.charAt(e)););return e}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart$1=/^\\s+/;function baseTrim$1(A){return A?A.slice(0,trimmedEndIndex(A)+1).replace(reTrimStart$1,\"\"):A}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$8=isObject_1$1,isSymbol=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$2(A){if(\"number\"==typeof A)return A;if(isSymbol(A))return NAN;if(isObject$8(A)){var e=\"function\"==typeof A.valueOf?A.valueOf():A;A=isObject$8(e)?e+\"\":e}if(\"string\"!=typeof A)return 0===A?A:+A;A=baseTrim(A);var t=reIsBinary.test(A);return t||reIsOctal.test(A)?freeParseInt(A.slice(2),t?2:8):reIsBadHex.test(A)?NAN:+A}var toNumber_1=toNumber$2,toNumber$1=toNumber_1,INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$2(A){return A?(A=toNumber$1(A))===INFINITY$1||A===-INFINITY$1?(A<0?-1:1)*MAX_INTEGER:A==A?A:0:0===A?A:0}var toFinite_1=toFinite$2,baseInRange=_baseInRange,toFinite$1=toFinite_1,toNumber=toNumber_1;function inRange(A,e,t){return e=toFinite$1(e),void 0===t?(t=e,e=0):t=toFinite$1(t),A=toNumber(A),baseInRange(A,e,t)}var inRange_1=inRange,inRange$1=getDefaultExportFromCjs(inRange_1);function compact(A){for(var e=-1,t=null==A?0:A.length,o=0,g=[];++e<t;){var i=A[e];i&&(g[o++]=i)}return g}var compact_1=compact,compact$1=getDefaultExportFromCjs(compact_1);function arrayEach$1(A,e){for(var t=-1,o=null==A?0:A.length;++t<o&&!1!==e(A[t],t,A););return A}var _arrayEach=arrayEach$1,defineProperty=_defineProperty;function baseAssignValue$4(A,e,t){\"__proto__\"==e&&defineProperty?defineProperty(A,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):A[e]=t}var _baseAssignValue=baseAssignValue$4,baseAssignValue$3=_baseAssignValue,eq$1=eq_1,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function assignValue$3(A,e,t){var o=A[e];hasOwnProperty$3.call(A,e)&&eq$1(o,t)&&(void 0!==t||e in A)||baseAssignValue$3(A,e,t)}var _assignValue=assignValue$3,assignValue$2=_assignValue,baseAssignValue$2=_baseAssignValue;function copyObject$6(A,e,t,o){var g=!t;t||(t={});for(var i=-1,r=e.length;++i<r;){var n=e[i],I=o?o(t[n],A[n],n,t,A):void 0;void 0===I&&(I=A[n]),g?baseAssignValue$2(t,n,I):assignValue$2(t,n,I)}return t}var _copyObject=copyObject$6,copyObject$5=_copyObject,keys$2=keys_1;function baseAssign$1(A,e){return A&&copyObject$5(e,keys$2(e),A)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(A){var e=[];if(null!=A)for(var t in Object(A))e.push(t);return e}var _nativeKeysIn=nativeKeysIn$1,isObject$7=isObject_1$1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeysIn$1(A){if(!isObject$7(A))return nativeKeysIn(A);var e=isPrototype$1(A),t=[];for(var o in A)(\"constructor\"!=o||!e&&hasOwnProperty$2.call(A,o))&&t.push(o);return t}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$3=isArrayLike_1;function keysIn$5(A){return isArrayLike$3(A)?arrayLikeKeys(A,!0):baseKeysIn(A)}var keysIn_1=keysIn$5,copyObject$4=_copyObject,keysIn$4=keysIn_1;function baseAssignIn$1(A,e){return A&&copyObject$4(e,keysIn$4(e),A)}var _baseAssignIn=baseAssignIn$1,_cloneBuffer={exports:{}};_cloneBuffer.exports,function(A,e){var t=_root,o=e&&!e.nodeType&&e,g=o&&A&&!A.nodeType&&A,i=g&&g.exports===o?t.Buffer:void 0,r=i?i.allocUnsafe:void 0;A.exports=function(A,e){if(e)return A.slice();var t=A.length,o=r?r(t):new A.constructor(t);return A.copy(o),o}}(_cloneBuffer,_cloneBuffer.exports);var _cloneBufferExports=_cloneBuffer.exports,copyObject$3=_copyObject,getSymbols$1=_getSymbols;function copySymbols$1(A,e){return copyObject$3(A,getSymbols$1(A),e)}var _copySymbols=copySymbols$1,overArg=_overArg,getPrototype$3=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$3,arrayPush=_arrayPush,getPrototype$2=_getPrototype,getSymbols=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(A){for(var e=[];A;)arrayPush(e,getSymbols(A)),A=getPrototype$2(A);return e}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject$2=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(A,e){return copyObject$2(A,getSymbolsIn$1(A),e)}var _copySymbolsIn=copySymbolsIn$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$3=keysIn_1;function getAllKeysIn$3(A){return baseGetAllKeys(A,keysIn$3,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$3,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function initCloneArray$1(A){var e=A.length,t=new A.constructor(e);return e&&\"string\"==typeof A[0]&&hasOwnProperty$1.call(A,\"index\")&&(t.index=A.index,t.input=A.input),t}var _initCloneArray=initCloneArray$1,Uint8Array$1=_Uint8Array;function cloneArrayBuffer$3(A){var e=new A.constructor(A.byteLength);return new Uint8Array$1(e).set(new Uint8Array$1(A)),e}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(A,e){var t=e?cloneArrayBuffer$2(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\\w*$/;function cloneRegExp$1(A){var e=new A.constructor(A.source,reFlags.exec(A));return e.lastIndex=A.lastIndex,e}var _cloneRegExp=cloneRegExp$1,Symbol$1=_Symbol,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol$1(A){return symbolValueOf?Object(symbolValueOf.call(A)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$2(A,e){var t=e?cloneArrayBuffer$1(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.length)}var _cloneTypedArray=cloneTypedArray$2,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray$1=_cloneTypedArray,boolTag$1=\"[object Boolean]\",dateTag$1=\"[object Date]\",mapTag$2=\"[object Map]\",numberTag$1=\"[object Number]\",regexpTag$1=\"[object RegExp]\",setTag$2=\"[object Set]\",stringTag$1=\"[object String]\",symbolTag$1=\"[object Symbol]\",arrayBufferTag$1=\"[object ArrayBuffer]\",dataViewTag$1=\"[object DataView]\",float32Tag$1=\"[object Float32Array]\",float64Tag$1=\"[object Float64Array]\",int8Tag$1=\"[object Int8Array]\",int16Tag$1=\"[object Int16Array]\",int32Tag$1=\"[object Int32Array]\",uint8Tag$1=\"[object Uint8Array]\",uint8ClampedTag$1=\"[object Uint8ClampedArray]\",uint16Tag$1=\"[object Uint16Array]\",uint32Tag$1=\"[object Uint32Array]\";function initCloneByTag$1(A,e,t){var o=A.constructor;switch(e){case arrayBufferTag$1:return cloneArrayBuffer(A);case boolTag$1:case dateTag$1:return new o(+A);case dataViewTag$1:return cloneDataView(A,t);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray$1(A,t);case mapTag$2:return new o;case numberTag$1:case stringTag$1:return new o(A);case regexpTag$1:return cloneRegExp(A);case setTag$2:return new o;case symbolTag$1:return cloneSymbol(A)}}var _initCloneByTag=initCloneByTag$1,isObject$6=isObject_1$1,objectCreate=Object.create,baseCreate$1=function(){function A(){}return function(e){if(!isObject$6(e))return{};if(objectCreate)return objectCreate(e);A.prototype=e;var t=new A;return A.prototype=void 0,t}}(),_baseCreate=baseCreate$1,baseCreate=_baseCreate,getPrototype$1=_getPrototype,isPrototype=_isPrototype;function initCloneObject$2(A){return\"function\"!=typeof A.constructor||isPrototype(A)?{}:baseCreate(getPrototype$1(A))}var _initCloneObject=initCloneObject$2,getTag$2=_getTag,isObjectLike$3=isObjectLike_1,mapTag$1=\"[object Map]\";function baseIsMap$1(A){return isObjectLike$3(A)&&getTag$2(A)==mapTag$1}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtilExports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$1=_getTag,isObjectLike$2=isObjectLike_1,setTag$1=\"[object Set]\";function baseIsSet$1(A){return isObjectLike$2(A)&&getTag$1(A)==setTag$1}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack$1=_Stack,arrayEach=_arrayEach,assignValue$1=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer$1=_cloneBufferExports,copyArray$1=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn$2=_getAllKeysIn,getTag=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject$1=_initCloneObject,isArray$2=isArray_1$1,isBuffer$1=isBufferExports,isMap=isMap_1,isObject$5=isObject_1$1,isSet=isSet_1,keys$1=keys_1,keysIn$2=keysIn_1,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag=\"[object Arguments]\",arrayTag=\"[object Array]\",boolTag=\"[object Boolean]\",dateTag=\"[object Date]\",errorTag=\"[object Error]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",mapTag=\"[object Map]\",numberTag=\"[object Number]\",objectTag$1=\"[object Object]\",regexpTag=\"[object RegExp]\",setTag=\"[object Set]\",stringTag=\"[object String]\",symbolTag=\"[object Symbol]\",weakMapTag=\"[object WeakMap]\",arrayBufferTag=\"[object ArrayBuffer]\",dataViewTag=\"[object DataView]\",float32Tag=\"[object Float32Array]\",float64Tag=\"[object Float64Array]\",int8Tag=\"[object Int8Array]\",int16Tag=\"[object Int16Array]\",int32Tag=\"[object Int32Array]\",uint8Tag=\"[object Uint8Array]\",uint8ClampedTag=\"[object Uint8ClampedArray]\",uint16Tag=\"[object Uint16Array]\",uint32Tag=\"[object Uint32Array]\",cloneableTags={};function baseClone$2(A,e,t,o,g,i){var r,n=e&CLONE_DEEP_FLAG$2,I=e&CLONE_FLAT_FLAG$1,s=e&CLONE_SYMBOLS_FLAG$2;if(t&&(r=g?t(A,o,g,i):t(A)),void 0!==r)return r;if(!isObject$5(A))return A;var C=isArray$2(A);if(C){if(r=initCloneArray(A),!n)return copyArray$1(A,r)}else{var E=getTag(A),a=E==funcTag||E==genTag;if(isBuffer$1(A))return cloneBuffer$1(A,n);if(E==objectTag$1||E==argsTag||a&&!g){if(r=I||a?{}:initCloneObject$1(A),!n)return I?copySymbolsIn(A,baseAssignIn(r,A)):copySymbols(A,baseAssign(r,A))}else{if(!cloneableTags[E])return g?A:{};r=initCloneByTag(A,E,n)}}i||(i=new Stack$1);var B=i.get(A);if(B)return B;i.set(A,r),isSet(A)?A.forEach((function(o){r.add(baseClone$2(o,e,t,o,A,i))})):isMap(A)&&A.forEach((function(o,g){r.set(g,baseClone$2(o,e,t,g,A,i))}));var Q=C?void 0:(s?I?getAllKeysIn$2:getAllKeys:I?keysIn$2:keys$1)(A);return arrayEach(Q||A,(function(o,g){Q&&(o=A[g=o]),assignValue$1(r,g,baseClone$2(o,e,t,g,A,i))})),r}cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag$1]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var _baseClone=baseClone$2,baseClone$1=_baseClone,CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(A){return baseClone$1(A,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var cloneDeep_1=cloneDeep,cloneDeep$1=getDefaultExportFromCjs(cloneDeep_1),baseAssignValue$1=_baseAssignValue,baseForOwn=_baseForOwn,baseIteratee$5=_baseIteratee;function mapValues(A,e){var t={};return e=baseIteratee$5(e),baseForOwn(A,(function(A,o,g){baseAssignValue$1(t,o,e(A,o,g))})),t}var mapValues_1=mapValues,mapValues$1=getDefaultExportFromCjs(mapValues_1),baseAssignValue=_baseAssignValue,eq=eq_1;function assignMergeValue$2(A,e,t){(void 0!==t&&!eq(A[e],t)||void 0===t&&!(e in A))&&baseAssignValue(A,e,t)}var _assignMergeValue=assignMergeValue$2,isArrayLike$2=isArrayLike_1,isObjectLike$1=isObjectLike_1;function isArrayLikeObject$1(A){return isObjectLike$1(A)&&isArrayLike$2(A)}var isArrayLikeObject_1=isArrayLikeObject$1,baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike=isObjectLike_1,objectTag=\"[object Object]\",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(A){if(!isObjectLike(A)||baseGetTag(A)!=objectTag)return!1;var e=getPrototype(A);if(null===e)return!0;var t=hasOwnProperty.call(e,\"constructor\")&&e.constructor;return\"function\"==typeof t&&t instanceof t&&funcToString.call(t)==objectCtorString}var isPlainObject_1=isPlainObject$2;function safeGet$2(A,e){if((\"constructor\"!==e||\"function\"!=typeof A[e])&&\"__proto__\"!=e)return A[e]}var _safeGet=safeGet$2,copyObject$1=_copyObject,keysIn$1=keysIn_1;function toPlainObject$1(A){return copyObject$1(A,keysIn$1(A))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer=_cloneBufferExports,cloneTypedArray=_cloneTypedArray,copyArray=_copyArray,initCloneObject=_initCloneObject,isArguments=isArguments_1,isArray$1=isArray_1$1,isArrayLikeObject=isArrayLikeObject_1,isBuffer=isBufferExports,isFunction$2=isFunction_1$1,isObject$4=isObject_1$1,isPlainObject$1=isPlainObject_1,isTypedArray=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(A,e,t,o,g,i,r){var n=safeGet$1(A,t),I=safeGet$1(e,t),s=r.get(I);if(s)assignMergeValue$1(A,t,s);else{var C=i?i(n,I,t+\"\",A,e,r):void 0,E=void 0===C;if(E){var a=isArray$1(I),B=!a&&isBuffer(I),Q=!a&&!B&&isTypedArray(I);C=I,a||B||Q?isArray$1(n)?C=n:isArrayLikeObject(n)?C=copyArray(n):B?(E=!1,C=cloneBuffer(I,!0)):Q?(E=!1,C=cloneTypedArray(I,!0)):C=[]:isPlainObject$1(I)||isArguments(I)?(C=n,isArguments(n)?C=toPlainObject(n):isObject$4(n)&&!isFunction$2(n)||(C=initCloneObject(I))):E=!1}E&&(r.set(I,C),g(C,I,o,i,r),r.delete(I)),assignMergeValue$1(A,t,C)}}var _baseMergeDeep=baseMergeDeep$1,Stack=_Stack,assignMergeValue=_assignMergeValue,baseFor=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$3=isObject_1$1,keysIn=keysIn_1,safeGet=_safeGet;function baseMerge$1(A,e,t,o,g){A!==e&&baseFor(e,(function(i,r){if(g||(g=new Stack),isObject$3(i))baseMergeDeep(A,e,r,t,baseMerge$1,o,g);else{var n=o?o(safeGet(A,r),i,r+\"\",A,e,g):void 0;void 0===n&&(n=i),assignMergeValue(A,r,n)}}),keysIn)}var _baseMerge=baseMerge$1,baseRest=_baseRest,isIterateeCall=_isIterateeCall;function createAssigner$1(A){return baseRest((function(e,t){var o=-1,g=t.length,i=g>1?t[g-1]:void 0,r=g>2?t[2]:void 0;for(i=A.length>3&&\"function\"==typeof i?(g--,i):void 0,r&&isIterateeCall(t[0],t[1],r)&&(i=g<3?void 0:i,g=1),e=Object(e);++o<g;){var n=t[o];n&&A(e,n,o,i)}return e}))}var _createAssigner=createAssigner$1,baseMerge=_baseMerge,createAssigner=_createAssigner,mergeWith=createAssigner((function(A,e,t,o){baseMerge(A,e,t,o)})),mergeWith_1=mergeWith,mergeWith$1=getDefaultExportFromCjs(mergeWith_1);function last$1(A){var e=null==A?0:A.length;return e?A[e-1]:void 0}var last_1=last$1;function baseSlice$1(A,e,t){var o=-1,g=A.length;e<0&&(e=-e>g?0:g+e),(t=t>g?g:t)<0&&(t+=g),g=e>t?0:t-e>>>0,e>>>=0;for(var i=Array(g);++o<g;)i[o]=A[o+e];return i}var _baseSlice=baseSlice$1,baseGet$1=_baseGet,baseSlice=_baseSlice;function parent$1(A,e){return e.length<2?A:baseGet$1(A,baseSlice(e,0,-1))}var _parent=parent$1,castPath$3=_castPath,last=last_1,parent=_parent,toKey$1=_toKey;function baseUnset$1(A,e){return e=castPath$3(e,A),null==(A=parent(A,e))||delete A[toKey$1(last(e))]}var _baseUnset=baseUnset$1,isPlainObject=isPlainObject_1;function customOmitClone$1(A){return isPlainObject(A)?void 0:A}var _customOmitClone=customOmitClone$1,baseFlatten=_baseFlatten;function flatten$1(A){return(null==A?0:A.length)?baseFlatten(A,1):[]}var flatten_1=flatten$1,flatten=flatten_1,overRest=_overRest,setToString=_setToString;function flatRest$1(A){return setToString(overRest(A,void 0,flatten),A+\"\")}var _flatRest=flatRest$1,arrayMap$1=_arrayMap,baseClone=_baseClone,baseUnset=_baseUnset,castPath$2=_castPath,copyObject=_copyObject,customOmitClone=_customOmitClone,flatRest=_flatRest,getAllKeysIn$1=_getAllKeysIn,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest((function(A,e){var t={};if(null==A)return t;var o=!1;e=arrayMap$1(e,(function(e){return e=castPath$2(e,A),o||(o=e.length>1),e})),copyObject(A,getAllKeysIn$1(A),t),o&&(t=baseClone(t,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var g=e.length;g--;)baseUnset(t,e[g]);return t})),omit_1=omit,omit$1=getDefaultExportFromCjs(omit_1),root=_root,toString=toString_1,reTrimStart=/^\\s+/,nativeParseInt=root.parseInt;function parseInt$1(A,e,t){return t||null==e?e=0:e&&(e=+e),nativeParseInt(toString(A).replace(reTrimStart,\"\"),e||0)}var _parseInt=parseInt$1,parseInt$2=getDefaultExportFromCjs(_parseInt);function isUndefined(A){return void 0===A}var isUndefined_1=isUndefined,isUndefined$1=getDefaultExportFromCjs(isUndefined_1),FUNC_ERROR_TEXT=\"Expected a function\";function negate$1(A){if(\"function\"!=typeof A)throw new TypeError(FUNC_ERROR_TEXT);return function(){var e=arguments;switch(e.length){case 0:return!A.call(this);case 1:return!A.call(this,e[0]);case 2:return!A.call(this,e[0],e[1]);case 3:return!A.call(this,e[0],e[1],e[2])}return!A.apply(this,e)}}var negate_1=negate$1,assignValue=_assignValue,castPath$1=_castPath,isIndex=_isIndex,isObject$2=isObject_1$1,toKey=_toKey;function baseSet$1(A,e,t,o){if(!isObject$2(A))return A;for(var g=-1,i=(e=castPath$1(e,A)).length,r=i-1,n=A;null!=n&&++g<i;){var I=toKey(e[g]),s=t;if(\"__proto__\"===I||\"constructor\"===I||\"prototype\"===I)return A;if(g!=r){var C=n[I];void 0===(s=o?o(C,I,n):void 0)&&(s=isObject$2(C)?C:isIndex(e[g+1])?[]:{})}assignValue(n,I,s),n=n[I]}return A}var _baseSet=baseSet$1,baseGet=_baseGet,baseSet=_baseSet,castPath=_castPath;function basePickBy$1(A,e,t){for(var o=-1,g=e.length,i={};++o<g;){var r=e[o],n=baseGet(A,r);t(n,r)&&baseSet(i,castPath(r,A),n)}return i}var _basePickBy=basePickBy$1,arrayMap=_arrayMap,baseIteratee$4=_baseIteratee,basePickBy=_basePickBy,getAllKeysIn=_getAllKeysIn;function pickBy$1(A,e){if(null==A)return{};var t=arrayMap(getAllKeysIn(A),(function(A){return[A]}));return e=baseIteratee$4(e),basePickBy(A,t,(function(A,t){return e(A,t[0])}))}var pickBy_1=pickBy$1,baseIteratee$3=_baseIteratee,negate=negate_1,pickBy=pickBy_1;function omitBy(A,e){return pickBy(A,negate(baseIteratee$3(e)))}var omitBy_1=omitBy,omitBy$1=getDefaultExportFromCjs(omitBy_1);function isNull(A){return null===A}var isNull_1=isNull,isNull$1=getDefaultExportFromCjs(isNull_1),baseIteratee$2=_baseIteratee,isArrayLike$1=isArrayLike_1,keys=keys_1;function createFind$1(A){return function(e,t,o){var g=Object(e);if(!isArrayLike$1(e)){var i=baseIteratee$2(t);e=keys(e),t=function(A){return i(g[A],A,g)}}var r=A(e,t,o);return r>-1?g[i?e[r]:r]:void 0}}var _createFind=createFind$1;function baseFindIndex$3(A,e,t,o){for(var g=A.length,i=t+(o?1:-1);o?i--:++i<g;)if(e(A[i],i,A))return i;return-1}var _baseFindIndex=baseFindIndex$3,toFinite=toFinite_1;function toInteger$2(A){var e=toFinite(A),t=e%1;return e==e?t?e-t:e:0}var toInteger_1=toInteger$2,baseFindIndex$2=_baseFindIndex,baseIteratee$1=_baseIteratee,toInteger$1=toInteger_1,nativeMax$1=Math.max;function findIndex$1(A,e,t){var o=null==A?0:A.length;if(!o)return-1;var g=null==t?0:toInteger$1(t);return g<0&&(g=nativeMax$1(o+g,0)),baseFindIndex$2(A,baseIteratee$1(e),g)}var findIndex_1=findIndex$1,createFind=_createFind,findIndex=findIndex_1,find=createFind(findIndex),find_1=find,find$1=getDefaultExportFromCjs(find_1);function baseIsNaN$1(A){return A!=A}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(A,e,t){for(var o=t-1,g=A.length;++o<g;)if(A[o]===e)return o;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex$1=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(A,e,t){return e==e?strictIndexOf(A,e,t):baseFindIndex$1(A,baseIsNaN,t)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(A,e){return!!(null==A?0:A.length)&&baseIndexOf(A,e,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(A,e,t){for(var o=-1,g=null==A?0:A.length;++o<g;)if(t(e,A[o]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$2(){}var noop_1=noop$2,Set$1=_Set,noop$1=noop_1,setToArray$1=_setToArray,INFINITY=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY?function(A){return new Set$1(A)}:noop$1,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(A,e,t){var o=-1,g=arrayIncludes,i=A.length,r=!0,n=[],I=n;if(t)r=!1,g=arrayIncludesWith;else if(i>=LARGE_ARRAY_SIZE){var s=e?null:createSet(A);if(s)return setToArray(s);r=!1,g=cacheHas,I=new SetCache}else I=e?[]:n;A:for(;++o<i;){var C=A[o],E=e?e(C):C;if(C=t||0!==C?C:0,r&&E==E){for(var a=I.length;a--;)if(I[a]===E)continue A;e&&I.push(E),n.push(C)}else g(I,E,t)||(I!==n&&I.push(E),n.push(C))}return n}var _baseUniq=baseUniq$1,baseUniq=_baseUniq;function uniqWith(A,e){return e=\"function\"==typeof e?e:void 0,A&&A.length?baseUniq(A,void 0,e):[]}var uniqWith_1=uniqWith,uniqWith$1=getDefaultExportFromCjs(uniqWith_1),baseFindIndex=_baseFindIndex,baseIteratee=_baseIteratee,toInteger=toInteger_1,nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(A,e,t){var o=null==A?0:A.length;if(!o)return-1;var g=o-1;return void 0!==t&&(g=toInteger(t),g=t<0?nativeMax(o+g,0):nativeMin(g,o-1)),baseFindIndex(A,baseIteratee(e),g,!0)}var findLastIndex_1=findLastIndex,findLastIndex$1=getDefaultExportFromCjs(findLastIndex_1),long=Long$1,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(A){}function Long$1(A,e,t){this.low=0|A,this.high=0|e,this.unsigned=!!t}function isLong(A){return!0===(A&&A.__isLong__)}Long$1.prototype.__isLong__,Object.defineProperty(Long$1.prototype,\"__isLong__\",{value:!0}),Long$1.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(A,e){var t,o,g;return e?(g=0<=(A>>>=0)&&A<256)&&(o=UINT_CACHE[A])?o:(t=fromBits(A,(0|A)<0?-1:0,!0),g&&(UINT_CACHE[A]=t),t):(g=-128<=(A|=0)&&A<128)&&(o=INT_CACHE[A])?o:(t=fromBits(A,A<0?-1:0,!1),g&&(INT_CACHE[A]=t),t)}function fromNumber(A,e){if(isNaN(A))return e?UZERO:ZERO;if(e){if(A<0)return UZERO;if(A>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(A<=-TWO_PWR_63_DBL)return MIN_VALUE;if(A+1>=TWO_PWR_63_DBL)return MAX_VALUE}return A<0?fromNumber(-A,e).neg():fromBits(A%TWO_PWR_32_DBL|0,A/TWO_PWR_32_DBL|0,e)}function fromBits(A,e,t){return new Long$1(A,e,t)}Long$1.fromInt=fromInt,Long$1.fromNumber=fromNumber,Long$1.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(A,e,t){if(0===A.length)throw Error(\"empty string\");if(\"NaN\"===A||\"Infinity\"===A||\"+Infinity\"===A||\"-Infinity\"===A)return ZERO;if(\"number\"==typeof e?(t=e,e=!1):e=!!e,(t=t||10)<2||36<t)throw RangeError(\"radix\");var o;if((o=A.indexOf(\"-\"))>0)throw Error(\"interior hyphen\");if(0===o)return fromString(A.substring(1),e,t).neg();for(var g=fromNumber(pow_dbl(t,8)),i=ZERO,r=0;r<A.length;r+=8){var n=Math.min(8,A.length-r),I=parseInt(A.substring(r,r+n),t);if(n<8){var s=fromNumber(pow_dbl(t,n));i=i.mul(s).add(fromNumber(I))}else i=(i=i.mul(g)).add(fromNumber(I))}return i.unsigned=e,i}function fromValue(A,e){return\"number\"==typeof A?fromNumber(A,e):\"string\"==typeof A?fromString(A,e):fromBits(A.low,A.high,\"boolean\"==typeof e?e:A.unsigned)}Long$1.fromString=fromString,Long$1.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long$1.ZERO=ZERO;var UZERO=fromInt(0,!0);Long$1.UZERO=UZERO;var ONE=fromInt(1);Long$1.ONE=ONE;var UONE=fromInt(1,!0);Long$1.UONE=UONE;var NEG_ONE=fromInt(-1);Long$1.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long$1.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long$1.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long$1.MIN_VALUE=MIN_VALUE;var LongPrototype=Long$1.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(A){if((A=A||10)<2||36<A)throw RangeError(\"radix\");if(this.isZero())return\"0\";if(this.isNegative()){if(this.eq(MIN_VALUE)){var e=fromNumber(A),t=this.div(e),o=t.mul(e).sub(this);return t.toString(A)+o.toInt().toString(A)}return\"-\"+this.neg().toString(A)}for(var g=fromNumber(pow_dbl(A,6),this.unsigned),i=this,r=\"\";;){var n=i.div(g),I=(i.sub(n.mul(g)).toInt()>>>0).toString(A);if((i=n).isZero())return I+r;for(;I.length<6;)I=\"0\"+I;r=\"\"+I+r}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var A=0!=this.high?this.high:this.low,e=31;e>0&&!(A&1<<e);e--);return 0!=this.high?e+33:e+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return!(1&~this.low)},LongPrototype.isEven=function(){return!(1&this.low)},LongPrototype.equals=function(A){return isLong(A)||(A=fromValue(A)),(this.unsigned===A.unsigned||this.high>>>31!=1||A.high>>>31!=1)&&(this.high===A.high&&this.low===A.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(A){return!this.eq(A)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(A){return this.comp(A)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(A){return this.comp(A)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(A){return this.comp(A)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(A){return this.comp(A)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(A){if(isLong(A)||(A=fromValue(A)),this.eq(A))return 0;var e=this.isNegative(),t=A.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?A.high>>>0>this.high>>>0||A.high===this.high&&A.low>>>0>this.low>>>0?-1:1:this.sub(A).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(A){isLong(A)||(A=fromValue(A));var e=this.high>>>16,t=65535&this.high,o=this.low>>>16,g=65535&this.low,i=A.high>>>16,r=65535&A.high,n=A.low>>>16,I=0,s=0,C=0,E=0;return C+=(E+=g+(65535&A.low))>>>16,s+=(C+=o+n)>>>16,I+=(s+=t+r)>>>16,I+=e+i,fromBits((C&=65535)<<16|(E&=65535),(I&=65535)<<16|(s&=65535),this.unsigned)},LongPrototype.subtract=function(A){return isLong(A)||(A=fromValue(A)),this.add(A.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(A){if(this.isZero())return ZERO;if(isLong(A)||(A=fromValue(A)),wasm)return fromBits(wasm.mul(this.low,this.high,A.low,A.high),wasm.get_high(),this.unsigned);if(A.isZero())return ZERO;if(this.eq(MIN_VALUE))return A.isOdd()?MIN_VALUE:ZERO;if(A.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return A.isNegative()?this.neg().mul(A.neg()):this.neg().mul(A).neg();if(A.isNegative())return this.mul(A.neg()).neg();if(this.lt(TWO_PWR_24)&&A.lt(TWO_PWR_24))return fromNumber(this.toNumber()*A.toNumber(),this.unsigned);var e=this.high>>>16,t=65535&this.high,o=this.low>>>16,g=65535&this.low,i=A.high>>>16,r=65535&A.high,n=A.low>>>16,I=65535&A.low,s=0,C=0,E=0,a=0;return E+=(a+=g*I)>>>16,C+=(E+=o*I)>>>16,E&=65535,C+=(E+=g*n)>>>16,s+=(C+=t*I)>>>16,C&=65535,s+=(C+=o*n)>>>16,C&=65535,s+=(C+=g*r)>>>16,s+=e*I+t*n+o*r+g*i,fromBits((E&=65535)<<16|(a&=65535),(s&=65535)<<16|(C&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(A){if(isLong(A)||(A=fromValue(A)),A.isZero())throw Error(\"division by zero\");var e,t,o;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==A.low||-1!==A.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,A.low,A.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(A.unsigned||(A=A.toUnsigned()),A.gt(this))return UZERO;if(A.gt(this.shru(1)))return UONE;o=UZERO}else{if(this.eq(MIN_VALUE))return A.eq(ONE)||A.eq(NEG_ONE)?MIN_VALUE:A.eq(MIN_VALUE)?ONE:(e=this.shr(1).div(A).shl(1)).eq(ZERO)?A.isNegative()?ONE:NEG_ONE:(t=this.sub(A.mul(e)),o=e.add(t.div(A)));if(A.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return A.isNegative()?this.neg().div(A.neg()):this.neg().div(A).neg();if(A.isNegative())return this.div(A.neg()).neg();o=ZERO}for(t=this;t.gte(A);){e=Math.max(1,Math.floor(t.toNumber()/A.toNumber()));for(var g=Math.ceil(Math.log(e)/Math.LN2),i=g<=48?1:pow_dbl(2,g-48),r=fromNumber(e),n=r.mul(A);n.isNegative()||n.gt(t);)n=(r=fromNumber(e-=i,this.unsigned)).mul(A);r.isZero()&&(r=ONE),o=o.add(r),t=t.sub(n)}return o},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(A){return isLong(A)||(A=fromValue(A)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,A.low,A.high),wasm.get_high(),this.unsigned):this.sub(this.div(A).mul(A))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(A){return isLong(A)||(A=fromValue(A)),fromBits(this.low&A.low,this.high&A.high,this.unsigned)},LongPrototype.or=function(A){return isLong(A)||(A=fromValue(A)),fromBits(this.low|A.low,this.high|A.high,this.unsigned)},LongPrototype.xor=function(A){return isLong(A)||(A=fromValue(A)),fromBits(this.low^A.low,this.high^A.high,this.unsigned)},LongPrototype.shiftLeft=function(A){return isLong(A)&&(A=A.toInt()),0==(A&=63)?this:A<32?fromBits(this.low<<A,this.high<<A|this.low>>>32-A,this.unsigned):fromBits(0,this.low<<A-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(A){return isLong(A)&&(A=A.toInt()),0==(A&=63)?this:A<32?fromBits(this.low>>>A|this.high<<32-A,this.high>>A,this.unsigned):fromBits(this.high>>A-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(A){if(isLong(A)&&(A=A.toInt()),0===(A&=63))return this;var e=this.high;return A<32?fromBits(this.low>>>A|e<<32-A,e>>>A,this.unsigned):fromBits(32===A?e:e>>>A-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(A){return A?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var A=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&A,A>>>8&255,A>>>16&255,A>>>24]},LongPrototype.toBytesBE=function(){var A=this.high,e=this.low;return[A>>>24,A>>>16&255,A>>>8&255,255&A,e>>>24,e>>>16&255,e>>>8&255,255&e]},Long$1.fromBytes=function(A,e,t){return t?Long$1.fromBytesLE(A,e):Long$1.fromBytesBE(A,e)},Long$1.fromBytesLE=function(A,e){return new Long$1(A[0]|A[1]<<8|A[2]<<16|A[3]<<24,A[4]|A[5]<<8|A[6]<<16|A[7]<<24,e)},Long$1.fromBytesBE=function(A,e){return new Long$1(A[4]<<24|A[5]<<16|A[6]<<8|A[7],A[0]<<24|A[1]<<16|A[2]<<8|A[3],e)};var Long$2=getDefaultExportFromCjs(long);let RtmMessageCategoryEnum=function(A){return A[A.ChannelSMsg=1]=\"ChannelSMsg\",A[A.ChannelRMsg=2]=\"ChannelRMsg\",A[A.P2pSMsgOfflineFlag=3]=\"P2pSMsgOfflineFlag\",A[A.P2pRMsgOfflineFlag=4]=\"P2pRMsgOfflineFlag\",A[A.P2pSMsgNoOfflineFlag=5]=\"P2pSMsgNoOfflineFlag\",A[A.P2pRMsgNoOfflineFlag=6]=\"P2pRMsgNoOfflineFlag\",A[A.P2pCallInvitation=7]=\"P2pCallInvitation\",A[A.P2pCallCancellation=8]=\"P2pCallCancellation\",A[A.P2pCallAcceptance=9]=\"P2pCallAcceptance\",A[A.P2pCallRefusal=10]=\"P2pCallRefusal\",A}({});const AP_CONCURRENT_REQ_NUM=2,MIN_HEARTBEAT_INTERVAL=5e3,MAX_HEARTBEAT_INTERVAL=18e5,CONFIGURABLE_KEY_RTM_LINK_KEEP_ALIVE_TIMEOUT=1e4,CONFIGURABLE_KEY_RTM_HEARTBEAT_INTERVAL=MIN_HEARTBEAT_INTERVAL,SOCKET_RETRY_INTERVAL=3e3,LINK_INTERVALS=[2,4,8,16,32,32],SUSPENDED_TIME_INTERVAL=30,LOGIN_RESP_TIMEOUT=5e3,LOGIN_QPS_LIMIT=2,MESSAGE_MIN_COMPRESSION_LEN=128,MESSAGE_SEND_TIMEOUT=1e4,COMMON_REQUEST_TIMEOUT=1e4,P2P_MESSAGE_SEND_TIMEOUT=13e3,DIALOGUE_EXPIRE_TIMEOUT=1e4,LRU_MAX_ITEMS=1e4,MESSAGE_RETRY_TIMEOUT=6e3,TEXT_MESSAGE_MAX_TEXT_BYTES=32768,ONLINE_MESSAGE_DEDUP_DELAY=750,OFFLINE_MESSAGE_DEDUP_DELAY=1500,MSG_DEDUP_MAX_LEN=200,K_ACK_MISS=1,K_ACK_PEER_OFFLINE=8,PUBLISH_MESSAGE_SIZE=32768,TOPIC_MESSAGE_SIZE=1024,CUSTOM_TYPE_SIZE=32,K_P2P_MESSAGE_PREFIX=\"*p*\",LOGOUT_SOCKET_CLOSE_TIMEOUT=5e3,LOG_UPLOAD_MAX_ITEMS=1e3,MAX_JOINED_CHANNELS=50,SUB_STREAM_CHANNEL_LIMITATION=10,K_STREAM_CHANNEL_PREFIX=\"*s*\",MAX_SUBSCRIPTION_USER=50,MAX_METADATA_COUNT=32,RTM_METADATA_MAX_LENGTH=16384,RTM_METADATA_KEY_MAX_LENGTH=32,RTM_METADATA_VALUE_MAX_LENGTH=16384,LOCK_DEFAULT_TTL=10,MAX_LOCK_TTL=300,LAST_PONG_RECEIVED_TS_FIELD_NUMBER=4e3,IV_LENGTH=12,TAG_LENGTH=16,KEY_ITERATIONS_COUNT=1e3,ROUNDUP_BIT_SIZE=4,SALT_LENGTH=32,JOIN_TOPIC_LIMITATION=8,SUB_TOPIC_LIMITATION=50,SUB_TOPIC_USER_LIMITATION=64,TOPIC_NAME_SIZE=16,DEFAULT_RPC_TIMEOUT_TIME=5e3,PRESENCE_DATABASE=\"vendor-state\",MAX_STATE_COUNT=32,MAX_STATE_KEY_SIZE=32,MAX_STATE_VALUE_SIZE=16384,K_PRESENCE_MAX_CHANNEL_COUNT=100,K_USER_COLLECTION=\"/Users\",K_PRESENCE_PREFIX=\"/Vendors/\",K_GLOBAL_ONLINE=\"/Presence\",K_CHANNEL_ONLINE=\"/ChannelPresence/\",K_GLOBAL_PRESENCE_COLLECTION=\"_keepalive_\",K_PRESENCE_EXPIRED=\"_expired\",K_SYNC_INTERNAL_KEY_PREFIX=\"_\",K_INTERVAL_THRESHOLD_MAX=128,K_INTERVAL_THRESHOLD_MIN=8,K_DEFAULT_INTERVAL_THRESHOLD=50,K_PRESENCE_INTERVAL_MAX=300,K_PRESENCE_INTERVAL_MIN=10,K_PRESENCE_INTERVAL_DEFAULT=30,K_PRESENCE_TIMEOUT_MAX=300,K_PRESENCE_TIMEOUT_MIN=5,K_PRESENCE_TIMEOUT_DEFAULT=300,K_DEBOUNCE_DEFAULT=2,CREATE_COLL_INTERVALS=[10,20,30],MONITOR_INTERVAL=1e3,APP_ID_LENGTH=32,VERSION_LENGTH=3,API_QPS_SECOND=1e3,JOIN_TIMEOUT=15e3,RECONNECT_STREAM_CHANNEL_TIMEOUT=12e5,GET_MESSAGE_TIME_LIMIT=864e5,GET_MESSAGE_MAX_COUNT=100;var util$7={exports:{}},forge$8={options:{usePureJavaScript:!1}},api={},baseN$1=api,_reverseAlphabets={};function _encodeWithByteBuffer(A,e){var t=0,o=e.length,g=e.charAt(0),i=[0];for(t=0;t<A.length();++t){for(var r=0,n=A.at(t);r<i.length;++r)n+=i[r]<<8,i[r]=n%o,n=n/o|0;for(;n>0;)i.push(n%o),n=n/o|0}var I=\"\";for(t=0;0===A.at(t)&&t<A.length()-1;++t)I+=g;for(t=i.length-1;t>=0;--t)I+=e[i[t]];return I}api.encode=function(A,e,t){if(\"string\"!=typeof e)throw new TypeError('\"alphabet\" must be a string.');if(void 0!==t&&\"number\"!=typeof t)throw new TypeError('\"maxline\" must be a number.');var o=\"\";if(A instanceof Uint8Array){var g=0,i=e.length,r=e.charAt(0),n=[0];for(g=0;g<A.length;++g){for(var I=0,s=A[g];I<n.length;++I)s+=n[I]<<8,n[I]=s%i,s=s/i|0;for(;s>0;)n.push(s%i),s=s/i|0}for(g=0;0===A[g]&&g<A.length-1;++g)o+=r;for(g=n.length-1;g>=0;--g)o+=e[n[g]]}else o=_encodeWithByteBuffer(A,e);if(t){var C=new RegExp(\".{1,\"+t+\"}\",\"g\");o=o.match(C).join(\"\\r\\n\")}return o},api.decode=function(A,e){if(\"string\"!=typeof A)throw new TypeError('\"input\" must be a string.');if(\"string\"!=typeof e)throw new TypeError('\"alphabet\" must be a string.');var t=_reverseAlphabets[e];if(!t){t=_reverseAlphabets[e]=[];for(var o=0;o<e.length;++o)t[e.charCodeAt(o)]=o}A=A.replace(/\\s/g,\"\");var g=e.length,i=e.charAt(0),r=[0];for(o=0;o<A.length;o++){var n=t[A.charCodeAt(o)];if(void 0===n)return;for(var I=0,s=n;I<r.length;++I)s+=r[I]*g,r[I]=255&s,s>>=8;for(;s>0;)r.push(255&s),s>>=8}for(var C=0;A[C]===i&&C<A.length-1;++C)r.push(0);return\"undefined\"!=typeof Buffer?Buffer.from(r.reverse()):new Uint8Array(r.reverse())};var forge$7=forge$8,baseN=baseN$1,util$5=util$7.exports=forge$7.util=forge$7.util||{};function _checkBitsParam(A){if(8!==A&&16!==A&&24!==A&&32!==A)throw new Error(\"Only 8, 16, 24, or 32 bits supported: \"+A)}function ByteStringBuffer(A){if(this.data=\"\",this.read=0,\"string\"==typeof A)this.data=A;else if(util$5.isArrayBuffer(A)||util$5.isArrayBufferView(A))if(\"undefined\"!=typeof Buffer&&A instanceof Buffer)this.data=A.toString(\"binary\");else{var e=new Uint8Array(A);try{this.data=String.fromCharCode.apply(null,e)}catch(A){for(var t=0;t<e.length;++t)this.putByte(e[t])}}else(A instanceof ByteStringBuffer||\"object\"==typeof A&&\"string\"==typeof A.data&&\"number\"==typeof A.read)&&(this.data=A.data,this.read=A.read);this._constructedStringLength=0}!function(){if(\"undefined\"!=typeof process&&process.nextTick&&!process.browser)return util$5.nextTick=process.nextTick,void(\"function\"==typeof setImmediate?util$5.setImmediate=setImmediate:util$5.setImmediate=util$5.nextTick);if(\"function\"==typeof setImmediate)return util$5.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(util$5.nextTick=function(A){return setImmediate(A)});if(util$5.setImmediate=function(A){setTimeout(A,0)},\"undefined\"!=typeof window&&\"function\"==typeof window.postMessage){var A=\"forge.setImmediate\",e=[];function r(t){if(t.source===window&&t.data===A){t.stopPropagation();var o=e.slice();e.length=0,o.forEach((function(A){A()}))}}util$5.setImmediate=function(t){e.push(t),1===e.length&&window.postMessage(A,\"*\")},window.addEventListener(\"message\",r,!0)}if(\"undefined\"!=typeof MutationObserver){var t=Date.now(),o=!0,g=document.createElement(\"div\");e=[];new MutationObserver((function(){var A=e.slice();e.length=0,A.forEach((function(A){A()}))})).observe(g,{attributes:!0});var i=util$5.setImmediate;util$5.setImmediate=function(A){Date.now()-t>15?(t=Date.now(),i(A)):(e.push(A),1===e.length&&g.setAttribute(\"a\",o=!o))}}util$5.nextTick=util$5.setImmediate}(),util$5.isNodejs=\"undefined\"!=typeof process&&process.versions&&process.versions.node,util$5.globalScope=util$5.isNodejs?commonjsGlobal:\"undefined\"==typeof self?window:self,util$5.isArray=Array.isArray||function(A){return\"[object Array]\"===Object.prototype.toString.call(A)},util$5.isArrayBuffer=function(A){return\"undefined\"!=typeof ArrayBuffer&&A instanceof ArrayBuffer},util$5.isArrayBufferView=function(A){return A&&util$5.isArrayBuffer(A.buffer)&&void 0!==A.byteLength},util$5.ByteBuffer=ByteStringBuffer,util$5.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;function DataBuffer(A,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var t=util$5.isArrayBuffer(A),o=util$5.isArrayBufferView(A);if(t||o)return this.data=t?new DataView(A):new DataView(A.buffer,A.byteOffset,A.byteLength),void(this.write=\"writeOffset\"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=A&&this.putBytes(A),\"writeOffset\"in e&&(this.write=e.writeOffset)}util$5.ByteStringBuffer.prototype._optimizeConstructedString=function(A){this._constructedStringLength+=A,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)},util$5.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},util$5.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},util$5.ByteStringBuffer.prototype.putByte=function(A){return this.putBytes(String.fromCharCode(A))},util$5.ByteStringBuffer.prototype.fillWithByte=function(A,e){A=String.fromCharCode(A);for(var t=this.data;e>0;)1&e&&(t+=A),(e>>>=1)>0&&(A+=A);return this.data=t,this._optimizeConstructedString(e),this},util$5.ByteStringBuffer.prototype.putBytes=function(A){return this.data+=A,this._optimizeConstructedString(A.length),this},util$5.ByteStringBuffer.prototype.putString=function(A){return this.putBytes(util$5.encodeUtf8(A))},util$5.ByteStringBuffer.prototype.putInt16=function(A){return this.putBytes(String.fromCharCode(A>>8&255)+String.fromCharCode(255&A))},util$5.ByteStringBuffer.prototype.putInt24=function(A){return this.putBytes(String.fromCharCode(A>>16&255)+String.fromCharCode(A>>8&255)+String.fromCharCode(255&A))},util$5.ByteStringBuffer.prototype.putInt32=function(A){return this.putBytes(String.fromCharCode(A>>24&255)+String.fromCharCode(A>>16&255)+String.fromCharCode(A>>8&255)+String.fromCharCode(255&A))},util$5.ByteStringBuffer.prototype.putInt16Le=function(A){return this.putBytes(String.fromCharCode(255&A)+String.fromCharCode(A>>8&255))},util$5.ByteStringBuffer.prototype.putInt24Le=function(A){return this.putBytes(String.fromCharCode(255&A)+String.fromCharCode(A>>8&255)+String.fromCharCode(A>>16&255))},util$5.ByteStringBuffer.prototype.putInt32Le=function(A){return this.putBytes(String.fromCharCode(255&A)+String.fromCharCode(A>>8&255)+String.fromCharCode(A>>16&255)+String.fromCharCode(A>>24&255))},util$5.ByteStringBuffer.prototype.putInt=function(A,e){_checkBitsParam(e);var t=\"\";do{e-=8,t+=String.fromCharCode(A>>e&255)}while(e>0);return this.putBytes(t)},util$5.ByteStringBuffer.prototype.putSignedInt=function(A,e){return A<0&&(A+=2<<e-1),this.putInt(A,e)},util$5.ByteStringBuffer.prototype.putBuffer=function(A){return this.putBytes(A.getBytes())},util$5.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},util$5.ByteStringBuffer.prototype.getInt16=function(){var A=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,A},util$5.ByteStringBuffer.prototype.getInt24=function(){var A=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,A},util$5.ByteStringBuffer.prototype.getInt32=function(){var A=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,A},util$5.ByteStringBuffer.prototype.getInt16Le=function(){var A=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,A},util$5.ByteStringBuffer.prototype.getInt24Le=function(){var A=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,A},util$5.ByteStringBuffer.prototype.getInt32Le=function(){var A=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,A},util$5.ByteStringBuffer.prototype.getInt=function(A){_checkBitsParam(A);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),A-=8}while(A>0);return e},util$5.ByteStringBuffer.prototype.getSignedInt=function(A){var e=this.getInt(A),t=2<<A-2;return e>=t&&(e-=t<<1),e},util$5.ByteStringBuffer.prototype.getBytes=function(A){var e;return A?(A=Math.min(this.length(),A),e=this.data.slice(this.read,this.read+A),this.read+=A):0===A?e=\"\":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util$5.ByteStringBuffer.prototype.bytes=function(A){return void 0===A?this.data.slice(this.read):this.data.slice(this.read,this.read+A)},util$5.ByteStringBuffer.prototype.at=function(A){return this.data.charCodeAt(this.read+A)},util$5.ByteStringBuffer.prototype.setAt=function(A,e){return this.data=this.data.substr(0,this.read+A)+String.fromCharCode(e)+this.data.substr(this.read+A+1),this},util$5.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},util$5.ByteStringBuffer.prototype.copy=function(){var A=util$5.createBuffer(this.data);return A.read=this.read,A},util$5.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},util$5.ByteStringBuffer.prototype.clear=function(){return this.data=\"\",this.read=0,this},util$5.ByteStringBuffer.prototype.truncate=function(A){var e=Math.max(0,this.length()-A);return this.data=this.data.substr(this.read,e),this.read=0,this},util$5.ByteStringBuffer.prototype.toHex=function(){for(var A=\"\",e=this.read;e<this.data.length;++e){var t=this.data.charCodeAt(e);t<16&&(A+=\"0\"),A+=t.toString(16)}return A},util$5.ByteStringBuffer.prototype.toString=function(){return util$5.decodeUtf8(this.bytes())},util$5.DataBuffer=DataBuffer,util$5.DataBuffer.prototype.length=function(){return this.write-this.read},util$5.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},util$5.DataBuffer.prototype.accommodate=function(A,e){if(this.length()>=A)return this;e=Math.max(e||this.growSize,A);var t=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),o=new Uint8Array(this.length()+e);return o.set(t),this.data=new DataView(o.buffer),this},util$5.DataBuffer.prototype.putByte=function(A){return this.accommodate(1),this.data.setUint8(this.write++,A),this},util$5.DataBuffer.prototype.fillWithByte=function(A,e){this.accommodate(e);for(var t=0;t<e;++t)this.data.setUint8(A);return this},util$5.DataBuffer.prototype.putBytes=function(A,e){if(util$5.isArrayBufferView(A)){var t=(o=new Uint8Array(A.buffer,A.byteOffset,A.byteLength)).byteLength-o.byteOffset;return this.accommodate(t),new Uint8Array(this.data.buffer,this.write).set(o),this.write+=t,this}if(util$5.isArrayBuffer(A)){var o=new Uint8Array(A);return this.accommodate(o.byteLength),new Uint8Array(this.data.buffer).set(o,this.write),this.write+=o.byteLength,this}if(A instanceof util$5.DataBuffer||\"object\"==typeof A&&\"number\"==typeof A.read&&\"number\"==typeof A.write&&util$5.isArrayBufferView(A.data)){o=new Uint8Array(A.data.byteLength,A.read,A.length());return this.accommodate(o.byteLength),new Uint8Array(A.data.byteLength,this.write).set(o),this.write+=o.byteLength,this}if(A instanceof util$5.ByteStringBuffer&&(A=A.data,e=\"binary\"),e=e||\"binary\",\"string\"==typeof A){var g;if(\"hex\"===e)return this.accommodate(Math.ceil(A.length/2)),g=new Uint8Array(this.data.buffer,this.write),this.write+=util$5.binary.hex.decode(A,g,this.write),this;if(\"base64\"===e)return this.accommodate(3*Math.ceil(A.length/4)),g=new Uint8Array(this.data.buffer,this.write),this.write+=util$5.binary.base64.decode(A,g,this.write),this;if(\"utf8\"===e&&(A=util$5.encodeUtf8(A),e=\"binary\"),\"binary\"===e||\"raw\"===e)return this.accommodate(A.length),g=new Uint8Array(this.data.buffer,this.write),this.write+=util$5.binary.raw.decode(g),this;if(\"utf16\"===e)return this.accommodate(2*A.length),g=new Uint16Array(this.data.buffer,this.write),this.write+=util$5.text.utf16.encode(g),this;throw new Error(\"Invalid encoding: \"+e)}throw Error(\"Invalid parameter: \"+A)},util$5.DataBuffer.prototype.putBuffer=function(A){return this.putBytes(A),A.clear(),this},util$5.DataBuffer.prototype.putString=function(A){return this.putBytes(A,\"utf16\")},util$5.DataBuffer.prototype.putInt16=function(A){return this.accommodate(2),this.data.setInt16(this.write,A),this.write+=2,this},util$5.DataBuffer.prototype.putInt24=function(A){return this.accommodate(3),this.data.setInt16(this.write,A>>8&65535),this.data.setInt8(this.write,A>>16&255),this.write+=3,this},util$5.DataBuffer.prototype.putInt32=function(A){return this.accommodate(4),this.data.setInt32(this.write,A),this.write+=4,this},util$5.DataBuffer.prototype.putInt16Le=function(A){return this.accommodate(2),this.data.setInt16(this.write,A,!0),this.write+=2,this},util$5.DataBuffer.prototype.putInt24Le=function(A){return this.accommodate(3),this.data.setInt8(this.write,A>>16&255),this.data.setInt16(this.write,A>>8&65535,!0),this.write+=3,this},util$5.DataBuffer.prototype.putInt32Le=function(A){return this.accommodate(4),this.data.setInt32(this.write,A,!0),this.write+=4,this},util$5.DataBuffer.prototype.putInt=function(A,e){_checkBitsParam(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,A>>e&255)}while(e>0);return this},util$5.DataBuffer.prototype.putSignedInt=function(A,e){return _checkBitsParam(e),this.accommodate(e/8),A<0&&(A+=2<<e-1),this.putInt(A,e)},util$5.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},util$5.DataBuffer.prototype.getInt16=function(){var A=this.data.getInt16(this.read);return this.read+=2,A},util$5.DataBuffer.prototype.getInt24=function(){var A=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,A},util$5.DataBuffer.prototype.getInt32=function(){var A=this.data.getInt32(this.read);return this.read+=4,A},util$5.DataBuffer.prototype.getInt16Le=function(){var A=this.data.getInt16(this.read,!0);return this.read+=2,A},util$5.DataBuffer.prototype.getInt24Le=function(){var A=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,A},util$5.DataBuffer.prototype.getInt32Le=function(){var A=this.data.getInt32(this.read,!0);return this.read+=4,A},util$5.DataBuffer.prototype.getInt=function(A){_checkBitsParam(A);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),A-=8}while(A>0);return e},util$5.DataBuffer.prototype.getSignedInt=function(A){var e=this.getInt(A),t=2<<A-2;return e>=t&&(e-=t<<1),e},util$5.DataBuffer.prototype.getBytes=function(A){var e;return A?(A=Math.min(this.length(),A),e=this.data.slice(this.read,this.read+A),this.read+=A):0===A?e=\"\":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util$5.DataBuffer.prototype.bytes=function(A){return void 0===A?this.data.slice(this.read):this.data.slice(this.read,this.read+A)},util$5.DataBuffer.prototype.at=function(A){return this.data.getUint8(this.read+A)},util$5.DataBuffer.prototype.setAt=function(A,e){return this.data.setUint8(A,e),this},util$5.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},util$5.DataBuffer.prototype.copy=function(){return new util$5.DataBuffer(this)},util$5.DataBuffer.prototype.compact=function(){if(this.read>0){var A=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(A.byteLength);e.set(A),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},util$5.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},util$5.DataBuffer.prototype.truncate=function(A){return this.write=Math.max(0,this.length()-A),this.read=Math.min(this.read,this.write),this},util$5.DataBuffer.prototype.toHex=function(){for(var A=\"\",e=this.read;e<this.data.byteLength;++e){var t=this.data.getUint8(e);t<16&&(A+=\"0\"),A+=t.toString(16)}return A},util$5.DataBuffer.prototype.toString=function(A){var e=new Uint8Array(this.data,this.read,this.length());if(\"binary\"===(A=A||\"utf8\")||\"raw\"===A)return util$5.binary.raw.encode(e);if(\"hex\"===A)return util$5.binary.hex.encode(e);if(\"base64\"===A)return util$5.binary.base64.encode(e);if(\"utf8\"===A)return util$5.text.utf8.decode(e);if(\"utf16\"===A)return util$5.text.utf16.decode(e);throw new Error(\"Invalid encoding: \"+A)},util$5.createBuffer=function(A,e){return e=e||\"raw\",void 0!==A&&\"utf8\"===e&&(A=util$5.encodeUtf8(A)),new util$5.ByteBuffer(A)},util$5.fillString=function(A,e){for(var t=\"\";e>0;)1&e&&(t+=A),(e>>>=1)>0&&(A+=A);return t},util$5.xorBytes=function(A,e,t){for(var o=\"\",g=\"\",i=\"\",r=0,n=0;t>0;--t,++r)g=A.charCodeAt(r)^e.charCodeAt(r),n>=10&&(o+=i,i=\"\",n=0),i+=String.fromCharCode(g),++n;return o+=i},util$5.hexToBytes=function(A){var e=\"\",t=0;for(!0&A.length&&(t=1,e+=String.fromCharCode(parseInt(A[0],16)));t<A.length;t+=2)e+=String.fromCharCode(parseInt(A.substr(t,2),16));return e},util$5.bytesToHex=function(A){return util$5.createBuffer(A).toHex()},util$5.int32ToBytes=function(A){return String.fromCharCode(A>>24&255)+String.fromCharCode(A>>16&255)+String.fromCharCode(A>>8&255)+String.fromCharCode(255&A)};var _base64=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58=\"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";util$5.encode64=function(A,e){for(var t,o,g,i=\"\",r=\"\",n=0;n<A.length;)t=A.charCodeAt(n++),o=A.charCodeAt(n++),g=A.charCodeAt(n++),i+=_base64.charAt(t>>2),i+=_base64.charAt((3&t)<<4|o>>4),isNaN(o)?i+=\"==\":(i+=_base64.charAt((15&o)<<2|g>>6),i+=isNaN(g)?\"=\":_base64.charAt(63&g)),e&&i.length>e&&(r+=i.substr(0,e)+\"\\r\\n\",i=i.substr(e));return r+=i},util$5.decode64=function(A){A=A.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");for(var e,t,o,g,i=\"\",r=0;r<A.length;)e=_base64Idx[A.charCodeAt(r++)-43],t=_base64Idx[A.charCodeAt(r++)-43],o=_base64Idx[A.charCodeAt(r++)-43],g=_base64Idx[A.charCodeAt(r++)-43],i+=String.fromCharCode(e<<2|t>>4),64!==o&&(i+=String.fromCharCode((15&t)<<4|o>>2),64!==g&&(i+=String.fromCharCode((3&o)<<6|g)));return i},util$5.encodeUtf8=function(A){return unescape(encodeURIComponent(A))},util$5.decodeUtf8=function(A){return decodeURIComponent(escape(A))},util$5.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}},util$5.binary.raw.encode=function(A){return String.fromCharCode.apply(null,A)},util$5.binary.raw.decode=function(A,e,t){var o=e;o||(o=new Uint8Array(A.length));for(var g=t=t||0,i=0;i<A.length;++i)o[g++]=A.charCodeAt(i);return e?g-t:o},util$5.binary.hex.encode=util$5.bytesToHex,util$5.binary.hex.decode=function(A,e,t){var o=e;o||(o=new Uint8Array(Math.ceil(A.length/2)));var g=0,i=t=t||0;for(1&A.length&&(g=1,o[i++]=parseInt(A[0],16));g<A.length;g+=2)o[i++]=parseInt(A.substr(g,2),16);return e?i-t:o},util$5.binary.base64.encode=function(A,e){for(var t,o,g,i=\"\",r=\"\",n=0;n<A.byteLength;)t=A[n++],o=A[n++],g=A[n++],i+=_base64.charAt(t>>2),i+=_base64.charAt((3&t)<<4|o>>4),isNaN(o)?i+=\"==\":(i+=_base64.charAt((15&o)<<2|g>>6),i+=isNaN(g)?\"=\":_base64.charAt(63&g)),e&&i.length>e&&(r+=i.substr(0,e)+\"\\r\\n\",i=i.substr(e));return r+=i},util$5.binary.base64.decode=function(A,e,t){var o,g,i,r,n=e;n||(n=new Uint8Array(3*Math.ceil(A.length/4))),A=A.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");for(var I=0,s=t=t||0;I<A.length;)o=_base64Idx[A.charCodeAt(I++)-43],g=_base64Idx[A.charCodeAt(I++)-43],i=_base64Idx[A.charCodeAt(I++)-43],r=_base64Idx[A.charCodeAt(I++)-43],n[s++]=o<<2|g>>4,64!==i&&(n[s++]=(15&g)<<4|i>>2,64!==r&&(n[s++]=(3&i)<<6|r));return e?s-t:n.subarray(0,s)},util$5.binary.base58.encode=function(A,e){return util$5.binary.baseN.encode(A,_base58,e)},util$5.binary.base58.decode=function(A,e){return util$5.binary.baseN.decode(A,_base58,e)},util$5.text={utf8:{},utf16:{}},util$5.text.utf8.encode=function(A,e,t){A=util$5.encodeUtf8(A);var o=e;o||(o=new Uint8Array(A.length));for(var g=t=t||0,i=0;i<A.length;++i)o[g++]=A.charCodeAt(i);return e?g-t:o},util$5.text.utf8.decode=function(A){return util$5.decodeUtf8(String.fromCharCode.apply(null,A))},util$5.text.utf16.encode=function(A,e,t){var o=e;o||(o=new Uint8Array(2*A.length));for(var g=new Uint16Array(o.buffer),i=t=t||0,r=t,n=0;n<A.length;++n)g[r++]=A.charCodeAt(n),i+=2;return e?i-t:o},util$5.text.utf16.decode=function(A){return String.fromCharCode.apply(null,new Uint16Array(A.buffer))},util$5.deflate=function(A,e,t){if(e=util$5.decode64(A.deflate(util$5.encode64(e)).rval),t){var o=2;32&e.charCodeAt(1)&&(o=6),e=e.substring(o,e.length-4)}return e},util$5.inflate=function(A,e,t){var o=A.inflate(util$5.encode64(e)).rval;return null===o?null:util$5.decode64(o)};var _setStorageObject=function(A,e,t){if(!A)throw new Error(\"WebStorage not available.\");var o;if(null===t?o=A.removeItem(e):(t=util$5.encode64(JSON.stringify(t)),o=A.setItem(e,t)),void 0!==o&&!0!==o.rval){var g=new Error(o.error.message);throw g.id=o.error.id,g.name=o.error.name,g}},_getStorageObject=function(A,e){if(!A)throw new Error(\"WebStorage not available.\");var t=A.getItem(e);if(A.init)if(null===t.rval){if(t.error){var o=new Error(t.error.message);throw o.id=t.error.id,o.name=t.error.name,o}t=null}else t=t.rval;return null!==t&&(t=JSON.parse(util$5.decode64(t))),t},_setItem=function(A,e,t,o){var g=_getStorageObject(A,e);null===g&&(g={}),g[t]=o,_setStorageObject(A,e,g)},_getItem=function(A,e,t){var o=_getStorageObject(A,e);return null!==o&&(o=t in o?o[t]:null),o},_removeItem=function(A,e,t){var o=_getStorageObject(A,e);if(null!==o&&t in o){delete o[t];var g=!0;for(var i in o){g=!1;break}g&&(o=null),_setStorageObject(A,e,o)}},_clearItems=function(A,e){_setStorageObject(A,e,null)},_callStorageFunction=function(A,e,t){var o,g=null;void 0===t&&(t=[\"web\",\"flash\"]);var i=!1,r=null;for(var n in t){o=t[n];try{if(\"flash\"===o||\"both\"===o){if(null===e[0])throw new Error(\"Flash local storage not available.\");g=A.apply(this,e),i=\"flash\"===o}\"web\"!==o&&\"both\"!==o||(e[0]=localStorage,g=A.apply(this,e),i=!0)}catch(A){r=A}if(i)break}if(!i)throw r;return g};util$5.setItem=function(A,e,t,o,g){_callStorageFunction(_setItem,arguments,g)},util$5.getItem=function(A,e,t,o){return _callStorageFunction(_getItem,arguments,o)},util$5.removeItem=function(A,e,t,o){_callStorageFunction(_removeItem,arguments,o)},util$5.clearItems=function(A,e,t){_callStorageFunction(_clearItems,arguments,t)},util$5.isEmpty=function(A){for(var e in A)if(A.hasOwnProperty(e))return!1;return!0},util$5.format=function(A){for(var e,t,o=/%./g,g=0,i=[],r=0;e=o.exec(A);){(t=A.substring(r,o.lastIndex-2)).length>0&&i.push(t),r=o.lastIndex;var n=e[0][1];switch(n){case\"s\":case\"o\":g<arguments.length?i.push(arguments[1+g++]):i.push(\"<?>\");break;case\"%\":i.push(\"%\");break;default:i.push(\"<%\"+n+\"?>\")}}return i.push(A.substring(r)),i.join(\"\")},util$5.formatNumber=function(A,e,t,o){var g=A,i=isNaN(e=Math.abs(e))?2:e,r=void 0===t?\",\":t,n=void 0===o?\".\":o,I=g<0?\"-\":\"\",s=parseInt(g=Math.abs(+g||0).toFixed(i),10)+\"\",C=s.length>3?s.length%3:0;return I+(C?s.substr(0,C)+n:\"\")+s.substr(C).replace(/(\\d{3})(?=\\d)/g,\"$1\"+n)+(i?r+Math.abs(g-s).toFixed(i).slice(2):\"\")},util$5.formatSize=function(A){return A=A>=1073741824?util$5.formatNumber(A/1073741824,2,\".\",\"\")+\" GiB\":A>=1048576?util$5.formatNumber(A/1048576,2,\".\",\"\")+\" MiB\":A>=1024?util$5.formatNumber(A/1024,0)+\" KiB\":util$5.formatNumber(A,0)+\" bytes\"},util$5.bytesFromIP=function(A){return-1!==A.indexOf(\".\")?util$5.bytesFromIPv4(A):-1!==A.indexOf(\":\")?util$5.bytesFromIPv6(A):null},util$5.bytesFromIPv4=function(A){if(4!==(A=A.split(\".\")).length)return null;for(var e=util$5.createBuffer(),t=0;t<A.length;++t){var o=parseInt(A[t],10);if(isNaN(o))return null;e.putByte(o)}return e.getBytes()},util$5.bytesFromIPv6=function(A){for(var e=0,t=2*(8-(A=A.split(\":\").filter((function(A){return 0===A.length&&++e,!0}))).length+e),o=util$5.createBuffer(),g=0;g<8;++g)if(A[g]&&0!==A[g].length){var i=util$5.hexToBytes(A[g]);i.length<2&&o.putByte(0),o.putBytes(i)}else o.fillWithByte(0,t),t=0;return o.getBytes()},util$5.bytesToIP=function(A){return 4===A.length?util$5.bytesToIPv4(A):16===A.length?util$5.bytesToIPv6(A):null},util$5.bytesToIPv4=function(A){if(4!==A.length)return null;for(var e=[],t=0;t<A.length;++t)e.push(A.charCodeAt(t));return e.join(\".\")},util$5.bytesToIPv6=function(A){if(16!==A.length)return null;for(var e=[],t=[],o=0,g=0;g<A.length;g+=2){for(var i=util$5.bytesToHex(A[g]+A[g+1]);\"0\"===i[0]&&\"0\"!==i;)i=i.substr(1);if(\"0\"===i){var r=t[t.length-1],n=e.length;r&&n===r.end+1?(r.end=n,r.end-r.start>t[o].end-t[o].start&&(o=t.length-1)):t.push({start:n,end:n})}e.push(i)}if(t.length>0){var I=t[o];I.end-I.start>0&&(e.splice(I.start,I.end-I.start+1,\"\"),0===I.start&&e.unshift(\"\"),7===I.end&&e.push(\"\"))}return e.join(\":\")},util$5.estimateCores=function(A,e){if(\"function\"==typeof A&&(e=A,A={}),A=A||{},\"cores\"in util$5&&!A.update)return e(null,util$5.cores);if(\"undefined\"!=typeof navigator&&\"hardwareConcurrency\"in navigator&&navigator.hardwareConcurrency>0)return util$5.cores=navigator.hardwareConcurrency,e(null,util$5.cores);if(\"undefined\"==typeof Worker)return util$5.cores=1,e(null,util$5.cores);if(\"undefined\"==typeof Blob)return util$5.cores=2,e(null,util$5.cores);var t=URL.createObjectURL(new Blob([\"(\",function(){self.addEventListener(\"message\",(function(A){var e=Date.now(),t=e+4;self.postMessage({st:e,et:t})}))}.toString(),\")()\"],{type:\"application/javascript\"}));!function A(o,g,i){if(0===g){var r=Math.floor(o.reduce((function(A,e){return A+e}),0)/o.length);return util$5.cores=Math.max(1,r),URL.revokeObjectURL(t),e(null,util$5.cores)}!function(A,e){for(var o=[],g=[],i=0;i<A;++i){var r=new Worker(t);r.addEventListener(\"message\",(function(t){if(g.push(t.data),g.length===A){for(var i=0;i<A;++i)o[i].terminate();e(null,g)}})),o.push(r)}for(i=0;i<A;++i)o[i].postMessage(i)}(i,(function(e,t){o.push(function(A,e){for(var t=[],o=0;o<A;++o)for(var g=e[o],i=t[o]=[],r=0;r<A;++r)if(o!==r){var n=e[r];(g.st>n.st&&g.st<n.et||n.st>g.st&&n.st<g.et)&&i.push(r)}return t.reduce((function(A,e){return Math.max(A,e.length)}),0)}(i,t)),A(o,g-1,i)}))}([],5,16)};var utilExports=util$7.exports,util$6=getDefaultExportFromCjs(utilExports),forge$6=forge$8,cipher=forge$6.cipher=forge$6.cipher||{};forge$6.cipher.algorithms=forge$6.cipher.algorithms||{},forge$6.cipher.createCipher=function(A,e){var t=A;if(\"string\"==typeof t&&(t=forge$6.cipher.getAlgorithm(t))&&(t=t()),!t)throw new Error(\"Unsupported algorithm: \"+A);return new forge$6.cipher.BlockCipher({algorithm:t,key:e,decrypt:!1})},forge$6.cipher.createDecipher=function(A,e){var t=A;if(\"string\"==typeof t&&(t=forge$6.cipher.getAlgorithm(t))&&(t=t()),!t)throw new Error(\"Unsupported algorithm: \"+A);return new forge$6.cipher.BlockCipher({algorithm:t,key:e,decrypt:!0})},forge$6.cipher.registerAlgorithm=function(A,e){A=A.toUpperCase(),forge$6.cipher.algorithms[A]=e},forge$6.cipher.getAlgorithm=function(A){return(A=A.toUpperCase())in forge$6.cipher.algorithms?forge$6.cipher.algorithms[A]:null};var BlockCipher=forge$6.cipher.BlockCipher=function(A){this.algorithm=A.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=A.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=A.decrypt,this.algorithm.initialize(A)};BlockCipher.prototype.start=function(A){A=A||{};var e={};for(var t in A)e[t]=A[t];e.decrypt=this._decrypt,this._finish=!1,this._input=forge$6.util.createBuffer(),this.output=A.output||forge$6.util.createBuffer(),this.mode.start(e)},BlockCipher.prototype.update=function(A){for(A&&this._input.putBuffer(A);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},BlockCipher.prototype.finish=function(A){!A||\"ECB\"!==this.mode.name&&\"CBC\"!==this.mode.name||(this.mode.pad=function(e){return A(this.blockSize,e,!1)},this.mode.unpad=function(e){return A(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))};var forgeCipher=getDefaultExportFromCjs(cipher),forge$5=forge$8;forge$5.md=forge$5.md||{},forge$5.md.algorithms=forge$5.md.algorithms||{};var forge$4=forge$8,sha256=forge$4.sha256=forge$4.sha256||{};forge$4.md.sha256=forge$4.md.algorithms.sha256=sha256,sha256.create=function(){_initialized||_init();var A=null,e=forge$4.util.createBuffer(),t=new Array(64),o={algorithm:\"sha256\",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var t=o.messageLengthSize/4,g=0;g<t;++g)o.fullMessageLength.push(0);return e=forge$4.util.createBuffer(),A={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(g,i){\"utf8\"===i&&(g=forge$4.util.encodeUtf8(g));var r=g.length;o.messageLength+=r,r=[r/4294967296>>>0,r>>>0];for(var n=o.fullMessageLength.length-1;n>=0;--n)o.fullMessageLength[n]+=r[1],r[1]=r[0]+(o.fullMessageLength[n]/4294967296>>>0),o.fullMessageLength[n]=o.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return e.putBytes(g),_update(A,t,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var g=forge$4.util.createBuffer();g.putBytes(e.bytes());var i,r=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;g.putBytes(_padding.substr(0,o.blockLength-r));for(var n=8*o.fullMessageLength[0],I=0;I<o.fullMessageLength.length-1;++I)n+=(i=8*o.fullMessageLength[I+1])/4294967296>>>0,g.putInt32(n>>>0),n=i>>>0;g.putInt32(n);var s={h0:A.h0,h1:A.h1,h2:A.h2,h3:A.h3,h4:A.h4,h5:A.h5,h6:A.h6,h7:A.h7};_update(s,t,g);var C=forge$4.util.createBuffer();return C.putInt32(s.h0),C.putInt32(s.h1),C.putInt32(s.h2),C.putInt32(s.h3),C.putInt32(s.h4),C.putInt32(s.h5),C.putInt32(s.h6),C.putInt32(s.h7),C},o};var _padding=null,_initialized=!1,_k=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge$4.util.fillString(String.fromCharCode(0),64),_k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized=!0}function _update(A,e,t){for(var o,g,i,r,n,I,s,C,E,a,B,Q,c,l=t.length();l>=64;){for(n=0;n<16;++n)e[n]=t.getInt32();for(;n<64;++n)o=((o=e[n-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,g=((g=e[n-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,e[n]=o+e[n-7]+g+e[n-16]|0;for(I=A.h0,s=A.h1,C=A.h2,E=A.h3,a=A.h4,B=A.h5,Q=A.h6,c=A.h7,n=0;n<64;++n)i=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),r=I&s|C&(I^s),o=c+((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(Q^a&(B^Q))+_k[n]+e[n],c=Q,Q=B,B=a,a=E+o>>>0,E=C,C=s,s=I,I=o+(g=i+r)>>>0;A.h0=A.h0+I|0,A.h1=A.h1+s|0,A.h2=A.h2+C|0,A.h3=A.h3+E|0,A.h4=A.h4+a|0,A.h5=A.h5+B|0,A.h6=A.h6+Q|0,A.h7=A.h7+c|0,l-=64}}var forge$3=forge$8,hmac=forge$3.hmac=forge$3.hmac||{};hmac.create=function(){var A=null,e=null,t=null,o=null,g={start:function(g,i){if(null!==g)if(\"string\"==typeof g){if(!((g=g.toLowerCase())in forge$3.md.algorithms))throw new Error('Unknown hash algorithm \"'+g+'\"');e=forge$3.md.algorithms[g].create()}else e=g;if(null===i)i=A;else{if(\"string\"==typeof i)i=forge$3.util.createBuffer(i);else if(forge$3.util.isArray(i)){var r=i;i=forge$3.util.createBuffer();for(var n=0;n<r.length;++n)i.putByte(r[n])}var I=i.length();I>e.blockLength&&(e.start(),e.update(i.bytes()),i=e.digest()),t=forge$3.util.createBuffer(),o=forge$3.util.createBuffer(),I=i.length();for(n=0;n<I;++n){r=i.at(n);t.putByte(54^r),o.putByte(92^r)}if(I<e.blockLength)for(r=e.blockLength-I,n=0;n<r;++n)t.putByte(54),o.putByte(92);A=i,t=t.bytes(),o=o.bytes()}e.start(),e.update(t)},update:function(A){e.update(A)},getMac:function(){var A=e.digest().bytes();return e.start(),e.update(o),e.update(A),e.digest()}};return g.digest=g.getMac,g};var _nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$4=getAugmentedNamespace(_nodeResolve_empty$1),forge$2=forge$8,pkcs5=forge$2.pkcs5=forge$2.pkcs5||{},crypto$1;forge$2.util.isNodejs&&!forge$2.options.usePureJavaScript&&(crypto$1=require$$4);var pbkdf2=forge$2.pbkdf2=pkcs5.pbkdf2=function(A,e,t,o,g,i){if(\"function\"==typeof g&&(i=g,g=null),forge$2.util.isNodejs&&!forge$2.options.usePureJavaScript&&crypto$1.pbkdf2&&(null===g||\"object\"!=typeof g)&&(crypto$1.pbkdf2Sync.length>4||!g||\"sha1\"===g))return\"string\"!=typeof g&&(g=\"sha1\"),A=Buffer.from(A,\"binary\"),e=Buffer.from(e,\"binary\"),i?4===crypto$1.pbkdf2Sync.length?crypto$1.pbkdf2(A,e,t,o,(function(A,e){if(A)return i(A);i(null,e.toString(\"binary\"))})):crypto$1.pbkdf2(A,e,t,o,g,(function(A,e){if(A)return i(A);i(null,e.toString(\"binary\"))})):4===crypto$1.pbkdf2Sync.length?crypto$1.pbkdf2Sync(A,e,t,o).toString(\"binary\"):crypto$1.pbkdf2Sync(A,e,t,o,g).toString(\"binary\");if(null==g&&(g=\"sha1\"),\"string\"==typeof g){if(!(g in forge$2.md.algorithms))throw new Error(\"Unknown hash algorithm: \"+g);g=forge$2.md[g].create()}var r=g.digestLength;if(o>4294967295*r){var n=new Error(\"Derived key is too long.\");if(i)return i(n);throw n}var I=Math.ceil(o/r),s=o-(I-1)*r,C=forge$2.hmac.create();C.start(g,A);var E,a,B,Q=\"\";if(!i){for(var c=1;c<=I;++c){C.start(null,null),C.update(e),C.update(forge$2.util.int32ToBytes(c)),E=B=C.digest().getBytes();for(var l=2;l<=t;++l)C.start(null,null),C.update(B),a=C.digest().getBytes(),E=forge$2.util.xorBytes(E,a,r),B=a;Q+=c<I?E:E.substr(0,s)}return Q}c=1;function u(){if(c>I)return i(null,Q);C.start(null,null),C.update(e),C.update(forge$2.util.int32ToBytes(c)),E=B=C.digest().getBytes(),l=2,h()}function h(){if(l<=t)return C.start(null,null),C.update(B),a=C.digest().getBytes(),E=forge$2.util.xorBytes(E,a,r),B=a,++l,forge$2.util.setImmediate(h);Q+=c<I?E:E.substr(0,s),++c,u()}u()},pkcs5$1=getDefaultExportFromCjs(pbkdf2),forge$1=forge$8;forge$1.cipher=forge$1.cipher||{};var modes=forge$1.cipher.modes=forge$1.cipher.modes||{};function transformIV(A,e){if(\"string\"==typeof A&&(A=forge$1.util.createBuffer(A)),forge$1.util.isArray(A)&&A.length>4){var t=A;A=forge$1.util.createBuffer();for(var o=0;o<t.length;++o)A.putByte(t[o])}if(A.length()<e)throw new Error(\"Invalid IV length; got \"+A.length()+\" bytes and expected \"+e+\" bytes.\");if(!forge$1.util.isArray(A)){var g=[],i=e/4;for(o=0;o<i;++o)g.push(A.getInt32());A=g}return A}function inc32(A){A[A.length-1]=A[A.length-1]+1&4294967295}function from64To32(A){return[A/4294967296|0,4294967295&A]}modes.ecb=function(A){A=A||{},this.name=\"ECB\",this.cipher=A.cipher,this.blockSize=A.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},modes.ecb.prototype.start=function(A){},modes.ecb.prototype.encrypt=function(A,e,t){if(A.length()<this.blockSize&&!(t&&A.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=A.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(o=0;o<this._ints;++o)e.putInt32(this._outBlock[o])},modes.ecb.prototype.decrypt=function(A,e,t){if(A.length()<this.blockSize&&!(t&&A.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=A.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(o=0;o<this._ints;++o)e.putInt32(this._outBlock[o])},modes.ecb.prototype.pad=function(A,e){var t=A.length()===this.blockSize?this.blockSize:this.blockSize-A.length();return A.fillWithByte(t,t),!0},modes.ecb.prototype.unpad=function(A,e){if(e.overflow>0)return!1;var t=A.length(),o=A.at(t-1);return!(o>this.blockSize<<2)&&(A.truncate(o),!0)},modes.cbc=function(A){A=A||{},this.name=\"CBC\",this.cipher=A.cipher,this.blockSize=A.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},modes.cbc.prototype.start=function(A){if(null===A.iv){if(!this._prev)throw new Error(\"Invalid IV parameter.\");this._iv=this._prev.slice(0)}else{if(!(\"iv\"in A))throw new Error(\"Invalid IV parameter.\");this._iv=transformIV(A.iv,this.blockSize),this._prev=this._iv.slice(0)}},modes.cbc.prototype.encrypt=function(A,e,t){if(A.length()<this.blockSize&&!(t&&A.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=this._prev[o]^A.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]);this._prev=this._outBlock},modes.cbc.prototype.decrypt=function(A,e,t){if(A.length()<this.blockSize&&!(t&&A.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=A.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(o=0;o<this._ints;++o)e.putInt32(this._prev[o]^this._outBlock[o]);this._prev=this._inBlock.slice(0)},modes.cbc.prototype.pad=function(A,e){var t=A.length()===this.blockSize?this.blockSize:this.blockSize-A.length();return A.fillWithByte(t,t),!0},modes.cbc.prototype.unpad=function(A,e){if(e.overflow>0)return!1;var t=A.length(),o=A.at(t-1);return!(o>this.blockSize<<2)&&(A.truncate(o),!0)},modes.cfb=function(A){A=A||{},this.name=\"CFB\",this.cipher=A.cipher,this.blockSize=A.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$1.util.createBuffer(),this._partialBytes=0},modes.cfb.prototype.start=function(A){if(!(\"iv\"in A))throw new Error(\"Invalid IV parameter.\");this._iv=transformIV(A.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},modes.cfb.prototype.encrypt=function(A,e,t){var o=A.length();if(0===o)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&o>=this.blockSize)for(var g=0;g<this._ints;++g)this._inBlock[g]=A.getInt32()^this._outBlock[g],e.putInt32(this._inBlock[g]);else{var i=(this.blockSize-o)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialBlock[g]=A.getInt32()^this._outBlock[g],this._partialOutput.putInt32(this._partialBlock[g]);if(i>0)A.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._partialBlock[g];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!t)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}},modes.cfb.prototype.decrypt=function(A,e,t){var o=A.length();if(0===o)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&o>=this.blockSize)for(var g=0;g<this._ints;++g)this._inBlock[g]=A.getInt32(),e.putInt32(this._inBlock[g]^this._outBlock[g]);else{var i=(this.blockSize-o)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialBlock[g]=A.getInt32(),this._partialOutput.putInt32(this._partialBlock[g]^this._outBlock[g]);if(i>0)A.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._partialBlock[g];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!t)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}},modes.ofb=function(A){A=A||{},this.name=\"OFB\",this.cipher=A.cipher,this.blockSize=A.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$1.util.createBuffer(),this._partialBytes=0},modes.ofb.prototype.start=function(A){if(!(\"iv\"in A))throw new Error(\"Invalid IV parameter.\");this._iv=transformIV(A.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},modes.ofb.prototype.encrypt=function(A,e,t){var o=A.length();if(0===A.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&o>=this.blockSize)for(var g=0;g<this._ints;++g)e.putInt32(A.getInt32()^this._outBlock[g]),this._inBlock[g]=this._outBlock[g];else{var i=(this.blockSize-o)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialOutput.putInt32(A.getInt32()^this._outBlock[g]);if(i>0)A.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._outBlock[g];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!t)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}},modes.ofb.prototype.decrypt=modes.ofb.prototype.encrypt,modes.ctr=function(A){A=A||{},this.name=\"CTR\",this.cipher=A.cipher,this.blockSize=A.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$1.util.createBuffer(),this._partialBytes=0},modes.ctr.prototype.start=function(A){if(!(\"iv\"in A))throw new Error(\"Invalid IV parameter.\");this._iv=transformIV(A.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},modes.ctr.prototype.encrypt=function(A,e,t){var o=A.length();if(0===o)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&o>=this.blockSize)for(var g=0;g<this._ints;++g)e.putInt32(A.getInt32()^this._outBlock[g]);else{var i=(this.blockSize-o)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialOutput.putInt32(A.getInt32()^this._outBlock[g]);if(i>0&&(A.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!t)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)},modes.ctr.prototype.decrypt=modes.ctr.prototype.encrypt,modes.gcm=function(A){A=A||{},this.name=\"GCM\",this.cipher=A.cipher,this.blockSize=A.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$1.util.createBuffer(),this._partialBytes=0,this._R=3774873600},modes.gcm.prototype.start=function(A){if(!(\"iv\"in A))throw new Error(\"Invalid IV parameter.\");var e,t=forge$1.util.createBuffer(A.iv);if(this._cipherLength=0,e=\"additionalData\"in A?forge$1.util.createBuffer(A.additionalData):forge$1.util.createBuffer(),this._tagLength=\"tagLength\"in A?A.tagLength:128,this._tag=null,A.decrypt&&(this._tag=forge$1.util.createBuffer(A.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error(\"Authentication tag does not match tag length.\");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=t.length();if(12===o)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(8*o)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,e=forge$1.util.createBuffer(e),this._aDataLength=from64To32(8*e.length());var g=e.length()%this.blockSize;for(g&&e.fillWithByte(0,this.blockSize-g),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},modes.gcm.prototype.encrypt=function(A,e,t){var o=A.length();if(0===o)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&o>=this.blockSize){for(var g=0;g<this._ints;++g)e.putInt32(this._outBlock[g]^=A.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-o)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialOutput.putInt32(A.getInt32()^this._outBlock[g]);if(i<=0||t){if(t){var r=o%this.blockSize;this._cipherLength+=r,this._partialOutput.truncate(this.blockSize-r)}else this._cipherLength+=this.blockSize;for(g=0;g<this._ints;++g)this._outBlock[g]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!t)return A.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)},modes.gcm.prototype.decrypt=function(A,e,t){var o=A.length();if(o<this.blockSize&&!(t&&o>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=A.getInt32(),this._hashBlock[1]=A.getInt32(),this._hashBlock[2]=A.getInt32(),this._hashBlock[3]=A.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var g=0;g<this._ints;++g)e.putInt32(this._outBlock[g]^this._hashBlock[g]);o<this.blockSize?this._cipherLength+=o%this.blockSize:this._cipherLength+=this.blockSize},modes.gcm.prototype.afterFinish=function(A,e){var t=!0;e.decrypt&&e.overflow&&A.truncate(this.blockSize-e.overflow),this.tag=forge$1.util.createBuffer();var o=this._aDataLength.concat(from64To32(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var g=[];this.cipher.encrypt(this._j0,g);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^g[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(t=!1),t},modes.gcm.prototype.multiply=function(A,e){for(var t=[0,0,0,0],o=e.slice(0),g=0;g<128;++g){A[g/32|0]&1<<31-g%32&&(t[0]^=o[0],t[1]^=o[1],t[2]^=o[2],t[3]^=o[3]),this.pow(o,o)}return t},modes.gcm.prototype.pow=function(A,e){for(var t=1&A[3],o=3;o>0;--o)e[o]=A[o]>>>1|(1&A[o-1])<<31;e[0]=A[0]>>>1,t&&(e[0]^=this._R)},modes.gcm.prototype.tableMultiply=function(A){for(var e=[0,0,0,0],t=0;t<32;++t){var o=A[t/8|0]>>>4*(7-t%8)&15,g=this._m[t][o];e[0]^=g[0],e[1]^=g[1],e[2]^=g[2],e[3]^=g[3]}return e},modes.gcm.prototype.ghash=function(A,e,t){return e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3],this.tableMultiply(e)},modes.gcm.prototype.generateHashTable=function(A,e){for(var t=8/e,o=4*t,g=16*t,i=new Array(g),r=0;r<g;++r){var n=[0,0,0,0],I=(o-1-r%o)*e;n[r/o|0]=1<<e-1<<I,i[r]=this.generateSubHashTable(this.multiply(n,A),e)}return i},modes.gcm.prototype.generateSubHashTable=function(A,e){var t=1<<e,o=t>>>1,g=new Array(t);g[o]=A.slice(0);for(var i=o>>>1;i>0;)this.pow(g[2*i],g[i]=[]),i>>=1;for(i=2;i<o;){for(var r=1;r<i;++r){var n=g[i],I=g[r];g[i+r]=[n[0]^I[0],n[1]^I[1],n[2]^I[2],n[3]^I[3]]}i*=2}for(g[0]=[0,0,0,0],i=o+1;i<t;++i){var s=g[i^o];g[i]=[A[0]^s[0],A[1]^s[1],A[2]^s[2],A[3]^s[3]]}return g};var forge=forge$8;function registerAlgorithm(A,e){forge.cipher.registerAlgorithm(A,(function(){return new forge.aes.Algorithm(A,e)}))}forge.aes=forge.aes||{},forge.aes.startEncrypting=function(A,e,t,o){var g=_createCipher({key:A,output:t,decrypt:!1,mode:o});return g.start(e),g},forge.aes.createEncryptionCipher=function(A,e){return _createCipher({key:A,output:null,decrypt:!1,mode:e})},forge.aes.startDecrypting=function(A,e,t,o){var g=_createCipher({key:A,output:t,decrypt:!0,mode:o});return g.start(e),g},forge.aes.createDecryptionCipher=function(A,e){return _createCipher({key:A,output:null,decrypt:!0,mode:e})},forge.aes.Algorithm=function(A,e){init||initialize();var t=this;t.name=A,t.mode=new e({blockSize:16,cipher:{encrypt:function(A,e){return _updateBlock(t._w,A,e,!1)},decrypt:function(A,e){return _updateBlock(t._w,A,e,!0)}}}),t._init=!1},forge.aes.Algorithm.prototype.initialize=function(A){if(!this._init){var e,t=A.key;if(\"string\"!=typeof t||16!==t.length&&24!==t.length&&32!==t.length){if(forge.util.isArray(t)&&(16===t.length||24===t.length||32===t.length)){e=t,t=forge.util.createBuffer();for(var o=0;o<e.length;++o)t.putByte(e[o])}}else t=forge.util.createBuffer(t);if(!forge.util.isArray(t)){e=t,t=[];var g=e.length();if(16===g||24===g||32===g){g>>>=2;for(o=0;o<g;++o)t.push(e.getInt32())}}if(!forge.util.isArray(t)||4!==t.length&&6!==t.length&&8!==t.length)throw new Error(\"Invalid key parameter.\");var i=this.mode.name,r=-1!==[\"CFB\",\"OFB\",\"CTR\",\"GCM\"].indexOf(i);this._w=_expandKey(t,A.decrypt&&!r),this._init=!0}},forge.aes._expandKey=function(A,e){return init||initialize(),_expandKey(A,e)},forge.aes._updateBlock=_updateBlock,registerAlgorithm(\"AES-ECB\",forge.cipher.modes.ecb),registerAlgorithm(\"AES-CBC\",forge.cipher.modes.cbc),registerAlgorithm(\"AES-CFB\",forge.cipher.modes.cfb),registerAlgorithm(\"AES-OFB\",forge.cipher.modes.ofb),registerAlgorithm(\"AES-CTR\",forge.cipher.modes.ctr),registerAlgorithm(\"AES-GCM\",forge.cipher.modes.gcm);var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var A=new Array(256),e=0;e<128;++e)A[e]=e<<1,A[e+128]=e+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(e=0;e<4;++e)mix[e]=new Array(256),imix[e]=new Array(256);var t,o,g,i,r,n,I,s=0,C=0;for(e=0;e<256;++e){i=(i=C^C<<1^C<<2^C<<3^C<<4)>>8^255&i^99,sbox[s]=i,isbox[i]=s,n=(r=A[i])<<24^i<<16^i<<8^i^r,I=((t=A[s])^(o=A[t])^(g=A[o]))<<24^(s^g)<<16^(s^o^g)<<8^s^t^g;for(var E=0;E<4;++E)mix[E][s]=n,imix[E][i]=I,n=n<<24|n>>>8,I=I<<24|I>>>8;0===s?s=C=1:(s=t^A[A[A[t^g]]],C^=A[A[C]])}}function _expandKey(A,e){for(var t,o=A.slice(0),g=1,i=o.length,r=Nb*(i+6+1),n=i;n<r;++n)t=o[n-1],n%i==0?(t=sbox[t>>>16&255]<<24^sbox[t>>>8&255]<<16^sbox[255&t]<<8^sbox[t>>>24]^rcon[g]<<24,g++):i>6&&n%i==4&&(t=sbox[t>>>24]<<24^sbox[t>>>16&255]<<16^sbox[t>>>8&255]<<8^sbox[255&t]),o[n]=o[n-i]^t;if(e){for(var I,s=imix[0],C=imix[1],E=imix[2],a=imix[3],B=o.slice(0),Q=(n=0,(r=o.length)-Nb);n<r;n+=Nb,Q-=Nb)if(0===n||n===r-Nb)B[n]=o[Q],B[n+1]=o[Q+3],B[n+2]=o[Q+2],B[n+3]=o[Q+1];else for(var c=0;c<Nb;++c)I=o[Q+c],B[n+(3&-c)]=s[sbox[I>>>24]]^C[sbox[I>>>16&255]]^E[sbox[I>>>8&255]]^a[sbox[255&I]];o=B}return o}function _updateBlock(A,e,t,o){var g,i,r,n,I,s,C,E,a,B,Q,c,l=A.length/4-1;o?(g=imix[0],i=imix[1],r=imix[2],n=imix[3],I=isbox):(g=mix[0],i=mix[1],r=mix[2],n=mix[3],I=sbox),s=e[0]^A[0],C=e[o?3:1]^A[1],E=e[2]^A[2],a=e[o?1:3]^A[3];for(var u=3,h=1;h<l;++h)B=g[s>>>24]^i[C>>>16&255]^r[E>>>8&255]^n[255&a]^A[++u],Q=g[C>>>24]^i[E>>>16&255]^r[a>>>8&255]^n[255&s]^A[++u],c=g[E>>>24]^i[a>>>16&255]^r[s>>>8&255]^n[255&C]^A[++u],a=g[a>>>24]^i[s>>>16&255]^r[C>>>8&255]^n[255&E]^A[++u],s=B,C=Q,E=c;t[0]=I[s>>>24]<<24^I[C>>>16&255]<<16^I[E>>>8&255]<<8^I[255&a]^A[++u],t[o?3:1]=I[C>>>24]<<24^I[E>>>16&255]<<16^I[a>>>8&255]<<8^I[255&s]^A[++u],t[2]=I[E>>>24]<<24^I[a>>>16&255]<<16^I[s>>>8&255]<<8^I[255&C]^A[++u],t[o?1:3]=I[a>>>24]<<24^I[s>>>16&255]<<16^I[C>>>8&255]<<8^I[255&E]^A[++u]}function _createCipher(A){var e,t=\"AES-\"+((A=A||{}).mode||\"CBC\").toUpperCase(),o=(e=A.decrypt?forge.cipher.createDecipher(t,A.key):forge.cipher.createCipher(t,A.key)).start;return e.start=function(A,t){var g=null;t instanceof forge.util.ByteBuffer&&(g=t,t={}),(t=t||{}).output=g,t.iv=A,o.call(e,t)},e}let RTMErrorCode=function(A){return A[A.RTM_ERROR_OK=0]=\"RTM_ERROR_OK\",A[A.RTM_ERROR_NOT_INITIALIZED=-10001]=\"RTM_ERROR_NOT_INITIALIZED\",A[A.RTM_ERROR_NOT_LOGIN=-10002]=\"RTM_ERROR_NOT_LOGIN\",A[A.RTM_ERROR_INVALID_APP_ID=-10003]=\"RTM_ERROR_INVALID_APP_ID\",A[A.RTM_ERROR_INVALID_EVENT_HANDLER=-10004]=\"RTM_ERROR_INVALID_EVENT_HANDLER\",A[A.RTM_ERROR_INVALID_TOKEN=-10005]=\"RTM_ERROR_INVALID_TOKEN\",A[A.RTM_ERROR_INVALID_USER_ID=-10006]=\"RTM_ERROR_INVALID_USER_ID\",A[A.RTM_ERROR_INIT_SERVICE_FAILED=-10007]=\"RTM_ERROR_INIT_SERVICE_FAILED\",A[A.RTM_ERROR_INVALID_CHANNEL_NAME=-10008]=\"RTM_ERROR_INVALID_CHANNEL_NAME\",A[A.RTM_ERROR_TOKEN_EXPIRED=-10009]=\"RTM_ERROR_TOKEN_EXPIRED\",A[A.RTM_ERROR_LOGIN_NO_SERVER_RESOURCES=-10010]=\"RTM_ERROR_LOGIN_NO_SERVER_RESOURCES\",A[A.RTM_ERROR_LOGIN_TIMEOUT=-10011]=\"RTM_ERROR_LOGIN_TIMEOUT\",A[A.RTM_ERROR_LOGIN_REJECTED=-10012]=\"RTM_ERROR_LOGIN_REJECTED\",A[A.RTM_ERROR_LOGIN_ABORTED=-10013]=\"RTM_ERROR_LOGIN_ABORTED\",A[A.RTM_ERROR_INVALID_PARAMETER=-10014]=\"RTM_ERROR_INVALID_PARAMETER\",A[A.RTM_ERROR_LOGIN_NOT_AUTHORIZED=-10015]=\"RTM_ERROR_LOGIN_NOT_AUTHORIZED\",A[A.RTM_ERROR_INCONSISTENT_APPID=-10016]=\"RTM_ERROR_INCONSISTENT_APPID\",A[A.RTM_ERROR_DUPLICATE_OPERATION=-10017]=\"RTM_ERROR_DUPLICATE_OPERATION\",A[A.RTM_ERROR_INSTANCE_ALREADY_RELEASED=-10018]=\"RTM_ERROR_INSTANCE_ALREADY_RELEASED\",A[A.RTM_ERROR_INVALID_CHANNEL_TYPE=-10019]=\"RTM_ERROR_INVALID_CHANNEL_TYPE\",A[A.RTM_ERROR_INVALID_ENCRYPTION_PARAMETER=-10020]=\"RTM_ERROR_INVALID_ENCRYPTION_PARAMETER\",A[A.RTM_ERROR_OPERATION_RATE_EXCEED_LIMITATION=-10021]=\"RTM_ERROR_OPERATION_RATE_EXCEED_LIMITATION\",A[A.RTM_ERROR_SERVICE_NOT_SUPPORTED=-10022]=\"RTM_ERROR_SERVICE_NOT_SUPPORTED\",A[A.RTM_ERROR_LOGIN_CANCELED=-10023]=\"RTM_ERROR_LOGIN_CANCELED\",A[A.RTM_ERROR_INVALID_PRIVATE_CONFIG=-10024]=\"RTM_ERROR_INVALID_PRIVATE_CONFIG\",A[A.RTM_ERROR_NOT_CONNECTED=-10025]=\"RTM_ERROR_NOT_CONNECTED\",A[A.RTM_ERROR_CHANNEL_NOT_JOINED=-11001]=\"RTM_ERROR_CHANNEL_NOT_JOINED\",A[A.RTM_ERROR_CHANNEL_NOT_SUBSCRIBED=-11002]=\"RTM_ERROR_CHANNEL_NOT_SUBSCRIBED\",A[A.RTM_ERROR_CHANNEL_EXCEED_TOPIC_USER_LIMITATION=-11003]=\"RTM_ERROR_CHANNEL_EXCEED_TOPIC_USER_LIMITATION\",A[A.RTM_ERROR_CHANNEL_IN_REUSE=-11004]=\"RTM_ERROR_CHANNEL_IN_REUSE\",A[A.RTM_ERROR_CHANNEL_INSTANCE_EXCEED_LIMITATION=-11005]=\"RTM_ERROR_CHANNEL_INSTANCE_EXCEED_LIMITATION\",A[A.RTM_ERROR_CHANNEL_IN_ERROR_STATE=-11006]=\"RTM_ERROR_CHANNEL_IN_ERROR_STATE\",A[A.RTM_ERROR_CHANNEL_JOIN_FAILED=-11007]=\"RTM_ERROR_CHANNEL_JOIN_FAILED\",A[A.RTM_ERROR_CHANNEL_INVALID_TOPIC_NAME=-11008]=\"RTM_ERROR_CHANNEL_INVALID_TOPIC_NAME\",A[A.RTM_ERROR_CHANNEL_INVALID_MESSAGE=-11009]=\"RTM_ERROR_CHANNEL_INVALID_MESSAGE\",A[A.RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION=-11010]=\"RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION\",A[A.RTM_ERROR_CHANNEL_INVALID_USER_LIST=-11011]=\"RTM_ERROR_CHANNEL_INVALID_USER_LIST\",A[A.RTM_ERROR_CHANNEL_NOT_AVAILABLE=-11012]=\"RTM_ERROR_CHANNEL_NOT_AVAILABLE\",A[A.RTM_ERROR_CHANNEL_TOPIC_NOT_SUBSCRIBED=-11013]=\"RTM_ERROR_CHANNEL_TOPIC_NOT_SUBSCRIBED\",A[A.RTM_ERROR_CHANNEL_EXCEED_TOPIC_LIMITATION=-11014]=\"RTM_ERROR_CHANNEL_EXCEED_TOPIC_LIMITATION\",A[A.RTM_ERROR_CHANNEL_JOIN_TOPIC_FAILED=-11015]=\"RTM_ERROR_CHANNEL_JOIN_TOPIC_FAILED\",A[A.RTM_ERROR_CHANNEL_TOPIC_NOT_JOINED=-11016]=\"RTM_ERROR_CHANNEL_TOPIC_NOT_JOINED\",A[A.RTM_ERROR_CHANNEL_TOPIC_NOT_EXIST=-11017]=\"RTM_ERROR_CHANNEL_TOPIC_NOT_EXIST\",A[A.RTM_ERROR_CHANNEL_INVALID_TOPIC_META=-11018]=\"RTM_ERROR_CHANNEL_INVALID_TOPIC_META\",A[A.RTM_ERROR_CHANNEL_SUBSCRIBE_TIMEOUT=-11019]=\"RTM_ERROR_CHANNEL_SUBSCRIBE_TIMEOUT\",A[A.RTM_ERROR_CHANNEL_SUBSCRIBE_TOO_FREQUENT=-11020]=\"RTM_ERROR_CHANNEL_SUBSCRIBE_TOO_FREQUENT\",A[A.RTM_ERROR_CHANNEL_SUBSCRIBE_FAILED=-11021]=\"RTM_ERROR_CHANNEL_SUBSCRIBE_FAILED\",A[A.RTM_ERROR_CHANNEL_UNSUBSCRIBE_FAILED=-11022]=\"RTM_ERROR_CHANNEL_UNSUBSCRIBE_FAILED\",A[A.RTM_ERROR_CHANNEL_ENCRYPT_MESSAGE_FAILED=-11023]=\"RTM_ERROR_CHANNEL_ENCRYPT_MESSAGE_FAILED\",A[A.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED=-11024]=\"RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED\",A[A.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TOO_FREQUENT=-11025]=\"RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TOO_FREQUENT\",A[A.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TIMEOUT=-11026]=\"RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TIMEOUT\",A[A.RTM_ERROR_CHANNEL_NOT_CONNECTED=-11027]=\"RTM_ERROR_CHANNEL_NOT_CONNECTED\",A[A.RTM_ERROR_CHANNEL_LEAVE_FAILED=-11028]=\"RTM_ERROR_CHANNEL_LEAVE_FAILED\",A[A.RTM_ERROR_CHANNEL_CUSTOM_TYPE_LENGTH_OVERFLOW=-11029]=\"RTM_ERROR_CHANNEL_CUSTOM_TYPE_LENGTH_OVERFLOW\",A[A.RTM_ERROR_CHANNEL_INVALID_CUSTOM_TYPE=-11030]=\"RTM_ERROR_CHANNEL_INVALID_CUSTOM_TYPE\",A[A.RTM_ERROR_CHANNEL_UNSUPPORTED_MESSAGE_TYPE=-11031]=\"RTM_ERROR_CHANNEL_UNSUPPORTED_MESSAGE_TYPE\",A[A.RTM_ERROR_CHANNEL_PRESENCE_NOT_READY=-11032]=\"RTM_ERROR_CHANNEL_PRESENCE_NOT_READY\",A[A.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE=-11033]=\"RTM_ERROR_CHANNEL_RECEIVER_OFFLINE\",A[A.RTM_ERROR_CHANNEL_JOIN_CANCELED=-11034]=\"RTM_ERROR_CHANNEL_JOIN_CANCELED\",A[A.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE_BUT_STORE_SUCCEEDED=-11035]=\"RTM_ERROR_CHANNEL_RECEIVER_OFFLINE_BUT_STORE_SUCCEEDED\",A[A.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE_AND_STORE_FAILED=-11036]=\"RTM_ERROR_CHANNEL_RECEIVER_OFFLINE_AND_STORE_FAILED\",A[A.RTM_ERROR_CHANNEL_MESSAGE_DELIVERED_BUT_STORE_FAILED=-11037]=\"RTM_ERROR_CHANNEL_MESSAGE_DELIVERED_BUT_STORE_FAILED\",A[A.RTM_ERROR_STORAGE_OPERATION_FAILED=-12001]=\"RTM_ERROR_STORAGE_OPERATION_FAILED\",A[A.RTM_ERROR_STORAGE_METADATA_ITEM_EXCEED_LIMITATION=-12002]=\"RTM_ERROR_STORAGE_METADATA_ITEM_EXCEED_LIMITATION\",A[A.RTM_ERROR_STORAGE_INVALID_METADATA_ITEM=-12003]=\"RTM_ERROR_STORAGE_INVALID_METADATA_ITEM\",A[A.RTM_ERROR_STORAGE_INVALID_ARGUMENT=-12004]=\"RTM_ERROR_STORAGE_INVALID_ARGUMENT\",A[A.RTM_ERROR_STORAGE_INVALID_REVISION=-12005]=\"RTM_ERROR_STORAGE_INVALID_REVISION\",A[A.RTM_ERROR_STORAGE_METADATA_LENGTH_OVERFLOW=-12006]=\"RTM_ERROR_STORAGE_METADATA_LENGTH_OVERFLOW\",A[A.RTM_ERROR_STORAGE_INVALID_LOCK_NAME=-12007]=\"RTM_ERROR_STORAGE_INVALID_LOCK_NAME\",A[A.RTM_ERROR_STORAGE_LOCK_NOT_ACQUIRED=-12008]=\"RTM_ERROR_STORAGE_LOCK_NOT_ACQUIRED\",A[A.RTM_ERROR_STORAGE_INVALID_KEY=-12009]=\"RTM_ERROR_STORAGE_INVALID_KEY\",A[A.RTM_ERROR_STORAGE_INVALID_VALUE=-12010]=\"RTM_ERROR_STORAGE_INVALID_VALUE\",A[A.RTM_ERROR_STORAGE_KEY_LENGTH_OVERFLOW=-12011]=\"RTM_ERROR_STORAGE_KEY_LENGTH_OVERFLOW\",A[A.RTM_ERROR_STORAGE_VALUE_LENGTH_OVERFLOW=-12012]=\"RTM_ERROR_STORAGE_VALUE_LENGTH_OVERFLOW\",A[A.RTM_ERROR_STORAGE_DUPLICATE_KEY=-12013]=\"RTM_ERROR_STORAGE_DUPLICATE_KEY\",A[A.RTM_ERROR_STORAGE_OUTDATED_REVISION=-12014]=\"RTM_ERROR_STORAGE_OUTDATED_REVISION\",A[A.RTM_ERROR_STORAGE_NOT_SUBSCRIBE=-12015]=\"RTM_ERROR_STORAGE_NOT_SUBSCRIBE\",A[A.RTM_ERROR_STORAGE_INVALID_METADATA_INSTANCE=-12016]=\"RTM_ERROR_STORAGE_INVALID_METADATA_INSTANCE\",A[A.RTM_ERROR_STORAGE_SUBSCRIBE_USER_EXCEED_LIMITATION=-12017]=\"RTM_ERROR_STORAGE_SUBSCRIBE_USER_EXCEED_LIMITATION\",A[A.RTM_ERROR_STORAGE_OPERATION_TIMEOUT=-12018]=\"RTM_ERROR_STORAGE_OPERATION_TIMEOUT\",A[A.RTM_ERROR_STORAGE_NOT_AVAILABLE=-12019]=\"RTM_ERROR_STORAGE_NOT_AVAILABLE\",A[A.RTM_ERROR_PRESENCE_NOT_CONNECTED=-13001]=\"RTM_ERROR_PRESENCE_NOT_CONNECTED\",A[A.RTM_ERROR_PRESENCE_NOT_WRITABLE=-13002]=\"RTM_ERROR_PRESENCE_NOT_WRITABLE\",A[A.RTM_ERROR_PRESENCE_INVALID_ARGUMENT=-13003]=\"RTM_ERROR_PRESENCE_INVALID_ARGUMENT\",A[A.RTM_ERROR_PRESENCE_CACHED_TOO_MANY_STATES=-13004]=\"RTM_ERROR_PRESENCE_CACHED_TOO_MANY_STATES\",A[A.RTM_ERROR_PRESENCE_STATE_COUNT_OVERFLOW=-13005]=\"RTM_ERROR_PRESENCE_STATE_COUNT_OVERFLOW\",A[A.RTM_ERROR_PRESENCE_INVALID_STATE_KEY=-13006]=\"RTM_ERROR_PRESENCE_INVALID_STATE_KEY\",A[A.RTM_ERROR_PRESENCE_INVALID_STATE_VALUE=-13007]=\"RTM_ERROR_PRESENCE_INVALID_STATE_VALUE\",A[A.RTM_ERROR_PRESENCE_STATE_KEY_SIZE_OVERFLOW=-13008]=\"RTM_ERROR_PRESENCE_STATE_KEY_SIZE_OVERFLOW\",A[A.RTM_ERROR_PRESENCE_STATE_VALUE_SIZE_OVERFLOW=-13009]=\"RTM_ERROR_PRESENCE_STATE_VALUE_SIZE_OVERFLOW\",A[A.RTM_ERROR_PRESENCE_STATE_DUPLICATE_KEY=-13010]=\"RTM_ERROR_PRESENCE_STATE_DUPLICATE_KEY\",A[A.RTM_ERROR_PRESENCE_USER_NOT_EXIST=-13011]=\"RTM_ERROR_PRESENCE_USER_NOT_EXIST\",A[A.RTM_ERROR_PRESENCE_OPERATION_TIMEOUT=-13012]=\"RTM_ERROR_PRESENCE_OPERATION_TIMEOUT\",A[A.RTM_ERROR_PRESENCE_OPERATION_FAILED=-13013]=\"RTM_ERROR_PRESENCE_OPERATION_FAILED\",A[A.RTM_ERROR_LOCK_OPERATION_FAILED=-14001]=\"RTM_ERROR_LOCK_OPERATION_FAILED\",A[A.RTM_ERROR_LOCK_OPERATION_TIMEOUT=-14002]=\"RTM_ERROR_LOCK_OPERATION_TIMEOUT\",A[A.RTM_ERROR_LOCK_OPERATION_PERFORMING=-14003]=\"RTM_ERROR_LOCK_OPERATION_PERFORMING\",A[A.RTM_ERROR_LOCK_ALREADY_EXIST=-14004]=\"RTM_ERROR_LOCK_ALREADY_EXIST\",A[A.RTM_ERROR_LOCK_INVALID_NAME=-14005]=\"RTM_ERROR_LOCK_INVALID_NAME\",A[A.RTM_ERROR_LOCK_NOT_ACQUIRED=-14006]=\"RTM_ERROR_LOCK_NOT_ACQUIRED\",A[A.RTM_ERROR_LOCK_ACQUIRE_FAILED=-14007]=\"RTM_ERROR_LOCK_ACQUIRE_FAILED\",A[A.RTM_ERROR_LOCK_NOT_EXIST=-14008]=\"RTM_ERROR_LOCK_NOT_EXIST\",A[A.RTM_ERROR_LOCK_NOT_AVAILABLE=-14009]=\"RTM_ERROR_LOCK_NOT_AVAILABLE\",A[A.RTM_ERROR_HISTORY_OPERATION_FAILED=-15001]=\"RTM_ERROR_HISTORY_OPERATION_FAILED\",A[A.RTM_ERROR_HISTORY_INVALID_TIMESTAMP=-15002]=\"RTM_ERROR_HISTORY_INVALID_TIMESTAMP\",A[A.RTM_ERROR_HISTORY_OPERATION_TIMEOUT=-15003]=\"RTM_ERROR_HISTORY_OPERATION_TIMEOUT\",A[A.RTM_ERROR_HISTORY_OPERATION_NOT_PERMITTED=-15004]=\"RTM_ERROR_HISTORY_OPERATION_NOT_PERMITTED\",A[A.RTM_ERROR_HISTORY_NOT_AVAILABLE=-15005]=\"RTM_ERROR_HISTORY_NOT_AVAILABLE\",A}({});const detailMsg4InvalidParam=\"illegal symbol or too long.\",RTMErrorDescription={[RTMErrorCode.RTM_ERROR_OK]:\"No error.\",[RTMErrorCode.RTM_ERROR_NOT_INITIALIZED]:\"Preform operation without initialize.\",[RTMErrorCode.RTM_ERROR_NOT_LOGIN]:\"Preform operation without login RTM service.\",[RTMErrorCode.RTM_ERROR_INVALID_APP_ID]:\"Invalid App id. \".concat(detailMsg4InvalidParam),[RTMErrorCode.RTM_ERROR_INVALID_EVENT_HANDLER]:\"Invalid event handler.\",[RTMErrorCode.RTM_ERROR_INVALID_TOKEN]:\"Invalid token.\",[RTMErrorCode.RTM_ERROR_INVALID_USER_ID]:\"Invalid user id. \".concat(detailMsg4InvalidParam),[RTMErrorCode.RTM_ERROR_INIT_SERVICE_FAILED]:\"Initialize agora service failed.\",[RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME]:\"Invalid channel name. \".concat(detailMsg4InvalidParam),[RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED]:\"Token is expired.\",[RTMErrorCode.RTM_ERROR_LOGIN_NO_SERVER_RESOURCES]:\"No server resources.\",[RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT]:\"Login RTM service timeout.\",[RTMErrorCode.RTM_ERROR_LOGIN_REJECTED]:\"Login RTM service was rejected due to server error.\",[RTMErrorCode.RTM_ERROR_LOGIN_ABORTED]:\"Login RTM service was aborted due to unrecoverable error.\",[RTMErrorCode.RTM_ERROR_INVALID_PARAMETER]:\"Invalid parameter.\",[RTMErrorCode.RTM_ERROR_LOGIN_NOT_AUTHORIZED]:\"The login operation is not authorized, should grant from console.\",[RTMErrorCode.RTM_ERROR_INCONSISTENT_APPID]:\"The appid is not consistent.\",[RTMErrorCode.RTM_ERROR_DUPLICATE_OPERATION]:\"Same subscribe, join or login request\",[RTMErrorCode.RTM_ERROR_INSTANCE_ALREADY_RELEASED]:\"Instance already released or destroyed, need to create new one\",[RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_TYPE]:\"Invalid channel type, some api not support set channel type as user.\",[RTMErrorCode.RTM_ERROR_INVALID_ENCRYPTION_PARAMETER]:\"Invalid encryption parameter.\",[RTMErrorCode.RTM_ERROR_OPERATION_RATE_EXCEED_LIMITATION]:\"The operation rate exceeds limitation.\",[RTMErrorCode.RTM_ERROR_SERVICE_NOT_SUPPORTED]:\"Service doesn't support.\",[RTMErrorCode.RTM_ERROR_LOGIN_CANCELED]:\"Login RTM service was canceled by user.\",[RTMErrorCode.RTM_ERROR_INVALID_PRIVATE_CONFIG]:\"Set private config should both set serviceType and accessPointHosts.\",[RTMErrorCode.RTM_ERROR_NOT_CONNECTED]:\"Perform operation failed due to RTM service is not connected\",[RTMErrorCode.RTM_ERROR_CHANNEL_NOT_JOINED]:\"Perform operation without join stream channel.\",[RTMErrorCode.RTM_ERROR_CHANNEL_NOT_SUBSCRIBED]:\"Perform operation without subscribe message channel.\",[RTMErrorCode.RTM_ERROR_CHANNEL_EXCEED_TOPIC_USER_LIMITATION]:\"Subscribe failed due to exceed topic user limitation in stream channel.\",[RTMErrorCode.RTM_ERROR_CHANNEL_IN_REUSE]:\"Release a stream channel which was reused in RTC channel.\",[RTMErrorCode.RTM_ERROR_CHANNEL_INSTANCE_EXCEED_LIMITATION]:\"Join or subscribe too many channels and have reach limitation.\",[RTMErrorCode.RTM_ERROR_CHANNEL_IN_ERROR_STATE]:\"Perform channel operation failed since channel state is incorrect.\",[RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED]:\"Join stream channel failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_TOPIC_NAME]:\"Perform topic operation with invalid name.\".concat(detailMsg4InvalidParam),[RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_MESSAGE]:\"Publish invalid message.\",[RTMErrorCode.RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION]:\"Publish too long message.\",[RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_USER_LIST]:\"Perform topic operation with invalid user list.\",[RTMErrorCode.RTM_ERROR_CHANNEL_NOT_AVAILABLE]:\"Stream channel not available for this app id.\",[RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_SUBSCRIBED]:\"Perform topic operation without subscribe.\",[RTMErrorCode.RTM_ERROR_CHANNEL_EXCEED_TOPIC_LIMITATION]:\"Have subscribe or joined too many topics.\",[RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_TOPIC_FAILED]:\"Join topic failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_JOINED]:\"Perform topic operation without join.\",[RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_EXIST]:\"Topic does not exist.\",[RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_TOPIC_META]:\"Topic meta is invalid.\",[RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_TIMEOUT]:\"Subscribe message channel timeout.\",[RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_TOO_FREQUENT]:\"Subscribe message channel too frequently.\",[RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_FAILED]:\"Subscribe message channel failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_UNSUBSCRIBE_FAILED]:\"Unsubscribe message channel failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_ENCRYPT_MESSAGE_FAILED]:\"Encrypt message failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED]:\"Publish message failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TOO_FREQUENT]:\"Publish message too frequently.\",[RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TIMEOUT]:\"Publish message timeout.\",[RTMErrorCode.RTM_ERROR_CHANNEL_NOT_CONNECTED]:\"Perform operation failed due to connection closed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_LEAVE_FAILED]:\"Leave channel failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_CUSTOM_TYPE_LENGTH_OVERFLOW]:\"The length of custom type overflow.\",[RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_CUSTOM_TYPE]:\"Send message with invalid custom type.\",[RTMErrorCode.RTM_ERROR_CHANNEL_UNSUPPORTED_MESSAGE_TYPE]:\"Send message with unsupported message type.\",[RTMErrorCode.RTM_ERROR_CHANNEL_PRESENCE_NOT_READY]:\"Join or subscribe channel failed due to presence service not ready.\",[RTMErrorCode.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE]:\"Publish a message to user now is offline.\",[RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_CANCELED]:\"Join channel operation was canceled.\",[RTMErrorCode.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE_BUT_STORE_SUCCEEDED]:\"Message receiver is offline but store in history succeeded.\",[RTMErrorCode.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE_AND_STORE_FAILED]:\"Message receiver is offline and store in history failed.\",[RTMErrorCode.RTM_ERROR_CHANNEL_MESSAGE_DELIVERED_BUT_STORE_FAILED]:\"Message delivered successfully but store in history failed.\",[RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_FAILED]:\"Storage operation failed.\",[RTMErrorCode.RTM_ERROR_STORAGE_METADATA_ITEM_EXCEED_LIMITATION]:\"Metadata item size exceeds limitation.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_METADATA_ITEM]:\"Metadata item is invalid.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_ARGUMENT]:\"Server reject operation due to invalid argument.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION]:\"Metadata item with invalid revision.\",[RTMErrorCode.RTM_ERROR_STORAGE_METADATA_LENGTH_OVERFLOW]:\"The length of metadata items overflow.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_LOCK_NAME]:\"Storage operation with invalid lock name. \".concat(detailMsg4InvalidParam),[RTMErrorCode.RTM_ERROR_STORAGE_LOCK_NOT_ACQUIRED]:\"Storage operation with lock not acquired.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_KEY]:\"Storage operation with invalid key.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_VALUE]:\"Storage operation with invalid value.\",[RTMErrorCode.RTM_ERROR_STORAGE_KEY_LENGTH_OVERFLOW]:\"Storage operation with key length overflow.\",[RTMErrorCode.RTM_ERROR_STORAGE_VALUE_LENGTH_OVERFLOW]:\"Storage operation with value length overflow.\",[RTMErrorCode.RTM_ERROR_STORAGE_DUPLICATE_KEY]:\"Storage operation with duplicate key.\",[RTMErrorCode.RTM_ERROR_STORAGE_OUTDATED_REVISION]:\"Storage operation with outdated revision or the key does not exist.\",[RTMErrorCode.RTM_ERROR_STORAGE_NOT_SUBSCRIBE]:\"Storage operation without subscribe.\",[RTMErrorCode.RTM_ERROR_STORAGE_INVALID_METADATA_INSTANCE]:\"Metadata instance is invalid.\",[RTMErrorCode.RTM_ERROR_STORAGE_SUBSCRIBE_USER_EXCEED_LIMITATION]:\"Subscribe user metadata exceeds limitation.\",[RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT]:\"Storage operation timeout.\",[RTMErrorCode.RTM_ERROR_STORAGE_NOT_AVAILABLE]:\"Storage service is not available.\",[RTMErrorCode.RTM_ERROR_PRESENCE_NOT_CONNECTED]:\"Presence service not connected.\",[RTMErrorCode.RTM_ERROR_PRESENCE_NOT_WRITABLE]:\"Operation failed since presence document is not writable, try later.\",[RTMErrorCode.RTM_ERROR_PRESENCE_INVALID_ARGUMENT]:\"Presence operation failed due to invalid argument.\",[RTMErrorCode.RTM_ERROR_PRESENCE_CACHED_TOO_MANY_STATES]:\"Exceed presence cache limitation.\",[RTMErrorCode.RTM_ERROR_PRESENCE_STATE_COUNT_OVERFLOW]:\"Exceed presence state count limitation.\",[RTMErrorCode.RTM_ERROR_PRESENCE_INVALID_STATE_KEY]:\"Invalid presence state key.\",[RTMErrorCode.RTM_ERROR_PRESENCE_INVALID_STATE_VALUE]:\"Invalid presence state value.\",[RTMErrorCode.RTM_ERROR_PRESENCE_STATE_KEY_SIZE_OVERFLOW]:\"Presence state key length is too long.\",[RTMErrorCode.RTM_ERROR_PRESENCE_STATE_VALUE_SIZE_OVERFLOW]:\"Presence state value length is too long.\",[RTMErrorCode.RTM_ERROR_PRESENCE_STATE_DUPLICATE_KEY]:\"Presence operation failed since including duplicate key.\",[RTMErrorCode.RTM_ERROR_PRESENCE_USER_NOT_EXIST]:\"Presence operation failed due to inexistent user.\",[RTMErrorCode.RTM_ERROR_PRESENCE_OPERATION_TIMEOUT]:\"Presence operation timeout.\",[RTMErrorCode.RTM_ERROR_PRESENCE_OPERATION_FAILED]:\"Presence operation failed.\",[RTMErrorCode.RTM_ERROR_LOCK_OPERATION_FAILED]:\"Lock operation failed.\",[RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT]:\"Lock operation timeout.\",[RTMErrorCode.RTM_ERROR_LOCK_OPERATION_PERFORMING]:\"Lock operation is performing, try later.\",[RTMErrorCode.RTM_ERROR_LOCK_ALREADY_EXIST]:\"Lock already exist.\",[RTMErrorCode.RTM_ERROR_LOCK_INVALID_NAME]:\"Lock operation with invalid name. \".concat(detailMsg4InvalidParam),[RTMErrorCode.RTM_ERROR_LOCK_NOT_ACQUIRED]:\"Lock not acquired.\",[RTMErrorCode.RTM_ERROR_LOCK_ACQUIRE_FAILED]:\"Lock acquire failed.\",[RTMErrorCode.RTM_ERROR_LOCK_NOT_EXIST]:\"Lock not exist.\",[RTMErrorCode.RTM_ERROR_LOCK_NOT_AVAILABLE]:\"Lock service is not available.\",[RTMErrorCode.RTM_ERROR_HISTORY_INVALID_TIMESTAMP]:\"Invalid start or end timestamp.\",[RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_FAILED]:\"History operation failed.\",[RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_TIMEOUT]:\"History operation timeout.\",[RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_NOT_PERMITTED]:\"History operation is not permitted.\",[RTMErrorCode.RTM_ERROR_HISTORY_NOT_AVAILABLE]:\"History service is not available.\"};var UZIP={},u16,u32; true&&(module.exports=UZIP),UZIP.parse=function(A,e){for(var t=UZIP.bin.readUshort,o=UZIP.bin.readUint,g=0,i={},r=new Uint8Array(A),n=r.length-4;101010256!=o(r,n);)n--;g=n;g+=4;var I=t(r,g+=4);t(r,g+=2);var s=o(r,g+=2),C=o(r,g+=4);g+=4,g=C;for(var E=0;E<I;E++){o(r,g),g+=4,g+=4,g+=4,o(r,g+=4);s=o(r,g+=4);var a=o(r,g+=4),B=t(r,g+=4),Q=t(r,g+2),c=t(r,g+4);g+=6;var l=o(r,g+=8);g+=4,g+=B+Q+c,UZIP._readLocal(r,l,i,s,a,e)}return i},UZIP._readLocal=function(A,e,t,o,g,i){var r=UZIP.bin.readUshort,n=UZIP.bin.readUint;n(A,e),r(A,e+=4),r(A,e+=2);var I=r(A,e+=2);n(A,e+=2),n(A,e+=4),e+=4;var s=r(A,e+=8),C=r(A,e+=2);e+=2;var E=UZIP.bin.readUTF8(A,e,s);if(e+=s,e+=C,i)t[E]={size:g,csize:o};else{var a=new Uint8Array(A.buffer,e);if(0==I)t[E]=new Uint8Array(a.buffer.slice(e,e+o));else{if(8!=I)throw\"unknown compression method: \"+I;var B=new Uint8Array(g);UZIP.inflateRaw(a,B),t[E]=B}}},UZIP.inflateRaw=function(A,e){return UZIP.F.inflate(A,e)},UZIP.inflate=function(A,e){return A[0],A[1],UZIP.inflateRaw(new Uint8Array(A.buffer,A.byteOffset+2,A.length-2),e)},UZIP.deflate=function(A,e){null==e&&(e={level:6});var t=0,o=new Uint8Array(50+Math.floor(1.1*A.length));o[t]=120,o[t+1]=156,t+=2,t=UZIP.F.deflateRaw(A,o,t,e.level);var g=UZIP.adler(A,0,A.length);return o[t+0]=g>>>24&255,o[t+1]=g>>>16&255,o[t+2]=g>>>8&255,o[t+3]=g>>>0&255,new Uint8Array(o.buffer,0,t+4)},UZIP.deflateRaw=function(A,e){null==e&&(e={level:6});var t=new Uint8Array(50+Math.floor(1.1*A.length)),o=UZIP.F.deflateRaw(A,t,o,e.level);return new Uint8Array(t.buffer,0,o)},UZIP.encode=function(A,e){null==e&&(e=!1);var t=0,o=UZIP.bin.writeUint,g=UZIP.bin.writeUshort,i={};for(var r in A){var n=!UZIP._noNeed(r)&&!e,I=A[r],s=UZIP.crc.crc(I,0,I.length);i[r]={cpr:n,usize:I.length,crc:s,file:n?UZIP.deflateRaw(I):I}}for(var r in i)t+=i[r].file.length+30+46+2*UZIP.bin.sizeUTF8(r);t+=22;var C=new Uint8Array(t),E=0,a=[];for(var r in i){var B=i[r];a.push(E),E=UZIP._writeHeader(C,E,r,B,0)}var Q=0,c=E;for(var r in i){B=i[r];a.push(E),E=UZIP._writeHeader(C,E,r,B,1,a[Q++])}var l=E-c;return o(C,E,101010256),E+=4,g(C,E+=4,Q),g(C,E+=2,Q),o(C,E+=2,l),o(C,E+=4,c),E+=4,E+=2,C.buffer},UZIP._noNeed=function(A){var e=A.split(\".\").pop().toLowerCase();return-1!=\"png,jpg,jpeg,zip\".indexOf(e)},UZIP._writeHeader=function(A,e,t,o,g,i){var r=UZIP.bin.writeUint,n=UZIP.bin.writeUshort,I=o.file;return r(A,e,0==g?67324752:33639248),e+=4,1==g&&(e+=2),n(A,e,20),n(A,e+=2,0),n(A,e+=2,o.cpr?8:0),r(A,e+=2,0),r(A,e+=4,o.crc),r(A,e+=4,I.length),r(A,e+=4,o.usize),n(A,e+=4,UZIP.bin.sizeUTF8(t)),n(A,e+=2,0),e+=2,1==g&&(e+=2,e+=2,r(A,e+=6,i),e+=4),e+=UZIP.bin.writeUTF8(A,e,t),0==g&&(A.set(I,e),e+=I.length),e},UZIP.crc={table:function(){for(var A=new Uint32Array(256),e=0;e<256;e++){for(var t=e,o=0;o<8;o++)1&t?t=3988292384^t>>>1:t>>>=1;A[e]=t}return A}(),update:function(A,e,t,o){for(var g=0;g<o;g++)A=UZIP.crc.table[255&(A^e[t+g])]^A>>>8;return A},crc:function(A,e,t){return 4294967295^UZIP.crc.update(4294967295,A,e,t)}},UZIP.adler=function(A,e,t){for(var o=1,g=0,i=e,r=e+t;i<r;){for(var n=Math.min(i+5552,r);i<n;)g+=o+=A[i++];o%=65521,g%=65521}return g<<16|o},UZIP.bin={readUshort:function(A,e){return A[e]|A[e+1]<<8},writeUshort:function(A,e,t){A[e]=255&t,A[e+1]=t>>8&255},readUint:function(A,e){return 16777216*A[e+3]+(A[e+2]<<16|A[e+1]<<8|A[e])},writeUint:function(A,e,t){A[e]=255&t,A[e+1]=t>>8&255,A[e+2]=t>>16&255,A[e+3]=t>>24&255},readASCII:function(A,e,t){for(var o=\"\",g=0;g<t;g++)o+=String.fromCharCode(A[e+g]);return o},writeASCII:function(A,e,t){for(var o=0;o<t.length;o++)A[e+o]=t.charCodeAt(o)},pad:function(A){return A.length<2?\"0\"+A:A},readUTF8:function(A,e,t){for(var o,g=\"\",i=0;i<t;i++)g+=\"%\"+UZIP.bin.pad(A[e+i].toString(16));try{o=decodeURIComponent(g)}catch(o){return UZIP.bin.readASCII(A,e,t)}return o},writeUTF8:function(A,e,t){for(var o=t.length,g=0,i=0;i<o;i++){var r=t.charCodeAt(i);if(4294967168&r)if(4294965248&r)if(4294901760&r){if(4292870144&r)throw\"e\";A[e+g]=240|r>>18,A[e+g+1]=128|r>>12&63,A[e+g+2]=128|r>>6&63,A[e+g+3]=128|63&r,g+=4}else A[e+g]=224|r>>12,A[e+g+1]=128|r>>6&63,A[e+g+2]=128|63&r,g+=3;else A[e+g]=192|r>>6,A[e+g+1]=128|63&r,g+=2;else A[e+g]=r,g++}return g},sizeUTF8:function(A){for(var e=A.length,t=0,o=0;o<e;o++){var g=A.charCodeAt(o);if(4294967168&g)if(4294965248&g)if(4294901760&g){if(4292870144&g)throw\"e\";t+=4}else t+=3;else t+=2;else t++}return t}},UZIP.F={},UZIP.F.deflateRaw=function(A,e,t,o){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],i=UZIP.F.U,r=UZIP.F._goodIndex;UZIP.F._hash;var n=UZIP.F._putsE,I=0,s=t<<3,C=0,E=A.length;if(0==o){for(;I<E;){n(e,s,I+(R=Math.min(65535,E-I))==E?1:0),s=UZIP.F._copyExact(A,I,R,e,s+8),I+=R}return s>>>3}var a=i.lits,B=i.strt,Q=i.prev,c=0,l=0,u=0,h=0,d=0,p=0;for(E>2&&(B[p=UZIP.F._hash(A,0)]=0),I=0;I<E;I++){if(d=p,I+1<E-2){p=UZIP.F._hash(A,I+1);var y=I+1&32767;Q[y]=B[p],B[p]=y}if(C<=I){(c>14e3||l>26697)&&E-I>100&&(C<I&&(a[c]=I-C,c+=2,C=I),s=UZIP.F._writeBlock(I==E-1||C==E?1:0,a,c,h,A,u,I-u,e,s),c=l=h=0,u=I);var D=0;I<E-2&&(D=UZIP.F._bestMatch(A,I,Q,d,Math.min(g[2],E-I),g[3]));var R=D>>>16,w=65535&D;if(0!=D){w=65535&D;var f=r(R=D>>>16,i.of0);i.lhst[257+f]++;var S=r(w,i.df0);i.dhst[S]++,h+=i.exb[f]+i.dxb[S],a[c]=R<<23|I-C,a[c+1]=w<<16|f<<8|S,c+=2,C=I+R}else i.lhst[A[I]]++;l++}}for(u==I&&0!=A.length||(C<I&&(a[c]=I-C,c+=2,C=I),s=UZIP.F._writeBlock(1,a,c,h,A,u,I-u,e,s),c=0,l=0,c=l=h=0,u=I);7&s;)s++;return s>>>3},UZIP.F._bestMatch=function(A,e,t,o,g,i){var r=32767&e,n=t[r],I=r-n+32768&32767;if(n==r||o!=UZIP.F._hash(A,e-I))return 0;for(var s=0,C=0,E=Math.min(32767,e);I<=E&&0!=--i&&n!=r;){if(0==s||A[e+s]==A[e+s-I]){var a=UZIP.F._howLong(A,e,I);if(a>s){if(C=I,(s=a)>=g)break;I+2<a&&(a=I+2);for(var B=0,Q=0;Q<a-2;Q++){var c=e-I+Q+32768&32767,l=c-t[c]+32768&32767;l>B&&(B=l,n=c)}}}I+=(r=n)-(n=t[r])+32768&32767}return s<<16|C},UZIP.F._howLong=function(A,e,t){if(A[e]!=A[e-t]||A[e+1]!=A[e+1-t]||A[e+2]!=A[e+2-t])return 0;var o=e,g=Math.min(A.length,e+258);for(e+=3;e<g&&A[e]==A[e-t];)e++;return e-o},UZIP.F._hash=function(A,e){return(A[e]<<8|A[e+1])+(A[e+2]<<4)&65535},UZIP.saved=0,UZIP.F._writeBlock=function(A,e,t,o,g,i,r,n,I){var s,C,E,a,B,Q,c,l,u,h=UZIP.F.U,d=UZIP.F._putsF,p=UZIP.F._putsE;h.lhst[256]++,C=(s=UZIP.F.getTrees())[0],E=s[1],a=s[2],B=s[3],Q=s[4],c=s[5],l=s[6],u=s[7];var y=32+(I+3&7?8-(I+3&7):0)+(r<<3),D=o+UZIP.F.contSize(h.fltree,h.lhst)+UZIP.F.contSize(h.fdtree,h.dhst),R=o+UZIP.F.contSize(h.ltree,h.lhst)+UZIP.F.contSize(h.dtree,h.dhst);R+=14+3*c+UZIP.F.contSize(h.itree,h.ihst)+(2*h.ihst[16]+3*h.ihst[17]+7*h.ihst[18]);for(var w=0;w<286;w++)h.lhst[w]=0;for(w=0;w<30;w++)h.dhst[w]=0;for(w=0;w<19;w++)h.ihst[w]=0;var f=y<D&&y<R?0:D<R?1:2;if(d(n,I,A),d(n,I+1,f),I+=3,0==f){for(;7&I;)I++;I=UZIP.F._copyExact(g,i,r,n,I)}else{var S,N;if(1==f&&(S=h.fltree,N=h.fdtree),2==f){UZIP.F.makeCodes(h.ltree,C),UZIP.F.revCodes(h.ltree,C),UZIP.F.makeCodes(h.dtree,E),UZIP.F.revCodes(h.dtree,E),UZIP.F.makeCodes(h.itree,a),UZIP.F.revCodes(h.itree,a),S=h.ltree,N=h.dtree,p(n,I,B-257),p(n,I+=5,Q-1),p(n,I+=5,c-4),I+=4;for(var M=0;M<c;M++)p(n,I+3*M,h.itree[1+(h.ordr[M]<<1)]);I+=3*c,I=UZIP.F._codeTiny(l,h.itree,n,I),I=UZIP.F._codeTiny(u,h.itree,n,I)}for(var _=i,k=0;k<t;k+=2){for(var L=e[k],G=L>>>23,m=_+(8388607&L);_<m;)I=UZIP.F._writeLit(g[_++],S,n,I);if(0!=G){var b=e[k+1],U=b>>16,v=b>>8&255,O=255&b;p(n,I=UZIP.F._writeLit(257+v,S,n,I),G-h.of0[v]),I+=h.exb[v],d(n,I=UZIP.F._writeLit(O,N,n,I),U-h.df0[O]),I+=h.dxb[O],_+=G}}I=UZIP.F._writeLit(256,S,n,I)}return I},UZIP.F._copyExact=function(A,e,t,o,g){var i=g>>>3;return o[i]=t,o[i+1]=t>>>8,o[i+2]=255-o[i],o[i+3]=255-o[i+1],i+=4,o.set(new Uint8Array(A.buffer,e,t),i),g+(t+4<<3)},UZIP.F.getTrees=function(){for(var A=UZIP.F.U,e=UZIP.F._hufTree(A.lhst,A.ltree,15),t=UZIP.F._hufTree(A.dhst,A.dtree,15),o=[],g=UZIP.F._lenCodes(A.ltree,o),i=[],r=UZIP.F._lenCodes(A.dtree,i),n=0;n<o.length;n+=2)A.ihst[o[n]]++;for(n=0;n<i.length;n+=2)A.ihst[i[n]]++;for(var I=UZIP.F._hufTree(A.ihst,A.itree,7),s=19;s>4&&0==A.itree[1+(A.ordr[s-1]<<1)];)s--;return[e,t,I,g,r,s,o,i]},UZIP.F.getSecond=function(A){for(var e=[],t=0;t<A.length;t+=2)e.push(A[t+1]);return e},UZIP.F.nonZero=function(A){for(var e=\"\",t=0;t<A.length;t+=2)0!=A[t+1]&&(e+=(t>>1)+\",\");return e},UZIP.F.contSize=function(A,e){for(var t=0,o=0;o<e.length;o++)t+=e[o]*A[1+(o<<1)];return t},UZIP.F._codeTiny=function(A,e,t,o){for(var g=0;g<A.length;g+=2){var i=A[g],r=A[g+1];o=UZIP.F._writeLit(i,e,t,o);var n=16==i?2:17==i?3:7;i>15&&(UZIP.F._putsE(t,o,r,n),o+=n)}return o},UZIP.F._lenCodes=function(A,e){for(var t=A.length;2!=t&&0==A[t-1];)t-=2;for(var o=0;o<t;o+=2){var g=A[o+1],i=o+3<t?A[o+3]:-1,r=o+5<t?A[o+5]:-1,n=0==o?-1:A[o-1];if(0==g&&i==g&&r==g){for(var I=o+5;I+2<t&&A[I+2]==g;)I+=2;(s=Math.min(I+1-o>>>1,138))<11?e.push(17,s-3):e.push(18,s-11),o+=2*s-2}else if(g==n&&i==g&&r==g){for(I=o+5;I+2<t&&A[I+2]==g;)I+=2;var s=Math.min(I+1-o>>>1,6);e.push(16,s-3),o+=2*s-2}else e.push(g,0)}return t>>>1},UZIP.F._hufTree=function(A,e,t){var o=[],g=A.length,i=e.length,r=0;for(r=0;r<i;r+=2)e[r]=0,e[r+1]=0;for(r=0;r<g;r++)0!=A[r]&&o.push({lit:r,f:A[r]});var n=o.length,I=o.slice(0);if(0==n)return 0;if(1==n){var s=o[0].lit;I=0==s?1:0;return e[1+(s<<1)]=1,e[1+(I<<1)]=1,1}o.sort((function(A,e){return A.f-e.f}));var C=o[0],E=o[1],a=0,B=1,Q=2;for(o[0]={lit:-1,f:C.f+E.f,l:C,r:E,d:0};B!=n-1;)C=a!=B&&(Q==n||o[a].f<o[Q].f)?o[a++]:o[Q++],E=a!=B&&(Q==n||o[a].f<o[Q].f)?o[a++]:o[Q++],o[B++]={lit:-1,f:C.f+E.f,l:C,r:E};var c=UZIP.F.setDepth(o[B-1],0);for(c>t&&(UZIP.F.restrictDepth(I,t,c),c=t),r=0;r<n;r++)e[1+(I[r].lit<<1)]=I[r].d;return c},UZIP.F.setDepth=function(A,e){return-1!=A.lit?(A.d=e,e):Math.max(UZIP.F.setDepth(A.l,e+1),UZIP.F.setDepth(A.r,e+1))},UZIP.F.restrictDepth=function(A,e,t){var o=0,g=1<<t-e,i=0;for(A.sort((function(A,e){return e.d==A.d?A.f-e.f:e.d-A.d})),o=0;o<A.length&&A[o].d>e;o++){var r=A[o].d;A[o].d=e,i+=g-(1<<t-r)}for(i>>>=t-e;i>0;){(r=A[o].d)<e?(A[o].d++,i-=1<<e-r-1):o++}for(;o>=0;o--)A[o].d==e&&i<0&&(A[o].d--,i++);0!=i&&console.log(\"debt left\")},UZIP.F._goodIndex=function(A,e){var t=0;return e[16|t]<=A&&(t|=16),e[8|t]<=A&&(t|=8),e[4|t]<=A&&(t|=4),e[2|t]<=A&&(t|=2),e[1|t]<=A&&(t|=1),t},UZIP.F._writeLit=function(A,e,t,o){return UZIP.F._putsF(t,o,e[A<<1]),o+e[1+(A<<1)]},UZIP.F.inflate=function(A,e){var t=Uint8Array;if(3==A[0]&&0==A[1])return e||new t(0);var o=UZIP.F,g=o._bitsF,i=o._bitsE,r=o._decodeTiny,n=o.makeCodes,I=o.codes2map,s=o._get17,C=o.U,E=null==e;E&&(e=new t(A.length>>>2<<3));for(var a,B,Q=0,c=0,l=0,u=0,h=0,d=0,p=0,y=0,D=0;0==Q;)if(Q=g(A,D,1),c=g(A,D+1,2),D+=3,0!=c){if(E&&(e=UZIP.F._check(e,y+(1<<17))),1==c&&(a=C.flmap,B=C.fdmap,d=511,p=31),2==c){l=i(A,D,5)+257,u=i(A,D+5,5)+1,h=i(A,D+10,4)+4,D+=14;for(var R=0;R<38;R+=2)C.itree[R]=0,C.itree[R+1]=0;var w=1;for(R=0;R<h;R++){var f=i(A,D+3*R,3);C.itree[1+(C.ordr[R]<<1)]=f,f>w&&(w=f)}D+=3*h,n(C.itree,w),I(C.itree,w,C.imap),a=C.lmap,B=C.dmap,D=r(C.imap,(1<<w)-1,l+u,A,D,C.ttree);var S=o._copyOut(C.ttree,0,l,C.ltree);d=(1<<S)-1;var N=o._copyOut(C.ttree,l,u,C.dtree);p=(1<<N)-1,n(C.ltree,S),I(C.ltree,S,a),n(C.dtree,N),I(C.dtree,N,B)}for(;;){var M=a[s(A,D)&d];D+=15&M;var _=M>>>4;if(_>>>8==0)e[y++]=_;else{if(256==_)break;var k=y+_-254;if(_>264){var L=C.ldef[_-257];k=y+(L>>>3)+i(A,D,7&L),D+=7&L}var G=B[s(A,D)&p];D+=15&G;var m=G>>>4,b=C.ddef[m],U=(b>>>4)+g(A,D,15&b);for(D+=15&b,E&&(e=UZIP.F._check(e,y+(1<<17)));y<k;)e[y]=e[y++-U],e[y]=e[y++-U],e[y]=e[y++-U],e[y]=e[y++-U];y=k}}}else{7&D&&(D+=8-(7&D));var v=4+(D>>>3),O=A[v-4]|A[v-3]<<8;E&&(e=UZIP.F._check(e,y+O)),e.set(new t(A.buffer,A.byteOffset+v,O),y),D=v+O<<3,y+=O}return e.length==y?e:e.slice(0,y)},UZIP.F._check=function(A,e){var t=A.length;if(e<=t)return A;var o=new Uint8Array(Math.max(t<<1,e));return o.set(A,0),o},UZIP.F._decodeTiny=function(A,e,t,o,g,i){for(var r=UZIP.F._bitsE,n=UZIP.F._get17,I=0;I<t;){var s=A[n(o,g)&e];g+=15&s;var C=s>>>4;if(C<=15)i[I]=C,I++;else{var E=0,a=0;16==C?(a=3+r(o,g,2),g+=2,E=i[I-1]):17==C?(a=3+r(o,g,3),g+=3):18==C&&(a=11+r(o,g,7),g+=7);for(var B=I+a;I<B;)i[I]=E,I++}}return g},UZIP.F._copyOut=function(A,e,t,o){for(var g=0,i=0,r=o.length>>>1;i<t;){var n=A[i+e];o[i<<1]=0,o[1+(i<<1)]=n,n>g&&(g=n),i++}for(;i<r;)o[i<<1]=0,o[1+(i<<1)]=0,i++;return g},UZIP.F.makeCodes=function(A,e){for(var t,o,g,i,r=UZIP.F.U,n=A.length,I=r.bl_count,s=0;s<=e;s++)I[s]=0;for(s=1;s<n;s+=2)I[A[s]]++;var C=r.next_code;for(t=0,I[0]=0,o=1;o<=e;o++)t=t+I[o-1]<<1,C[o]=t;for(g=0;g<n;g+=2)0!=(i=A[g+1])&&(A[g]=C[i],C[i]++)},UZIP.F.codes2map=function(A,e,t){for(var o=A.length,g=UZIP.F.U.rev15,i=0;i<o;i+=2)if(0!=A[i+1])for(var r=i>>1,n=A[i+1],I=r<<4|n,s=e-n,C=A[i]<<s,E=C+(1<<s);C!=E;){t[g[C]>>>15-e]=I,C++}},UZIP.F.revCodes=function(A,e){for(var t=UZIP.F.U.rev15,o=15-e,g=0;g<A.length;g+=2){var i=A[g]<<e-A[g+1];A[g]=t[i]>>>o}},UZIP.F._putsE=function(A,e,t){t<<=7&e;var o=e>>>3;A[o]|=t,A[o+1]|=t>>>8},UZIP.F._putsF=function(A,e,t){t<<=7&e;var o=e>>>3;A[o]|=t,A[o+1]|=t>>>8,A[o+2]|=t>>>16},UZIP.F._bitsE=function(A,e,t){return(A[e>>>3]|A[1+(e>>>3)]<<8)>>>(7&e)&(1<<t)-1},UZIP.F._bitsF=function(A,e,t){return(A[e>>>3]|A[1+(e>>>3)]<<8|A[2+(e>>>3)]<<16)>>>(7&e)&(1<<t)-1},UZIP.F._get17=function(A,e){return(A[e>>>3]|A[1+(e>>>3)]<<8|A[2+(e>>>3)]<<16)>>>(7&e)},UZIP.F._get25=function(A,e){return(A[e>>>3]|A[1+(e>>>3)]<<8|A[2+(e>>>3)]<<16|A[3+(e>>>3)]<<24)>>>(7&e)},UZIP.F.U=(u16=Uint16Array,u32=Uint32Array,{next_code:new u16(16),bl_count:new u16(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new u16(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new u32(32),flmap:new u16(512),fltree:[],fdmap:new u16(32),fdtree:[],lmap:new u16(32768),ltree:[],ttree:[],dmap:new u16(32768),dtree:[],imap:new u16(512),itree:[],rev15:new u16(32768),lhst:new u32(286),dhst:new u32(30),ihst:new u32(19),lits:new u32(15e3),strt:new u16(65536),prev:new u16(32768)}),function(){for(var A=UZIP.F.U,e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,A.rev15[e]=(t>>>16|t<<16)>>>17}function o(A,e,t){for(;0!=e--;)A.push(0,t)}for(e=0;e<32;e++)A.ldef[e]=A.of0[e]<<3|A.exb[e],A.ddef[e]=A.df0[e]<<4|A.dxb[e];o(A.fltree,144,8),o(A.fltree,112,9),o(A.fltree,24,7),o(A.fltree,8,8),UZIP.F.makeCodes(A.fltree,9),UZIP.F.codes2map(A.fltree,9,A.flmap),UZIP.F.revCodes(A.fltree,9),o(A.fdtree,32,5),UZIP.F.makeCodes(A.fdtree,5),UZIP.F.codes2map(A.fdtree,5,A.fdmap),UZIP.F.revCodes(A.fdtree,5),o(A.itree,19,0),o(A.ltree,286,0),o(A.dtree,30,0),o(A.ttree,320,0)}();const{inflate:inflate$1}=UZIP,UINT32_MAX=4294967295,OperationName={initRTM:\"initRTM\",login:\"login\",logout:\"logout\",renewToken:\"renewToken\",updateConfig:\"updateConfig\",publish:\"publish\",subscribe:\"subscribe\",unsubscribe:\"unsubscribe\",createStreamChannel:\"createStreamChannel\",leave:\"leave\",joinTopic:\"joinTopic\",join:\"join\",publishTopicMessage:\"publishTopicMessage\",leaveTopic:\"leaveTopic\",subscribeTopic:\"subscribeTopic\",unsubscribeTopic:\"unsubscribeTopic\",getSubscribedUserList:\"getSubscribedUserList\",setChannelMetadata:\"setChannelMetadata\",getChannelMetadata:\"getChannelMetadata\",removeChannelMetadata:\"removeChannelMetadata\",updateChannelMetadata:\"updateChannelMetadata\",setUserMetadata:\"setUserMetadata\",getUserMetadata:\"getUserMetadata\",removeUserMetadata:\"removeUserMetadata\",updateUserMetadata:\"updateUserMetadata\",subscribeUserMetadata:\"subscribeUserMetadata\",unsubscribeUserMetadata:\"unsubscribeUserMetadata\",setLock:\"setLock\",removeLock:\"removeLock\",acquireLock:\"acquireLock\",releaseLock:\"releaseLock\",revokeLock:\"revokeLock\",getLock:\"getLock\",rtm:\"rtm\",presenceSetState:\"presenceSetState\",whereNow:\"whereNow\",getUserChannels:\"getUserChannels\",whoNow:\"whoNow\",getOnlineUsers:\"getOnlineUsers\",presenceGetState:\"presenceGetState\",presenceRemoveState:\"presenceRemoveState\",storage:\"storage\",getMessages:\"getMessages\"};function getRandomInt(A,e){const t=Math.ceil(A),o=Math.floor(e);return Math.floor(Math.random()*(o-t+1))+A}function getRandomUInt64(){const A=getRandomInt(0,UINT32_MAX),e=getRandomInt(1,UINT32_MAX);return new Long$2(A,e,!0)}function getSid(A){return A.toString().padEnd(32,\"0\")}function calIpDistance(A,e){const t=A.split(\".\").map((A=>Number(A))),o=e.split(\".\").map((A=>Number(A)));return Math.sqrt(1e3*(t[0]-o[0])**2+100*(t[1]-o[1])**2+10*(t[2]-o[2])**2+1*(t[3]-o[3])**2)}function longToStringIfNeeded(A){return A.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?A.toNumber():A.toString()}const prefixSeqMap=new Map;function uniquePrefixedId(A,e){const t=\"\".concat(A).concat(e||\"\"),o=prefixSeqMap.get(t)||1;return prefixSeqMap.set(t,o+1),\"\".concat(A).concat(o)}const getUTCTimestamp$1=()=>{const A=new Date,[e,t]=A.toISOString().split(\"T\"),[o,g,i]=e.split(\"-\");return\"\".concat(g,\"-\").concat(i,\" \").concat(t.replace(/\\..+/,\"\"),\".\").concat(A.getMilliseconds())},getKeys=Object.keys,getEntries=Object.entries.bind(Object);function isLongNum(A){return\"number\"==typeof A||Long$2.isLong(A)}async function delay$1(A,e){return new Promise((e=>{setTimeout(e,A)}))}async function postWithAbortSignal(A,e,t){let{body:o,headers:g={},timeout:i=1e4,signal:r,withCredentials:n=!1}=e;if(!1===navigator.onLine)throw new Error(\"network is offline, not permit send request: url(\".concat(A,\")\"));const I=OperationName.rtm,{useBinaryResponse:s=!1}={},C=new XMLHttpRequest;C.open(\"POST\",A,!0),C.responseType=s?\"arraybuffer\":\"text\",C.withCredentials=n,C.timeout=i;const E=o instanceof FormData,a=o instanceof Uint8Array,B=Object.keys(g).filter((A=>\"content-type\"===A.toLowerCase()));if(B.length>1)throw new RangeError(\"multiple content-type\");if(0===B.length&&(a?g[\"Content-Type\"]=\"application/octet-stream\":E||(g[\"Content-Type\"]=\"application/json\")),!(\"setRequestHeader\"in C)){C.abort();const e=await fetch(A,{body:E||a?o:JSON.stringify(o),cache:\"no-cache\",credentials:n?\"include\":\"same-origin\",headers:g,method:\"POST\",mode:\"cors\",referrer:\"no-referrer\",signal:r}),{status:t}=e;if(t>=200&&t<300||304===t){if(s){return{status:t,responseData:await e.arrayBuffer()}}return{status:t,responseText:await e.text()}}const i=new RtmUnavailableError(I,[\"Post XHR failure, status %d\",t]);try{const A=await e.text();throw i.statusCode=t,i.message=A||\"Request failed, status \".concat(t),i}catch(A){throw i.statusCode=t,i.message=\"Request failed, status \".concat(t),i}}if(0!==Object.keys(g).length)for(let A=0,e=Object.entries(g);A<e.length;A++){const[t,o]=e[A];C.setRequestHeader(t,o)}if(void 0!==r){const A=()=>{C.abort(),r.removeEventListener(\"abort\",A)};r.addEventListener(\"abort\",A)}return E||a?C.send(o):C.send(JSON.stringify(o)),new Promise(((A,e)=>{const t=()=>{try{e(new DOMException(\"The request aborted.\",\"AbortError\"))}catch(A){const t=new Error(\"The request aborted.\");t.name=\"AbortError\",e(t)}};C.onload=()=>{const{status:o}=C;if(0===o)t();else if(o>=200&&o<300||304===o)A(s?{status:o,responseData:C.response}:{status:o,responseText:C.responseText});else{const A=new RtmUnavailableError(I,[\"Post XHR failure, status %d\",o]);A.statusCode=o,A.message=C.response||\"Request failed, status \".concat(C.status),e(A)}},C.ontimeout=A=>{e(new RtmTimeoutError(I,[\"XHR request timed out after %d ms\",i],{originalError:A}))},C.onerror=()=>{0===C.status&&t();const A=new RtmUnavailableError(I,[\"Post XHR failure, status %d\",C.status]);A.statusCode=C.status,A.message=C.response||\"Request failed, status \".concat(C.status),e(A)},C.onabort=()=>{t()}}))}function validMessage(A,e){const t=OperationName.publish,{code:o,reason:g}=getErrorInfoByCode(e);if(!isPlainObject$3(A))throw new RtmInvalidArgumentError(t,[g],o);if(void 0===A.messageType)if(A.rawMessage instanceof Uint8Array){if(A.messageType=\"RAW\",void 0!==A.text)throw new RtmInvalidArgumentError(t,[g],o)}else{if(\"string\"!=typeof A.text)throw new RtmInvalidArgumentError(t,[g],o);if(A.messageType=\"TEXT\",void 0!==A.rawMessage)throw new RtmInvalidArgumentError(t,[g],o)}}async function commonSendMessage(A){let{message:e,peerId:t,session:o,diff:g,customType:i,storeInHistory:r,toPeer:n}=A;const I=OperationName.publish;if(void 0===o){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(I,[e],A)}let s;switch(s=n?\"TEXT\"===e.messageType?RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag:RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag:\"TEXT\"===e.messageType?RtmMessageCategoryEnum.ChannelSMsg:RtmMessageCategoryEnum.ChannelRMsg,e.messageType){case\"TEXT\":return o.sendTextMessage(e.text,t,n,(n?P2P_MESSAGE_SEND_TIMEOUT:MESSAGE_SEND_TIMEOUT)-g,i,r);case\"RAW\":return void 0===e.description&&(e.description=\"\"),o.sendRawMessage(e.rawMessage,e.description,t,n,(n?P2P_MESSAGE_SEND_TIMEOUT:MESSAGE_SEND_TIMEOUT)-g,i,r);default:o.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"sentcount\"}),o.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"invalidmessagecount\"});const{code:A,reason:C}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_MESSAGE);throw new RtmInvalidArgumentError(I,[C],A)}}function getDomain(A){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=A.replace(/(https?:\\/\\/)?(www.)?/i,\"\");return e||(t=t.split(\".\").slice(A.length-2).join(\".\")),-1!==t.indexOf(\"/\")?t.split(\"/\")[0]:t}function replaceRangeWithAsterisk(A){const e=String(A);if(\"string\"!=typeof e)return\"[Sensitive Info]\";const t=Math.floor(.7*e.length),o=e.length;return replaceRange(e,t,o,\"*\".repeat(o-t))}function maskMiddleOfString(A){const e=String(A);if(\"string\"!=typeof e)return\"[Sensitive Info]\";const t=e.length;if(t<=2)return e;const o=t/3,g=t/3*2,i=\"*\".repeat(g-o);return e.substring(0,o)+i+e.substring(g)}function handleLogObject(A,e,t){function o(g){if(isPrimitive(g))return g;if(A instanceof Uint8Array)return\"[Hidden Info]\";if(Array.isArray(g))return g.map(o);const i={};for(let A=0,r=Object.entries(g);A<r.length;A++){const[g,n]=r[A],I=\"number\"==typeof n?n.toString():n;I instanceof Uint8Array||e.includes(g)?i[g]=\"[Hidden Info]\":t.includes(g)?i[g]=\"string\"==typeof I?maskMiddleOfString(I):Array.isArray(I)?I.map(o):o(I):i[g]=isNil$1(I)?I:o(I)}return i}return Array.isArray(A)?A.map(o):o(A)}function deepFreeze(A){return Object.getOwnPropertyNames(A).forEach((function(e){const t=A[e];\"object\"==typeof t&&null!==t&&deepFreeze(t)})),Object.freeze(A)}function decodeUint8ArrayToString(A){return new TextDecoder(\"utf-8\").decode(A.buffer.slice(A.byteOffset,A.byteOffset+A.byteLength))}function concatenateUint8Array(){let A=0;for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(let e=0;e<t.length;e++){A+=t[e].length}const g=new Uint8Array(A);let i=0;for(let A=0;A<t.length;A++){const e=t[A];g.set(e,i),i+=e.length}return g}function appendQueryParameter(A,e,t){const o=A.match(/([^?#]+)(\\?[^#]*)?(\\#.*)?/),g=null==o?void 0:o[1],i=null==o?void 0:o[2];if(i){const A=i.substr(1).split(\"&\");let o;for(o=0;o<A.length;o++){if(A[o].split(\"=\")[0]==e){A[o]=e+\"=\"+encodeURIComponent(t);break}}return o==A.length&&A.push(e+\"=\"+encodeURIComponent(t)),g+\"?\"+A.join(\"&\")}return g+\"?\"+e+\"=\"+encodeURIComponent(t)}function replaceRange(A,e,t,o){return\"string\"!=typeof A?\"[Sensitive Info]\":A.substring(0,e)+o+A.substring(t)}function isValidEnvString(A){return\"string\"==typeof A&&(0!==A.length&&(\"false\"!==A&&\"null\"!==A&&\"undefined\"!==A))}const streamChannel_prefix=\"*s*\",lock_prefix=\"*l*\";function getPrefixLockName(A){return\"\".concat(lock_prefix).concat(A)}function getChannelNameByType(A,e){return\"STREAM\"===e?\"\".concat(streamChannel_prefix).concat(A):A}function getChannelDetailByName(A){return A.startsWith(streamChannel_prefix)?{channelName:A.slice(3),channelType:\"STREAM\"}:{channelName:A,channelType:\"MESSAGE\"}}function roundUp(A){const e=(1<<ROUNDUP_BIT_SIZE)-1;return A+e&~e}function encrypt(A,e,t,o){let g=\"string\"==typeof A?(new TextEncoder).encode(A):A;const i=roundUp(g.length);if(i>g.byteLength){const A=new Uint8Array(i-g.byteLength);g=new Uint8Array([...g,...A])}const r=util$6.createBuffer(g),n=forgeCipher.createCipher(\"AES-GCM\",util$6.createBuffer(e.slice(0,o)));n.start({iv:t}),n.update(r);n.finish();{const A=n.output.getBytes()+n.mode.tag.getBytes(),e=[];for(let t=0;t<A.length;t++)e.push(A.charCodeAt(t));return new Uint8Array(e)}}function decrypt(A,e,t,o){const g=util$6.createBuffer(A),i=util$6.createBuffer(A),r=util$6.createBuffer(g.getBytes(g.length()).slice(-TAG_LENGTH)),n=i.getBytes(i.length()).slice(0,g.getBytes().length-TAG_LENGTH),I=forgeCipher.createDecipher(\"AES-GCM\",util$6.createBuffer(e.slice(0,o)));I.start({iv:t,tag:r,tagLength:128}),I.update(util$6.createBuffer(n)),I.finish();const s=I.output.data,C=[];for(let A=0;A<s.length;A++)C.push(s.charCodeAt(A));return new Uint8Array(C)}function GlobalPresenceString(A){return K_PRESENCE_PREFIX+A+K_GLOBAL_ONLINE}function ChannelQueryString(A,e){return K_PRESENCE_PREFIX+A+K_CHANNEL_ONLINE+e+K_USER_COLLECTION}function extractPrefixChannelName(A){const e=new RegExp(\"^\".concat(K_PRESENCE_PREFIX,\"([^/]+)\").concat(K_CHANNEL_ONLINE,\"([^/]+)\").concat(K_USER_COLLECTION,\"$\")),t=A.match(e);return t?{vid:t[1],prefixChannelName:t[2]}:{}}function getErrorInfoByCode(A){return{code:A,reason:RTMErrorDescription[A]}}class ReadByteBuffer{constructor(A){_defineProperty$1(this,\"view\",void 0),_defineProperty$1(this,\"offset\",void 0),this.view=new DataView(A),this.offset=0}getString(){const A=this.view.getUint16(this.offset,!0);this.offset+=2;const e=new Uint8Array(this.view.buffer,this.offset,A);return this.offset+=A,(new TextDecoder).decode(e)}getUint32(){const A=this.view.getUint32(this.offset,!0);return this.offset+=4,A}getUint16(){const A=this.view.getUint16(this.offset,!0);return this.offset+=2,A}pack(){return this.view.buffer.slice(this.offset)}}function decodeBase64(A){const e=atob(A),t=new Uint8Array(e.length);for(let A=0;A<e.length;A++)t[A]=e.charCodeAt(A);return t}function fromStringWith006(A){return A.slice(VERSION_LENGTH,APP_ID_LENGTH+VERSION_LENGTH)}function fromStringWith007(A){const e=A.substring(VERSION_LENGTH),t=inflate$1(decodeBase64(e)),o=new ReadByteBuffer(t.buffer);o.getString();return o.getString()}const syncRpcStart=\"Sync Request Start\",syncRpcEnd=\"Sync Request End\";function getUTCTimeBaseREG(A){return(new Date).getTime()+A}function parseHost(A,e){let t=e;const o=A.indexOf(\":\");if(-1!==o){const g=A.length-o;t=Number(A.slice(o+1));return{domain:A.slice(0,A.length-g),port:e}}return{domain:A,port:t}}function getPrivateSettingsPortAndDomains(A,e){let t=e;return{hostname:A.map((A=>{const e=parseHost(A,void 0);return e.port&&(t=e.port),e.domain})),port:t}}function getSyncPacketUri(A){const e=Array.from(A.slice(2,4)),t=e[0],o=e[1];return new DataView(new Uint8Array([o,t]).buffer).getInt16(0)}function handleJoinOptionsAsDefault(A){var e,t,o,g;return{withLock:null!==(e=null==A?void 0:A.withLock)&&void 0!==e&&e,withMetadata:null!==(t=null==A?void 0:A.withMetadata)&&void 0!==t&&t,withPresence:null===(o=null==A?void 0:A.withPresence)||void 0===o||o,beQuiet:null!==(g=null==A?void 0:A.beQuiet)&&void 0!==g&&g}}function handleSubOptionsAsDefault(A){var e;return _objectSpread2(_objectSpread2({},handleJoinOptionsAsDefault(A)),{},{withMessage:null===(e=null==A?void 0:A.withMessage)||void 0===e||e})}async function timeoutPromise(A,e,t,o,g){if(A)return new Promise((async(i,r)=>{const n=setTimeout((()=>{clearTimeout(n);const{code:A,reason:e}=getErrorInfoByCode(o),g=new RtmTimeoutError(t,[e+\"timeout occurred\"],A);r(g)}),e);try{const e=await A;clearTimeout(n),i(e)}catch(A){if(clearTimeout(n),isRtmError(A)||g)r(A);else{const{code:A,reason:e}=getErrorInfoByCode(o),g=new RtmTimeoutError(t,[e+\"timeout occurred\"],A);r(g)}}}))}let RegServerErrorCode=function(A){return A[A.kOk=0]=\"kOk\",A[A.kFail=1]=\"kFail\",A[A.kTimestampExpired=2]=\"kTimestampExpired\",A[A.kChannelPermissionInvalid=3]=\"kChannelPermissionInvalid\",A[A.kCertificateInvalid=4]=\"kCertificateInvalid\",A[A.kChannelNameEmpty=5]=\"kChannelNameEmpty\",A[A.kChannelNotFound=6]=\"kChannelNotFound\",A[A.kTicketInvalid=7]=\"kTicketInvalid\",A[A.kChannelConflicted=8]=\"kChannelConflicted\",A[A.kServiceNotReady=9]=\"kServiceNotReady\",A[A.kServiceTooHeavy=10]=\"kServiceTooHeavy\",A[A.kRejoined=11]=\"kRejoined\",A[A.kNoNeedToChange=13]=\"kNoNeedToChange\",A[A.kUidBanned=14]=\"kUidBanned\",A[A.kIpBanned=15]=\"kIpBanned\",A[A.kChannelBanned=16]=\"kChannelBanned\",A[A.kTicketParseError=17]=\"kTicketParseError\",A[A.kTicketIllegalLength=18]=\"kTicketIllegalLength\",A[A.kTicketNotAuth=19]=\"kTicketNotAuth\",A[A.kTicketUnknownVersion=20]=\"kTicketUnknownVersion\",A[A.kLoginedFromRemote=21]=\"kLoginedFromRemote\",A[A.kGwychFailed=23]=\"kGwychFailed\",A[A.kTooManyBroadcasters=24]=\"kTooManyBroadcasters\",A[A.kServerDown=25]=\"kServerDown\",A[A.kResourceHeldByOther=26]=\"kResourceHeldByOther\",A[A.kRtm2GwychFailed=27]=\"kRtm2GwychFailed\",A[A.kAutoRebalance=28]=\"kAutoRebalance\",A[A.kBannedForExceedingQuota=101]=\"kBannedForExceedingQuota\",A[A.kRequestPending=65535]=\"kRequestPending\",A[A.kVoid=1e4]=\"kVoid\",A[A.kConnectionTimeout=10001]=\"kConnectionTimeout\",A[A.kInvalidPacket=10002]=\"kInvalidPacket\",A[A.kAlreadyJoined=10003]=\"kAlreadyJoined\",A[A.kJoinTimeout=10004]=\"kJoinTimeout\",A[A.kRejoinFailed=10005]=\"kRejoinFailed\",A[A.kJoinTooFrequently=10006]=\"kJoinTooFrequently\",A[A.kCompressionMethodUnrecognized=10007]=\"kCompressionMethodUnrecognized\",A[A.kUserNotFound=10008]=\"kUserNotFound\",A[A.kUserInstanceConflict=10009]=\"kUserInstanceConflict\",A[A.kContentOversized=10010]=\"kContentOversized\",A[A.kRequestTooFrequently=10011]=\"kRequestTooFrequently\",A[A.kDamagedPacket=10012]=\"kDamagedPacket\",A[A.kInvalidRequestParameters=10013]=\"kInvalidRequestParameters\",A[A.kServerInternalError=10014]=\"kServerInternalError\",A[A.kContentNotFound=10015]=\"kContentNotFound\",A[A.kIncompatible=10016]=\"kIncompatible\",A[A.kEdgeInDegradation=10017]=\"kEdgeInDegradation\",A[A.kUserBannedByRule=10018]=\"kUserBannedByRule\",A[A.kUserBannedByAuth=10019]=\"kUserBannedByAuth\",A[A.kGroupUserBannedByAuth=10020]=\"kGroupUserBannedByAuth\",A[A.kConsoleConfigNotFound=10021]=\"kConsoleConfigNotFound\",A[A.kUserRejectedByConsoleConfig=10022]=\"kUserRejectedByConsoleConfig\",A[A.kTest1=11001]=\"kTest1\",A[A.kTest2=11002]=\"kTest2\",A[A.kTest3=11003]=\"kTest3\",A}({});class OperationControl{constructor(){_defineProperty$1(this,\"promiseMap\",new Map)}setPromise(A,e){this.promiseMap.set(A,e)}getPromise(A){return this.promiseMap.get(A)}deletePromise(A){this.promiseMap.delete(A)}async awaitPromise(A){let e,t;const o=new Promise(((A,o)=>{e=A,t=o})),g=this.getPromise(A);try{g&&await g}catch(A){}return o.finally((()=>{this.deletePromise(A)})),this.setPromise(A,o),{currentResolve:e,currentReject:t}}}function validDomain(A){return/^(?:(?:[a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)+[a-zA-Z]{2,}(?::\\d{1,5})?$/.test(A)}const linkStateCodeMap={IDLE:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3,SUSPENDED:4,FAILED:5},linkOperationCodeMap={LOGIN:0,LOGOUT:1,JOIN:2,LEAVE:3,SERVER_REJECT:4,AUTO_RECONNECT:5,RECONNECTED:6,HEARTBEAT_TIMEOUT:7,SERVER_TIMEOUT:8,NETWORK_CHANGE:9},EDGE_ENV_PORT={0:9591,1:9593},EDGE_ENV_PORT_DEFAULT=EDGE_ENV_PORT,DEFAULT_API_RATE_LIMIT=new Map([[\"removeLock\",20],[\"setLock\",20],[\"acquireLock\",10],[\"releaseLock\",20],[\"revokeLock\",20],[\"getLock\",20],[\"userMetaModify\",20],[\"userMetaGet\",20],[\"userMetaSub\",20],[\"channelMetaModify\",20],[\"channelMetaGet\",20],[\"login\",20],[\"renewToken\",20],[\"whoNow\",20],[\"whereNow\",20],[\"modifyState\",20],[\"getState\",20],[\"subscribe\",20],[\"join\",20],[\"joinTopic\",20],[\"subscribeTopic\",20],[\"publish\",60],[\"publishTopicMsg\",200],[\"getMessages\",20]]),loginConfig={AP_DOMAIN:void 0,EDGE_DOMAIN_TLD:void 0,EDGE_IP_LIST:void 0,EDGE_ENV_PORT:EDGE_ENV_PORT_DEFAULT,REGISTRAR_USE_WS:!1},consoleConfig={RTM2_ENABLED:void 0,LOCK_ENABLED:void 0,STORAGE_ENABLED:void 0,STORAGE_CHANNEL_SUB_ENABLED:void 0,STORAGE_USER_SUB_ENABLED:void 0,PRESENCE_INTERVAL:void 0,PRESENCE_THRESHOLD:void 0,PRESENCE_DEBOUNCE:void 0,PRESENCE_TIMEOUT:K_PRESENCE_TIMEOUT_DEFAULT,PRESENCE_RPC_TIMEOUT:DEFAULT_RPC_TIMEOUT_TIME,API_RATE_LIMIT:DEFAULT_API_RATE_LIMIT,ENABLE_API_RATE_LIMIT:!0},MUTABLE_PARAMS=_objectSpread2(_objectSpread2({RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:5e3,LOG_HANDLER:void 0,ENABLE_EDGE_AUTO_FALLBACK:!0,MAX_STATE_COUNT:MAX_STATE_COUNT,USE_STAGING_REPORT_DOMAIN:!1,PRINT_TICK_LOG:!1,RTM_LINK_KEEP_ALIVE_TIMEOUT:void 0,HEART_BEAT:void 0,VID:new Map,STREAM_CHANNEL_COUNT:SUB_STREAM_CHANNEL_LIMITATION,MESSAGE_CHANNEL_COUNT:MAX_JOINED_CHANNELS,HISTORY_MSG_COUNT_LIMIT:GET_MESSAGE_MAX_COUNT,LOG_PING_PONG:!1,AREA_CONFIG:void 0,DECOUPLE_SYNC:!0,LOCK_TTL:LOCK_DEFAULT_TTL},consoleConfig),loginConfig);class Parameter{_setParameter(A,e){if(console.log(JSON.stringify({key:A,value:e}),\"RTM setParameter\"),!Object.keys(MUTABLE_PARAMS).includes(A)){console.warn(\"setParameter: key is not in MUTABLE_PARAMS\");const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_PARAMETER);throw new RtmInvalidArgumentError(\"set parameter\",[e],A)}switch(A){case\"STREAM_CHANNEL_COUNT\":const t=\"number\"==typeof e&&e>100?100:\"number\"==typeof e?e:SUB_STREAM_CHANNEL_LIMITATION;MUTABLE_PARAMS.STREAM_CHANNEL_COUNT=t;break;case\"MESSAGE_CHANNEL_COUNT\":MUTABLE_PARAMS.MESSAGE_CHANNEL_COUNT=\"number\"==typeof e?e:MAX_JOINED_CHANNELS;case\"HISTORY_MSG_COUNT_LIMIT\":MUTABLE_PARAMS.HISTORY_MSG_COUNT_LIMIT=\"number\"==typeof e?e:GET_MESSAGE_MAX_COUNT;break;case\"API_RATE_LIMIT\":if(isNil$1(e))MUTABLE_PARAMS.API_RATE_LIMIT=DEFAULT_API_RATE_LIMIT;else{if(!(e instanceof Map)){console.warn(\"setParameter: API_RATE_LIMIT value is not a Map\");const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_PARAMETER);throw new RtmInvalidArgumentError(\"set parameter\",[e],A)}{const A=e.entries();Array.from(A).forEach((A=>{let[e,t]=A;\"number\"==typeof t&&MUTABLE_PARAMS.API_RATE_LIMIT.set(e,t)}))}}break;default:MUTABLE_PARAMS[A]=e}}_getParameter(A){return MUTABLE_PARAMS[A]}setParameter(A,e){return this._setParameter(A,e)}getParameter(A){return this._getParameter(A)}}const p=new Parameter,setParameter=p.setParameter.bind(p),getParameter=p.getParameter.bind(p);function setVidParameter(A,e){const t=getParameter(\"VID\");t.set(A,e),setParameter(\"VID\",t)}const _excluded=[\"CODE\"];let AreaCodeMap=function(A){return A.CHINA=\"CN\",A.ASIA=\"AS\",A.NORTH_AMERICA=\"NA\",A.EUROPE=\"EU\",A.JAPAN=\"JP\",A.INDIA=\"IN\",A.OCEANIA=\"OC\",A.SOUTH_AMERICA=\"SA\",A.AFRICA=\"AF\",A.GLOBAL=\"GLOBAL\",A.OVERSEA=\"OVERSEA\",A.SOUTH_KOREA=\"KR\",A.UNITED_STATES=\"US\",A}({});AreaCodeMap.CHINA,AreaCodeMap.NORTH_AMERICA,AreaCodeMap.EUROPE,AreaCodeMap.ASIA,AreaCodeMap.JAPAN,AreaCodeMap.INDIA,AreaCodeMap.OCEANIA,AreaCodeMap.OVERSEA,AreaCodeMap.SOUTH_AMERICA,AreaCodeMap.AFRICA,AreaCodeMap.SOUTH_KOREA,AreaCodeMap.UNITED_STATES,AreaCodeMap.GLOBAL;const AREA_DOMAIN_MAP=deepFreeze({[AreaCodeMap.ASIA]:{CODE:AreaCodeMap.ASIA,AP_DOMAINS:[\"ap-web-1-asia.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-asia.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-asia.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-asia.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-asia.agora.io\"],PROXY_AP:[\"proxy-ap-web-asia.agora.io\"],PROXY_NGINX:[\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.NORTH_AMERICA]:{CODE:AreaCodeMap.NORTH_AMERICA,AP_DOMAINS:[\"ap-web-1-north-america.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-north-america.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-north-america.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-north-america.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-north-america.agora.io\"],PROXY_AP:[\"proxy-ap-web-america.agora.io\"],PROXY_NGINX:[\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.EUROPE]:{CODE:AreaCodeMap.EUROPE,AP_DOMAINS:[\"ap-web-1-europe.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-europe.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-europe.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-europe.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-europe.agora.io\"],PROXY_AP:[\"proxy-ap-web-europe.agora.io\"],PROXY_NGINX:[\"europe.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.JAPAN]:{CODE:AreaCodeMap.JAPAN,AP_DOMAINS:[\"ap-web-1-japan.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-japan.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-japan.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-japan.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-japan.agora.io\"],PROXY_AP:[\"proxy-ap-web-japan.agora.io\"],PROXY_NGINX:[\"japan.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.INDIA]:{CODE:AreaCodeMap.INDIA,AP_DOMAINS:[\"ap-web-1-india.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-india.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-india.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-india.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-india.agora.io\"],PROXY_AP:[\"proxy-ap-web-india.agora.io\"],PROXY_NGINX:[\"india.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.OVERSEA]:{CODE:AreaCodeMap.OVERSEA,AP_DOMAINS:[\"ap-web-1-oversea.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-oversea.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-oversea.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-oversea.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-oversea.agora.io\"],PROXY_AP:[\"proxy-ap-web-oversea.agora.io\"],PROXY_NGINX:[\"webrtc-cloud-proxy.agora.io\"]},[AreaCodeMap.GLOBAL]:{CODE:AreaCodeMap.GLOBAL,AP_DOMAINS:[\"ap-web-1.agora.io\",\"ap-web-2.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-3.agora.io\",\"ap-web-4.agora.io\"],EVENT_REPORT_DOMAIN:[\"webcollector-rtm.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"webcollector-1.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-rtm.agora.io\"],PROXY_AP:[\"ap-proxy-1.agora.io\",\"ap-proxy-2.agora.io\"],PROXY_NGINX:[\"webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.OCEANIA]:{CODE:AreaCodeMap.OCEANIA,AP_DOMAINS:[\"ap-web-1-oceania.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-oceania.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-oceania.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-oceania.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-oceania.agora.io\"],PROXY_AP:[\"proxy-ap-web-oceania.agora.io\"],PROXY_NGINX:[\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.SOUTH_AMERICA]:{CODE:AreaCodeMap.SOUTH_AMERICA,AP_DOMAINS:[\"ap-web-1-south-america.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-south-america.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-south-america.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-south-america.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-south-america.agora.io\"],PROXY_AP:[\"proxy-ap-web-south-america.agora.io\"],PROXY_NGINX:[\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.AFRICA]:{CODE:AreaCodeMap.AFRICA,AP_DOMAINS:[\"ap-web-1-africa.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-africa.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-africa.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-africa.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-south-africa.agora.io\"],PROXY_AP:[\"proxy-ap-web-africa.agora.io\"],PROXY_NGINX:[\"africa.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.CHINA]:{CODE:AreaCodeMap.CHINA,AP_DOMAINS:[\"webrtc2-2.ap.sd-rtn.com\"],AP_BACKUP_DOMAINS:[\"webrtc2-4.ap.sd-rtn.com\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-china.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-china.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-china.agora.io\"],PROXY_AP:[\"proxy-ap-web.agoraio.cn\"],PROXY_NGINX:[\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.SOUTH_KOREA]:{CODE:AreaCodeMap.SOUTH_KOREA,AP_DOMAINS:[\"ap-web-1-korea.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-korea.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-korea.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-korea.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-korea.agora.io\"],PROXY_AP:[\"proxy-ap-web-korea.agora.io\"],PROXY_NGINX:[\"korea.webrtc-cloud-proxy.sd-rtn.com\"]},[AreaCodeMap.UNITED_STATES]:{CODE:AreaCodeMap.UNITED_STATES,AP_DOMAINS:[\"ap-web-1-us.agora.io\"],AP_BACKUP_DOMAINS:[\"ap-web-2-us.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-us.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-us.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-us.agora.io\"],PROXY_AP:[\"proxy-ap-web-us.agora.io\"],PROXY_NGINX:[\"us.webrtc-cloud-proxy.sd-rtn.com\"]}}),continentCountryMap={[AreaCodeMap.ASIA]:[AreaCodeMap.CHINA,AreaCodeMap.JAPAN,AreaCodeMap.INDIA],[AreaCodeMap.EUROPE]:[],[AreaCodeMap.NORTH_AMERICA]:[],[AreaCodeMap.SOUTH_AMERICA]:[],[AreaCodeMap.OCEANIA]:[],[AreaCodeMap.AFRICA]:[]},areaWeights=[AreaCodeMap.GLOBAL,AreaCodeMap.CHINA,AreaCodeMap.NORTH_AMERICA,AreaCodeMap.EUROPE,AreaCodeMap.ASIA,AreaCodeMap.JAPAN,AreaCodeMap.INDIA,AreaCodeMap.OCEANIA,AreaCodeMap.SOUTH_AMERICA,AreaCodeMap.AFRICA],isContinent=A=>A in continentCountryMap,isCountry=A=>Object.values(continentCountryMap).flat().includes(A),getContinentByCountry=A=>{var e;return null===(e=getEntries(continentCountryMap).find((e=>{let[t,o]=e;return o.includes(A)})))||void 0===e?void 0:e[0]},sortAreasByWeight=A=>A.sort(((A,e)=>areaWeights.indexOf(A)-areaWeights.indexOf(e))),getAreaDomainConfig=A=>{const e=new Set,t=sortAreasByWeight(A).slice(0,3).map((A=>{const t=AREA_DOMAIN_MAP[A];if(void 0===t)throw new RtmInternalError(\"invalid area key\");const{CODE:o}=t,g=_objectWithoutProperties(t,_excluded);return e.add(o),g}));if(0===t.length)throw new RtmInternalError(\"areas cannot be empty\");return _objectSpread2({CODES:e},t.reduce(((A,e)=>{for(let t=0,o=getEntries(A);t<o.length;t++){const[g,i]=o[t];A[g]=Array.from(new Set([...e[g],...i]))}return A})))};function getAreaDomainConfigWithExclusion(A){let{areas:e,excludedArea:t}=A;if(1===e.length&&e[0]===AreaCodeMap.GLOBAL&&t===AreaCodeMap.CHINA)return getAreaDomainConfig([AreaCodeMap.OVERSEA]);if(e.includes(AreaCodeMap.GLOBAL)){const A=getKeys(AREA_DOMAIN_MAP).filter((A=>A!==AreaCodeMap.GLOBAL&&A!==AreaCodeMap.OVERSEA));if(isContinent(t)){const e=continentCountryMap[t],o=[...null!=e?e:[],t];return getAreaDomainConfig(A.filter((A=>!o.includes(A))))}if(isCountry(t)){const e=getContinentByCountry(t);return getAreaDomainConfig(A.filter((A=>A!==t&&A!==e)))}}if(isCountry(t)||isContinent(t))return getAreaDomainConfig(e);throw new RtmInvalidArgumentError(\"setArea\",\"Invalid excludedArea area config\")}let areaConfig;function setAreaConfig(A){areaConfig=A}function setArea(A){let{areaCodes:e,excludedArea:t}=A;if(setParameter(\"AREA_CONFIG\",{areaCodes:e,excludedArea:t}),!Array.isArray(e)||0===e.length||!e.every((A=>A in AreaCode)))throw new RtmInvalidArgumentError(\"setArea\",\"Invalid area config\");if(void 0!==t&&t===AreaCode.GLOBAL)throw new RtmInvalidArgumentError(\"setArea\",\"Excluded area cannot be global\");if(console.log(JSON.stringify({areaCodes:e,excludedArea:t}),\"RTM setArea\"),void 0!==t){if(e.includes(t))throw new RtmInvalidArgumentError(\"setArea\",\"Excluded area cannot be in areaCodes\");if(!(t in AreaCodeMap))throw new RtmInvalidArgumentError(\"setArea\",\"Invalid excludedArea:\",t);setAreaConfig(getAreaDomainConfigWithExclusion({areas:e.map((A=>AreaCodeMap[A])),excludedArea:AreaCodeMap[t]}))}else setAreaConfig(getAreaDomainConfig(e.map((A=>AreaCodeMap[A]))))}var rngBrowser={exports:{}},getRandomValues=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);rngBrowser.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);rngBrowser.exports=function(){for(var A,e=0;e<16;e++)3&e||(A=4294967296*Math.random()),rnds[e]=A>>>((3&e)<<3)&255;return rnds}}for(var rngBrowserExports=rngBrowser.exports,byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid$2(A,e){var t=e||0,o=byteToHex;return[o[A[t++]],o[A[t++]],o[A[t++]],o[A[t++]],\"-\",o[A[t++]],o[A[t++]],\"-\",o[A[t++]],o[A[t++]],\"-\",o[A[t++]],o[A[t++]],\"-\",o[A[t++]],o[A[t++]],o[A[t++]],o[A[t++]],o[A[t++]],o[A[t++]]].join(\"\")}var bytesToUuid_1=bytesToUuid$2,rng$1=rngBrowserExports,bytesToUuid$1=bytesToUuid_1;function v4$1(A,e,t){var o=e&&t||0;\"string\"==typeof A&&(e=\"binary\"===A?new Array(16):null,A=null);var g=(A=A||{}).random||(A.rng||rng$1)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,e)for(var i=0;i<16;++i)e[o+i]=g[i];return e||bytesToUuid$1(g)}var v4_1=v4$1,uuid$2=getDefaultExportFromCjs(v4_1);const VERSION=\"2.2.1\",BUILD=\"v2.2.1-0-g69f68c57-dirty\",processId=uuid$2(),WEB_PLATFORM_TYPE=7,VERSION_NO=9,SUBVERSION=414,FUSION=!1;let isBusy=!1,loginAbortController=new AbortController;function changeBusyStatus(A){(isBusy||A)&&(loginAbortController.abort(),A&&(loginAbortController=new AbortController),isBusy=A)}var rng=rngBrowserExports,bytesToUuid=bytesToUuid_1,_nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1$1(A,e,t){var o=e&&t||0,g=e||[],i=(A=A||{}).node||_nodeId,r=void 0!==A.clockseq?A.clockseq:_clockseq;if(null==i||null==r){var n=rng();null==i&&(i=_nodeId=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==r&&(r=_clockseq=16383&(n[6]<<8|n[7]))}var I=void 0!==A.msecs?A.msecs:(new Date).getTime(),s=void 0!==A.nsecs?A.nsecs:_lastNSecs+1,C=I-_lastMSecs+(s-_lastNSecs)/1e4;if(C<0&&void 0===A.clockseq&&(r=r+1&16383),(C<0||I>_lastMSecs)&&void 0===A.nsecs&&(s=0),s>=1e4)throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");_lastMSecs=I,_lastNSecs=s,_clockseq=r;var E=(1e4*(268435455&(I+=122192928e5))+s)%4294967296;g[o++]=E>>>24&255,g[o++]=E>>>16&255,g[o++]=E>>>8&255,g[o++]=255&E;var a=I/4294967296*1e4&268435455;g[o++]=a>>>8&255,g[o++]=255&a,g[o++]=a>>>24&15|16,g[o++]=a>>>16&255,g[o++]=r>>>8|128,g[o++]=255&r;for(var B=0;B<6;++B)g[o+B]=i[B];return e||bytesToUuid(g)}var v1_1=v1$1,v1=v1_1,v4=v4_1,uuid=v4;uuid.v1=v1,uuid.v4=v4;var uuid_1=uuid,uuid$1=getDefaultExportFromCjs(uuid_1),events={exports:{}},R=\"object\"==typeof Reflect?Reflect:null,ReflectApply=R&&\"function\"==typeof R.apply?R.apply:function(A,e,t){return Function.prototype.apply.call(A,e,t)},ReflectOwnKeys;function ProcessEmitWarning(A){console&&console.warn&&console.warn(A)}ReflectOwnKeys=R&&\"function\"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:function(A){return Object.getOwnPropertyNames(A)};var NumberIsNaN=Number.isNaN||function(A){return A!=A};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter,events.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(A){if(\"function\"!=typeof A)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof A)}function _getMaxListeners(A){return void 0===A._maxListeners?EventEmitter.defaultMaxListeners:A._maxListeners}function _addListener(A,e,t,o){var g,i,r;if(checkListener(t),void 0===(i=A._events)?(i=A._events=Object.create(null),A._eventsCount=0):(void 0!==i.newListener&&(A.emit(\"newListener\",e,t.listener?t.listener:t),i=A._events),r=i[e]),void 0===r)r=i[e]=t,++A._eventsCount;else if(\"function\"==typeof r?r=i[e]=o?[t,r]:[r,t]:o?r.unshift(t):r.push(t),(g=_getMaxListeners(A))>0&&r.length>g&&!r.warned){r.warned=!0;var n=new Error(\"Possible EventEmitter memory leak detected. \"+r.length+\" \"+String(e)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");n.name=\"MaxListenersExceededWarning\",n.emitter=A,n.type=e,n.count=r.length,ProcessEmitWarning(n)}return A}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(A,e,t){var o={fired:!1,wrapFn:void 0,target:A,type:e,listener:t},g=onceWrapper.bind(o);return g.listener=t,o.wrapFn=g,g}function _listeners(A,e,t){var o=A._events;if(void 0===o)return[];var g=o[e];return void 0===g?[]:\"function\"==typeof g?t?[g.listener||g]:[g]:t?unwrapListeners(g):arrayClone(g,g.length)}function listenerCount(A){var e=this._events;if(void 0!==e){var t=e[A];if(\"function\"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function arrayClone(A,e){for(var t=new Array(e),o=0;o<e;++o)t[o]=A[o];return t}function spliceOne(A,e){for(;e+1<A.length;e++)A[e]=A[e+1];A.pop()}function unwrapListeners(A){for(var e=new Array(A.length),t=0;t<e.length;++t)e[t]=A[t].listener||A[t];return e}function once(A,e){return new Promise((function(t,o){function g(t){A.removeListener(e,i),o(t)}function i(){\"function\"==typeof A.removeListener&&A.removeListener(\"error\",g),t([].slice.call(arguments))}eventTargetAgnosticAddListener(A,e,i,{once:!0}),\"error\"!==e&&addErrorHandlerIfEventEmitter(A,g,{once:!0})}))}function addErrorHandlerIfEventEmitter(A,e,t){\"function\"==typeof A.on&&eventTargetAgnosticAddListener(A,\"error\",e,t)}function eventTargetAgnosticAddListener(A,e,t,o){if(\"function\"==typeof A.on)o.once?A.once(e,t):A.on(e,t);else{if(\"function\"!=typeof A.addEventListener)throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type '+typeof A);A.addEventListener(e,(function g(i){o.once&&A.removeEventListener(e,g),t(i)}))}}Object.defineProperty(EventEmitter,\"defaultMaxListeners\",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(A){if(\"number\"!=typeof A||A<0||NumberIsNaN(A))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+A+\".\");defaultMaxListeners=A}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(A){if(\"number\"!=typeof A||A<0||NumberIsNaN(A))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+A+\".\");return this._maxListeners=A,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(A){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var o=\"error\"===A,g=this._events;if(void 0!==g)o=o&&void 0===g.error;else if(!o)return!1;if(o){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var r=new Error(\"Unhandled error.\"+(i?\" (\"+i.message+\")\":\"\"));throw r.context=i,r}var n=g[A];if(void 0===n)return!1;if(\"function\"==typeof n)ReflectApply(n,this,e);else{var I=n.length,s=arrayClone(n,I);for(t=0;t<I;++t)ReflectApply(s[t],this,e)}return!0},EventEmitter.prototype.addListener=function(A,e){return _addListener(this,A,e,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(A,e){return _addListener(this,A,e,!0)},EventEmitter.prototype.once=function(A,e){return checkListener(e),this.on(A,_onceWrap(this,A,e)),this},EventEmitter.prototype.prependOnceListener=function(A,e){return checkListener(e),this.prependListener(A,_onceWrap(this,A,e)),this},EventEmitter.prototype.removeListener=function(A,e){var t,o,g,i,r;if(checkListener(e),void 0===(o=this._events))return this;if(void 0===(t=o[A]))return this;if(t===e||t.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete o[A],o.removeListener&&this.emit(\"removeListener\",A,t.listener||e));else if(\"function\"!=typeof t){for(g=-1,i=t.length-1;i>=0;i--)if(t[i]===e||t[i].listener===e){r=t[i].listener,g=i;break}if(g<0)return this;0===g?t.shift():spliceOne(t,g),1===t.length&&(o[A]=t[0]),void 0!==o.removeListener&&this.emit(\"removeListener\",A,r||e)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(A){var e,t,o;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[A]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[A]),this;if(0===arguments.length){var g,i=Object.keys(t);for(o=0;o<i.length;++o)\"removeListener\"!==(g=i[o])&&this.removeAllListeners(g);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(e=t[A]))this.removeListener(A,e);else if(void 0!==e)for(o=e.length-1;o>=0;o--)this.removeListener(A,e[o]);return this},EventEmitter.prototype.listeners=function(A){return _listeners(this,A,!0)},EventEmitter.prototype.rawListeners=function(A){return _listeners(this,A,!1)},EventEmitter.listenerCount=function(A,e){return\"function\"==typeof A.listenerCount?A.listenerCount(e):listenerCount.call(A,e)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};var eventsExports=events.exports,EventEmitter$1=getDefaultExportFromCjs(eventsExports),key=\"__global_unique_id__\",gud=function(){return commonjsGlobal[key]=(commonjsGlobal[key]||0)+1},gud$1=getDefaultExportFromCjs(gud),safeJsonStringify$1={exports:{}},hasProp=Object.prototype.hasOwnProperty;function throwsMessage(A){return\"[Throws: \"+(A?A.message:\"?\")+\"]\"}function safeGetValueFromPropertyOnObject(A,e){if(hasProp.call(A,e))try{return A[e]}catch(A){return throwsMessage(A)}return A[e]}function ensureProperties(A){var e=[];return function A(t){if(null===t||\"object\"!=typeof t)return t;if(-1!==e.indexOf(t))return\"[Circular]\";if(e.push(t),\"function\"==typeof t.toJSON)try{var o=A(t.toJSON());return e.pop(),o}catch(A){return throwsMessage(A)}if(Array.isArray(t)){var g=t.map(A);return e.pop(),g}var i=Object.keys(t).reduce((function(e,o){return e[o]=A(safeGetValueFromPropertyOnObject(t,o)),e}),{});return e.pop(),i}(A)}safeJsonStringify$1.exports=function(A,e,t){return JSON.stringify(ensureProperties(A),e,t)},safeJsonStringify$1.exports.ensureProperties=ensureProperties;var safeJsonStringifyExports=safeJsonStringify$1.exports,safeJsonStringify=getDefaultExportFromCjs(safeJsonStringifyExports),browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var A=1e3,e=60*A,t=60*e,o=24*t,g=7*o,i=365.25*o;function r(A,e,t,o){var g=e>=1.5*t;return Math.round(A/t)+\" \"+o+(g?\"s\":\"\")}return ms=function(n,I){I=I||{};var s=typeof n;if(\"string\"===s&&n.length>0)return function(r){if((r=String(r)).length>100)return;var n=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!n)return;var I=parseFloat(n[1]);switch((n[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return I*i;case\"weeks\":case\"week\":case\"w\":return I*g;case\"days\":case\"day\":case\"d\":return I*o;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return I*t;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return I*e;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return I*A;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return I;default:return}}(n);if(\"number\"===s&&isFinite(n))return I.long?function(g){var i=Math.abs(g);if(i>=o)return r(g,i,o,\"day\");if(i>=t)return r(g,i,t,\"hour\");if(i>=e)return r(g,i,e,\"minute\");if(i>=A)return r(g,i,A,\"second\");return g+\" ms\"}(n):function(g){var i=Math.abs(g);if(i>=o)return Math.round(g/o)+\"d\";if(i>=t)return Math.round(g/t)+\"h\";if(i>=e)return Math.round(g/e)+\"m\";if(i>=A)return Math.round(g/A)+\"s\";return g+\"ms\"}(n);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(n))}}function setup(A){function e(A){let o,g,i,r=null;function n(){for(var A=arguments.length,t=new Array(A),g=0;g<A;g++)t[g]=arguments[g];if(!n.enabled)return;const i=n,r=Number(new Date),I=r-(o||r);i.diff=I,i.prev=o,i.curr=r,o=r,t[0]=e.coerce(t[0]),\"string\"!=typeof t[0]&&t.unshift(\"%O\");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((A,o)=>{if(\"%%\"===A)return\"%\";s++;const g=e.formatters[o];if(\"function\"==typeof g){const e=t[s];A=g.call(i,e),t.splice(s,1),s--}return A})),e.formatArgs.call(i,t);(i.log||e.log).apply(i,t)}return n.namespace=A,n.useColors=e.useColors(),n.color=e.selectColor(A),n.extend=t,n.destroy=e.destroy,Object.defineProperty(n,\"enabled\",{enumerable:!0,configurable:!1,get:()=>null!==r?r:(g!==e.namespaces&&(g=e.namespaces,i=e.enabled(A)),i),set:A=>{r=A}}),\"function\"==typeof e.init&&e.init(n),n}function t(A,t){const o=e(this.namespace+(void 0===t?\":\":t)+A);return o.log=this.log,o}function o(A){return A.toString().substring(2,A.toString().length-2).replace(/\\.\\*\\?$/,\"*\")}return e.debug=e,e.default=e,e.coerce=function(A){if(A instanceof Error)return A.stack||A.message;return A},e.disable=function(){const A=[...e.names.map(o),...e.skips.map(o).map((A=>\"-\"+A))].join(\",\");return e.enable(\"\"),A},e.enable=function(A){let t;e.save(A),e.namespaces=A,e.names=[],e.skips=[];const o=(\"string\"==typeof A?A:\"\").split(/[\\s,]+/),g=o.length;for(t=0;t<g;t++)o[t]&&(\"-\"===(A=o[t].replace(/\\*/g,\".*?\"))[0]?e.skips.push(new RegExp(\"^\"+A.slice(1)+\"$\")):e.names.push(new RegExp(\"^\"+A+\"$\")))},e.enabled=function(A){if(\"*\"===A[A.length-1])return!0;let t,o;for(t=0,o=e.skips.length;t<o;t++)if(e.skips[t].test(A))return!1;for(t=0,o=e.names.length;t<o;t++)if(e.names[t].test(A))return!0;return!1},e.humanize=requireMs(),e.destroy=function(){console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\")},Object.keys(A).forEach((t=>{e[t]=A[t]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(A){let t=0;for(let e=0;e<A.length;e++)t=(t<<5)-t+A.charCodeAt(e),t|=0;return e.colors[Math.abs(t)%e.colors.length]},e.enable(e.load()),e}var common=setup;!function(A,e){e.formatArgs=function(e){if(e[0]=(this.useColors?\"%c\":\"\")+this.namespace+(this.useColors?\" %c\":\" \")+e[0]+(this.useColors?\"%c \":\" \")+\"+\"+A.exports.humanize(this.diff),!this.useColors)return;const t=\"color: \"+this.color;e.splice(1,0,t,\"color: inherit\");let o=0,g=0;e[0].replace(/%[a-zA-Z%]/g,(A=>{\"%%\"!==A&&(o++,\"%c\"===A&&(g=o))})),e.splice(g,0,t)},e.save=function(A){try{A?e.storage.setItem(\"debug\",A):e.storage.removeItem(\"debug\")}catch(A){}},e.load=function(){let A;try{A=e.storage.getItem(\"debug\")}catch(A){}!A&&\"undefined\"!=typeof process&&\"env\"in process&&(A=process.env.DEBUG);return A},e.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&(\"renderer\"===window.process.type||window.process.__nwjs))return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;let A;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&(A=navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/))&&parseInt(A[1],10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},e.storage=function(){try{return localStorage}catch(A){}}(),e.destroy=(()=>{let A=!1;return()=>{A||(A=!0,console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\"))}})(),e.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],e.log=console.debug||console.log||(()=>{}),A.exports=common(e);const{formatters:t}=A.exports;t.j=function(A){try{return JSON.stringify(A)}catch(A){return\"[UnexpectedJSONParseError]: \"+A.message}}}(browser,browser.exports);var browserExports=browser.exports,Debug=getDefaultExportFromCjs(browserExports);const logPingPong=!1,logSyncPingPong=!1,isProd=!0,uploadLog=Debug(\"RTM:DEBUG\");uploadLog.enabled=!isProd;var UploadState=function(A){return A[A.Uploading=0]=\"Uploading\",A[A.Free=1]=\"Free\",A}(UploadState||{});class LogUploader{constructor(A){_defineProperty$1(this,\"uploadRequest\",void 0),_defineProperty$1(this,\"uploadState\",void 0),_defineProperty$1(this,\"uploadResendCount\",void 0),_defineProperty$1(this,\"LogCache\",void 0),_defineProperty$1(this,\"LogsToPost\",void 0),_defineProperty$1(this,\"processId\",void 0),_defineProperty$1(this,\"sdkVersion\",void 0),_defineProperty$1(this,\"logId\",void 0),_defineProperty$1(this,\"PrivateConfig\",void 0),_defineProperty$1(this,\"privateLogUploadHosts\",void 0),this.processId=A.processId,this.sdkVersion=A.sdkVersion,this.PrivateConfig=A.PrivateConfig,this.uploadRequest=A.uploadRequest,this.uploadState=UploadState.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0,this.privateLogUploadHosts=A.privateLogUploadHosts}upload(A,e){this.LogCache.push(e),this.uploadState===UploadState.Free&&navigator.onLine&&void 0!==getParameter(\"VID\").get(A)&&(this.LogsToPost=this.LogCache.length<LOG_UPLOAD_MAX_ITEMS?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,LOG_UPLOAD_MAX_ITEMS),this.postLog(A,this.LogsToPost))}postLog(A,e){this.uploadState=UploadState.Uploading,setTimeout((async()=>{const t={sdk_version:this.sdkVersion,process_id:this.processId,payload:JSON.stringify(e)};try{var o;await this.uploadRequest(A,t,null!==(o=this.PrivateConfig.cloudProxy)&&void 0!==o&&o,this.privateLogUploadHosts)}catch(e){const t=this.uploadResendCount++<2?2e3:1e4;return void setTimeout((()=>this.postLog(A,this.LogsToPost)),t)}0!==this.LogCache.length?(this.uploadResendCount=0,this.LogsToPost=this.LogCache.length<LOG_UPLOAD_MAX_ITEMS?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,LOG_UPLOAD_MAX_ITEMS),this.postLog(A,this.LogsToPost)):this.uploadState=UploadState.Free}),getParameter(\"LOG_UPLOAD_INTERVAL\"))}}const LOG_SERVICE_MAIN_DOMAIN=\"logservice-rtm.agora.io\",LOG_SERVICE_BACKUP_DOMAIN=\"rtm.logservice.sd-rtn.com\",_uploadRequest=async function(A,e,t,o){var g,i;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!getParameter(\"VID\").get(A))return;if(r>2)return;const n={withCredentials:!0,body:e,timeout:2e4,headers:{vid:getParameter(\"VID\").get(A),\"Content-Encoding\":\"gzip\"}},I=o&&getPrivateSettingsPortAndDomains(o),s=null==I?void 0:I.hostname,C=null!==(g=null==s?void 0:s.length)&&void 0!==g?g:0,E=null==I?void 0:I.port,a=s&&s[0],B=s&&s[C-1],Q=r>0?(null==areaConfig?void 0:areaConfig.LOG_UPLOAD_SERVER[0])||(null!=B?B:LOG_SERVICE_BACKUP_DOMAIN):(null==areaConfig?void 0:areaConfig.LOG_UPLOAD_SERVER[0])||(null!=a?a:LOG_SERVICE_MAIN_DOMAIN),c=t&&!o?\"https://\".concat(null!==(i=null==areaConfig?void 0:areaConfig.PROXY_NGINX[0])&&void 0!==i?i:\"webrtc-cloud-proxy.sd-rtn.com\",\"/ls/?h=\").concat(Q,\"&p=\").concat(null!=E?E:443,\"&d=upload/v1\"):\"https://\".concat(Q).concat(E?\":\".concat(E):\"\",\"/upload/v1\");await postWithAbortSignal(c,n).catch((g=>_uploadRequest(A,e,t,o,r+1)))},logUploaders=new Map,logUploader=(A,e)=>{if(logUploaders.has(A)&&logUploaders.get(A)instanceof LogUploader)return logUploaders.get(A);{const t=new LogUploader({processId:\"process-\".concat(A),sdkVersion:\"Agora_RTM_SDK_for_Web_\".concat(BUILD),uploadRequest:_uploadRequest,PrivateConfig:{},privateLogUploadHosts:e});return logUploaders.set(A,t),t}},blacklistedKeywords=[\"text\",\"payload\",\"rawMessage\",\"thumbnail\",\"attributeInfos\",\"keys\",\"value\",\"extra\"],sensitiveKeywords=[\"account\",\"ticket\",\"uid\",\"detail\",\"token\",\"fileName\",\"cname\",\"user\",\"group\",\"key\",\"origin\",\"users\",\"src\",\"dst\",\"lastUpdateUserId\",\"channel\",\"cert\",\"wan_ip\",\"userId\",\"authorUid\",\"target\",\"lockName\",\"appTicket\",\"channelName\",\"publisher\",\"succeedUsers\",\"failedUsers\"],whitelistedKeywords=[\"serverReceivedTs\",\"hasPeerReceived\",\"messageType\",\"enableNotificationToChannelMembers\",\"lastUpdateTs\"],sensitiveEvents=[\"message\",\"presence\",\"topic\",\"lock\",\"storage\",\"MessageFromPeer\",\"LocalInvitationRefused\",\"LocalInvitationAccepted\",\"RemoteInvitationCanceled\",\"PeersOnlineStatusChanged\",\"AttributesUpdated\",\"MemberJoined\"],sensitiveArgsHandler=A=>{if(\"string\"==typeof A)return replaceRangeWithAsterisk(A);if(Array.isArray(A)&&A.every((A=>\"string\"==typeof A)))return A.map((A=>replaceRangeWithAsterisk(A)));if(!isPrimitive(A)){const e={};for(let t=0;t<whitelistedKeywords.length;t++){const o=whitelistedKeywords[t];o in A&&(e[o]=A[o])}if(Object.keys(e).length>0)return e;if(Object.keys(A).length<5){for(let t=0,o=Object.entries(A);t<o.length;t++){const[A,g]=o[t];blacklistedKeywords.includes(A)?e[A]=\"[Hidden Info]\":e[replaceRangeWithAsterisk(A)]=replaceRangeWithAsterisk(g)}return e}return\"object\"==typeof A&&null!==A?safeJsonStringify(Array.isArray(A)?A.map(getPlain):getPlain(A)):\"[Sensitive Info]\"}return A},filterLogObject=A=>handleLogObject(cloneDeep$1(A),blacklistedKeywords,sensitiveKeywords),getPlain=A=>\"object\"==typeof A?isPlainObject$3(A)?filterLogObject(A):A.constructor&&A.constructor.name:A,formatLogTextAndParameters=(A,e)=>{if(A instanceof Error)return A.message;if(\"string\"!=typeof A)return JSON.stringify(filterLogObject(A));const t=e.map((A=>A instanceof Error?A.message:\"object\"==typeof A&&null!==A?safeJsonStringify(Array.isArray(A)?A.map(getPlain):getPlain(A)):A));return format$1(A.replace(/%[%Oo]/g,(A=>\"%%\"===A?\"%\":\"%o\"===A||\"%O\"===A?\"%s\":A)),...t)},logAndUploadGenerator=(A,e,t,o,g,i,r)=>{const n=Debug(e);n.enabled=!0,n.log=i,n.useColors=!1;return function(i){for(var I=arguments.length,s=new Array(I>1?I-1:0),C=1;C<I;C++)s[C-1]=arguments[C];if(g.logUpload){const g=addPeriodIfNeeded(i);var E=formatLogTextAndParameters(g,s);const n=logUploader(t,r),I=\"\".concat(n.logId++);n.upload(A,{log_item_id:I,log_level:e,payload_str:\"[\".concat(getUTCTimestamp$1(),\"] - \").concat(String(o).slice(0,7)).concat(o.length>7?\"...\":\"\",\" - \").concat(e,\" - \").concat(E.length>256?E.slice(0,256):E)})}const a=A=>{const e=E||formatLogTextAndParameters(addPeriodIfNeeded(i),s),t=getParameter(\"LOG_HANDLER\");isFunction$6(t)&&t({level:A,message:e}),n(\"[UTC_Time: \".concat(getUTCTimestamp$1(),\"][uid: \").concat(maskMiddleOfString(o),\"]\").concat(e))};switch(e){case\"RTM:INFO\":g.logFilter.info&&a(\"log\");break;case\"RTM:WARN\":g.logFilter.warn&&a(\"warning\");break;case\"RTM:ERROR\":g.logFilter.error&&a(\"error\");break;case\"RTM:TRACK\":g.logFilter.track&&a(\"log\");break;case\"RTM:MSG:RECV\":case\"RTM:MSG:SEND\":case\"RTM:DEBUG\":g.logFilter.debug&&a(\"debug\")}}};let loggerId;const prefixer=A=>e=>{const t=1===loggerId||void 0===A?\"\":\"Ins#\".concat(A,\" \");return\"\".concat(t).concat(e)},loggerGenerator=(A,e,t,o,g,i,r)=>{const n=prefixer(loggerId);return logAndUploadGenerator(A,\"RTM:\".concat(t),g,i,o,(function(A){return e(n(A))}),r)};class EventBase extends EventEmitter$1{constructor(A,e){var t;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(super(),t=this,_defineProperty$1(this,\"logError\",void 0),_defineProperty$1(this,\"invokeTracker\",void 0),_defineProperty$1(this,\"resultTracker\",void 0),_defineProperty$1(this,\"errorTracker\",void 0),_defineProperty$1(this,\"eventTracker\",void 0),_defineProperty$1(this,\"info\",void 0),_defineProperty$1(this,\"warn\",void 0),_defineProperty$1(this,\"log\",void 0),_defineProperty$1(this,\"genLogger\",void 0),_defineProperty$1(this,\"loggerId\",void 0),_defineProperty$1(this,\"logger\",void 0),_defineProperty$1(this,\"name\",void 0),this.logger=A,this.name=e,this.loggerId=A.loggerId,this.info=A.info,this.warn=A.warn,this.logError=A.logError,this.genLogger=A.genLogger,this.log=A.genLogger(\"RTM:DEBUG\",\"<\".concat(e,\"> \")),this.invokeTracker=A.genTracker(\"Invoke\"),this.eventTracker=A.genTracker(\"Event\"),this.resultTracker=A.genTracker(\"Result\"),this.errorTracker=A.genTracker(\"Error\"),o){const A=this.emit.bind(this),o=function(){for(var o=arguments.length,g=new Array(o),i=0;i<o;i++)g[i]=arguments[i];const[r,...n]=g,I=sensitiveEvents.includes(r);t.eventTracker(\"%s: \".concat(n.length>0?\"%s emitted with args: \".concat(n.map((()=>\"%o\"))):\"%s emitted\"),e,r,...I?n.map(sensitiveArgsHandler):n);try{return A(...g),!0}catch(A){return t.logError(\"Caught in the callback function of the event %s\",r,A),!1}};this.emit=o}}}function initLoggerId(A,e){loggerId=gud$1();const t=new LogUploader({processId:\"process-\".concat(A),sdkVersion:\"Agora_RTM_SDK_for_Web_\".concat(BUILD),uploadRequest:_uploadRequest,PrivateConfig:{},privateLogUploadHosts:e});return logUploaders.set(A,t),loggerId}const genInfoLogger=(A,e,t,o,g)=>loggerGenerator(A,console.log,\"INFO\",e,t,o,g),genWarnLogger=(A,e,t,o,g)=>loggerGenerator(A,console.warn,\"WARN\",e,t,o,g),genErrorLogger=(A,e,t,o,g)=>loggerGenerator(A,console.error,\"ERROR\",e,t,o,g),debugLoggerGenerator=(A,e,t,o,g,i)=>function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";const I=prefixer(e),s=console.log,C=logAndUploadGenerator(A,r,o,g,t,(function(A){return s(I(A))}),i);return function(A){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];return C(n+A,...t)}},trackLoggerGenerator=(A,e,t,o,g,i)=>r=>debugLoggerGenerator(A,e,t,o,g,i)(\"RTM:TRACK\",\"[\".concat(r,\"] \"));function loggedSensitive(A,e,t){let o=t;void 0===o&&(o=Object.getOwnPropertyDescriptor(A,e));const g=o.value;return o.value=function(){for(var A=arguments.length,t=new Array(A),o=0;o<A;o++)t[o]=arguments[o];this.invokeTracker(\"%s: \".concat(t.length>0?\"%s with args: \".concat(t.map((()=>\"%o\"))):\"%s\"),this.name,e,...t.map(sensitiveArgsHandler));try{var i=g.apply(this,t)}catch(A){throw this.logError(\"\".concat(void 0!==A.code?\"Error Code \".concat(A.code,\": \"):\"\",\"%s failed\").concat(t.length>0?\" with args: \".concat(t.map((()=>\"%o\"))):\"\"),e,...t.map(sensitiveArgsHandler)),A.originalError&&this.logError(A.originalError),this.errorTracker(A),A}const r=Date.now();return(async()=>{let A;try{A=await i}catch(A){return this.logError(\"\".concat(void 0!==A.code?\"Error Code \".concat(A.code,\": \"):\"\",\"%s failed\").concat(t.length>0?\" with args: \".concat(t.map((()=>\"%o\"))):\"\"),e,...t.map(sensitiveArgsHandler)),A.originalError&&this.logError(A.originalError),void this.errorTracker(A)}var o;A!==i?void 0===A?this.resultTracker(\"%s promise resolves after %dms\",e,Date.now()-r):this.resultTracker(\"%s promise resolves after %dms, result is %o\",e,Date.now()-r,sensitiveArgsHandler(A)):isAnyObject(A)&&!isPlainObject$3(A)?this.resultTracker(\"%s result is %s\",e,A.name||(null===(o=A.constructor)||void 0===o?void 0:o.name)):this.resultTracker(\"%s result is %o\",e,A?sensitiveArgsHandler(A):\"void\")})(),i},o}function isValidAppId(A){return/^[\\dA-Za-z]{32}$/.test(A)}function isValidTopic(A){return\"string\"==typeof A&&A.length>0&&!A.startsWith(\"_\")&&isValidString(A)}function validateTopicName(A,e){const{code:t,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_TOPIC_NAME);if(!isValidTopic(A))throw new RtmInvalidArgumentError(e,[o],t);if(0===A.length||new Blob([null!=A?A:\"\"]).size>TOPIC_NAME_SIZE)throw new RtmInvalidArgumentError(e,[o],t)}function isValidId(A){return\"string\"==typeof A&&!A.startsWith(\"_\")&&/^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\,\\-\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\_\\`\\{\\|\\}\\~]{1,64}$/.test(A)}function isValidString(A){return\"string\"==typeof A&&/^[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 !*#$%&()+,-:;<=>?@\\[\\]\\^_`{\\|}~\\u4e00-\\u9fff]+$/.test(A)}function isUintString(A){const e=Number(A);return Number.isInteger(e)&&e>=0}function isValidIp(A){let e;try{e=A.split(\".\").map((A=>Number(A)))}catch(A){return!1}if(4!==e.length)return!1;if(0===e[0])return!1;for(let A=0,t=e;A<t.length;A++){const e=t[A];if(!Number.isInteger(e))return!1;if(e<0||e>255)return!1}return!0}function validMetaDataItem(A,e){let{items:t,maxMetaDataCount:o,maxMetaValueSize:g,majorRevision:i,type:r}=e;if(!Array.isArray(t)){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_METADATA_ITEM);throw new RtmInvalidArgumentError(A,[t],e)}const n=t.map((A=>[A.getKey(),A.getValue()]));if(n.length>o){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_METADATA_ITEM_EXCEED_LIMITATION);throw new RtmLimitExceededError(A,[t],e)}if(0===n.length){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_METADATA_ITEM);throw new RtmInvalidArgumentError(A,[t],e)}if(\"number\"!=typeof i||i<-1||i%1!=0){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}if(t.map((e=>{if((null==e?void 0:e.getRevision())<-1){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}})),(\"Update\"===r||\"Delete\"===r)&&0===i){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}if((\"Update\"===r||\"Delete\"===r)&&t.map((A=>A.getRevision())).includes(0)){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}for(let e=0;e<n.length;e++){const[t,o]=n[e],i=new Blob([null!=t?t:\"\"]).size,I=new Blob([null!=o?o:\"\"]).size;if(0===i||\"_\"===(null==t?void 0:t[0])||\"string\"!=typeof t){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_KEY);throw new RtmInvalidArgumentError(A,[t],e)}if(i>RTM_METADATA_KEY_MAX_LENGTH){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_KEY_LENGTH_OVERFLOW);throw new RtmInvalidArgumentError(A,[t],e)}if(\"Delete\"!==r&&\"string\"!=typeof o){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_VALUE);throw new RtmInvalidArgumentError(A,[t],e)}if(\"Delete\"!==r&&I>g){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_VALUE_LENGTH_OVERFLOW);throw new RtmLimitExceededError(A,[t],e)}}}function validateMetaDataSize(A,e){if(new Blob([null!=e?e:\"\"]).size>RTM_METADATA_MAX_LENGTH){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_METADATA_LENGTH_OVERFLOW);throw new RtmLimitExceededError(A,[t],e)}}function validMetaDataMajorRevisionForRemove(A,e){if(e<-1){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}if(e%1!=0){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}if(0===e){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(A,[t],e)}}function validStateOfPresence(A,e){for(const o in A){var t;const g=new Blob([null!==(t=A[o])&&void 0!==t?t:\"\"]).size;if(validStateKeyOfPresence(o,e),g>MAX_STATE_VALUE_SIZE){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_STATE_VALUE_SIZE_OVERFLOW);throw new RtmLimitExceededError(e,[t],A)}}}function validStateKeyOfPresence(A,e){const t=new Blob([null!=A?A:\"\"]).size;if(t>MAX_STATE_KEY_SIZE){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_STATE_KEY_SIZE_OVERFLOW);throw new RtmInvalidArgumentError(e,[t],A)}if(0===t||!isValidString(A)||\"_\"===(null==A?void 0:A[0])){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_INVALID_STATE_KEY);throw new RtmInvalidArgumentError(e,[t],A)}}function checkKeyValidity(A){return 0!==A.length&&A[0]!==K_SYNC_INTERNAL_KEY_PREFIX}function validateMessageSize(A,e){if(!A||\"string\"!=typeof A&&!(A instanceof Uint8Array)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_MESSAGE);throw new RtmInvalidArgumentError(e,[t],A)}if((\"string\"==typeof A?new Blob([null!=A?A:\"\"]).size:A.byteLength)>PUBLISH_MESSAGE_SIZE){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION);throw new RtmInvalidArgumentError(e,[t],A)}}function validateCustomType(A,e){const t=new Blob([A]);if(t.size>CUSTOM_TYPE_SIZE){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_CUSTOM_TYPE_LENGTH_OVERFLOW);throw new RtmInvalidArgumentError(e,[t],A)}if(0===t.size){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_CUSTOM_TYPE);throw new RtmInvalidArgumentError(e,[t],A)}}const get007Version=()=>\"007\",get006Version=()=>\"006\";function validateToken(A,e,t,o){if(e===A)return;function g(){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INCONSISTENT_APPID);throw new RtmInvalidArgumentError(t,[e],A)}function i(){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_TOKEN);throw new RtmInvalidArgumentError(t,[e],A)}const r=null==A?void 0:A.slice(0,3);try{const t=r===get006Version()?fromStringWith006(A):r!==get007Version()||fromStringWith007(A);\"string\"==typeof t&&t!==e&&(isValidAppId(t)||i(),o(\"appId from token is '\".concat(t,\"', not match the appId of config.\")),g()),t&&t!==e&&g()}catch(A){o(A),i()}}function validateChannelType(A,e){if(\"MESSAGE\"!==e&&\"STREAM\"!==e){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_TYPE);throw new RtmInvalidArgumentError(A,[t],e)}}function validateHistoryChannelType(A,e){if(\"MESSAGE\"!==e&&\"USER\"!==e){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_TYPE);throw new RtmInvalidArgumentError(A,[t],e)}}function __awaiter(A,e,t,o){return new(t||(t=Promise))((function(e,g){function i(A){try{n(o.next(A))}catch(A){g(A)}}function r(A){try{n(o.throw(A))}catch(A){g(A)}}function n(A){var o;A.done?e(A.value):(o=A.value,o instanceof t?o:new t((function(A){A(o)}))).then(i,r)}n((o=o.apply(A,[])).next())}))}function __generator(A,e){var t,o,g,i,r={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function n(i){return function(n){return function(i){if(t)throw new TypeError(\"Generator is already executing.\");for(;r;)try{if(t=1,o&&(g=2&i[0]?o.return:i[0]?o.throw||((g=o.return)&&g.call(o),0):o.next)&&!(g=g.call(o,i[1])).done)return g;switch(o=0,g&&(i=[2&i[0],g.value]),i[0]){case 0:case 1:g=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(g=r.trys,(g=g.length>0&&g[g.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!g||i[1]>g[0]&&i[1]<g[3])){r.label=i[1];break}if(6===i[0]&&r.label<g[1]){r.label=g[1],g=i;break}if(g&&r.label<g[2]){r.label=g[2],r.ops.push(i);break}g[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(A,r)}catch(A){i=[6,A],o=0}finally{t=g=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,n])}}}function __read(A,e){var t=\"function\"==typeof Symbol&&A[Symbol.iterator];if(!t)return A;var o,g,i=t.call(A),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(A){g={error:A}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(g)throw g.error}}return r}function __spreadArray(A,e,t){if(2===arguments.length)for(var o,g=0,i=e.length;g<i;g++)!o&&g in e||(o||(o=Array.prototype.slice.call(e,0,g)),o[g]=e[g]);return A.concat(o||Array.prototype.slice.call(e))}var defaultErrorConfig={withStackTrace:!1},createNeverThrowError=function(A,e,t){return void 0===t&&(t=defaultErrorConfig),{data:e.isOk()?{type:\"Ok\",value:e.value}:{type:\"Err\",value:e.error},message:A,stack:t.withStackTrace?(new Error).stack:void 0}},ResultAsync=function(){function A(A){this._promise=A}return A.fromSafePromise=function(e){return new A(e.then((function(A){return new Ok(A)})))},A.fromPromise=function(e,t){return new A(e.then((function(A){return new Ok(A)})).catch((function(A){return new Err(t(A))})))},A.combine=function(A){return combineResultAsyncList(A)},A.combineWithAllErrors=function(A){return combineResultAsyncListWithAllErrors(A)},A.prototype.map=function(e){var t=this;return new A(this._promise.then((function(A){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(o){switch(o.label){case 0:return A.isErr()?[2,new Err(A.error)]:(t=Ok.bind,[4,e(A.value)]);case 1:return[2,new(t.apply(Ok,[void 0,o.sent()]))]}}))}))})))},A.prototype.mapErr=function(e){var t=this;return new A(this._promise.then((function(A){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(o){switch(o.label){case 0:return A.isOk()?[2,new Ok(A.value)]:(t=Err.bind,[4,e(A.error)]);case 1:return[2,new(t.apply(Err,[void 0,o.sent()]))]}}))}))})))},A.prototype.andThen=function(e){return new A(this._promise.then((function(t){if(t.isErr())return new Err(t.error);var o=e(t.value);return o instanceof A?o._promise:o})))},A.prototype.orElse=function(e){var t=this;return new A(this._promise.then((function(A){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(t){return A.isErr()?[2,e(A.error)]:[2,new Ok(A.value)]}))}))})))},A.prototype.match=function(A,e){return this._promise.then((function(t){return t.match(A,e)}))},A.prototype.unwrapOr=function(A){return this._promise.then((function(e){return e.unwrapOr(A)}))},A.prototype.then=function(A,e){return this._promise.then(A,e)},A}(),errAsync=function(A){return new ResultAsync(Promise.resolve(new Err(A)))},fromPromise=ResultAsync.fromPromise;ResultAsync.fromSafePromise;var appendValueToEndOfList=function(A){return function(e){return __spreadArray(__spreadArray([],__read(e),!1),[A],!1)}},combineResultList=function(A){return A.reduce((function(A,e){return A.isOk()?e.isErr()?err(e.error):A.map(appendValueToEndOfList(e.value)):A}),ok([]))},combineResultAsyncList=function(A){return ResultAsync.fromSafePromise(Promise.all(A)).andThen(combineResultList)},combineResultListWithAllErrors=function(A){return A.reduce((function(A,e){return e.isErr()?A.isErr()?err(__spreadArray(__spreadArray([],__read(A.error),!1),[e.error],!1)):err([e.error]):A.isErr()?A:ok(__spreadArray(__spreadArray([],__read(A.value),!1),[e.value],!1))}),ok([]))},combineResultAsyncListWithAllErrors=function(A){return ResultAsync.fromSafePromise(Promise.all(A)).andThen(combineResultListWithAllErrors)},Result;!function(A){A.fromThrowable=function(A,e){return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];try{var g=A.apply(void 0,__spreadArray([],__read(t),!1));return ok(g)}catch(A){return err(e?e(A):A)}}},A.combine=function(A){return combineResultList(A)},A.combineWithAllErrors=function(A){return combineResultListWithAllErrors(A)}}(Result||(Result={}));var ok=function(A){return new Ok(A)},err=function(A){return new Err(A)},Ok=function(){function A(A){this.value=A}return A.prototype.isOk=function(){return!0},A.prototype.isErr=function(){return!this.isOk()},A.prototype.map=function(A){return ok(A(this.value))},A.prototype.mapErr=function(A){return ok(this.value)},A.prototype.andThen=function(A){return A(this.value)},A.prototype.orElse=function(A){return ok(this.value)},A.prototype.asyncAndThen=function(A){return A(this.value)},A.prototype.asyncMap=function(A){return ResultAsync.fromSafePromise(A(this.value))},A.prototype.unwrapOr=function(A){return this.value},A.prototype.match=function(A,e){return A(this.value)},A.prototype._unsafeUnwrap=function(A){return this.value},A.prototype._unsafeUnwrapErr=function(A){throw createNeverThrowError(\"Called `_unsafeUnwrapErr` on an Ok\",this,A)},A}(),Err=function(){function A(A){this.error=A}return A.prototype.isOk=function(){return!1},A.prototype.isErr=function(){return!this.isOk()},A.prototype.map=function(A){return err(this.error)},A.prototype.mapErr=function(A){return err(A(this.error))},A.prototype.andThen=function(A){return err(this.error)},A.prototype.orElse=function(A){return A(this.error)},A.prototype.asyncAndThen=function(A){return errAsync(this.error)},A.prototype.asyncMap=function(A){return errAsync(this.error)},A.prototype.unwrapOr=function(A){return A},A.prototype.match=function(A,e){return e(this.error)},A.prototype._unsafeUnwrap=function(A){throw createNeverThrowError(\"Called `_unsafeUnwrap` on an Err\",this,A)},A.prototype._unsafeUnwrapErr=function(A){return this.error},A}();Result.fromThrowable;let ConnectionDisconnectedReason=function(A){return A.LEAVE=\"LEAVE\",A.NETWORK_ERROR=\"NETWORK_ERROR\",A.SERVER_ERROR=\"SERVER_ERROR\",A.UID_BANNED=\"UID_BANNED\",A.FALLBACK=\"FALLBACK\",A.IP_BANNED=\"IP_BANNED\",A.CHANNEL_BANNED=\"CHANNEL_BANNED\",A.LICENSE_MISSING=\"LICENSE_MISSING\",A.LICENSE_EXPIRED=\"LICENSE_EXPIRED\",A.LICENSE_MINUTES_EXCEEDED=\"LICENSE_MINUTES_EXCEEDED\",A.LICENSE_PERIOD_INVALID=\"LICENSE_PERIOD_INVALID\",A.LICENSE_MULTIPLE_SDK_SERVICE=\"LICENSE_MULTIPLE_SDK_SERVICE\",A.LICENSE_ILLEGAL=\"LICENSE_ILLEGAL\",A.TOKEN_EXPIRE=\"TOKEN_EXPIRE\",A}({}),AgoraRTCErrorCode=function(A){return A.UNEXPECTED_ERROR=\"UNEXPECTED_ERROR\",A.UNEXPECTED_RESPONSE=\"UNEXPECTED_RESPONSE\",A.TIMEOUT=\"TIMEOUT\",A.INVALID_PARAMS=\"INVALID_PARAMS\",A.NOT_READABLE=\"NOT_READABLE\",A.NOT_SUPPORTED=\"NOT_SUPPORTED\",A.INVALID_OPERATION=\"INVALID_OPERATION\",A.OPERATION_ABORTED=\"OPERATION_ABORTED\",A.WEB_SECURITY_RESTRICT=\"WEB_SECURITY_RESTRICT\",A.EXCHANGE_SDP_FAILED=\"EXCHANGE_SDP_FAILED\",A.ADD_CANDIDATE_FAILED=\"ADD_CANDIDATE_FAILED\",A.DATACHANNEL_FAILED=\"DATACHANNEL_FAILED\",A.NETWORK_ERROR=\"NETWORK_ERROR\",A.NETWORK_TIMEOUT=\"NETWORK_TIMEOUT\",A.NETWORK_RESPONSE_ERROR=\"NETWORK_RESPONSE_ERROR\",A.API_INVOKE_TIMEOUT=\"API_INVOKE_TIMEOUT\",A.ENUMERATE_DEVICES_FAILED=\"ENUMERATE_DEVICES_FAILED\",A.DEVICE_NOT_FOUND=\"DEVICE_NOT_FOUND\",A.ELECTRON_IS_NULL=\"ELECTRON_IS_NULL\",A.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR=\"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\",A.CHROME_PLUGIN_NO_RESPONSE=\"CHROME_PLUGIN_NO_RESPONSE\",A.CHROME_PLUGIN_NOT_INSTALL=\"CHROME_PLUGIN_NOT_INSTALL\",A.MEDIA_OPTION_INVALID=\"MEDIA_OPTION_INVALID\",A.PERMISSION_DENIED=\"PERMISSION_DENIED\",A.CONSTRAINT_NOT_SATISFIED=\"CONSTRAINT_NOT_SATISFIED\",A.TRACK_IS_DISABLED=\"TRACK_IS_DISABLED\",A.GET_VIDEO_ELEMENT_VISIBLE_ERROR=\"GET_VIDEO_ELEMENT_VISIBLE_ERROR\",A.SHARE_AUDIO_NOT_ALLOWED=\"SHARE_AUDIO_NOT_ALLOWED\",A.LOW_STREAM_ENCODING_ERROR=\"LOW_STREAM_ENCODING_ERROR\",A.SET_ENCODING_PARAMETER_ERROR=\"SET_ENCODING_PARAMETER_ERROR\",A.TRACK_STATE_UNREACHABLE=\"TRACK_STATE_UNREACHABLE\",A.INVALID_UINT_UID_FROM_STRING_UID=\"INVALID_UINT_UID_FROM_STRING_UID\",A.CAN_NOT_GET_PROXY_SERVER=\"CAN_NOT_GET_PROXY_SERVER\",A.CAN_NOT_GET_GATEWAY_SERVER=\"CAN_NOT_GET_GATEWAY_SERVER\",A.VOID_GATEWAY_ADDRESS=\"VOID_GATEWAY_ADDRESS\",A.UID_CONFLICT=\"UID_CONFLICT\",A.MULTI_UNILBS_RESPONSE_ERROR=\"MULTI_UNILBS_RESPONSE_ERROR\",A.UPDATE_TICKET_FAILED=\"UPDATE_TICKET_FAILED\",A.TOKEN_EXPIRE=\"TOKEN_EXPIRE\",A.INVALID_LOCAL_TRACK=\"INVALID_LOCAL_TRACK\",A.INVALID_TRACK=\"INVALID_TRACK\",A.SENDER_NOT_FOUND=\"SENDER_NOT_FOUND\",A.CREATE_OFFER_FAILED=\"CREATE_OFFER_FAILED\",A.SET_ANSWER_FAILED=\"SET_ANSWER_FAILED\",A.ICE_FAILED=\"ICE_FAILED\",A.PC_CLOSED=\"PC_CLOSED\",A.SENDER_REPLACE_FAILED=\"SENDER_REPLACE_FAILED\",A.GET_LOCAL_CAPABILITIES_FAILED=\"GET_LOCAL_CAPABILITIES_FAILED\",A.GET_LOCAL_CONNECTION_PARAMS_FAILED=\"GET_LOCAL_CONNECTION_PARAMS_FAILED\",A.SUBSCRIBE_FAILED=\"SUBSCRIBE_FAILED\",A.UNSUBSCRIBE_FAILED=\"UNSUBSCRIBE_FAILED\",A.GATEWAY_P2P_LOST=\"GATEWAY_P2P_LOST\",A.NO_ICE_CANDIDATE=\"NO_ICE_CANDIDATE\",A.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS=\"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\",A.EXIST_DISABLED_VIDEO_TRACK=\"EXIST_DISABLED_VIDEO_TRACK\",A.INVALID_REMOTE_USER=\"INVALID_REMOTE_USER\",A.REMOTE_USER_IS_NOT_PUBLISHED=\"REMOTE_USER_IS_NOT_PUBLISHED\",A.CUSTOM_REPORT_SEND_FAILED=\"CUSTOM_REPORT_SEND_FAILED\",A.CUSTOM_REPORT_FREQUENCY_TOO_HIGH=\"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\",A.FETCH_AUDIO_FILE_FAILED=\"FETCH_AUDIO_FILE_FAILED\",A.READ_LOCAL_AUDIO_FILE_ERROR=\"READ_LOCAL_AUDIO_FILE_ERROR\",A.DECODE_AUDIO_FILE_FAILED=\"DECODE_AUDIO_FILE_FAILED\",A.WS_ABORT=\"WS_ABORT\",A.WS_DISCONNECT=\"WS_DISCONNECT\",A.WS_ERR=\"WS_ERR\",A.EXTERNAL_SIGNAL_ABORT=\"EXTERNAL_SIGNAL_ABORT\",A.LIVE_STREAMING_TASK_CONFLICT=\"LIVE_STREAMING_TASK_CONFLICT\",A.LIVE_STREAMING_INVALID_ARGUMENT=\"LIVE_STREAMING_INVALID_ARGUMENT\",A.LIVE_STREAMING_INTERNAL_SERVER_ERROR=\"LIVE_STREAMING_INTERNAL_SERVER_ERROR\",A.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED=\"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\",A.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED=\"LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED\",A.LIVE_STREAMING_CDN_ERROR=\"LIVE_STREAMING_CDN_ERROR\",A.LIVE_STREAMING_INVALID_RAW_STREAM=\"LIVE_STREAMING_INVALID_RAW_STREAM\",A.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT=\"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\",A.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE=\"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\",A.LIVE_STREAMING_WARN_FREQUENT_REQUEST=\"LIVE_STREAMING_WARN_FREQUENT_REQUEST\",A.WEBGL_INTERNAL_ERROR=\"WEBGL_INTERNAL_ERROR\",A.BEAUTY_PROCESSOR_INTERNAL_ERROR=\"BEAUTY_PROCESSOR_INTERNAL_ERROR\",A.CROSS_CHANNEL_WAIT_STATUS_ERROR=\"CROSS_CHANNEL_WAIT_STATUS_ERROR\",A.CROSS_CHANNEL_FAILED_JOIN_SRC=\"CROSS_CHANNEL_FAILED_JOIN_SEC\",A.CROSS_CHANNEL_FAILED_JOIN_DEST=\"CROSS_CHANNEL_FAILED_JOIN_DEST\",A.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST=\"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\",A.CROSS_CHANNEL_SERVER_ERROR_RESPONSE=\"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\",A.METADATA_OUT_OF_RANGE=\"METADATA_OUT_OF_RANGE\",A.LOCAL_AEC_ERROR=\"LOCAL_AEC_ERROR\",A.INVALID_PLUGIN=\"INVALID_PLUGIN\",A.DISCONNECT_P2P=\"DISCONNECT_P2P\",A.CONVERTING_IMAGEDATA_TO_BLOB_FAILED=\"CONVERTING_IMAGEDATA_TO_BLOB_FAILED\",A.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED=\"CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED\",A.INIT_DATACHANNEL_TIMEOUT=\"INIT_DATACHANNEL_TIMEOUT\",A.CREATE_DATACHANNEL_ERROR=\"CREATE_DATACHANNEL_ERROR\",A.DATACHANNEL_CONNECTION_TIMEOUT=\"DATACHANNEL_CONNECTION_TIMEOUT\",A.PROHIBITED_OPERATION=\"PROHIBITED_OPERATION\",A.IMAGE_MODERATION_UPLOAD_FAILED=\"IMAGE_MODERATION_UPLOAD_FAILED\",A.P2P_MESSAGE_FAILED=\"P2P_MESSAGE_FAILED\",A.DATASTREAM2_NOT_AVAILABLE=\"DATASTREAM2_NOT_AVAILABLE\",A}({});var umd={exports:{}};!function(A,e){var t=function(A){Object.defineProperty(A,\"__esModule\",{value:!0}),A.default=void 0;\n/**\n\t   * @license\n\t   * Copyright 2009 The Closure Library Authors\n\t   * Copyright 2020 Daniel Wirtz / The long.js Authors.\n\t   *\n\t   * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t   * you may not use this file except in compliance with the License.\n\t   * You may obtain a copy of the License at\n\t   *\n\t   *     http://www.apache.org/licenses/LICENSE-2.0\n\t   *\n\t   * Unless required by applicable law or agreed to in writing, software\n\t   * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t   * See the License for the specific language governing permissions and\n\t   * limitations under the License.\n\t   *\n\t   * SPDX-License-Identifier: Apache-2.0\n\t   */\nvar e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(A){}function t(A,e,t){this.low=0|A,this.high=0|e,this.unsigned=!!t}function o(A){return!0===(A&&A.__isLong__)}function g(A){var e=Math.clz32(A&-A);return A?31-e:e}t.prototype.__isLong__,Object.defineProperty(t.prototype,\"__isLong__\",{value:!0}),t.isLong=o;var i={},r={};function n(A,e){var t,o,g;return e?(g=0<=(A>>>=0)&&A<256)&&(o=r[A])?o:(t=s(A,0,!0),g&&(r[A]=t),t):(g=-128<=(A|=0)&&A<128)&&(o=i[A])?o:(t=s(A,A<0?-1:0,!1),g&&(i[A]=t),t)}function I(A,e){if(isNaN(A))return e?h:u;if(e){if(A<0)return h;if(A>=Q)return R}else{if(A<=-c)return w;if(A+1>=c)return D}return A<0?I(-A,e).neg():s(A%B|0,A/B|0,e)}function s(A,e,o){return new t(A,e,o)}t.fromInt=n,t.fromNumber=I,t.fromBits=s;var C=Math.pow;function E(A,e,t){if(0===A.length)throw Error(\"empty string\");if(\"number\"==typeof e?(t=e,e=!1):e=!!e,\"NaN\"===A||\"Infinity\"===A||\"+Infinity\"===A||\"-Infinity\"===A)return e?h:u;if((t=t||10)<2||36<t)throw RangeError(\"radix\");var o;if((o=A.indexOf(\"-\"))>0)throw Error(\"interior hyphen\");if(0===o)return E(A.substring(1),e,t).neg();for(var g=I(C(t,8)),i=u,r=0;r<A.length;r+=8){var n=Math.min(8,A.length-r),s=parseInt(A.substring(r,r+n),t);if(n<8){var a=I(C(t,n));i=i.mul(a).add(I(s))}else i=(i=i.mul(g)).add(I(s))}return i.unsigned=e,i}function a(A,e){return\"number\"==typeof A?I(A,e):\"string\"==typeof A?E(A,e):s(A.low,A.high,\"boolean\"==typeof e?e:A.unsigned)}t.fromString=E,t.fromValue=a;var B=4294967296,Q=B*B,c=Q/2,l=n(1<<24),u=n(0);t.ZERO=u;var h=n(0,!0);t.UZERO=h;var d=n(1);t.ONE=d;var p=n(1,!0);t.UONE=p;var y=n(-1);t.NEG_ONE=y;var D=s(-1,2147483647,!1);t.MAX_VALUE=D;var R=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=R;var w=s(0,-2147483648,!1);t.MIN_VALUE=w;var f=t.prototype;f.toInt=function(){return this.unsigned?this.low>>>0:this.low},f.toNumber=function(){return this.unsigned?(this.high>>>0)*B+(this.low>>>0):this.high*B+(this.low>>>0)},f.toString=function(A){if((A=A||10)<2||36<A)throw RangeError(\"radix\");if(this.isZero())return\"0\";if(this.isNegative()){if(this.eq(w)){var e=I(A),t=this.div(e),o=t.mul(e).sub(this);return t.toString(A)+o.toInt().toString(A)}return\"-\"+this.neg().toString(A)}for(var g=I(C(A,6),this.unsigned),i=this,r=\"\";;){var n=i.div(g),s=(i.sub(n.mul(g)).toInt()>>>0).toString(A);if((i=n).isZero())return s+r;for(;s.length<6;)s=\"0\"+s;r=\"\"+s+r}},f.getHighBits=function(){return this.high},f.getHighBitsUnsigned=function(){return this.high>>>0},f.getLowBits=function(){return this.low},f.getLowBitsUnsigned=function(){return this.low>>>0},f.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var A=0!=this.high?this.high:this.low,e=31;e>0&&!(A&1<<e);e--);return 0!=this.high?e+33:e+1},f.isZero=function(){return 0===this.high&&0===this.low},f.eqz=f.isZero,f.isNegative=function(){return!this.unsigned&&this.high<0},f.isPositive=function(){return this.unsigned||this.high>=0},f.isOdd=function(){return!(1&~this.low)},f.isEven=function(){return!(1&this.low)},f.equals=function(A){return o(A)||(A=a(A)),(this.unsigned===A.unsigned||this.high>>>31!=1||A.high>>>31!=1)&&(this.high===A.high&&this.low===A.low)},f.eq=f.equals,f.notEquals=function(A){return!this.eq(A)},f.neq=f.notEquals,f.ne=f.notEquals,f.lessThan=function(A){return this.comp(A)<0},f.lt=f.lessThan,f.lessThanOrEqual=function(A){return this.comp(A)<=0},f.lte=f.lessThanOrEqual,f.le=f.lessThanOrEqual,f.greaterThan=function(A){return this.comp(A)>0},f.gt=f.greaterThan,f.greaterThanOrEqual=function(A){return this.comp(A)>=0},f.gte=f.greaterThanOrEqual,f.ge=f.greaterThanOrEqual,f.compare=function(A){if(o(A)||(A=a(A)),this.eq(A))return 0;var e=this.isNegative(),t=A.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?A.high>>>0>this.high>>>0||A.high===this.high&&A.low>>>0>this.low>>>0?-1:1:this.sub(A).isNegative()?-1:1},f.comp=f.compare,f.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(d)},f.neg=f.negate,f.add=function(A){o(A)||(A=a(A));var e=this.high>>>16,t=65535&this.high,g=this.low>>>16,i=65535&this.low,r=A.high>>>16,n=65535&A.high,I=A.low>>>16,C=0,E=0,B=0,Q=0;return B+=(Q+=i+(65535&A.low))>>>16,E+=(B+=g+I)>>>16,C+=(E+=t+n)>>>16,C+=e+r,s((B&=65535)<<16|(Q&=65535),(C&=65535)<<16|(E&=65535),this.unsigned)},f.subtract=function(A){return o(A)||(A=a(A)),this.add(A.neg())},f.sub=f.subtract,f.multiply=function(A){if(this.isZero())return this;if(o(A)||(A=a(A)),e)return s(e.mul(this.low,this.high,A.low,A.high),e.get_high(),this.unsigned);if(A.isZero())return this.unsigned?h:u;if(this.eq(w))return A.isOdd()?w:u;if(A.eq(w))return this.isOdd()?w:u;if(this.isNegative())return A.isNegative()?this.neg().mul(A.neg()):this.neg().mul(A).neg();if(A.isNegative())return this.mul(A.neg()).neg();if(this.lt(l)&&A.lt(l))return I(this.toNumber()*A.toNumber(),this.unsigned);var t=this.high>>>16,g=65535&this.high,i=this.low>>>16,r=65535&this.low,n=A.high>>>16,C=65535&A.high,E=A.low>>>16,B=65535&A.low,Q=0,c=0,d=0,p=0;return d+=(p+=r*B)>>>16,c+=(d+=i*B)>>>16,d&=65535,c+=(d+=r*E)>>>16,Q+=(c+=g*B)>>>16,c&=65535,Q+=(c+=i*E)>>>16,c&=65535,Q+=(c+=r*C)>>>16,Q+=t*B+g*E+i*C+r*n,s((d&=65535)<<16|(p&=65535),(Q&=65535)<<16|(c&=65535),this.unsigned)},f.mul=f.multiply,f.divide=function(A){if(o(A)||(A=a(A)),A.isZero())throw Error(\"division by zero\");var t,g,i;if(e)return this.unsigned||-2147483648!==this.high||-1!==A.low||-1!==A.high?s((this.unsigned?e.div_u:e.div_s)(this.low,this.high,A.low,A.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?h:u;if(this.unsigned){if(A.unsigned||(A=A.toUnsigned()),A.gt(this))return h;if(A.gt(this.shru(1)))return p;i=h}else{if(this.eq(w))return A.eq(d)||A.eq(y)?w:A.eq(w)?d:(t=this.shr(1).div(A).shl(1)).eq(u)?A.isNegative()?d:y:(g=this.sub(A.mul(t)),i=t.add(g.div(A)));if(A.eq(w))return this.unsigned?h:u;if(this.isNegative())return A.isNegative()?this.neg().div(A.neg()):this.neg().div(A).neg();if(A.isNegative())return this.div(A.neg()).neg();i=u}for(g=this;g.gte(A);){t=Math.max(1,Math.floor(g.toNumber()/A.toNumber()));for(var r=Math.ceil(Math.log(t)/Math.LN2),n=r<=48?1:C(2,r-48),E=I(t),B=E.mul(A);B.isNegative()||B.gt(g);)B=(E=I(t-=n,this.unsigned)).mul(A);E.isZero()&&(E=d),i=i.add(E),g=g.sub(B)}return i},f.div=f.divide,f.modulo=function(A){return o(A)||(A=a(A)),e?s((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,A.low,A.high),e.get_high(),this.unsigned):this.sub(this.div(A).mul(A))},f.mod=f.modulo,f.rem=f.modulo,f.not=function(){return s(~this.low,~this.high,this.unsigned)},f.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},f.clz=f.countLeadingZeros,f.countTrailingZeros=function(){return this.low?g(this.low):g(this.high)+32},f.ctz=f.countTrailingZeros,f.and=function(A){return o(A)||(A=a(A)),s(this.low&A.low,this.high&A.high,this.unsigned)},f.or=function(A){return o(A)||(A=a(A)),s(this.low|A.low,this.high|A.high,this.unsigned)},f.xor=function(A){return o(A)||(A=a(A)),s(this.low^A.low,this.high^A.high,this.unsigned)},f.shiftLeft=function(A){return o(A)&&(A=A.toInt()),0==(A&=63)?this:A<32?s(this.low<<A,this.high<<A|this.low>>>32-A,this.unsigned):s(0,this.low<<A-32,this.unsigned)},f.shl=f.shiftLeft,f.shiftRight=function(A){return o(A)&&(A=A.toInt()),0==(A&=63)?this:A<32?s(this.low>>>A|this.high<<32-A,this.high>>A,this.unsigned):s(this.high>>A-32,this.high>=0?0:-1,this.unsigned)},f.shr=f.shiftRight,f.shiftRightUnsigned=function(A){return o(A)&&(A=A.toInt()),0==(A&=63)?this:A<32?s(this.low>>>A|this.high<<32-A,this.high>>>A,this.unsigned):s(32===A?this.high:this.high>>>A-32,0,this.unsigned)},f.shru=f.shiftRightUnsigned,f.shr_u=f.shiftRightUnsigned,f.rotateLeft=function(A){var e;return o(A)&&(A=A.toInt()),0==(A&=63)?this:32===A?s(this.high,this.low,this.unsigned):A<32?(e=32-A,s(this.low<<A|this.high>>>e,this.high<<A|this.low>>>e,this.unsigned)):(e=32-(A-=32),s(this.high<<A|this.low>>>e,this.low<<A|this.high>>>e,this.unsigned))},f.rotl=f.rotateLeft,f.rotateRight=function(A){var e;return o(A)&&(A=A.toInt()),0==(A&=63)?this:32===A?s(this.high,this.low,this.unsigned):A<32?(e=32-A,s(this.high<<e|this.low>>>A,this.low<<e|this.high>>>A,this.unsigned)):(e=32-(A-=32),s(this.low<<e|this.high>>>A,this.high<<e|this.low>>>A,this.unsigned))},f.rotr=f.rotateRight,f.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},f.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},f.toBytes=function(A){return A?this.toBytesLE():this.toBytesBE()},f.toBytesLE=function(){var A=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&A,A>>>8&255,A>>>16&255,A>>>24]},f.toBytesBE=function(){var A=this.high,e=this.low;return[A>>>24,A>>>16&255,A>>>8&255,255&A,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.fromBytes=function(A,e,o){return o?t.fromBytesLE(A,e):t.fromBytesBE(A,e)},t.fromBytesLE=function(A,e){return new t(A[0]|A[1]<<8|A[2]<<16|A[3]<<24,A[4]|A[5]<<8|A[6]<<16|A[7]<<24,e)},t.fromBytesBE=function(A,e){return new t(A[4]<<24|A[5]<<16|A[6]<<8|A[7],A[0]<<24|A[1]<<16|A[2]<<8|A[3],e)};var S=t;return A.default=S,\"default\"in A?A.default:A}({});A.exports=t}(umd);var umdExports=umd.exports,indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;return hasRequiredAspromise=1,aspromise=function(A,e){var t=new Array(arguments.length-1),o=0,g=2,i=!0;for(;g<arguments.length;)t[o++]=arguments[g++];return new Promise((function(g,r){t[o]=function(A){if(i)if(i=!1,A)r(A);else{for(var e=new Array(arguments.length-1),t=0;t<e.length;)e[t++]=arguments[t];g.apply(null,e)}};try{A.apply(e||null,t)}catch(A){i&&(i=!1,r(A))}}))},aspromise}var base64$1={},hasRequiredBase64,eventemitter,hasRequiredEventemitter,float,hasRequiredFloat,inquire_1,hasRequiredInquire;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(A){var e=A;e.length=function(A){var e=A.length;if(!e)return 0;for(var t=0;--e%4>1&&\"=\"===A.charAt(e);)++t;return Math.ceil(3*A.length)/4-t};for(var t=new Array(64),o=new Array(123),g=0;g<64;)o[t[g]=g<26?g+65:g<52?g+71:g<62?g-4:g-59|43]=g++;e.encode=function(A,e,o){for(var g,i=null,r=[],n=0,I=0;e<o;){var s=A[e++];switch(I){case 0:r[n++]=t[s>>2],g=(3&s)<<4,I=1;break;case 1:r[n++]=t[g|s>>4],g=(15&s)<<2,I=2;break;case 2:r[n++]=t[g|s>>6],r[n++]=t[63&s],I=0}n>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,r)),n=0)}return I&&(r[n++]=t[g],r[n++]=61,1===I&&(r[n++]=61)),i?(n&&i.push(String.fromCharCode.apply(String,r.slice(0,n))),i.join(\"\")):String.fromCharCode.apply(String,r.slice(0,n))};var i=\"invalid encoding\";e.decode=function(A,e,t){for(var g,r=t,n=0,I=0;I<A.length;){var s=A.charCodeAt(I++);if(61===s&&n>1)break;if(void 0===(s=o[s]))throw Error(i);switch(n){case 0:g=s,n=1;break;case 1:e[t++]=g<<2|(48&s)>>4,g=s,n=2;break;case 2:e[t++]=(15&g)<<4|(60&s)>>2,g=s,n=3;break;case 3:e[t++]=(3&g)<<6|s,n=0}}if(1===n)throw Error(i);return t-r},e.test=function(A){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(A)}}(base64$1)),base64$1}function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;function A(){this._listeners={}}return hasRequiredEventemitter=1,eventemitter=A,A.prototype.on=function(A,e,t){return(this._listeners[A]||(this._listeners[A]=[])).push({fn:e,ctx:t||this}),this},A.prototype.off=function(A,e){if(void 0===A)this._listeners={};else if(void 0===e)this._listeners[A]=[];else for(var t=this._listeners[A],o=0;o<t.length;)t[o].fn===e?t.splice(o,1):++o;return this},A.prototype.emit=function(A){var e=this._listeners[A];if(e){for(var t=[],o=1;o<arguments.length;)t.push(arguments[o++]);for(o=0;o<e.length;)e[o].fn.apply(e[o++].ctx,t)}return this},eventemitter}function requireFloat(){if(hasRequiredFloat)return float;function A(A){return\"undefined\"!=typeof Float32Array?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),o=128===t[3];function g(A,o,g){e[0]=A,o[g]=t[0],o[g+1]=t[1],o[g+2]=t[2],o[g+3]=t[3]}function i(A,o,g){e[0]=A,o[g]=t[3],o[g+1]=t[2],o[g+2]=t[1],o[g+3]=t[0]}function r(A,o){return t[0]=A[o],t[1]=A[o+1],t[2]=A[o+2],t[3]=A[o+3],e[0]}function n(A,o){return t[3]=A[o],t[2]=A[o+1],t[1]=A[o+2],t[0]=A[o+3],e[0]}A.writeFloatLE=o?g:i,A.writeFloatBE=o?i:g,A.readFloatLE=o?r:n,A.readFloatBE=o?n:r}():function(){function i(A,e,t,o){var g=e<0?1:0;if(g&&(e=-e),0===e)A(1/e>0?0:2147483648,t,o);else if(isNaN(e))A(2143289344,t,o);else if(e>34028234663852886e22)A((g<<31|2139095040)>>>0,t,o);else if(e<11754943508222875e-54)A((g<<31|Math.round(e/1401298464324817e-60))>>>0,t,o);else{var i=Math.floor(Math.log(e)/Math.LN2);A((g<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,t,o)}}function r(A,e,t){var o=A(e,t),g=2*(o>>31)+1,i=o>>>23&255,r=8388607&o;return 255===i?r?NaN:g*(1/0):0===i?1401298464324817e-60*g*r:g*Math.pow(2,i-150)*(r+8388608)}A.writeFloatLE=i.bind(null,e),A.writeFloatBE=i.bind(null,t),A.readFloatLE=r.bind(null,o),A.readFloatBE=r.bind(null,g)}(),\"undefined\"!=typeof Float64Array?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),o=128===t[7];function g(A,o,g){e[0]=A,o[g]=t[0],o[g+1]=t[1],o[g+2]=t[2],o[g+3]=t[3],o[g+4]=t[4],o[g+5]=t[5],o[g+6]=t[6],o[g+7]=t[7]}function i(A,o,g){e[0]=A,o[g]=t[7],o[g+1]=t[6],o[g+2]=t[5],o[g+3]=t[4],o[g+4]=t[3],o[g+5]=t[2],o[g+6]=t[1],o[g+7]=t[0]}function r(A,o){return t[0]=A[o],t[1]=A[o+1],t[2]=A[o+2],t[3]=A[o+3],t[4]=A[o+4],t[5]=A[o+5],t[6]=A[o+6],t[7]=A[o+7],e[0]}function n(A,o){return t[7]=A[o],t[6]=A[o+1],t[5]=A[o+2],t[4]=A[o+3],t[3]=A[o+4],t[2]=A[o+5],t[1]=A[o+6],t[0]=A[o+7],e[0]}A.writeDoubleLE=o?g:i,A.writeDoubleBE=o?i:g,A.readDoubleLE=o?r:n,A.readDoubleBE=o?n:r}():function(){function i(A,e,t,o,g,i){var r=o<0?1:0;if(r&&(o=-o),0===o)A(0,g,i+e),A(1/o>0?0:2147483648,g,i+t);else if(isNaN(o))A(0,g,i+e),A(2146959360,g,i+t);else if(o>17976931348623157e292)A(0,g,i+e),A((r<<31|2146435072)>>>0,g,i+t);else{var n;if(o<22250738585072014e-324)A((n=o/5e-324)>>>0,g,i+e),A((r<<31|n/4294967296)>>>0,g,i+t);else{var I=Math.floor(Math.log(o)/Math.LN2);1024===I&&(I=1023),A(4503599627370496*(n=o*Math.pow(2,-I))>>>0,g,i+e),A((r<<31|I+1023<<20|1048576*n&1048575)>>>0,g,i+t)}}}function r(A,e,t,o,g){var i=A(o,g+e),r=A(o,g+t),n=2*(r>>31)+1,I=r>>>20&2047,s=4294967296*(1048575&r)+i;return 2047===I?s?NaN:n*(1/0):0===I?5e-324*n*s:n*Math.pow(2,I-1075)*(s+4503599627370496)}A.writeDoubleLE=i.bind(null,e,0,4),A.writeDoubleBE=i.bind(null,t,4,0),A.readDoubleLE=r.bind(null,o,0,4),A.readDoubleBE=r.bind(null,g,4,0)}(),A}function e(A,e,t){e[t]=255&A,e[t+1]=A>>>8&255,e[t+2]=A>>>16&255,e[t+3]=A>>>24}function t(A,e,t){e[t]=A>>>24,e[t+1]=A>>>16&255,e[t+2]=A>>>8&255,e[t+3]=255&A}function o(A,e){return(A[e]|A[e+1]<<8|A[e+2]<<16|A[e+3]<<24)>>>0}function g(A,e){return(A[e]<<24|A[e+1]<<16|A[e+2]<<8|A[e+3])>>>0}return hasRequiredFloat=1,float=A(A)}function requireInquire(){if(hasRequiredInquire)return inquire_1;function inquire(moduleName){try{var mod=eval(\"quire\".replace(/^/,\"re\"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(A){}return null}return hasRequiredInquire=1,inquire_1=inquire,inquire_1}var utf8$2={},hasRequiredUtf8,pool_1,hasRequiredPool,longbits,hasRequiredLongbits,hasRequiredMinimal;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(A){var e=A;e.length=function(A){for(var e=0,t=0,o=0;o<A.length;++o)(t=A.charCodeAt(o))<128?e+=1:t<2048?e+=2:55296==(64512&t)&&56320==(64512&A.charCodeAt(o+1))?(++o,e+=4):e+=3;return e},e.read=function(A,e,t){if(t-e<1)return\"\";for(var o,g=null,i=[],r=0;e<t;)(o=A[e++])<128?i[r++]=o:o>191&&o<224?i[r++]=(31&o)<<6|63&A[e++]:o>239&&o<365?(o=((7&o)<<18|(63&A[e++])<<12|(63&A[e++])<<6|63&A[e++])-65536,i[r++]=55296+(o>>10),i[r++]=56320+(1023&o)):i[r++]=(15&o)<<12|(63&A[e++])<<6|63&A[e++],r>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,i)),r=0);return g?(r&&g.push(String.fromCharCode.apply(String,i.slice(0,r))),g.join(\"\")):String.fromCharCode.apply(String,i.slice(0,r))},e.write=function(A,e,t){for(var o,g,i=t,r=0;r<A.length;++r)(o=A.charCodeAt(r))<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=63&o|128):55296==(64512&o)&&56320==(64512&(g=A.charCodeAt(r+1)))?(o=65536+((1023&o)<<10)+(1023&g),++r,e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=63&o|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=63&o|128);return t-i}}(utf8$2)),utf8$2}function requirePool(){if(hasRequiredPool)return pool_1;return hasRequiredPool=1,pool_1=function(A,e,t){var o=t||8192,g=o>>>1,i=null,r=o;return function(t){if(t<1||t>g)return A(t);r+t>o&&(i=A(o),r=0);var n=e.call(i,r,r+=t);return 7&r&&(r=1+(7|r)),n}}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var A=requireMinimal();function e(A,e){this.lo=A>>>0,this.hi=e>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var o=e.zeroHash=\"\\0\\0\\0\\0\\0\\0\\0\\0\";e.fromNumber=function(A){if(0===A)return t;var o=A<0;o&&(A=-A);var g=A>>>0,i=(A-g)/4294967296>>>0;return o&&(i=~i>>>0,g=~g>>>0,++g>4294967295&&(g=0,++i>4294967295&&(i=0))),new e(g,i)},e.from=function(o){if(\"number\"==typeof o)return e.fromNumber(o);if(A.isString(o)){if(!A.Long)return e.fromNumber(parseInt(o,10));o=A.Long.fromString(o)}return o.low||o.high?new e(o.low>>>0,o.high>>>0):t},e.prototype.toNumber=function(A){if(!A&&this.hi>>>31){var e=1+~this.lo>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},e.prototype.toLong=function(e){return A.Long?new A.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var g=String.prototype.charCodeAt;return e.fromHash=function(A){return A===o?t:new e((g.call(A,0)|g.call(A,1)<<8|g.call(A,2)<<16|g.call(A,3)<<24)>>>0,(g.call(A,4)|g.call(A,5)<<8|g.call(A,6)<<16|g.call(A,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var A=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^A)>>>0,this.lo=(this.lo<<1^A)>>>0,this},e.prototype.zzDecode=function(){var A=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^A)>>>0,this.hi=(this.hi>>>1^A)>>>0,this},e.prototype.length=function(){var A=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return 0===t?0===e?A<16384?A<128?1:2:A<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(A){var e=A;function t(A,e,t){for(var o=Object.keys(e),g=0;g<o.length;++g)void 0!==A[o[g]]&&t||(A[o[g]]=e[o[g]]);return A}function o(A){function e(A,o){if(!(this instanceof e))return new e(A,o);Object.defineProperty(this,\"message\",{get:function(){return A}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,\"stack\",{value:(new Error).stack||\"\"}),o&&t(this,o)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return A},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+\": \"+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}e.asPromise=requireAspromise(),e.base64=requireBase64(),e.EventEmitter=requireEventemitter(),e.float=requireFloat(),e.inquire=requireInquire(),e.utf8=requireUtf8(),e.pool=requirePool(),e.LongBits=requireLongbits(),e.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||\"undefined\"!=typeof window&&window||\"undefined\"!=typeof self&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(A){return\"number\"==typeof A&&isFinite(A)&&Math.floor(A)===A},e.isString=function(A){return\"string\"==typeof A||A instanceof String},e.isObject=function(A){return A&&\"object\"==typeof A},e.isset=e.isSet=function(A,e){var t=A[e];return!(null==t||!A.hasOwnProperty(e))&&(\"object\"!=typeof t||(Array.isArray(t)?t.length:Object.keys(t).length)>0)},e.Buffer=function(){try{var A=e.inquire(\"buffer\").Buffer;return A.prototype.utf8Write?A:null}catch(A){return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(A){return\"number\"==typeof A?e.Buffer?e._Buffer_allocUnsafe(A):new e.Array(A):e.Buffer?e._Buffer_from(A):\"undefined\"==typeof Uint8Array?A:new Uint8Array(A)},e.Array=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire(\"long\"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(A){return A?e.LongBits.from(A).toHash():e.LongBits.zeroHash},e.longFromHash=function(A,t){var o=e.LongBits.fromHash(A);return e.Long?e.Long.fromBits(o.lo,o.hi,t):o.toNumber(Boolean(t))},e.merge=t,e.lcFirst=function(A){return A.charAt(0).toLowerCase()+A.substring(1)},e.newError=o,e.ProtocolError=o(\"ProtocolError\"),e.oneOfGetter=function(A){for(var e={},t=0;t<A.length;++t)e[A[t]]=1;return function(){for(var A=Object.keys(this),t=A.length-1;t>-1;--t)if(1===e[A[t]]&&void 0!==this[A[t]]&&null!==this[A[t]])return A[t]}},e.oneOfSetter=function(A){return function(e){for(var t=0;t<A.length;++t)A[t]!==e&&delete this[A[t]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var A=e.Buffer;A?(e._Buffer_from=A.from!==Uint8Array.from&&A.from||function(e,t){return new A(e,t)},e._Buffer_allocUnsafe=A.allocUnsafe||function(e){return new A(e)}):e._Buffer_from=e._Buffer_allocUnsafe=null}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(A,e,t){this.fn=A,this.len=e,this.next=void 0,this.val=t}function noop(){}function State(A){this.head=A.head,this.tail=A.tail,this.len=A.len,this.next=A.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(A,e,t){e[t]=255&A}function writeVarint32(A,e,t){for(;A>127;)e[t++]=127&A|128,A>>>=7;e[t]=A}function VarintOp(A,e){this.len=A,this.next=void 0,this.val=e}function writeVarint64(A,e,t){for(;A.hi;)e[t++]=127&A.lo|128,A.lo=(A.lo>>>7|A.hi<<25)>>>0,A.hi>>>=7;for(;A.lo>127;)e[t++]=127&A.lo|128,A.lo=A.lo>>>7;e[t++]=A.lo}function writeFixed32(A,e,t){e[t]=255&A,e[t+1]=A>>>8&255,e[t+2]=A>>>16&255,e[t+3]=A>>>24}Writer$1.create=create$1(),Writer$1.alloc=function(A){return new util$4.Array(A)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(A,e,t){return this.tail=this.tail.next=new Op(A,e,t),this.len+=e,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(A){return this.len+=(this.tail=this.tail.next=new VarintOp((A>>>=0)<128?1:A<16384?2:A<2097152?3:A<268435456?4:5,A)).len,this},Writer$1.prototype.int32=function(A){return A<0?this._push(writeVarint64,10,LongBits$1.fromNumber(A)):this.uint32(A)},Writer$1.prototype.sint32=function(A){return this.uint32((A<<1^A>>31)>>>0)},Writer$1.prototype.uint64=function(A){var e=LongBits$1.from(A);return this._push(writeVarint64,e.length(),e)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(A){var e=LongBits$1.from(A).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer$1.prototype.bool=function(A){return this._push(writeByte,1,A?1:0)},Writer$1.prototype.fixed32=function(A){return this._push(writeFixed32,4,A>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(A){var e=LongBits$1.from(A);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(A){return this._push(util$4.float.writeFloatLE,4,A)},Writer$1.prototype.double=function(A){return this._push(util$4.float.writeDoubleLE,8,A)};var writeBytes=util$4.Array.prototype.set?function(A,e,t){e.set(A,t)}:function(A,e,t){for(var o=0;o<A.length;++o)e[t+o]=A[o]};Writer$1.prototype.bytes=function(A){var e=A.length>>>0;if(!e)return this._push(writeByte,1,0);if(util$4.isString(A)){var t=Writer$1.alloc(e=base64.length(A));base64.decode(A,t,0),A=t}return this.uint32(e)._push(writeBytes,e,A)},Writer$1.prototype.string=function(A){var e=utf8$1.length(A);return e?this.uint32(e)._push(utf8$1.write,e,A):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var A=this.head,e=this.tail,t=this.len;return this.reset().uint32(t),t&&(this.tail.next=A.next,this.tail=e,this.len+=t),this},Writer$1.prototype.finish=function(){for(var A=this.head.next,e=this.constructor.alloc(this.len),t=0;A;)A.fn(A.val,e,t),t+=A.len,A=A.next;return e},Writer$1._configure=function(A){BufferWriter$1=A,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}function writeStringBuffer(A,e,t){A.length<40?util$3.utf8.write(A,e,t):e.utf8Write?e.utf8Write(A,t):e.write(A,t)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&\"set\"===util$3.Buffer.prototype.set.name?function(A,e,t){e.set(A,t)}:function(A,e,t){if(A.copy)A.copy(e,t,0,A.length);else for(var o=0;o<A.length;)e[t++]=A[o++]}},BufferWriter.prototype.bytes=function(A){util$3.isString(A)&&(A=util$3._Buffer_from(A,\"base64\"));var e=A.length>>>0;return this.uint32(e),e&&this._push(BufferWriter.writeBytesBuffer,e,A),this},BufferWriter.prototype.string=function(A){var e=util$3.Buffer.byteLength(A);return this.uint32(e),e&&this._push(writeStringBuffer,e,A),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(A,e){return RangeError(\"index out of range: \"+A.pos+\" + \"+(e||1)+\" > \"+A.len)}function Reader$1(A){this.buf=A,this.pos=0,this.len=A.length}var create_array=\"undefined\"!=typeof Uint8Array?function(A){if(A instanceof Uint8Array||Array.isArray(A))return new Reader$1(A);throw Error(\"illegal buffer\")}:function(A){if(Array.isArray(A))return new Reader$1(A);throw Error(\"illegal buffer\")},create=function(){return util$2.Buffer?function(A){return(Reader$1.create=function(A){return util$2.Buffer.isBuffer(A)?new BufferReader$1(A):create_array(A)})(A)}:create_array},value;function readLongVarint(){var A=new LongBits(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(A.lo=(A.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return A}return A.lo=(A.lo|(127&this.buf[this.pos++])<<7*e)>>>0,A}for(;e<4;++e)if(A.lo=(A.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return A;if(A.lo=(A.lo|(127&this.buf[this.pos])<<28)>>>0,A.hi=(A.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return A;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(A.hi=(A.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return A}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(A.hi=(A.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return A}throw Error(\"invalid varint encoding\")}function readFixed32_end(A,e){return(A[e-4]|A[e-3]<<8|A[e-2]<<16|A[e-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var A=this.uint32();return A>>>1^-(1&A)},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var A=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,A},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var A=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,A},Reader$1.prototype.bytes=function(){var A=this.uint32(),e=this.pos,t=this.pos+A;if(t>this.len)throw indexOutOfRange(this,A);if(this.pos+=A,Array.isArray(this.buf))return this.buf.slice(e,t);if(e===t){var o=util$2.Buffer;return o?o.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,t)},Reader$1.prototype.string=function(){var A=this.bytes();return utf8.read(A,0,A.length)},Reader$1.prototype.skip=function(A){if(\"number\"==typeof A){if(this.pos+A>this.len)throw indexOutOfRange(this,A);this.pos+=A}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(A){switch(A){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(A=7&this.uint32());)this.skipType(A);break;case 5:this.skip(4);break;default:throw Error(\"invalid wire type \"+A+\" at offset \"+this.pos)}return this},Reader$1._configure=function(A){BufferReader$1=A,Reader$1.create=create(),BufferReader$1._configure();var e=util$2.Long?\"toLong\":\"toNumber\";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(A){Reader.call(this,A)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var A=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+A,this.len)):this.buf.toString(\"utf-8\",this.pos,this.pos=Math.min(this.pos+A,this.len))},BufferReader._configure();var rpc={},service=Service,util=requireMinimal();function Service(A,e,t){if(\"function\"!=typeof A)throw TypeError(\"rpcImpl must be a function\");util.EventEmitter.call(this),this.rpcImpl=A,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function A(e,t,o,g,i){if(!g)throw TypeError(\"request must be specified\");var r=this;if(!i)return util.asPromise(A,r,e,t,o,g);if(r.rpcImpl)try{return r.rpcImpl(e,t[r.requestDelimited?\"encodeDelimited\":\"encode\"](g).finish(),(function(A,t){if(A)return r.emit(\"error\",A,e),i(A);if(null!==t){if(!(t instanceof o))try{t=o[r.responseDelimited?\"decodeDelimited\":\"decode\"](t)}catch(A){return r.emit(\"error\",A,e),i(A)}return r.emit(\"data\",t,e),i(null,t)}r.end(!0)}))}catch(A){return r.emit(\"error\",A,e),void setTimeout((function(){i(A)}),0)}else setTimeout((function(){i(Error(\"already ended\"))}),0)},Service.prototype.end=function(A){return this.rpcImpl&&(A||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit(\"end\").off()),this},function(A){A.Service=service}(rpc);var roots={};!function(A){var e=A;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}e.build=\"minimal\",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=t,t()}(indexMinimal);const Long=umdExports,minimal=indexMinimal;minimal.util.Long=Long,minimal.configure();var minimal_1=minimal;const $Reader$1=minimal_1.Reader,$Writer$2=minimal_1.Writer,$util$2=minimal_1.util,$root$2=minimal_1.roots.default||(minimal_1.roots.default={}),TopicMetadata=$root$2.TopicMetadata=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.topic=\"\",A.prototype.metadata=\"\",A.encode=function(A,e){return e||(e=$Writer$2.create()),null!=A.topic&&Object.hasOwnProperty.call(A,\"topic\")&&e.uint32(10).string(A.topic),null!=A.metadata&&Object.hasOwnProperty.call(A,\"metadata\")&&e.uint32(18).string(A.metadata),e},A.decode=function(A,e){A instanceof $Reader$1||(A=$Reader$1.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$2.TopicMetadata;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.topic=A.string();break;case 2:o.metadata=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/TopicMetadata\"},A})(),StreamMessageProtocol=$root$2.StreamMessageProtocol=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.messageType=0,A.prototype.payload=$util$2.newBuffer([]),A.prototype.payloadLength=0,A.prototype.sequence=$util$2.Long?$util$2.Long.fromBits(0,0,!1):0,A.prototype.sendTs=$util$2.Long?$util$2.Long.fromBits(0,0,!1):0,A.prototype.encrypted=!1,A.prototype.customType=\"\",A.encode=function(A,e){return e||(e=$Writer$2.create()),null!=A.messageType&&Object.hasOwnProperty.call(A,\"messageType\")&&e.uint32(8).int32(A.messageType),null!=A.payload&&Object.hasOwnProperty.call(A,\"payload\")&&e.uint32(18).bytes(A.payload),null!=A.payloadLength&&Object.hasOwnProperty.call(A,\"payloadLength\")&&e.uint32(24).int32(A.payloadLength),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(32).int64(A.sequence),null!=A.sendTs&&Object.hasOwnProperty.call(A,\"sendTs\")&&e.uint32(40).int64(A.sendTs),null!=A.encrypted&&Object.hasOwnProperty.call(A,\"encrypted\")&&e.uint32(48).bool(A.encrypted),null!=A.customType&&Object.hasOwnProperty.call(A,\"customType\")&&e.uint32(58).string(A.customType),e},A.decode=function(A,e){A instanceof $Reader$1||(A=$Reader$1.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$2.StreamMessageProtocol;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.messageType=A.int32();break;case 2:o.payload=A.bytes();break;case 3:o.payloadLength=A.int32();break;case 4:o.sequence=A.int64();break;case 5:o.sendTs=A.int64();break;case 6:o.encrypted=A.bool();break;case 7:o.customType=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StreamMessageProtocol\"},A})();let RTMStreamChannelStatusCode;!function(A){let e=function(A){return A[A.NO_ERROR=0]=\"NO_ERROR\",A[A.PARTIALLY_SUCCESSFUL=1]=\"PARTIALLY_SUCCESSFUL\",A[A.ALL_FAILED=2]=\"ALL_FAILED\",A[A.UNKNOWN_ERROR=3]=\"UNKNOWN_ERROR\",A[A.INVALID_PARAMS=4]=\"INVALID_PARAMS\",A[A.REMOTE_USER_IS_NOT_PUBLISHED=5]=\"REMOTE_USER_IS_NOT_PUBLISHED\",A[A.INVALID_REMOTE_USER=6]=\"INVALID_REMOTE_USER\",A[A.TIMEOUT=7]=\"TIMEOUT\",A[A.ALREADY_SUBSCRIBED_USER=20001]=\"ALREADY_SUBSCRIBED_USER\",A[A.SUB_USER_EXCEED_LIMITATION=20003]=\"SUB_USER_EXCEED_LIMITATION\",A[A.NOT_SUBSCRIBED_USER=20004]=\"NOT_SUBSCRIBED_USER\",A}({});A.SubscribeTopicErrorCode=e}(RTMStreamChannelStatusCode||(RTMStreamChannelStatusCode={}));var lib_es5={},require$$0=getAugmentedNamespace(_esm5);function bufferTime(A){var e=arguments.length,t=async;isScheduler(arguments[arguments.length-1])&&(t=arguments[arguments.length-1],e--);var o=null;e>=2&&(o=arguments[1]);var g=Number.POSITIVE_INFINITY;return e>=3&&(g=arguments[2]),function(e){return e.lift(new BufferTimeOperator(A,o,g,t))}}!function(A){Object.defineProperty(A,\"__esModule\",{value:!0});var e=require$$0,t=[],o=function(A,e){return new WebSocket(A,e)};A.normalClosureMessage=\"Normal closure\",A.default=function(g,i){var r=void 0===i?{protocols:t,makeWebSocket:o}:i,n=r.protocols,I=void 0===n?t:n,s=r.makeWebSocket,C=void 0===s?o:s;return new e.Observable((function(t){var o,i=new e.Subject,r=C(g,I),n=!1,s=!1,E=function(){n=!0},a=function(A){if(o){E();var e=new Error(\"Web socket message factory function called more than once\");throw t.error(e),e}return o=A.subscribe((function(A){r.send(A)})),i};return r.onopen=function(){s?(n=!0,r.close()):t.next(a)},r.onmessage=function(A){i.next(A.data)},r.onerror=function(A){E(),t.error(new Error(A.message))},r.onclose=function(e){n||(E(),s?(t.complete(),i.complete()):t.error(new Error(1e3===e.code?A.normalClosureMessage:e.reason)))},function(){s=!0,o&&o.unsubscribe(),n||(E(),r.close())}}))}}(lib_es5);var BufferTimeOperator=function(){function A(A,e,t,o){this.bufferTimeSpan=A,this.bufferCreationInterval=e,this.maxBufferSize=t,this.scheduler=o}return A.prototype.call=function(A,e){return e.subscribe(new BufferTimeSubscriber(A,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},A}(),Context$1=function(){return function(){this.buffer=[]}}(),BufferTimeSubscriber=function(A){function e(e,t,o,g,i){var r=A.call(this,e)||this;r.bufferTimeSpan=t,r.bufferCreationInterval=o,r.maxBufferSize=g,r.scheduler=i,r.contexts=[];var n=r.openContext();if(r.timespanOnly=null==o||o<0,r.timespanOnly){var I={subscriber:r,context:n,bufferTimeSpan:t};r.add(n.closeAction=i.schedule(dispatchBufferTimeSpanOnly,t,I))}else{var s={subscriber:r,context:n},C={bufferTimeSpan:t,bufferCreationInterval:o,subscriber:r,scheduler:i};r.add(n.closeAction=i.schedule(dispatchBufferClose,t,s)),r.add(i.schedule(dispatchBufferCreation,o,C))}return r}return __extends$3(e,A),e.prototype._next=function(A){for(var e,t=this.contexts,o=t.length,g=0;g<o;g++){var i=t[g],r=i.buffer;r.push(A),r.length==this.maxBufferSize&&(e=i)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,A.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,t=this.destination;e.length>0;){var o=e.shift();t.next(o.buffer)}A.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(A){this.closeContext(A);var e=A.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){A=this.openContext();var t=this.bufferTimeSpan,o={subscriber:this,context:A,bufferTimeSpan:t};this.add(A.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,t,o))}},e.prototype.openContext=function(){var A=new Context$1;return this.contexts.push(A),A},e.prototype.closeContext=function(A){this.destination.next(A.buffer);var e=this.contexts;(e?e.indexOf(A):-1)>=0&&e.splice(e.indexOf(A),1)},e}(Subscriber);function dispatchBufferTimeSpanOnly(A){var e=A.subscriber,t=A.context;t&&e.closeContext(t),e.closed||(A.context=e.openContext(),A.context.closeAction=this.schedule(A,A.bufferTimeSpan))}function dispatchBufferCreation(A){var e=A.bufferCreationInterval,t=A.bufferTimeSpan,o=A.subscriber,g=A.scheduler,i=o.openContext();o.closed||(o.add(i.closeAction=g.schedule(dispatchBufferClose,t,{subscriber:o,context:i})),this.schedule(A,e))}function dispatchBufferClose(A){var e=A.subscriber,t=A.context;e.closeContext(t)}function catchError(A){return function(e){var t=new CatchOperator(A),o=e.lift(t);return t.caught=o}}var CatchOperator=function(){function A(A){this.selector=A}return A.prototype.call=function(A,e){return e.subscribe(new CatchSubscriber(A,this.selector,this.caught))},A}(),CatchSubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.selector=t,g.caught=o,g}return __extends$3(e,A),e.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void A.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var o=new SimpleInnerSubscriber(this);this.add(o);var g=innerSubscribe(t,o);g!==o&&this.add(g)}},e}(SimpleOuterSubscriber);function concatMap(A,e){return mergeMap(A,e,1)}function defaultIfEmpty(A){return void 0===A&&(A=null),function(e){return e.lift(new DefaultIfEmptyOperator(A))}}var DefaultIfEmptyOperator=function(){function A(A){this.defaultValue=A}return A.prototype.call=function(A,e){return e.subscribe(new DefaultIfEmptySubscriber(A,this.defaultValue))},A}(),DefaultIfEmptySubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.defaultValue=t,o.isEmpty=!0,o}return __extends$3(e,A),e.prototype._next=function(A){this.isEmpty=!1,this.destination.next(A)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Subscriber);function isDate(A){return A instanceof Date&&!isNaN(+A)}function delay(A,e){void 0===e&&(e=async);var t=isDate(A)?+A-e.now():Math.abs(A);return function(A){return A.lift(new DelayOperator(t,e))}}var DelayOperator=function(){function A(A,e){this.delay=A,this.scheduler=e}return A.prototype.call=function(A,e){return e.subscribe(new DelaySubscriber(A,this.delay,this.scheduler))},A}(),DelaySubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.delay=t,g.scheduler=o,g.queue=[],g.active=!1,g.errored=!1,g}return __extends$3(e,A),e.dispatch=function(A){for(var e=A.source,t=e.queue,o=A.scheduler,g=A.destination;t.length>0&&t[0].time-o.now()<=0;)t.shift().notification.observe(g);if(t.length>0){var i=Math.max(0,t[0].time-o.now());this.schedule(A,i)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(A){this.active=!0,this.destination.add(A.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:A}))},e.prototype.scheduleNotification=function(A){if(!0!==this.errored){var e=this.scheduler,t=new DelayMessage(e.now()+this.delay,A);this.queue.push(t),!1===this.active&&this._schedule(e)}},e.prototype._next=function(A){this.scheduleNotification(Notification.createNext(A))},e.prototype._error=function(A){this.errored=!0,this.queue=[],this.destination.error(A),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},e}(Subscriber),DelayMessage=function(){return function(A,e){this.time=A,this.notification=e}}();function distinct(A,e){return function(t){return t.lift(new DistinctOperator(A,e))}}var DistinctOperator=function(){function A(A,e){this.keySelector=A,this.flushes=e}return A.prototype.call=function(A,e){return e.subscribe(new DistinctSubscriber(A,this.keySelector,this.flushes))},A}(),DistinctSubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.keySelector=t,g.values=new Set,o&&g.add(innerSubscribe(o,new SimpleInnerSubscriber(g))),g}return __extends$3(e,A),e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(A){this._error(A)},e.prototype._next=function(A){this.keySelector?this._useKeySelector(A):this._finalizeNext(A,A)},e.prototype._useKeySelector=function(A){var e,t=this.destination;try{e=this.keySelector(A)}catch(A){return void t.error(A)}this._finalizeNext(e,A)},e.prototype._finalizeNext=function(A,e){var t=this.values;t.has(A)||(t.add(A),this.destination.next(e))},e}(SimpleOuterSubscriber);function throwIfEmpty(A){return void 0===A&&(A=defaultErrorFactory),function(e){return e.lift(new ThrowIfEmptyOperator(A))}}var ThrowIfEmptyOperator=function(){function A(A){this.errorFactory=A}return A.prototype.call=function(A,e){return e.subscribe(new ThrowIfEmptySubscriber(A,this.errorFactory))},A}(),ThrowIfEmptySubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.errorFactory=t,o.hasValue=!1,o}return __extends$3(e,A),e.prototype._next=function(A){this.hasValue=!0,this.destination.next(A)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var A=void 0;try{A=this.errorFactory()}catch(e){A=e}this.destination.error(A)},e}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(A){return function(e){return 0===A?empty():e.lift(new TakeOperator(A))}}var TakeOperator=function(){function A(A){if(this.total=A,this.total<0)throw new ArgumentOutOfRangeError}return A.prototype.call=function(A,e){return e.subscribe(new TakeSubscriber(A,this.total))},A}(),TakeSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.total=t,o.count=0,o}return __extends$3(e,A),e.prototype._next=function(A){var e=this.total,t=++this.count;t<=e&&(this.destination.next(A),t===e&&(this.destination.complete(),this.unsubscribe()))},e}(Subscriber);function finalize(A){return function(e){return e.lift(new FinallyOperator(A))}}var FinallyOperator=function(){function A(A){this.callback=A}return A.prototype.call=function(A,e){return e.subscribe(new FinallySubscriber(A,this.callback))},A}(),FinallySubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.add(new Subscription$2(t)),o}return __extends$3(e,A),e}(Subscriber);function first(A,e){var t=arguments.length>=2;return function(o){return o.pipe(A?filter((function(e,t){return A(e,t,o)})):identity$5,take(1),t?defaultIfEmpty(e):throwIfEmpty((function(){return new EmptyError})))}}function ignoreElements(){return function(A){return A.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function A(){}return A.prototype.call=function(A,e){return e.subscribe(new IgnoreElementsSubscriber(A))},A}(),IgnoreElementsSubscriber=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends$3(e,A),e.prototype._next=function(A){},e}(Subscriber);function takeLast(A){return function(e){return e.lift(new TakeLastOperator(A))}}var TakeLastOperator=function(){function A(A){if(this.total=A,this.total<0)throw new ArgumentOutOfRangeError}return A.prototype.call=function(A,e){return e.subscribe(new TakeLastSubscriber(A,this.total))},A}(),TakeLastSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.total=t,o.ring=new Array,o.count=0,o}return __extends$3(e,A),e.prototype._next=function(A){var e=this.ring,t=this.total,o=this.count++;e.length<t?e.push(A):e[o%t]=A},e.prototype._complete=function(){var A=this.destination,e=this.count;if(e>0)for(var t=this.count>=this.total?this.total:this.count,o=this.ring,g=0;g<t;g++){var i=e++%t;A.next(o[i])}A.complete()},e}(Subscriber);function mapTo(A){return function(e){return e.lift(new MapToOperator(A))}}var MapToOperator=function(){function A(A){this.value=A}return A.prototype.call=function(A,e){return e.subscribe(new MapToSubscriber(A,this.value))},A}(),MapToSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.value=t,o}return __extends$3(e,A),e.prototype._next=function(A){this.destination.next(this.value)},e}(Subscriber);function scan(A,e){var t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new ScanOperator(A,e,t))}}var ScanOperator=function(){function A(A,e,t){void 0===t&&(t=!1),this.accumulator=A,this.seed=e,this.hasSeed=t}return A.prototype.call=function(A,e){return e.subscribe(new ScanSubscriber(A,this.accumulator,this.seed,this.hasSeed))},A}(),ScanSubscriber=function(A){function e(e,t,o,g){var i=A.call(this,e)||this;return i.accumulator=t,i._seed=o,i.hasSeed=g,i.index=0,i}return __extends$3(e,A),Object.defineProperty(e.prototype,\"seed\",{get:function(){return this._seed},set:function(A){this.hasSeed=!0,this._seed=A},enumerable:!0,configurable:!0}),e.prototype._next=function(A){if(this.hasSeed)return this._tryNext(A);this.seed=A,this.destination.next(A)},e.prototype._tryNext=function(A){var e,t=this.index++;try{e=this.accumulator(this.seed,A,t)}catch(A){this.destination.error(A)}this.seed=e,this.destination.next(e)},e}(Subscriber);function reduce(A,e){return arguments.length>=2?function(t){return pipe(scan(A,e),takeLast(1),defaultIfEmpty(e))(t)}:function(e){return pipe(scan((function(e,t,o){return A(e,t,o+1)})),takeLast(1))(e)}}function multicast(A,e){return function(e){var t;t=\"function\"==typeof A?A:function(){return A};var o=Object.create(e,connectableObservableDescriptor);return o.source=e,o.subjectFactory=t,o}}function retryWhen(A){return function(e){return e.lift(new RetryWhenOperator(A,e))}}var RetryWhenOperator=function(){function A(A,e){this.notifier=A,this.source=e}return A.prototype.call=function(A,e){return e.subscribe(new RetryWhenSubscriber(A,this.notifier,this.source))},A}(),RetryWhenSubscriber=function(A){function e(e,t,o){var g=A.call(this,e)||this;return g.notifier=t,g.source=o,g}return __extends$3(e,A),e.prototype.error=function(e){if(!this.isStopped){var t=this.errors,o=this.retries,g=this.retriesSubscription;if(o)this.errors=void 0,this.retriesSubscription=void 0;else{t=new Subject;try{o=(0,this.notifier)(t)}catch(e){return A.prototype.error.call(this,e)}g=innerSubscribe(o,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=t,this.retries=o,this.retriesSubscription=g,t.next(e)}},e.prototype._unsubscribe=function(){var A=this.errors,e=this.retriesSubscription;A&&(A.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var A=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=A,this.source.subscribe(this)},e}(SimpleOuterSubscriber);function shareSubjectFactory(){return new Subject}function share(){return function(A){return refCount()(multicast(shareSubjectFactory)(A))}}function shareReplay(A,e,t){var o;return o=A&&\"object\"==typeof A?A:{bufferSize:A,windowTime:e,refCount:!1,scheduler:t},function(A){return A.lift(shareReplayOperator(o))}}function shareReplayOperator(A){var e,t,o=A.bufferSize,g=void 0===o?Number.POSITIVE_INFINITY:o,i=A.windowTime,r=void 0===i?Number.POSITIVE_INFINITY:i,n=A.refCount,I=A.scheduler,s=0,C=!1,E=!1;return function(A){var o;s++,!e||C?(C=!1,e=new ReplaySubject(g,r,I),o=e.subscribe(this),t=A.subscribe({next:function(A){e.next(A)},error:function(A){C=!0,e.error(A)},complete:function(){E=!0,t=void 0,e.complete()}}),E&&(t=void 0)):o=e.subscribe(this),this.add((function(){s--,o.unsubscribe(),o=void 0,t&&!E&&n&&0===s&&(t.unsubscribe(),t=void 0,e=void 0)}))}}function switchMap(A,e){return function(e){return e.lift(new SwitchMapOperator(A))}}var SwitchMapOperator=function(){function A(A){this.project=A}return A.prototype.call=function(A,e){return e.subscribe(new SwitchMapSubscriber(A,this.project))},A}(),SwitchMapSubscriber=function(A){function e(e,t){var o=A.call(this,e)||this;return o.project=t,o.index=0,o}return __extends$3(e,A),e.prototype._next=function(A){var e,t=this.index++;try{e=this.project(A,t)}catch(A){return void this.destination.error(A)}this._innerSub(e)},e.prototype._innerSub=function(A){var e=this.innerSubscription;e&&e.unsubscribe();var t=new SimpleInnerSubscriber(this),o=this.destination;o.add(t),this.innerSubscription=innerSubscribe(A,t),this.innerSubscription!==t&&o.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||A.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&A.prototype._complete.call(this)},e.prototype.notifyNext=function(A){this.destination.next(A)},e}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity$5)}function takeUntil(A){return function(e){return e.lift(new TakeUntilOperator(A))}}var TakeUntilOperator=function(){function A(A){this.notifier=A}return A.prototype.call=function(A,e){var t=new TakeUntilSubscriber(A),o=innerSubscribe(this.notifier,new SimpleInnerSubscriber(t));return o&&!t.seenValue?(t.add(o),e.subscribe(t)):t},A}(),TakeUntilSubscriber=function(A){function e(e){var t=A.call(this,e)||this;return t.seenValue=!1,t}return __extends$3(e,A),e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(SimpleOuterSubscriber);function tap(A,e,t){return function(o){return o.lift(new DoOperator(A,e,t))}}var DoOperator=function(){function A(A,e,t){this.nextOrObserver=A,this.error=e,this.complete=t}return A.prototype.call=function(A,e){return e.subscribe(new TapSubscriber(A,this.nextOrObserver,this.error,this.complete))},A}(),TapSubscriber=function(A){function e(e,t,o,g){var i=A.call(this,e)||this;return i._tapNext=noop$3,i._tapError=noop$3,i._tapComplete=noop$3,i._tapError=o||noop$3,i._tapComplete=g||noop$3,isFunction$7(t)?(i._context=i,i._tapNext=t):t&&(i._context=t,i._tapNext=t.next||noop$3,i._tapError=t.error||noop$3,i._tapComplete=t.complete||noop$3),i}return __extends$3(e,A),e.prototype._next=function(A){try{this._tapNext.call(this._context,A)}catch(A){return void this.destination.error(A)}this.destination.next(A)},e.prototype._error=function(A){try{this._tapError.call(this._context,A)}catch(A){return void this.destination.error(A)}this.destination.error(A)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(A){return void this.destination.error(A)}return this.destination.complete()},e}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttleTime(A,e,t){return void 0===e&&(e=async),void 0===t&&(t=defaultThrottleConfig),function(o){return o.lift(new ThrottleTimeOperator(A,e,t.leading,t.trailing))}}var ThrottleTimeOperator=function(){function A(A,e,t,o){this.duration=A,this.scheduler=e,this.leading=t,this.trailing=o}return A.prototype.call=function(A,e){return e.subscribe(new ThrottleTimeSubscriber(A,this.duration,this.scheduler,this.leading,this.trailing))},A}(),ThrottleTimeSubscriber=function(A){function e(e,t,o,g,i){var r=A.call(this,e)||this;return r.duration=t,r.scheduler=o,r.leading=g,r.trailing=i,r._hasTrailingValue=!1,r._trailingValue=null,r}return __extends$3(e,A),e.prototype._next=function(A){this.throttled?this.trailing&&(this._trailingValue=A,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(A):this.trailing&&(this._trailingValue=A,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var A=this.throttled;A&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),A.unsubscribe(),this.remove(A),this.throttled=null)},e}(Subscriber);function dispatchNext(A){A.subscriber.clearThrottle()}function timeoutWith(A,e,t){return void 0===t&&(t=async),function(o){var g=isDate(A),i=g?+A-t.now():Math.abs(A);return o.lift(new TimeoutWithOperator(i,g,e,t))}}var TimeoutWithOperator=function(){function A(A,e,t,o){this.waitFor=A,this.absoluteTimeout=e,this.withObservable=t,this.scheduler=o}return A.prototype.call=function(A,e){return e.subscribe(new TimeoutWithSubscriber(A,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},A}(),TimeoutWithSubscriber=function(A){function e(e,t,o,g,i){var r=A.call(this,e)||this;return r.absoluteTimeout=t,r.waitFor=o,r.withObservable=g,r.scheduler=i,r.scheduleTimeout(),r}return __extends$3(e,A),e.dispatchTimeout=function(A){var e=A.withObservable;A._unsubscribeAndRecycle(),A.add(innerSubscribe(e,new SimpleInnerSubscriber(A)))},e.prototype.scheduleTimeout=function(){var A=this.action;A?this.action=A.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),A.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(SimpleOuterSubscriber);function timeout(A,e){return void 0===e&&(e=async),timeoutWith(A,throwError(new TimeoutError),e)}var defaultProtocols=[],defaultWebsocketFactory=function(A,e){return new WebSocket(A,e)},normalClosureMessage=\"Normal closure\";function makeWebSocketObservable(A,e){var t=void 0===e?{protocols:defaultProtocols,makeWebSocket:defaultWebsocketFactory}:e,o=t.protocols,g=void 0===o?defaultProtocols:o,i=t.makeWebSocket,r=void 0===i?defaultWebsocketFactory:i;return new Observable((function(e){var t,o=new Subject,i=r(A,g),n=!1,I=!1,s=!1,C=function(){n=!0},E=function(A){if(t){C();var g=new Error(\"Web socket message factory function called more than once\");throw e.error(g),g}return t=A.subscribe((function(A){i.send(A)})),o};return i.onopen=function(){s=!0,I?(n=!0,i.close()):e.next(E)},i.onmessage=function(A){o.next(A.data)},i.onerror=function(A){C(),e.error(new Error(A.message))},i.onclose=function(A){n||(C(),I?(e.complete(),o.complete()):e.error(new Error(1e3===A.code?normalClosureMessage:A.reason)))},function(){I=!0,t&&t.unsubscribe(),n||(C(),s&&i.close())}}))}const $Reader=minimal_1.Reader,$Writer$1=minimal_1.Writer,$util$1=minimal_1.util,$root$1=minimal_1.roots.default||(minimal_1.roots.default={}),Wrapper$1=$root$1.Wrapper=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.uri=0,A.prototype.data=$util$1.newBuffer([]),A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.uri&&Object.hasOwnProperty.call(A,\"uri\")&&e.uint32(8).int32(A.uri),null!=A.data&&Object.hasOwnProperty.call(A,\"data\")&&e.uint32(18).bytes(A.data),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Wrapper;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.uri=A.int32();break;case 2:o.data=A.bytes();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Wrapper\"},A})(),Ping=$root$1.Ping=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(16).uint64(A.ms),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Ping;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.ms=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Ping\"},A})(),Ping2=$root$1.Ping2=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(16).uint64(A.ms),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(24).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Ping2;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.ms=A.uint64();break;case 3:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Ping2\"},A})(),Pong=$root$1.Pong=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(16).uint64(A.ms),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Pong;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.ms=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Pong\"},A})(),Ping3=$root$1.Ping3=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(16).uint64(A.ms),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(24).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Ping3;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.ms=A.uint64();break;case 3:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Ping3\"},A})(),Pong3=$root$1.Pong3=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.serverMs=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(16).uint64(A.ms),null!=A.serverMs&&Object.hasOwnProperty.call(A,\"serverMs\")&&e.uint32(24).uint64(A.serverMs),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Pong3;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.ms=A.uint64();break;case 3:o.serverMs=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Pong3\"},A})(),UserJoin=$root$1.UserJoin=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.opt=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.ticket=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.opt&&Object.hasOwnProperty.call(A,\"opt\")&&e.uint32(16).uint64(A.opt),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(24).uint64(A.instance),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(34).string(A.account),null!=A.ticket&&Object.hasOwnProperty.call(A,\"ticket\")&&e.uint32(42).string(A.ticket),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserJoin;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.opt=A.uint64();break;case 3:o.instance=A.uint64();break;case 4:o.account=A.string();break;case 5:o.ticket=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserJoin\"},A})(),UserResp=$root$1.UserResp=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserResp;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;case 3:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserResp\"},A})(),UserJoin2=$root$1.UserJoin2=(()=>{function A(A){if(this.detail={},A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.opt=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.ticket=\"\",A.prototype.detail=$util$1.emptyObject,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.opt&&Object.hasOwnProperty.call(A,\"opt\")&&e.uint32(16).uint64(A.opt),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(24).uint64(A.instance),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(34).string(A.account),null!=A.ticket&&Object.hasOwnProperty.call(A,\"ticket\")&&e.uint32(42).string(A.ticket),null!=A.detail&&Object.hasOwnProperty.call(A,\"detail\"))for(let t=Object.keys(A.detail),o=0;o<t.length;++o)e.uint32(50).fork().uint32(8).uint32(t[o]).uint32(18).bytes(A.detail[t[o]]).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t,o,g=void 0===e?A.len:A.pos+e,i=new $root$1.UserJoin2;for(;A.pos<g;){let e=A.uint32();switch(e>>>3){case 1:i.seq=A.uint64();break;case 2:i.opt=A.uint64();break;case 3:i.instance=A.uint64();break;case 4:i.account=A.string();break;case 5:i.ticket=A.string();break;case 6:{i.detail===$util$1.emptyObject&&(i.detail={});let e=A.uint32()+A.pos;for(t=0,o=[];A.pos<e;){let e=A.uint32();switch(e>>>3){case 1:t=A.uint32();break;case 2:o=A.bytes();break;default:A.skipType(7&e)}}i.detail[t]=o;break}default:A.skipType(7&e)}}return i},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserJoin2\"},A})(),UserResp2=$root$1.UserResp2=(()=>{function A(A){if(this.detail={},A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.code=0,A.prototype.serverTs=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.detail=$util$1.emptyObject,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),null!=A.serverTs&&Object.hasOwnProperty.call(A,\"serverTs\")&&e.uint32(32).uint64(A.serverTs),null!=A.detail&&Object.hasOwnProperty.call(A,\"detail\"))for(let t=Object.keys(A.detail),o=0;o<t.length;++o)e.uint32(42).fork().uint32(8).uint32(t[o]).uint32(18).bytes(A.detail[t[o]]).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t,o,g=void 0===e?A.len:A.pos+e,i=new $root$1.UserResp2;for(;A.pos<g;){let e=A.uint32();switch(e>>>3){case 1:i.seq=A.uint64();break;case 2:i.account=A.string();break;case 3:i.code=A.uint32();break;case 4:i.serverTs=A.uint64();break;case 5:{i.detail===$util$1.emptyObject&&(i.detail={});let e=A.uint32()+A.pos;for(t=0,o=[];A.pos<e;){let e=A.uint32();switch(e>>>3){case 1:t=A.uint32();break;case 2:o=A.bytes();break;default:A.skipType(7&e)}}i.detail[t]=o;break}default:A.skipType(7&e)}}return i},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserResp2\"},A})(),UserQuit=$root$1.UserQuit=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.encode=function(A,e){return e||(e=$Writer$1.create()),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserQuit;for(;A.pos<t;){let e=A.uint32();A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserQuit\"},A})(),UserQuit2=$root$1.UserQuit2=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(8).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserQuit2;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.flags=A.uint64();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserQuit2\"},A})(),UserDrop=$root$1.UserDrop=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(8).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserDrop;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.code=A.uint32();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserDrop\"},A})(),UserTicketNearlyExpire=$root$1.UserTicketNearlyExpire=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.expireTs=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ticket=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.expireTs&&Object.hasOwnProperty.call(A,\"expireTs\")&&e.uint32(8).uint64(A.expireTs),null!=A.ticket&&Object.hasOwnProperty.call(A,\"ticket\")&&e.uint32(18).string(A.ticket),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserTicketNearlyExpire;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.expireTs=A.uint64();break;case 2:o.ticket=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserTicketNearlyExpire\"},A})(),UserRenewTokenReq=$root$1.UserRenewTokenReq=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.ticket=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(16).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(26).string(A.account),null!=A.ticket&&Object.hasOwnProperty.call(A,\"ticket\")&&e.uint32(34).string(A.ticket),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserRenewTokenReq;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.instance=A.uint64();break;case 2:o.seq=A.uint64();break;case 3:o.account=A.string();break;case 4:o.ticket=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserRenewTokenReq\"},A})(),UserRenewTokenResp=$root$1.UserRenewTokenResp=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(16).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserRenewTokenResp;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserRenewTokenResp\"},A})(),GroupEnter=$root$1.GroupEnter=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupEnter;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupEnter\"},A})(),GroupLeave=$root$1.GroupLeave=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.account=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(10).string(A.account),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupLeave;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.account=A.string();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupLeave\"},A})(),GroupLeave2=$root$1.GroupLeave2=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.account=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(10).string(A.account),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(16).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupLeave2;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.account=A.string();break;case 2:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupLeave2\"},A})(),GroupReply=$root$1.GroupReply=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupReply;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;case 3:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupReply\"},A})(),GroupLeaveNotice=$root$1.GroupLeaveNotice=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.user=\"\",A.prototype.group=\"\",A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.size=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.user&&Object.hasOwnProperty.call(A,\"user\")&&e.uint32(18).string(A.user),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(26).string(A.group),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(32).uint64(A.instance),null!=A.size&&Object.hasOwnProperty.call(A,\"size\")&&e.uint32(40).uint32(A.size),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupLeaveNotice;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.user=A.string();break;case 3:o.group=A.string();break;case 4:o.instance=A.uint64();break;case 5:o.size=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupLeaveNotice\"},A})(),GroupEnterNotice=$root$1.GroupEnterNotice=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.user=\"\",A.prototype.group=\"\",A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.size=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.user&&Object.hasOwnProperty.call(A,\"user\")&&e.uint32(18).string(A.user),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(26).string(A.group),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(32).uint64(A.instance),null!=A.size&&Object.hasOwnProperty.call(A,\"size\")&&e.uint32(40).uint32(A.size),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupEnterNotice;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.user=A.string();break;case 3:o.group=A.string();break;case 4:o.instance=A.uint64();break;case 5:o.size=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupEnterNotice\"},A})(),Message=$root$1.Message=(()=>{function A(A){if(this.MiscMap={},A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.dialogue=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.options=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.src=\"\",A.prototype.dst=\"\",A.prototype.payload=$util$1.newBuffer([]),A.prototype.MiscMap=$util$1.emptyObject,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.dialogue&&Object.hasOwnProperty.call(A,\"dialogue\")&&e.uint32(16).uint64(A.dialogue),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(24).uint64(A.sequence),null!=A.options&&Object.hasOwnProperty.call(A,\"options\")&&e.uint32(32).uint64(A.options),null!=A.src&&Object.hasOwnProperty.call(A,\"src\")&&e.uint32(42).string(A.src),null!=A.dst&&Object.hasOwnProperty.call(A,\"dst\")&&e.uint32(50).string(A.dst),null!=A.payload&&Object.hasOwnProperty.call(A,\"payload\")&&e.uint32(58).bytes(A.payload),null!=A.MiscMap&&Object.hasOwnProperty.call(A,\"MiscMap\"))for(let t=Object.keys(A.MiscMap),o=0;o<t.length;++o)e.uint32(66).fork().uint32(10).string(t[o]).uint32(18).bytes(A.MiscMap[t[o]]).ldelim();return null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(72).uint64(A.ms),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t,o,g=void 0===e?A.len:A.pos+e,i=new $root$1.Message;for(;A.pos<g;){let e=A.uint32();switch(e>>>3){case 1:i.instance=A.uint64();break;case 2:i.dialogue=A.uint64();break;case 3:i.sequence=A.uint64();break;case 4:i.options=A.uint64();break;case 5:i.src=A.string();break;case 6:i.dst=A.string();break;case 7:i.payload=A.bytes();break;case 8:{i.MiscMap===$util$1.emptyObject&&(i.MiscMap={});let e=A.uint32()+A.pos;for(t=\"\",o=[];A.pos<e;){let e=A.uint32();switch(e>>>3){case 1:t=A.string();break;case 2:o=A.bytes();break;default:A.skipType(7&e)}}i.MiscMap[t]=o;break}case 9:i.ms=A.uint64();break;default:A.skipType(7&e)}}return i},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Message\"},A})(),Ack=$root$1.Ack=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.dialogue=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.dialogue&&Object.hasOwnProperty.call(A,\"dialogue\")&&e.uint32(16).uint64(A.dialogue),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(24).uint64(A.sequence),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(32).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.Ack;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.instance=A.uint64();break;case 2:o.dialogue=A.uint64();break;case 3:o.sequence=A.uint64();break;case 4:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Ack\"},A})(),GroupDrop=$root$1.GroupDrop=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.account=\"\",A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(10).string(A.account),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(16).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupDrop;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.account=A.string();break;case 2:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupDrop\"},A})(),GroupAllUsersList=$root$1.GroupAllUsersList=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.pageSize=0,A.prototype.pageNumber=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.pageSize&&Object.hasOwnProperty.call(A,\"pageSize\")&&e.uint32(24).uint32(A.pageSize),null!=A.pageNumber&&Object.hasOwnProperty.call(A,\"pageNumber\")&&e.uint32(32).uint32(A.pageNumber),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAllUsersList;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.pageSize=A.uint32();break;case 4:o.pageNumber=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAllUsersList\"},A})(),GroupAllUsersResult=$root$1.GroupAllUsersResult=(()=>{function A(A){if(this.memberInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.totalSize=0,A.prototype.pageSize=0,A.prototype.pageNumber=0,A.prototype.memberInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.totalSize&&Object.hasOwnProperty.call(A,\"totalSize\")&&e.uint32(24).uint32(A.totalSize),null!=A.pageSize&&Object.hasOwnProperty.call(A,\"pageSize\")&&e.uint32(32).uint32(A.pageSize),null!=A.pageNumber&&Object.hasOwnProperty.call(A,\"pageNumber\")&&e.uint32(40).uint32(A.pageNumber),null!=A.memberInfos&&A.memberInfos.length)for(let t=0;t<A.memberInfos.length;++t)$root$1.GroupAllUsersResult.MemberInfo.encode(A.memberInfos[t],e.uint32(50).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAllUsersResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.totalSize=A.uint32();break;case 4:o.pageSize=A.uint32();break;case 5:o.pageNumber=A.uint32();break;case 6:o.memberInfos&&o.memberInfos.length||(o.memberInfos=[]),o.memberInfos.push($root$1.GroupAllUsersResult.MemberInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAllUsersResult\"},A.MemberInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.account=\"\",A.prototype.ts=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(10).string(A.account),null!=A.ts&&Object.hasOwnProperty.call(A,\"ts\")&&e.uint32(16).uint32(A.ts),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAllUsersResult.MemberInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.account=A.string();break;case 2:o.ts=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAllUsersResult.MemberInfo\"},A}(),A})(),UserStatusList=$root$1.UserStatusList=(()=>{function A(A){if(this.users=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.users=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.users&&A.users.length)for(let t=0;t<A.users.length;++t)e.uint32(18).string(A.users[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserStatusList;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.users&&o.users.length||(o.users=[]),o.users.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserStatusList\"},A})(),UserStatusResult=$root$1.UserStatusResult=(()=>{function A(A){if(this.userInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.userInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.userInfos&&A.userInfos.length)for(let t=0;t<A.userInfos.length;++t)$root$1.UserStatusResult.UserStatusInfo.encode(A.userInfos[t],e.uint32(18).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserStatusResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.userInfos&&o.userInfos.length||(o.userInfos=[]),o.userInfos.push($root$1.UserStatusResult.UserStatusInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserStatusResult\"},A.UserStatusInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.account=\"\",A.prototype.ts=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(10).string(A.account),null!=A.ts&&Object.hasOwnProperty.call(A,\"ts\")&&e.uint32(16).uint32(A.ts),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserStatusResult.UserStatusInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.account=A.string();break;case 2:o.ts=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserStatusResult.UserStatusInfo\"},A}(),A})(),UserAttributeGet=$root$1.UserAttributeGet=(()=>{function A(A){if(this.attributes=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.attributes=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.attributes&&A.attributes.length)for(let t=0;t<A.attributes.length;++t)e.uint32(26).string(A.attributes[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeGet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;case 3:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeGet\"},A})(),UserAttributeRet=$root$1.UserAttributeRet=(()=>{function A(A){if(this.attributeInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.attributeInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.attributeInfos&&A.attributeInfos.length)for(let t=0;t<A.attributeInfos.length;++t)$root$1.UserAttributeRet.AttributeInfo.encode(A.attributeInfos[t],e.uint32(18).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeRet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.attributeInfos&&o.attributeInfos.length||(o.attributeInfos=[]),o.attributeInfos.push($root$1.UserAttributeRet.AttributeInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeRet\"},A.AttributeInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeRet.AttributeInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeRet.AttributeInfo\"},A}(),A})(),UserAttributeSet=$root$1.UserAttributeSet=(()=>{function A(A){if(this.attributeInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.attributeInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.attributeInfos&&A.attributeInfos.length)for(let t=0;t<A.attributeInfos.length;++t)$root$1.UserAttributeSet.AttributeInfo.encode(A.attributeInfos[t],e.uint32(26).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeSet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;case 3:o.attributeInfos&&o.attributeInfos.length||(o.attributeInfos=[]),o.attributeInfos.push($root$1.UserAttributeSet.AttributeInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeSet\"},A.AttributeInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeSet.AttributeInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeSet.AttributeInfo\"},A}(),A})(),UserAttributeMod=$root$1.UserAttributeMod=(()=>{function A(A){if(this.attributeInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.attributeInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.attributeInfos&&A.attributeInfos.length)for(let t=0;t<A.attributeInfos.length;++t)$root$1.UserAttributeMod.AttributeInfo.encode(A.attributeInfos[t],e.uint32(26).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeMod;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;case 3:o.attributeInfos&&o.attributeInfos.length||(o.attributeInfos=[]),o.attributeInfos.push($root$1.UserAttributeMod.AttributeInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeMod\"},A.AttributeInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeMod.AttributeInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeMod.AttributeInfo\"},A}(),A})(),UserAttributeDel=$root$1.UserAttributeDel=(()=>{function A(A){if(this.attributes=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.prototype.attributes=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),null!=A.attributes&&A.attributes.length)for(let t=0;t<A.attributes.length;++t)e.uint32(26).string(A.attributes[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeDel;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;case 3:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeDel\"},A})(),UserAttributeErr=$root$1.UserAttributeErr=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(16).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeErr;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeErr\"},A})(),UserAttributeKeysGet=$root$1.UserAttributeKeysGet=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.account=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(18).string(A.account),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeKeysGet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.account=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeKeysGet\"},A})(),UserAttributeKeysRet=$root$1.UserAttributeKeysRet=(()=>{function A(A){if(this.keys=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.keys=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.keys&&A.keys.length)for(let t=0;t<A.keys.length;++t)e.uint32(18).string(A.keys[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeKeysRet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.keys&&o.keys.length||(o.keys=[]),o.keys.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeKeysRet\"},A})(),UserAttributeRsp=$root$1.UserAttributeRsp=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserAttributeRsp;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.seq=A.uint64();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserAttributeRsp\"},A})(),GroupStatusList=$root$1.GroupStatusList=(()=>{function A(A){if(this.groups=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.groups=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.groups&&A.groups.length)for(let t=0;t<A.groups.length;++t)e.uint32(18).string(A.groups[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupStatusList;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupStatusList\"},A})(),GroupStatusResult=$root$1.GroupStatusResult=(()=>{function A(A){if(this.groupInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.groupInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.groupInfos&&A.groupInfos.length)for(let t=0;t<A.groupInfos.length;++t)$root$1.GroupStatusResult.GroupInfo.encode(A.groupInfos[t],e.uint32(18).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupStatusResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.groupInfos&&o.groupInfos.length||(o.groupInfos=[]),o.groupInfos.push($root$1.GroupStatusResult.GroupInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupStatusResult\"},A.GroupInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.group=\"\",A.prototype.memberCount=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(10).string(A.group),null!=A.memberCount&&Object.hasOwnProperty.call(A,\"memberCount\")&&e.uint32(16).uint32(A.memberCount),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupStatusResult.GroupInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.group=A.string();break;case 2:o.memberCount=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupStatusResult.GroupInfo\"},A}(),A})(),GroupCountNotice=$root$1.GroupCountNotice=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.size=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(16).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(26).string(A.group),null!=A.size&&Object.hasOwnProperty.call(A,\"size\")&&e.uint32(32).uint32(A.size),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupCountNotice;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.instance=A.uint64();break;case 2:o.seq=A.uint64();break;case 3:o.group=A.string();break;case 4:o.size=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupCountNotice\"},A})(),GroupAttributeGet=$root$1.GroupAttributeGet=(()=>{function A(A){if(this.attributes=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.attributes=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.attributes&&A.attributes.length)for(let t=0;t<A.attributes.length;++t)e.uint32(26).string(A.attributes[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeGet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeGet\"},A})(),GroupAttributeRet=$root$1.GroupAttributeRet=(()=>{function A(A){if(this.attributeMaps=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.attributeMaps=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.attributeMaps&&A.attributeMaps.length)for(let t=0;t<A.attributeMaps.length;++t)$root$1.GroupAttributeRet.AttributeMap.encode(A.attributeMaps[t],e.uint32(18).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeRet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.attributeMaps&&o.attributeMaps.length||(o.attributeMaps=[]),o.attributeMaps.push($root$1.GroupAttributeRet.AttributeMap.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeRet\"},A.AttributeMap=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.prototype.origin=\"\",A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),null!=A.origin&&Object.hasOwnProperty.call(A,\"origin\")&&e.uint32(26).string(A.origin),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(32).uint64(A.ms),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeRet.AttributeMap;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;case 3:o.origin=A.string();break;case 4:o.ms=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeRet.AttributeMap\"},A}(),A})(),GroupAttributeSet=$root$1.GroupAttributeSet=(()=>{function A(A){if(this.attributeInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.broadcast=!1,A.prototype.attributeInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.broadcast&&Object.hasOwnProperty.call(A,\"broadcast\")&&e.uint32(24).bool(A.broadcast),null!=A.attributeInfos&&A.attributeInfos.length)for(let t=0;t<A.attributeInfos.length;++t)$root$1.GroupAttributeSet.AttributeInfo.encode(A.attributeInfos[t],e.uint32(34).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeSet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.broadcast=A.bool();break;case 4:o.attributeInfos&&o.attributeInfos.length||(o.attributeInfos=[]),o.attributeInfos.push($root$1.GroupAttributeSet.AttributeInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeSet\"},A.AttributeInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeSet.AttributeInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeSet.AttributeInfo\"},A}(),A})(),GroupAttributeMod=$root$1.GroupAttributeMod=(()=>{function A(A){if(this.attributeInfos=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.broadcast=!1,A.prototype.attributeInfos=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.broadcast&&Object.hasOwnProperty.call(A,\"broadcast\")&&e.uint32(24).bool(A.broadcast),null!=A.attributeInfos&&A.attributeInfos.length)for(let t=0;t<A.attributeInfos.length;++t)$root$1.GroupAttributeMod.AttributeInfo.encode(A.attributeInfos[t],e.uint32(34).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeMod;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.broadcast=A.bool();break;case 4:o.attributeInfos&&o.attributeInfos.length||(o.attributeInfos=[]),o.attributeInfos.push($root$1.GroupAttributeMod.AttributeInfo.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeMod\"},A.AttributeInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeMod.AttributeInfo;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeMod.AttributeInfo\"},A}(),A})(),GroupAttributeDel=$root$1.GroupAttributeDel=(()=>{function A(A){if(this.attributes=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.broadcast=!1,A.prototype.attributes=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.broadcast&&Object.hasOwnProperty.call(A,\"broadcast\")&&e.uint32(24).bool(A.broadcast),null!=A.attributes&&A.attributes.length)for(let t=0;t<A.attributes.length;++t)e.uint32(34).string(A.attributes[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeDel;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.broadcast=A.bool();break;case 4:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeDel\"},A})(),GroupAttributeAlt=$root$1.GroupAttributeAlt=(()=>{function A(A){if(this.attributeMaps=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.attributeMaps=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(24).uint64(A.instance),null!=A.attributeMaps&&A.attributeMaps.length)for(let t=0;t<A.attributeMaps.length;++t)$root$1.GroupAttributeAlt.AttributeMap.encode(A.attributeMaps[t],e.uint32(34).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeAlt;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;case 3:o.instance=A.uint64();break;case 4:o.attributeMaps&&o.attributeMaps.length||(o.attributeMaps=[]),o.attributeMaps.push($root$1.GroupAttributeAlt.AttributeMap.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeAlt\"},A.AttributeMap=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.key=\"\",A.prototype.value=\"\",A.prototype.origin=\"\",A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.key&&Object.hasOwnProperty.call(A,\"key\")&&e.uint32(10).string(A.key),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(18).string(A.value),null!=A.origin&&Object.hasOwnProperty.call(A,\"origin\")&&e.uint32(26).string(A.origin),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(32).uint64(A.ms),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeAlt.AttributeMap;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.key=A.string();break;case 2:o.value=A.string();break;case 3:o.origin=A.string();break;case 4:o.ms=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeAlt.AttributeMap\"},A}(),A})(),GroupAttributeRsp=$root$1.GroupAttributeRsp=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeRsp;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.seq=A.uint64();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeRsp\"},A})(),GroupAttributeErr=$root$1.GroupAttributeErr=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(16).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeErr;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeErr\"},A})(),GroupAttributeKeysGet=$root$1.GroupAttributeKeysGet=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.group=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.group&&Object.hasOwnProperty.call(A,\"group\")&&e.uint32(18).string(A.group),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeKeysGet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.group=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeKeysGet\"},A})(),GroupAttributeKeysRet=$root$1.GroupAttributeKeysRet=(()=>{function A(A){if(this.keys=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.keys=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.keys&&A.keys.length)for(let t=0;t<A.keys.length;++t)e.uint32(18).string(A.keys[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.GroupAttributeKeysRet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.keys&&o.keys.length||(o.keys=[]),o.keys.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/GroupAttributeKeysRet\"},A})(),SubscribeUserStatus=$root$1.SubscribeUserStatus=(()=>{function A(A){if(this.users=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.users=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.users&&A.users.length)for(let t=0;t<A.users.length;++t)e.uint32(18).string(A.users[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SubscribeUserStatus;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.users&&o.users.length||(o.users=[]),o.users.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SubscribeUserStatus\"},A})(),UnsubscribeUserStatus=$root$1.UnsubscribeUserStatus=(()=>{function A(A){if(this.users=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.users=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.users&&A.users.length)for(let t=0;t<A.users.length;++t)e.uint32(18).string(A.users[t]);return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UnsubscribeUserStatus;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.users&&o.users.length||(o.users=[]),o.users.push(A.string());break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UnsubscribeUserStatus\"},A})(),UserJoinNotice=$root$1.UserJoinNotice=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.user=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(16).uint64(A.seq),null!=A.user&&Object.hasOwnProperty.call(A,\"user\")&&e.uint32(26).string(A.user),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserJoinNotice;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.instance=A.uint64();break;case 2:o.seq=A.uint64();break;case 3:o.user=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserJoinNotice\"},A})(),UserQuitNotice=$root$1.UserQuitNotice=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.user=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(16).uint64(A.seq),null!=A.user&&Object.hasOwnProperty.call(A,\"user\")&&e.uint32(26).string(A.user),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserQuitNotice;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.instance=A.uint64();break;case 2:o.seq=A.uint64();break;case 3:o.user=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserQuitNotice\"},A})(),UserWaitNotice=$root$1.UserWaitNotice=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.instance=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.user=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.instance&&Object.hasOwnProperty.call(A,\"instance\")&&e.uint32(8).uint64(A.instance),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(16).uint64(A.seq),null!=A.user&&Object.hasOwnProperty.call(A,\"user\")&&e.uint32(26).string(A.user),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.UserWaitNotice;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.instance=A.uint64();break;case 2:o.seq=A.uint64();break;case 3:o.user=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/UserWaitNotice\"},A})(),StateSubscribe=$root$1.StateSubscribe=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.subTarget=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.subTarget&&Object.hasOwnProperty.call(A,\"subTarget\")&&e.uint32(18).string(A.subTarget),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(24).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateSubscribe;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.subTarget=A.string();break;case 3:o.sequence=A.uint64();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateSubscribe\"},A})(),StateUpdate=$root$1.StateUpdate=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.subTarget=\"\",A.prototype.allStates=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.subTarget&&Object.hasOwnProperty.call(A,\"subTarget\")&&e.uint32(18).string(A.subTarget),null!=A.allStates&&Object.hasOwnProperty.call(A,\"allStates\")&&e.uint32(26).string(A.allStates),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateUpdate;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.subTarget=A.string();break;case 3:o.allStates=A.string();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateUpdate\"},A})(),StateSubscribeResult=$root$1.StateSubscribeResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.subTarget=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.subTarget&&Object.hasOwnProperty.call(A,\"subTarget\")&&e.uint32(18).string(A.subTarget),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(24).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(40).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateSubscribeResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.subTarget=A.string();break;case 3:o.sequence=A.uint64();break;case 4:o.flags=A.uint64();break;case 5:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateSubscribeResult\"},A})(),StateUnsubscribe=$root$1.StateUnsubscribe=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.subTarget=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.subTarget&&Object.hasOwnProperty.call(A,\"subTarget\")&&e.uint32(18).string(A.subTarget),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(24).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateUnsubscribe;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.subTarget=A.string();break;case 3:o.sequence=A.uint64();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateUnsubscribe\"},A})(),StateSet=$root$1.StateSet=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.author=\"\",A.prototype.value=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.baseRevision=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.lockRev=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.author&&Object.hasOwnProperty.call(A,\"author\")&&e.uint32(18).string(A.author),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(26).string(A.value),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(34).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(42).string(A.requestUuid),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(48).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(56).uint64(A.flags),null!=A.baseRevision&&Object.hasOwnProperty.call(A,\"baseRevision\")&&e.uint32(64).uint64(A.baseRevision),null!=A.lockRev&&Object.hasOwnProperty.call(A,\"lockRev\")&&e.uint32(72).uint64(A.lockRev),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateSet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.author=A.string();break;case 3:o.value=A.string();break;case 4:o.lock=A.string();break;case 5:o.requestUuid=A.string();break;case 6:o.sequence=A.uint64();break;case 7:o.flags=A.uint64();break;case 8:o.baseRevision=A.uint64();break;case 9:o.lockRev=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateSet\"},A})(),StateModify=$root$1.StateModify=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.author=\"\",A.prototype.value=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.baseRevision=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.lockRev=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.author&&Object.hasOwnProperty.call(A,\"author\")&&e.uint32(18).string(A.author),null!=A.value&&Object.hasOwnProperty.call(A,\"value\")&&e.uint32(26).string(A.value),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(34).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(42).string(A.requestUuid),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(48).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(56).uint64(A.flags),null!=A.baseRevision&&Object.hasOwnProperty.call(A,\"baseRevision\")&&e.uint32(64).uint64(A.baseRevision),null!=A.lockRev&&Object.hasOwnProperty.call(A,\"lockRev\")&&e.uint32(72).uint64(A.lockRev),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateModify;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.author=A.string();break;case 3:o.value=A.string();break;case 4:o.lock=A.string();break;case 5:o.requestUuid=A.string();break;case 6:o.sequence=A.uint64();break;case 7:o.flags=A.uint64();break;case 8:o.baseRevision=A.uint64();break;case 9:o.lockRev=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateModify\"},A})(),StateRequestResult=$root$1.StateRequestResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.requestUuid=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(10).string(A.requestUuid),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(16).uint64(A.sequence),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateRequestResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.requestUuid=A.string();break;case 2:o.sequence=A.uint64();break;case 3:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateRequestResult\"},A})(),StateGet=$root$1.StateGet=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.subTarget=\"\",A.prototype.lock=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.lockRev=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.subTarget&&Object.hasOwnProperty.call(A,\"subTarget\")&&e.uint32(18).string(A.subTarget),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(26).string(A.lock),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(32).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),null!=A.lockRev&&Object.hasOwnProperty.call(A,\"lockRev\")&&e.uint32(48).uint64(A.lockRev),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateGet;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.subTarget=A.string();break;case 3:o.lock=A.string();break;case 4:o.sequence=A.uint64();break;case 5:o.flags=A.uint64();break;case 6:o.lockRev=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateGet\"},A})(),StateGetResult=$root$1.StateGetResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.subTarget=\"\",A.prototype.allStates=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.subTarget&&Object.hasOwnProperty.call(A,\"subTarget\")&&e.uint32(18).string(A.subTarget),null!=A.allStates&&Object.hasOwnProperty.call(A,\"allStates\")&&e.uint32(26).string(A.allStates),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(32).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(48).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateGetResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.subTarget=A.string();break;case 3:o.allStates=A.string();break;case 4:o.sequence=A.uint64();break;case 5:o.flags=A.uint64();break;case 6:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateGetResult\"},A})(),StateLockAcquire=$root$1.StateLockAcquire=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ttl=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(26).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),null!=A.ttl&&Object.hasOwnProperty.call(A,\"ttl\")&&e.uint32(40).uint64(A.ttl),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockAcquire;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.requestUuid=A.string();break;case 4:o.flags=A.uint64();break;case 5:o.ttl=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockAcquire\"},A})(),StateLockRelease=$root$1.StateLockRelease=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(26).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockRelease;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.requestUuid=A.string();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockRelease\"},A})(),StateLockAcquireResult=$root$1.StateLockAcquireResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.lockRev=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.prototype.reason=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(26).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),null!=A.lockRev&&Object.hasOwnProperty.call(A,\"lockRev\")&&e.uint32(40).uint64(A.lockRev),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(48).uint32(A.code),null!=A.reason&&Object.hasOwnProperty.call(A,\"reason\")&&e.uint32(58).string(A.reason),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockAcquireResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.requestUuid=A.string();break;case 4:o.flags=A.uint64();break;case 5:o.lockRev=A.uint64();break;case 6:o.code=A.uint32();break;case 7:o.reason=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockAcquireResult\"},A})(),StateLockUpdate=$root$1.StateLockUpdate=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(24).uint64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(32).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockUpdate;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.flags=A.uint64();break;case 4:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockUpdate\"},A})(),StateLockReleaseResult=$root$1.StateLockReleaseResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(26).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(40).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockReleaseResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.requestUuid=A.string();break;case 4:o.flags=A.uint64();break;case 5:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockReleaseResult\"},A})(),StateLockDisable=$root$1.StateLockDisable=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.userId=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(26).string(A.userId),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(34).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockDisable;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.userId=A.string();break;case 4:o.requestUuid=A.string();break;case 5:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockDisable\"},A})(),StateLockDisableResult=$root$1.StateLockDisableResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(26).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(40).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockDisableResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.requestUuid=A.string();break;case 4:o.flags=A.uint64();break;case 5:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockDisableResult\"},A})(),StateLockSubscribe=$root$1.StateLockSubscribe=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(16).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(24).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockSubscribe;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.sequence=A.uint64();break;case 3:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockSubscribe\"},A})(),StateLockSubscribeResult=$root$1.StateLockSubscribeResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(16).uint64(A.sequence),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockSubscribeResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.sequence=A.uint64();break;case 3:o.code=A.uint32();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockSubscribeResult\"},A})(),LockState=$root$1.LockState=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lockName=\"\",A.prototype.lockState=\"\",A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.lockName&&Object.hasOwnProperty.call(A,\"lockName\")&&e.uint32(10).string(A.lockName),null!=A.lockState&&Object.hasOwnProperty.call(A,\"lockState\")&&e.uint32(18).string(A.lockState),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.LockState;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.lockName=A.string();break;case 2:o.lockState=A.string();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/LockState\"},A})(),StateLockSubscribeEvent=$root$1.StateLockSubscribeEvent=(()=>{function A(A){if(this.lockStates=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lockStates=$util$1.emptyArray,A.prototype.eventType=0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lockStates&&A.lockStates.length)for(let t=0;t<A.lockStates.length;++t)$root$1.LockState.encode(A.lockStates[t],e.uint32(18).fork()).ldelim();return null!=A.eventType&&Object.hasOwnProperty.call(A,\"eventType\")&&e.uint32(24).int32(A.eventType),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockSubscribeEvent;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lockStates&&o.lockStates.length||(o.lockStates=[]),o.lockStates.push($root$1.LockState.decode(A,A.uint32()));break;case 3:o.eventType=A.int32();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockSubscribeEvent\"},A})(),StateLockUnsubscribe=$root$1.StateLockUnsubscribe=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(16).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(24).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockUnsubscribe;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.sequence=A.uint64();break;case 3:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockUnsubscribe\"},A})(),StateLockCreate=$root$1.StateLockCreate=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.ttl=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.ttl&&Object.hasOwnProperty.call(A,\"ttl\")&&e.uint32(24).uint64(A.ttl),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(34).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockCreate;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.ttl=A.uint64();break;case 4:o.requestUuid=A.string();break;case 5:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockCreate\"},A})(),StateLockCreateResult=$root$1.StateLockCreateResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.code=0,A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(34).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockCreateResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.code=A.uint32();break;case 4:o.requestUuid=A.string();break;case 5:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockCreateResult\"},A})(),StateLockDelete=$root$1.StateLockDelete=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(26).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(32).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockDelete;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.requestUuid=A.string();break;case 4:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockDelete\"},A})(),StateLockDeleteResult=$root$1.StateLockDeleteResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.code=0,A.prototype.requestUuid=\"\",A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(18).string(A.lock),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),null!=A.requestUuid&&Object.hasOwnProperty.call(A,\"requestUuid\")&&e.uint32(34).string(A.requestUuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockDeleteResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.lock=A.string();break;case 3:o.code=A.uint32();break;case 4:o.requestUuid=A.string();break;case 5:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockDeleteResult\"},A})(),StateLockList=$root$1.StateLockList=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(16).uint64(A.sequence),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(24).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockList;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.sequence=A.uint64();break;case 3:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockList\"},A})(),StateLockListResult=$root$1.StateLockListResult=(()=>{function A(A){if(this.lockStates=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.target=\"\",A.prototype.sequence=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.prototype.lockStates=$util$1.emptyArray,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(10).string(A.target),null!=A.sequence&&Object.hasOwnProperty.call(A,\"sequence\")&&e.uint32(16).uint64(A.sequence),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(24).uint32(A.code),null!=A.lockStates&&A.lockStates.length)for(let t=0;t<A.lockStates.length;++t)$root$1.LockState.encode(A.lockStates[t],e.uint32(34).fork()).ldelim();return null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(40).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateLockListResult;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.target=A.string();break;case 2:o.sequence=A.uint64();break;case 3:o.code=A.uint32();break;case 4:o.lockStates&&o.lockStates.length||(o.lockStates=[]),o.lockStates.push($root$1.LockState.decode(A,A.uint32()));break;case 5:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateLockListResult\"},A})(),SyncInit=$root$1.SyncInit=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SyncInit;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.seq=A.uint64();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncInit\"},A})(),SyncInit2=$root$1.SyncInit2=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SyncInit2;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.seq=A.uint64();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncInit2\"},A})(),SyncInitAck=$root$1.SyncInitAck=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(16).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SyncInitAck;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncInitAck\"},A})(),SyncFin=$root$1.SyncFin=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(8).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SyncFin;for(;A.pos<t;){let e=A.uint32();if(e>>>3==1)o.code=A.uint32();else A.skipType(7&e)}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncFin\"},A})(),SubscribeResponse=$root$1.SubscribeResponse=(()=>{function A(A){if(this.errors=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.seq=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.errors=$util$1.emptyArray,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(8).uint64(A.seq),null!=A.errors&&A.errors.length)for(let t=0;t<A.errors.length;++t)$root$1.SubscribeResponse.SubscribeErrorsType.encode(A.errors[t],e.uint32(18).fork()).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SubscribeResponse;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.seq=A.uint64();break;case 2:o.errors&&o.errors.length||(o.errors=[]),o.errors.push($root$1.SubscribeResponse.SubscribeErrorsType.decode(A,A.uint32()));break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SubscribeResponse\"},A.SubscribeErrorsType=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.account=\"\",A.prototype.code=0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.account&&Object.hasOwnProperty.call(A,\"account\")&&e.uint32(10).string(A.account),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(16).uint32(A.code),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.SubscribeResponse.SubscribeErrorsType;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.account=A.string();break;case 2:o.code=A.uint32();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SubscribeResponse.SubscribeErrorsType\"},A}(),A})(),StateHistoryGet2=$root$1.StateHistoryGet2=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.uuid=\"\",A.prototype.startTime=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.endTime=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.dst=\"\",A.prototype.count=0,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){return e||(e=$Writer$1.create()),null!=A.uuid&&Object.hasOwnProperty.call(A,\"uuid\")&&e.uint32(10).string(A.uuid),null!=A.startTime&&Object.hasOwnProperty.call(A,\"startTime\")&&e.uint32(16).uint64(A.startTime),null!=A.endTime&&Object.hasOwnProperty.call(A,\"endTime\")&&e.uint32(24).uint64(A.endTime),null!=A.dst&&Object.hasOwnProperty.call(A,\"dst\")&&e.uint32(34).string(A.dst),null!=A.count&&Object.hasOwnProperty.call(A,\"count\")&&e.uint32(40).uint32(A.count),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(48).uint64(A.flags),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateHistoryGet2;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.uuid=A.string();break;case 2:o.startTime=A.uint64();break;case 3:o.endTime=A.uint64();break;case 4:o.dst=A.string();break;case 5:o.count=A.uint32();break;case 6:o.flags=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateHistoryGet2\"},A})(),HistoryRecord2=$root$1.HistoryRecord2=(()=>{function A(A){if(this.details={},A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.src=\"\",A.prototype.payload=$util$1.newBuffer([]),A.prototype.options=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.ms=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.details=$util$1.emptyObject,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.src&&Object.hasOwnProperty.call(A,\"src\")&&e.uint32(10).string(A.src),null!=A.payload&&Object.hasOwnProperty.call(A,\"payload\")&&e.uint32(18).bytes(A.payload),null!=A.options&&Object.hasOwnProperty.call(A,\"options\")&&e.uint32(24).uint64(A.options),null!=A.ms&&Object.hasOwnProperty.call(A,\"ms\")&&e.uint32(32).uint64(A.ms),null!=A.details&&Object.hasOwnProperty.call(A,\"details\"))for(let t=Object.keys(A.details),o=0;o<t.length;++o)e.uint32(42).fork().uint32(10).string(t[o]).uint32(18).bytes(A.details[t[o]]).ldelim();return e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t,o,g=void 0===e?A.len:A.pos+e,i=new $root$1.HistoryRecord2;for(;A.pos<g;){let e=A.uint32();switch(e>>>3){case 1:i.src=A.string();break;case 2:i.payload=A.bytes();break;case 3:i.options=A.uint64();break;case 4:i.ms=A.uint64();break;case 5:{i.details===$util$1.emptyObject&&(i.details={});let e=A.uint32()+A.pos;for(t=\"\",o=[];A.pos<e;){let e=A.uint32();switch(e>>>3){case 1:t=A.string();break;case 2:o=A.bytes();break;default:A.skipType(7&e)}}i.details[t]=o;break}default:A.skipType(7&e)}}return i},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/HistoryRecord2\"},A})(),StateHistoryGetResult2=$root$1.StateHistoryGetResult2=(()=>{function A(A){if(this.messages=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.uuid=\"\",A.prototype.startTime=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.endTime=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.dst=\"\",A.prototype.messages=$util$1.emptyArray,A.prototype.flags=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.code=0,A.prototype.more=!1,A.prototype.latestTime=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.prototype.oldestTime=$util$1.Long?$util$1.Long.fromBits(0,0,!0):0,A.encode=function(A,e){if(e||(e=$Writer$1.create()),null!=A.uuid&&Object.hasOwnProperty.call(A,\"uuid\")&&e.uint32(10).string(A.uuid),null!=A.startTime&&Object.hasOwnProperty.call(A,\"startTime\")&&e.uint32(16).uint64(A.startTime),null!=A.endTime&&Object.hasOwnProperty.call(A,\"endTime\")&&e.uint32(24).uint64(A.endTime),null!=A.dst&&Object.hasOwnProperty.call(A,\"dst\")&&e.uint32(34).string(A.dst),null!=A.messages&&A.messages.length)for(let t=0;t<A.messages.length;++t)$root$1.HistoryRecord2.encode(A.messages[t],e.uint32(42).fork()).ldelim();return null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(48).uint64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(56).uint32(A.code),null!=A.more&&Object.hasOwnProperty.call(A,\"more\")&&e.uint32(64).bool(A.more),null!=A.latestTime&&Object.hasOwnProperty.call(A,\"latestTime\")&&e.uint32(72).uint64(A.latestTime),null!=A.oldestTime&&Object.hasOwnProperty.call(A,\"oldestTime\")&&e.uint32(80).uint64(A.oldestTime),e},A.decode=function(A,e){A instanceof $Reader||(A=$Reader.create(A));let t=void 0===e?A.len:A.pos+e,o=new $root$1.StateHistoryGetResult2;for(;A.pos<t;){let e=A.uint32();switch(e>>>3){case 1:o.uuid=A.string();break;case 2:o.startTime=A.uint64();break;case 3:o.endTime=A.uint64();break;case 4:o.dst=A.string();break;case 5:o.messages&&o.messages.length||(o.messages=[]),o.messages.push($root$1.HistoryRecord2.decode(A,A.uint32()));break;case 6:o.flags=A.uint64();break;case 7:o.code=A.uint32();break;case 8:o.more=A.bool();break;case 9:o.latestTime=A.uint64();break;case 10:o.oldestTime=A.uint64();break;default:A.skipType(7&e)}}return o},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/StateHistoryGetResult2\"},A})(),URI$1=$root$1.URI=(()=>{const A={},e=Object.create(A);return e[A[0]=\"Unknown\"]=0,e[A[1]=\"PingUri\"]=1,e[A[2]=\"PongUri\"]=2,e[A[3]=\"Ping2Uri\"]=3,e[A[4]=\"Ping3Uri\"]=4,e[A[5]=\"Pong3Uri\"]=5,e[A[11]=\"UserJoinUri\"]=11,e[A[12]=\"UserRespUri\"]=12,e[A[15]=\"UserTicketNearlyExpireUri\"]=15,e[A[16]=\"UserRenewTokenReqUri\"]=16,e[A[17]=\"UserRenewTokenRespUri\"]=17,e[A[18]=\"UserJoin2Uri\"]=18,e[A[19]=\"UserResp2Uri\"]=19,e[A[21]=\"UserQuitUri\"]=21,e[A[22]=\"UserDropUri\"]=22,e[A[24]=\"UserQuit2Uri\"]=24,e[A[31]=\"GroupEnterUri\"]=31,e[A[32]=\"GroupLeaveUri\"]=32,e[A[33]=\"GroupReplyUri\"]=33,e[A[35]=\"GroupDropUri\"]=35,e[A[230]=\"GroupLeave2Uri\"]=230,e[A[36]=\"GroupEnterNoticeUri\"]=36,e[A[37]=\"GroupLeaveNoticeUri\"]=37,e[A[38]=\"GroupEventNoticeUri\"]=38,e[A[39]=\"GroupCountNoticeUri\"]=39,e[A[41]=\"UserStatusListUri\"]=41,e[A[42]=\"UserStatusResultUri\"]=42,e[A[51]=\"GroupStatusListUri\"]=51,e[A[52]=\"GroupStatusResultUri\"]=52,e[A[55]=\"GroupAllUsersListUri\"]=55,e[A[56]=\"GroupAllUsersResultUri\"]=56,e[A[100]=\"MessageUri\"]=100,e[A[101]=\"AckUri\"]=101,e[A[201]=\"UserJoinNoticeUri\"]=201,e[A[202]=\"UserQuitNoticeUri\"]=202,e[A[203]=\"UserWaitNoticeUri\"]=203,e[A[301]=\"UserAttributeGetUri\"]=301,e[A[302]=\"UserAttributeRetUri\"]=302,e[A[303]=\"UserAttributeSetUri\"]=303,e[A[304]=\"UserAttributeModUri\"]=304,e[A[305]=\"UserAttributeDelUri\"]=305,e[A[307]=\"UserAttributeRspUri\"]=307,e[A[308]=\"UserAttributeErrUri\"]=308,e[A[311]=\"UserAttributeKeysGetUri\"]=311,e[A[312]=\"UserAttributeKeysRetUri\"]=312,e[A[351]=\"GroupAttributeGetUri\"]=351,e[A[352]=\"GroupAttributeRetUri\"]=352,e[A[353]=\"GroupAttributeSetUri\"]=353,e[A[354]=\"GroupAttributeModUri\"]=354,e[A[355]=\"GroupAttributeDelUri\"]=355,e[A[356]=\"GroupAttributeAltUri\"]=356,e[A[357]=\"GroupAttributeRspUri\"]=357,e[A[358]=\"GroupAttributeErrUri\"]=358,e[A[361]=\"GroupAttributeKeysGetUri\"]=361,e[A[362]=\"GroupAttributeKeysRetUri\"]=362,e[A[401]=\"SubscribeUserStatusUri\"]=401,e[A[402]=\"UnsubscribeUserStatusUri\"]=402,e[A[499]=\"SubscribeResponseUri\"]=499,e[A[601]=\"StateSubscribeUri\"]=601,e[A[602]=\"StateUpdateUri\"]=602,e[A[603]=\"StateSubscribeResultUri\"]=603,e[A[604]=\"StateUnsubscribeUri\"]=604,e[A[605]=\"StateSetUri\"]=605,e[A[606]=\"StateModifyUri\"]=606,e[A[607]=\"StateRequestResultUri\"]=607,e[A[608]=\"StateGetUri\"]=608,e[A[609]=\"StateGetResultUri\"]=609,e[A[610]=\"StateLockAcquireUri\"]=610,e[A[611]=\"StateLockReleaseUri\"]=611,e[A[612]=\"StateLockAcquireResultUri\"]=612,e[A[613]=\"StateLockUpdateUri\"]=613,e[A[614]=\"StateLockReleaseResultUri\"]=614,e[A[615]=\"StateLockDisableUri\"]=615,e[A[616]=\"StateLockDisableResultUri\"]=616,e[A[617]=\"StateLockSubscribeUri\"]=617,e[A[618]=\"StateLockSubscribeResultUri\"]=618,e[A[619]=\"StateLockSubscribeEventUri\"]=619,e[A[620]=\"StateLockUnsubscribeUri\"]=620,e[A[621]=\"StateLockCreateUri\"]=621,e[A[622]=\"StateLockCreateResultUri\"]=622,e[A[623]=\"StateLockDeleteUri\"]=623,e[A[624]=\"StateLockDeleteResultUri\"]=624,e[A[625]=\"StateLockListUri\"]=625,e[A[626]=\"StateLockListResultUri\"]=626,e[A[750]=\"SyncPacketUri\"]=750,e[A[751]=\"SyncInitUri\"]=751,e[A[752]=\"SyncInitAckUri\"]=752,e[A[753]=\"SyncFinUri\"]=753,e[A[633]=\"StateHistoryGet2Uri\"]=633,e[A[634]=\"StateHistoryGetResult2Uri\"]=634,e[A[754]=\"SyncInit2Uri\"]=754,e})(),UserJoinDetailKey=$root$1.UserJoinDetailKey=(()=>{const A={},e=Object.create(A);return e[A[0]=\"kDetailKeyUnused\"]=0,e[A[1]=\"kDetailKeyVendorConfig\"]=1,e[A[2]=\"kDetailKeyKeepAliveInterval\"]=2,e[A[3]=\"kDetailKeyEnabledSync\"]=3,e})(),LockEventType=$root$1.LockEventType=(()=>{const A={},e=Object.create(A);return e[A[0]=\"LockUnknown\"]=0,e[A[1]=\"LockAdded\"]=1,e[A[2]=\"LockModified\"]=2,e[A[3]=\"LockRemoved\"]=3,e[A[4]=\"LockSnapshot\"]=4,e})();var ProtoPackets$1=Object.freeze({__proto__:null,Ack:Ack,GroupAllUsersList:GroupAllUsersList,GroupAllUsersResult:GroupAllUsersResult,GroupAttributeAlt:GroupAttributeAlt,GroupAttributeDel:GroupAttributeDel,GroupAttributeErr:GroupAttributeErr,GroupAttributeGet:GroupAttributeGet,GroupAttributeKeysGet:GroupAttributeKeysGet,GroupAttributeKeysRet:GroupAttributeKeysRet,GroupAttributeMod:GroupAttributeMod,GroupAttributeRet:GroupAttributeRet,GroupAttributeRsp:GroupAttributeRsp,GroupAttributeSet:GroupAttributeSet,GroupCountNotice:GroupCountNotice,GroupDrop:GroupDrop,GroupEnter:GroupEnter,GroupEnterNotice:GroupEnterNotice,GroupLeave:GroupLeave,GroupLeave2:GroupLeave2,GroupLeaveNotice:GroupLeaveNotice,GroupReply:GroupReply,GroupStatusList:GroupStatusList,GroupStatusResult:GroupStatusResult,HistoryRecord2:HistoryRecord2,LockEventType:LockEventType,LockState:LockState,Message:Message,Ping:Ping,Ping2:Ping2,Ping3:Ping3,Pong:Pong,Pong3:Pong3,StateGet:StateGet,StateGetResult:StateGetResult,StateHistoryGet2:StateHistoryGet2,StateHistoryGetResult2:StateHistoryGetResult2,StateLockAcquire:StateLockAcquire,StateLockAcquireResult:StateLockAcquireResult,StateLockCreate:StateLockCreate,StateLockCreateResult:StateLockCreateResult,StateLockDelete:StateLockDelete,StateLockDeleteResult:StateLockDeleteResult,StateLockDisable:StateLockDisable,StateLockDisableResult:StateLockDisableResult,StateLockList:StateLockList,StateLockListResult:StateLockListResult,StateLockRelease:StateLockRelease,StateLockReleaseResult:StateLockReleaseResult,StateLockSubscribe:StateLockSubscribe,StateLockSubscribeEvent:StateLockSubscribeEvent,StateLockSubscribeResult:StateLockSubscribeResult,StateLockUnsubscribe:StateLockUnsubscribe,StateLockUpdate:StateLockUpdate,StateModify:StateModify,StateRequestResult:StateRequestResult,StateSet:StateSet,StateSubscribe:StateSubscribe,StateSubscribeResult:StateSubscribeResult,StateUnsubscribe:StateUnsubscribe,StateUpdate:StateUpdate,SubscribeResponse:SubscribeResponse,SubscribeUserStatus:SubscribeUserStatus,SyncFin:SyncFin,SyncInit:SyncInit,SyncInit2:SyncInit2,SyncInitAck:SyncInitAck,URI:URI$1,UnsubscribeUserStatus:UnsubscribeUserStatus,UserAttributeDel:UserAttributeDel,UserAttributeErr:UserAttributeErr,UserAttributeGet:UserAttributeGet,UserAttributeKeysGet:UserAttributeKeysGet,UserAttributeKeysRet:UserAttributeKeysRet,UserAttributeMod:UserAttributeMod,UserAttributeRet:UserAttributeRet,UserAttributeRsp:UserAttributeRsp,UserAttributeSet:UserAttributeSet,UserDrop:UserDrop,UserJoin:UserJoin,UserJoin2:UserJoin2,UserJoinDetailKey:UserJoinDetailKey,UserJoinNotice:UserJoinNotice,UserQuit:UserQuit,UserQuit2:UserQuit2,UserQuitNotice:UserQuitNotice,UserRenewTokenReq:UserRenewTokenReq,UserRenewTokenResp:UserRenewTokenResp,UserResp:UserResp,UserResp2:UserResp2,UserStatusList:UserStatusList,UserStatusResult:UserStatusResult,UserTicketNearlyExpire:UserTicketNearlyExpire,UserWaitNotice:UserWaitNotice,Wrapper:Wrapper$1,default:$root$1});const{URI:URI}=$root$1,{Wrapper:Wrapper}=ProtoPackets$1,PacketsAndURI=_objectWithoutProperties(ProtoPackets$1,[\"Wrapper\"]),Packets=omit$1(PacketsAndURI,\"URI\",\"LockEventType\",\"UserJoinDetailKey\"),nameToUri=A=>{const e=\"\".concat(A,\"Uri\"),t=URI[e];if(\"number\"!=typeof t||0===t)throw new TypeError(\"Got Unknown URI Name\");return t};function uriToPacketName(A){return URI[A].slice(0,-3)}function getWrappedByName(A,e){const t=nameToUri(A),o=Packets[A],g=new o(e),i=o.encode(g).finish();return new Wrapper({uri:t,data:i})}function getSyncWrapped(A){return new Wrapper({uri:URI.SyncPacketUri,data:A})}const AP_DOMAINS_NEW=[\"web-1.ap.sd-rtn.com\",\"web-2.ap.sd-rtn.com\"],AP_DOMAINS_IO=[\"ap-web-1.agora.io\",\"ap-web-2.agora.io\"],AP_DOMAINS_IPV6=[\"ap-web-1.agora.io\",\"ap-web-2.agora.io\"],AP_BACKUP_DOMAINS_NEW=[\"web-3.ap.sd-rtn.com\",\"web-4.ap.sd-rtn.com\"],AP_BACKUP_DOMAINS_IO=[\"ap-web-3.agora.io\",\"ap-web-4.agora.io\"],getApUrl=A=>{var e;const t=getParameter(\"AP_DOMAIN\"),o=isValidEnvString(t),g=getPrivateSettingsPortAndDomains([A]),i=g.port,r=g.hostname[0];return\"https://\".concat(o?t:r).concat(i?\":\".concat(i):\"\").concat(null!==(e=window.testPath)&&void 0!==e?e:\"/api/v1\")};function getEdgeDomain(A,e,t){var o;const g=isValidEnvString(getParameter(\"EDGE_DOMAIN_TLD\")),i=t&&t[0],r=t&&t[1];return\"\".concat(A.split(\".\").join(\"-\"),\".edge.\").concat(g?getParameter(\"EDGE_DOMAIN_TLD\"):e?null!==(o=null!=r?r:i)&&void 0!==o?o:\"sd-rtn.com\":null!=i?i:\"agora.io\")}const $Writer=minimal_1.Writer,$util=minimal_1.util,$root=minimal_1.roots.default||(minimal_1.roots.default={}),Session=$root.Session=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.appId=\"\",A.prototype.ver=\"\",A.prototype.buildno=0,A.prototype.installId=\"\",A.prototype.os=0,A.prototype.did=\"\",A.prototype.index=null,A.prototype.token=\"\",A.prototype.version=0,A.prototype.subVersion=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.appId&&Object.hasOwnProperty.call(A,\"appId\")&&e.uint32(42).string(A.appId),null!=A.ver&&Object.hasOwnProperty.call(A,\"ver\")&&e.uint32(50).string(A.ver),null!=A.buildno&&Object.hasOwnProperty.call(A,\"buildno\")&&e.uint32(56).int32(A.buildno),null!=A.installId&&Object.hasOwnProperty.call(A,\"installId\")&&e.uint32(66).string(A.installId),null!=A.os&&Object.hasOwnProperty.call(A,\"os\")&&e.uint32(128).int32(A.os),null!=A.did&&Object.hasOwnProperty.call(A,\"did\")&&e.uint32(138).string(A.did),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.Session.CommonIndex.encode(A.index,e.uint32(162).fork()).ldelim(),null!=A.token&&Object.hasOwnProperty.call(A,\"token\")&&e.uint32(170).string(A.token),null!=A.version&&Object.hasOwnProperty.call(A,\"version\")&&e.uint32(176).int32(A.version),null!=A.subVersion&&Object.hasOwnProperty.call(A,\"subVersion\")&&e.uint32(184).int32(A.subVersion),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Session\"},A.CommonIndex=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.index1=\"\",A.prototype.index2=\"\",A.prototype.index3=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.index1&&Object.hasOwnProperty.call(A,\"index1\")&&e.uint32(10).string(A.index1),null!=A.index2&&Object.hasOwnProperty.call(A,\"index2\")&&e.uint32(18).string(A.index2),null!=A.index3&&Object.hasOwnProperty.call(A,\"index3\")&&e.uint32(26).string(A.index3),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Session.CommonIndex\"},A}(),A})(),ApEvent=$root.ApEvent=(()=>{function A(A){if(this.linkServerList=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.apAddr=\"\",A.prototype.linkServerList=$util.emptyArray,A.prototype.localWanIp=\"\",A.prototype.errCode=0,A.prototype.serverErrCode=0,A.prototype.isp=\"\",A.prototype.opId=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.envId=0,A.prototype.flag=0,A.prototype.area=\"\",A.prototype.responseTime=0,A.prototype.apLinkType=\"\",A.prototype.version=0,A.prototype.subVersion=0,A.prototype.connectionsequence=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.resultcount=0,A.prototype.validresultcount=0,A.prototype.newvalidresultcount=0,A.encode=function(A,e){if(e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.apAddr&&Object.hasOwnProperty.call(A,\"apAddr\")&&e.uint32(50).string(A.apAddr),null!=A.linkServerList&&A.linkServerList.length)for(let t=0;t<A.linkServerList.length;++t)e.uint32(58).string(A.linkServerList[t]);return null!=A.localWanIp&&Object.hasOwnProperty.call(A,\"localWanIp\")&&e.uint32(66).string(A.localWanIp),null!=A.errCode&&Object.hasOwnProperty.call(A,\"errCode\")&&e.uint32(72).int32(A.errCode),null!=A.serverErrCode&&Object.hasOwnProperty.call(A,\"serverErrCode\")&&e.uint32(80).int32(A.serverErrCode),null!=A.isp&&Object.hasOwnProperty.call(A,\"isp\")&&e.uint32(90).string(A.isp),null!=A.opId&&Object.hasOwnProperty.call(A,\"opId\")&&e.uint32(96).int64(A.opId),null!=A.envId&&Object.hasOwnProperty.call(A,\"envId\")&&e.uint32(104).int32(A.envId),null!=A.flag&&Object.hasOwnProperty.call(A,\"flag\")&&e.uint32(112).int32(A.flag),null!=A.area&&Object.hasOwnProperty.call(A,\"area\")&&e.uint32(122).string(A.area),null!=A.responseTime&&Object.hasOwnProperty.call(A,\"responseTime\")&&e.uint32(128).int32(A.responseTime),null!=A.apLinkType&&Object.hasOwnProperty.call(A,\"apLinkType\")&&e.uint32(138).string(A.apLinkType),null!=A.version&&Object.hasOwnProperty.call(A,\"version\")&&e.uint32(144).int32(A.version),null!=A.subVersion&&Object.hasOwnProperty.call(A,\"subVersion\")&&e.uint32(152).int32(A.subVersion),null!=A.connectionsequence&&Object.hasOwnProperty.call(A,\"connectionsequence\")&&e.uint32(160).int64(A.connectionsequence),null!=A.resultcount&&Object.hasOwnProperty.call(A,\"resultcount\")&&e.uint32(168).int32(A.resultcount),null!=A.validresultcount&&Object.hasOwnProperty.call(A,\"validresultcount\")&&e.uint32(176).int32(A.validresultcount),null!=A.newvalidresultcount&&Object.hasOwnProperty.call(A,\"newvalidresultcount\")&&e.uint32(184).int32(A.newvalidresultcount),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ApEvent\"},A})(),ApRequest=$root.ApRequest=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.apAddr=\"\",A.prototype.opId=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.envId=0,A.prototype.flag=0,A.prototype.version=0,A.prototype.subVersion=0,A.prototype.connectionsequence=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.rtmapflag=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.apAddr&&Object.hasOwnProperty.call(A,\"apAddr\")&&e.uint32(42).string(A.apAddr),null!=A.opId&&Object.hasOwnProperty.call(A,\"opId\")&&e.uint32(48).int64(A.opId),null!=A.envId&&Object.hasOwnProperty.call(A,\"envId\")&&e.uint32(56).int32(A.envId),null!=A.flag&&Object.hasOwnProperty.call(A,\"flag\")&&e.uint32(64).int32(A.flag),null!=A.version&&Object.hasOwnProperty.call(A,\"version\")&&e.uint32(72).int32(A.version),null!=A.subVersion&&Object.hasOwnProperty.call(A,\"subVersion\")&&e.uint32(80).int32(A.subVersion),null!=A.connectionsequence&&Object.hasOwnProperty.call(A,\"connectionsequence\")&&e.uint32(88).int64(A.connectionsequence),null!=A.rtmapflag&&Object.hasOwnProperty.call(A,\"rtmapflag\")&&e.uint32(96).int64(A.rtmapflag),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ApRequest\"},A})(),LinkLoginRequest=$root.LinkLoginRequest=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.destServerIp=\"\",A.prototype.linkId=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.destServerIp&&Object.hasOwnProperty.call(A,\"destServerIp\")&&e.uint32(42).string(A.destServerIp),null!=A.linkId&&Object.hasOwnProperty.call(A,\"linkId\")&&e.uint32(48).int32(A.linkId),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/LinkLoginRequest\"},A})(),Link=$root.Link=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ec=0,A.prototype.sc=0,A.prototype.destServerIp=\"\",A.prototype.ackedServerIp=\"\",A.prototype.responseTime=0,A.prototype.version=0,A.prototype.subVersion=0,A.prototype.connectionsequence=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.linktype=0,A.prototype.linkflag=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.linkenv=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.ec&&Object.hasOwnProperty.call(A,\"ec\")&&e.uint32(40).int32(A.ec),null!=A.sc&&Object.hasOwnProperty.call(A,\"sc\")&&e.uint32(48).int32(A.sc),null!=A.destServerIp&&Object.hasOwnProperty.call(A,\"destServerIp\")&&e.uint32(58).string(A.destServerIp),null!=A.ackedServerIp&&Object.hasOwnProperty.call(A,\"ackedServerIp\")&&e.uint32(66).string(A.ackedServerIp),null!=A.responseTime&&Object.hasOwnProperty.call(A,\"responseTime\")&&e.uint32(72).int32(A.responseTime),null!=A.version&&Object.hasOwnProperty.call(A,\"version\")&&e.uint32(80).int32(A.version),null!=A.subVersion&&Object.hasOwnProperty.call(A,\"subVersion\")&&e.uint32(88).int32(A.subVersion),null!=A.connectionsequence&&Object.hasOwnProperty.call(A,\"connectionsequence\")&&e.uint32(96).int64(A.connectionsequence),null!=A.linktype&&Object.hasOwnProperty.call(A,\"linktype\")&&e.uint32(104).int32(A.linktype),null!=A.linkflag&&Object.hasOwnProperty.call(A,\"linkflag\")&&e.uint32(112).int64(A.linkflag),null!=A.linkenv&&Object.hasOwnProperty.call(A,\"linkenv\")&&e.uint32(120).int32(A.linkenv),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Link\"},A})(),Logout=$root.Logout=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.version=0,A.prototype.subVersion=0,A.prototype.connectionsequence=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.linktype=0,A.prototype.linkflag=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.linkenv=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.version&&Object.hasOwnProperty.call(A,\"version\")&&e.uint32(40).int32(A.version),null!=A.subVersion&&Object.hasOwnProperty.call(A,\"subVersion\")&&e.uint32(48).int32(A.subVersion),null!=A.connectionsequence&&Object.hasOwnProperty.call(A,\"connectionsequence\")&&e.uint32(56).int64(A.connectionsequence),null!=A.linktype&&Object.hasOwnProperty.call(A,\"linktype\")&&e.uint32(64).int32(A.linktype),null!=A.linkflag&&Object.hasOwnProperty.call(A,\"linkflag\")&&e.uint32(72).int64(A.linkflag),null!=A.linkenv&&Object.hasOwnProperty.call(A,\"linkenv\")&&e.uint32(80).int32(A.linkenv),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/Logout\"},A})(),KickedOff=$root.KickedOff=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.linkId=0,A.prototype.code=0,A.prototype.server=\"\",A.prototype.serverCode=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.linkId&&Object.hasOwnProperty.call(A,\"linkId\")&&e.uint32(48).int32(A.linkId),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(56).int32(A.code),null!=A.server&&Object.hasOwnProperty.call(A,\"server\")&&e.uint32(66).string(A.server),null!=A.serverCode&&Object.hasOwnProperty.call(A,\"serverCode\")&&e.uint32(72).int32(A.serverCode),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/KickedOff\"},A})(),ChnJoin=$root.ChnJoin=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.cname=\"\",A.prototype.errCode=0,A.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.joinFlag=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.cname&&Object.hasOwnProperty.call(A,\"cname\")&&e.uint32(50).string(A.cname),null!=A.errCode&&Object.hasOwnProperty.call(A,\"errCode\")&&e.uint32(56).int32(A.errCode),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(64).int64(A.seq),null!=A.joinFlag&&Object.hasOwnProperty.call(A,\"joinFlag\")&&e.uint32(72).int64(A.joinFlag),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ChnJoin\"},A})(),ChnJoinRes=$root.ChnJoinRes=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.cname=\"\",A.prototype.errCode=0,A.prototype.serverErrCode=0,A.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.cname&&Object.hasOwnProperty.call(A,\"cname\")&&e.uint32(50).string(A.cname),null!=A.errCode&&Object.hasOwnProperty.call(A,\"errCode\")&&e.uint32(56).int32(A.errCode),null!=A.serverErrCode&&Object.hasOwnProperty.call(A,\"serverErrCode\")&&e.uint32(64).int32(A.serverErrCode),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(72).int64(A.seq),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ChnJoinRes\"},A})(),ChnLeave=$root.ChnLeave=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.cname=\"\",A.prototype.errCode=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.cname&&Object.hasOwnProperty.call(A,\"cname\")&&e.uint32(50).string(A.cname),null!=A.errCode&&Object.hasOwnProperty.call(A,\"errCode\")&&e.uint32(56).int32(A.errCode),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ChnLeave\"},A})(),ConnectionStateChange=$root.ConnectionStateChange=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.oldState=0,A.prototype.newState=0,A.prototype.reason=0,A.prototype.reconnId=0,A.prototype.version=0,A.prototype.subVersion=0,A.prototype.lastdonestep=0,A.prototype.failedstep=0,A.prototype.errorcode=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.servererrorcode=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.networkchangesequence=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.networkchangeelapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.statechangeelapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.oldState&&Object.hasOwnProperty.call(A,\"oldState\")&&e.uint32(40).int32(A.oldState),null!=A.newState&&Object.hasOwnProperty.call(A,\"newState\")&&e.uint32(48).int32(A.newState),null!=A.reason&&Object.hasOwnProperty.call(A,\"reason\")&&e.uint32(56).int32(A.reason),null!=A.reconnId&&Object.hasOwnProperty.call(A,\"reconnId\")&&e.uint32(64).int32(A.reconnId),null!=A.version&&Object.hasOwnProperty.call(A,\"version\")&&e.uint32(72).int32(A.version),null!=A.subVersion&&Object.hasOwnProperty.call(A,\"subVersion\")&&e.uint32(80).int32(A.subVersion),null!=A.lastdonestep&&Object.hasOwnProperty.call(A,\"lastdonestep\")&&e.uint32(88).int32(A.lastdonestep),null!=A.failedstep&&Object.hasOwnProperty.call(A,\"failedstep\")&&e.uint32(96).int32(A.failedstep),null!=A.errorcode&&Object.hasOwnProperty.call(A,\"errorcode\")&&e.uint32(104).int64(A.errorcode),null!=A.servererrorcode&&Object.hasOwnProperty.call(A,\"servererrorcode\")&&e.uint32(112).int64(A.servererrorcode),null!=A.networkchangesequence&&Object.hasOwnProperty.call(A,\"networkchangesequence\")&&e.uint32(120).int64(A.networkchangesequence),null!=A.networkchangeelapse&&Object.hasOwnProperty.call(A,\"networkchangeelapse\")&&e.uint32(128).int64(A.networkchangeelapse),null!=A.statechangeelapse&&Object.hasOwnProperty.call(A,\"statechangeelapse\")&&e.uint32(136).int64(A.statechangeelapse),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ConnectionStateChange\"},A})(),RtmSdkMessageCount=$root.RtmSdkMessageCount=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.messagecategory=0,A.prototype.reportsequence=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sentcount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.receivedcount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack10mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack25mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack50mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack75mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack100mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack150mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack200mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack250mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack300mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack400mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack500mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack600mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack800mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack1000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack2000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack3000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack5000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerack7000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.peerackslowcount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack10mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack25mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack50mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack75mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack100mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack150mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack200mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack250mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack300mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack400mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack500mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack600mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack800mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack1000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack2000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack3000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack5000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientack7000mscount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.norecipientackslowcount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.acktimeoutcount=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.apimajorversion=0,A.prototype.apiminorversion=0,A.prototype.os=0,A.prototype.toooftencount=0,A.prototype.receiverofflinecount=0,A.prototype.invalidmessagecount=0,A.prototype.unknowerrorcount=0,A.prototype.servercachedcount=0,A.prototype.timeoutcount=0,A.prototype.successcount=0,A.prototype.userid=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(26).string(A.sid),null!=A.messagecategory&&Object.hasOwnProperty.call(A,\"messagecategory\")&&e.uint32(32).int32(A.messagecategory),null!=A.reportsequence&&Object.hasOwnProperty.call(A,\"reportsequence\")&&e.uint32(40).int64(A.reportsequence),null!=A.sentcount&&Object.hasOwnProperty.call(A,\"sentcount\")&&e.uint32(48).int64(A.sentcount),null!=A.receivedcount&&Object.hasOwnProperty.call(A,\"receivedcount\")&&e.uint32(56).int64(A.receivedcount),null!=A.peerack10mscount&&Object.hasOwnProperty.call(A,\"peerack10mscount\")&&e.uint32(64).int64(A.peerack10mscount),null!=A.peerack25mscount&&Object.hasOwnProperty.call(A,\"peerack25mscount\")&&e.uint32(72).int64(A.peerack25mscount),null!=A.peerack50mscount&&Object.hasOwnProperty.call(A,\"peerack50mscount\")&&e.uint32(80).int64(A.peerack50mscount),null!=A.peerack75mscount&&Object.hasOwnProperty.call(A,\"peerack75mscount\")&&e.uint32(88).int64(A.peerack75mscount),null!=A.peerack100mscount&&Object.hasOwnProperty.call(A,\"peerack100mscount\")&&e.uint32(96).int64(A.peerack100mscount),null!=A.peerack150mscount&&Object.hasOwnProperty.call(A,\"peerack150mscount\")&&e.uint32(104).int64(A.peerack150mscount),null!=A.peerack200mscount&&Object.hasOwnProperty.call(A,\"peerack200mscount\")&&e.uint32(112).int64(A.peerack200mscount),null!=A.peerack250mscount&&Object.hasOwnProperty.call(A,\"peerack250mscount\")&&e.uint32(120).int64(A.peerack250mscount),null!=A.peerack300mscount&&Object.hasOwnProperty.call(A,\"peerack300mscount\")&&e.uint32(128).int64(A.peerack300mscount),null!=A.peerack400mscount&&Object.hasOwnProperty.call(A,\"peerack400mscount\")&&e.uint32(136).int64(A.peerack400mscount),null!=A.peerack500mscount&&Object.hasOwnProperty.call(A,\"peerack500mscount\")&&e.uint32(144).int64(A.peerack500mscount),null!=A.peerack600mscount&&Object.hasOwnProperty.call(A,\"peerack600mscount\")&&e.uint32(152).int64(A.peerack600mscount),null!=A.peerack800mscount&&Object.hasOwnProperty.call(A,\"peerack800mscount\")&&e.uint32(160).int64(A.peerack800mscount),null!=A.peerack1000mscount&&Object.hasOwnProperty.call(A,\"peerack1000mscount\")&&e.uint32(168).int64(A.peerack1000mscount),null!=A.peerack2000mscount&&Object.hasOwnProperty.call(A,\"peerack2000mscount\")&&e.uint32(176).int64(A.peerack2000mscount),null!=A.peerack3000mscount&&Object.hasOwnProperty.call(A,\"peerack3000mscount\")&&e.uint32(184).int64(A.peerack3000mscount),null!=A.peerack5000mscount&&Object.hasOwnProperty.call(A,\"peerack5000mscount\")&&e.uint32(192).int64(A.peerack5000mscount),null!=A.peerack7000mscount&&Object.hasOwnProperty.call(A,\"peerack7000mscount\")&&e.uint32(200).int64(A.peerack7000mscount),null!=A.peerackslowcount&&Object.hasOwnProperty.call(A,\"peerackslowcount\")&&e.uint32(208).int64(A.peerackslowcount),null!=A.norecipientack10mscount&&Object.hasOwnProperty.call(A,\"norecipientack10mscount\")&&e.uint32(216).int64(A.norecipientack10mscount),null!=A.norecipientack25mscount&&Object.hasOwnProperty.call(A,\"norecipientack25mscount\")&&e.uint32(224).int64(A.norecipientack25mscount),null!=A.norecipientack50mscount&&Object.hasOwnProperty.call(A,\"norecipientack50mscount\")&&e.uint32(232).int64(A.norecipientack50mscount),null!=A.norecipientack75mscount&&Object.hasOwnProperty.call(A,\"norecipientack75mscount\")&&e.uint32(240).int64(A.norecipientack75mscount),null!=A.norecipientack100mscount&&Object.hasOwnProperty.call(A,\"norecipientack100mscount\")&&e.uint32(248).int64(A.norecipientack100mscount),null!=A.norecipientack150mscount&&Object.hasOwnProperty.call(A,\"norecipientack150mscount\")&&e.uint32(256).int64(A.norecipientack150mscount),null!=A.norecipientack200mscount&&Object.hasOwnProperty.call(A,\"norecipientack200mscount\")&&e.uint32(264).int64(A.norecipientack200mscount),null!=A.norecipientack250mscount&&Object.hasOwnProperty.call(A,\"norecipientack250mscount\")&&e.uint32(272).int64(A.norecipientack250mscount),null!=A.norecipientack300mscount&&Object.hasOwnProperty.call(A,\"norecipientack300mscount\")&&e.uint32(280).int64(A.norecipientack300mscount),null!=A.norecipientack400mscount&&Object.hasOwnProperty.call(A,\"norecipientack400mscount\")&&e.uint32(288).int64(A.norecipientack400mscount),null!=A.norecipientack500mscount&&Object.hasOwnProperty.call(A,\"norecipientack500mscount\")&&e.uint32(296).int64(A.norecipientack500mscount),null!=A.norecipientack600mscount&&Object.hasOwnProperty.call(A,\"norecipientack600mscount\")&&e.uint32(304).int64(A.norecipientack600mscount),null!=A.norecipientack800mscount&&Object.hasOwnProperty.call(A,\"norecipientack800mscount\")&&e.uint32(312).int64(A.norecipientack800mscount),null!=A.norecipientack1000mscount&&Object.hasOwnProperty.call(A,\"norecipientack1000mscount\")&&e.uint32(320).int64(A.norecipientack1000mscount),null!=A.norecipientack2000mscount&&Object.hasOwnProperty.call(A,\"norecipientack2000mscount\")&&e.uint32(328).int64(A.norecipientack2000mscount),null!=A.norecipientack3000mscount&&Object.hasOwnProperty.call(A,\"norecipientack3000mscount\")&&e.uint32(336).int64(A.norecipientack3000mscount),null!=A.norecipientack5000mscount&&Object.hasOwnProperty.call(A,\"norecipientack5000mscount\")&&e.uint32(344).int64(A.norecipientack5000mscount),null!=A.norecipientack7000mscount&&Object.hasOwnProperty.call(A,\"norecipientack7000mscount\")&&e.uint32(352).int64(A.norecipientack7000mscount),null!=A.norecipientackslowcount&&Object.hasOwnProperty.call(A,\"norecipientackslowcount\")&&e.uint32(360).int64(A.norecipientackslowcount),null!=A.acktimeoutcount&&Object.hasOwnProperty.call(A,\"acktimeoutcount\")&&e.uint32(368).int64(A.acktimeoutcount),null!=A.apimajorversion&&Object.hasOwnProperty.call(A,\"apimajorversion\")&&e.uint32(376).int32(A.apimajorversion),null!=A.apiminorversion&&Object.hasOwnProperty.call(A,\"apiminorversion\")&&e.uint32(384).int32(A.apiminorversion),null!=A.os&&Object.hasOwnProperty.call(A,\"os\")&&e.uint32(392).int32(A.os),null!=A.toooftencount&&Object.hasOwnProperty.call(A,\"toooftencount\")&&e.uint32(400).int32(A.toooftencount),null!=A.receiverofflinecount&&Object.hasOwnProperty.call(A,\"receiverofflinecount\")&&e.uint32(408).int32(A.receiverofflinecount),null!=A.invalidmessagecount&&Object.hasOwnProperty.call(A,\"invalidmessagecount\")&&e.uint32(416).int32(A.invalidmessagecount),null!=A.unknowerrorcount&&Object.hasOwnProperty.call(A,\"unknowerrorcount\")&&e.uint32(424).int32(A.unknowerrorcount),null!=A.servercachedcount&&Object.hasOwnProperty.call(A,\"servercachedcount\")&&e.uint32(432).int32(A.servercachedcount),null!=A.timeoutcount&&Object.hasOwnProperty.call(A,\"timeoutcount\")&&e.uint32(440).int32(A.timeoutcount),null!=A.successcount&&Object.hasOwnProperty.call(A,\"successcount\")&&e.uint32(448).int32(A.successcount),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(458).string(A.userid),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/RtmSdkMessageCount\"},A})(),SyncOperateEvent=$root.SyncOperateEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ip=\"\",A.prototype.userid=\"\",A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.requestts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.target=\"\",A.prototype.eventtype=\"\",A.prototype.revision=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.uuid=\"\",A.prototype.sdktype=0,A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.code=0,A.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.index=null,A.prototype.lock=\"\",A.prototype.lockrev=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.subtarget=\"\",A.prototype.usersid=\"\",A.prototype.sdkip=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.ip&&Object.hasOwnProperty.call(A,\"ip\")&&e.uint32(18).string(A.ip),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(26).string(A.userid),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(32).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.requestts&&Object.hasOwnProperty.call(A,\"requestts\")&&e.uint32(48).int64(A.requestts),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(56).int64(A.replyts),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(66).string(A.target),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(74).string(A.eventtype),null!=A.revision&&Object.hasOwnProperty.call(A,\"revision\")&&e.uint32(80).int64(A.revision),null!=A.uuid&&Object.hasOwnProperty.call(A,\"uuid\")&&e.uint32(90).string(A.uuid),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(96).int32(A.sdktype),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(104).int64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(112).int32(A.code),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(120).int64(A.seq),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(130).fork()).ldelim(),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(138).string(A.lock),null!=A.lockrev&&Object.hasOwnProperty.call(A,\"lockrev\")&&e.uint32(144).int64(A.lockrev),null!=A.subtarget&&Object.hasOwnProperty.call(A,\"subtarget\")&&e.uint32(154).string(A.subtarget),null!=A.usersid&&Object.hasOwnProperty.call(A,\"usersid\")&&e.uint32(162).string(A.usersid),null!=A.sdkip&&Object.hasOwnProperty.call(A,\"sdkip\")&&e.uint32(170).string(A.sdkip),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncOperateEvent\"},A})(),SyncSubscribeEvent=$root.SyncSubscribeEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.userid=\"\",A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.target=\"\",A.prototype.eventtype=\"\",A.prototype.sdktype=0,A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.code=0,A.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.requestts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.index=null,A.prototype.subtarget=\"\",A.prototype.usersid=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(26).string(A.userid),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(32).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(66).string(A.target),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(74).string(A.eventtype),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(96).int32(A.sdktype),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(104).int64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(112).int32(A.code),null!=A.seq&&Object.hasOwnProperty.call(A,\"seq\")&&e.uint32(120).int64(A.seq),null!=A.requestts&&Object.hasOwnProperty.call(A,\"requestts\")&&e.uint32(128).int64(A.requestts),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(136).int64(A.replyts),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(146).fork()).ldelim(),null!=A.subtarget&&Object.hasOwnProperty.call(A,\"subtarget\")&&e.uint32(154).string(A.subtarget),null!=A.usersid&&Object.hasOwnProperty.call(A,\"usersid\")&&e.uint32(162).string(A.usersid),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncSubscribeEvent\"},A})(),SyncUpdateEvent=$root.SyncUpdateEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.userid=\"\",A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.target=\"\",A.prototype.eventtype=\"\",A.prototype.revision=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sdktype=0,A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.count=0,A.prototype.delta=0,A.prototype.code=0,A.prototype.index=null,A.prototype.subtarget=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(26).string(A.userid),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(32).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(56).int64(A.replyts),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(66).string(A.target),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(74).string(A.eventtype),null!=A.revision&&Object.hasOwnProperty.call(A,\"revision\")&&e.uint32(80).int64(A.revision),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(96).int32(A.sdktype),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(104).int64(A.flags),null!=A.count&&Object.hasOwnProperty.call(A,\"count\")&&e.uint32(112).int32(A.count),null!=A.delta&&Object.hasOwnProperty.call(A,\"delta\")&&e.uint32(120).int32(A.delta),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(128).int32(A.code),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(138).fork()).ldelim(),null!=A.subtarget&&Object.hasOwnProperty.call(A,\"subtarget\")&&e.uint32(162).string(A.subtarget),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncUpdateEvent\"},A})(),CommonIndex=$root.CommonIndex=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.index1=\"\",A.prototype.index2=\"\",A.prototype.index3=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.index1&&Object.hasOwnProperty.call(A,\"index1\")&&e.uint32(10).string(A.index1),null!=A.index2&&Object.hasOwnProperty.call(A,\"index2\")&&e.uint32(18).string(A.index2),null!=A.index3&&Object.hasOwnProperty.call(A,\"index3\")&&e.uint32(26).string(A.index3),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/CommonIndex\"},A})(),ProtoRaws=$root.ProtoRaws=(()=>{function A(A){if(this.payloads=[],A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sendTs=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.payloads=$util.emptyArray,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.aid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){if(e||(e=$Writer.create()),null!=A.sendTs&&Object.hasOwnProperty.call(A,\"sendTs\")&&e.uint32(8).int64(A.sendTs),null!=A.payloads&&A.payloads.length)for(let t=0;t<A.payloads.length;++t)$root.ProtoRaws.MessageInfo.encode(A.payloads[t],e.uint32(18).fork()).ldelim();return null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(24).int64(A.vid),null!=A.aid&&Object.hasOwnProperty.call(A,\"aid\")&&e.uint32(32).int64(A.aid),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ProtoRaws\"},A.MessageInfo=function(){function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.id=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.msg=$util.newBuffer([]),A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.id&&Object.hasOwnProperty.call(A,\"id\")&&e.uint32(8).int64(A.id),null!=A.msg&&Object.hasOwnProperty.call(A,\"msg\")&&e.uint32(18).bytes(A.msg),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ProtoRaws.MessageInfo\"},A}(),A})(),LoginResult=$root.LoginResult=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.code=0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.userId=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(26).string(A.sid),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(32).int32(A.code),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(40).int64(A.elapse),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(50).string(A.userId),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/LoginResult\"},A})(),ChannelPresenceSnapshotEvent=$root.ChannelPresenceSnapshotEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.channelName=\"\",A.prototype.channelType=0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.reqId=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(26).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(34).string(A.userId),null!=A.channelName&&Object.hasOwnProperty.call(A,\"channelName\")&&e.uint32(42).string(A.channelName),null!=A.channelType&&Object.hasOwnProperty.call(A,\"channelType\")&&e.uint32(48).int32(A.channelType),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(56).int64(A.elapse),null!=A.reqId&&Object.hasOwnProperty.call(A,\"reqId\")&&e.uint32(64).int64(A.reqId),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/ChannelPresenceSnapshotEvent\"},A})(),LinkStateChange=$root.LinkStateChange=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.userid=\"\",A.prototype.currentState=0,A.prototype.previousState=0,A.prototype.operation=0,A.prototype.reason=0,A.prototype.serviceType=0,A.prototype.streamChannelName=\"\",A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(26).string(A.sid),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(34).string(A.userid),null!=A.currentState&&Object.hasOwnProperty.call(A,\"currentState\")&&e.uint32(40).int32(A.currentState),null!=A.previousState&&Object.hasOwnProperty.call(A,\"previousState\")&&e.uint32(48).int32(A.previousState),null!=A.operation&&Object.hasOwnProperty.call(A,\"operation\")&&e.uint32(56).int32(A.operation),null!=A.reason&&Object.hasOwnProperty.call(A,\"reason\")&&e.uint32(64).int32(A.reason),null!=A.serviceType&&Object.hasOwnProperty.call(A,\"serviceType\")&&e.uint32(72).int32(A.serviceType),null!=A.streamChannelName&&Object.hasOwnProperty.call(A,\"streamChannelName\")&&e.uint32(82).string(A.streamChannelName),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(88).int64(A.elapse),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/LinkStateChange\"},A})(),RenewToken=$root.RenewToken=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.cname=\"\",A.prototype.token=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(10).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(18).string(A.userId),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(24).int64(A.lts),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(32).int64(A.elapse),null!=A.cname&&Object.hasOwnProperty.call(A,\"cname\")&&e.uint32(50).string(A.cname),null!=A.token&&Object.hasOwnProperty.call(A,\"token\")&&e.uint32(58).string(A.token),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/RenewToken\"},A})(),RenewTokenRes=$root.RenewTokenRes=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.sid=\"\",A.prototype.userId=\"\",A.prototype.elapse=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.cname=\"\",A.prototype.token=\"\",A.prototype.apErrCode=0,A.prototype.regErrCode=0,A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(26).string(A.sid),null!=A.userId&&Object.hasOwnProperty.call(A,\"userId\")&&e.uint32(34).string(A.userId),null!=A.elapse&&Object.hasOwnProperty.call(A,\"elapse\")&&e.uint32(40).int64(A.elapse),null!=A.cname&&Object.hasOwnProperty.call(A,\"cname\")&&e.uint32(50).string(A.cname),null!=A.token&&Object.hasOwnProperty.call(A,\"token\")&&e.uint32(58).string(A.token),null!=A.apErrCode&&Object.hasOwnProperty.call(A,\"apErrCode\")&&e.uint32(64).int32(A.apErrCode),null!=A.regErrCode&&Object.hasOwnProperty.call(A,\"regErrCode\")&&e.uint32(72).int32(A.regErrCode),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/RenewTokenRes\"},A})(),SyncLockAcquireEvent=$root.SyncLockAcquireEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ip=\"\",A.prototype.userid=\"\",A.prototype.sid=\"\",A.prototype.index=null,A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.lockrev=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.uuid=\"\",A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.code=0,A.prototype.leaseid=\"\",A.prototype.eventtype=\"\",A.prototype.sdktype=0,A.prototype.requestts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ttl=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.usersid=\"\",A.prototype.sdkip=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.ip&&Object.hasOwnProperty.call(A,\"ip\")&&e.uint32(26).string(A.ip),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(34).string(A.userid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(50).fork()).ldelim(),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(58).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(66).string(A.lock),null!=A.lockrev&&Object.hasOwnProperty.call(A,\"lockrev\")&&e.uint32(72).int64(A.lockrev),null!=A.uuid&&Object.hasOwnProperty.call(A,\"uuid\")&&e.uint32(82).string(A.uuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(88).int64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(96).int32(A.code),null!=A.leaseid&&Object.hasOwnProperty.call(A,\"leaseid\")&&e.uint32(106).string(A.leaseid),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(114).string(A.eventtype),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(120).int32(A.sdktype),null!=A.requestts&&Object.hasOwnProperty.call(A,\"requestts\")&&e.uint32(128).int64(A.requestts),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(136).int64(A.replyts),null!=A.ttl&&Object.hasOwnProperty.call(A,\"ttl\")&&e.uint32(144).int64(A.ttl),null!=A.usersid&&Object.hasOwnProperty.call(A,\"usersid\")&&e.uint32(154).string(A.usersid),null!=A.sdkip&&Object.hasOwnProperty.call(A,\"sdkip\")&&e.uint32(162).string(A.sdkip),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncLockAcquireEvent\"},A})(),SyncLockReleaseEvent=$root.SyncLockReleaseEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ip=\"\",A.prototype.userid=\"\",A.prototype.sid=\"\",A.prototype.index=null,A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.uuid=\"\",A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.code=0,A.prototype.leaseid=\"\",A.prototype.eventtype=\"\",A.prototype.sdktype=0,A.prototype.requestts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.usersid=\"\",A.prototype.sdkip=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.ip&&Object.hasOwnProperty.call(A,\"ip\")&&e.uint32(26).string(A.ip),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(34).string(A.userid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(50).fork()).ldelim(),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(58).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(66).string(A.lock),null!=A.uuid&&Object.hasOwnProperty.call(A,\"uuid\")&&e.uint32(74).string(A.uuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(80).int64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(88).int32(A.code),null!=A.leaseid&&Object.hasOwnProperty.call(A,\"leaseid\")&&e.uint32(98).string(A.leaseid),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(106).string(A.eventtype),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(112).int32(A.sdktype),null!=A.requestts&&Object.hasOwnProperty.call(A,\"requestts\")&&e.uint32(120).int64(A.requestts),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(128).int64(A.replyts),null!=A.usersid&&Object.hasOwnProperty.call(A,\"usersid\")&&e.uint32(138).string(A.usersid),null!=A.sdkip&&Object.hasOwnProperty.call(A,\"sdkip\")&&e.uint32(146).string(A.sdkip),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncLockReleaseEvent\"},A})(),SyncLockUpdateEvent=$root.SyncLockUpdateEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ip=\"\",A.prototype.userid=\"\",A.prototype.sid=\"\",A.prototype.index=null,A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.code=0,A.prototype.eventtype=\"\",A.prototype.sdktype=0,A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.usersid=\"\",A.prototype.sdkip=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.ip&&Object.hasOwnProperty.call(A,\"ip\")&&e.uint32(26).string(A.ip),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(34).string(A.userid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(50).fork()).ldelim(),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(58).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(66).string(A.lock),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(72).int64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(80).int32(A.code),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(90).string(A.eventtype),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(96).int32(A.sdktype),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(104).int64(A.replyts),null!=A.usersid&&Object.hasOwnProperty.call(A,\"usersid\")&&e.uint32(114).string(A.usersid),null!=A.sdkip&&Object.hasOwnProperty.call(A,\"sdkip\")&&e.uint32(122).string(A.sdkip),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncLockUpdateEvent\"},A})(),SyncLockDisableEvent=$root.SyncLockDisableEvent=(()=>{function A(A){if(A)for(let e=Object.keys(A),t=0;t<e.length;++t)null!=A[e[t]]&&(this[e[t]]=A[e[t]])}return A.prototype.lts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.vid=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.ip=\"\",A.prototype.userid=\"\",A.prototype.sid=\"\",A.prototype.index=null,A.prototype.target=\"\",A.prototype.lock=\"\",A.prototype.leaseid=\"\",A.prototype.uuid=\"\",A.prototype.flags=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.code=0,A.prototype.eventtype=\"\",A.prototype.sdktype=0,A.prototype.requestts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.replyts=$util.Long?$util.Long.fromBits(0,0,!1):0,A.prototype.usersid=\"\",A.prototype.sdkip=\"\",A.encode=function(A,e){return e||(e=$Writer.create()),null!=A.lts&&Object.hasOwnProperty.call(A,\"lts\")&&e.uint32(8).int64(A.lts),null!=A.vid&&Object.hasOwnProperty.call(A,\"vid\")&&e.uint32(16).int64(A.vid),null!=A.ip&&Object.hasOwnProperty.call(A,\"ip\")&&e.uint32(26).string(A.ip),null!=A.userid&&Object.hasOwnProperty.call(A,\"userid\")&&e.uint32(34).string(A.userid),null!=A.sid&&Object.hasOwnProperty.call(A,\"sid\")&&e.uint32(42).string(A.sid),null!=A.index&&Object.hasOwnProperty.call(A,\"index\")&&$root.CommonIndex.encode(A.index,e.uint32(50).fork()).ldelim(),null!=A.target&&Object.hasOwnProperty.call(A,\"target\")&&e.uint32(58).string(A.target),null!=A.lock&&Object.hasOwnProperty.call(A,\"lock\")&&e.uint32(66).string(A.lock),null!=A.leaseid&&Object.hasOwnProperty.call(A,\"leaseid\")&&e.uint32(74).string(A.leaseid),null!=A.uuid&&Object.hasOwnProperty.call(A,\"uuid\")&&e.uint32(82).string(A.uuid),null!=A.flags&&Object.hasOwnProperty.call(A,\"flags\")&&e.uint32(88).int64(A.flags),null!=A.code&&Object.hasOwnProperty.call(A,\"code\")&&e.uint32(96).int32(A.code),null!=A.eventtype&&Object.hasOwnProperty.call(A,\"eventtype\")&&e.uint32(106).string(A.eventtype),null!=A.sdktype&&Object.hasOwnProperty.call(A,\"sdktype\")&&e.uint32(112).int32(A.sdktype),null!=A.requestts&&Object.hasOwnProperty.call(A,\"requestts\")&&e.uint32(120).int64(A.requestts),null!=A.replyts&&Object.hasOwnProperty.call(A,\"replyts\")&&e.uint32(128).int64(A.replyts),null!=A.usersid&&Object.hasOwnProperty.call(A,\"usersid\")&&e.uint32(138).string(A.usersid),null!=A.sdkip&&Object.hasOwnProperty.call(A,\"sdkip\")&&e.uint32(146).string(A.sdkip),e},A.getTypeUrl=function(A){return void 0===A&&(A=\"type.googleapis.com\"),A+\"/SyncLockDisableEvent\"},A})();var ProtoPackets=Object.freeze({__proto__:null,ApEvent:ApEvent,ApRequest:ApRequest,ChannelPresenceSnapshotEvent:ChannelPresenceSnapshotEvent,ChnJoin:ChnJoin,ChnJoinRes:ChnJoinRes,ChnLeave:ChnLeave,CommonIndex:CommonIndex,ConnectionStateChange:ConnectionStateChange,KickedOff:KickedOff,Link:Link,LinkLoginRequest:LinkLoginRequest,LinkStateChange:LinkStateChange,LoginResult:LoginResult,Logout:Logout,ProtoRaws:ProtoRaws,RenewToken:RenewToken,RenewTokenRes:RenewTokenRes,RtmSdkMessageCount:RtmSdkMessageCount,Session:Session,SyncLockAcquireEvent:SyncLockAcquireEvent,SyncLockDisableEvent:SyncLockDisableEvent,SyncLockReleaseEvent:SyncLockReleaseEvent,SyncLockUpdateEvent:SyncLockUpdateEvent,SyncOperateEvent:SyncOperateEvent,SyncSubscribeEvent:SyncSubscribeEvent,SyncUpdateEvent:SyncUpdateEvent,default:$root});const ReportId={Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,RtmSdkMessageCount:510,SyncOperateEvent:9654,SyncSubscribeEvent:9651,LoginResult:10071,ChannelPresenceSnapshotEvent:10070,LinkStateChange:10201,RenewTokenRes:10204,SyncLockAcquireEvent:9740,SyncLockReleaseEvent:9741,SyncLockUpdateEvent:9742,SyncLockDisableEvent:9764},EVENT_REPORT_DOMAIN=\"webcollector-rtm.agora.io\",EVENT_REPORT_BACKUP_DOMAIN=\"rtm.statscollector.sd-rtn.com\",maxReportCount=20,reportInterval=1e4,forceReportInterval=6e4,eventsCacheKeyPrefix=\"events-\",storageEvents=new Map;function initStorageCache(A){storageEvents.has(A)||storageEvents.set(A,[])}const staging_report_domain=\"183-131-160-209.edge.staging-1-aws.myagoralab.com\",decodeHexAsBytes=A=>{var e;const t=null===(e=A.match(/.{1,2}/g))||void 0===e?void 0:e.map((A=>parseInt(A,16)));return null!=t?t:[]},genAid=A=>{const e=decodeHexAsBytes(A),t=[e[0],e[4],e[8],e[12]],o=t.reduce(((A,e,o)=>A|e<<8*(t.length-1-o)),0)>>>0;return o};async function batchSendReport(A,e,t){var o;const g=t&&getPrivateSettingsPortAndDomains(t),i=null==g?void 0:g.port,r=null==g?void 0:g.hostname,n=null!==(o=null==r?void 0:r.length)&&void 0!==o?o:0,I=r&&r[0],s=r&&r[n-1],C=async function(o){var g;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r>3)return;const n=e&&!t?\"https://\".concat(null!==(g=null==areaConfig?void 0:areaConfig.PROXY_NGINX[0])&&void 0!==g?g:\"webrtc-cloud-proxy.sd-rtn.com\",\"/rs/?h=\").concat(o,\"&p=\").concat(null!=i?i:443,\"&d=events/proto-raws\"):\"https://\".concat(getParameter(\"USE_STAGING_REPORT_DOMAIN\")?staging_report_domain:o).concat(i?\":\".concat(i):\"\",\"/events/proto-raws\");await postWithAbortSignal(n,{body:A,timeout:2e4,headers:{\"Content-Type\":\"application/octet-stream\"}}).catch((A=>C(o,r+1)))};try{await C((null==areaConfig?void 0:areaConfig.EVENT_REPORT_DOMAIN[0])||isValidEnvString(null)&&null||(null!=I?I:EVENT_REPORT_DOMAIN))}catch(A){await C(areaConfig&&sample$1((null==areaConfig?void 0:areaConfig.EVENT_REPORT_DOMAIN.length)>1?null==areaConfig?void 0:areaConfig.EVENT_REPORT_DOMAIN.slice(1):null==areaConfig?void 0:areaConfig.EVENT_REPORT_DOMAIN)||(null!=s?s:EVENT_REPORT_BACKUP_DOMAIN))}}function triggerReport(A,e,t,o,g){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!1===navigator.onLine||!g)return 0;const r=\"\".concat(eventsCacheKeyPrefix).concat(A);initStorageCache(r);const n=storageEvents.get(r),I=Date.now();if(0===n.length)return I;if(n.length<maxReportCount&&!i)return I;for(;n.length>0;){const g=n.length>maxReportCount?maxReportCount:n.length,i=n.splice(0,g);storageEvents.set(r,n);const I=Math.ceil(Date.now()/1e3);batchSendReport(ProtoRaws.encode(Object.assign({vid:Long$2.fromNumber(Number(A)),sendTs:Long$2.fromNumber(I),payloads:i},0===Number(A)?{aid:Long$2.fromNumber(genAid(e))}:{})).finish(),t,o)}return I}function initEventReportTimer(A,e,t,o,g){let i=0;return setInterval((()=>{const r=Date.now()-i>forceReportInterval,n=triggerReport(A,e,t,o,g,r);n&&(i=n)}),reportInterval)}function clearEventReportTimer(A){clearInterval(A)}async function addReportEvents(A,e,t,o,g,i,r){if(!i)return;const n=ProtoPackets[e].encode(t).finish(),I=ReportId[e],s={id:Long$2.fromNumber(I),msg:n},C=\"\".concat(eventsCacheKeyPrefix).concat(r);initStorageCache(C);const E=storageEvents.get(C);E.push(s),storageEvents.set(C,E),E.length>=maxReportCount&&triggerReport(r,A,o,g,!0)}async function sendReport(A,e,t,o,g,i){if(!i)return;arguments.length>6&&void 0!==arguments[6]&&arguments[6]&&await delay$1(1e4);const r=g&&getPrivateSettingsPortAndDomains(g),n=null==r?void 0:r.hostname;addReportEvents(A,e,t,o,g,i,\"0\"),triggerReport(\"0\",A,o,n,i,!0)}function getElapse(A){return void 0===A?Long$2.fromNumber(0):Long$2.fromNumber(Date.now()-A)}function rateLimit(A){let e=1,t=asapScheduler;1==(arguments.length<=1?0:arguments.length-1)?\"number\"==typeof(arguments.length<=1?void 0:arguments[1])?e=arguments.length<=1?void 0:arguments[1]:t=arguments.length<=1?void 0:arguments[1]:2==(arguments.length<=1?0:arguments.length-1)&&(e=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2]);const o=e||1;return e=>e.pipe(scan(((e,g)=>{const i=t.now(),r=i-A;if((e=e.filter((A=>A.until>r))).length>=o){const t=e[0],r=e[e.length-1],n=t.until+A*Math.floor(e.length/o);e.push({delay:r.until<i?n-i:n-r.until,until:n,value:g})}else e.push({delay:0,until:i,value:g});return e}),[]),map$1((A=>A[A.length-1])),concatMap((A=>{const e=of(A.value);return A.delay?e.pipe(delay(A.delay,t)):e})))}const SocketError=genError(),deprecatedURI=[URI$1.PingUri,URI$1.PongUri,URI$1.Ping2Uri,URI$1.UserJoinUri,URI$1.UserRespUri,URI$1.UserQuitUri,URI$1.GroupEnterNoticeUri,URI$1.GroupLeaveNoticeUri,URI$1.GroupEventNoticeUri,URI$1.GroupCountNoticeUri,URI$1.UserStatusListUri,URI$1.UserStatusResultUri,URI$1.GroupStatusListUri,URI$1.GroupStatusResultUri,URI$1.GroupAllUsersListUri,URI$1.GroupAllUsersResultUri,URI$1.UserJoinNoticeUri,URI$1.UserQuitNoticeUri,URI$1.UserWaitNoticeUri,URI$1.UserAttributeGetUri,URI$1.UserAttributeRetUri,URI$1.UserAttributeSetUri,URI$1.UserAttributeModUri,URI$1.UserAttributeDelUri,URI$1.UserAttributeRspUri,URI$1.UserAttributeErrUri,URI$1.UserAttributeKeysGetUri,URI$1.UserAttributeKeysRetUri,URI$1.GroupAttributeGetUri,URI$1.GroupAttributeRetUri,URI$1.GroupAttributeSetUri,URI$1.GroupAttributeModUri,URI$1.GroupAttributeDelUri,URI$1.GroupAttributeAltUri,URI$1.GroupAttributeRspUri,URI$1.GroupAttributeErrUri,URI$1.GroupAttributeKeysGetUri,URI$1.GroupAttributeKeysRetUri,URI$1.SubscribeUserStatusUri,URI$1.UnsubscribeUserStatusUri,URI$1.SubscribeResponseUri];class Socket extends EventBase{get address(){return\"\".concat(this.ip,\":\").concat(this.EDGE_ENV_PORT[this.env])}constructor(A,e,t,o,g,i){var r,n,I;if(super(g,uniquePrefixedId(\"Socket-\",g.loggerId)),_defineProperty$1(this,\"isActiveClose\",!1),_defineProperty$1(this,\"loggedIn\",!1),_defineProperty$1(this,\"useNewDomain\",void 0),_defineProperty$1(this,\"receivedPacket\",new Subject),_defineProperty$1(this,\"receivedSyncPacket\",new Subject),_defineProperty$1(this,\"open$\",void 0),_defineProperty$1(this,\"input$\",new Subject),_defineProperty$1(this,\"userJoin$\",new Subject),_defineProperty$1(this,\"EDGE_ENV_PORT\",null!==(r=getParameter(\"EDGE_ENV_PORT\"))&&void 0!==r?r:EDGE_ENV_PORT),_defineProperty$1(this,\"attemptsSinceLastError\",0),_defineProperty$1(this,\"message$\",new Subject),_defineProperty$1(this,\"socket$\",void 0),_defineProperty$1(this,\"toClose\",new Subject),_defineProperty$1(this,\"toReconnect\",new Subject),_defineProperty$1(this,\"sendLogger\",void 0),_defineProperty$1(this,\"receiveLogger\",void 0),_defineProperty$1(this,\"ip\",void 0),_defineProperty$1(this,\"env\",void 0),_defineProperty$1(this,\"ticket\",void 0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"reConnect\",!1),_defineProperty$1(this,\"proxyIdx\",0),_defineProperty$1(this,\"getDomain\",(()=>{var A;return getEdgeDomain(this.ip,this.useNewDomain,null===(A=this.context.rtmConfig.privateConfig)||void 0===A?void 0:A.originDomains)})),_defineProperty$1(this,\"socketReconnector\",(A=>{const e=A=>(this.attemptsSinceLastError+=1,this.warn(\"The %s of Env %d reconnecting %s\",this.name,this.env,A.message),this.reConnect=!0,timer(SOCKET_RETRY_INTERVAL));return A.pipe(catchError((A=>this.isActiveClose?EMPTY:(this.warn(\"Env_\".concat(this.env,\"(\").concat(this.name,\"): socket connection closed, errorInfo: \").concat(A)),this.loggedIn=!1,this.attemptsSinceLastError>=2?(this.log(\"ENV_\".concat(this.env,\"(\").concat(this.name,\"): will emit connectionFailure\")),this.emit(\"connectionFailure\"),this.close(),throwError(A)):this.isActiveClose?EMPTY:(this.log(\"ENV_\".concat(this.env,\"(\").concat(this.name,\"): will emit reconnect\")),this.emit(\"reconnect\"),this.useNewDomain=!this.useNewDomain,throwError(A))))),retryWhen((A=>A.pipe(switchMap(e)))),tap((()=>{this.reConnect&&this.env===this.context.connSyncEnv&&(this.reConnect=!1)})))})),this.ip=A,this.env=e,this.ticket=t,this.context=o,this.useNewDomain=null!=i?i:Math.random()>=.5,this.sendLogger=this.genLogger(\"RTM:MSG:SEND\"),this.receiveLogger=this.genLogger(\"RTM:MSG:RECV\"),0!==e&&1!==e)throw new SocketError({ILLEGAL_RTM_ENV:\"The env number is out of rtm env count\"});const s=this.EDGE_ENV_PORT[e];this.log(\"Opening websocket address %s for the Env %d, %s\",this.ip,this.env,this.name),addReportEvents(this.context.appId,\"LinkLoginRequest\",{sid:this.context.sid,userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.context.startTime),destServerIp:this.ip,linkId:this.env},null!==(n=this.context.config.cloudProxy||this.context.socketUseProxy)&&void 0!==n&&n,null===(I=this.context.rtmConfig.privateConfig)||void 0===I?void 0:I.eventUploadHosts,this.context.couldReportEvent,this.context.vid);const C=merge(this.input$,this.userJoin$.pipe(rateLimit(LOGIN_QPS_LIMIT)),this.message$).pipe(map$1((A=>Wrapper$1.encode(A).finish()))),E=merge(makeWebSocketObservable(\"\",{protocols:[],makeWebSocket:()=>{let A;const e=getParameter(\"REGISTRAR_USE_WS\")?\"ws\":\"wss\";if(this.log(\"registrar websocket use \".concat(e)),!this.context.config.cloudProxy&&!this.context.socketUseProxy||this.context.enablePrivate){const t=parseHost(this.getDomain(),s);A=new WebSocket(\"\".concat(e,\"://\").concat(t.domain,\":\").concat(t.port)),A instanceof WebSocket&&(A.addEventListener(\"close\",(A=>{this.log(\"ws onclose, code: %d, reason: '%s', env: %d, name: %s\",A.code,A.reason,this.env,this.name)})),A.addEventListener(\"error\",(A=>{this.log(\"ws onerror, env: %d, name: %s, error: %o\",this.env,this.name,A)})),A.addEventListener(\"open\",(A=>{this.log(\"ws open, env: %d, name: %s\",this.env,this.name)})))}else{var t;if(0===this.context.cloudProxyServers.length)throw this.logError(\"No cloud proxy server to connect\"),new RtmUnavailableError(\"\");const o=null,g=parseHost(getEdgeDomain((isValidEnvString(o)?JSON.parse(o.replace(/-/g,\".\")):this.context.cloudProxyServers)[this.genProxyIdx()],!1,null===(t=this.context.rtmConfig.privateConfig)||void 0===t?void 0:t.originDomains));let i=\"\".concat(e,\"://\").concat(g.domain,\"/\");i=appendQueryParameter(i,\"sid\",this.context.sid),i=appendQueryParameter(i,\"remote_port\",s.toString()),i=appendQueryParameter(i,\"remote_ip\",this.ip),i=appendQueryParameter(i,\"token\",this.context.key),A=new WebSocket(\"\".concat(i,\":\").concat(g.port))}return A.binaryType=\"arraybuffer\",A}}),this.toReconnect);this.socket$=race(E,NEVER.pipe(timeout(7e3),catchError((A=>(isTimeout(A)?this.warn(\"ENV_\".concat(this.env,\"(\").concat(this.name,\"): socket open timed out\")):this.warn(\"ENV_\".concat(this.env,\"(\").concat(this.name,\"): error occurs of opening socket: \").concat(A)),throwError(A)))))).pipe(map$1((A=>{if(A instanceof Error)throw this.warn(\"Env_%d: Force reconnect the socket\",this.env),A;return A(C).pipe(map$1((A=>Wrapper$1.decode(new Uint8Array(A)))))})),this.socketReconnector),this.open$=this.socket$.pipe(tap((A=>{this.log(\"ENV_\".concat(this.env,\": Websocket opened, addr: \").concat(this.address),this.name),A.subscribe((A=>{let{data:e,uri:t}=A;if(t===URI$1.SyncPacketUri){const A=getSyncPacketUri(e);return(102!==A&&104!==A||logSyncPingPong)&&this.receiveLogger(\"Env_%d: %s received sync packet uri: %d\",this.env,\"SyncPacket\",A),void this.receivedSyncPacket.next(e)}const o=uriToPacketName(t),g=Packets[o].decode(e);if(deprecatedURI.includes(t))return void this.receiveLogger(\"Env_%d: %s, deprecated.\",this.env,o);const i=mergeWith$1({},omit$1(g,\"toJSON\"),((A,e)=>e instanceof Long$2?longToStringIfNeeded(e):e));let r=!1;if(g instanceof GroupEnterNotice||g instanceof GroupLeaveNotice){const{instance:A}=g;A.lessThanOrEqual(UINT32_MAX)&&(r=!0)}if(g instanceof Message||g instanceof Ack){const{instance:A,dialogue:e,sequence:t}=g;(e.lessThanOrEqual(UINT32_MAX)||A.lessThanOrEqual(UINT32_MAX)||t.lessThan(1))&&(r=!0)}r?this.warn(\"Env_%d: Illegal %s, abandoned %o\",this.env,o,i):((getParameter(\"LOG_PING_PONG\")||logPingPong||\"Pong3\"!==o)&&this.receiveLogger(\"Env_%d: %s %o\",this.env,o,i),this.receivedPacket.next([o,g]))}),(()=>{}))})),mapTo(void 0),takeUntil(this.toClose),share())}sendPacket(A,e){if(getParameter(\"LOG_PING_PONG\")||logPingPong||\"Ping3\"!==A){const t=mapValues$1(e,(A=>A instanceof Long$2?longToStringIfNeeded(A):A));this.sendLogger(\"Env_%d: %s %o\",this.env,A,t)}const t=getWrappedByName(A,e);\"UserJoin2\"===A?this.userJoin$.next(t):\"Message\"===A?this.message$.next(t):this.input$.next(t)}close(){this.log(\"Closing websocket, name: %s, env: %d\",this.name,this.env),this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}fromReceived(A){return this.receivedPacket.pipe(filter((e=>{let[t]=e;return t===A})),map$1((A=>{let[,e]=A;return e})))}sendSyncPacket(A){const e=getSyncWrapped(A),t=getSyncPacketUri(A);(102!==t&&104!==t||logSyncPingPong)&&this.sendLogger(\"Env_%d: %s send  sync packet uri: %d\",this.env,\"SyncPacket\",t),this.input$.next(e)}forceReconnect(){this.toReconnect.next(new SocketError({FORCE_RECONNECTING:\"Connection seems broken, try force reconnecting\"}))}genProxyIdx(){const A=this.proxyIdx;return this.proxyIdx=(A+1)%this.context.cloudProxyServers.length,A}}const getAreaCodeByApUrl=A=>{const e=getKeys(AREA_DOMAIN_MAP),t=getDomain(A);for(let A=0;A<e.length;A++){const o=e[A],g=AREA_DOMAIN_MAP[o];if(null!=g&&g.AP_DOMAINS.includes(t)||null!=g&&g.AP_BACKUP_DOMAINS.includes(t)||null!=g&&g.PROXY_AP.includes(t))return[g.CODE]}return[AreaCodeMap.CHINA,AreaCodeMap.GLOBAL]},ACCESS_POINT_CODE=101,UNI_LBS_CODE=201,ApResErrorMessage={INVALID_APP_ID:\"Illegal App ID\",APP_ID_NO_ACTIVATED:\"The vendor is not activated\",DYNAMIC_KEY_NOT_ENABLED:\"The vendor did not enable the dynamic key, but uses the dynamic key\",NO_AUTHORIZED:\"Signature verification failed\",DYNAMIC_ENABLED_BUT_STATIC_KEY:\"The vendor enabled the dynamic key, but uses the static key\",INVALID_USER_ID:\"The user ID to login does not match the token\",INVALID_TOKEN_UID:\"UID in the security key(token) is not valid\",TOKEN_TIMEOUT:\"Dynamic key expired\",TOKEN_EXPIRED:\"The token has expired\",CANNOT_MEET_AREA_DEMAND:\"Cannot allocate to meet the requirements of the given area limit\",INIT_APPID_MISMATCH:\"The appid in the init request does not match the appid in the token\",FORBIDDEN_REGION:\"Forbidden to access the request in this area\"},ApResErrorCode={5:\"INVALID_APP_ID\",7:\"INVALID_USER_ID\",9:\"NO_AUTHORIZED\",10:\"TOKEN_TIMEOUT\",11:\"APP_ID_NO_ACTIVATED\",12:\"INVALID_TOKEN_UID\",13:\"TOKEN_EXPIRED\",14:\"DYNAMIC_KEY_NOT_ENABLED\",15:\"DYNAMIC_ENABLED_BUT_STATIC_KEY\",18:\"FORBIDDEN_REGION\",19:\"CANNOT_MEET_AREA_DEMAND\",23:\"INIT_APPID_MISMATCH\"},UniLbsNonRetryableErrorCodes=[100,101,102],AP_NO_REGEX=/web-(\\d)/;function handleUniLbsError(A,e){let t=A;if(A.toString().length>4){const e=A.toString().padStart(8,\"0\"),o=parseInt(e.slice(0,4),10),g=parseInt(e.slice(4,8),10);if(o===UNI_LBS_CODE)t=g;else if(o===ACCESS_POINT_CODE&&!UniLbsNonRetryableErrorCodes.includes(g)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_NO_SERVER_RESOURCES);return throwError(new RtmUnavailableError(this.operation,[e],A))}}const o=t.toString();if(!Object.keys(ApResErrorCode).includes(o)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_REJECTED),o=new RtmUnavailableError(this.operation,[e+\"apCode is \".concat(t,\", unexpected code.\")],{code:A,serverCode:t});return o.serverCode=t,throwError(o)}const g=ApResErrorCode[o];switch(this.warn(\"%s: %s's error type is %s\",this.name,e,g),g){case\"INVALID_APP_ID\":case\"APP_ID_NO_ACTIVATED\":case\"DYNAMIC_KEY_NOT_ENABLED\":{const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_APP_ID),t=new RtmUnauthenticatedError(this.operation,[e+\" detail: \".concat(g,\", \").concat(ApResErrorMessage[g])],A);return t.serverCode=A,throwError(t)}case\"NO_AUTHORIZED\":case\"DYNAMIC_ENABLED_BUT_STATIC_KEY\":case\"INVALID_USER_ID\":case\"INVALID_TOKEN_UID\":{const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_TOKEN),t=new RtmUnauthenticatedError(this.operation,[e+\" detail: \".concat(g,\", \").concat(ApResErrorMessage[g])],A);return t.serverCode=A,throwError(t)}case\"TOKEN_TIMEOUT\":case\"TOKEN_EXPIRED\":{const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED),t=new RtmUnauthenticatedError(this.operation,[e+\" detail: \".concat(g,\", \").concat(ApResErrorMessage[g])],A);return t.serverCode=A,throwError(t)}case\"CANNOT_MEET_AREA_DEMAND\":{const A=getAreaCodeByApUrl(e);A.forEach((A=>this.failedAreas.add(A)));const t=void 0===areaConfig?2:areaConfig.CODES.size,{code:o,reason:i}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_NO_SERVER_RESOURCES);if(this.failedAreas.size===t){const A=new RtmInvalidArgumentError(this.operation,[i+\" detail: \".concat(g,\", \").concat(ApResErrorMessage[g])],o);return A.serverCode=o,throwError(A)}return throwError(new RtmUnavailableError(this.operation,[i+\"\".concat(this.name,\" \").concat(A.join(\", \"),\" cannot meet requirement\")],o))}case\"INIT_APPID_MISMATCH\":{const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INCONSISTENT_APPID),t=new RtmUnavailableError(this.operation,[e],A);return t.serverCode=A,throwError(t)}default:{const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_REJECTED),t=new RtmUnavailableError(this.operation,[e+\" detail: \".concat(g,\", \").concat(ApResErrorMessage[g])],A);return t.serverCode=A,throwError(t)}}}const AP_DETAIL_KEY_BUSINESS_TYPE=26;class AccessPoint extends EventBase{constructor(A,e){var t,o;let g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e,\"AccessPoint\"),o=this,_defineProperty$1(this,\"operation\",OperationName.login),_defineProperty$1(this,\"handleUniLbsError\",handleUniLbsError.bind(this)),_defineProperty$1(this,\"getApEdgeInfo$\",void 0),_defineProperty$1(this,\"getApEdgeInfoEndFirst$\",void 0),_defineProperty$1(this,\"apFinish$\",new Subject),_defineProperty$1(this,\"retryCount\",0),_defineProperty$1(this,\"failedAreas\",new Set),_defineProperty$1(this,\"usedUrl\",[]),_defineProperty$1(this,\"newDomainUsed\",!1),_defineProperty$1(this,\"backupNewDomainUsed\",!1),_defineProperty$1(this,\"privateAPs\",void 0),_defineProperty$1(this,\"restDomains\",[]),_defineProperty$1(this,\"AP_DOMAINS_IPV6\",[]),_defineProperty$1(this,\"AP_DOMAINS_NEW\",[]),_defineProperty$1(this,\"AP_DOMAINS_IO\",[]),_defineProperty$1(this,\"AP_BACKUP_DOMAINS_NEW\",[]),_defineProperty$1(this,\"AP_BACKUP_DOMAINS_IO\",[]),_defineProperty$1(this,\"genUrl\",(A=>{const e=null!=A?A:this.context.useAp4Ipv6Reg?this.AP_DOMAINS_IPV6:this.AP_DOMAINS_NEW,t=null!=A?A:this.context.useAp4Ipv6Reg?this.AP_DOMAINS_IPV6:this.AP_DOMAINS_IO;return void 0===areaConfig?zip(of(...shuffle$1([...e,...t].map(getApUrl)))).pipe(concatMap((A=>of(...A)))):of(...areaConfig.AP_DOMAINS.slice(0,3).map(getApUrl))})),_defineProperty$1(this,\"genBackupUrl\",(A=>{const e=null!=A?A:this.context.useAp4Ipv6Reg?this.AP_DOMAINS_IPV6:this.AP_BACKUP_DOMAINS_NEW,t=null!=A?A:this.context.useAp4Ipv6Reg?this.AP_DOMAINS_IPV6:this.AP_BACKUP_DOMAINS_IO;return void 0===areaConfig?zip(of(...shuffle$1([...e,...t].map(getApUrl)))).pipe(concatMap((A=>of(...A)))):of(...areaConfig.AP_BACKUP_DOMAINS.slice(0,3).map(getApUrl))})),_defineProperty$1(this,\"getApUrl$\",((A,e)=>{var t,o;return this.genUrl(e).pipe(filter((A=>(!this.newDomainUsed||!A.includes(\"sd-rtn.com\"))&&(A.includes(\"sd-rtn.com\")&&(this.newDomainUsed=!0),!some$1(this.usedUrl,(e=>{var t;return e===(null===(t=A.match(AP_NO_REGEX))||void 0===t?void 0:t[1])}))))),tap((A=>{if(void 0===areaConfig){var e;const t=null===(e=A.match(AP_NO_REGEX))||void 0===e?void 0:e[1];\"string\"==typeof t&&this.usedUrl.push(t)}})),take(A?Math.max(getParameter(\"RECONNECTING_AP_NUM\"),null!==(t=null==areaConfig?void 0:areaConfig.CODES.size)&&void 0!==t?t:0):null!==(o=null==areaConfig?void 0:areaConfig.CODES.size)&&void 0!==o?o:AP_CONCURRENT_REQ_NUM),throwIfEmpty((()=>AccessPoint.runOutOfUrlSymbol)),catchError(((A,e)=>(this.newDomainUsed=!1,A===AccessPoint.runOutOfUrlSymbol?(this.usedUrl=[],e):throwError(A)))))})),_defineProperty$1(this,\"getBackupApUrl$\",((A,e)=>{var t,o;return this.genBackupUrl(e).pipe(filter((A=>(!this.backupNewDomainUsed||!A.includes(\"sd-rtn.com\"))&&(A.includes(\"sd-rtn.com\")&&(this.backupNewDomainUsed=!0),!some$1(this.usedUrl,(e=>{var t;return e===(null===(t=A.match(AP_NO_REGEX))||void 0===t?void 0:t[1])}))))),tap((A=>{if(void 0===areaConfig){var e;const t=null===(e=A.match(AP_NO_REGEX))||void 0===e?void 0:e[1];\"string\"==typeof t&&this.usedUrl.push(t)}})),take(A?Math.max(getParameter(\"RECONNECTING_AP_NUM\"),null!==(t=null==areaConfig?void 0:areaConfig.CODES.size)&&void 0!==t?t:0):null!==(o=null==areaConfig?void 0:areaConfig.CODES.size)&&void 0!==o?o:AP_CONCURRENT_REQ_NUM),throwIfEmpty((()=>AccessPoint.runOutOfUrlSymbol)),catchError(((A,e)=>(this.backupNewDomainUsed=!1,A===AccessPoint.runOutOfUrlSymbol?(this.usedUrl=[],e):throwError(A)))))})),_defineProperty$1(this,\"getProxyApUrl$\",((A,e)=>{var t,o;return of(...(null!=e?e:(null==areaConfig?void 0:areaConfig.PROXY_AP.slice(0,3))||[\"ap-proxy-1.agora.io\",\"ap-proxy-2.agora.io\"]).map(getApUrl)).pipe(take(A?Math.max(getParameter(\"RECONNECTING_AP_NUM\"),null!==(t=null==areaConfig?void 0:areaConfig.CODES.size)&&void 0!==t?t:0):null!==(o=null==areaConfig?void 0:areaConfig.CODES.size)&&void 0!==o?o:AP_CONCURRENT_REQ_NUM))})),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"reportIntervalId\",void 0),_defineProperty$1(this,\"fetchCloudProxy\",((A,e)=>{const t=uniquePrefixedId(\"AP-\",this.loggerId);this.log(\"The AccessPoint requests %s(%s)\",A,t);const o=new AbortController;return this.apFinish$.subscribe((()=>o.abort())),defer((async()=>{const g=getRandomInt(0,Number.MAX_SAFE_INTEGER);return this.log(\"%s request opid: %d\",t,g),this.context.sendReport(\"ApRequest\",{sid:this.context.sid,userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.context.startTime),apAddr:A,opId:Long$2.fromNumber(g),envId:0,flag:128,version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),rtmapflag:Long$2.fromNumber(0)}),postWithAbortSignal(A,{headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"90\",\"Content-Type\":\"application/json\"},body:{sid:this.context.sid,opid:g,appid:this.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=e?e:this.context.key,cname:this.context.uid,uid:0,detail:_objectSpread2({},void 0===areaConfig?{11:[AreaCodeMap.CHINA,AreaCodeMap.GLOBAL].join(\",\"),12:\"1\",[AP_DETAIL_KEY_BUSINESS_TYPE]:\"RTM2\"}:{11:Array.from(areaConfig.CODES).map((A=>A===AreaCodeMap.OVERSEA?\"\".concat(AreaCodeMap.ASIA,\",\").concat(AreaCodeMap.EUROPE,\",\").concat(AreaCodeMap.AFRICA,\",\").concat(AreaCodeMap.NORTH_AMERICA,\",\").concat(AreaCodeMap.SOUTH_AMERICA,\",\").concat(AreaCodeMap.OCEANIA):A)).join(\",\"),12:\"1\",[AP_DETAIL_KEY_BUSINESS_TYPE]:\"RTM2\"})}}]},signal:o.signal})})).pipe(catchError((A=>(\"AbortError\"!==A.name&&this.logError(\"The ProxyAP request reg server failure, %s\",A),EMPTY))),mergeMap((async e=>{let{responseText:o}=e;const g=JSON.parse(o);this.log(\"The %s response is %o\",t,g);const{response_body:i}=g;if(void 0===i||0===i.length||i.some((A=>{var e;return void 0===(null===(e=A.buffer)||void 0===e?void 0:e.code)||23!==A.uri}))){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_REJECTED);throwError(new RtmUnavailableError(this.operation,[e+\"cloud proxy response_body not valid\"],A))}const r=i.filter((A=>0!==A.buffer.code));if(0!==r.length){const e=r.find((A=>128===A.buffer.flag));return void 0!==e?this.handleUniLbsError(e.buffer.code,A):(this.logError(\"cloud proxy error response\"),this.handleUniLbsError(r[0].buffer.code,A))}let n=[];for(let A=0;A<i.length;A++){var I,s;const e=i[A];var C,E,a;if(262144===(null==e||null===(I=e.buffer)||void 0===I?void 0:I.flag))null===(C=e.buffer)||void 0===C||null===(C=C.edges_services)||void 0===C||null===(E=(a=C).forEach)||void 0===E||E.call(a,(A=>{let{ip:e}=A;isValidIp(e)&&-1===this.context.cloudProxyServers.indexOf(e)&&(this.log(\"got cloud proxy server: %s\",e),this.context.cloudProxyServers.push(e))}));else if(128===(null==e||null===(s=e.buffer)||void 0===s?void 0:s.flag)){var B,Q,c,l;for(let A=0,t=e.buffer.edges_services;A<t.length;A++){const o=t[A];n.some((A=>A.ip===o.ip))||n.push({ip:o.ip,ticket:e.buffer.cert})}this.context.rtmArea=null!==(B=null===(Q=e.buffer)||void 0===Q||null===(Q=Q.detail)||void 0===Q?void 0:Q[9])&&void 0!==B?B:\"\",this.context.vid=null!==(c=null===(l=e.buffer)||void 0===l||null===(l=l.detail)||void 0===l?void 0:l[8])&&void 0!==c?c:\"\",setVidParameter(this.context.appId,this.context.vid)}}const u=getParameter(\"EDGE_IP_LIST\");if(this.log(\"registrar EDGE_IP_LIST: \".concat(u,\" \")),\"string\"==typeof u){const A=JSON.parse(u);n=A.map((A=>({ip:A,ticket:n[0].ticket})))}return of(...n,queueScheduler)})),catchError((A=>isRtmError(A)?throwError(A):EMPTY)),mergeAll(),filter((A=>void 0!==A&&\"string\"==typeof A.ip&&\"string\"==typeof A.ticket&&isValidIp(A.ip))))})),_defineProperty$1(this,\"fetchAp\",((A,e)=>{const t=uniquePrefixedId(\"AP-\",this.loggerId);this.log(\"The AccessPoint requests %s(%s)\",A,t);const o=new AbortController;this.apFinish$.subscribe((()=>o.abort()));const g=getRandomInt(0,Number.MAX_SAFE_INTEGER);return defer((async()=>(this.log(\"%s request opid: %d\",t,g),this.context.sendReport(\"ApRequest\",{sid:this.context.sid,userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.context.startTime),apAddr:A,opId:Long$2.fromNumber(g),envId:0,flag:128,version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),rtmapflag:Long$2.fromNumber(0)}),postWithAbortSignal(A,{headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"69\",\"Content-Type\":\"application/json\"},body:{flag:128,opid:g,key:e||this.context.key,cname:this.context.uid,detail:_objectSpread2({},void 0===areaConfig?{11:[AreaCodeMap.CHINA,AreaCodeMap.GLOBAL].join(\",\"),12:\"1\",[AP_DETAIL_KEY_BUSINESS_TYPE]:\"RTM2\"}:{11:Array.from(areaConfig.CODES).map((A=>A===AreaCodeMap.OVERSEA?\"\".concat(AreaCodeMap.ASIA,\",\").concat(AreaCodeMap.EUROPE,\",\").concat(AreaCodeMap.AFRICA,\",\").concat(AreaCodeMap.NORTH_AMERICA,\",\").concat(AreaCodeMap.SOUTH_AMERICA,\",\").concat(AreaCodeMap.OCEANIA):A)).join(\",\"),12:\"1\",[AP_DETAIL_KEY_BUSINESS_TYPE]:\"RTM2\"}),uid:0,sid:this.context.sid},signal:o.signal})))).pipe(catchError((e=>(this.context.addReportEvents(\"ApEvent\",{sid:this.context.sid,userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.context.startTime),apAddr:A,linkServerList:[],serverErrCode:10,flag:128,envId:0,opId:Long$2.fromNumber(g),errCode:0,area:\"\",isp:\"\",version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),localWanIp:\"\",responseTime:0,apLinkType:\"tcp\",resultcount:0,validresultcount:0,newvalidresultcount:0}),\"AbortError\"!==e.name&&this.logError(\"The AP request reg server failure, %s\",e),EMPTY))),mergeMap((async e=>{var o;let{responseText:i}=e;const r=JSON.parse(i);this.log(\"The %s response is %o\",t,r);const{code:n,addresses:I,detail:s}=r;if(this.context.vid=null!==(o=s[8])&&void 0!==o?o:\"\",setVidParameter(this.context.appId,this.context.vid),this.context.couldReportEvent){var C,E;const A=initEventReportTimer(this.context.vid,this.context.appId,null!==(C=this.context.config.cloudProxy)&&void 0!==C&&C,null===(E=this.context.rtmConfig.privateConfig)||void 0===E?void 0:E.eventUploadHosts,this.context.couldReportEvent);this.reportIntervalId=A}if(this.context.addReportEvents(\"ApEvent\",{sid:this.context.sid,userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.context.startTime),apAddr:A,linkServerList:I.map((A=>A.ip)),serverErrCode:n,flag:128,envId:0,opId:Long$2.fromNumber(g),errCode:0,area:s[9],isp:s[2],version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),localWanIp:\"\",responseTime:0,apLinkType:\"tcp\",resultcount:I.length,validresultcount:I.length,newvalidresultcount:I.length}),this.info(r),0!==n)return this.handleUniLbsError(n,A);let a=I;const B=getParameter(\"EDGE_IP_LIST\");if(this.log(\"registrar EDGE_IP_LIST: \".concat(B)),null!=B&&B.length){const A=B.map((A=>A.replace(/-/g,\".\")));a=A.map((A=>({ip:A,ticket:a[0].ticket})))}return 0===a.length?throwError(new Error(\"No available edge address to connect\")):(this.context.rtmArea=null==s?void 0:s[9],of(...a,queueScheduler))})),mergeAll(),catchError((A=>isRtmError(A)?throwError(A):EMPTY)),filter((A=>void 0!==A&&\"string\"==typeof A.ip&&\"string\"==typeof A.ticket)))})),this.context=A,this.privateAPs=null===(t=this.context.rtmConfig.privateConfig)||void 0===t?void 0:t.accessPointHosts,this.resetRestDomains(),this.getApEdgeInfoEndFirst$=function(){let A=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return timer(0,A||g?getParameter(\"RECONNECTING_AP_INTERVAL\"):2e3).pipe(take(1),tap((()=>{o.retryCount+=1})),mergeMap((()=>o.context.config.cloudProxy||o.context.socketUseProxy?o.getProxyApUrl$(A||g,o.privateAPs):(o.retryCount>=4&&(o.retryCount=0),(void 0===areaConfig?[...o.AP_DOMAINS_IO,...o.AP_DOMAINS_NEW].length>0:o.retryCount<=3)?o.getApUrl$(A||g,o.privateAPs):o.getBackupApUrl$(A||g,o.privateAPs)))),mergeMap((A=>o.context.config.cloudProxy||o.context.socketUseProxy?o.fetchCloudProxy(A):o.fetchAp(A))),catchError((A=>(A instanceof TimeoutError&&o.warn(\"AP request timeout\"),throwError(A)))),distinct((A=>{let{ip:e}=A;return e})),takeUntil(o.apFinish$))},this.getApEdgeInfo$=A=>timer(0,A||g?getParameter(\"RECONNECTING_AP_INTERVAL\"):2e3).pipe(take(1),tap((()=>{this.retryCount+=1})),mergeMap((()=>this.context.config.cloudProxy||this.context.socketUseProxy?this.getProxyApUrl$(A||g,this.privateAPs):(void 0===areaConfig?[...this.AP_DOMAINS_IO,...this.AP_DOMAINS_NEW].length>0:this.retryCount<=3)?this.getApUrl$(A||g,this.privateAPs):this.getBackupApUrl$(A||g,this.privateAPs))),mergeMap((A=>(this.updateApDomainArrays(A),this.includeDomain(A,\"backup\")&&!this.context.useAp4Ipv6Reg&&(this.context.useAp4Ipv6Reg=!0),this.includeDomain(A,\"ipv6\")&&(this.context.useAp4Ipv6Reg=!1,this.resetRestDomains()),(this.context.config.cloudProxy||this.context.socketUseProxy?this.fetchCloudProxy(A):this.fetchAp(A)).pipe()))),catchError((A=>(A instanceof TimeoutError&&this.warn(\"AP request timeout\"),throwError(A)))),distinct((A=>{let{ip:e}=A;return e})),takeUntil(this.apFinish$))}clearUp(){this.failedAreas.clear(),this.retryCount=0}includeDomain(A,e){let t=!1;return(\"ipv6\"===e?AP_DOMAINS_IPV6:[...AP_BACKUP_DOMAINS_IO,...AP_BACKUP_DOMAINS_NEW]).forEach((e=>{A.includes(e)&&(t=!0)})),t}updateApDomainArrays(A){this.restDomains=this.restDomains.filter((e=>!A.includes(e))),this.AP_DOMAINS_IPV6=this.AP_DOMAINS_IPV6.filter((e=>!A.includes(e))),this.AP_DOMAINS_NEW=this.AP_DOMAINS_NEW.filter((e=>!A.includes(e))),this.AP_DOMAINS_IO=this.AP_DOMAINS_IO.filter((e=>!A.includes(e))),this.AP_BACKUP_DOMAINS_NEW=this.AP_BACKUP_DOMAINS_NEW.filter((e=>!A.includes(e))),this.AP_BACKUP_DOMAINS_IO=this.AP_BACKUP_DOMAINS_IO.filter((e=>!A.includes(e)))}resetRestDomains(){this.AP_DOMAINS_IPV6=[...AP_DOMAINS_IPV6],this.AP_DOMAINS_NEW=[...AP_DOMAINS_NEW],this.AP_DOMAINS_IO=[...AP_DOMAINS_IO],this.AP_BACKUP_DOMAINS_NEW=[...AP_BACKUP_DOMAINS_NEW],this.AP_BACKUP_DOMAINS_IO=[...AP_BACKUP_DOMAINS_IO],this.restDomains=[...this.AP_DOMAINS_NEW,...this.AP_DOMAINS_IO,...this.AP_DOMAINS_IPV6,...this.AP_BACKUP_DOMAINS_NEW,...this.AP_BACKUP_DOMAINS_IO]}}_defineProperty$1(AccessPoint,\"runOutOfUrlSymbol\",Symbol(\"AP urls are used up\"));const ConnectionError=genError();class Connection extends EventBase{constructor(A,e,t){var o;super(e,\"Connection\"),_defineProperty$1(this,\"apClient\",void 0),_defineProperty$1(this,\"startApRequest$\",new Subject),_defineProperty$1(this,\"endLogin$\",new Subject),_defineProperty$1(this,\"lastOpenSockets\",[new ReplaySubject(1),new ReplaySubject(1)]),_defineProperty$1(this,\"EDGE_ENV_PORT\",null!==(o=getParameter(\"EDGE_ENV_PORT\"))&&void 0!==o?o:EDGE_ENV_PORT),_defineProperty$1(this,\"curOpenSockets\",[void 0,void 0]),_defineProperty$1(this,\"ipIterator\",0),_defineProperty$1(this,\"loginSocketOpenFailureCount\",0),_defineProperty$1(this,\"firstEnv\",Math.random()>=.5?1:0),_defineProperty$1(this,\"firstSocketOpener\",void 0),_defineProperty$1(this,\"secondSocketOpener\",void 0),_defineProperty$1(this,\"firstOpenKeeperSubject\",new Subject),_defineProperty$1(this,\"secondOpenKeeperSubject\",new Subject),_defineProperty$1(this,\"blacklistedIP\",{}),_defineProperty$1(this,\"edgeInfoReplayed\",void 0),_defineProperty$1(this,\"firstEnvOpenSocket\",void 0),_defineProperty$1(this,\"firstOpenKeeperSub\",void 0),_defineProperty$1(this,\"secondOpenKeeperSub\",void 0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"logger\",void 0),_defineProperty$1(this,\"cancelLogin\",!1),this.context=A,this.logger=e,this.apClient=new AccessPoint(this.context,e),this.apClient.apFinish$.subscribe((()=>{this.log(\"Ap client fetch finished\")}));const g=[];let i;this.edgeInfoReplayed=this.startApRequest$.pipe(tap((()=>{if(this.log(\"start request ap by getApEdgeInfo$\"),this.cancelLogin)throw this.handleCancelLogin()})),switchMap((()=>this.apClient.getApEdgeInfo$(t).pipe(retryWhen((A=>A.pipe(tap((A=>{if(isRtmError(A))throw A})),delay(t?getParameter(\"RECONNECTING_AP_INTERVAL\"):900),takeUntil(this.apClient.apFinish$)))),filter((A=>{var e;return!some$1(g,A)&&(null!==(e=this.blacklistedIP[A.ip])&&void 0!==e?e:0)<=1})),tap((A=>{g.push(A),this.log(\"An edge info got %o\",A)})),tap({error:A=>{this.logError(\"get edge info error %o\",A),this.emit(\"connectionInitFailure\",A)}}),finalize((()=>{this.apClient.clearUp()}))))),takeUntil(this.endLogin$),shareReplay()),this.firstEnvOpenSocket=this.edgeInfoReplayed.pipe(mergeMap((A=>{if(void 0===A)return throwError(new Error(\"Invalid edge info\"));const{ip:o,ticket:g}=A;this.emit(\"syncTicketUpdated\",{ticket:atob(g),vid:this.context.vid}),this.log(\"create first socket ip: %s, env: %s\",o,this.firstEnv);const r=new Socket(o,this.firstEnv,g,this.context,e,i);if(this.firstEnv=1===this.firstEnv?0:1,r.once(\"connectionFailure\",(()=>this.onSocketConnectionFailure(r))),!t&&getParameter(\"ENABLE_EDGE_AUTO_FALLBACK\")&&!this.context.config.cloudProxy){const A=Date.now();let e;r.on(\"reconnect\",(()=>{var t;this.loginSocketOpenFailureCount+=1,null!==(t=e)&&void 0!==t||(e=Date.now()-A),e<500&&this.loginSocketOpenFailureCount>1&&void 0===this.context.rtmConfig.privateConfig&&!0===this.context.socketUseProxy?(this.context.useAp4Ipv6Reg=!0,this.context.socketUseProxy=!1):e<500&&this.loginSocketOpenFailureCount>1&&void 0===this.context.rtmConfig.privateConfig&&(this.context.socketUseProxy=!0)}))}return i=!r.useNewDomain,r.open$.pipe(mapTo(r))})),takeUntil(this.apClient.apFinish$),take(1),tap((A=>{this.log(\"The first websocket of ENV_%d opened to %s:%d\",A.env,A.ip,this.EDGE_ENV_PORT[A.env]),this.curOpenSockets[A.env]=A,this.lastOpenSockets[A.env].next(A),this.firstEnv=A.env,this.openSecondSocket(A.env,A.ip,A.useNewDomain)})),share()),this.firstSocketOpener=this.firstEnvOpenSocket.pipe(mergeMap((A=>A.open$.pipe(tap((()=>{this.log(\"The websocket of first ENV_%d re-opened to %s:%d\",A.env,A.ip,this.EDGE_ENV_PORT[A.env]),this.curOpenSockets[A.env]=A,this.lastOpenSockets[A.env].next(A)}))))),tap((()=>{this.log(\"first socket re opened\")}))),this.subKeeperSubject()}subKeeperSubject(){const A=this.firstOpenKeeperSubject.pipe(switchAll()).pipe(tap((()=>{this.log(\"firstOpenKeeperSubject switch æå¼ååºæ¥\")})));this.firstOpenKeeperSub&&this.firstOpenKeeperSub.unsubscribe(),this.firstOpenKeeperSub=A.subscribe({error:this.logError})}unsubscribeSecondOpenKeeperSub(){var A;null===(A=this.secondOpenKeeperSub)||void 0===A||A.unsubscribe()}initConnection(){this.unsubscribeSecondOpenKeeperSub(),this.log(\"initConnection, and start firstSocketOpener, firstOpenKeeperSubject emit next\"),this.firstOpenKeeperSubject.next(this.firstSocketOpener),this.startApRequest$.next(void 0)}closeSocket(A,e){if(![0,1].includes(A))throw new CommonError({INVALID_ENV:\"The env argument is not 0 or 1\"});let t;A===this.firstEnv?(t=this.firstOpenKeeperSub,this.firstOpenKeeperSub=void 0):(t=this.secondOpenKeeperSub,this.secondOpenKeeperSub=void 0);const o=this.curOpenSockets[A];this.curOpenSockets[A]=void 0,o&&(o.isActiveClose=!0,setTimeout((()=>{o.close()}),e)),void 0!==t&&setTimeout((()=>{var A;null===(A=t)||void 0===A||A.unsubscribe()}),e)}waitClosing(A){return A.isActiveClose=!0,A.open$.pipe(ignoreElements(),catchError((A=>A.message===lib_es5.normalClosureMessage?EMPTY:throwError(A))),timeout(LOGOUT_SOCKET_CLOSE_TIMEOUT),catchError((e=>e instanceof TimeoutError?(this.warn(\"Force closing the ENV_%d connection\",A.env),EMPTY):throwError(e))))}onSocketConnectionFailure(A){const e=[0,1].filter((e=>e!==A.env))[0],t=this.curOpenSockets[e];A.env===this.context.connSyncEnv&&(this.context.connSyncEnv=void 0,this.warn(\"change connSyncEnv: %d to undefined in onSocketConnectionFailure\",A.env)),this.log(\"ENV_\".concat(A.env,\"(\").concat(A.name,\"): connectionFailure received, otherSocketState: \").concat(null==t?void 0:t.loggedIn)),t&&t.loggedIn?this.reopenSocketWithApRequest(A.env):(this.log(\"ENV_\".concat(A.env,\"(\").concat(A.name,\"): will emit socketsFailure\")),t&&this.closeSocket(t.env,0),this.emit(\"socketsFailure\"))}openSecondSocket(A,e,t){const o=1===A?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(reduce(((A,e)=>[...A,e]),[]),map$1((A=>sortBy$1(A,(A=>{let{ip:t}=A;return calIpDistance(e,t)})).slice(-1)[0])),mergeMap((e=>{if(void 0===e)return throwError(new Error(\"Invalid edge info\"));const{ip:g,ticket:i}=e,r=this.curOpenSockets[A];null!=r&&r.loggedIn||this.warn(\"first socket is not logged in, can not open second socket, unsubscribe secondOpenKeeperSub\"),this.log(\"create second socket. ip: %s, env: %s\",g,o);const n=new Socket(g,o,i,this.context,this.logger,t);return n.on(\"connectionFailure\",(()=>this.onSocketConnectionFailure(n))),n.open$.pipe(tap((()=>{this.lastOpenSockets[o].next(n),this.curOpenSockets[o]=n,this.log(\"The second websocket of ENV_%d opened to %s:%d\",n.env,n.ip,this.EDGE_ENV_PORT[n.env])})))})),share());const g=this.secondOpenKeeperSubject.pipe(switchAll());this.secondOpenKeeperSub=g.subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}reopenSocketWithApRequest(A){const e=[0,1].filter((e=>e!==A))[0],t=this.curOpenSockets[e];if(void 0===t)return;const o=t.ip;let g;const i=(A=>A.pipe(throwIfEmpty((()=>new ConnectionError({AP_NO_AVAILABLE_EDGE:\"No available edge address to connect\"}))),retryWhen((A=>A.pipe(tap((A=>{if(A.code!==RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED)if(A.code!==RTMErrorCode.RTM_ERROR_LOGIN_NOT_AUTHORIZED){if(isRtmError(A))throw A}else this.apClient.apFinish$.next(void 0);else this.apClient.apFinish$.next(void 0)})),delay(getParameter(\"RECONNECTING_AP_INTERVAL\")),takeUntil(timer(15e3))))),tap((A=>{this.log(\"An edge info got %o\",A)})),finalize((()=>{this.apClient.clearUp()}))))(this.apClient.getApEdgeInfoEndFirst$(!0)).pipe(reduce(((A,e)=>[...A,e]),[]),map$1((A=>{const e=sortBy$1(A,(A=>{let{ip:e}=A;return calIpDistance(o,e)}));return e.length-1>=this.ipIterator?e.slice(-this.ipIterator++-1)[0]:(this.ipIterator=0,e.slice(-1)[0])})),throwIfEmpty(),mergeMap((e=>{if(void 0===e)return throwError(new Error(\"Invalid edge info\"));const{ip:t,ticket:o}=e;this.emit(\"syncTicketUpdated\",{ticket:atob(o),vid:this.context.vid}),this.log(\"reopen socket ip: %s, env: %s\",t,A);const i=new Socket(t,A,o,this.context,this.logger,g);return i.on(\"connectionFailure\",(()=>this.onSocketConnectionFailure(i))),g=!i.useNewDomain,i.open$.pipe(mapTo(i))})),mergeMap((e=>e.open$.pipe(tap((()=>{this.log(\"The websocket of ENV_%d re-opened to %s:%d using ap\",e.env,e.ip,this.EDGE_ENV_PORT[e.env]),this.curOpenSockets[A]=e,this.lastOpenSockets[A].next(e)}))))),share());A===this.firstEnv?(this.firstOpenKeeperSubject.next(i),this.log(\"reopenSocketWithAp, and start openSocket$, firstOpenKeeperSubject emit next\")):this.secondOpenKeeperSubject.next(i)}handleCancelLogin(){const A=OperationName.login,{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_CANCELED);return new RtmUnavailableError(A,[t],e)}stopLogin(){this.endLogin$.next()}}var isMobile$2={exports:{}};isMobile$2.exports=isMobile,isMobile$2.exports.isMobile=isMobile,isMobile$2.exports.default=isMobile;const mobileRE=/(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,notMobileRE=/CrOS/,tabletRE=/android|ipad|playbook|silk/i;function isMobile(A){A||(A={});let e=A.ua;if(e||\"undefined\"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&\"string\"==typeof e.headers[\"user-agent\"]&&(e=e.headers[\"user-agent\"]),\"string\"!=typeof e)return!1;let t=mobileRE.test(e)&&!notMobileRE.test(e)||!!A.tablet&&tabletRE.test(e);return!t&&A.tablet&&A.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf(\"Macintosh\")&&-1!==e.indexOf(\"Safari\")&&(t=!0),t}var isMobileExports=isMobile$2.exports,isMobile$1=getDefaultExportFromCjs(isMobileExports);const implementsFunction=(A,e)=>null!=A&&\"function\"==typeof A[e],isArrayLike=A=>null!=A&&\"function\"!=typeof A&&void 0!==A.length,isIterable=A=>null!=A&&\"function\"==typeof A[Symbol.iterator],compare=(A,e)=>A===e?0:null==A?null==e?0:-1:null==e?null==A?0:1:\"function\"==typeof A.compare?A.compare(e):\"function\"==typeof e.compare?-e.compare(A):A<e?-1:A>e?1:0,OBJP=Object.getPrototypeOf({}),FN=\"function\",STR=\"string\",equiv=(A,e)=>{let t;return A===e||(null==A?A==e:typeof A.equiv===FN?A.equiv(e):null==e?A==e:typeof e.equiv===FN?e.equiv(A):typeof A!==STR&&typeof e!==STR&&(t=Object.getPrototypeOf(A),null!=t&&t!==OBJP||(t=Object.getPrototypeOf(e),null!=t&&t!==OBJP)?typeof A!==FN&&void 0!==A.length&&typeof e!==FN&&void 0!==e.length?equivArrayLike(A,e):A instanceof Set&&e instanceof Set?equivSet(A,e):A instanceof Map&&e instanceof Map?equivMap(A,e):A instanceof Date&&e instanceof Date?A.getTime()===e.getTime():A instanceof RegExp&&e instanceof RegExp?A.toString()===e.toString():A!=A&&e!=e:equivObject(A,e)))},equivArrayLike=function(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv,o=A.length;if(o===e.length)for(;--o>=0&&t(A[o],e[o]););return o<0},equivSet=function(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv;return A.size===e.size&&t([...A.keys()].sort(),[...e.keys()].sort())},equivMap=function(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv;return A.size===e.size&&t([...A].sort(),[...e].sort())},equivObject=function(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv;if(Object.keys(A).length!==Object.keys(e).length)return!1;for(let o in A)if(!e.hasOwnProperty(o)||!t(A[o],e[o]))return!1;return!0},defError=function(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A=>void 0!==A?\": \"+A:\"\";return class extends Error{constructor(t){super(A(t)+e(t))}}},IllegalArgumentError=defError((()=>\"illegal argument(s)\")),illegalArgs=A=>{throw new IllegalArgumentError(A)},OutOfBoundsError=defError((()=>\"index out of bounds\")),outOfBounds=A=>{throw new OutOfBoundsError(A)},ensureIndex=(A,e,t)=>(A<e||A>=t)&&outOfBounds(A),INV_MAX=1/4294967295;class ARandom{float(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.int()*INV_MAX*A}norm(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*INV_MAX-.5)*A}minmax(A,e){return this.float()*(e-A)+A}}const random=Math.random;class SystemRandom extends ARandom{int(){return 4294967296*random()>>>0}float(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return random()*A}norm(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 2*(random()-.5)*A}}const SYSTEM=new SystemRandom,SEMAPHORE=Symbol(),NO_OP=()=>{},ensureTransducer=A=>implementsFunction(A,\"xform\")?A.xform():A;class Reduced{constructor(A){this.value=A}deref(){return this.value}}const isReduced=A=>A instanceof Reduced,unreduced=A=>A instanceof Reduced?A.deref():A;function*iterator1(A,e){const t=ensureTransducer(A)([NO_OP,NO_OP,(A,e)=>e])[2];for(let A=0;A<e.length;A++){let o=e[A],g=t(SEMAPHORE,o);if(isReduced(g))return g=unreduced(g.deref()),void(g!==SEMAPHORE&&(yield g));g!==SEMAPHORE&&(yield g)}}const compR=(A,e)=>[A[0],A[1],e];function map(A,e){return isIterable(e)?iterator1(map(A),e):e=>{const t=e[2];return compR(e,((e,o)=>t(e,A(o))))}}class DCons{constructor(A){this._length=0,A&&this.into(A)}get length(){return this._length}copy(){return new DCons(this)}empty(){return new DCons}clear(){this.release()}release(){let A,e=this.head;for(;e;)A=e.next,delete e.value,delete e.prev,delete e.next,e=A;return delete this.head,delete this.tail,this._length=0,!0}compare(A){const e=this._length;if(e<A._length)return-1;if(e>A._length)return 1;if(0===e)return 0;{let e=this.head,t=A.head,o=0;for(;e&&0==o;)o=compare(e.value,t.value),e=e.next,t=t.next;return o}}equiv(A){if(!(A instanceof DCons||isArrayLike(A))||this._length!==A.length)return!1;if(!this._length||this===A)return!0;let e=this.head;for(let t=0;t<A.length;t++){let o=A[t];if(!equiv(e.value,o))return!1;e=e.next}return!0}*[Symbol.iterator](){let A=this.head;for(;A;)yield A.value,A=A.next}seq(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(A>=e||A<0)return;let t=this.nthCell(A);const o=this.nthCell(e-1),g=A=>({first(){return A.value},next(){return A!==o&&A.next?g(A.next):void 0}});return t?g(t):void 0}*cycle(){for(;;)yield*this}$reduce(A,e){let t=this.head;for(;t&&!isReduced(e);)e=A(e,t.value),t=t.next;return e}drop(){const A=this.head;if(A)return this.head=A.next,this.head?delete this.head.prev:delete this.tail,this._length--,A.value}cons(A){const e={value:A,next:this.head};return this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}insertBefore(A,e){A||illegalArgs(\"cell is undefined\");const t={value:e,next:A,prev:A.prev};return A.prev?A.prev.next=t:this.head=t,A.prev=t,this._length++,this}insertAfter(A,e){A||illegalArgs(\"cell is undefined\");const t={value:e,next:A.next,prev:A};return A.next?A.next.prev=t:this.tail=t,A.next=t,this._length++,this}insertBeforeNth(A,e){return A<0&&(A+=this._length),A<=0?this.cons(e):(ensureIndex(A,0,this._length),this.insertBefore(this.nthCellUnsafe(A),e))}insertAfterNth(A,e){return A<0&&(A+=this._length),A>=this._length-1?this.push(e):(ensureIndex(A,0,this._length),this.insertAfter(this.nthCellUnsafe(A),e))}insertSorted(A,e){e=e||compare;let t=this.head;for(;t;){if(e(A,t.value)<=0)return this.insertBefore(t,A);t=t.next}return this.push(A)}find(A){let e=this.head;for(;e;){if(e.value===A)return e;e=e.next}}findWith(A){let e=this.head;for(;e;){if(A(e.value))return e;e=e.next}}concat(){const A=this.copy();for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(let e=0;e<t.length;e++){let o=t[e];A.into(o)}return A}into(A){for(let e=0;e<A.length;e++){let t=A[e];this.push(t)}}slice(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,t=A<0?A+this._length:A,o=e<0?e+this._length:e;(t<0||o<0)&&illegalArgs(\"invalid indices: ${from} / ${to}\");const g=new DCons;let i=this.nthCell(t);for(;i&&++t<=o;)g.push(i.value),i=i.next;return g}splice(A){let e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;\"number\"==typeof A?(A<0&&(A+=this._length),ensureIndex(A,0,this._length),e=this.nthCellUnsafe(A)):e=A;const g=new DCons;if(t>0)for(;e&&t-- >0;)this.remove(e),g.push(e.value),e=e.next;else e&&(e=e.next);if(o)if(e)for(let A=0;A<o.length;A++){let t=o[A];this.insertBefore(e,t)}else for(let A=0;A<o.length;A++){let e=o[A];this.push(e)}return g}remove(A){return A.prev?A.prev.next=A.next:this.head=A.next,A.next?A.next.prev=A.prev:this.tail=A.prev,this._length--,this}swap(A,e){if(A!==e){const t=A.value;A.value=e.value,e.value=t}return this}push(A){if(this.tail){const e={value:A,prev:this.tail};return this.tail.next=e,this.tail=e,this._length++,this}return this.cons(A)}pop(){const A=this.tail;if(A)return this.tail=A.prev,this.tail?delete this.tail.next:delete this.head,this._length--,A.value}first(){return this.head&&this.head.value}peek(){return this.tail&&this.tail.value}setHead(A){return this.head?(this.head.value=A,this):this.cons(A)}setTail(A){return this.tail?(this.tail.value=A,this):this.push(A)}setNth(A,e){const t=this.nthCell(A);return!t&&illegalArgs(\"index out of bounds: \".concat(A)),t.value=e,this}nth(A,e){const t=this.nthCell(A);return t?t.value:e}nthCell(A){if(A<0&&(A+=this._length),!(A<0||A>=this._length))return this.nthCellUnsafe(A)}rotateLeft(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}rotateRight(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:const A=this.peek();return this.pop(),this.cons(A)}}map(A){const e=new DCons;let t=this.head;for(;t;)e.push(A(t.value)),t=t.next;return e}filter(A){const e=new DCons;let t=this.head;for(;t;)A(t.value)&&e.push(t.value),t=t.next;return e}reduce(A,e){let t=e,o=this.head;for(;o;)t=A(t,o.value),o=o.next;return t}shuffle(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SYSTEM;if(this._length<2)return this;for(A=null!=A?A:Math.ceil(1.5*Math.log2(this._length));A>0;A--){let A=this.head;for(;A;){const t=A.next;e.float()<.5?this.asHead(A):this.asTail(A),A=t}}return this}sort(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:compare;if(!this._length)return this;let e=1;for(;;){let t=this.head;this.head=void 0,this.tail=void 0;let o=0;for(;t;){o++;let g=t,i=0;for(let A=0;A<e&&(i++,g=g.next,g);A++);let r=e;for(;i>0||r>0&&g;){let e;0===i?(e=g,g=g.next,r--):g&&0!==r?A(t.value,g.value)<=0?(e=t,t=t.next,i--):(e=g,g=g.next,r--):(e=t,t=t.next,i--),this.tail?this.tail.next=e:this.head=e,e.prev=this.tail,this.tail=e}t=g}if(this.tail.next=void 0,o<=1)return this;e*=2}}reverse(){let A=this.head,e=this.tail,t=(this._length>>>1)+(1&this._length);for(;A&&e&&t>0;){const o=A.value;A.value=e.value,e.value=o,A=A.next,e=e.prev,t--}return this}asHead(A){return A===this.head||(this.remove(A),this.head.prev=A,A.next=this.head,A.prev=void 0,this.head=A,this._length++),this}asTail(A){return A===this.tail||(this.remove(A),this.tail.next=A,A.prev=this.tail,A.next=void 0,this.tail=A,this._length++),this}toString(){let A=[],e=this.head;for(;e;)A.push(String(e.value)),e=e.next;return A.join(\", \")}toJSON(){return[...this]}nthCellUnsafe(A){let e,t;for(A<=this._length>>1?(e=this.head,t=\"next\"):(e=this.tail,t=\"prev\",A=this._length-A-1);A-- >0&&e;)e=e[t];return e}}class LRUCache{constructor(A,e){const t=Object.assign({maxlen:1/0,maxsize:1/0,map:()=>new Map,ksize:()=>0,vsize:()=>0},e);this.map=t.map(),this.items=new DCons,this._size=0,this.opts=t,A&&this.into(A)}get length(){return this.items.length}get size(){return this._size}[Symbol.iterator](){return this.entries()}entries(){return map((A=>[A.k,A]),this.items)}keys(){return map((A=>A.k),this.items)}values(){return map((A=>A.v),this.items)}copy(){const A=this.empty();A.items=this.items.copy();let e=A.items.head;for(;e;)A.map.set(e.value.k,e),e=e.next;return A}empty(){return new LRUCache(null,this.opts)}release(){this._size=0,this.map.clear();const A=this.opts.release;if(A){let e;for(;e=this.items.drop();)A(e.k,e.v);return!0}return this.items.release()}has(A){return this.map.has(A)}get(A,e){const t=this.map.get(A);return t?this.resetEntry(t):e}set(A,e){const t=this.opts.ksize(A)+this.opts.vsize(e),o=this.map.get(A);return this._size+=Math.max(0,t-(o?o.value.s:0)),this.ensureSize()&&this.doSetEntry(o,A,e,t),e}into(A){for(let e=0;e<A.length;e++){let t=A[e];this.set(t[0],t[1])}return this}getSet(A,e){const t=this.map.get(A);return t?Promise.resolve(this.resetEntry(t)):e().then((e=>this.set(A,e)))}delete(A){const e=this.map.get(A);return!!e&&(this.removeEntry(e),!0)}resetEntry(A){return this.items.asTail(A),A.value.v}ensureSize(){const A=this.opts.release,e=this.opts.maxsize,t=this.opts.maxlen;for(;this._size>e||this.length>=t;){const e=this.items.drop();if(!e)return!1;this.map.delete(e.k),A&&A(e.k,e.v),this._size-=e.s}return!0}removeEntry(A){const e=A.value;this.map.delete(e.k),this.items.remove(A),this.opts.release&&this.opts.release(e.k,e.v),this._size-=e.s}doSetEntry(A,e,t,o){A?(A.value.v=t,A.value.s=o,this.items.asTail(A)):(this.items.push({k:e,v:t,s:o}),this.map.set(e,this.items.tail))}}class TLRUCache extends LRUCache{constructor(A,e){super(A,e=Object.assign({ttl:36e5},e))}empty(){return new TLRUCache(null,this.opts)}has(A){return void 0!==this.get(A)}get(A,e){const t=this.map.get(A);if(t){if(t.value.t>=Date.now())return this.resetEntry(t);this.removeEntry(t)}return e}set(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.ttl;const o=this.opts.ksize(A)+this.opts.vsize(e),g=this.map.get(A);if(this._size+=Math.max(0,o-(g?g.value.s:0)),this.ensureSize()){const i=Date.now()+t;g?(g.value.v=e,g.value.s=o,g.value.t=i,this.items.asTail(g)):(this.items.push({k:A,v:e,s:o,t:i}),this.map.set(A,this.items.tail))}return e}getSet(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.ttl;const o=this.get(A);return o?Promise.resolve(o):e().then((e=>this.set(A,e,t)))}prune(){const A=Date.now();let e=this.items.head;for(;e;)e.value.t<A&&this.removeEntry(e),e=e.next}ensureSize(){const A=this.opts.maxsize,e=this.opts.maxlen,t=Date.now();let o=this.items.head;for(;o&&(this._size>A||this.length>=e);)o.value.t<t&&this.removeEntry(o),o=o.next;return super.ensureSize()}}function comparator(A,e){return Long$2.fromValue(A).eq(e)}function validateField(A,e){const t=void 0===e?A.val:e,{isBoolean:o,isNumber:g,oneof:i,len:r}=A;if(2!==[o,g,i].filter((A=>!A)).length)throw new TypeError(\"invalid field type\");if(void 0===t)return;let n=!1;if(void 0!==i){const A=values$3(i);uniqWith$1(A,comparator).length===A.length&&void 0!==find$1(A,(A=>comparator(t,A)))&&(n=!0)}const I=void 0!==o&&(0===t||1===t)&&1===r,s=void 0!==g&&t.toString(2).length<=r;if(!(n||I||s))throw new Error(\"invalid field value\")}class Struct{constructor(){_defineProperty$1(this,\"size\",0),_defineProperty$1(this,\"fields\",new Map)}define(A,e,t){if(this.size+=t,this.size>64)throw new RangeError(\"the struct over 64 bits is not supported\");const o={val:0,isNumber:\"number\"===e,isBoolean:\"boolean\"===e,oneof:\"number\"===e||\"boolean\"===e?void 0:e,len:t};validateField(o),this.fields.set(A,o)}set(A,e){const t=this.fields.get(A);if(!t)throw new Error(\"field not found\");const{oneof:o}=t;let g;if(Long$2.isLong(e)||\"number\"==typeof e)g=e;else if(\"boolean\"==typeof e)g=e?1:0;else{if(void 0===o)throw new Error(\"invalid field type\");const A=o[e];if(void 0===A)throw new Error(\"field type not found\");g=A}validateField(t,g),t.val=g}toNumber(){let A=0,e=0;for(let t=0,o=Array.from(this.fields);t<o.length;t++){const[,g]=o[t],{len:i,val:r}=g;void 0!==r&&(A+=Long$2.fromValue(r).shiftLeft(e).toNumber(),e+=i)}return A}toLong(){let A=Long$2.fromNumber(0,!0),e=0;for(let t=0,o=Array.from(this.fields);t<o.length;t++){const[,g]=o[t],{len:i,val:r}=g;void 0!==r&&(A=Long$2.fromValue(r).shiftLeft(e).add(A),e+=i)}return A}assert(A,e){const t=this.fields.get(A);if(!t)throw new Error(\"field not found\");const{oneof:o}=t;function g(A){let e;if(Long$2.isLong(A)||\"number\"==typeof A)e=A;else if(\"boolean\"==typeof A)e=A?1:0;else{if(void 0===o)throw new Error(\"invalid field type\");const t=o[A];if(void 0===t)throw new Error(\"field type not found\");e=t}return validateField(t,e),comparator(e,t.val)}if(!Array.isArray(e))return g(e);if(1===e.length)return g(e[0]);if(e.every((A=>\"string\"==typeof A))&&void 0!==o)return e.some((A=>g(A)));throw new Error(\"invalid valueTypes\")}from(A){const e=Long$2.fromValue(A);let t=0;for(let A=0,o=Array.from(this.fields);A<o.length;A++){const[,g]=o[A],{len:i}=g,r=Long$2.fromNumber(2**i-1,!0).shiftLeft(t),n=e.and(r).shiftRightUnsigned(t);validateField(g,n),g.val=n,t+=i}}typeOf(A){const e=this.fields.get(A);if(void 0!==e){const{oneof:A,val:t}=e;if(void 0!==A)for(let e=0,o=Object.entries(A);e<o.length;e++){const[A,g]=o[e];if(comparator(t,g))return A}}throw new TypeError(\"can only get type of oneof type\")}}class UserJoinOptions extends Struct{constructor(A){super(),this.define(\"Rejoin\",\"boolean\",1),this.define(\"Unused\",\"number\",31),this.define(\"Platform\",\"number\",8),this.define(\"Version\",\"number\",12),this.define(\"Subversion\",\"number\",12),this.set(\"Platform\",WEB_PLATFORM_TYPE),this.set(\"Version\",VERSION_NO),this.set(\"Subversion\",SUBVERSION),this.set(\"Rejoin\",A)}}const TextMessageDstType={PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2},RawMessageDstType={PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5},MessageDstType=_objectSpread2(_objectSpread2({},TextMessageDstType),RawMessageDstType),InvitationType={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},MessageType=_objectSpread2(_objectSpread2({},MessageDstType),InvitationType),CompressionMethod={Uncompressed:0,Zlib:1};class MessageOption extends Struct{constructor(A){if(super(),this.define(\"MessageType\",MessageType,8),this.define(\"BroadcastJumps\",\"number\",2),this.define(\"ToCache\",\"boolean\",1),this.define(\"FromCache\",\"boolean\",1),this.define(\"CompressionMethod\",CompressionMethod,2),this.define(\"IterationNumber\",\"number\",4),this.define(\"BufferedMessage\",\"boolean\",1),this.define(\"ToArchive\",\"boolean\",1),this.define(\"FromArchive\",\"boolean\",1),this.define(\"kDelegate\",\"number\",1),this.define(\"kSecurity\",\"number\",1),this.define(\"kBypassGroupMemberCheck\",\"number\",1),this.define(\"enableEncryption\",\"boolean\",1),this.define(\"encrytionComplement\",\"number\",5),this.define(\"kHistory\",\"number\",1),this.define(\"undefined\",\"number\",33),isLongNum(A))this.from(A);else if(void 0!==A)for(let e=0,t=getEntries(A);e<t.length;e++){const[A,o]=t[e];this.set(A,o)}}isTextMessage(){return this.assert(\"MessageType\",[\"PeerTextMessage\",\"ChannelTextMessage\",\"VendorTextMessage\"])}isRawMessage(){return this.assert(\"MessageType\",[\"ChannelRawMessage\",\"PeerRawMessage\",\"VendorRawMessage\"])}isRawPeerMessage(){return this.assert(\"MessageType\",\"PeerRawMessage\")}isRawChannelMessage(){return this.assert(\"MessageType\",\"ChannelRawMessage\")}isPeerTextMessage(){return this.assert(\"MessageType\",\"PeerTextMessage\")}isChannelTextMessage(){return this.assert(\"MessageType\",\"ChannelTextMessage\")}isInvitation(A){return void 0!==A?this.assert(\"MessageType\",A):getKeys(InvitationType).some((A=>this.assert(\"MessageType\",A)))}isPeerMessage(){return this.assert(\"MessageType\",[\"PeerTextMessage\",\"PeerRawMessage\"])}isZlibCompressed(){return this.assert(\"CompressionMethod\",\"Zlib\")}isFromCache(){return this.assert(\"FromCache\",!0)}isBufferedMessage(){return this.assert(\"BufferedMessage\",!0)}getInvitationType(){if(!this.isInvitation())throw new TypeError(\"cannot get InvitationType of a normal message type\");return this.typeOf(\"MessageType\")}isEncryption(){return this.assert(\"enableEncryption\",!0)}getEncrytionComplement(){var A;return null===(A=this.fields.get(\"encrytionComplement\"))||void 0===A?void 0:A.val}}let MetadataRequestErrorCode=function(A){return A[A.kMetadataOk=0]=\"kMetadataOk\",A[A.kDuplicatedOperation=1]=\"kDuplicatedOperation\",A[A.kSyncServerError=2]=\"kSyncServerError\",A[A.kArgumentError=3]=\"kArgumentError\",A[A.kAutheticationError=4]=\"kAutheticationError\",A[A.kExceedLimitationError=5]=\"kExceedLimitationError\",A[A.kOutdateRevision=6]=\"kOutdateRevision\",A[A.kLockAcquireFailed=7]=\"kLockAcquireFailed\",A[A.kLockExpired=8]=\"kLockExpired\",A[A.kLockWatching=9]=\"kLockWatching\",A[A.kInvalidLock=10]=\"kInvalidLock\",A[A.kLockReleased=11]=\"kLockReleased\",A[A.kWriteNotAllowed=12]=\"kWriteNotAllowed\",A[A.kNoLock=13]=\"kNoLock\",A[A.kTimeOutError=100]=\"kTimeOutError\",A[A.kUnknownError=255]=\"kUnknownError\",A}({});function convertMetadataServerCodeToSdkCode(A){switch(A){case MetadataRequestErrorCode.kMetadataOk:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_OK);case MetadataRequestErrorCode.kArgumentError:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_ARGUMENT);case MetadataRequestErrorCode.kOutdateRevision:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OUTDATED_REVISION);case MetadataRequestErrorCode.kTimeOutError:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);default:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_FAILED)}}function convertServerCodeToSdkCodeForSub(A){switch(A){case MetadataRequestErrorCode.kMetadataOk:case MetadataRequestErrorCode.kDuplicatedOperation:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_OK);case MetadataRequestErrorCode.kArgumentError:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_ARGUMENT);case MetadataRequestErrorCode.kTimeOutError:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);default:return getErrorInfoByCode(A)}}function convertLockServerCodeToSdkCode(A){switch(A){case MetadataRequestErrorCode.kMetadataOk:case MetadataRequestErrorCode.kDuplicatedOperation:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_OK);case MetadataRequestErrorCode.kOutdateRevision:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_ALREADY_EXIST);case MetadataRequestErrorCode.kLockAcquireFailed:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_ACQUIRE_FAILED);case MetadataRequestErrorCode.kNoLock:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_NOT_EXIST);default:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_FAILED)}}function convertDataChannelJoinCodeToSdkCode(A,e){switch(A){case AgoraRTCErrorCode.NOT_SUPPORTED:case AgoraRTCErrorCode.UNEXPECTED_RESPONSE:case AgoraRTCErrorCode.DATASTREAM2_NOT_AVAILABLE:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_NOT_AVAILABLE);case AgoraRTCErrorCode.INIT_DATACHANNEL_TIMEOUT:case AgoraRTCErrorCode.CREATE_DATACHANNEL_ERROR:case AgoraRTCErrorCode.DATACHANNEL_FAILED:case AgoraRTCErrorCode.DATACHANNEL_CONNECTION_TIMEOUT:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_TOPIC_FAILED);case AgoraRTCErrorCode.CAN_NOT_GET_GATEWAY_SERVER:case AgoraRTCErrorCode.VOID_GATEWAY_ADDRESS:case AgoraRTCErrorCode.MULTI_UNILBS_RESPONSE_ERROR:case AgoraRTCErrorCode.UID_CONFLICT:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED);case AgoraRTCErrorCode.TOKEN_EXPIRE:return getErrorInfoByCode(RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED);case AgoraRTCErrorCode.TIMEOUT:case AgoraRTCErrorCode.UNEXPECTED_ERROR:case AgoraRTCErrorCode.INVALID_PARAMS:case AgoraRTCErrorCode.NOT_READABLE:case AgoraRTCErrorCode.INVALID_OPERATION:case AgoraRTCErrorCode.OPERATION_ABORTED:case AgoraRTCErrorCode.WEB_SECURITY_RESTRICT:case AgoraRTCErrorCode.EXCHANGE_SDP_FAILED:case AgoraRTCErrorCode.NETWORK_ERROR:case AgoraRTCErrorCode.NETWORK_TIMEOUT:case AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR:case AgoraRTCErrorCode.API_INVOKE_TIMEOUT:case AgoraRTCErrorCode.ENUMERATE_DEVICES_FAILED:case AgoraRTCErrorCode.DEVICE_NOT_FOUND:case AgoraRTCErrorCode.ELECTRON_IS_NULL:case AgoraRTCErrorCode.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR:case AgoraRTCErrorCode.CHROME_PLUGIN_NO_RESPONSE:case AgoraRTCErrorCode.CHROME_PLUGIN_NOT_INSTALL:case AgoraRTCErrorCode.MEDIA_OPTION_INVALID:case AgoraRTCErrorCode.PERMISSION_DENIED:case AgoraRTCErrorCode.CONSTRAINT_NOT_SATISFIED:case AgoraRTCErrorCode.TRACK_IS_DISABLED:case AgoraRTCErrorCode.GET_VIDEO_ELEMENT_VISIBLE_ERROR:case AgoraRTCErrorCode.SHARE_AUDIO_NOT_ALLOWED:case AgoraRTCErrorCode.LOW_STREAM_ENCODING_ERROR:case AgoraRTCErrorCode.SET_ENCODING_PARAMETER_ERROR:case AgoraRTCErrorCode.TRACK_STATE_UNREACHABLE:case AgoraRTCErrorCode.INVALID_UINT_UID_FROM_STRING_UID:case AgoraRTCErrorCode.CAN_NOT_GET_PROXY_SERVER:case AgoraRTCErrorCode.UPDATE_TICKET_FAILED:case AgoraRTCErrorCode.INVALID_LOCAL_TRACK:case AgoraRTCErrorCode.INVALID_TRACK:case AgoraRTCErrorCode.SENDER_NOT_FOUND:case AgoraRTCErrorCode.CREATE_OFFER_FAILED:case AgoraRTCErrorCode.SET_ANSWER_FAILED:case AgoraRTCErrorCode.ICE_FAILED:case AgoraRTCErrorCode.PC_CLOSED:case AgoraRTCErrorCode.SENDER_REPLACE_FAILED:case AgoraRTCErrorCode.GET_LOCAL_CAPABILITIES_FAILED:case AgoraRTCErrorCode.GET_LOCAL_CONNECTION_PARAMS_FAILED:case AgoraRTCErrorCode.SUBSCRIBE_FAILED:case AgoraRTCErrorCode.UNSUBSCRIBE_FAILED:case AgoraRTCErrorCode.GATEWAY_P2P_LOST:case AgoraRTCErrorCode.NO_ICE_CANDIDATE:case AgoraRTCErrorCode.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS:case AgoraRTCErrorCode.EXIST_DISABLED_VIDEO_TRACK:case AgoraRTCErrorCode.INVALID_REMOTE_USER:case AgoraRTCErrorCode.REMOTE_USER_IS_NOT_PUBLISHED:case AgoraRTCErrorCode.CUSTOM_REPORT_SEND_FAILED:case AgoraRTCErrorCode.CUSTOM_REPORT_FREQUENCY_TOO_HIGH:case AgoraRTCErrorCode.FETCH_AUDIO_FILE_FAILED:case AgoraRTCErrorCode.READ_LOCAL_AUDIO_FILE_ERROR:case AgoraRTCErrorCode.DECODE_AUDIO_FILE_FAILED:case AgoraRTCErrorCode.WS_ABORT:case AgoraRTCErrorCode.WS_DISCONNECT:case AgoraRTCErrorCode.WS_ERR:case AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT:case AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT:case AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR:case AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED:case AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED:case AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR:case AgoraRTCErrorCode.LIVE_STREAMING_INVALID_RAW_STREAM:case AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT:case AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE:case AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST:case AgoraRTCErrorCode.WEBGL_INTERNAL_ERROR:case AgoraRTCErrorCode.BEAUTY_PROCESSOR_INTERNAL_ERROR:case AgoraRTCErrorCode.CROSS_CHANNEL_WAIT_STATUS_ERROR:case AgoraRTCErrorCode.CROSS_CHANNEL_FAILED_JOIN_SRC:case AgoraRTCErrorCode.CROSS_CHANNEL_FAILED_JOIN_DEST:case AgoraRTCErrorCode.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST:case AgoraRTCErrorCode.CROSS_CHANNEL_SERVER_ERROR_RESPONSE:case AgoraRTCErrorCode.METADATA_OUT_OF_RANGE:case AgoraRTCErrorCode.LOCAL_AEC_ERROR:case AgoraRTCErrorCode.INVALID_PLUGIN:case AgoraRTCErrorCode.DISCONNECT_P2P:case AgoraRTCErrorCode.CONVERTING_IMAGEDATA_TO_BLOB_FAILED:case AgoraRTCErrorCode.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED:case AgoraRTCErrorCode.ADD_CANDIDATE_FAILED:case AgoraRTCErrorCode.EXTERNAL_SIGNAL_ABORT:case AgoraRTCErrorCode.IMAGE_MODERATION_UPLOAD_FAILED:case AgoraRTCErrorCode.P2P_MESSAGE_FAILED:case AgoraRTCErrorCode.PROHIBITED_OPERATION:default:return{code:e,reason:\"\"}}}class MessageReport extends EventBase{constructor(A,e,t){super(e,\"MessageReport\"),_defineProperty$1(this,\"messagecount\",this.getInitMessageCount()),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"rtmMessageCategory\",void 0),_defineProperty$1(this,\"seq\",Long$2.fromNumber(1,!0)),this.context=A,this.rtmMessageCategory=t}incGetSeq(){return this.seq=this.seq.add(1),this.seq}getInitMessageCount(){return{peerack10mscount:Long$2.fromNumber(0),peerack25mscount:Long$2.fromNumber(0),peerack50mscount:Long$2.fromNumber(0),peerack75mscount:Long$2.fromNumber(0),peerack100mscount:Long$2.fromNumber(0),peerack150mscount:Long$2.fromNumber(0),peerack200mscount:Long$2.fromNumber(0),peerack250mscount:Long$2.fromNumber(0),peerack300mscount:Long$2.fromNumber(0),peerack400mscount:Long$2.fromNumber(0),peerack500mscount:Long$2.fromNumber(0),peerack600mscount:Long$2.fromNumber(0),peerack800mscount:Long$2.fromNumber(0),peerack1000mscount:Long$2.fromNumber(0),peerack2000mscount:Long$2.fromNumber(0),peerack3000mscount:Long$2.fromNumber(0),peerack5000mscount:Long$2.fromNumber(0),peerack7000mscount:Long$2.fromNumber(0),peerackslowcount:Long$2.fromNumber(0),norecipientack10mscount:Long$2.fromNumber(0),norecipientack25mscount:Long$2.fromNumber(0),norecipientack50mscount:Long$2.fromNumber(0),norecipientack75mscount:Long$2.fromNumber(0),norecipientack100mscount:Long$2.fromNumber(0),norecipientack150mscount:Long$2.fromNumber(0),norecipientack200mscount:Long$2.fromNumber(0),norecipientack250mscount:Long$2.fromNumber(0),norecipientack300mscount:Long$2.fromNumber(0),norecipientack400mscount:Long$2.fromNumber(0),norecipientack500mscount:Long$2.fromNumber(0),norecipientack600mscount:Long$2.fromNumber(0),norecipientack800mscount:Long$2.fromNumber(0),norecipientack1000mscount:Long$2.fromNumber(0),norecipientack2000mscount:Long$2.fromNumber(0),norecipientack3000mscount:Long$2.fromNumber(0),norecipientack5000mscount:Long$2.fromNumber(0),norecipientack7000mscount:Long$2.fromNumber(0),norecipientackslowcount:Long$2.fromNumber(0),sentcount:Long$2.fromNumber(0),receivedcount:Long$2.fromNumber(0),acktimeoutcount:Long$2.fromNumber(0),toooftencount:0,receiverofflinecount:0,invalidmessagecount:0,unknowerrorcount:0,servercachedcount:0,timeoutcount:0,successcount:0}}updatePeerAckCount(A){const e=A/2,t=[[0,10],[10,25],[25,50],[50,75],[75,100],[100,150],[150,200],[200,250],[250,300],[300,400],[400,500],[500,600],[600,800],[800,1e3],[1e3,2e3],[2e3,3e3],[3e3,5e3],[5e3,7e3]];for(let A=0;A<t.length;A++){const i=t[A];if(inRange$1(e,i[0],i[1])){var o;const A=\"peerack\".concat(i[1],\"mscount\");this.messagecount[A]=null===(o=this.messagecount[A])||void 0===o?void 0:o.add(1)}else if(e>7e3){var g;this.messagecount.peerackslowcount=null===(g=this.messagecount.peerackslowcount)||void 0===g?void 0:g.add(1)}}}updateNorecipientackCount(A){const e=A/2,t=[[0,10],[10,25],[25,50],[50,75],[75,100],[100,150],[150,200],[200,250],[250,300],[300,400],[400,500],[500,600],[600,800],[800,1e3],[1e3,2e3],[2e3,3e3],[3e3,5e3],[5e3,7e3]];for(let A=0;A<t.length;A++){const i=t[A];if(inRange$1(e,i[0],i[1])){var o;const A=\"norecipientack\".concat(i[1],\"mscount\");this.messagecount[A]=null===(o=this.messagecount[A])||void 0===o?void 0:o.add(1)}else if(e>7e3){var g;this.messagecount.norecipientackslowcount=null===(g=this.messagecount.norecipientackslowcount)||void 0===g?void 0:g.add(1)}}}updateCommonCount(A){const e=this.messagecount[A];long.isLong(e)?this.messagecount[A]=e.add(1):this.messagecount[A]=e+1}report(){this.context.addReportEvents(\"RtmSdkMessageCount\",new RtmSdkMessageCount(_objectSpread2(_objectSpread2({},this.messagecount),{},{vid:Long$2.fromString(this.context.vid||\"0\"),os:WEB_PLATFORM_TYPE,lts:Long$2.fromNumber(Date.now()),sid:this.context.sid,reportsequence:this.incGetSeq(),apimajorversion:VERSION_NO,apiminorversion:SUBVERSION,userid:this.context.uid,messagecategory:this.rtmMessageCategory}))),this.messagecount=_objectSpread2(_objectSpread2({},this.messagecount),{},{toooftencount:0,receiverofflinecount:0,invalidmessagecount:0,unknowerrorcount:0,servercachedcount:0,timeoutcount:0,successcount:0})}}class ChatManager extends EventBase{constructor(A){super(A,\"ChatManager\"),_defineProperty$1(this,\"dialogueLru\",new TLRUCache(void 0,{maxlen:LRU_MAX_ITEMS,ttl:DIALOGUE_EXPIRE_TIMEOUT}))}getChatInfo(A){const e=this.dialogueLru.get(A);if(this.dialogueLru.prune(),e){const{dialogue:t,sequence:o}=e,g=o.add(1),i={dialogue:t,sequence:g};return this.dialogueLru.set(A,{dialogue:t,sequence:g}),i}const t={dialogue:getRandomUInt64(),sequence:Long$2.fromNumber(1,!0)};return this.dialogueLru.set(A,t),t}}var AsyncAction$1={},Action$1={},Subscription$1={},isArray={};Object.defineProperty(isArray,\"__esModule\",{value:!0}),isArray.isArray=Array.isArray||function(A){return A&&\"number\"==typeof A.length};var isObject$1={};function isObject(A){return null!==A&&\"object\"==typeof A}Object.defineProperty(isObject$1,\"__esModule\",{value:!0}),isObject$1.isObject=isObject;var isFunction$1={};function isFunction(A){return\"function\"==typeof A}Object.defineProperty(isFunction$1,\"__esModule\",{value:!0}),isFunction$1.isFunction=isFunction;var UnsubscriptionError={};Object.defineProperty(UnsubscriptionError,\"__esModule\",{value:!0});var UnsubscriptionErrorImpl=function(){function A(A){return Error.call(this),this.message=A?A.length+\" errors occurred during unsubscription:\\n\"+A.map((function(A,e){return e+1+\") \"+A.toString()})).join(\"\\n  \"):\"\",this.name=\"UnsubscriptionError\",this.errors=A,this}return A.prototype=Object.create(Error.prototype),A}();UnsubscriptionError.UnsubscriptionError=UnsubscriptionErrorImpl,Object.defineProperty(Subscription$1,\"__esModule\",{value:!0});var isArray_1=isArray,isObject_1=isObject$1,isFunction_1=isFunction$1,UnsubscriptionError_1=UnsubscriptionError,Subscription=function(){function A(A){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,A&&(this._ctorUnsubscribe=!0,this._unsubscribe=A)}return A.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,o=t._parentOrParents,g=t._ctorUnsubscribe,i=t._unsubscribe,r=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof A)o.remove(this);else if(null!==o)for(var n=0;n<o.length;++n){o[n].remove(this)}if(isFunction_1.isFunction(i)){g&&(this._unsubscribe=void 0);try{i.call(this)}catch(A){e=A instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(A.errors):[A]}}if(isArray_1.isArray(r)){n=-1;for(var I=r.length;++n<I;){var s=r[n];if(isObject_1.isObject(s))try{s.unsubscribe()}catch(A){e=e||[],A instanceof UnsubscriptionError_1.UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(A.errors)):e.push(A)}}}if(e)throw new UnsubscriptionError_1.UnsubscriptionError(e)}},A.prototype.add=function(e){var t=e;if(!e)return A.EMPTY;switch(typeof e){case\"function\":t=new A(e);case\"object\":if(t===this||t.closed||\"function\"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof A)){var o=t;(t=new A)._subscriptions=[o]}break;default:throw new Error(\"unrecognized teardown \"+e+\" added to Subscription.\")}var g=t._parentOrParents;if(null===g)t._parentOrParents=this;else if(g instanceof A){if(g===this)return t;t._parentOrParents=[g,this]}else{if(-1!==g.indexOf(this))return t;g.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t},A.prototype.remove=function(A){var e=this._subscriptions;if(e){var t=e.indexOf(A);-1!==t&&e.splice(t,1)}},A.EMPTY=function(A){return A.closed=!0,A}(new A),A}();function flattenUnsubscriptionErrors(A){return A.reduce((function(A,e){return A.concat(e instanceof UnsubscriptionError_1.UnsubscriptionError?e.errors:e)}),[])}Subscription$1.Subscription=Subscription;var __extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var A=function(e,t){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])},A(e,t)};return function(e,t){function o(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(Action$1,\"__esModule\",{value:!0});var Subscription_1=Subscription$1,Action=function(A){function e(e,t){return A.call(this)||this}return __extends$2(e,A),e.prototype.schedule=function(A,e){return this},e}(Subscription_1.Subscription);Action$1.Action=Action;var __extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var A=function(e,t){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])},A(e,t)};return function(e,t){function o(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(AsyncAction$1,\"__esModule\",{value:!0});var Action_1=Action$1,AsyncAction=function(A){function e(e,t){var o=A.call(this,e,t)||this;return o.scheduler=e,o.work=t,o.pending=!1,o}return __extends$1(e,A),e.prototype.schedule=function(A,e){if(void 0===e&&(e=0),this.closed)return this;this.state=A;var t=this.id,o=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(o,t,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this},e.prototype.requestAsyncId=function(A,e,t){return void 0===t&&(t=0),setInterval(A.flush.bind(A,this),t)},e.prototype.recycleAsyncId=function(A,e,t){if(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(A,e){if(this.closed)return new Error(\"executing a cancelled action\");this.pending=!1;var t=this._execute(A,e);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(A,e){var t=!1,o=void 0;try{this.work(A)}catch(A){t=!0,o=!!A&&A||new Error(A)}if(t)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var A=this.id,e=this.scheduler,t=e.actions,o=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&t.splice(o,1),null!=A&&(this.id=this.recycleAsyncId(e,A,null)),this.delay=null},e}(Action_1.Action),AsyncAction_2=AsyncAction$1.AsyncAction=AsyncAction,AsyncScheduler$1={},Scheduler$1={};Object.defineProperty(Scheduler$1,\"__esModule\",{value:!0});var Scheduler=function(){function A(e,t){void 0===t&&(t=A.now),this.SchedulerAction=e,this.now=t}return A.prototype.schedule=function(A,e,t){return void 0===e&&(e=0),new this.SchedulerAction(this,A).schedule(t,e)},A.now=function(){return Date.now()},A}();Scheduler$1.Scheduler=Scheduler;var __extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var A=function(e,t){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])},A(e,t)};return function(e,t){function o(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(AsyncScheduler$1,\"__esModule\",{value:!0});var Scheduler_1=Scheduler$1,AsyncScheduler=function(A){function e(t,o){void 0===o&&(o=Scheduler_1.Scheduler.now);var g=A.call(this,t,(function(){return e.delegate&&e.delegate!==g?e.delegate.now():o()}))||this;return g.actions=[],g.active=!1,g.scheduled=void 0,g}return __extends(e,A),e.prototype.schedule=function(t,o,g){return void 0===o&&(o=0),e.delegate&&e.delegate!==this?e.delegate.schedule(t,o,g):A.prototype.schedule.call(this,t,o,g)},e.prototype.flush=function(A){var e=this.actions;if(this.active)e.push(A);else{var t;this.active=!0;do{if(t=A.execute(A.state,A.delay))break}while(A=e.shift());if(this.active=!1,t){for(;A=e.shift();)A.unsubscribe();throw t}}},e}(Scheduler_1.Scheduler),AsyncScheduler_2=AsyncScheduler$1.AsyncScheduler=AsyncScheduler;const blob=new Blob([\"var fakeIdToId = {};onmessage = function (event) {\\tvar data = event.data,\\t\\tname = data.name,\\t\\tfakeId = data.fakeId,\\t\\ttime;\\tif(data.hasOwnProperty('time')) {\\t\\ttime = data.time;\\t}\\tswitch (name) {\\t\\tcase 'setInterval':\\t\\t\\tfakeIdToId[fakeId] = setInterval(function () {\\t\\t\\t\\tpostMessage({fakeId: fakeId});\\t\\t\\t}, time);\\t\\t\\tbreak;\\t\\tcase 'clearInterval':\\t\\t\\tif (fakeIdToId.hasOwnProperty (fakeId)) {\\t\\t\\t\\tclearInterval(fakeIdToId[fakeId]);\\t\\t\\t\\tdelete fakeIdToId[fakeId];\\t\\t\\t}\\t\\t\\tbreak;\\t}}\"]),workerScript=window.URL.createObjectURL(blob),fakeIdToCallback={};let lastFakeId=0;const maxFakeId=2147483647;function getFakeId(){do{lastFakeId==maxFakeId?lastFakeId=0:lastFakeId++}while(fakeIdToCallback.hasOwnProperty(lastFakeId));return lastFakeId}const worker=new Worker(workerScript);function hackSetInterval(A,e){const t=getFakeId();return fakeIdToCallback[t]={callback:A,parameters:Array.prototype.slice.call(arguments,2)},worker.postMessage({name:\"setInterval\",fakeId:t,time:e}),t}function hackClearInterval(A){fakeIdToCallback.hasOwnProperty(A)&&(delete fakeIdToCallback[A],worker.postMessage({name:\"clearInterval\",fakeId:A}))}worker.onmessage=function(A){const e=A.data.fakeId;let t,o,g;fakeIdToCallback.hasOwnProperty(e)&&(t=fakeIdToCallback[e],g=t.callback,o=t.parameters,g.apply(window,o))};class HackAsyncAction extends AsyncAction_2{requestAsyncId(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return hackSetInterval(A.flush.bind(A,this),t)}recycleAsyncId(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==t&&this.delay===t&&!1===this.pending)return e;hackClearInterval(e)}}const getHackAsyncScheduler=()=>new AsyncScheduler_2(HackAsyncAction);class MetadataItem{constructor(A){var e,t,o,g,i;_defineProperty$1(this,\"key\",void 0),_defineProperty$1(this,\"value\",void 0),_defineProperty$1(this,\"revision\",void 0),_defineProperty$1(this,\"updateTs\",void 0),_defineProperty$1(this,\"authorUserId\",void 0),this.key=null!==(e=null==A?void 0:A.key)&&void 0!==e?e:\"\",this.value=null!==(t=null==A?void 0:A.value)&&void 0!==t?t:\"\",this.revision=null!==(o=null==A?void 0:A.revision)&&void 0!==o?o:-1,this.updateTs=null!==(g=null==A?void 0:A.updateTs)&&void 0!==g?g:0,this.authorUserId=null!==(i=null==A?void 0:A.authorUserId)&&void 0!==i?i:\"\"}setKey(A){if(\"string\"!=typeof A){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_KEY);throw new RtmInvalidArgumentError(OperationName.storage,[e],A)}this.key=A,this.key=A}getKey(){if(\"string\"==typeof this.key)return this.key;throw new RtmInternalError(\"Cannot get MetaDataItem key\")}setValue(A){if(\"string\"!=typeof A&&!isNull$1(null)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_VALUE);throw new RtmInvalidArgumentError(OperationName.storage,[e],A)}this.value=A}getValue(){if(\"string\"==typeof this.value||isNull$1(null))return this.value;throw new RtmInternalError(\"Cannot get MetaDataItem value\")}setRevision(A){if(\"number\"!=typeof A||A%1!=0){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_INVALID_REVISION);throw new RtmInvalidArgumentError(OperationName.storage,[e],A)}this.revision=A}getRevision(){if(\"number\"==typeof this.revision)return this.revision;throw new RtmInternalError(\"Cannot get MetaDataItem revision\")}getUpdateTs(){return this.updateTs}getAuthorUserId(){return this.authorUserId}}let StatePrefixEnum=function(A){return A.STATE_REVISION_KEY_PREFIX=\"_rev_\",A.STATE_TIMESTAMP_PREFIX=\"_t_\",A.STATE_AUTHOR_PREFIX=\"_m_\",A.STATE_REVISION=\"_rev\",A.STATE_INTERNAL_PREFIX=\"_\",A}({});function getRequestInfo(A,e){const t={[StatePrefixEnum.STATE_REVISION]:void 0!==e&&e>=0?e:void 0};for(let e=0;e<A.length;e++){const o=A[e];t[o.getKey()]=o.getValue(),t[\"\".concat(StatePrefixEnum.STATE_REVISION_KEY_PREFIX).concat(o.getKey())]=o.getRevision()>=0||-2===o.getRevision()?o.getRevision():void 0}return omitBy$1(t,isUndefined$1)}function covertStateStringToMetaData(A){const e=JSON.parse(A),t={majorRevision:e[StatePrefixEnum.STATE_REVISION],items:[]},o=omit$1(e,StatePrefixEnum.STATE_REVISION),g=Object.keys(o).filter((A=>\"_\"!==A[0]));return t.items=g.map((A=>new MetadataItem({key:A,value:o[A],revision:o[\"\".concat(StatePrefixEnum.STATE_REVISION_KEY_PREFIX).concat(A)],updateTs:o[\"\".concat(StatePrefixEnum.STATE_TIMESTAMP_PREFIX).concat(A)],authorUserId:o[\"\".concat(StatePrefixEnum.STATE_AUTHOR_PREFIX).concat(A)]}))),t}class LockSession extends EventBase{constructor(A,e,t,o,g,i){super(t,\"LockSession\"),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"instanceId\",void 0),_defineProperty$1(this,\"getLoginSockets\",void 0),_defineProperty$1(this,\"incGetSeq\",void 0),_defineProperty$1(this,\"genTimeoutError\",void 0),_defineProperty$1(this,\"locksWithRetryNoRes\",new Map),_defineProperty$1(this,\"notifyAcquireRetryReject\",new Subject),this.context=A,this.instanceId=e,this.getLoginSockets=o,this.incGetSeq=g,this.genTimeoutError=i}setLock(A,e,t){const o=OperationName.setLock,g=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===g.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(o,[e],A)}const i=this.incGetSeq();return g.forEach((o=>{var g;o.sendPacket(\"StateLockCreate\",{target:A,requestUuid:\"\".concat(i,\"_\").concat(this.instanceId),lock:e,ttl:Long$2.fromNumber(null!==(g=null==t?void 0:t.ttl)&&void 0!==g?g:getParameter(\"LOCK_TTL\")),flags:new Long$2(1048577,0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT),...g.map((A=>A.fromReceived(\"StateLockCreateResult\").pipe(first((A=>{let{requestUuid:e}=A;return\"\".concat(i,\"_\").concat(this.instanceId)===e})),map$1((A=>{let{code:e}=A;const{code:t,reason:g}=convertLockServerCodeToSdkCode(e);if(t!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(o,[g],t)}))))))}removeLock(A,e){const t=OperationName.removeLock,o=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===o.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(t,[e],A)}const g=this.incGetSeq();return o.forEach((t=>{t.sendPacket(\"StateLockDelete\",{target:A,lock:e,requestUuid:\"\".concat(g,\"_\").concat(this.instanceId),flags:new Long$2(1048577,0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT),...o.map((A=>A.fromReceived(\"StateLockDeleteResult\").pipe(first((A=>{let{requestUuid:e}=A;return\"\".concat(g,\"_\").concat(this.instanceId)===e})),map$1((A=>{let{code:e}=A;const{code:o,reason:g}=convertLockServerCodeToSdkCode(e);if(o!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(t,[g],o)}))))))}acquireLock(A,e,t){var o;const g=OperationName.acquireLock,i=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===i.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(g,[e],A)}const r=getPrefixLockName(e),{reqSeq:n,resolve:I,reject:s}=null!==(o=this.locksWithRetryNoRes.get(\"\".concat(A).concat(r)))&&void 0!==o?o:{},C=null!=I?I:null==t?void 0:t.resolve,E=null!=s?s:null==t?void 0:t.reject,a=null!=n?n:this.incGetSeq(),B=Long$2.fromNumber(Date.now());return this.context.addReportEvents(\"SyncLockAcquireEvent\",{code:0,target:A,lock:e,ttl:Long$2.fromNumber(0),flags:new Long$2(1048577,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:\"\",userid:this.context.uid,sid:this.context.sid,lockrev:Long$2.fromNumber(0),leaseid:this.context.uid,eventtype:\"Acquire\",sdktype:4,requestts:B,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),i.forEach((o=>{o.sendPacket(\"StateLockAcquire\",{target:A,requestUuid:\"\".concat(a,\"_\").concat(this.instanceId),lock:e,ttl:new Long$2(0,0,!0),flags:null!=t&&t.retry?new Long$2(1310721,0,!0):new Long$2(1048577,0,!0)})})),C&&E&&this.locksWithRetryNoRes.set(\"\".concat(A).concat(r),{reqSeq:a,resolve:C,reject:E}),null!=t&&t.retry&&!1===(null==t?void 0:t.checkTimeout)?race(...i.map((t=>t.fromReceived(\"StateLockAcquireResult\").pipe(first((A=>{let{requestUuid:e}=A;return\"\".concat(a,\"_\").concat(this.instanceId)===e})),tap((o=>{let{lock:g,code:i,target:r,lockRev:n}=o;this.log(\"acquire lock with lock(\".concat(e,\"), channel: \").concat(replaceRangeWithAsterisk(A),\", retry: \",!0,\", serverCode is \").concat(i));const{code:I,reason:s}=convertLockServerCodeToSdkCode(i);this.context.addReportEvents(\"SyncLockAcquireEvent\",{code:I,target:r,lock:e,ttl:Long$2.fromNumber(0),flags:new Long$2(1310721,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:t.ip,userid:this.context.uid,sid:this.context.sid,lockrev:n,leaseid:this.context.uid,eventtype:\"AcquireResult\",sdktype:4,requestts:B,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),I!==RTMErrorCode.RTM_ERROR_OK||g===e&&r===A||(this.log(\"RTM service Error: acquired unexpected lock on channel '%s', lock '%s', member '%s'\",replaceRangeWithAsterisk(A),replaceRangeWithAsterisk(g),replaceRangeWithAsterisk(this.context.uid||\"\")),this.releaseLock(r,g).toPromise())})),map$1((t=>{let{code:o,target:i,lock:r,lockRev:n,reason:I}=t;const{code:s,reason:C}=convertLockServerCodeToSdkCode(o);if(s!==RTMErrorCode.RTM_ERROR_OK){throw new RtmUnavailableError(g,[C],s)}return this.emit(\"acquireSuccess\",{prefixChannelName:A,lockName:e,revision:n.toNumber()}),{target:i,lock:r,lockRev:n,reason:I,code:o}})))))).pipe(takeUntil(this.notifyAcquireRetryReject.pipe(filter((e=>e===\"\".concat(A).concat(r))))),finalize((()=>{this.locksWithRetryNoRes.delete(\"\".concat(A).concat(r))}))):race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT),...i.map((t=>t.fromReceived(\"StateLockAcquireResult\").pipe(first((A=>{let{requestUuid:e}=A;return\"\".concat(a,\"_\").concat(this.instanceId)===e})),tap((o=>{let{lock:g,code:i,target:r,lockRev:n}=o;this.log(\"acquire lock with lock(\".concat(e,\"), channel: \").concat(replaceRangeWithAsterisk(A),\", retry: \",!1,\", serverCode is \").concat(i));const{code:I,reason:s}=convertLockServerCodeToSdkCode(i);this.context.addReportEvents(\"SyncLockAcquireEvent\",{code:I,target:r,lock:e,ttl:Long$2.fromNumber(0),flags:new Long$2(1048577,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:t.ip,userid:this.context.uid,sid:this.context.sid,lockrev:n,leaseid:this.context.uid,eventtype:\"AcquireResult\",sdktype:4,requestts:B,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),I!==RTMErrorCode.RTM_ERROR_OK||g===e&&r===A||(this.log(\"RTM service Error: acquired unexpected lock on channel '%s', lock '%s', member '%s'\",replaceRangeWithAsterisk(A),replaceRangeWithAsterisk(g),replaceRangeWithAsterisk(this.context.uid||\"\")),this.releaseLock(r,g).toPromise())})),map$1((t=>{let{code:o,target:i,lock:r,lockRev:n,reason:I}=t;const{code:s,reason:C}=convertLockServerCodeToSdkCode(o);if(s!==RTMErrorCode.RTM_ERROR_OK){throw new RtmUnavailableError(g,[C],s)}return this.emit(\"acquireSuccess\",{prefixChannelName:A,lockName:e,revision:n.toNumber()}),{target:i,lock:r,lockRev:n,reason:I,code:o}})))))).pipe(finalize((()=>{this.locksWithRetryNoRes.delete(\"\".concat(A).concat(r))})))}releaseLock(A,e){const t=OperationName.releaseLock,o=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===o.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(t,[e],A)}const g=this.incGetSeq(),i=Long$2.fromNumber(Date.now());return this.context.addReportEvents(\"SyncLockReleaseEvent\",{code:0,target:A,lock:e,flags:new Long$2(1048577,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:\"\",userid:this.context.uid,sid:this.context.sid,leaseid:this.context.uid,eventtype:\"Release\",sdktype:4,requestts:i,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),o.forEach((t=>{t.sendPacket(\"StateLockRelease\",{target:A,requestUuid:\"\".concat(g,\"_\").concat(this.instanceId),lock:e,flags:new Long$2(1048577,0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT),...o.map((o=>o.fromReceived(\"StateLockReleaseResult\").pipe(first((A=>{let{requestUuid:e}=A;return\"\".concat(g,\"_\").concat(this.instanceId)===e})),map$1((o=>{let{code:g}=o;const{code:r,reason:n}=convertLockServerCodeToSdkCode(g);if(this.context.addReportEvents(\"SyncLockReleaseEvent\",{code:r,target:A,lock:e,flags:new Long$2(1048577,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:\"\",userid:this.context.uid,sid:this.context.sid,leaseid:this.context.uid,eventtype:\"ReleaseResult\",sdktype:4,requestts:i,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),r!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(t,[n],r);this.emit(\"releaseSuccess\",{channelName:A,lockName:e})}))))))}revokeLock(A,e,t){const o=OperationName.revokeLock,g=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===g.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(o,[e],A)}const i=this.incGetSeq(),r=Long$2.fromNumber(Date.now());return this.context.addReportEvents(\"SyncLockDisableEvent\",{code:0,target:A,lock:e,flags:new Long$2(1048577,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:\"\",userid:this.context.uid,sid:this.context.sid,leaseid:t,eventtype:\"Disable\",sdktype:4,requestts:r,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),g.forEach((o=>{o.sendPacket(\"StateLockDisable\",{target:A,requestUuid:\"\".concat(i,\"_\").concat(this.instanceId),lock:e,userId:t,flags:new Long$2(1048577,0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT),...g.map((g=>g.fromReceived(\"StateLockDisableResult\").pipe(first((A=>{let{requestUuid:e}=A;return\"\".concat(i,\"_\").concat(this.instanceId)===e})),map$1((g=>{let{code:i}=g;const{code:n,reason:I}=convertLockServerCodeToSdkCode(i);if(this.context.addReportEvents(\"SyncLockDisableEvent\",{code:n,target:A,lock:e,flags:new Long$2(1048577,0,!0),uuid:\"\",lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(this.context.vid||\"0\"),ip:\"\",userid:this.context.uid,sid:this.context.sid,leaseid:t,eventtype:\"DisableResult\",sdktype:4,requestts:r,replyts:Long$2.fromNumber(Date.now()),usersid:this.context.sid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(o,[I],n)}))))))}getLocks(A){const e=OperationName.getLock,t=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===t.length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(e,[t],A)}const o=this.incGetSeq();return t.forEach((e=>{e.sendPacket(\"StateLockList\",{target:A,sequence:o,flags:new Long$2(1048577,0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT),...t.map((A=>A.fromReceived(\"StateLockListResult\").pipe(first((A=>{let{sequence:e}=A;return o.eq(e)})),map$1((A=>{let{code:t,lockStates:o}=A;const{code:g,reason:i}=convertLockServerCodeToSdkCode(t);if(g!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(e,[i],g);return o}))))))}clearLocksWithRetry(){this.locksWithRetryNoRes.forEach(((A,e)=>{const{reject:t}=A,{code:o,reason:g}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_ACQUIRE_FAILED);t(new RtmUnavailableError(OperationName.acquireLock,[g],o)),this.notifyAcquireRetryReject.next(e)})),this.locksWithRetryNoRes.clear()}}class StorageSession extends EventBase{constructor(A,e,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,g=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;super(t,\"StorageSession\"),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"instanceId\",void 0),_defineProperty$1(this,\"getLoginSockets\",void 0),_defineProperty$1(this,\"incGetSeq\",void 0),_defineProperty$1(this,\"genTimeoutError\",void 0),_defineProperty$1(this,\"operationsTimeCache\",{}),_defineProperty$1(this,\"userMetaEventInfos\",new Map),this.context=A,this.instanceId=e,this.userMetaEventInfos=o,this.getLoginSockets=g,this.incGetSeq=i,this.genTimeoutError=r}setChannelMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;const i=OperationName.setChannelMetadata,r=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===r.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(i,[e],A)}const n=JSON.stringify(getRequestInfo(A,e.majorRevision));validateMetaDataSize(i,n);const I=1<<17,s=this.incGetSeq(),C=Date.now(),E=null==e?void 0:e.majorRevision;return r.forEach((A=>{A.sendPacket(\"StateModify\",{sequence:s,target:t,requestUuid:\"\".concat(s,\"_\").concat(this.instanceId),value:n,lock:null!=o?o:\"\",lockRev:Long$2.fromNumber(null!=g?g:0),baseRevision:Long$2.fromNumber(E>=0?E:0),author:e.enableRecordUserId?this.context.uid:\"\",flags:e.enableRecordTs?new Long$2(1572865|(E>=0?I:0),0,!0):new Long$2(1048577|(E>=0?I:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...r.map((A=>A.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return s.eq(e)})),map$1((A=>{let{code:r}=A;const{code:n,reason:I}=convertMetadataServerCodeToSdkCode(r);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(C),replyts:Long$2.fromNumber(Date.now()),target:t,eventtype:\"Set\",revision:Long$2.fromNumber(e.majorRevision),uuid:\"\".concat(s,\"_\").concat(this.instanceId),sdktype:4,flags:e.enableRecordTs?new Long$2(524289,0,!0):new Long$2(1,0,!0),code:n,seq:s,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:null!=o?o:\"\",lockrev:Long$2.fromNumber(null!=g?g:0),subtarget:this.context.uid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(i,[I],n)}))))))}getChannelMetadata(A){const e=OperationName.getChannelMetadata,t=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===t.length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(e,[t],A)}const o=this.incGetSeq(),g=Date.now();return t.forEach((e=>{e.sendPacket(\"StateGet\",{target:A,subTarget:\"\",lock:\"\",sequence:o,flags:new Long$2(1048577,0,!0),lockRev:Long$2.fromNumber(0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...t.map((t=>t.fromReceived(\"StateGetResult\").pipe(first((A=>{let{sequence:e}=A;return o.eq(e)})),map$1((t=>{let{code:i,allStates:r}=t;const{code:n,reason:I}=convertMetadataServerCodeToSdkCode(i);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(g),replyts:Long$2.fromNumber(Date.now()),target:A,eventtype:\"Get\",revision:Long$2.fromNumber(0),uuid:\"\".concat(o,\"_\").concat(this.instanceId),sdktype:4,flags:new Long$2(1,0,!0),code:n,seq:o,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(e,[I],n);return r}))))))}removeChannelMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;const i=OperationName.removeChannelMetadata,r=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===r.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(i,[e],A)}const n=1<<17,I=null==e?void 0:e.majorRevision,s=this.incGetSeq(),C=JSON.stringify(getRequestInfo(cloneDeep$1(A).map((A=>(A.setValue(null),A))),e.majorRevision));validateMetaDataSize(i,C);const E=Date.now();return r.forEach((A=>{A.sendPacket(\"StateModify\",{sequence:s,target:t,requestUuid:\"\".concat(s,\"_\").concat(this.instanceId),lock:null!=o?o:\"\",lockRev:Long$2.fromNumber(null!=g?g:0),value:C,baseRevision:Long$2.fromNumber(I>=0?I:0),author:e.enableRecordUserId?this.context.uid:\"\",flags:e.enableRecordTs?new Long$2(1572865|(I>=0?n:0),0,!0):new Long$2(1048577|(I>=0?n:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...r.map((A=>A.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return s.eq(e)})),map$1((A=>{let{code:r}=A;const{code:n,reason:I}=convertMetadataServerCodeToSdkCode(r);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(E),replyts:Long$2.fromNumber(Date.now()),target:t,eventtype:\"Delete\",revision:Long$2.fromNumber(e.majorRevision),uuid:\"\".concat(s,\"_\").concat(this.instanceId),sdktype:4,flags:e.enableRecordTs?new Long$2(524289,0,!0):new Long$2(1,0,!0),code:n,seq:s,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:null!=o?o:\"\",lockrev:Long$2.fromNumber(null!=g?g:0),subtarget:this.context.uid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(i,[I],n)}))))))}clearChannelMetadata(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;const g=OperationName.removeChannelMetadata,i=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===i.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(g,[e],A)}const r=1<<17,n=null==A?void 0:A.majorRevision,I=this.incGetSeq(),s=Date.now();return i.forEach((g=>{g.sendPacket(\"StateSet\",{sequence:I,target:e,requestUuid:\"\".concat(I,\"_\").concat(this.instanceId),lock:null!=t?t:\"\",lockRev:Long$2.fromNumber(null!=o?o:0),value:JSON.stringify({}),baseRevision:Long$2.fromNumber(n>=0?n:0),author:A.enableRecordUserId?this.context.uid:\"\",flags:A.enableRecordTs?new Long$2(1638401|(n>=0?r:0),0,!0):new Long$2(1114113|(n>=0?r:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...i.map((i=>i.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return I.eq(e)})),map$1((i=>{let{code:r}=i;const{code:n,reason:C}=convertMetadataServerCodeToSdkCode(r);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(s),replyts:Long$2.fromNumber(Date.now()),target:e,eventtype:\"Clear\",revision:Long$2.fromNumber(A.majorRevision),uuid:\"\".concat(I,\"_\").concat(this.instanceId),sdktype:4,flags:A.enableRecordTs?new Long$2(589825,0,!0):new Long$2(65537,0,!0),code:n,seq:I,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:null!=t?t:\"\",lockrev:Long$2.fromNumber(null!=o?o:0),subtarget:this.context.uid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(g,[C],n)}))))))}updateChannelMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;const i=OperationName.updateChannelMetadata,r=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===r.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(i,[e],A)}const n=1<<17,I=null==e?void 0:e.majorRevision,s=this.incGetSeq(),C=JSON.stringify(getRequestInfo(cloneDeep$1(A).map((A=>(-1===A.getRevision()&&A.setRevision(-2),A))),e.majorRevision));validateMetaDataSize(i,C);const E=Date.now();return r.forEach((A=>{A.sendPacket(\"StateModify\",{sequence:s,target:t,requestUuid:\"\".concat(s,\"_\").concat(this.instanceId),lock:null!=o?o:\"\",lockRev:Long$2.fromNumber(null!=g?g:0),value:C,baseRevision:Long$2.fromNumber(I>=0?I:0),author:e.enableRecordUserId?this.context.uid:\"\",flags:e.enableRecordTs?new Long$2(1572865|(I>=0?n:0),0,!0):new Long$2(1048577|(I>=0?n:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...r.map((A=>A.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return s.eq(e)})),map$1((A=>{let{code:r}=A;const{code:n,reason:I}=convertMetadataServerCodeToSdkCode(r);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(E),replyts:Long$2.fromNumber(Date.now()),target:t,eventtype:\"Update\",revision:Long$2.fromNumber(e.majorRevision),uuid:\"\".concat(s,\"_\").concat(this.instanceId),sdktype:4,flags:e.enableRecordTs?new Long$2(524289,0,!0):new Long$2(1,0,!0),code:n,seq:s,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:null!=o?o:\"\",lockrev:Long$2.fromNumber(null!=g?g:0),subtarget:this.context.uid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(i,[I],n)}))))))}setUserMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0;const o=OperationName.setUserMetadata,g=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===g.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(o,[e],A)}const i=1<<19,r=1<<20,n=1<<17,I=this.incGetSeq(),s=Date.now(),C=null==e?void 0:e.majorRevision,E=JSON.stringify(getRequestInfo(A,e.majorRevision));return validateMetaDataSize(o,E),g.forEach((A=>{A.sendPacket(\"StateModify\",{sequence:I,target:null!=t?t:this.context.uid,requestUuid:\"\".concat(I,\"_\").concat(this.instanceId),value:E,lock:\"\",lockRev:Long$2.fromNumber(0),baseRevision:Long$2.fromNumber(C>=0?C:0),author:e.enableRecordUserId?this.context.uid:\"\",flags:e.enableRecordTs?new Long$2(1572864|(C>=0?n:0),0,!0):new Long$2(r|(C>=0?n:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...g.map((A=>A.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return I.eq(e)})),tap((A=>{let{code:t}=A;const{code:g,reason:r}=convertMetadataServerCodeToSdkCode(t);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(s),replyts:Long$2.fromNumber(Date.now()),target:this.context.uid,eventtype:\"Set\",revision:Long$2.fromNumber(e.majorRevision),uuid:\"\".concat(I,\"_\").concat(this.instanceId),sdktype:4,flags:e.enableRecordTs?new Long$2(i,0,!0):Long$2.fromNumber(0),code:g,seq:I,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"}),g!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(o,[r],g)}))))))}getUserMetadata(A){const e=OperationName.getUserMetadata,t=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===t.length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(e,[t],A)}const o=this.incGetSeq(),g=Date.now();return t.forEach((e=>{e.sendPacket(\"StateGet\",{target:A,subTarget:\"\",lock:\"\",sequence:o,flags:new Long$2(1048576,0,!0),lockRev:Long$2.fromNumber(0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...t.map((t=>t.fromReceived(\"StateGetResult\").pipe(first((A=>{let{sequence:e}=A;return o.eq(e)})),map$1((t=>{let{code:i,allStates:r}=t;const{code:n,reason:I}=convertMetadataServerCodeToSdkCode(i);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(g),replyts:Long$2.fromNumber(Date.now()),target:A,eventtype:\"Get\",revision:Long$2.fromNumber(0),uuid:\"\".concat(o,\"_\").concat(this.instanceId),sdktype:4,flags:Long$2.fromNumber(0),code:n,seq:o,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"}),n!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(e,[I],n);return r}))))))}removeUserMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0;const o=OperationName.removeUserMetadata,g=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===g.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(o,[e],A)}const i=1<<19,r=1<<20,n=1<<17,I=null==e?void 0:e.majorRevision,s=this.incGetSeq(),C=JSON.stringify(getRequestInfo(cloneDeep$1(A).map((A=>(A.setValue(null),A))),e.majorRevision));validateMetaDataSize(o,C);const E=Date.now();return g.forEach((A=>{A.sendPacket(\"StateModify\",{sequence:s,target:null!=t?t:this.context.uid,requestUuid:\"\".concat(s,\"_\").concat(this.instanceId),lock:\"\",lockRev:Long$2.fromNumber(0),value:C,baseRevision:Long$2.fromNumber(I>=0?I:0),author:e.enableRecordUserId?this.context.uid:\"\",flags:e.enableRecordTs?new Long$2(1572864|(I>=0?n:0),0,!0):new Long$2(r|(I>=0?n:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...g.map((A=>A.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return s.eq(e)})),tap((A=>{let{code:t}=A;const{code:g,reason:r}=convertMetadataServerCodeToSdkCode(t);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(E),replyts:Long$2.fromNumber(Date.now()),target:this.context.uid,eventtype:\"Delete\",revision:Long$2.fromNumber(e.majorRevision),uuid:\"\".concat(s,\"_\").concat(this.instanceId),sdktype:4,flags:e.enableRecordTs?new Long$2(i,0,!0):Long$2.fromNumber(0),code:g,seq:s,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"}),g!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(o,[r],g)}))))))}clearUserMetadata(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},e=arguments.length>1?arguments[1]:void 0;const t=OperationName.removeUserMetadata,o=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===o.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(t,[e],A)}const g=1<<19,i=1<<17,r=null==A?void 0:A.majorRevision,n=this.incGetSeq(),I=Date.now();return o.forEach((t=>{t.sendPacket(\"StateSet\",{sequence:n,target:null!=e?e:this.context.uid,requestUuid:\"\".concat(n,\"_\").concat(this.instanceId),lock:\"\",lockRev:Long$2.fromNumber(0),value:JSON.stringify({}),baseRevision:Long$2.fromNumber(r>=0?r:0),author:A.enableRecordUserId?this.context.uid:\"\",flags:A.enableRecordTs?new Long$2(1638400|(r>=0?i:0),0,!0):new Long$2(1114112|(r>=0?i:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...o.map((e=>e.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return n.eq(e)})),tap((e=>{let{code:o}=e;const{code:i,reason:r}=convertMetadataServerCodeToSdkCode(o);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(I),replyts:Long$2.fromNumber(Date.now()),target:this.context.uid,eventtype:\"Clear\",revision:Long$2.fromNumber(null==A?void 0:A.majorRevision),uuid:\"\".concat(n,\"_\").concat(this.instanceId),sdktype:4,flags:A.enableRecordTs?new Long$2(g,0,!0):Long$2.fromNumber(0),code:i,seq:n,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"}),i!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(t,[r],i)}))))))}updateUserMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0;const o=OperationName.updateUserMetadata,g=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===g.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(o,[e],A)}const i=1<<19,r=1<<20,n=1<<17,I=null==e?void 0:e.majorRevision,s=this.incGetSeq(),C=JSON.stringify(getRequestInfo(cloneDeep$1(A).map((A=>(-1===A.getRevision()&&A.setRevision(-2),A))),e.majorRevision));validateMetaDataSize(o,C);const E=Date.now();return g.forEach((A=>{A.sendPacket(\"StateModify\",{sequence:s,target:null!=t?t:this.context.uid,requestUuid:\"\".concat(s,\"_\").concat(this.instanceId),lock:\"\",lockRev:Long$2.fromNumber(0),value:C,baseRevision:Long$2.fromNumber(I>=0?I:0),author:e.enableRecordUserId?this.context.uid:\"\",flags:e.enableRecordTs?new Long$2(1572864|(I>=0?n:0),0,!0):new Long$2(r|(I>=0?n:0),0,!0)})})),race(this.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...g.map((A=>A.fromReceived(\"StateRequestResult\").pipe(first((A=>{let{sequence:e}=A;return s.eq(e)})),tap((A=>{let{code:t}=A;const{code:g,reason:r}=convertMetadataServerCodeToSdkCode(t);if(this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(E),replyts:Long$2.fromNumber(Date.now()),target:this.context.uid,eventtype:\"Update\",revision:Long$2.fromNumber(e.majorRevision),uuid:\"\".concat(s,\"_\").concat(this.instanceId),sdktype:4,flags:e.enableRecordTs?new Long$2(i,0,!0):Long$2.fromNumber(0),code:g,seq:s,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"}),g!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(o,[r],g)}))))))}unsubscribeUserMetadata(A){const e=OperationName.unsubscribeUserMetadata,t=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===t.length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(e,[t],A)}const o=this.incGetSeq(),g=Date.now();t.forEach((e=>{e.sendPacket(\"StateUnsubscribe\",{sequence:o,target:A,subTarget:\"\",flags:Long$2.fromNumber(0)})})),this.userMetaEventInfos.delete(A),this.context.addReportEvents(\"SyncSubscribeEvent\",{lts:Long$2.fromNumber(Date.now()),userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,target:A,requestts:Long$2.fromNumber(g),replyts:Long$2.fromNumber(Date.now()),eventtype:\"UnSubscribe\",sdktype:4,flags:Long$2.fromNumber(0),code:0,seq:o,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},subtarget:this.context.uid})}}const{inflate:inflate,deflate:deflate}=UZIP;class RegistrarSession extends EventBase{static sendMessageAck(A,e){const t=new MessageOption(A.options);(t.isInvitation()||t.isPeerMessage())&&e.sendPacket(\"Ack\",{code:0,dialogue:A.dialogue,instance:A.instance,sequence:A.sequence})}constructor(A,e,t,o,g,i,r,n,I,s){super(o,\"Session\"),_defineProperty$1(this,\"loginOperation\",OperationName.login),_defineProperty$1(this,\"chatManager\",void 0),_defineProperty$1(this,\"msgDedupLru\",new LRUCache(void 0,{maxlen:MSG_DEDUP_MAX_LEN})),_defineProperty$1(this,\"startTime\",Date.now()),_defineProperty$1(this,\"seq\",Long$2.fromNumber(1,!0)),_defineProperty$1(this,\"userJoinOptions\",new UserJoinOptions(!1)),_defineProperty$1(this,\"seqSentStatuses\",[!1,!1]),_defineProperty$1(this,\"dialogueSequenceLru\",new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS})),_defineProperty$1(this,\"loggedOut\",!1),_defineProperty$1(this,\"curLoginSockets\",[void 0,void 0]),_defineProperty$1(this,\"loginSocketSubs\",[{channels:new Map,receivers:[],lockSubs:new Map,userMetadataSubs:new Map,metadataSubs:new Map},{channels:new Map,receivers:[],lockSubs:new Map,userMetadataSubs:new Map,metadataSubs:new Map}]),_defineProperty$1(this,\"lastLoginSockets\",[new ReplaySubject(1),new ReplaySubject(1)]),_defineProperty$1(this,\"dialPendingMsgSubjectMap\",new Map),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"connection\",void 0),_defineProperty$1(this,\"instanceId\",void 0),_defineProperty$1(this,\"lastPingTime\",void 0),_defineProperty$1(this,\"chanelStringMessageReport\",void 0),_defineProperty$1(this,\"chanelRawMessageReport\",void 0),_defineProperty$1(this,\"p2pSMsgNoOfflineReport\",void 0),_defineProperty$1(this,\"p2pRMsgNoOfflineReport\",void 0),_defineProperty$1(this,\"lockSnapshotLastTime\",new Map),_defineProperty$1(this,\"lockEventInfos\",new Map),_defineProperty$1(this,\"channelMetaEventInfos\",new Map),_defineProperty$1(this,\"userMetaEventInfos\",new Map),_defineProperty$1(this,\"initEncryption\",!1),_defineProperty$1(this,\"key\",\"\"),_defineProperty$1(this,\"iv\",\"\"),_defineProperty$1(this,\"keyLength\",0),_defineProperty$1(this,\"operationsTimeCache\",{}),_defineProperty$1(this,\"lockSession\",void 0),_defineProperty$1(this,\"storageSession\",void 0),_defineProperty$1(this,\"updateLastSubOrJoinOptionsCache\",void 0),_defineProperty$1(this,\"getLastSubscribeOrJoinOptions\",void 0),_defineProperty$1(this,\"manualShakeHand\",void 0),_defineProperty$1(this,\"sendTick\",void 0),_defineProperty$1(this,\"initSync\",void 0),_defineProperty$1(this,\"loginSubject$\",new Subject),_defineProperty$1(this,\"initRegConnSuccess$\",new Subject),_defineProperty$1(this,\"emitUserJoined\",!1),_defineProperty$1(this,\"firstInitSyncSeq\",void 0),_defineProperty$1(this,\"networkOnlineSubject\",new Subject),_defineProperty$1(this,\"connSyncIndex\",[0,0]),_defineProperty$1(this,\"registerSocketsFailureListener\",(()=>{this.connection.once(\"socketsFailure\",(()=>{this.log(\"registrar: socketsFailure, creating a new connection, start reLogin...\"),defer((()=>{this.connection.removeAllListeners(),this.connection=new Connection(this.context,this.logger,!0),this.emit(\"login-request\");return this.loginHandler(!0)})).pipe(retryWhen((A=>A.pipe(tap((A=>{let e=!1;if(isTimeout(A)&&!this.connection.cancelLogin&&(e=!0),this.logError(A),this.log(\"reLogin need retry: %s, cancel login: %s\",e,this.connection.cancelLogin),e)return delay(getParameter(\"RECONNECTING_AP_INTERVAL\"));throw A}))))),takeUntil(this.loginSubject$)).subscribe((()=>{this.log(\"new connection connected\")}))}))})),this.context=A,this.context.startTime=this.startTime,this.connection=e,this.instanceId=t,this.chatManager=new ChatManager(o),this.lastPingTime=[0,0],this.setMaxListeners(512),this.log(\"The instanceId is %s\",this.instanceId.toString()),this.lockSession=new LockSession(A,t,o,this.getLoginSockets.bind(this),this.incGetSeq.bind(this),RegistrarSession.genTimeoutError.bind(this)),this.lockSession.on(\"releaseSuccess\",(A=>{this.emit(\"releaseSuccess\",A)})),this.lockSession.on(\"acquireSuccess\",(A=>{this.emit(\"acquireSuccess\",A)})),this.connection.on(\"syncTicketUpdated\",(A=>{let{ticket:e,vid:t}=A;this.emit(\"syncTicketUpdated\",{ticket:e,vid:t})})),this.storageSession=new StorageSession(A,t,o,this.userMetaEventInfos,this.getLoginSockets.bind(this),this.incGetSeq.bind(this),RegistrarSession.genTimeoutError.bind(this)),this.updateLastSubOrJoinOptionsCache=g,this.getLastSubscribeOrJoinOptions=i,this.manualShakeHand=r,this.sendTick=n,this.initSync=I,null!=s&&s.key&&(this.initEncryption=s.initEncryption,this.key=s.key,this.iv=s.iv,this.keyLength=s.keyLength),this.chanelStringMessageReport=new MessageReport(A,o,RtmMessageCategoryEnum.ChannelSMsg),this.chanelRawMessageReport=new MessageReport(A,o,RtmMessageCategoryEnum.ChannelRMsg),this.p2pSMsgNoOfflineReport=new MessageReport(A,o,RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag),this.p2pRMsgNoOfflineReport=new MessageReport(A,o,RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag)}getVirtualSyncSocket(){return this.getLoginSockets().filter((A=>A.env===this.context.connSyncEnv))}loginHandler(){let A=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.context.connSyncEnv=void 0,this.loggedOut&&A){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_ABORTED);throw new RtmInvalidStatusError(this.loginOperation,[e+\"logout when login retrying\"],A)}A&&this.registerSocketsFailureListener(),this.connection.initConnection();const{seq:e}=this,t=this.getSocketLoginObservables(this.connection.lastOpenSockets,e);let o;return this.initLoginsSocketsReceivers(t,A,!1),this.initKeepAliveSender(),this.initLoginReceiver(),this.context.linkIntervals=[...LINK_INTERVALS],this.log(\"start login, log for debug, login - timeout\"),merge(...t,fromEvent(this.connection,\"connectionInitFailure\").pipe(tap((A=>{if(isRtmError(A)||isTimeout(A))throw A;const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_ABORTED);throw new RtmUnavailableError(this.loginOperation,[t],e)}))),fromEvent(this,\"login-cancel\").pipe(tap((()=>{throw this.context.syncConnecting=!1,this.connection.handleCancelLogin()}))),this.networkOnlineSubject.pipe(tap((()=>{this.log(\"network change, will retry connect in 2s\");const A=new TimeoutError;throw A.name=\"network-change\",this.context.linkIntervals=[...LINK_INTERVALS],A})))).pipe(timeout(LOGIN_RESP_TIMEOUT),take(1),concatMap((async e=>{try{await timeoutPromise(this.connSyncInLogin(e,A),DEFAULT_RPC_TIMEOUT_TIME,\"init sync timeout\",RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT,!0)}catch(A){if(this.connection.cancelLogin)throw A;if(!getParameter(\"DECOUPLE_SYNC\")){if(e.forceReconnect(),isTimeout(A))throw new TimeoutError;throw A}}return A&&this.emitUserJoined&&(this.emit(\"userJoined\",e.env),this.emitUserJoined=!1),e})),catchError((e=>(e instanceof TimeoutError&&(e&&\"network-change\"===e.name?this.emit(\"net-change-abort-reconn\"):(this.warn(\"client \".concat(A?\"re-\":\"\",\"login timeout\")),this.emit(\"login-timeout\",A))),e&&e.code===RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED&&(this.warn(\"token expired when login, isRetrying: %s\",A),A&&this.emit(\"tokenExpired\"),this.connection.apClient.apFinish$.next(void 0),this.connection.stopLogin()),this.clearSockets(0,A),throwError(e)))),retryWhen((e=>e.pipe(switchMap(((e,g)=>{if(this.connection.apClient.apFinish$.next(void 0),o=this.getFallBackTimer(),this.connection.cancelLogin&&!A)throw this.connection.handleCancelLogin();if(e instanceof TimeoutError)return merge(fromEvent(this,\"login-cancel\").pipe(tap((()=>{throw this.context.syncConnecting=!1,this.connection.handleCancelLogin()}))),race(interval(o),this.networkOnlineSubject.pipe(tap((()=>{this.log(\"network is online, will retry connect now\")})))).pipe(take(1),takeUntil(this.connection.apClient.apFinish$),tap((()=>{if(this.connection.cancelLogin)throw this.connection.handleCancelLogin();this.emit(\"login-request\"),this.initLoginsSocketsReceivers(t,A,!0),this.initKeepAliveSender(),this.initLoginReceiver(),this.connection.subKeeperSubject(),this.connection.initConnection(),this.log(\"retryWhen---interval\")}))));throw e})),catchError((A=>throwError(A)))))),takeUntil(this.loginSubject$),tap((()=>{A||this.registerSocketsFailureListener()})),tap((()=>{this.manualShakeHand()})),finalize((()=>{A||this.connection.apClient.apFinish$.next(void 0),this.loginSubject$.next(void 0),this.connection.endLogin$.next(void 0)})))}getFallBackTimer(){return 1e3*(this.context.linkIntervals.length>=1?this.context.linkIntervals.splice(0,1)[0]:SUSPENDED_TIME_INTERVAL)}async connSyncInLogin(A,e){const t=void 0===this.context.connSyncEnv&&!1===this.context.syncConnecting;t&&(this.context.syncConnecting=!0),this.info(\"ENV_%d(%s): First reg logged response received, need connect sync: %s, connSyncEnv: %d\",A.env,A.name,t,this.context.connSyncEnv);const o=getParameter(\"DECOUPLE_SYNC\");if(t){try{await timeoutPromise(this.requestFirstSyncInit(A),2e3,\"syncInitAck timeout\",RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT,!0)}catch(e){throw this.warn(\"ENV_%d(%s): First reg connect sync failed\",A.env,A.name),this.context.syncConnecting=!1,this.warn(e),o&&!this.connection.cancelLogin&&this.handleSyncDisconnected(A),e}try{this.context.connSyncEnv=A.env,this.log(\"ENV_\".concat(A.env,\" - \").concat(A.name,\": reg connect sync done by concatMap when \").concat(e?\"reLogging\":\"logging\",\", start logging sync..., syncEnv: \").concat(this.context.connSyncEnv)),await this.initSync(),this.log(\"ENV_\".concat(A.env,\" - \").concat(A.name,\": logged sync when \").concat(e?\"reLogging\":\"logging\",\".\"))}catch(e){throw this.warn(\"First init sync error, \".concat(e)),this.context.connSyncEnv=void 0,this.warn(\"change connSyncEnv: %d to undefined in first sync init error\",A.env),this.emit(\"syncDisconnected\"),o&&!this.connection.cancelLogin&&this.handleSyncDisconnected(A),e}finally{this.context.syncConnecting=!1}}}async logoutHandler(A){this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),this.connection.stopLogin(),this.incGetSeq();const e=this.getLoginSockets(),t=e.map((e=>(e.sendPacket(\"UserQuit2\",{flags:A?new Long$2(1,0,!0):Long$2.fromNumber(0)}),this.connection.waitClosing(e))));this.clearSockets(LOGOUT_SOCKET_CLOSE_TIMEOUT);const o=e.map((A=>A.env));return[0,1].filter((A=>!o.includes(A))).forEach((A=>{this.connection.closeSocket(A,0)})),this.lockSession.clearLocksWithRetry(),merge(...t).toPromise()}async requestChannelJoin(A){const e=OperationName.subscribe;if(0===this.getLoginSockets().length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(e,[t],A)}const t=fromEvent(this,\"channelLeft\").pipe(filter((e=>A===e)),take(1)),o=this.incGetSeq(),g=this.lastLoginSockets.map((g=>g.pipe(switchMap(((t,g)=>{0!==g&&this.incSeqIfNeeded(t.env);const i=0===g?o:this.seq;return t.sendPacket(\"GroupEnter\",{account:A,seq:i}),t.fromReceived(\"GroupReply\").pipe(first((A=>{let{seq:e}=A;return i.eq(e)})),tap((t=>{let{code:o}=t;if(0!==o){const{code:t,reason:g}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED);throw this.warn(\"channel join failed, server code is %d\",o),this.updateLastSubOrJoinOptionsCache(A,\"withMessage\",!1),new RtmUnavailableError(e,[g],{code:t,serverCode:o})}this.updateLastSubOrJoinOptionsCache(A,\"withMessage\",!0)})))})),takeUntil(t),share())));g.forEach(((e,t)=>{const o=()=>{this.loginSocketSubs[t].channels.delete(A)};this.loginSocketSubs[t].channels.set(A,e.subscribe({error:o,complete:o}))})),await merge(...g).pipe(take(1),timeout(COMMON_REQUEST_TIMEOUT),catchError((A=>{if(isRtmError(A))return throwError(A);!(A instanceof TimeoutError)&&this.logError(A);const{code:t,reason:o}=getErrorInfoByCode(A instanceof TimeoutError?RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_TIMEOUT:RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_FAILED);return throwError(new RtmUnavailableError(e,[o],t))}))).toPromise()}requestChannelLeave(A){this.getLoginSockets().forEach((e=>{e.sendPacket(\"GroupLeave2\",{account:A,flags:Long$2.fromNumber(0)})})),this.updateLastSubOrJoinOptionsCache(A,\"withMessage\",!1)}requestUpdateEdgeTicket(A){const e=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===e.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(OperationName.login,[e],A)}const t=this.incGetSeq();return e.forEach((e=>{e.sendPacket(\"UserRenewTokenReq\",{instance:this.instanceId,seq:t,account:this.context.uid,ticket:A})})),race(RegistrarSession.genTimeoutError(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT),...e.map((A=>A.fromReceived(\"UserRenewTokenResp\").pipe(first((A=>{let{seq:e}=A;return t.eq(e)})),tap((A=>{let{code:e}=A;if(0!==e){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_TOKEN);throw new RtmUnavailableError(OperationName.login,[t],{serverCode:e,code:A})}}))))))}requestGetChannelMetadata(A){return this.storageSession.getChannelMetadata(A)}requestGetLocalMetaData(A){return this.storageSession.getUserMetadata(A)}requestUpdateChannelMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;return this.storageSession.updateChannelMetadata(A,e,t,o,g)}requestDeleteChannelMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;return this.storageSession.removeChannelMetadata(A,e,t,o,g)}requestSetChannelMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;return this.storageSession.setChannelMetadata(A,e,t,o,g)}requestClearChannelMetadata(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return this.storageSession.clearChannelMetadata(A,e,t,o)}requestUpdateLocalMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0;return this.storageSession.updateUserMetadata(A,e,t)}requestDeleteLocalMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0;return this.storageSession.removeUserMetadata(A,e,t)}requestSetLocalMetadata(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},t=arguments.length>2?arguments[2]:void 0;return this.storageSession.setUserMetadata(A,e,t)}requestClearLocalMetadata(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{majorRevision:-1,enableRecordTs:!1,enableRecordUserId:!1},e=arguments.length>1?arguments[1]:void 0;return this.storageSession.clearUserMetadata(A,e)}async requestSubscribeUserMetadata(A,e){const t=OperationName.subscribeUserMetadata,o=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===o.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(t,[e],A)}const g=fromEvent(this,\"unSubUserMetadata\").pipe(filter((e=>A===e)),take(1)),i=this.incGetSeq(),r=Date.now(),n=this.lastLoginSockets.map((e=>e.pipe(switchMap(((e,o)=>{0!==o&&this.incSeqIfNeeded(e.env);const g=0===o?i:this.seq;return e.sendPacket(\"StateSubscribe\",{sequence:g,target:A,subTarget:\"\",flags:Long$2.fromNumber(0)}),e.fromReceived(\"StateSubscribeResult\").pipe(first((A=>{let{sequence:e}=A;return g.eq(e)})),tap((e=>{let{code:o}=e;const{code:g,reason:n}=convertServerCodeToSdkCodeForSub(o);if(g!==RTMErrorCode.RTM_ERROR_OK)throw new RtmUnavailableError(t,[n],g);this.context.userMetadataSub.add(A),this.context.addReportEvents(\"SyncSubscribeEvent\",{lts:Long$2.fromNumber(Date.now()),userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,target:A,requestts:Long$2.fromNumber(r),replyts:Long$2.fromNumber(Date.now()),eventtype:\"Subscribe\",sdktype:4,flags:Long$2.fromNumber(0),code:0,seq:i,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},subtarget:this.context.uid})})))})),takeUntil(g),share())));n.forEach(((e,t)=>{const o=()=>{this.loginSocketSubs[t].userMetadataSubs.delete(A)};this.loginSocketSubs[t].userMetadataSubs.set(A,e.subscribe({error:o,complete:o}))})),await merge(...n).pipe(take(1),timeout(COMMON_REQUEST_TIMEOUT),catchError((A=>(A instanceof TimeoutError&&this.warn(\"subscribe user metadata timeout\"),throwError(A))))).toPromise()}requestUnsubscribeUserMetadata(A){this.storageSession.unsubscribeUserMetadata(A),this.emit(\"unSubUserMetadata\",A)}requestUnsubscribeChannelMetadata(A){const e=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===e.length)return;const t=this.incGetSeq();e.forEach((e=>{e.sendPacket(\"StateUnsubscribe\",{sequence:t,target:A,subTarget:\"\",flags:new Long$2(1,0,!0)})})),this.channelMetaEventInfos.delete(A),this.context.addReportEvents(\"SyncSubscribeEvent\",{lts:Long$2.fromNumber(Date.now()),userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,target:A,requestts:Long$2.fromNumber(Date.now()),replyts:Long$2.fromNumber(Date.now()),eventtype:\"UnSubscribe\",sdktype:4,flags:new Long$2(1,0,!0),code:0,seq:t,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},subtarget:this.context.uid}),this.updateLastSubOrJoinOptionsCache(A,\"withMetadata\",!1)}async requestSubscribeChannelMetadata(A,e){const t=OperationName.subscribe,o=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===o.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(t,[e],A)}const g=fromEvent(this,\"unSubChannelMetadata\").pipe(filter((e=>A===e)),take(1)),i=this.incGetSeq(),r=Date.now(),n=this.lastLoginSockets.map((e=>e.pipe(switchMap(((e,t)=>{0!==t&&this.incSeqIfNeeded(e.env);const o=0===t?i:this.seq;return e.sendPacket(\"StateSubscribe\",{sequence:o,target:A,subTarget:\"\",flags:new Long$2(1,0,!0)}),e.fromReceived(\"StateSubscribeResult\").pipe(first((A=>{let{sequence:e}=A;return o.eq(e)})),tap((e=>{let{code:t}=e;const{code:o,reason:g}=convertServerCodeToSdkCodeForSub(t);this.context.addReportEvents(\"SyncSubscribeEvent\",{lts:Long$2.fromNumber(Date.now()),userid:this.context.uid,vid:Long$2.fromString(this.context.vid||\"0\"),sid:this.context.sid,usersid:this.context.sid,target:A,requestts:Long$2.fromNumber(r),replyts:Long$2.fromNumber(Date.now()),eventtype:\"Subscribe\",sdktype:4,flags:Long$2.fromNumber(0),code:o,seq:i,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},subtarget:this.context.uid}),o!==RTMErrorCode.RTM_ERROR_OK?(this.updateLastSubOrJoinOptionsCache(A,\"withMetadata\",!1),this.warn(\"Subscribe channel metadata failure. The response code from the RTM service is \".concat(t))):this.updateLastSubOrJoinOptionsCache(A,\"withMetadata\",!0)})))})),takeUntil(g),share())));n.forEach(((e,t)=>{const o=()=>{this.loginSocketSubs[t].metadataSubs.delete(A)};this.loginSocketSubs[t].metadataSubs.set(A,e.subscribe({error:o,complete:o}))})),await merge(...n).pipe(take(1),timeout(COMMON_REQUEST_TIMEOUT),catchError((A=>(A instanceof TimeoutError&&this.warn(\"subscribe channel metadata timeout\"),throwError(A))))).toPromise()}requestUnsubscribeLock(A){const e=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===e.length)return;const t=this.incGetSeq();e.forEach((e=>{e.sendPacket(\"StateLockUnsubscribe\",{sequence:t,target:A,flags:new Long$2(1048577,0,!0)})})),this.lockSnapshotLastTime.delete(A),this.updateLastSubOrJoinOptionsCache(A,\"withLock\",!1)}async requestSubscribeLock(A){const e=OperationName.subscribe,t=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===t.length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(e,[t],A)}const o=fromEvent(this,\"unSubChannelLock\").pipe(filter((e=>A===e)),take(1),tap((A=>{this.lockSnapshotLastTime.delete(A)}))),g=this.incGetSeq(),i=this.lastLoginSockets.map((e=>e.pipe(switchMap(((e,t)=>{0!==t&&this.incSeqIfNeeded(e.env);const o=0===t?g:this.seq;return e.sendPacket(\"StateLockSubscribe\",{sequence:o,target:A,flags:new Long$2(1048577,0,!0)}),e.fromReceived(\"StateLockSubscribeResult\").pipe(first((A=>{let{sequence:e}=A;return o.eq(e)})),tap((e=>{let{code:t}=e;const{code:o,reason:g}=convertServerCodeToSdkCodeForSub(t);o!==RTMErrorCode.RTM_ERROR_OK?(this.updateLastSubOrJoinOptionsCache(A,\"withLock\",!1),this.warn(\"Subscribe lock failure. The response code from the RTM service is \".concat(t))):this.updateLastSubOrJoinOptionsCache(A,\"withLock\",!0)})))})),takeUntil(o),share())));i.forEach(((e,t)=>{const o=()=>{this.loginSocketSubs[t].lockSubs.delete(A)};this.loginSocketSubs[t].lockSubs.set(A,e.subscribe({error:o,complete:o}))})),await merge(...i).pipe(take(1),timeout(COMMON_REQUEST_TIMEOUT),catchError((A=>(A instanceof TimeoutError&&this.warn(\"subscribe channel lock timeout\"),throwError(A))))).toPromise()}requestSetLock(A,e,t){return this.lockSession.setLock(A,e,t)}requestRemoveLock(A,e){return this.lockSession.removeLock(A,e)}requestAcquireLock(A,e,t){return this.lockSession.acquireLock(A,e,t)}requestReleaseLock(A,e){return this.lockSession.releaseLock(A,e)}requestDisableLock(A,e,t){return this.lockSession.revokeLock(A,e,t)}requestGetLock(A){return this.lockSession.getLocks(A)}requestGetMessages(A){let{channelName:e,channelType:t,startTime:o,endTime:g,count:i}=A;const r=OperationName.getMessages,n=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===n.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(r,[e],A)}const I=this.incGetSeq(),s=I+\"_\"+this.instanceId;return n.forEach((A=>{A.sendPacket(\"StateHistoryGet2\",{dst:e,uuid:s,startTime:Long$2.fromNumber(o),endTime:Long$2.fromNumber(g),count:i,flags:new Long$2(\"MESSAGE\"===t?1:0,0,!0)})})),race(RegistrarSession.genTimeoutError(RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_TIMEOUT),...n.map((A=>A.fromReceived(\"StateHistoryGetResult2\").pipe(first((A=>{let{uuid:e}=A;return s===e})),map$1((A=>{if(A.code!==RTMErrorCode.RTM_ERROR_OK){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_FAILED);throw new RtmUnavailableError(r,[e],A)}{const{messages:e,flags:t,oldestTime:o,more:g}=A,i=e.map((A=>{var e;const{options:t,payload:o,src:g,ms:i,details:r}=A,n=new MessageOption(t),I=n.isZlibCompressed(),s=n.isEncryption(),C=null!==(e=n.getEncrytionComplement())&&void 0!==e?e:0,E=n.isTextMessage(),{customType:a=new Uint8Array}=r,B=(new TextDecoder).decode(a);if(E){const A=I?inflate(concatenateUint8Array(o,Uint8Array.of(0,0,0,0))):o,e=A.byteLength-Long$2.fromValue(C).toNumber();return{message:(new TextDecoder).decode(s&&this.initEncryption?decrypt(A,this.key,this.iv,this.keyLength).slice(0,e):A),customType:B,messageType:MessageType$1.STRING,publisher:g,timestamp:null==i?void 0:i.toNumber()}}{const A=I?inflate(o):o,e=A.byteLength-Long$2.fromValue(C).toNumber();return{message:s&&this.initEncryption?decrypt(A,this.key,this.iv,this.keyLength).slice(0,e):A,customType:B,messageType:MessageType$1.BINARY,publisher:g,timestamp:null==i?void 0:i.toNumber()}}}));return{messageList:i,newStart:g?o.toNumber():0}}}))))))}async sendRawMessage(A,e,t){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const n=OperationName.publish,I=Date.now(),s=o?RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag:RtmMessageCategoryEnum.ChannelRMsg;if(!(isValidId(t)&&A instanceof Uint8Array&&\"string\"==typeof e)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);throw new RtmInvalidArgumentError(n,[e],A)}if(A.byteLength+new Blob([e]).size+new Blob([null!=i?i:\"\"]).size>TEXT_MESSAGE_MAX_TEXT_BYTES){this.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"sentcount\"}),this.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"invalidmessagecount\"});const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION);throw new RtmLimitExceededError(n,[e],A)}const C=this.initEncryption;let E=A;if(C)try{E=encrypt(A,this.key,this.iv,this.keyLength)}catch(A){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_ENCRYPT_MESSAGE_FAILED);throw new RtmUnavailableError(n,[t],e)}const a=!getParameter(\"DISABLE_MESSAGE_COMPRESSION\")&&E.byteLength>=MESSAGE_MIN_COMPRESSION_LEN,{dialogue:B,sequence:Q}=this.chatManager.getChatInfo(o?K_P2P_MESSAGE_PREFIX+t:t),c=this.instanceId;this.log('A%s %s raw message is sending to %s: \"'.concat(c,\"-\").concat(B,\"#\").concat(Q,'\"'),a?\" compressed\":\"\",o?\"peer\":\"channel\",replaceRangeWithAsterisk(t));const{code:l}=await from(this.sendMessageToRetry((g=>({MiscMap:_objectSpread2({description:(new TextEncoder).encode(e)},i?{customType:(new TextEncoder).encode(i)}:{}),sequence:Q,dialogue:B,instance:c,dst:t,ms:Long$2.fromNumber(Date.now(),!0),options:new MessageOption({IterationNumber:g,CompressionMethod:a?\"Zlib\":\"Uncompressed\",MessageType:o?\"PeerRawMessage\":\"ChannelRawMessage\",ToCache:!1,ToArchive:!1,enableEncryption:C,encrytionComplement:E.byteLength-A.byteLength,kHistory:r?1:0}).toLong(),payload:a?deflate(E):E,src:this.context.uid})),!0,o)).pipe(timeout(void 0===g?MESSAGE_SEND_TIMEOUT:g),catchError((A=>(A instanceof TimeoutError&&(this.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"sentcount\"}),this.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"timeoutcount\"}),this.warn(\"Send message timeout\")),throwError(A))))).toPromise(),u=0===l;return this.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"sentcount\"}),u&&(this.emit(\"messageCount\",{messageCategory:s,type:\"common\",key:\"successcount\"}),this.emit(\"messageCount\",{messageCategory:s,type:o?\"peer\":\"recipient\",delay:getElapse(I).toNumber()})),0!==l&&this.throwPeerMsgFailed(n,l),{hasPeerReceived:u}}throwPeerMsgFailed(A,e){const{code:t,reason:o}=getErrorInfoByCode(e===K_ACK_PEER_OFFLINE?RTMErrorCode.RTM_ERROR_CHANNEL_RECEIVER_OFFLINE:RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);throw new RtmUnavailableError(A,[o],t)}async sendTextMessage(A,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const r=OperationName.publish,n=Date.now(),I=t?RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag:RtmMessageCategoryEnum.ChannelSMsg;if(!isValidId(e)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);throw new RtmInvalidArgumentError(r,[e],A)}if(new Blob([A]).size+new Blob([null!=g?g:\"\"]).size>TEXT_MESSAGE_MAX_TEXT_BYTES){this.emit(\"messageCount\",{messageCategory:I,type:\"common\",key:\"sentcount\"}),this.emit(\"messageCount\",{messageCategory:I,type:\"common\",key:\"invalidmessagecount\"});const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION);throw new RtmLimitExceededError(r,[e],A)}const s=this.initEncryption;let C=(new TextEncoder).encode(A);if(s)try{C=encrypt(A,this.key,this.iv,this.keyLength)}catch(A){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_ENCRYPT_MESSAGE_FAILED);throw new RtmUnavailableError(r,[t],e)}const E=!getParameter(\"DISABLE_MESSAGE_COMPRESSION\")&&(s?new Blob([(new TextDecoder).decode(C)]).size:new Blob([A]).size)>=MESSAGE_MIN_COMPRESSION_LEN,{dialogue:a,sequence:B}=this.chatManager.getChatInfo(t?K_P2P_MESSAGE_PREFIX+e:e),Q=this.instanceId;this.log('A%s %s message is sending to %s: \"'.concat(Q,\"-\").concat(a,\"#\").concat(B,'\"'),E?\" compressed\":\"\",t?\"peer\":\"channel\",replaceRangeWithAsterisk(e));const{code:c}=await from(this.sendMessageToRetry((o=>({MiscMap:_objectSpread2({},g?{customType:(new TextEncoder).encode(g)}:{}),sequence:B,dialogue:a,instance:Q,dst:e,ms:Long$2.fromNumber(Date.now(),!0),options:new MessageOption({IterationNumber:o,CompressionMethod:E?\"Zlib\":\"Uncompressed\",MessageType:t?\"PeerTextMessage\":\"ChannelTextMessage\",ToCache:!1,ToArchive:!1,enableEncryption:s,encrytionComplement:C.byteLength-(new TextEncoder).encode(A).byteLength,kHistory:i?1:0}).toLong(),payload:E?deflate(C):C,src:this.context.uid})),!0,t)).pipe(timeout(void 0===o?MESSAGE_SEND_TIMEOUT:o),catchError((A=>(A instanceof TimeoutError&&(this.emit(\"messageCount\",{messageCategory:I,type:\"common\",key:\"sentcount\"}),this.emit(\"messageCount\",{messageCategory:I,type:\"common\",key:\"timeoutcount\"}),this.warn(\"Send message timeout\")),throwError(A))))).toPromise(),l=0===c;return this.emit(\"messageCount\",{messageCategory:I,type:\"common\",key:\"sentcount\"}),l&&(this.emit(\"messageCount\",{messageCategory:I,type:\"common\",key:\"successcount\"}),this.emit(\"messageCount\",{messageCategory:I,type:t?\"peer\":\"recipient\",delay:getElapse(n).toNumber()})),0!==c&&this.throwPeerMsgFailed(r,c),{hasPeerReceived:l}}cleanLoginSubs(A,e){Object.entries(this.loginSocketSubs[A]).forEach((A=>{let[t,o]=A;[\"channels\",\"lockSubs\",\"userMetadataSubs\",\"metadataSubs\"].includes(t)&&e||(Array.isArray(o)||o instanceof Map?o.forEach((A=>A.unsubscribe())):o&&o.unsubscribe())})),this.loginSocketSubs[A]={channels:e?this.loginSocketSubs[A].channels:new Map,lockSubs:e?this.loginSocketSubs[A].lockSubs:new Map,userMetadataSubs:e?this.loginSocketSubs[A].userMetadataSubs:new Map,metadataSubs:e?this.loginSocketSubs[A].metadataSubs:new Map,receivers:[]}}async sendMessageToRetry(A,e,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.log(\"Attempt to send the message \".concat(e?\" with retrying, %o\":\"without retrying\"),{retryTimes:o});const g=this.getLoginSockets();if(!1===this.context.hasLoggedIn&&0===g.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(OperationName.publish,[e],A)}const i=A(o);g.forEach((A=>{A.sendPacket(\"Message\",i)}));const{dialogue:r,sequence:n,instance:I}=i,s=g.map((A=>A.fromReceived(\"Ack\").pipe(filter((A=>r.eq(A.dialogue)&&n.eq(A.sequence)&&I.eq(A.instance)&&A.code!==K_ACK_MISS)))));try{const{code:A}=await merge(...s).pipe(timeout(MESSAGE_RETRY_TIMEOUT+(t?500:0)),catchError((A=>(isTimeout(A)&&this.warn(\"Message send timeout, retry times %d\",o),throwError(A)))),take(1)).toPromise();return this.log(\"The message has been acked, %o\",{code:A}),{code:A,retryTimes:o}}catch(g){if(g instanceof TimeoutError&&e)return this.sendMessageToRetry(A,!1,t,o+1);throw g}}initLoginsSocketsReceivers(A,e,t){const o=Date.now();A.forEach(((A,g)=>{const{login:i}=this.loginSocketSubs[g];void 0===i||t||i.unsubscribe(),this.loginSocketSubs[g].login=A.pipe(tap((A=>{this.log(\"Env_%s: acquired socket %s\",g,A.name);const i=Date.now();this.context.addReportEvents(\"Link\",{ackedServerIp:A.address,destServerIp:A.ip,ec:0,sc:0,elapse:getElapse(this.startTime),lts:Long$2.fromNumber(i),responseTime:i-o,sid:getSid(this.instanceId),userId:this.context.uid,version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),linktype:4,linkflag:Long$2.fromNumber(0),linkenv:A.env}),this.emitUserJoined=!0,e&&this.connection.apClient.apFinish$.next(void 0),t&&this.initRegConnSuccess$.next(void 0)}))).subscribe(this.lastLoginSockets[g])}))}initKeepAliveSender(){this.lastLoginSockets.map((A=>A.pipe(switchMap((A=>{var e;return null===(e=this.loginSocketSubs[A.env].pingTimer)||void 0===e||e.unsubscribe(),A.loggedIn&&this.startPingTimer(A,!0),EMPTY}))))).forEach(((A,e)=>{const{keepAlive:t}=this.loginSocketSubs[e];void 0!==t&&t.unsubscribe(),this.loginSocketSubs[e].keepAlive=A.subscribe({error:()=>{}})}))}startPingTimer(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=of(A).pipe(delay(e?0:this.context.heartbeatInterval,isMobile$1()?void 0:getHackAsyncScheduler()),tap((()=>{!A.isActiveClose&&this.sendPing(A),t.unsubscribe()}))).subscribe();this.loginSocketSubs[A.env].pingTimer=t}initLoginReceiver(){race(...this.lastLoginSockets.map((A=>A.pipe(switchMap((A=>A.fromReceived(\"UserTicketNearlyExpire\").pipe(throttleTime(5e3),tap(this.onUserTicketNearlyExpire(A))))))))).subscribe({error:A=>{this.logError(\"TokenPrivilegeWillExpireReceivers error: %o\",A)}});const A=fromEvent(this,\"messageCount\"),e=A.pipe(filter((A=>A.messageCategory===RtmMessageCategoryEnum.ChannelSMsg)));e.subscribe((A=>this.updateMessageCount(A))),e.pipe(bufferTime(6e3)).subscribe((A=>{A.length&&this.chanelStringMessageReport.report()})),merge(of(void 0),e).pipe(switchMap((()=>interval(36e5)))).subscribe((()=>{this.chanelStringMessageReport.report()}));const t=A.pipe(filter((A=>A.messageCategory===RtmMessageCategoryEnum.ChannelRMsg)));t.subscribe((A=>this.updateMessageCount(A))),t.pipe(bufferTime(6e3)).subscribe((A=>{A.length&&this.chanelRawMessageReport.report()})),merge(of(void 0),t).pipe(switchMap((()=>interval(36e5)))).subscribe((()=>{this.chanelRawMessageReport.report()}));const o=A.pipe(filter((A=>A.messageCategory===RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag)));o.subscribe((A=>this.updateMessageCount(A))),o.pipe(bufferTime(6e3)).subscribe((A=>{A.length&&this.p2pSMsgNoOfflineReport.report()})),merge(of(void 0),o).pipe(switchMap((()=>interval(36e5)))).subscribe((()=>{this.p2pSMsgNoOfflineReport.report()}));const g=A.pipe(filter((A=>A.messageCategory===RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag)));g.subscribe((A=>this.updateMessageCount(A))),g.pipe(bufferTime(6e3)).subscribe((A=>{A.length&&this.p2pRMsgNoOfflineReport.report()})),merge(of(void 0),g).pipe(switchMap((()=>interval(36e5)))).subscribe((()=>{this.p2pSMsgNoOfflineReport.report()}));this.lastLoginSockets.map((A=>A.pipe(switchMap((A=>merge(fromEvent(A,\"reconnect\").pipe(tap(this.onSocketReconnect(A))),A.fromReceived(\"Message\").pipe(tap(this.onMessage(A))),A.fromReceived(\"StateLockSubscribeEvent\").pipe(tap(this.onLockEvent())),A.fromReceived(\"StateUpdate\").pipe(tap(this.onStateUpdate())),A.fromReceived(\"Pong3\").pipe(tap(this.onPong())),A.fromReceived(\"UserDrop\").pipe(tap(this.onUserDrop(A))),A.fromReceived(\"GroupDrop\").pipe(tap(this.onGroupDrop())),A.fromReceived(\"StateLockUpdate\").pipe(tap(this.onLockUpdate())),A.fromReceived(\"SyncFin\").pipe(tap(this.onSyncFin(A))),A.fromReceived(\"SyncInitAck\").pipe(tap(this.onSyncInitAck(A))),A.receivedSyncPacket.pipe(tap(this.onSyncPacket()))).pipe(mapTo(void 0))))))).forEach(((A,e)=>{this.loginSocketSubs[e].receivers.forEach((A=>A.unsubscribe())),this.loginSocketSubs[e].receivers.push(A.subscribe({error:A=>{this.logError(\"socketReceiver error: %o\",A)},complete:()=>{this.log(\"socketReceiver complete: %o\")}}))}))}handleConfig(A){if(void 0!==typeof A[\"presence.interval\"]&&isUintString(A[\"presence.interval\"])){const e=Number(A[\"presence.interval\"]);e>K_PRESENCE_INTERVAL_MAX?A[\"presence.interval\"]=String(K_PRESENCE_INTERVAL_MAX):e<K_PRESENCE_INTERVAL_MIN&&(A[\"presence.interval\"]=String(K_PRESENCE_INTERVAL_MIN))}else A[\"presence.interval\"]=String(K_PRESENCE_INTERVAL_DEFAULT);if(void 0!==typeof A[\"presence.occupancy\"]&&isUintString(A[\"presence.occupancy\"])){const e=Number(A[\"presence.occupancy\"]);e>K_INTERVAL_THRESHOLD_MAX?A[\"presence.occupancy\"]=String(K_INTERVAL_THRESHOLD_MAX):e<K_INTERVAL_THRESHOLD_MIN&&(A[\"presence.occupancy\"]=String(K_INTERVAL_THRESHOLD_MIN))}else A[\"presence.occupancy\"]=String(K_DEFAULT_INTERVAL_THRESHOLD);if(void 0!==typeof A[\"presence.debounce\"]&&isUintString(A[\"presence.debounce\"])){const e=Number(A[\"presence.debounce\"]);e>K_INTERVAL_THRESHOLD_MAX?A[\"presence.debounce\"]=String(K_INTERVAL_THRESHOLD_MAX):e<K_INTERVAL_THRESHOLD_MIN&&(A[\"presence.debounce\"]=String(K_INTERVAL_THRESHOLD_MIN))}else A[\"presence.debounce\"]=String(K_DEBOUNCE_DEFAULT)}requestSocketLogin(A,e,t,o){const g=defer((()=>{if(this.emit(\"login-request\"),this.userJoinOptions=new UserJoinOptions(e),this.log(\"ENV_%d(%s):socket send UserJoin2, socket.isActiveClose: %s, isRejoin: %s\",A.env,A.name,A.isActiveClose,e),this.loggedOut)return this.log(\"close other socket, ignore this login request\"),void A.close();A.isActiveClose||A.sendPacket(\"UserJoin2\",{account:this.context.uid,instance:this.instanceId,opt:this.userJoinOptions.toLong(),seq:t,ticket:A.ticket,detail:{[UserJoinDetailKey.kDetailKeyVendorConfig]:new Uint8Array,[UserJoinDetailKey.kDetailKeyKeepAliveInterval]:(new TextEncoder).encode(String(this.context.heartbeatInterval/1e3))}})})),i=A.fromReceived(\"UserResp2\").pipe(first((A=>t.eq(A.seq))),tap((t=>{if(this.loggedOut)return this.log(\"ENV_%d(%s): other socket is closing, will close this socket, ignore this resp\",A.env,A.name),EMPTY;const{code:o}=t;if(0!==o){let A=String(o);this.clearSockets();let t=RTMErrorCode.RTM_ERROR_LOGIN_REJECTED;switch(o){case RegServerErrorCode.kCertificateInvalid:case RegServerErrorCode.kTicketParseError:case RegServerErrorCode.kTicketIllegalLength:case RegServerErrorCode.kTicketNotAuth:case RegServerErrorCode.kTicketUnknownVersion:t=RTMErrorCode.RTM_ERROR_INVALID_TOKEN;break;case RegServerErrorCode.kTimestampExpired:this.warn(\"token expired when received userResp, isReJoin: %s\",e),e&&this.emit(\"tokenExpired\"),this.connection.apClient.apFinish$.next(void 0),this.connection.stopLogin(),t=RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED;break;case RegServerErrorCode.kUserRejectedByConsoleConfig:t=RTMErrorCode.RTM_ERROR_LOGIN_NOT_AUTHORIZED,A=\"NOT_ENABLE_RTM\";case RegServerErrorCode.kFail:case RegServerErrorCode.kServiceTooHeavy:}this.logError(\"Connected to gateway success but the Rtm server rejected login, server code is %s\",A);const{code:g,reason:i}=getErrorInfoByCode(t);throw new RtmUnavailableError(this.loginOperation,[i+\" userResp error, detail: \".concat(A)],g)}try{let A;const{detail:{1:e}}=t;A=JSON.parse((new TextDecoder).decode(e)),this.handleConfig(A);const o={};for(const e in A)\"_\"!==e[0]&&(o[e]=A[e]);this.log(\"user console config: %o\",o),this.emit(\"appConfig\",A)}catch(A){this.logError(\"parse user console config error: %o\",A)}var g;(A.attemptsSinceLastError=0,A.loggedIn=!0,e)&&(null===(g=this.loginSocketSubs[A.env].pingTimer)||void 0===g||g.unsubscribe(),this.startPingTimer(A,!0));return this.log(\"ENV_%d logged in\",A.env),A})),mapTo(A),timeout(6e3));return concat(g,i).pipe(filter((A=>void 0!==A)),tap((()=>{this.log(\"ENV_%d(%s): Login response received\",o,A.name),this.curLoginSockets[o]=A})),concatMap((async A=>{const t=void 0===this.context.connSyncEnv&&!1===this.context.syncConnecting&&e;if(t&&(this.context.syncConnecting=!0),e&&this.info(\"ENV_%d(%s): reg logged response received when reconnecting, need connect sync: %s, connSyncEnv: %d\",A.env,A.name,t,this.context.connSyncEnv),t){this.emitUserJoined=!1;try{await timeoutPromise(this.requestFirstSyncInit(A),2e3,\"syncInitAck timeout\",RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT),this.context.connSyncEnv=A.env,this.log(\"ENV_\".concat(A.env,\" - \").concat(A.name,\": reg connect sync done by concatMap when sdk reconnecting, start logging sync..., connSyncEnv: \").concat(this.context.connSyncEnv)),await this.initSync(),this.log(\"ENV_\".concat(A.env,\" - \").concat(A.name,\": logged sync when sdk reconnecting.\"))}catch(e){if(this.warn(\"First sync init error when sdk reconnecting, \".concat(e)),this.context.connSyncEnv=void 0,this.warn(\"change connSyncEnv %d to undefined in requestSocketLogin\",A.env),this.emit(\"syncDisconnected\"),!getParameter(\"DECOUPLE_SYNC\"))throw A.forceReconnect(),new TimeoutError;this.handleSyncDisconnected(A)}finally{this.context.syncConnecting=!1,this.emitUserJoined=!0}}return e&&this.emitUserJoined&&(this.emit(\"userJoined\",A.env),this.emitUserJoined=!1),A})),catchError((t=>{var o;return t instanceof TimeoutError&&null!==(o=this.curLoginSockets[0===A.env?1:0])&&void 0!==o&&o.isActiveClose?(this.log(\"ENV_%d(%s): other socket is closing, will close this socket\",A.env,A.name),EMPTY):t instanceof TimeoutError?(!e&&this.warn(\"ENV_%d(%s): sdk connect sync or reg response timeout, rejoin: %s\",A.env,A.name,e),t.name=\"loginRespTimeout\",setTimeout((()=>{A.emit(\"connectionFailure\"),A.close()}),SOCKET_RETRY_INTERVAL),of(A).pipe(delay(6e3))):(this.emit(\"banEdgeIP\",A.ip),throwError(t))})))}getSocketLoginObservables(A,e){return A.map(((A,t)=>A.pipe(switchMap(((A,o)=>(this.incSeqIfNeeded(A.env),this.requestSocketLogin(A,0!==o,0===o?e:this.seq,t)))),share())))}incSeqIfNeeded(A){if(![0,1].includes(A))throw new CommonError({INVALID_ENV:\"The env argument is not 0 or 1\"});this.seqSentStatuses[A]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[A]=!0}incGetSeq(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}getLoginSockets(){return compact$1(this.curLoginSockets)}emitMessage(A,e){var t;const{options:o,payload:g,src:i,dst:r,instance:n,dialogue:I,sequence:s,ms:C,MiscMap:E={}}=A;this.dialogueSequenceLru.set(I.toString(),s);const a=\"\".concat(n,\"-\").concat(I,\"#\").concat(s);if(this.msgDedupLru.has(a))return void this.warn(\"Env_%d: Messages out-of-order or not start with 1: %s\",e,a);this.msgDedupLru.set(a,void 0);const B=new MessageOption(o);this.lastLoginSockets.forEach((async e=>{const t=await e.pipe(take(1)).toPromise();RegistrarSession.sendMessageAck(A,t)}));const Q=B.isZlibCompressed(),c=B.isEncryption(),l=null!==(t=B.getEncrytionComplement())&&void 0!==t?t:0,{customType:u=new Uint8Array}=E,h=(new TextDecoder).decode(u);if(!c||this.key)if(c||!this.key){if(B.isTextMessage()){const A=B.isPeerTextMessage(),e=Q?inflate(concatenateUint8Array(g,Uint8Array.of(0,0,0,0))):g,t=e.byteLength-Long$2.fromValue(l).toNumber(),o=(new TextDecoder).decode(c?decrypt(e,this.key,this.iv,this.keyLength).slice(0,t):e);this.info(\"Received a %s %s text message from %s to %s, %s\",Q?\" compressed\":\"\",A?\"peer\":\"channel\",replaceRangeWithAsterisk(i),replaceRangeWithAsterisk(r),a),A?this.emit(\"messageCount\",{messageCategory:RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag,type:\"common\",key:\"receivedcount\"}):this.emit(\"messageCount\",{messageCategory:RtmMessageCategoryEnum.ChannelSMsg,type:\"common\",key:\"receivedcount\"}),this.emit(\"channelTextMessage\",{channelId:r,memberId:i,text:o,properties:{serverReceivedTs:C.toNumber()},customType:h,channelType:A?\"USER\":\"MESSAGE\"})}else if(B.isRawMessage()){const A=B.isRawPeerMessage(),{description:e}=E,t=void 0===e?\"\":decodeUint8ArrayToString(e),o=Q?inflate(g):g,n=o.byteLength-Long$2.fromValue(l).toNumber(),I=c?decrypt(o,this.key,this.iv,this.keyLength).slice(0,n):o;this.info(\"Received a %s %s raw message from %s to %s, %s\",Q?\" compressed\":\"\",A?\"peer\":\"channel\",replaceRangeWithAsterisk(i),replaceRangeWithAsterisk(r),a),A?this.emit(\"messageCount\",{messageCategory:RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag,type:\"common\",key:\"receivedcount\"}):this.emit(\"messageCount\",{messageCategory:RtmMessageCategoryEnum.ChannelRMsg,type:\"common\",key:\"receivedcount\"}),this.emit(\"channelRawMessage\",{desc:t,raw:I,channelId:r,memberId:i,properties:{serverReceivedTs:C.toNumber()},customType:h,channelType:A?\"USER\":\"MESSAGE\"})}}else this.warn(\"Received a message without encryption but the key is ready, %s\",a);else this.warn(\"Received a message with encryption but the key is not ready yet, %s\",a)}onSocketReconnect(A){return()=>{const e=[0,1].filter((e=>e!==A.env))[0],t=this.connection.curOpenSockets[e],o=this.context.connSyncEnv===A.env;this.log(\"ENV_\".concat(A.env,\"(\").concat(A.name,\"): received a reconnect event from \").concat(A.address,\", otherSocketState: \").concat(null==t?void 0:t.loggedIn,\", syncEnv: \").concat(o)),o&&this.handleSyncDisconnected(A),t&&!t.loggedIn&&(this.log(\"ENV_\".concat(A.env,\"(\").concat(A.name,\"): will emit connectionLost\")),!o&&this.handleSyncDisconnected(t),this.emit(\"connectionLost\"),this.emitUserJoined=!0)}}onUserTicketNearlyExpire(A){return e=>{const{ticket:t}=e;t===A.ticket&&this.emit(\"tokenPrivilegeWillExpire\")}}onGroupDrop(){return A=>{let{account:e}=A;this.context.addReportEvents(\"ChnLeave\",{cname:e,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.startTime),errCode:RTMErrorCode.RTM_ERROR_CHANNEL_IN_ERROR_STATE,sid:getSid(this.instanceId),userId:this.context.uid}),[0,1].forEach((A=>this.loginSocketSubs[A].channels.delete(e))),this.logError(\"the user is kicked out of the channel: \".concat(e))}}onStateUpdate(){return A=>{let{flags:e,allStates:t,target:o}=A;const g=covertStateStringToMetaData(t);var i,r;(!e.and(new Long$2(0,2,!0)).isZero()&&this.log(\"metadata is cleared.\"),e.and(new Long$2(1,0,!0)).isZero())?g.majorRevision>=(null!==(i=this.userMetaEventInfos.get(o))&&void 0!==i?i:0)&&this.emit(\"userMetaDataUpdated\",{uid:o,data:g}):g.majorRevision>=(null!==(r=this.channelMetaEventInfos.get(o))&&void 0!==r?r:0)&&this.emit(\"channelMetaDataUpdated\",{channelId:o,data:g})}}onLockUpdate(){return A=>{const{target:e,flags:t,code:o,lock:g}=A,{channelName:i,channelType:r}=getChannelDetailByName(e);if(this.context.addReportEvents(\"SyncLockUpdateEvent\",{vid:Long$2.fromValue(this.context.vid||\"0\"),code:o,sid:this.context.sid,lts:Long$2.fromNumber(Date.now()),userid:this.context.uid,replyts:Long$2.fromNumber(Date.now()),target:e,eventtype:o===MetadataRequestErrorCode.kLockWatching?\"Watch\":\"Expire\",sdktype:4,flags:t,lock:g,usersid:this.context.sid,ip:\"\",sdkip:\"\"}),o===MetadataRequestErrorCode.kLockWatching)this.emit(\"lockWatching\",{prefixChannelName:e,lockName:g});else if(o===MetadataRequestErrorCode.kLockExpired){const A={channelType:r,channelName:i,eventType:\"EXPIRED\",lockName:g,ttl:0,publisher:\"\",snapshot:[],owner:\"\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emit(\"lockExpired\",A)}}}async requestFirstSyncInit(A){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=this.incGetSeq();return e&&(this.firstInitSyncSeq=t),this.log(\"ENV_\".concat(A.env,\" - \").concat(A.name,\": request \").concat(e?\"first\":\"\",\" sync init\")),A.sendPacket(getParameter(\"DECOUPLE_SYNC\")?\"SyncInit2\":\"SyncInit\",{seq:t}),A.fromReceived(\"SyncInitAck\").pipe(first((A=>A.seq.eq(t))),map$1((async e=>{if(0!==e.code)throw this.context.connSyncEnv=void 0,this.warn(\"change connSyncEnv %d to undefined in requestFirstSyncInit\",A.env),new Error(\"reg connect sync error, code is \".concat(e.code));this.log(\"reg connect sync succeed, change sync connected\"),this.emit(\"syncConnected\")}))).toPromise()}onSyncFin(A){return e=>{let{code:t}=e;this.warn(\"ENV_%d: reg and sync conn is fin, connSyncEnv is %d, code is %d, %s\",A.env,this.context.connSyncEnv,t,A.name),isNil$1(this.context.connSyncEnv)||this.context.connSyncEnv!==A.env||this.handleSyncDisconnected(A)}}onSyncInitAck(A){return async e=>{let{code:t,seq:o}=e;if(this.firstInitSyncSeq&&o.eq(this.firstInitSyncSeq))this.log(\"first sync init, ignore.\");else if(0!==t)this.warn(\"reg connect sync error, code: \".concat(t)),getParameter(\"DECOUPLE_SYNC\")||(A.emit(\"connectionFailure\"),A.close()),this.context.connSyncEnv=void 0,this.warn(\"change connSyncEnv %d to undefined in onSyncInitAck error\",A.env);else{this.context.connSyncEnv=A.env,this.log(\"sync init ack success, will emit sync connected, connSyncEnv: %d\",this.context.connSyncEnv),this.emit(\"syncConnected\");try{await this.initSync(),this.emitUserJoined&&(this.emit(\"userJoined\",A.env),this.emitUserJoined=!1)}catch(e){this.log(\"received syncInitAck and sync init error:\",e),getParameter(\"DECOUPLE_SYNC\")?this.handleSyncDisconnected(A):A.forceReconnect()}}}}setSyncInitTimer(A){this.connSyncIndex.some((A=>1===A))||(this.connSyncIndex[A.env]=1,timeoutPromise(this.requestFirstSyncInit(A,!1),5e3,\"syncInitAck timeout\",RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT,!0).catch((e=>{this.warn(\"Request sync init error: %o\",e),isNil$1(this.context.connSyncEnv)&&!A.isActiveClose&&setTimeout((()=>this.handleSyncDisconnected(A)),isTimeout(e)?0:5e3)})).finally((()=>{this.connSyncIndex[A.env]=0})))}handleSyncDisconnected(A){if(!isNil$1(this.context.connSyncEnv)&&this.context.connSyncEnv!==A.env)return void this.warn(\"connSyncEnv is not equal to socket env\");this.emit(\"syncDisconnected\"),this.context.connSyncEnv=void 0;const e=[0,1].filter((e=>e!==A.env))[0],t=this.connection.curOpenSockets[e];t&&t.loggedIn?(this.info(\"use another env to connect sync, env: %d(%s)\",t.env,t.name),this.setSyncInitTimer(t)):!getParameter(\"DECOUPLE_SYNC\")||null!=t&&t.loggedIn||(this.info(\"use same env to connect sync, env: %d(%s)\",A.env,A.name),this.setSyncInitTimer(A))}onSyncPacket(){return A=>{this.emit(\"syncPacket\",A)}}onLockEvent(){return A=>{var e,t,o;let{target:g,lockStates:i,eventType:r}=A;if(!(null!==(e=null===(t=this.getLastSubscribeOrJoinOptions().get(g))||void 0===t?void 0:t.withLock)&&void 0!==e&&e))return;const{channelName:n,channelType:I}=getChannelDetailByName(g);if(r===LockEventType.LockUnknown)return void this.log(\"RTM service Error: lockEvent type is 0 on channel '%s', channelType 's%', member '%s'\",replaceRangeWithAsterisk(n),I,replaceRangeWithAsterisk(this.context.uid||\"\"));const s=getUTCTimeBaseREG(this.context.offsetTime),C=(new Date).getTime();if(r===LockEventType.LockSnapshot&&0===i.length){var E;if(this.lockSnapshotLastTime.has(g)||C-(null!==(E=this.lockSnapshotLastTime.get(g))&&void 0!==E?E:0)<=LAST_PONG_RECEIVED_TS_FIELD_NUMBER)return;const A={channelType:I,channelName:n,eventType:\"SNAPSHOT\",lockName:\"\",ttl:0,publisher:\"\",snapshot:[],owner:\"\",timestamp:s};return this.log(\"received snapshot lockEvent is empty on channel(\".concat(g,\"), emit channelLockEvent\")),this.lockSnapshotLastTime.set(g,C),void this.emit(\"channelLockEvent\",A)}let a=\"SNAPSHOT\";let B=0,Q=!1,c=\"\",l=null;try{var u,h;(null===(u=i[0])||void 0===u?void 0:u.lockState)&&(l=JSON.parse(null===(h=i[0])||void 0===h?void 0:h.lockState))}catch(A){this.warn(\"parse lockState error: %o\",A)}switch(r){case LockEventType.LockAdded:var d;a=\"SET\",B=null===(d=l)||void 0===d?void 0:d.create_ttl;break;case LockEventType.LockModified:var p,y,D,R;if(null!==(p=l)&&void 0!==p&&p.user)a=\"ACQUIRED\",B=null===(y=l)||void 0===y?void 0:y.create_ttl,c=null===(D=l)||void 0===D?void 0:D.user;else a=\"RELEASED\",B=null===(R=l)||void 0===R?void 0:R.create_ttl;break;case LockEventType.LockRemoved:a=\"REMOVED\",B=0;break;case LockEventType.LockSnapshot:a=\"SNAPSHOT\",Q=!0}const w={channelType:I,channelName:n,eventType:a,lockName:Q?\"\":null!==(o=i[0].lockName)&&void 0!==o?o:\"\",ttl:B,publisher:\"\",snapshot:[],owner:c,timestamp:s};if(this.log(\"received lockEvent: %o\",w,l),Q){var f;!this.lockSnapshotLastTime.has(g)&&C-(null!==(f=this.lockSnapshotLastTime.get(g))&&void 0!==f?f:0)>LAST_PONG_RECEIVED_TS_FIELD_NUMBER&&(this.log(\"received snapshot lockEvent, emit channelLockEvent\"),this.lockSnapshotLastTime.set(g,C),w.snapshot=i.map((A=>{var e,t,o,i,r,n,I,s,C,E,a;let B=null;try{A.lockState&&(B=JSON.parse(A.lockState))}catch(A){this.warn(\"parse lockState error: %o\",A)}const Q={prefixChannelName:g,lockName:null!==(e=A.lockName)&&void 0!==e?e:\"\",owner:null!==(t=null===(o=B)||void 0===o?void 0:o.user)&&void 0!==t?t:\"\",ttl:null!==(i=null===(r=B)||void 0===r?void 0:r.create_ttl)&&void 0!==i?i:getParameter(\"LOCK_TTL\"),revision:null!==(n=null===(I=B)||void 0===I?void 0:I._rev)&&void 0!==n?n:0};return this.updateLockSnapshotCache(Q),{lockName:A.lockName,owner:null!==(s=null===(C=B)||void 0===C?void 0:C.user)&&void 0!==s?s:\"\",ttl:null!==(E=null===(a=B)||void 0===a?void 0:a.create_ttl)&&void 0!==E?E:getParameter(\"LOCK_TTL\")}})),this.emit(\"channelLockEvent\",w))}else{var S,N,M,_;this.log(\"received incremental lockEvent, emit channelLockEvent\");const A=l._rev||0,e=(null===(S=this.lockEventInfos.get(g))||void 0===S||null===(S=S.get(null!==(N=i[0].lockName)&&void 0!==N?N:\"\"))||void 0===S?void 0:S.revision)||0;let t=!1;if((\"RELEASED\"!==a&&A>e||\"RELEASED\"===a&&A>=e&&null!==(M=this.lockEventInfos.get(g))&&void 0!==M&&null!==(M=M.get(null!==(_=i[0].lockName)&&void 0!==_?_:\"\"))&&void 0!==M&&M.owner)&&(t=!0),t){var k,L,G,m;this.emit(\"channelLockEvent\",w);const A={prefixChannelName:g,lockName:null!==(k=i[0].lockName)&&void 0!==k?k:\"\",owner:null!==(L=l.user)&&void 0!==L?L:null,ttl:null!==(G=l.create_ttl)&&void 0!==G?G:null,revision:null!==(m=l._rev)&&void 0!==m?m:null};this.updateLockCache(A)}}}}updateLockCache(A){var e;const{lockName:t,prefixChannelName:o}=A;this.lockEventInfos.get(o)||this.lockEventInfos.set(o,new Map);const g=null!==(e=this.lockEventInfos.get(o))&&void 0!==e?e:new Map;g.set(t,A),this.lockEventInfos.set(o,g)}updateLockSnapshotCache(A){var e;const{lockName:t,prefixChannelName:o}=A,g=null!==(e=this.lockEventInfos.get(o))&&void 0!==e?e:new Map;g.set(t,A),this.lockEventInfos.set(o,g)}onUserDrop(A){return e=>{let{code:t}=e;if(t===RegServerErrorCode.kConnectionTimeout)return void this.warn(\"connection timeout\");if(this.context.addReportEvents(\"KickedOff\",{code:0,elapse:getElapse(this.startTime),linkId:parseInt(A.name.split(\"-\")[1],10),lts:Long$2.fromNumber(Date.now()),server:A.address,serverCode:t,sid:getSid(this.instanceId),userId:this.context.uid}),t===RegServerErrorCode.kJoinTooFrequently)return void this.warn(\"Login too often and kicked off, reconnect and login\");if(t===RegServerErrorCode.kUserInstanceConflict)return this.warn(\"The instance ID conflicts, reconnecting\"),this.instanceId=getRandomUInt64(),this.context.instanceId=this.instanceId,this.context.sid=getSid(this.instanceId),void this.emit(\"instanceChanged\",this.instanceId);[RegServerErrorCode.kTimestampExpired,RegServerErrorCode.kRejoined,RegServerErrorCode.kUidBanned,RegServerErrorCode.kIpBanned,RegServerErrorCode.kChannelBanned,RegServerErrorCode.kUserBannedByAuth].includes(t)&&(this.emit(\"syncDisconnected\"),this.emit(\"userDrop\",t),this.connection.cancelLogin=!0,this.emit(\"login-cancel\"),this.clearSockets())}}clearSockets(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((t=>{this.cleanLoginSubs(t,e),this.connection.closeSocket(t,A)}))}onMessage(A){return e=>{const{dialogue:t,instance:o,sequence:g,options:i,src:r}=e,n=t.toString(),I=this.dialPendingMsgSubjectMap.get(n),s=\"\".concat(o,\"-\").concat(t,\"#\").concat(g);if(I)return I.next(e),void this.log(\"Env_%d: The dialogue has pending messages, next: %s\",A.env,s);const C=this.dialogueSequenceLru.get(n),E=!C&&g.eq(1),a=void 0!==C&&g.sub(C).eq(1);if(E||a)return void this.emitMessage(e,A.env);if(C){if(g.lte(C))return;this.log(\"Env_%d: The message pended, the sequence is not continuous with the last: %s\",A.env,s)}else this.log(\"Env_%d: The message pended, the first sequence is not equal to 1: %s\",A.env,s);const B=new Subject;this.dialPendingMsgSubjectMap.set(n,B);const Q=B.pipe(observeOn(asyncScheduler),scan(((A,e)=>[...A,e]),[]),map$1((A=>[...A].sort(((A,e)=>{let{sequence:t}=A,{sequence:o}=e;return t.eq(o)?0:t.gt(o)?1:-1})))),shareReplay(1)),c=new MessageOption(i),l=!c.isFromCache()&&!c.isBufferedMessage();Q.pipe(takeUntil(timer(l?ONLINE_MESSAGE_DEDUP_DELAY:OFFLINE_MESSAGE_DEDUP_DELAY)),first((A=>{if(A.length<2)return!1;for(let e=void 0===C?Long$2.fromNumber(1,!0):C.add(1),t=0;t<A.length;e=e.add(1),t++){if(!A[t].sequence.eq(e))return!1}return!0})),finalize((()=>{this.dialPendingMsgSubjectMap.delete(n)}))).subscribe((e=>{e.forEach((e=>{this.emitMessage(e,A.env),this.log(\"Env_%d: The message queue has fully ordered, emitting: %s\",A.env,\"\".concat(e.instance,\"-\").concat(e.dialogue,\"#\").concat(e.sequence))}))}),(e=>{e instanceof EmptyError&&Q.pipe(take(1)).subscribe((e=>e.forEach((e=>{this.log(\"Env_%d: The message pending queue expired, emitting: %s\",A.env,\"\".concat(e.instance,\"-\").concat(e.dialogue,\"#\").concat(e.sequence)),this.emitMessage(e,A.env)}))))})),B.next(e)}}handleHeartbeatTimeout(A){var e;const t=this.context.heartbeatInterval+(null!==(e=getParameter(\"RTM_LINK_KEEP_ALIVE_TIMEOUT\"))&&void 0!==e?e:CONFIGURABLE_KEY_RTM_LINK_KEEP_ALIVE_TIMEOUT)-2*SOCKET_RETRY_INTERVAL;this.warn(\"ENV_\".concat(A.env,\"(\").concat(A.name,\"): registrar forceReconnect, the last received packet is the same as it was \").concat(t/1e3,\"s ago \")),A.forceReconnect()}onPong(){return A=>{let{serverMs:e}=A;if(this.context.pongTime=e.toNumber(),this.context.offsetTime=this.context.pongTime-(new Date).getTime(),document.hidden){this.getLoginSockets().forEach((A=>{!A.isActiveClose&&this.sendPing(A)}))}}}sendPing(A){var e;if(Date.now()-this.lastPingTime[A.env]<=this.context.heartbeatInterval||!A.loggedIn)return;this.incSeqIfNeeded(A.env);const t=this.seq,o=this.context.heartbeatInterval+(null!==(e=getParameter(\"RTM_LINK_KEEP_ALIVE_TIMEOUT\"))&&void 0!==e?e:CONFIGURABLE_KEY_RTM_LINK_KEEP_ALIVE_TIMEOUT)-2*SOCKET_RETRY_INTERVAL;A.sendPacket(\"Ping3\",{ms:Long$2.fromNumber(Date.now(),!0),seq:t,flags:new Long$2(3,0,!0)}),this.lastPingTime[A.env]=Date.now(),A.env===this.context.connSyncEnv&&this.manualShakeHand();const g=A.fromReceived(\"Pong3\").pipe(filter((A=>{let{seq:e}=A;return e.eq(t)})),take(1),tap((e=>{let{serverMs:t}=e;this.context.pongTime=t.toNumber(),this.context.offsetTime=this.context.pongTime-(new Date).getTime(),this.startPingTimer(A)})),timeout(o),catchError((e=>(!1===A.loggedIn||(this.logError(\"ENV: %d, loggedIn: %s, received pong error, e: %o\",A.env,A.loggedIn,e),e instanceof TimeoutError&&this.handleHeartbeatTimeout(A)),EMPTY))),finalize((()=>{g.unsubscribe()}))).subscribe()}updateMessageCount(A){const e={[RtmMessageCategoryEnum.ChannelRMsg]:this.chanelRawMessageReport,[RtmMessageCategoryEnum.ChannelSMsg]:this.chanelStringMessageReport,[RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag]:this.p2pRMsgNoOfflineReport,[RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag]:this.p2pSMsgNoOfflineReport,3:void 0,4:void 0,7:void 0,8:void 0,9:void 0,10:void 0}[A.messageCategory];\"common\"===A.type?null==e||e.updateCommonCount(A.key):\"peer\"===A.type?null==e||e.updatePeerAckCount(A.delay):null==e||e.updateNorecipientackCount(A.delay)}clearLockSnapshotLastTime(){this.lockSnapshotLastTime.clear()}notifyNetworkChange(A){this.networkOnlineSubject.next(A)}}_defineProperty$1(RegistrarSession,\"genTimeoutError\",((A,e)=>of(void 0).pipe(delay(void 0===e?COMMON_REQUEST_TIMEOUT:e),map$1((()=>{throw new RtmTimeoutError(OperationName.rtm,[getErrorInfoByCode(A).reason||\"Request timed out after \".concat((void 0===e?COMMON_REQUEST_TIMEOUT:e)/1e3,\"s\")],A)})))));class CollectionEvent{constructor(A,e,t,o){this.document=A,this.path=e,this.type=t,this.value=o}}var CollectionEventType;!function(A){A.Put=\"Put\",A.Insert=\"Insert\",A.Delete=\"Delete\",A.DocSyncEnd=\"DocSyncEnd\"}(CollectionEventType||(CollectionEventType={}));var CollectionEventType$1=CollectionEventType;class SyncCounter{constructor(A,e,t,o,g){this.docInstance=A,this.path=e,this.documentIn=t,this.collectionIn=o,this.client=g}Set(A){if(Math.round(A)!=A)throw new TypeError(\"The value is expected to be an int, but a double was got.\");if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The counter no longer exists.\");counterCheckAndReplace(t,e,this.docInstance),Module._rte_crdt_document_batch_write_begin(this.docInstance),setValue(this.docInstance,null,A,e,!0),Module._rte_crdt_document_batch_write_end(this.docInstance),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Inc(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(Math.round(A)!=A)throw new TypeError(\"The delta is expected to be an int, but a double was got.\");if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The counter no longer exists.\");counterCheckAndReplace(t,e,this.docInstance),Module._rte_crdt_document_batch_write_begin(this.docInstance),Module._rte_crdt_document_increment(this.docInstance,null,e,BigInt(A)),Module._rte_crdt_document_batch_write_end(this.docInstance),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Dec(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(Math.round(A)!=A)throw new TypeError(\"The delta is expected to be an int, but a double was got.\");if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The counter no longer exists.\");counterCheckAndReplace(t,e,this.docInstance),Module._rte_crdt_document_batch_write_begin(this.docInstance),Module._rte_crdt_document_increment(this.docInstance,null,e,-BigInt(A)),Module._rte_crdt_document_batch_write_end(this.docInstance),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Value(){if(!checkAll(this.documentIn,this.collectionIn.readable))throw new Error(\"The current collection is forbidden to read the Document : \"+this.documentIn);let A;const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The counter no longer exists.\");return counterCheckAndReplace(t,e,this.docInstance),A=getScalarValue(t),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),A}}class List{constructor(A,e,t,o,g){this.docInstance=A,this.path=e,this.documentIn=t,this.collectionIn=o,this.client=g}Insert(A,e){if(Math.round(A)!=A)throw new TypeError(\"The index is expected to be an int, but a double was got.\");if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const t=Module._rte_crdt_path_create();parsePath(this.path,t);const o=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,t,o)||!Module._rte_crdt_nested_value_is_list(o))throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new Error(\"The list no longer exists.\");{const g=Module._rte_crdt_nested_value_iterator_create(o);let i=0;for(;;){if(305===Module._rte_crdt_nested_value_iterator_next_value(g,null))break;i+=1}if(Module._rte_crdt_nested_value_iterator_destroy(g),A<0||A>i)throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new Error(\"The index is out of bound.\");Module._rte_crdt_document_batch_write_begin(this.docInstance);for(let o=0;o<e.length;o++){const g=e[o];setValue(this.docInstance,A,g,t),A+=1}Module._rte_crdt_document_batch_write_end(this.docInstance)}Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),this.client.connected&&tickLoop(this.client)}Append(A){if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t)||!Module._rte_crdt_nested_value_is_list(t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The list no longer exists.\");{const o=Module._rte_crdt_nested_value_iterator_create(t);let g=0;for(;;){if(305===Module._rte_crdt_nested_value_iterator_next_value(o,null))break;g+=1}Module._rte_crdt_nested_value_iterator_destroy(o),Module._rte_crdt_document_batch_write_begin(this.docInstance);for(let t=0;t<A.length;t++){const o=A[t];setValue(this.docInstance,g,o,e),g+=1}Module._rte_crdt_document_batch_write_end(this.docInstance)}Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Remove(A){for(let e=0;e<A.length;e++){const t=A[e];if(Math.round(t)!=t)throw new TypeError(\"The indexes is expected to be an array of int, but a double was got in the array.\")}if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);let e=A.filter(((A,e,t)=>t.indexOf(A)===e)),t=e.sort();const o=Module._rte_crdt_path_create();parsePath(this.path,o);const g=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,o,g)||!Module._rte_crdt_nested_value_is_list(g))throw Module._rte_crdt_nested_value_destroy(g),Module._rte_crdt_path_destroy(o),new Error(\"The list no longer exists.\");{const e=Module._rte_crdt_nested_value_iterator_create(g);let i=0;for(;;){if(305===Module._rte_crdt_nested_value_iterator_next_value(e,null))break;i+=1}Module._rte_crdt_nested_value_iterator_destroy(e);for(let e=0;e<A.length;e++){const t=A[e];if(t<0||t>i)throw Module._rte_crdt_nested_value_destroy(g),Module._rte_crdt_path_destroy(o),new Error(\"The index is out of bound.\")}let r=0;Module._rte_crdt_document_batch_write_begin(this.docInstance);for(let A=0;A<t.length;A++){let e=t[A];const o=Module._rte_crdt_path_create();e-=r,parsePath(this.path+\"[\"+e.toString()+\"]\",o),Module._rte_crdt_document_delete(this.docInstance,null,o),r+=1,Module._rte_crdt_path_destroy(o)}Module._rte_crdt_document_batch_write_end(this.docInstance)}Module._rte_crdt_nested_value_destroy(g),Module._rte_crdt_path_destroy(o),this.client.connected&&tickLoop(this.client)}Value(){if(!checkAll(this.documentIn,this.collectionIn.readable))throw new Error(\"The current collection is forbidden to read the Document : \"+this.documentIn);let A=[];const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t)||!Module._rte_crdt_nested_value_is_list(t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The list no longer exists.\");return getAll(this.docInstance,t,A,!0),Module._rte_crdt_path_destroy(e),Module._rte_crdt_nested_value_destroy(t),A}}class Map$1{constructor(A,e,t,o,g){this.docInstance=A,this.path=e,this.documentIn=t,this.collectionIn=o,this.client=g}Set(A){if(!isDict(A))throw new TypeError(\"The value should be in JSON format\");if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t)||!Module._rte_crdt_nested_value_is_map(t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The map no longer exists.\");Module._rte_crdt_document_batch_write_begin(this.docInstance);for(let t=0,o=Object.entries(A);t<o.length;t++){const[A,g]=o[t];setValue(this.docInstance,A,g,e)}Module._rte_crdt_document_batch_write_end(this.docInstance),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Delete(A){if(!checkAll(this.documentIn,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.documentIn);const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t)||!Module._rte_crdt_nested_value_is_map(t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The map no longer exists.\");Module._rte_crdt_document_batch_write_begin(this.docInstance);for(let t=0;t<A.length;t++){const o=A[t],g=Module._rte_crdt_path_clone(e),i=getPtrWithStr(o);Module._rte_crdt_path_add_property(g,i,getRealLenWithStrBI(o)),releasePtr(i),Module._rte_crdt_document_delete(this.docInstance,null,g),Module._rte_crdt_path_destroy(g)}Module._rte_crdt_document_batch_write_end(this.docInstance),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Value(){if(!checkAll(this.documentIn,this.collectionIn.readable))throw new Error(\"The current collection is forbidden to read the Document : \"+this.documentIn);let A={};const e=Module._rte_crdt_path_create();parsePath(this.path,e);const t=Module._rte_crdt_nested_value_create();if(0!==Module._rte_crdt_document_get(this.docInstance,null,e,t)||!Module._rte_crdt_nested_value_is_map(t))throw Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),new Error(\"The map no longer exists.\");return getAll(this.docInstance,t,A,!1),Module._rte_crdt_nested_value_destroy(t),Module._rte_crdt_path_destroy(e),A}}class SyncDocument{constructor(A,e,t,o){this.docInstance=A,this.name=e,this.collectionIn=t,this.client=o}Set(A){if(!isDict(A))throw new TypeError(\"The value should be in JSON format\");if(!checkAll(this.name,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.name);Module._rte_crdt_document_batch_write_begin(this.docInstance);const e=Module._rte_crdt_path_create();for(let t=0,o=Object.entries(A);t<o.length;t++){const[A,g]=o[t];setValue(this.docInstance,A,g,e)}Module._rte_crdt_document_batch_write_end(this.docInstance),Module._rte_crdt_path_destroy(e),this.client.connected&&tickLoop(this.client)}Update(A,e){if(!checkAll(this.name,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.name);Module._rte_crdt_document_batch_write_begin(this.docInstance);const t=Module._rte_crdt_path_create();parsePath(A,t,!0),setValue(this.docInstance,null,e,t),Module._rte_crdt_document_batch_write_end(this.docInstance),this.client.connected&&tickLoop(this.client)}Del(A){if(!checkAll(this.name,this.collectionIn.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+this.name);Module._rte_crdt_document_batch_write_begin(this.docInstance);for(let e=0;e<A.length;e++){const t=A[e],o=Module._rte_crdt_path_create();parsePath(t,o,!0),Module._rte_crdt_document_delete(this.docInstance,null,o),Module._rte_crdt_path_destroy(o)}Module._rte_crdt_document_batch_write_end(this.docInstance),this.client.connected&&tickLoop(this.client)}Get(){if(!checkAll(this.name,this.collectionIn.readable))throw new Error(\"The current collection is forbidden to read the Document : \"+this.name);let A={};const e=Module._rte_crdt_path_create(),t=Module._rte_crdt_nested_value_create();try{return Module._rte_crdt_document_get(this.docInstance,null,e,t),getAll(this.docInstance,t,A,!1),Module._rte_crdt_path_destroy(e),Module._rte_crdt_nested_value_destroy(t),A}catch(A){Module._rte_crdt_path_destroy(e),Module._rte_crdt_nested_value_destroy(t),logger(\"The Error Stack is : \".concat(A.Stack),this.collectionIn.getLogger,\"error\")}}Counter(A,e){const t=Module._rte_crdt_path_create();parsePath(A,t,!0);const o=Module._rte_crdt_nested_value_create();let g;try{g=Module._rte_crdt_document_get(this.docInstance,null,t,o)}catch(A){throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new Error(\"The path is invalid\")}if(0!=g){if(!e)throw new Error(\"The given path leads to an empty field and the 'create' is false.\");Module._rte_crdt_document_batch_write_begin(this.docInstance),setValue(this.docInstance,null,0,t,!0),Module._rte_crdt_document_batch_write_end(this.docInstance)}else{if(!Module._rte_crdt_nested_value_is_scalar(o))throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new TypeError(\"The given path does not lead to a counter.\");{const A=Module._rte_crdt_nested_value_get_scalar(o);if(!Module._rte_crdt_scalar_value_is_counter(A)&&!Module._rte_crdt_scalar_value_is_i64(A))throw new TypeError(\"The given path does not lead to a counter.\");if(Module._rte_crdt_scalar_value_is_i64(A)){const A=getScalarValue(o);Module._rte_crdt_document_batch_write_begin(this.docInstance),setValue(this.docInstance,null,A,t,!0),Module._rte_crdt_document_batch_write_end(this.docInstance)}}}return Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new SyncCounter(this.docInstance,A,this.name,this.collectionIn,this.client)}Map(A,e){const t=Module._rte_crdt_path_create();parsePath(A,t,!0);const o=Module._rte_crdt_nested_value_create();let g;try{g=Module._rte_crdt_document_get(this.docInstance,null,t,o)}catch(A){throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new Error(\"The path is invalid!\")}if(0!=g){if(!e)throw new Error(\"The given path leads to an empty field and the 'create' is false.\");Module._rte_crdt_document_batch_write_begin(this.docInstance),setValue(this.docInstance,null,{},t),Module._rte_crdt_document_batch_write_end(this.docInstance)}else if(!Module._rte_crdt_nested_value_is_map(o))throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new TypeError(\"The given path does not lead to a map.\");return Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new Map$1(this.docInstance,A,this.name,this.collectionIn,this.client)}List(A,e){const t=Module._rte_crdt_path_create();parsePath(A,t,!0);const o=Module._rte_crdt_nested_value_create();let g;try{g=Module._rte_crdt_document_get(this.docInstance,null,t,o)}catch(A){throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new Error(\"The path is invalid!\")}if(0!=g){if(!e)throw new Error(\"The given path leads to an empty field and the 'create' is false.\");Module._rte_crdt_document_batch_write_begin(this.docInstance),setValue(this.docInstance,null,[],t),Module._rte_crdt_document_batch_write_end(this.docInstance)}else if(!Module._rte_crdt_nested_value_is_list(o))throw Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new TypeError(\"The given path does not lead to a list.\");return Module._rte_crdt_nested_value_destroy(o),Module._rte_crdt_path_destroy(t),new List(this.docInstance,A,this.name,this.collectionIn,this.client)}Keepalive(A){if(!isInteger(A))throw new TypeError(\"The ttl is expected to be an interger, but a double was got.\");const e=getPtrWithStr(this.collectionIn.dbIn),t=getPtrWithStr(this.collectionIn.name),o=getPtrWithStr(this.name);Module._sync_client_keepalive(this.client.clientPtr,e,t,o,A),releasePtr(e),releasePtr(t),releasePtr(o)}}class SyncCollection{constructor(A,e,t,o,g,i,r){this.colPtr=A,this.name=e,this.client=t,this.readable=o,this.writable=g,this.dbIn=i,this.channel=new eventsExports.EventEmitter,this.cb=null,this.getLogger=r}PutDoc(A){if(!checkAll(A,this.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+A);const e=getPtrWithStr(A);Module._rte_crdt_collection_put_doc(this.colPtr,e,getRealLenWithStrBI(A));const t=getPtrWithStr(this.name);releasePtr(e),releasePtr(t),this.client.connected&&tickLoop(this.client)}DelDoc(A){if(!checkAll(A,this.writable))throw new Error(\"The current collection is forbidden to write the Document : \"+A);const e=getPtrWithStr(A),t=getPtrWithStr(this.name);Module._rte_crdt_collection_delete_doc(this.colPtr,e,getRealLenWithStrBI(A)),releasePtr(e),releasePtr(t),this.client.connected&&tickLoop(this.client)}Docs(){let A=new Map,e=Module._rte_crdt_collection_iterator_create(this.colPtr,null,BigInt(0)),t=0;const o=Module._malloc(4),g=Module._malloc(4);for(;t=Module._rte_crdt_collection_iterator_next(e,g,o),305!==t;){const e=Module.getValue(g,\"i32\"),t=Module.UTF8ToString(e).valueOf(),o=getPtrWithStr(t),i=Module._rte_crdt_collection_ref_doc(this.colPtr,o,getRealLenWithStrBI(t));releasePtr(o);const r=new SyncDocument(i,t,this,this.client);A.set(t,r)}return releasePtr(o),releasePtr(g),A}Doc(A){const e=getPtrWithStr(A),t=Module._rte_crdt_collection_ref_doc(this.colPtr,e,getRealLenWithStrBI(A));return releasePtr(e),0!=t?new SyncDocument(t,A,this,this.client):null}Subscribe(){return null!==this.cb?(logger(\"The Collection : \".concat(this.name,\" has already been subscribed.\"),this.getLogger,\"info\"),null):(this.cb=subscribe(this,this.channel),this.channel)}UnSubscribe(){this.channel.removeAllListeners(),null!=this.cb&&(Module.removeFunction(this.cb),this.cb=null),logger(\"The Collection : \".concat(this.name,\" has been unsubscribed successfully.\"),this.getLogger,\"info\")}}class SyncDatabase{constructor(A,e){this.name=A,this.client=e,this.colls=new Map,this.keepAliveTimers=new Map}async CreateCollection(A,e,t){if(this.colls.has(A))throw new Error(\"The collection : \".concat(A,\" has alreay existed in this database.\"));try{await promisify(createCollection)({client:this.client,db:this.name,coll:A,readable:e})}catch(A){logger(\"Collection init failed by the error : \".concat(A),this.client.getLogger,\"error\")}const o=getPtrWithStr(A),g=getPtrWithStr(this.name),i=Module._sync_client_get_coll(this.client.clientPtr,g,o);releasePtr(o),releasePtr(g);const r=new SyncCollection(i,A,this.client,e,t,this.name,this.client.getLogger);this.colls.set(A,r)}DestroyCollection(A){let e=!1;if(this.colls.has(A)){const t=this.colls.get(A);if(null!=t){const o=getPtrWithStr(t.name),g=getPtrWithStr(this.name);Module._sync_client_delete_coll(this.client.clientPtr,g,o),releasePtr(o),releasePtr(g),this.colls.delete(A),e=!0}}logger(e?\"The Collection : \".concat(A,\" has been destroyed successfully.\"):\"The operation to destroy the Collection : \".concat(A,\" is failed.\"),this.client.getLogger,\"info\")}Coll(A){return this.colls.has(A)?this.colls.get(A):null}SetAutoKeepalive(A,e,t){if(!isInteger(t)||t<=0)throw new TypeError(\"The ttl is expected to be a positive integer.\");const o=getPtrWithStr(this.name),g=getPtrWithStr(A),i=getPtrWithStr(e);Module._sync_client_set_doc_ttl(this.client.clientPtr,o,g,i,t),releasePtr(o),releasePtr(g),releasePtr(i),this.client.connected&&tickLoop(this.client)}CancelAutoKeepalive(A,e){const t=getPtrWithStr(this.name),o=getPtrWithStr(A),g=getPtrWithStr(e);Module._sync_client_set_doc_ttl(this.client.clientPtr,t,o,g,0),releasePtr(t),releasePtr(o),releasePtr(g),this.client.connected&&tickLoop(this.client)}SetAutoKeepaliveRPC(A,e,t){if(!isInteger(t)||t<=0)throw new TypeError(\"The ttl is expected to be a positive integer.\");const o=A+\" \"+e,g=getPtrWithStr(this.name),i=getPtrWithStr(A),r=getPtrWithStr(e);if(Module._sync_client_keepalive(this.client.clientPtr,g,i,r,t),releasePtr(g),releasePtr(i),releasePtr(r),this.client.connected){tickLoop(this.client);let g=setInterval((()=>{const o=getPtrWithStr(this.name),g=getPtrWithStr(A),i=getPtrWithStr(e);Module._sync_client_keepalive(this.client.clientPtr,o,g,i,t),releasePtr(o),releasePtr(g),releasePtr(i),tickLoop(this.client)}),1e3*t/2);this.keepAliveTimers.set(o,g)}}RemoveAutoKeepaliveRPC(A,e){let t=A+\" \"+e;if(this.keepAliveTimers.has(t)){let A=this.keepAliveTimers.get(t);clearInterval(A)}}GetAutoKeepaliveRPC(){return Array.from(this.keepAliveTimers.keys())}}function checkIfContainsStart(A){for(let e=0;e<A.length;e++){if(\"*\"===A[e])return!0}return!1}function promisify(A){return\"function\"!=typeof A?A:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((t,o)=>{A(Object.assign(Object.assign(Object.assign({},e),{success:t,fail:o})))}))}}function isDict(A){return!(\"object\"!=typeof A||null===A||A instanceof Array||A instanceof Date)}function toRegex(A){let e=\"\";for(let t=0;t<A.length;t++){const o=A.charAt(t);\"*\"===o&&(e+=\".\"),e+=o}return new RegExp(e)}function checkRegex(A,e){for(let t=0;t<e.length;t++){let o=e[t];if(o.includes(\"*\")){if(toRegex(o).test(A))return!0}}return!1}function isInteger(A){return Math.round(A)===A}function checkAll(A,e){return!(!checkIfContainsStart(e)&&e.length>0&&!e.includes(A)&&!checkRegex(A,e))}function logger(A,e,t){if(null!==e)switch(t){case\"info\":e().handleInfoLog(A);break;case\"warn\":e().handleWarnLog(A);break;case\"error\":e().handleErrorLog(A)}else{let e=new Date;console.log(e+e.getMilliseconds().toString()+\" : \"+A)}}function getMallocLenWithStr(A){return new Blob([A]).size+1}function getPtrWithStr(A){const e=Module._malloc(getMallocLenWithStr(A));return Module.stringToUTF8(A,e,getMallocLenWithStr(A)),e}function releasePtr(A){null!=A&&(Module._free(A),A=null)}function getRealLenWithStrBI(A){const e=new Blob([A]).size;return BigInt(e)}function setValue(A,e,t,o){let g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=Module._rte_crdt_value_create(),r=Module._rte_crdt_path_clone(o);if(\"object\"==typeof t&&null!=t&&null!=t)if(Array.isArray(t)){Module._rte_crdt_value_set_list(i),constructPathAndPut(e,A,r,i);let o=0;for(let e=0;e<t.length;e++){setValue(A,o,t[e],r),o+=1}}else{Module._rte_crdt_value_set_map(i),constructPathAndPut(e,A,r,i);for(let e=0,o=Object.entries(t);e<o.length;e++){const[t,g]=o[e];setValue(A,t,g,r)}}else{const o=Module._rte_crdt_value_set_scalar(i);switch(typeof t){case\"number\":g?Module._rte_crdt_scalar_value_set_counter(o,BigInt(t)):isInteger(t)?Module._rte_crdt_scalar_value_set_i64(o,BigInt(t)):Module._rte_crdt_scalar_value_set_double(o,t);break;case\"boolean\":Module._rte_crdt_scalar_value_set_bool(o,t);break;case\"string\":const A=getPtrWithStr(t);Module._rte_crdt_scalar_value_set_bytes(o,A,getRealLenWithStrBI(t)),releasePtr(A);break;default:Module._rte_crdt_scalar_value_set_null(o)}constructPathAndPut(e,A,r,i)}Module._rte_crdt_path_destroy(r),Module._rte_crdt_value_destroy(i)}function constructPathAndPut(A,e,t,o){if(\"string\"==typeof A){const e=getPtrWithStr(A);Module._rte_crdt_path_add_property(t,e,getRealLenWithStrBI(A)),releasePtr(e)}else null!=A&&(Module._rte_crdt_path_add_index(t,BigInt(A)),Module._rte_crdt_document_insert(e,null,t,o));if(0!=Module._rte_crdt_document_put(e,null,t,o))throw Error(\"The path is invalid!\")}function getScalarValue(A){var e;let t;if(t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?Module._rte_crdt_nested_value_get_scalar(A):Module._rte_crdt_value_get_scalar(A),Module._rte_crdt_scalar_value_is_i64(t)){const A=Module._malloc(4);Module._rte_crdt_scalar_value_get_i64(t,A),e=Module.getValue(A,\"i64\"),e=Number(e),releasePtr(A)}else if(Module._rte_crdt_scalar_value_is_double(t)){const A=Module._malloc(8);Module._rte_crdt_scalar_value_get_double(t,A),e=Module.getValue(A,\"double\"),e=Number(e),releasePtr(A)}else if(Module._rte_crdt_scalar_value_is_bytes(t)){const A=Module._malloc(4),o=Module._malloc(4);Module._rte_crdt_scalar_value_get_bytes(t,o,A);const g=Module.getValue(o,\"i32\");e=Module.UTF8ToString(g).valueOf(),releasePtr(A),releasePtr(o)}else if(Module._rte_crdt_scalar_value_is_bool(t)){const A=Module._malloc(1);Module._rte_crdt_scalar_value_get_bool(t,A);e=1==Module.getValue(A),releasePtr(A)}else if(Module._rte_crdt_scalar_value_is_counter(t)){const A=Module._malloc(4);Module._rte_crdt_scalar_value_get_counter(t,A),e=Module.getValue(A,\"i64\"),e=Number(e),releasePtr(A)}else e=null;return e}function parsePath(A,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const t=getPtrWithStr(A);return Module._rte_crdt_path_add_property(e,t,getRealLenWithStrBI(A)),void releasePtr(t)}let t=\"\",o=!1;for(let g=0;g<A.length;g++){const i=A[g];\"[\"!==i?\"]\"!==i?\".\"!==i?t+=i:(t.length>0&&(addPropertyOrIndex(t,e,o),t=\"\"),o=!1):(addPropertyOrIndex(t,e,o),o=!1,t=\"\"):(t.length>0&&(addPropertyOrIndex(t,e,o),t=\"\"),o=!0)}t.length>0&&addPropertyOrIndex(t,e,o)}function addPropertyOrIndex(A,e,t){if(!isNaN(A)&&t){const t=Number(A);Module._rte_crdt_path_add_index(e,BigInt(t))}else{const t=getPtrWithStr(A);Module._rte_crdt_path_add_property(e,t,getRealLenWithStrBI(A)),releasePtr(t)}}function getAll(A,e,t,o){const g=Module._rte_crdt_nested_value_iterator_create(e),i=Module._malloc(4),r=Module._malloc(4),n=Module._malloc(4);let I=0;for(;;)if(o){if(I=Module._rte_crdt_nested_value_iterator_next_value(g,n),305===I)break;const e=Module.getValue(n,\"i32\");if(Module._rte_crdt_nested_value_is_scalar(e))t.push(getScalarValue(e));else if(Module._rte_crdt_nested_value_is_map(e)){let o={};t.push(o),getAll(A,e,o,!1)}else if(Module._rte_crdt_nested_value_is_list(e)){let o=[];t.push(o),getAll(A,e,o,!0)}}else{if(I=Module._rte_crdt_nested_value_iterator_next_key_value(g,i,r,n),305===I)break;const e=Module.UTF8ToString(Module.getValue(i,\"i32\")).valueOf(),o=Module.getValue(n,\"i32\");if(Module._rte_crdt_nested_value_is_scalar(o))t[e]=getScalarValue(o);else if(Module._rte_crdt_nested_value_is_map(o)){let g={};t[e]=g,getAll(A,o,g,!1)}else if(Module._rte_crdt_nested_value_is_list(o)){let g=[];t[e]=g,getAll(A,o,g,!0)}}releasePtr(i),releasePtr(r),releasePtr(n),Module._rte_crdt_nested_value_iterator_destroy(g)}function getPtrStringList(A){const e=A.length,t=0===e?0:Module._malloc(4*e);let o=t,g=[];for(let e=0;e<A.length;e++){let t=getPtrWithStr(A[e]);g.push(t),Module.setValue(o,t,\"i32\"),o+=4}return[t,g]}function counterCheckAndReplace(A,e,t){if(!Module._rte_crdt_nested_value_is_scalar(A))throw Module._rte_crdt_nested_value_destroy(A),Module._rte_crdt_path_destroy(e),new TypeError(\"The counter no longer exists.\");const o=Module._rte_crdt_nested_value_get_scalar(A);if(!Module._rte_crdt_scalar_value_is_counter(o)){if(!Module._rte_crdt_scalar_value_is_i64(o))throw Module._rte_crdt_nested_value_destroy(A),Module._rte_crdt_path_destroy(e),new Error(\"The counter no longer exists.\");{const o=getScalarValue(A);Module._rte_crdt_document_batch_write_begin(t),setValue(t,null,o,e,!0),Module._rte_crdt_document_batch_write_end(t)}}}function getRangeEndStringPtr(A){const e=Module.lengthBytesUTF8(A)+1,t=Module._malloc(e);return Module.stringToUTF8(A,t,e),Module.HEAPU8[t+e-1]=1,t}function getTick(A,e){const t=Module._sync_client_tick(e,A),o=Module._sync_buffer_data(A),g=Number(Module._sync_buffer_length(A));return{resDeepCopy:new Uint8Array(Module.HEAPU8.buffer,o,g).slice(),tikGetRes:t}}function tickLoop(A){let e=0;for(;305!=e;){const{resDeepCopy:t,tikGetRes:o}=getTick(A.tickBufferPtr,A.clientPtr);if(e=o,101===e)Module._sync_client_reset_connection(A.clientPtr);else{if(0==t.length)continue;null!==A.reuseConn?A.reuseConn().sendPacket(t):A.ws.send(t),logger(\"send tick\",A.getLogger,\"info\")}}}function getShakehand(A,e){const t=Module._sync_client_shakehand(e,A),o=Module._sync_buffer_data(A),g=Number(Module._sync_buffer_length(A));return{resDeepCopy:new Uint8Array(Module.HEAPU8.buffer,o,g).slice(),shakehandRes:t}}function shakehandOnce(A){const{resDeepCopy:e,shakehandRes:t}=getShakehand(A.shakehandBufferPtr,A.clientPtr);null!==A.reuseConn?A.reuseConn().sendPacket(e):A.ws.send(e)}async function recvMsg(A,e){e?A.ws.addEventListener(\"message\",(async function(e){try{const t=await e.data.arrayBuffer(),o=new Uint8Array(t),g=o.length*o.BYTES_PER_ELEMENT,i=Module._malloc(g);Module.HEAPU8.set(o,i);const r=Module._sync_client_on_recv(A.clientPtr,i,BigInt(g),A.tickBufferPtr);if(Module._free(i),101===r)Module._sync_client_reset_connection(A.clientPtr);else{const e=new Uint8Array(Module.HEAPU8.buffer,Module._sync_buffer_data(A.tickBufferPtr),Number(Module._sync_buffer_length(A.tickBufferPtr))).slice();0!=e.length&&A.ws.send(e)}}catch(e){logger(\"recvError : \".concat(e),A.getLogger,\"error\")}})):A.ws.on(\"message\",(e=>{try{const t=new Uint8Array(e),o=t.length*t.BYTES_PER_ELEMENT,g=Module._malloc(o);Module.HEAPU8.set(t,g);const i=Module._sync_client_on_recv(A.clientPtr,g,BigInt(o),A.tickBufferPtr);if(Module._free(g),101===i)Module._sync_client_reset_connection(A.clientPtr);else{const e=new Uint8Array(Module.HEAPU8.buffer,Module._sync_buffer_data(A.tickBufferPtr),Number(Module._sync_buffer_length(A.tickBufferPtr))).slice();0!=e.length&&A.ws.send(e)}}catch(e){logger(\"recvError : \".concat(e),A.getLogger,\"error\")}}))}async function fetchHelper(A,e){A.tickBufferPtr=Module._sync_buffer_create();try{let t=\"ws://\"+\"60.191.137.101:6390\"+\"/ws\";e&&(A.ws=new WebSocket(t)),A.ws.onopen=()=>{A.manualTick||(tickLoop(A),A.connected=!0,A.timer=setInterval((()=>{3==A.ws.readyState?(A.connected=!1,logger(\"The connection is time out...\",A.getLogger,\"info\")):(A.connected=!0,tickLoop(A))}),2e3))},recvMsg(A,e)}catch(e){logger(\"fetchError : \".concat(e),A.getLogger,\"error\")}}const createCollCallBackMap=new Map,dbConnectCallBackMap=new Map,dbDisConnectCallBackMap=new Map;let createCollCallBackFunc,dbConnectCallBackFunc,dbDisConnectCallBackFunc;function initFunc(A){createCollCallBackFunc=Module.addFunction(((e,t,o,g)=>{const{resolvePromise:i,rejectPromise:r}=createCollCallBackMap.get(g);releasePtr(g),0===e?(logger(\"init success\",A,\"info\"),i(e)):r(e)}),\"viiii\"),dbConnectCallBackFunc=Module.addFunction(((e,t,o,g,i)=>{const{resolvePromise:r,rejectPromise:n}=dbConnectCallBackMap.get(i);releasePtr(i),0===e?(logger(\"db connect success\",A,\"info\"),r(e)):n(e)}),\"viiiji\"),dbDisConnectCallBackFunc=Module.addFunction(((e,t,o)=>{const{resolvePromise:g,rejectPromise:i}=dbDisConnectCallBackMap.get(o);releasePtr(o),0===e?(logger(\"db disconnect success\",A,\"info\"),g(e)):i(e)}),\"viii\"),null!==A&&(Module.rtejsLog=(e,t)=>{switch(e){case 0:A().handleDebugLog(t,\" ----------rtejslog\");break;case 1:A().handleInfoLog(t,\" ----------rtejslog\");break;case 2:A().handleWarnLog(t,\" ----------rtejslog\");break;case 3:A().handleErrorLog(t,\" ----------rtejslog\")}})}async function createCollection(A){const{client:e,db:t,coll:o,readable:g,success:i,fail:r}=A,n=getPtrWithStr(o),I=getPtrWithStr(t),s=getPtrWithStr(o),[C,E]=getPtrStringList(g),a=uuid_1.v4(),B=getPtrWithStr(a);createCollCallBackMap.set(n,{resolvePromise:i,rejectPromise:r}),Module._sync_client_create_coll(e.clientPtr,I,s,C,g.length,B,getRealLenWithStrBI(a),createCollCallBackFunc,n),releasePtr(I),releasePtr(s),releasePtr(B);for(let A=0;A<E.length;A++){releasePtr(E[A])}e.connected&&tickLoop(e)}async function connectDatabase(A){const{client:e,databaseName:t,success:o,fail:g}=A,i=getPtrWithStr(t),r=i;dbConnectCallBackMap.set(r,{resolvePromise:o,rejectPromise:g});let n=getPtrWithStr(\"\");Module._sync_client_connect_database(e.clientPtr,i,n,getRealLenWithStrBI(\"\"),dbConnectCallBackFunc,r),releasePtr(n),e.connected&&tickLoop(e)}async function disconnectDatabase(A){const{client:e,databaseName:t,success:o,fail:g}=A,i=getPtrWithStr(t),r=i;dbDisConnectCallBackMap.set(r,{resolvePromise:o,rejectPromise:g}),Module._sync_client_disconnect_database(e.clientPtr,i,dbDisConnectCallBackFunc,r),e.connected&&tickLoop(e)}async function queryDoc(A){const{client:e,database:t,coll:o,option:g,buffer:i,success:r,fail:n}=A,I=Module.addFunction(((A,e,t,o,g,s)=>{if(0===A){i.SetCount(Number(o)),1===g&&i.SetMore(!0);for(let A=0;A<Number(o);A++){const A=Module.getValue(e,\"i32\"),o=Module.getValue(t,\"i32\"),g=Module.UTF8ToString(A).valueOf(),r=Module.UTF8ToString(o).valueOf();i.SetDocs(g,r),e+=4,t+=4}r(A)}else n(A);Module.removeFunction(I)}),\"viiijii\"),s=getPtrWithStr(t),C=getPtrWithStr(o);let E=0,a=0;E=g.startIncluded||0==g.start.length?getPtrWithStr(g.start):getRangeEndStringPtr(g.start),a=g.endIncluded&&0!=g.end.length?getRangeEndStringPtr(g.end):getPtrWithStr(g.end);Module._sync_client_query_doc(e.clientPtr,s,C,E,a,BigInt(g.limit),g.keysOnly,g.countOnly,I,0),e.connected&&tickLoop(e)}function subscribe(A,e){const t=Module.addFunction(((t,i,r,n,I,s,C)=>{const E=Module.UTF8ToString(r),a=Module._rte_crdt_path_iterator_create(n);let B,Q=0,c=\"\";for(;;){const A=Module._malloc(4),e=Module._malloc(4);Module.setValue(e,0,\"i64\");const t=Module._malloc(4),o=Module._malloc(4);if(Q=Module._rte_crdt_path_iterator_next(a,A,e,t),305===Q){releasePtr(A),releasePtr(e),releasePtr(t),releasePtr(o);break}if(0===c.length){if(0!=A){const e=Module.getValue(A,\"i32\");c+=Module.UTF8ToString(e).valueOf()}}else{const o=Module.getValue(e,\"i64\");if(Number(o)>0){const e=Module.getValue(A,\"i32\");c+=\".\"+Module.UTF8ToString(e).valueOf()}else{const A=Module.getValue(t,\"i64\");c+=\"[\"+Number(A).toString()+\"]\"}}releasePtr(A),releasePtr(e),releasePtr(t),releasePtr(o)}switch(B=Module._rte_crdt_value_is_list(s)?[]:Module._rte_crdt_value_is_map(s)?{}:getScalarValue(s,!1),I){case 0:o.push(new CollectionEvent(E,c,CollectionEventType$1.Insert,B));break;case 1:g?o.push(new CollectionEvent(E,c,CollectionEventType$1.Put,B)):0!=e.listenerCount(\"document-events\")&&(o=[new CollectionEvent(E,\"\",CollectionEventType$1.Put,null)],e.emit(\"document-events\",o));break;case 2:g?o.push(new CollectionEvent(E,c,CollectionEventType$1.Delete,B)):0!=e.listenerCount(\"document-events\")&&checkAll(E,A.readable)&&(o=[new CollectionEvent(E,\"\",CollectionEventType$1.Delete,null)],e.emit(\"document-events\",o));break;case 6:o=[],g=!0;break;case 7:0!=e.listenerCount(\"document-events\")&&e.emit(\"document-events\",o),g=!1;break;case 8:0!=e.listenerCount(\"document-events\")&&e.emit(\"document-events\",[new CollectionEvent(E,\"\",CollectionEventType$1.DocSyncEnd,null)])}}),\"viiiiiii\");let o=[],g=!1;const i=getPtrWithStr(A.dbIn),r=getPtrWithStr(A.name),n=Module._sync_client_subscribe(A.client.clientPtr,i,r,t,0);if(releasePtr(i),releasePtr(r),0===n)return logger(\"The Collection : \".concat(A.name,\" has been subscribed successfully!\"),A.getLogger,\"info\"),t;logger(\"The Collection : \".concat(A.name,\" has not been subscribed successfully!\"),A.getLogger,\"info\")}function exceptionCallback(A){A.exceptionCb=Module.addFunction(((e,t,o)=>{let g=Module.UTF8ToString(e).valueOf(),i=Module.UTF8ToString(t).valueOf();0!=A.exceptionChan.listenerCount(\"exception\")&&A.exceptionChan.emit(\"exception\",[g,i])}),\"viii\");Module._sync_client_set_exception_callback(A.clientPtr,A.exceptionCb,0)}var createModule=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e,t,o=A;o.ready=new Promise(((A,o)=>{e=A,t=o}));var g=Object.assign({},o),i=\"./this.program\",r=\"object\"==typeof window,n=\"function\"==typeof importScripts;\"object\"==typeof process&&\"object\"==typeof process.versions&&process.versions.node;var I,s=\"\";(r||n)&&(n?s=self.location.href:\"undefined\"!=typeof document&&document.currentScript&&(s=document.currentScript.src),s=0!==s.indexOf(\"blob:\")?s.substr(0,s.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1):\"\",n&&(I=A=>{var e=new XMLHttpRequest;return e.open(\"GET\",A,!1),e.responseType=\"arraybuffer\",e.send(null),new Uint8Array(e.response)})),o.print||console.log.bind(console);var C,E,a=o.printErr||console.error.bind(console);Object.assign(o,g),g=null,o.arguments&&o.arguments,o.thisProgram&&(i=o.thisProgram),o.quit&&o.quit,o.wasmBinary&&(C=o.wasmBinary),o.noExitRuntime,\"object\"!=typeof WebAssembly&&_(\"no native wasm support detected\");var B,Q,c,l,u,h,d,p,y,D=!1;function R(){var A=E.buffer;o.HEAP8=B=new Int8Array(A),o.HEAP16=c=new Int16Array(A),o.HEAPU8=Q=new Uint8Array(A),o.HEAPU16=new Uint16Array(A),o.HEAP32=l=new Int32Array(A),o.HEAPU32=u=new Uint32Array(A),o.HEAPF32=h=new Float32Array(A),o.HEAPF64=p=new Float64Array(A),o.HEAP64=d=new BigInt64Array(A),o.HEAPU64=new BigUint64Array(A)}var w=[],f=[],S=[],N=0,M=null;function _(A){o.onAbort&&o.onAbort(A),a(A=\"Aborted(\"+A+\")\"),D=!0,A+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(A);throw t(e),e}var k,L,G=\"data:application/octet-stream;base64,\";function m(A){return A.startsWith(G)}function b(A){if(A==k&&C)return new Uint8Array(C);var e=function(A){if(m(A))return function(A){try{for(var e=atob(A),t=new Uint8Array(e.length),o=0;o<e.length;++o)t[o]=e.charCodeAt(o);return t}catch(A){throw new Error(\"Converting base64 string to bytes failed.\")}}(A.slice(37))}(A);if(e)return e;if(I)return I(A);throw\"both async and sync fetching of the wasm failed\"}function U(A,e,t){return function(A){return Promise.resolve().then((()=>b(A)))}(A).then((A=>WebAssembly.instantiate(A,e))).then((A=>A)).then(t,(A=>{a(\"failed to asynchronously prepare wasm: \".concat(A)),_(A)}))}m(k=\"data:application/octet-stream;base64,AGFzbQEAAAABhAVNYAJ/fwBgAX8AYAF/AX9gAn9/AX9gA39/fwBgA39/fwF/YAR/f39/AGAEf39/fwF/YAZ/f39/f38Bf2AFf39/f38Bf2AFf39/f38AYAJ/fgBgBn9/f39/fwBgCH9/f39/f39/AX9gA39/fgBgB39/f39/f38Bf2AAAGAFf35+fn4AYAABf2ABfwF+YAV/f39/fgF/YAV/f35/fwBgB39/f39/f38AYAJ/fwF+YAR/f35/AGAEf39/fwF+YAR/fn5/AGAKf39/f39/f39/fwBgCn9/f39/f39/f38Bf2ACfn8Bf2ADf35/AX9gAn9+AX5gBX9/f398AX9gAAF8YAJ+fwBgAn9+AX9gAn98AGAAAX5gCH9/f39/f39/AGABfgF/YAF+AX5gDH9/f39/f39/f39/fwF/YAV/f39+fwBgB39/fn9/f38Bf2AEf39+fwF/YAN/fn8AYAZ/f39/fn8Bf2APf39/f39/f39/f39/f39/AGALf39/f39/f39/f38Bf2AHf39/f39+fgF/YAZ/f39/fn4Bf2AGf39/fn9/AGADf39+AX9gB39/f39+f38AYAR+fn5+AX9gB39/f35/f38BfmACfn4BfGABfwF8YAV/f39/fgBgBn9/fn9/fwF/YAJ8fwBgA39/fwF8YAN/f38BfWACfn4BfWADfn5+AX9gBn98f39/fwF/YAJ8fwF8YAR/f39+AX5gBn9/f39+fwBgCH9/f39/fn9/AX9gEH9/f39/f39/fn5/f39/f38Bf2AJf39/f39+f39/AX9gCn9/f39/fn9/f38Bf2AGf39/fn9/AX9gCX9/f39/f35/fwBgBn9+f39/fwBgBH9/f34BfwI9CgFhAWEABgFhAWIAEAFhAWMACQFhAWQAAwFhAWUAAwFhAWYAEgFhAWcAIQFhAWgAAgFhAWkAIQFhAWoAAAPxDu8OAgECAwMCAwIQAyICAAECAQIAAwUABQMCAQMAAwICAgMBAAADAxEBBAMSAwACERMCAgEBAwQBAQICAQUCAQACAgEBAAECAAIEAAICAAADAQMEBQADAAYAGgoCAgMCAAMCAwIAAhAAAgACAwAEAwUDACMRAAMFAgAJAgAAAQIHFwAAAgQDAAIBAwADCAAAAgIAAAEFBQICAwMDAwoBCAMCAAEDAgsHFRsTAQEKAgIDAAED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IwBBEGsiAyQAAkACQAJAIAIQwgMEQCAAIQEgACACEHkMAQsgAkHv////B0sNASADQQhqIAAgAhC0AkEBahCGAiADKAIMGiAAIAMoAggiARCKASAAIAMoAgwQiQEgACACEG8LIAEgBCACQQFqEIwBIANBEGokAAwBCxBuAAsgAAtAAQJ/AkACfyAAIAAoAhAiAUYEQCAAIQEgACgCAEEQagwBCyABRQ0BIAEoAgBBFGoLIQIgASACKAIAEQEACyAACwUAEAEACygBAX8gACABKAIAIAEgAS0ACyIAwEEASCICGyABKAIEIAAgAhsQ1AULKwEBfwNAIAEgAKdB/wBxIABC/wBWIgJBB3RywBD8ASAAQgeIIQAgAg0ACwvsAQECfyAAQazSATYCOCAAQZjSATYCACAAQbjSASgCACIBNgIAIAAgAUEMaygCAGpBvNIBKAIANgIAIAAgACgCAEEMaygCAGoiAkEANgIUIAIgAEEEaiIBNgIYIAJBADYCDCACQoKggIDgADcCBCACIAFFNgIQIAJBIGpBAEEoEB0aIAJBHGoQ2gkgAkKAgICAcDcCSCAAQZjSATYCACAAQazSATYCOCABQdjOATYCACABQQRqENoJIAFCADcCGCABQgA3AhAgAUIANwIIIAFCADcCICABQcjPATYCACABQRA2AjAgAUIANwIoIAALhQECBH4DfyABKAIEIQYgAAJ/AkADQCAGRSACQj9Wcg0BIAEoAgAiBywAACIIrUL/AIMiBCAChiIFIAKIIARSDQEgASAGQQFrIgY2AgQgASAHQQFqNgIAIAJCB3whAiADIAV8IQMgCEEASA0ACyAAIAM3AwBBAQwBCyAAQQA6AABBAAs6AAgLBgAgABALCzYBAX9BASAAIABBAU0bIQACQANAIAAQRSIBDQFByMMCKAIAIgEEQCABERAADAELCxABAAsgAQuuAQEGfyMAQRBrIgIkACAAKAIAIQMgAkEEaiIEIABBCGoQ9AIgAigCBCAEIAIsAA9BAEgbIQVBoK0CKAIABEBBqK0CKAIAIQYjAEEQayIBJAAgASAFNgIIIAEgAzYCDCABIAY2AgRBoK0CKAIAIgNFBEAQEgALIAMgAUEMaiABQQhqIAFBBGogAygCACgCGBEGACABQRBqJAALIAQQChogAEEEahDdARogAkEQaiQACwwAQZCsAigCACAATAs2ACAALAALQQBIBEAgACgCABALCyAAIAEpAgA3AgAgACABKAIINgIIIAFBADoACyABQQA6AAALjwEBBH8jAEEQayIDJAAgASgCACEEIAMgASgCBCABLQALIgIgAsBBAEgiAhs2AgwgAyAEIAEgAhs2AgggACgCACAAIAAtAAsiBMBBAEgiAhsgAygCCCADKAIMIgEgACgCBCAEIAIbIgAgACABSyIEGxDEBSICQX8gBCAAIAFJGyACGyEFIANBEGokACAFQR92CykBAX8gAgRAIAAhAwNAIAMgAToAACADQQFqIQMgAkEBayICDQALCyAACyoBAX8CQCAAEAwiAiABSQRAIAAgASACaxCzCQwBCyAAIAAQISABEMcJCwszAQF/IAIEQCAAIQMDQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQQFrIgINAAsLIAALCQAgABAhIAFqCxIAIAAQiwEEQCAAKAIADwsgAAsKACAAKAIAEKUEC5ABAQV/AkAgACgCBCIFIAAtAAsiAiACwCIGQQBIGyABKAIEIAEtAAsiBCAEwCIEQQBIG0cNACABKAIAIAEgBEEASBshASAGQQBOBEADQCACRSEDIAJFDQIgAC0AACABLQAARw0CIAFBAWohASAAQQFqIQAgAkEBayECDAALAAsgACgCACABIAUQxAVFIQMLIAMLDAAgACABQRxqENkJCz4AIABBADYCCCAAQgA3AgAgACABKAIANgIAIAAgASgCBDYCBCAAIAEoAgg2AgggAUEANgIIIAFCADcCACAACxsBAX8jAEEQayIBJAAgABCtCiABQRBqJAAgAAsbAQF/QQohASAAEIsBBH8gABCHAkEBawVBCgsLiwICA38CfgJAIAApA3AiBFBFIAQgACkDeCAAKAIEIgEgACgCLCICa6x8IgVXcUUEQCMAQRBrIgIkAEF/IQECQCAAEOIKDQAgACACQQ9qQQEgACgCIBEFAEEBRw0AIAItAA8hAQsgAkEQaiQAIAEiA0EATg0BIAAoAgQhASAAKAIsIQILIABCfzcDcCAAIAE2AmggACAFIAIgAWusfDcDeEF/DwsgBUIBfCEFIAAoAgQhASAAKAIIIQICQCAAKQNwIgRQDQAgBCAFfSIEIAIgAWusWQ0AIAEgBKdqIQILIAAgAjYCaCAAIAUgACgCLCIAIAFrrHw3A3ggACABTwRAIAFBAWsgAzoAAAsgAwtoAQZ/IwBBEGsiAyQAIABBIGohBCABQSBqIQUDQAJAIAEgBUYNAEEBIQIgACAERg0AIAAtAAAiBiABLQAAIgdJDQBBACECIAYgB0sNACABQQFqIQEgAEEBaiEADAELCyADQRBqJAAgAgsLACAAQcDTABChCQtyAQN/AkAgARC3CSICIAAQ6QUiA00EQCAAECEiAyABIAJBAnQiBBBbGiMAQRBrIgEkACAAIAIQrgIgAUEANgIMIAMgBGogAUEMahCAASABQRBqJAAMAQsgACADIAIgA2sgABAMIgBBACAAIAIgARCyCQsLCQAgACABEOcECxAAIAAQnwogARCfCnNBAXMLEAAgABCgCiABEKAKc0EBcwt1AQF+IAAgASAEfiACIAN+fCADQiCIIgIgAUIgiCIEfnwgA0L/////D4MiAyABQv////8PgyIBfiIFQiCIIAMgBH58IgNCIIh8IAEgAn4gA0L/////D4N8IgFCIIh8NwMIIAAgBUL/////D4MgAUIghoQ3AwALeAIDfwF9IwBBEGsiAiQAIABBAUHAACAALQAea3QiATYCECAAIAEQqws2AgwgACgCECIBQYCAgIB4RiEDIABBgICAgHgCfyAAKgIYIAGzlCIEQwAAgE9dIARDAAAAAGBxBEAgBKkMAQtBAAsgAxs2AhQgAkEQaiQAC2ACAX8BfgNAIAAoAgwgAkEDdGoiAygCAARAIAMpAgAhBCADIAEpAgA3AgAgASAENwIAIAEgBKdBgAJqNgIAIAJBAWoiAkEAIAIgACgCEEcbIQIMAQsLIAMgASkCADcCAAtbACAAIAEpAwA3AwAgACABKQMINwMIIABBGGogAUEYahB2GiAAQThqIAFBOGoQsQMaIAAgAS0AaDoAaCAAIAEpA2A3A2AgACABKQNYNwNYIAAgASkDUDcDUCAAC+8CAQZ/QfC0Ai0AAARAQey0AigCAA8LIwBBIGsiAiQAAkACQANAIAJBCGoiBCAAQQJ0IgNqAn9BASAAdEH/////B3EiBUEBckUEQCADKAIADAELIABBg8kAQdPSACAFGxCbCgsiAzYCACADQX9GDQEgAEEBaiIAQQZHDQALQQAQmgpFBEBBiNgBIQEgBEGI2AFBGBDHA0UNAkGg2AEhASAEQaDYAUEYEMcDRQ0CQQAhAEHEswItAABFBEADQCAAQQJ0QZSzAmogAEHT0gAQmwo2AgAgAEEBaiIAQQZHDQALQcSzAkEBOgAAQayzAkGUswIoAgA2AgALQZSzAiEBIAJBCGoiAEGUswJBGBDHA0UNAkGsswIhASAAQayzAkEYEMcDRQ0CQRgQRSIBRQ0BCyABIAIpAgg3AgAgASACKQIYNwIQIAEgAikCEDcCCAwBC0EAIQELIAJBIGokAEHwtAJBAToAAEHstAIgATYCACABCw0AIAApAwAgASkDAFQLAgALEQAgAC0ADARAIAAQChoLIAALwwoCBX8RfiMAQeAAayIFJAAgBEL///////8/gyEMIAIgBIVCgICAgICAgICAf4MhCiACQv///////z+DIg1CIIghDiAEQjCIp0H//wFxIQcCQAJAIAJCMIinQf//AXEiCUH//wFrQYKAfk8EQCAHQf//AWtBgYB+Sw0BCyABUCACQv///////////wCDIgtCgICAgICAwP//AFQgC0KAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEKDAILIANQIARC////////////AIMiAkKAgICAgIDA//8AVCACQoCAgICAgMD//wBRG0UEQCAEQoCAgICAgCCEIQogAyEBDAILIAEgC0KAgICAgIDA//8AhYRQBEAgAiADhFAEQEKAgICAgIDg//8AIQpCACEBDAMLIApCgICAgICAwP//AIQhCkIAIQEMAgsgAyACQoCAgICAgMD//wCFhFAEQCABIAuEIRlCACEBIBlQBEBCgICAgICA4P//ACEKDAMLIApCgICAgICAwP//AIQhCgwCCyABIAuEUARAQgAhAQwCCyACIAOEUARAQgAhAQwCCyALQv///////z9YBEAgBUHQAGogASANIAEgDSANUCIGG3kgBkEGdK18pyIGQQ9rEGFBECAGayEGIAUpA1giDUIgiCEOIAUpA1AhAQsgAkL///////8/Vg0AIAVBQGsgAyAMIAMgDCAMUCIIG3kgCEEGdK18pyIIQQ9rEGEgBiAIa0EQaiEGIAUpA0ghDCAFKQNAIQMLIANCD4YiC0KAgP7/D4MiAiABQiCIIgR+IhAgC0IgiCITIAFC/////w+DIgF+fCIPQiCGIhEgASACfnwiCyARVK0gAiANQv////8PgyINfiIV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ACACKAIINgIIIAAgAikDADcCACACQQA2AgggAkIANwMAIABBAToADCACEAoaCyACQSBqJAALDQAgACgCABCxChogAAsNACAAKAIAELcKGiAAC2IBA38jAEEQayICJAAgAEEgaiEDA0AgACADRwRAIAAtAAAhBCAAIAEtAAA6AAAgASAEOgAAIAFBAWohASAAQQFqIQAMAQsLIAIgATYCDCACIAM2AgggAigCDBogAkEQaiQACyYBAX4gACgCACIAKQMAIQIgACABKAIAIgApAwA3AwAgACACNwMACzkBAn8gAEEgaiECA0ACQCAAIAJGIgMNACAALQAAIAEtAABHDQAgAUEBaiEBIABBAWohAAwBCwsgAws3AQF/IwBBEGsiASQAIAEgADYCDCABKAIMIgAoAgAEQCAAELYIIAEoAgwoAgAQCwsgAUEQaiQACxEAIAAgASAAKAIAKAIcEQMAC78BAQN/IAAtAABBIHFFBEACQCABIQMCQCACIAAiASgCECIABH8gAAUgARDZCg0BIAEoAhALIAEoAhQiBWtLBEAgASADIAIgASgCJBEFABoMAgsCQCABKAJQQQBIDQAgAiEAA0AgACIERQ0BIAMgBEEBayIAai0AAEEKRw0ACyABIAMgBCABKAIkEQUAIARJDQEgAyAEaiEDIAIgBGshAiABKAIUIQULIAUgAyACEB8aIAEgASgCFCACajYCFAsLCwtKAQF/IAAgAUkEQCAAIAEgAhAfDwsgAgRAIAAgAmohAyABIAJqIQEDQCADQQFrIgMgAUEBayIBLQAAOgAAIAJBAWsiAg0ACwsgAAswAQF/IAAoAgQiAiAAKAIISQRAIAIgASgCADYCACAAIAJBBGo2AgQPCyAAIAEQ/wULEQAgACABEBAiAEEBOgAQIAALMAEBfyAAKAIEIgIgACgCCEkEQCACIAEpAwA3AwAgACACQQhqNgIEDwsgACABEPAFC6EBAQJ/AkAgABAMRSACIAFrQQVIcg0AIAEgAhCqBCACQQRrIQQgABAhIgIgABAMaiEFAkADQAJAIAIsAAAhACABIARPDQAgAEEATCAAQf8ATnJFBEAgASgCACACLAAARw0DCyABQQRqIQEgAiAFIAJrQQFKaiECDAELCyAAQQBMIABB/wBOcg0BIAIsAAAgBCgCAEEBa0sNAQsgA0EENgIACwsI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AC0AC0H/AHE6AAsLrgEBBn8jAEEQayICJAAgAkEIaiIDIAAQuAIaAkAgAy0AAEUNACACQQRqIgMgACAAKAIAQQxrKAIAahAkIAMQxQMhBCADECIgAiAAEMQDIQUgACAAKAIAQQxrKAIAaiIGEOMCIQcgAiAEIAUoAgAgBiAHIAEgBCgCACgCHBEUADYCBCADELYCRQ0AIAAgACgCAEEMaygCAGpBBRC5AgsgAkEIahC3AiACQRBqJAAgAAvGCQIEfwZ+IwBB8ABrIgYkACAEQv///////////wCDIQkCQAJAIAFQIgUgAkL///////////8AgyIKQoCAgICAgMD//wB9QoCAgICAgMCAgH9UIApQG0UEQCADQgBSIAlCgICAgICAwP//AH0iC0KAgICAgIDAgIB/ViALQoCAgICAgMCAgH9RGw0BCyAFIApCgICAgICAwP//AFQgCkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEEIAEhAwwCCyADUCAJQoCAgICAgMD//wBUIAlCgICAgICAwP//AFEbRQRAIARCgICAgICAIIQhBAwCCyABIApCgICAgICAwP//AIWEUARAQoCAgICAgOD//wAgAiABIAOFIAIgBIVCgICAgICAgICAf4WEUCIFGyEEQgAgASAFGyEDDAILIAMgCUKAgICAgIDA//8AhYRQDQEgASAKhFAEQCADIAmEQgBSDQIgASADgyEDIAIgBIMhBAwCCyADIAmEUEUNACABIQMgAiEEDAELIAMgASABIANUIAkgClYgCSAKURsiCBshCiAEIAIgCBsiC0L///////8/gyEJIAIgBCAIGyICQjCIp0H//wFxIQcgC0IwiKdB//8BcSIFRQRAIAZB4ABqIAogCSAKIAkgCVAiBRt5IAVBBnStfKciBUEPaxBhIAYpA2ghCSAGKQNgIQpBECAFayEFCyABIAMgCBshAyACQv///////z+DIQQgB0UEQCAGQdAAaiADIAQgAyAEIARQIgcbeSAHQQZ0rXynIgdBD2sQYUEQIAdrIQcgBikDWCEEIAYpA1AhAwsgBEIDhiADQj2IhEKAgICAgICABIQhASAJQgOGIApCPYiEIQ4gAiALhSENAn4gA0IDhiICIAUgB0YNABogBSAHayIHQf8ASwRAQgAhAUIBDAELIAZBQGsgAiABQYAB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QCACQSBqIAApAAggBIVCACAAKQAAQtvR0IWa2t+BZ4VCABAvIABBEGohACADQRBrIQMgAikDKCACKQMghSEEDAELCyAAIANqIgBBCGspAAAhBSAAQRBrKQAACyEGIAJBEGogBCAFhUIAIAZC29HQhZra34FnhUIAEC8gAiACKQMYIAIpAxCFQgAgAa1C29HQhZra34FnhUIAEC8gAikDCCEIIAIpAwAhByACQeAAaiQAIAggB4ULLgAgACAAKAIIQYCAgIB4cSABQf////8HcXI2AgggACAAKAIIQYCAgIB4cjYCCAsJACAAIAE2AgALCgAgAC0AC0EHdgsMACABIAIgABC8ChoLHAAgACABENEBIgEgACgCBEYEQBASAAsgAUEQagtGACAAKAIAIgAgASkDCBD6AyABLQBIQQFGBEAgACABQUBrKQMAEPoDCwJAIAEtAGhFDQAgASkDWFANACAAIAEpA2AQ+gMLCx0BAn8jAEEQayIBJAAgABCkCCECIAFBEGokACACCwkAIABBABCoBQsLACAAIAFBMBCeCQsPACAAIAFBmAlB6AgQqwkLjgEAIAAgASkDADcDACAAIAEoAgg2AgggAUIANwMAIAFBADYCCCAAQRBqIAFBEGpBOBAfGiAAQcgAaiABQcgAahAlGiAAIAEoAlw2AlwgACABKQJUNwJUIAFCADcCVCABQQA2AlwgACABKQN4NwN4IAAgASkDcDcDcCAAIAEpA2g3A2ggACABKQNgNwNgIAALNAEBfyABIAVPBEAQAQALIAQgACgCCCAAKAIAayADbSIAQQF0IgYgASABIAZJGyAAIAJPGwtOAQF/IAAoAgQiAiAAKAIIRwRAIAIgASkAADcAACACIAEpABg3ABggAiABKQAQNwAQIAIgASkACDcACCAAIAJBIGo2AgQPCyAAIAEQygkLBwAgABAmGgsPACAAIAAoAgAoAgwRAgALBwAgABAMRQsRACAAIAEgASgCACgCHBEAAAsRACAAIAEgASgCACgCGBEAAAsVACAAEKkKIAAoAgAiAARAIAAQCwsLEwAgACABIAIgACgCACgCDBEFAAsnAQF/IAJBAE4EfyAAKAIIIAJB/wFxQQJ0aigCACABcUEARwVBAAsLNwACf0EBIABBgAFJDQAaQQIgAEGAgAFJDQAaQQMgAEGAgIABSQ0AGkEE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LAALQQBODQAgAigCBEGBgIAESQ0AIAMoAhBFDQEgA0EWIAoQgAMQ/wIMAQsgChDGAyAANQI4QoCU69wDfnw3A3AgAEEgaiEBIABBzABqIQAgBARAIAogCkH+AGogAiADIApB8ABqIAUgBiAHIAEgBygCBCAHLQALIgEgAcBBAEgbGyAIIAkQrQshAyMAQRBrIgEkAEH4ABAYIgJBADYCACABIABBCGo2AgggAUEBNgIMIAJBCGogAxDKBBogAiAANgIEIAIgACgCACIENgIAIAQgAjYCBCAAIAI2AgAgACAAKAIIQQFqNgIIIAFBADYCBCABQQRqEJABIAFBEGokACADEL8CDAELIAogCkH+AGogAiADIApB8ABqIAUgBiAHIAEgBygCBCAHLQALIgEgAcBBAEgbGyAIIAkQrQshAyMAQRBrIgEkAEH4ABAYIgJBADYCACABIABBCGo2AgggAUEBNgIMIAJBCGogAxDKBBogAiAANgIAIAIgACgCBCIENgIEIAQgAjYCACAAIAI2AgQgACAAKAIIQQFqNgIIIAFBADYCBCABQQRqEJABIAFBEGokACADEL8CCyAKQYABaiQAC2gCAX8EfiMAQSBrIgEkACABQRBqIAApAwBCAELp2uDZjsH6751/QgAQLyABIAApAwggASkDGCABKQMQhXxCAELp2uDZjsH6751/QgAQLyABKQMIIQUgASkDACEEIAFBIGokACAFIASFCxIAIABBLGoQ4AQgAEEgahAPGgsLACAAQdjUABC3AwvKAwEHfyMAQbABayIFJAACQAJAIAIoAgAiCCACKAIEIglHBEAgAygCACEGIAMoAgQhBwwBCyADKAIAIgYgAygCBCIHRw0AIAVBADYCICAFQgA3AxggACAFQRhqIgAQ+QEaIAAQDxoMAQsgBUEANgKsASAFQgA3AqQBIAVBpAFqIAcgBmtBBXUgCSAIa0EFdWoQdCABQbwBaiEGIAIoAgQhByACKAIAIQIDQAJAAkAgAiAHRwRAIAYgAhChASIIIAEoAsABRwRAIAUgCEEgajYCGCAFQaQBaiAFQRhqEFwMAwsgBA0CQQAQGgRAIAVBHGoQFSEKIAVBADYCGCAKIAFB0ANqEBNBy88AEA0hCyAFQQxqIgMgAhCCBSALIAMQExogAxAKGiAFQRhqEBkLIABBADoADCAAQQA6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AgBB+d2rxQJHDQEgAEEANgIAIABBBGohCCABQZSsAiABGyEDA0AgBygCGCAETQRAAkBBACEBA0AgACgCCCECIAEgACgCBE8NASACIAFBBHRqKAIMIgIEQCADKAIIIAIgAygCBBEAAAsgAUEBaiEBDAALAAsFAkAgBygCHCAEQTBsaiICLQAgQQRxBEAgAigCBCAAIAIoAhBqKAIARw0BCyACKAIIQQJGBEAgACACKAIUaigCACIFRQ0BIAAgAigCEGooAgAhBkEAIQECQAJAAkACQCACKAIMQQ5rDgMAAQIDCwNAIAEgBkYNAyAFIAFBAnRqKAIAIgIEQCADKAIIIAIgAygCBBEAAAsgAUEBaiEBDAALAAsDQCABIAZGDQIgBSABQQN0aigCBCICBEAgAygCCCACIAMoAgQRAAALIAFBAWohAQwACwALA0AgASAGRg0BIAUgAUECdGooAgAgAxDjASABQQFqIQEMAAsACyADKAIIIAUgAygCBBEAAAwBCwJAAkACQCACKAIMQQ5rDgMAAQIDCyAAIAIoAhRqKAIAIgFFDQIgASACKAIcRg0CIAMoAgggASADKAIEEQAADAILIAggAigCFGooAgAiAUUNASACKAIcIgIEQCACKAIEIAFGDQILIAMoAgggASADKAIEEQAADAELIAAgAigCFGooAgAiAUUNACABIAIoAhxGDQAgASADEOMBCyAEQQFqIQQMAQsLIAIEQCADKAIIIAIgAygCBBEAAAsgAygCCCAAIAMoAgQRAAALDwtBhMgAQbXCAEGCGkH4PBAAAAsOACAAQQhqEBEaIAAQCwsKACAAQQhqEBEaCwwAIAEgAikDADcDAAsOACAAIAEQ2QJBAToAWAsPACAALQAQBEAQEgALIAALEgAgAC0AEEEFRwRAEBIACyAAC74CAQR/IAAoAgQgACgCCEkEQCAAIAAoAgQgARDuA0EYajYCBA8LIwBBIGsiBCQAIARBDGogACAAKAIEIAAoAgBrQRhtQQFqENsBIAAoAgQgACgCAGtBGG0gAEEIahC+ASICKAIIIAEQ7gMaIAIgAigCCEEYajYCCCAAKAIEIQMgACgCACEFIAIoAgQhAQNAIAMgBUcEQCABQRhrIANBGGsiAxDuAyEBDAELCyACIAE2AgQgACgCACEDIAAgATYCACACIAM2AgQgACgCBCEBIAAgAigCCDYCBCACIAE2AgggACgCCCEBIAAgAigCDDYCCCACIAE2AgwgAiACKAIENgIAIAIoAgQhAANAIAAgAigCCCIBRwRAIAIgAUEYayIBNgIIIAEQKgwBCwsgAigCACIABEAgABALCyAEQSBqJAALNQEBfwJAIAAtAAwiAiABLQAMRgRAIAJFDQEgACABEEwPCyACBEAgABCKBA8LIAAgARC0AwsLFAAgACABIAIgA0EsQd7oxS4QpgEL4QEBBH8jAEEQayIDJAAgAyABNgIEIwBBEGsiAiQAIAMgACACQQxqIAEQjggiBCgCACIBBH9BAAVBOBAYIQEgAiAAQQRqNgIEIAIgATYCACABQRBqIgEgAygCBCkDADcDACABQQhqEGYaIAJBAToACCAAIAIoAgwgBCACKAIAEP8DIAIoAgAhASACQQA2AgAgAigCACEAIAJBADYCACAABEAgAi0ACARAIABBGGoQ4QILIAAEQCAAEAsLC0EBCzoADCADIAE2AgggAkEQaiQAIAMoAgghBSADQRBqJAAgBUEYagsbACAAIAEpAwA3AwAgAEEIaiABQQhqEBAaIAALCQAgAEEoEKUJC9QBAQN/IAAoAgQhAiAAKAIAIQQgASgCBCEDA0AgAiAERwRAIANBKGsiAyACQShrIgIpAwA3AwAgAyACKAIINgIIIAJBADYCCCACQgA3AwAgAyACKQMQNwMQIAMgAikDGDcDGCADIAIoAiA2AiAgAkEANgIgIAJCADcDGAwBCwsgASADNgIEIAAoAgAhAiAAIAM2AgAgASACNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAsUACAAQRBqEA8aIABBBGoQiwQgAAs3AQF/IwBBEGsiASQAIAEgADYCDCABKAIMIgAoAgAEQCAAEMcIIAEoAgwoAgAQCwsgAUEQaiQAC14BA38jAEEQayIBJAAgASAANgIMIAEoAgwiACgCAARAIAAoAgAhAyAAKAIEIQIDQCACIANHBEAgAkGAAWsQfyECDAELCyAAIAM2AgQgASgCDCgCABALCyABQRBqJAALJgAgAEGwAWoQ2QggAEGQAWoQqQMgAEHwAGoQqQMgAEHkAGoQ2AgLVQEDfyMAQSBrIgIkACACQRBqIgMgARCcAiACQQhqIABBGGoiBCADEHUgAS0AUEUEQCADIAQgARB1CyAAIAApA0AgAS0AMEEAR618NwNAIAJBIGokAAvpAgIFfwF+IwBBEGsiBCQAAkAgASgCBCABKAIISQRAIAEgAhCuCQwBCyABIAIQrQkLIAEoAgRBDGsiBRA4IginQf8BcUGAAnIhAiAIIAExAB6IpyEDIAACfwNAIAEoAgwgA0EDdGoiBigCACIHIAJPBEACQCACIAdHDQAgBSABKAIAIAYoAgRBDGxqECNFDQAgARDABSABKAIAIAEoAgwgA0EDdGooAgRBDGxqIQJBAAwDCyADQQFqIgNBACADIAEoAhBHGyEDIAJBgAJqIQIMAQsLIAEoAgQgASgCAGtBDG0iBkEBayEFAkAgASgCFCAGSQRAIAEoAhRBgICAgHhGBEAgARDABRASAAsgASABLQAeQQFrOgAeIAEQTSABEDAgARD9CwwBCyAEIAU2AgwgBCACNgIIIAQgBCkCCDcDACABIAQgAxAxCyABKAIAIAVBDGxqIQJBAQs6AAQgACACNgIAIARBEGokAAvOAQEEfyMAQRBrIggkAAJAIABFBEAMAQsgBCgCDCEHIAIgAWsiCUEASgRAIAAgASAJIAAoAgAoAjARBQAgCUcNAQsgByADIAFrIgFrQQAgASAHSBsiAUEASgRAIAhBBGoiByABIAUQnQQgACAIKAIEIAcgCCwAD0EASBsgASAAKAIAKAIwEQUAIQUgBxAKGiABIAVHDQELIAMgAmsiAUEASgRAIAAgAiABIAAoAgAoAjARBQAgAUcNAQsgBEEANgIMIAAhBgsgCEEQaiQAIAYLIQAgAEEAOgAMIABBADoAACABLQAMBEAgACABELQDCyAACxEAIAAgARAlIgBBAToADCAACxcAIAEgAjYCACABQQhqIABBCGoQgwMaCx8BAX9BIBAYIgIgATYCACACQQhqIABBCGoQgwMaIAILrgEBA38jAEEQayICJAAgAiABOgAPAkACQAJ/IAAQiwEiBEUEQEEKIQEgABC3BAwBCyAAEIcCQQFrIQEgACgCBAsiAyABRgRAIAAgAUEBIAEgARDgBSAAECEaDAELIAAQIRogBA0AIAAiASADQQFqEHkMAQsgACgCACEBIAAgA0EBahBvCyABIANqIgAgAkEPahCDASACQQA6AA4gAEEBaiACQQ5qEIMBIAJBEGokAAtiAQJ/IwBBIGsiAiQAAkAgASAAKAIIIAAoAgAiA2tBDG1LBEAgAUHWqtWqAU8NASAAIAJBDGogASAAKAIEIANrQQxtIABBCGoQqgIiABCcBCAAELkDCyACQSBqJAAPCxABAAsLACAAIAE2AgAgAAsPACAAIAAoAgAoAiQRAgALEQAgACABIAEoAgAoAiARAAALEQAgACABIAEoAgAoAiwRAAALDAAgAEGChoAgNgAACxEAIAAQISAAEAxBAnRqEOwFCw4AIAAQISAAEAxqEOwFCxYAIAAgASACIAMgACgCACgCIBEHABoLGQAgAkEBEKEKIQEgACACNgIEIAAgATYCAAsOACAAKAIIQf////8HcQsSACABIAEgAkECdGogABCoChoLBwAgACABRgsOACAAIAEpAwA3AwAgAAuUAgIHfwJ+IwBBQGoiACQAQQAgAEEoahDCCgRAQdCtAigCABDbBQALIABBGGogAEEoahCKAiEEIAAgACgCMEHoB202AgwgAEEQaiAAQQxqEMEKIQUjAEEgayIBJAAjAEEQayIDJAAjAEEQayIGJAAjAEEQayICJAAgAiAEKQMAQsCEPX43AwAgAkEIaiACEIoCKQMAIQcgAkEQaiQAIAZBEGokACADIAc3AwggASADKQMINwMIIANBEGokACABKQMIIQcgASAFKQMANwMAIAEgByABKQMAfDcDECABQRhqIAFBEGoQigIpAwAhByABQSBqJAAgACAHNwMgIABBOGogAEEgahCKAikDACEIIABBQGskACAICxAAIABBIEYgAEEJa0EFSXILFQAgACABIAIgA0HwAEGTyaQSEKYBC2oBA38jAEEQayICJAAgAC0AMEH/AUcEQCMAQRBrIgEkACABQbDbACkDADcDCCACQQ9qIAAgAUEIakF/IAAtADAiAyADQf8BRhtBAnRqKAIAEQAAIAFBEGokAAsgAEH/AToAMCACQRBqJAALgQIBA38jAEEQayIHJAAgBigCBCEJIAYtAAshCCAAQQA2AgggAEIANwIAIABBE0ESIAEbIAkgCCAIwEEASBtqEGcgAEHrMRD9AiAAIAIQ/QICQCABRQRAIAAgAxCkBiAAIAQQowYgACAFEP0CDAELIAAgBBCjBiAHQQA2AgwgACAHQQxqQQQQdxoLAkAg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QcQAayIBNgIIIAEQhgEaDAELCyAAKAIAIgAEQCAAEAsLCxUAIAAgASACIANBxABBxIePHhCmAQsoACABLQBQRQRAIAFBOGoQciEBCyAAIAEpAwA3AwAgACABKQMINwMIC+MCAgd/AX4jAEEwayIBJAAgAC0AJUUEQCAAQQVqIQMgAUEANgIoIAFCADcDIEIBIAFBIGoQFANAIAAtAAQhAiAAKAI4IAAoAjQiBGtBLG2tIAhYBEACQCACRQ0AIAAoAiwiAkEEay0AAEUNACACQcQAaxCdAiABQSBqIAAoAixBP2tBIBB3GgsgASABKAIgIAFBIGogASwAKyICQQBIIgQbIAEoAiQgAkH/AXEgBButEK8DIAAtACUhByADIAEpABg3ABggAyABKQAQNwAQIAMgASkACDcACCADIAEpAAA3AAAgB0UEQCAAQQE6ACULIAFBIGoQChoFIAinIQUCQCACRQ0AIAVBxABsIgIgACgCKGoiBi0AQEUNACAGEJ0CIAFBIGogACgCKCACakEFakEgEHcaIAAoAjQhBAsgAUEgaiAEIAVBLGxqQQxqQSAQdxogCEIBfCEIDAELCwsgAUEwaiQACw8AIAAgARDUCEEBOgDAAQtRACAAAn8gAS0AhAEEQCABQcQAahCdAiAAIAEpAGE3ABggACABKQBZNwAQIAAgASkAUTcACCAAIAEpAEk3AABBAQwBCyAAQQA6AABBAAs6ACALTAAgAAJ/IAEtAEAEQCABEJ0CIAAgASkABTcAACAAIAEpAB03ABggACABKQAVNwAQIAAgASkADTcACEEBDAELIABBADoAAEEACzoAIAsnAQF/IAAgASgCACABIAEtAAsiAMBBAEgiAhsgASgCBCAAIAIbEHcLwgEBA38gACgCBCICIAAoAghJBEAgAiABKQIANwIAIAIgASgCCDYCCCABQgA3AgAgAUEANgIIIAAgAkEMajYCBA8LIwBBIGsiAyQAIANBDGogACAAKAIEIAAoAgBrQQxtQQFqEOICIAAoAgQgACgCAGtBDG0gAEEIahCqAiICKAIIIgQgASkCADcCACAEIAEoAgg2AgggAUIANwIAIAFBADYCCCACIAIoAghBDGo2AgggACACEJwEIAIQuQMgA0EgaiQAC40CAgN/AX4jAEEwayIBJAAgAEEIaiECAkACQAJAAkACQCAALQAgQQJrDgQAAwECBAsgACgCACICKAIEIAItAAsiAiACwEEASBtFDQMgACAAKQMIENoBDAMLIAFBADYCLCABQgA3AiQgAUEkaiIDIAIQXiABIAEoAiQ2AhggASkCKCEEIAFBADYCLCABIAQ3AhwgAUIANwIkIAAgAUEYaiIAELIDIAAQDxogAxAPGgwCCyAAIAIgACkDEBDJBQwBCyAAQRBqIAIQXiABIAAoAhA2AgwgASAAKAIUNgIQIAEgACgCGDYCFCAAQQA2AhggAEIANwMQIAAgAUEMaiIAELIDIAAQDxoLIAFBMGokAAuTBAIEfwF+IwBBQGoiAiQAIABBCGohAwJAAkACQAJAAkACQAJAIAAtACAOBgAFBAMBAgYLIAIgATcDGCADIAJBGGoQlAQMBQsgASADKQMAUQRAIAJCAjcDICACIAE3AxggAyACQRhqEPYIDAULIAJBADYCPCACQgA3AjQgAkE0aiIFQQIQ4AIgBSADEF4gAiACKQI4NwIkIAIgATcDGCACKAI0IQAgAkEANgI0IAIgADYCICACQgA3AjggAkEYaiEEIwBBEGsiACQAAkAgAy0AGEEDRgRAIAMgBBDtCAwBCyAAIAQ2AgwgACADNgIIIAAoAgwhAyAAKAIIIgQQpQEgBCADEOwIQQM6ABgLIABBEGokACACQSBqEA8aIAUQDxoMBAsgACkDECEGIAEgACkDCFEEQCAAIAZCAXw3AxAMBAsgACADIAYQyQUgAiABNwMYIAMgAkEYahCUBAwDCyABIAApAwhRBEAgAiAAKAIQNgIMIAIgACgCFDYCECACIAAoAhg2AhQgAEEANgIYIABCADcDECAAIAJBDGoiABCyAyAAEA8aIAJCAjcDICACIAE3AxggAyACQRhqEPYIDAMLIABBEGogAxBeIAMgATcDAAwCCyAAIAApAwgQ2gEgAiABNwMYIAMgAkEYahCUBAwBCyAAIAApAwgQ2gEgAiABNwMYIAMgAkEYahCUBAsgAkFAayQAC7gCAQN/IAAgAUcEfyABLQALIgPAIQIgACwAC0EATgRAIAJBAE4EQCAAIAEpAgA3AgAgACABKAIINgIIDwsgASgCACEEIAEoAgQhASMAQRBrIgIkAAJAIAFBCk0EQCAAIAEQeSAAIAQgARCMASACQQA6AA8gACABaiACQQ9qEIMBDAELIABBCiABQQprIAAQtwQiAEEAIAAgASAEEJ4ECyACQRBqJAAPCyABKAIAIAEgAkEASCICGyEEIAEoAgQgAyACGyEBIwBBEGsiAiQAAkAgASAAEIcCIgNJBEAgACgCACEDIAAgARBvIAMgBCABEIwBIAJBADoADyABIANqIAJBD2oQgwEMAQsgACADQQFrIAEgA2tBAWogACgCBCIAQQAgACABIAQQngQLIAJBEGokAEEABSAACxoLMAEBfyAAKAIEIgIgACgCCEcEQCACIAEpAwA3AwAgACACQQhqNgIEDwsgACABEPAFC/4CAgJ/AX4jAEEgayICJAAgAUEIaiEDAkACQANAIAEpAxgiBEIAUg0BIAJBEGogARCpASACLQAYRQRAIABBADoACCAAQQA6AAAgAEEAOgAQDAMLIAIpAxAiBEIAVQRAIAEgBDcDGCACIAEQFiACLQAIBEAgAikDACEEIAFBADoAICABQQE6ABAgASAENwMIDAILIABBADoACCAAQQA6AAAgAEEAOgAQDAMLIARCAFMEQCABQQE6ACAgAUIAIAR9NwMYDAELIAIgARAWIAItAAgEQCABIAIpAwA3AxggAS0AEARAIAFBADoAEAsgAUEAOgAgDAELCyAAQQA6AAggAEEAOgAAIABBADoAEAwBCyABIARCAX03AxggAS0AIARAIAJBEGogARAWIAACfyACLQAYRQRAIABBADoACEEADAELIAAgAikDEDcDCEEBCyIBOgAAIAAgAToAEAwBCyAAQQE6AAAgACADKQMANwMIIAAgAykDCDcDEAsgAkEgaiQACzsBAX8gACAGNgIAAkACQCAAKAIEIgcEQCAHKAIAIAVHDQEgB0EAEOMBCwwBCyAEIAMgAiABEAAACyAACxMAIAFBAXRB8KcCakECIAAQvAoLSgEBfyAAQQA2AgwgACADNgIQIAEEQCABEPwIIQQLIAAgBDYCACAAIAQgAkEMbGoiAjYCCCAAIAQgAUEMbGo2AgwgACACNgIEIAALEwAgABCfBCgCACAAKAIAa0ECdQsHACAAQRBqCw0AIAAoAgAgAUECdGoLFwAgABCLAQRAIAAgARBvDwsgACABEHkLYQEBfyMAQRBrIgIkACACIAA2AgwCQCAAIAFGDQADQCACIAFBAWsiATYCCCAAIAFPDQEgAigCDCACKAIIEMYKIAIgAigCDEEBaiIANgIMIAIoAgghAQwACwALIAJBEGokAAsJACAAQQgQ5QILuAEBBH8jAEEQayIIJAACQCAARQ0AIAQoAgwhBiACIAFrIgdBAEoEQCAAIAEgB0ECdiIHEP0FIAdHDQELIAYgAyABa0ECdSIBa0EAIAEgBkgbIgFBAEoEQCAAIAhBBGogASAFEP4JIgUQISABEP0FIQYgBRBBGiABIAZHDQELIAMgAmsiAUEASgRAIAAgAiABQQJ2IgEQ/QUgAUcNAQsgBCgCDBogBEEANgIMIAAhCQsgCEEQaiQAIAkLSgEBfyAAQQA2AgwgACADNgIQIAEEQCABEKsLIQQLIAAgBDYCACAAIAQgAkEDdGoiAjYCCCAAIAQgAUEDdGo2AgwgACACNgIEIAALDgAgACABKAIANgIAIAALJAAgAEELTwR/IABBEGpBcHEiACAAQQFrIgAgAEELRhsFQQoLCyQBAn8jAEEQayICJAAgACABEIgGIQMgAkEQaiQAIAEgACADGwsIACAAKAIARQuNAQEBfwJAIAAoAgQiASABKAIAQQxrKAIAaigCGEUNACAAKAIEIgEgASgCAEEMaygCAGoQugpFDQAgACgCBCIBIAEoAgBBDGsoAgBqKAIEQYDAAHFFDQAgACgCBCIBIAEoAgBBDGsoAgBqKAIYELkKQX9HDQAgACgCBCIAIAAoAgBBDGsoAgBqQQEQuQILC7MBAQF/IAAgATYCBCAAQQA6AAAgASABKAIAQQxrKAIAahC6CgRAIAEgASgCAEEMaygCAGooAkgiAQRAIwBBEGsiAiQAIAEgASgCAEEMaygCAGooAhgEQCACQQhqIAEQuAIaAkAgAi0ACEUNACABIAEoAgBBDGsoAgBqKAIYELkKQX9HDQAgASABKAIAQQxrKAIAakEBELkCCyACQQhqELcCCyACQRBqJAALIABBAToAAAsgAAsJACAAIAEQ/wgLCAAgAEH/AXELUAEBfgJAIANBwABxBEAgAiADQUBqrYghAUIAIQIMAQsgA0UNACACQcAAIANrrYYgASADrSIEiIQhASACIASIIQILIAAgATcDACAAIAI3AwgL2wECAX8CfkEBIQQCQCAAQgBSIAFC////////////AIMiBUKAgICAgIDA//8AViAFQoCAgICAgMD//wBRGw0AIAJCAFIgA0L/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AghBxABqNgIIIAAgAxCUAyADEJoCIAZBIGokAAsgACgCBBogBCAEKQCYATcDECAEIAQpAKABNwMYIAQgBCkAqAE3AyAgBCAEKQCQATcDCCABIAQtAIwBIAIgBEEIahCaBRogBRCeAwsgBEGwAWoQChogBEHAAWokAAsxAQJ+An9BASAAKQMAIgIgASkDACIDVA0AGkEAIAIgA1YNABogAEEIaiABQQhqEBwLCwwAIAAgARDUAkEBcwsbACAAIAFBgP///wdBBkH///8PQYCAgBAQtgMLFgAgAC0AQARAIAAQngMgAEEAOgBACwvkAQEFf0EBIQQCQCAAIAJGDQACQCABIAAQHARAQQAhBCAAKAJEIAEgAiADENgCDQEMAgsgASAAQQxqEH0EQCABIABBOGoQHEUNAUEAIQQgACgCRCABIAIgAxDYAkUNAiAAKAJIIAEgAiADENgCDQEMAgtBACEEIAAoAkQgASACIAMQ2AJFDQEgAygCACEHIAAoAhghBSAAKAIcIQgjAEEQayIGJAADQCAFIAhHBEAgBkEIaiAHIAUQtwggBUEEaiEFDAELCyAGQRBqJAAgACgCSCABIAIgAxDYAkUNAQtBASEECyAEC4cBACAAIAEQJSIAQQxqIAFBDGoQJRogAEEYaiABQRhqECUaIABBJGogAUEkahAlGiAAQQA6ADwgAEEAOgAwIAEtADwEQCAAIAEpAzA3AzAgACABKAI4NgI4IAFCADcDMCABQQA2AjggAEEBOgA8CyAAQUBrIAFBQGsQJRogACABKQNQNwNQIAALEAAgAC0AwAEEQCAAEPQBCwuNAwEEfyMAQRBrIgMkACABIAAQHCEFIAIgARAcIQQCfwJAIAVFBEBBACAERQ0CGiADIAEoAgg2AgggAyABKQIANwMAIAEgAigCCDYCCCABIAIpAgA3AgAgAiADKAIINgIIIAIgAykDADcCAEEBIAEgABAcRQ0CGiADIAAoAgg2AgggAyAAKQIANwMAIAAgASgCCDYCCCAAIAEpAgA3AgAgASADKAIINgIIIAEgAykDADcCAAwBCyAEBEAgAyAAKAIINgIIIAMgACkCADcDACAAIAIoAgg2AgggACACKQIANwIAIAIgAygCCDYCCCACIAMpAwA3AgBBAQwCCyADIAAoAgg2AgggAyAAKQIANwMAIAAgASgCCDYC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7AEiCigCCCIHIAhBLGxqIQgDQCAHIAhHBEAgB0EAQSwQHUEsaiEHDAELCyAKIAg2AgggBiAKEP4DIAoQ0QILIAxBIGokAAwBCyAHIAlLBEAgBiAIIAlBLGxqEKMFCwsgBUEANgIUIAVCADcCDCAELQAERQ0DIAVBDGogBSgCHCAFKAIYa0EsbUEBahCoByAEQShqIQYDQCAEKAIsIAQoAigiB2tBxABtrSANWARAAkAgBiAJEJYIIAUoAhwgBSgCGGtBLG1BAWogBSgCECAFKAIMa0HEAG1HDQAMBgsFIAVBDGogByANp0HEAGxqENACIA1CAXwhDQwBCwtB9soAQeknQdcCQfXEABAAAAUgBUEYaiAHIAKnQSxsahCnByACQgF8IQIMAQsACwALQbLJAEHpJ0GnAkH1xAAQAAALIAAgC0HEAGwiACABKAIoahCiASEGIAEoAiggAGogASAGQQRqEJcFIAEoAiggAGpBNGogBUEYahCqCCABKAIoIABqQShqIAVBDGoQqwggBUHcAGoiBCABKAIoIABqQgAgAxCMAyAGLQAEBEAgBkEoaiAEENACCyAFQdwAahCGARogBUEMahCvCCAFQRhqELAICyAFQaABaiQAC7oBAgR/BH4gASgCBCABKAIAIgRrQQN1IgIgACgCBCAAKAIAIgVrQQN1IgMgAiADSRutIQdBACEBAkADQCAGIAdSBEACQCAFIAanQQN0IgBqKQMAIgggACAEaikDACIJUQ0AIAggCVQEQEEDIQAgAUEBRg0EQQIhASACIANPDQEMBAtBAyEAIAFBAkYNA0EBIQEgAiADSw0DCyAGQgF8IQYMAQsLQQJBASABIAIgA0kbIAIgA0sbIQALIAALEAAgAC0AkAEEQBASAAsgAAsfACAAKAIEIAAoAghJBEAgACABEMkIDwsgACABEMgICxUAIAAgASACIANBHEHKpJLJABCmAQtAAQF/IAAoAggiAyACIAFraiECA0AgAiADRkUEQCADIAEoAgA2AgAgAUEEaiEBIANBBGohAwwBCwsgACACNgIIC94DAQN/IAAgARBMIABBDGogAUEMahBMIABBGGogAUEYahBMIABBJGogAUEkahDrASAAQTRqIAFBNGoQ6wECQCAAQcQAaiICLQAMIgMgAUHEAGoiBC0ADEYEQCADRQ0BIAIgBBDpBwwBCyADBEAgAhDKCAwBCyACIAQQtAMLIABB1ABqIAFB1ABqEPYCIABB9ABqIAFB9ABqEOsBIAAgASgClAE2ApQBIAAgASkCjAE3AowBIAAgASkChAE3AoQBIABBmAFqIAFBmAFqEEwgAEGkAWogAUGkAWoQTCAAQbABaiICEJcDAkAgAigCFEUEQANAIAIoAggiAyACKAIERwRAIANBBGsoAgAQCyACEOgHDAELCyACQQA2AhAMAQsgAkEAEOcHAkAgAhDlB0EBTQRAIAIQ5QdFDQELIAIoAghBBGsoAgAQCyACEOgHCwsgAhDmByACEKkKIAIQ5gcgAiABKAKwATYCACACIAEoArQBNgIEIAIgASgCuAE2AgggAiABKAK8ATYCDCABQgA3ArgBIAFCADcCsAEgAiABKALAATYCECACIAEoAsQBNgIUIAFCADcCwAEgAEHIAWogAUHIAWoQTCAAIAEpA9gBNwPYASAAQeABaiABQeABahAbC20BA38jAEEQayICJAAgAC0AkAFB/wFHBEAjAEEQayIBJAAgAUHI0wApAwA3AwggAkEPaiAAIAFBCGpBfyAALQCQASIDIANB/wFGG0ECdGooAgARAAAgAUEQaiQACyAAQf8BOgCQASACQRBqJAALbAECfyABIAAoAgQgACgCACABKAIEEIoIIgI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIACxsAIAAgAUHhw4cPQcQAQcOHjx5BxIePHhCUAQvlAwEHfyMAQRBrIgUkAAJAIAAoAgAgACgCBEYNACAFQQhqIAAgARDcAiAFKAIMIQIgBSgCCCEDA0ACQCAAKAIMIAJBA3RqIgYoAgAiBCADRgRAIAEgACgCACAGKAIEQQxsahAjIQggBSgCCCEDIAhFDQEgACgCDCAFKAIMIgJBA3RqKAIAIQQLIAMgBEcNAiACIgFBAWoiA0EAIAMgACICKAIQRxshAyACKAIMIgQgAUEDdGooAgQhBgNAIAQgAyIAQQN0aiIDKAIAIgdBgARPBEAgBCABQQN0aiIBIAMoAgQ2AgQgASAHQYACazYCACAAQQFqIgFBACABIAIoAhBHGyEDIAIoAgwhBCAAIQEMAQsLIAQgAUEDdGpCADcCACACKAIEIgAgAigCACIBa0EMbUEBayAGRwRAIAEgBkEMbGoiASAAQQxrEBsgARA4IAIxAB6IpyEEIAIoAgQgAigCAGtBDG1BAWshACACKAIQIQEgAigCDCEDA0AgAyAEQQN0aiIHKAIEIABHBEAgBEEBaiIEQQAgASAERxshBAwBCwsgByAGNgIECyACEMAFDAILIAUgA0GAAmoiAzYCCCAFIAUoAgxBAWoiAkEAIAIgACgCEEcbIgI2AgwMAAsACyAFQRBqJAAL2wEBA38jAEEQayICJAAgAkEIaiAAEJ0FIAIgABCEBCACKAIMIQEDQAJAIAIoAgQgAUYEQCAAQQA2AhQgACgCBCEBA0AgACgCCCABayIDQQlJDQIgASgCABALIAAgACgCBEEEaiIBNgIEDAALAAsgARB/GiACIAIoAgxBgAFqIgE2AgwgASACKAIIIgMoAgBrQYAgRw0BIAIgA0EEajYCCCACIAMoAgQiATYCDAwBCwtBECEBAkACQAJAIANBAnZBAWsOAgEAAgtBICEBCyAAIAE2AhALIAJBEGokAAunAQEDfyAAQeABahAKGiAAQcgBahAPGiAAQbABaiICEJcDIAIoAgghAyACKAIEIQEDQCABIANHBEAgASgCABALIAFBBGohAQwBCwsgAhCbASAAQaQBahAPGiAAQZgBahAPGiAAQfQAahA/IABB1ABqEDwgAEHEAGoiAS0ADARAIAEQ8gELIABBNGoQPyAAQSRqED8gAEEYahAPGiAAQQxqEA8aIAAQDxoLcQICfwF+IAJBIBCIASIFp0H/AXFBgAJyIQIgBSABMQAeiKchAyABKAIQIQQgASgCDCEBA0AgAiABIANBA3RqKAIAT0UEQCADQQFqIgNBACADIARHGyEDIAJBgAJqIQIMAQsLIAAgAzYCBCAAIAI2AgALiAEAIABBADoARCAAQQA6ADQgAEEAOgBQIABBQGtBADoAACAAQQA6ADAgAEEAQSUQHSIAQdQAahCPARogAEJ/NwOQASAAQQE7AYgBIABBADYChAEgAEEAOgCAASAAQQA6AHQgAEGYAWpBAEE8EB0aIABBADYC6AEgAEIANwPgASAAQgA3A9gBIAALUQECfyAAIAAoAgAiASgCBCICNgIAIAIEQCACIAA2AggLIAEgACgCCDYCCCAAKAII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CwsLZwECfyAAQf8BOgAQIABBADoAACMAQRBrIgIkACAAELkBIAEtABAiA0H/AUcEQCACQeAIKQMANwMIIAJBB2ogACABIAJBCGogA0ECdGooAgARBAAgACABLQAQOgAQCyACQRBqJAAgAAtfAQJ/IwBBEGsiAiQAIAJCACABKAIEIAEoAgBrQQN1rX03AwggACACQQhqENgBIAEoAgQhAyABKAIAIQEDQCABIANGBEAgAkEQaiQABSAAIAEQwgUgAUEIaiEBDAELCwscACAAIAFB4P///wdBBEH///8/QYCAgMAAELYDCw0AIAAgARAlQQE6AAwLCwAgACAAIAEQzwoLMQEBfyABIAVPBEAQAQALIAQgACgCCCAAKAIAayIAIAN1IgYgASABIAZJGyAAIAJPGws/AQJ/IwBBEGsiAiQAIAAtABgiA0H/AUcEQCACQQ9qIAAgA0ECdCABaigCABEAAAsgAEH/AToAGCACQRBqJAALSgECfyMAQRBrIgIkAEEIEBghAyACQQE2AgggAiACQQ9qNgIEIAMgATYCACADIAAoAgQ2AgQgAkEANgIAIAIQkAEgAkEQaiQAIAMLCQAgAEEMEJkECxEAIAAgAUEwajoAACAAQQFqCwsAIAQgAjYCAEEDCw8AIAAgACgCAEEEajYCAAsPACAAIAAoAgBBAWo2AgALHQAgACABQfj///8HQQJB/////wFBgICAgAIQtgMLNwECfyMAQRBrIgMkACADQQxqIgQgARAkIAIgBBDwAiIBEG02AgAgACABEGwgBBAiIANBEGokAAs2AQJ/IwBBEGsiAiQAIAJBDGoiAyAAECQgAxBwQaDxAUG68QEgARDgASADECIgAkEQaiQAIAELNwECfyMAQRBrIgMkACADQQxqIgQgARAkIAIgBBDyAiIBEG06AAAgACABEGwgBBAiIANBEGokAAsHACAAQQtJCxcAIAAgAzYCECAAIAI2AgwgACABNgIICxoAIAAgASABKAIAQQxrKAIAaigCGDYCACAACwsAIABB7LMCEOEBC4UCAgd/An4jAEEwayIAJABBASAAQRhqEMIKBEBB0K0CKAIAENsFAAsgAEEIaiAAQRhqEIoCIQQgACAAQSBqEMEKIQUjAEEgayIBJAAjAEEQayIDJAAjAEEQayIGJAAjAEEQayICJAAgAiAEKQMAQoCU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KAIINgIIIAVCADcCACAFQQA2AgggAyAEKQMANwMQIAMgBCgCEDYCICADIAQpAwg3AxggBEEANgIQIARCADcDCCABIANBKGo2AgQMAQsjAEEgayIKJAAgCkEMaiABIAEoAgQgASgCAGtBKG1BAWoQowEgASgCBCABKAIAa0EobSABQQhqEIcBIQMgBigCCCEEIAMoAggiBSAGKAIMIgkpAgA3AgAgBSAJKAIINgIIIAlCADcCACAJQQA2AgggBSAEKQMANwMQIAUgBCgCEDYCICAFIAQpAwg3AxggBEEANgIQIARCADcDCCADIAMoAghBKGo2AgggASADEPABIAMQ7wEgCkEgaiQAIAEoAgQaCyABKAIEIAEoAgBrQShtIgRBAWshAwJAIAEoAhQgBEkEQCABEKIDDAELIAIgAzYCDCACIAc2AgggAiACKQIINwMAIAEgAiAIEDELIAEoAgAhASAAQQE6AAQgACABIANBKGxqNgIAIAJBEGokAAsgBkEQaiQADwsgCEEBaiIEQQAgBCABKAIQRxshCCAHQYACaiEHDAALAAtCAQF/IwBBEGsiAiQAIABCADcCACAAQT46AB4gAEHNmbP6AzYCGCAAQgA3AhAgAEIANwIIIAAgARD2AiACQRBqJAALFQAgACABQQdBH0H8////AUEDEJsJCy4BAX8gACAAKAIAIgIgASACa0HIAG1ByABsaiIBQcgAaiAAKAIEIAEQzgUQlgQLGAAgACABKQMANwMAIABBCGogAUEIahAbCzcBAn4gACgCACEAA34gASACUQR+IAMFIAMgACACp0HIAGxqKQM4fEIBfCEDIAJCAXwhAgwBCwsLLgEBfyABKAIAIgIgASgCBDYCBCABKAIEIAI2AgAgACAAKAIIQQFrNgIIIAEQCwuBAQECfyAAKAIEIAAoAghJBEAgACABEJcKDwsjAEEgayIDJAAgA0EMaiAAIAAoAgQgACgCAGtB8ABtQQFqEI8EIAAoAgQgACgCAGtB8ABtIABBCGoQjQIiAigCCCABEDIaIAIgAigCCEHwAGo2AgggACACEOQKIAIQ9QIgA0EgaiQACxYAIAAtAAwEQCAAEA8aIABBADoADAsLNwEBfyMAQRBrIgEkACABIAA2AgwgASgCDCIAKAIABEAgABCuBSABKAIMKAIAEAsLIAFBEGokAAtCAQF/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IAcgBhCMAQsgAyAEIAVqIgprIQcgAyAKRwRAIAIgBGogBmogBCAJaiAFaiAHEIwBCyABQQFqIgFBC0cEQCAAIAkgARCzBAsgACACEIoBIAAgCCgCCBCJASAAIAQgBmogB2oiABBvIAhBADoADCAAIAJqIAhBDGoQgwEgCEEQaiQADwsQbgALBwAgAEEIagsVACAAIAEgAiADQcgAQeTxuBwQpgELCQAgACABEMYJCwcAIABBAkkLBABBBAsqAQF/IAAoAgQhAgNAIAEgAkZFBEAgAkHwAGsQQiECDAELCyAAIAE2AgQLHQAgAEEEahDbCUF/RgRAIAAgACgCACgCCBEBAAsLEQAgACABIAEoAgAoAigRAAALFAECfyAAKAIAIQIgAEEANgIAIAILCABB/////wcLBQBB/wALYQEBfyMAQRBrIgIkACACIAA2AgwCQCAAIAFGDQADQCACIAFBBGsiATYCCCAAIAFPDQEgAigCDCACKAIIELkEIAIgAigCDEEEaiIANgIMIAIoAgghAQwACwALIAJBEGokAAubAQEFfyMAQRBrIgQkACMAQRBrIgMkACAAIQUgAiEGA0AgASAFRwRAIAYgBRCSASAGQfAAaiEGIAVB8ABqIQUMAQsLIAMgBjYCDCADIAE2AgggAygCCCEBIAQgAiADKAIMIAJrQfAAbUHwAGxqNgIMIAQgACABIABrQfAAbUHwAGxqNgIIIANBEGokACAEKAIMIQcgBEEQaiQAIAcL0AEBAn8gAkGAEHEEQCAAQSs6AAAgAEEBaiEACyACQYAIcQRAIABBIzoAACAAQQFqIQALIAJBhAJxIgNBhAJHBEAgAEGu1AA7AAAgAEECaiEACyACQYCAAXEhAgNAIAEtAAAiBARAIAAgBDoAACAAQQFqIQAgAUEBaiEBDAELCyAAAn8CQCADQYACRwRAIANBBEcNAUHGAEHmACACGwwCC0HFAEHlACACGwwBC0HBAEHhACACGyADQYQCRg0AGkHHAEHnACACGws6AAAgA0GEAkcLqgEBAX8CQCADQYAQcUUNACACRSADQcoAcSIEQQhGIARBwABGcnINACAAQSs6AAAgAEEBaiEACyADQYAEcQRAIABBIzoAACAAQQFqIQALA0AgAS0AACIEBEAgACAEOgAAIABBAWohACABQQFqIQEMAQsLIAACf0Hv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BCIDRQ0AIAgoAhwiBARAIAMgBCgCBEYNAQsgAigCCCADIAIoAgQRAAALAkAgACAGSQRAIAEgAigCCCAGIABrIgQgAigCABEDACICNgIEIAJFDQMgAiAAIAVqIAQQHxoMAQsgAUEANgIEIAYgAGshBAsgASAENgIADAMLIARBAkcNACAIKAIcIQlBASEEIAgoAhggAiAGIAAtAAUiAGsgACAFahCuASEAAkAgA0UNACABKAIAIgdFIAcgCUZyDQACQCAARQRADAELIAcgACACEOYKQQBHIQQgASgCACEHCyAHIAIQ4wELIAEgADYCACAAQQBHIARxIQcLIAcPCyABIAYgBRD6AjYCAAtBAQvBAQECfyAApyECIABCIIinIgNFBEAgAiABEMsBDwsgASACQYABcjoAACABIAJBFXZBgAFyOgADIAEgAkEOdkGAAXI6AAIgASACQQd2QYABcjoAASADQQR0IAJBHHZyIQIgA0EHTQRAIAEgAjoABEEFDwsgASACQYABcjoABCADQQN2IQJBBSEDA0AgAkGAAUlFBEAgASADaiACQYABcjoAACACQQd2IQIgA0EBaiEDDAELCyABIANqIAI6AAAgA0EBagtSAQF/IABCIIinIgFFBEAgAKcQngEPCwJ/QQUgAUEISQ0AGkEGIAFBgAhJDQAaQQcgAUGAgAhJDQAaQQggAUGAgIAISQ0AGkEJQQogAEIAWRsLCw0AIABB6I4BQSgQHxoLIwAgACABKAIANgIAIABBBGogAUEEahAQGiAAIAEoAhA2AhALHwAgACABEBAiAEEMaiABQQxqEBAaIAAgASkCGDcCGAsMACAAIAFB+AgQkgkLEgAgAC0AKARAIABBCGoQhQELC28CAn8BfiACELEBIgWnQf8BcUGAAnIhAiAFIAExAB6IpyEDIAEoAhAhBCABKAIMIQEDQCACIAEgA0EDdGooAgBPRQRAIANBAWoiA0EAIAMgBEcbIQMgAkGAAmohAgwBCwsgACADNgIEIAAgAjYCAAuHBgEIfyMAQcABayIDJAAgACgCACEEIANCADcDiAEgA0IANwOAASADQgA3A3ggA0GQAWoQvwEgA0IANwO4ASADQgA3A7ABIwBBIGsiBSQAIANBhAFqIgYiAigCCCACKAIAIghrQfAAbUEPSQRAIAIgBUEMakEPIAIoAgQgCGtB8ABtIAJBCGoQjQIiAhDkCiACEPUCCyAFQSBqJAAgBCABpyIIQcgAbGoiAiEJIAJBDGohBSACKAIMQYAOaiECA0AgCSgCECACRgRAAkAgBSgCACIHIAUoAgBBgA5qIgYgB2tB8ABtQfAAbGohByACIAZHBEAgBSAHIAIgBmtB8ABtQfAAbGogBSgCBCAHEKsEEKQECyAEIAhByABsaiIEKAIAIAQoAgRGDQAjAEEgayIGJAAgA0H4AGoiAigCCCACKAIAIgdrQcgAbUEQSQRAIAIgBkEMakEQIAIoAgQgB2tByABtIAJBCGoQoAQiAhCWCSACEJcECyAGQSBqJAAgBCgCAEGACWohAgNAIAQoAgQgAkYEQCAEKAIAIgcgBCgCAEGACWoiBiAHa0HIAG1ByABsaiEHIAIgBkcEQCAEIAcgAiAGa0HIAG1ByABsaiAEKAIEIAcQzgUQlgQLBSADQfgAaiACEKwDIAJByABqIQIMAQsLCwUgBiACEIkEIAJB8ABqIQIMAQsLIANBCGogCSgCEEHwAGsQMiEGIAUQ3gcgBCAJKAIQIAUoAgBrQfAAba0iATcDOCAEKAIEIQUgBCgCACECA0AgAiAFRgRAAkAgAyADKAKIASADKAKEAWtB8ABtrSIBNwOwASADKAJ8IQUgAygCeCECA0AgAiAFRg0BIAMgASACKQM4fCIBNwOwASACQcgAaiECDAALAAsFIAQgASACKQM4fCIBNwM4IAJByABqIQIMAQsLIAQQxgIgA0H4AGoiAhDGAiAAIAAoAgAgCEHIAGxqQcgAaiACEIAHIABBDGogACgCDCAIQfAAbGogBhDUBCAGEEIaIAIQZBogA0HAAWokAAvxAQAgACABLwEAOwEAIAAgASgCDDYCDCAAIAEpAgQ3AgQgAUEANgIMIAFCADcCBCAAQRBqIAFBEGoQPRogACABKQMoNwMoIAAgASgCODYCOCAAIAEpAzA3AzAgAUEANgI4IAFCADcDMCAAIAEoAkQ2AkQgACABKQI8NwI8IAFCADcCPCABQQA2AkQgACABKAJQNgJQIAAgASkDSDcDSCABQgA3A0ggAUEANgJQIAAgASgCXDYCXCAAIAEpAlQ3AlQgAUEANgJcIAFCADcCVCAAIAEoAmg2AmggACABKQNgNwNgIAFCADcDYCABQQA2AmggAAsbAQF/IAAgARCfBSECIAFBKGoQERogARALIAILmwEBA38gASgCBCECIAAoAgAhBCAAKAIEIQMDQCADIARGRQRAIAJBEGsiAiADQRBrIgMpAwA3AwAgAiADKQMINwMIDAELCyABIAI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIAC6oGAwx/AX4BfCMAQaABayIGJAAgBkEYahAVIQUCQAJAAkACQCABLQAYDgICAAELIAVB0dIAEA0hDCAGQQxqIgMgAkEgEJ0EIAwgAxATGiACQQRqIQggAxAKGiABKAIAIgMoAgQhCSADKAIAIQMDQCADIAlGBEAgBUGgCRANGgwECyAFQaDLABANIAMQE0GkywAQDUGw0gAQDSENIAZBDGoiBCADQRBqIAgQzQQgDSAEEBMaIAQQChogD0IBfCIPIAEoAgAiBCgCBCAEKAIAa0Ewba1SBEAgBUGuygAQDRoLIAVB0tIAEA0hDiAGQQxqIgQgAkEgEJ0EIA4gBBATGiADQTBqIQMgBBAKGgwACwALIAEtABhBAkcEQBASAAsgBUHcwwAQDRogASgCACIBKAIEIQQgASgCACEDQQEhAQNAIAMgBEYEQCAFQdnDABANGgwDCyABRQRAIAVBztIAEA0aCyAGQQxqIgEgAyACEM0EIAUgARATGiADQSBqIQMgARAKGkEAIQEMAAsACyAGQQxqIQMjAEGQAWsiCCQAIAhBCGoQFSECAkACQAJAAkACQAJAAkACQEF/IAEtABAiBCAEQf8BRhsOBwABAgMEBQYHCyACIAEQ6AEpAwAQyQEaDAYLIAIgARByKQMAEHoaDAULIAEQrgYrAwAhECMAQRBrIgEkACABQQhqIAIQuAIaAkAgAS0ACEUNACABQQRqIgQgAiACKAIAQQxrKAIAahAkIAQQxQMhCSAEECIgASACEMQDIQcgAiACKAIAQQxrKAIAaiIKEOMCIQsgASAJIAcoAgAgCiALIBAgCSgCACgCIBEgADYCBCAEELYCRQ0AIAIgAigCAEEMaygCAGpBBRC5AgsgAUEIahC3AiABQRBqJAAMBAsgAkHKM0HFNyABEK0GLQAAGxANGgwDCyACQaTLABANIAEQrAYQE0GkywAQDRoMAgsgAiABEOkBKQMIEMkBGgwBCyACQbQrEA0aCyADIAJBBGoQ9AIgAhDdARogCEGQAWokACAFIAMQExogAxAKGgsgACAFQQRqEPQCIAUQ3QEaIAZBoAFqJAALMQEDfyAAKAIIIQEDQCABBEAgASgCACEDIAFBCGoQvwYgARALIAMhAQwBCwsgABDQAwsnACABBEAgACABKAIAEM8EIAAgASgCBBDPBCABQRBqEJYFIAEQCwsLJQAgACABRwRAIAAgASgCRBDQBCAAIAEoAkgQ0AQgARDqAxALCwuRBQELfyAAKAIAIQIjAEEQayIKJAAgCiAANgIMIApBDGohASMAQRBrIgYkAAJAIAJB2AJqIgMoAgAgAygCBEYNACAGQQhqIAMgARC4CCADKAIQIQUgASgCACEEIAMoAgAhByADKAIMIQggBigCDCECIAYoAgghAQNAIAEgCCACQQN0aiIJKAIARw0BIAcgCSgCBEECdGooAgAgBEcEQCAGIAFBgAJqIgE2AgggBiACQQFqIgJBACACIAVHGyICNgIMDAELCyMAQRBrIgckACACQQFqIgFBACABIAMoAhBHGyEFIAMoAgwiBCACQQN0aigCBCEIA0AgBCAFIgFBA3RqIgUoAgAiCUGABE8EQCAEIAJBA3RqIgIgBSgCBDYCBCACIAlBgAJrNgIAIAFBAWoiAkEAIAIgAygCEEcbIQUgAygCDCEEIAEhAgwBCwsgBCACQQN0akIANwIAIAMoAgQiAiADKAIAIgFrQQJ1QQFrIAhHBEAgASAIQQJ0aiACQQRrKAIAIgE2AgAgByABrUIAQpX4qfqXt96bnn9CABAvIAMoAgQiAiADKAIAa0ECdUEBayEBIAcpAwggBykDAIUgAzEAHoinIQQgAygCECEFIAMoAgwhCQNAIAkgBEEDdGoiCygCBCABRwRAIARBAWoiBEEAIAQgBUcbIQQMAQsLIAsgCDYCBAsgAyACQQRrNgIEIAdBEGokAAsgBkEQaiQAIApBEGokACAAQcADahBAIABBlANqIgIoAgwiAQRAIAEQCwsjAEEQayIBJAAgASACNgIMIAEoAgwiAigCAARAIAIQxAYgASgCDCgCABALCyABQRBqJAAgAEHwAmoiAS0AIARAIAEQ4QILIABBqAFqENoCC4QFAQN/IAAgASkCADcCACAAIAEoAgg2AgggAUIANwIAIAFBADYCCCAAQRBqIgFBADoARCABQQA6AEAgAUEAOgAAIAFBADoAhAEgAUGIAWoQZhojAEEQayIDJAAgAUGoAWoiAkIANwIAIAJBPjoAHiACQc2Zs/oDNgIYIAJCADcCECACQgA3AgggAhAwIAIoAgwiBARAIARBACACKAIQQQN0EB0aCyADQRBqJAAgASABQcwBajYCyAEgAUIANwLMASABQdgBakEAQS0QHRogAEEANgLQAiAAQQA2ArgCIABBADoApAIgACAAQZwCajYCmAIgAEIANwKcAiAAQdgCahBmGiAAQQA2AoADIAAgAEH4AmoiATYC/AIgACABNgL4AiMAQRBrIgIkACAAQYQDaiIBQgA3AgAgAUE+OgAeIAFBzZmz+gM2AhggAUIANwIQIAFCADcCCCABEDAgASgCDCIDBEAgA0EAIAEoAhBBA3QQHRoLIAJBEGokACAAQgA3ALUDIABCADcDsAMgAEIANwOoAyAAQcADaiIBQgA3AgAgAUIANwIQIAFCADcCCCMAQRBrIgMkACABQRhqIgJCADcCACACQT46AB4gAkHNmbP6AzYCGCACQgA3AhAgAkIANwIIIAIQMCACKAIMIgQEQCAEQQAgAigCEEEDdBAdGgsgA0EQaiQAIAFBADYCUCABQgA3AkggAUFAa0IANwIAIAFCADcCOCABQQA2AlggASABNgJUIABBnARqIgFCADcCACABQgA3AhAgAUIANwIIIAFBGGoQZhogAUEANgJQIAFCADcCSCABQUBrQgA3AgAgAUIANwI4IAFBADYCWCABIAE2AlQgAAswAQF/IAAoAgAhASAAQQA2AgAgAQRAIAAtAAgEQCABQQhqEL8GCyABBEAgARALCwsLwgMBBn8jAEEgayIHJAAgACgCACIDIAEgA2tB8ABtQfAAbGohBQJAIAAoAgQiASAAKAIISQRAIAEgBUYEQCAAIAIQlwoMAgsgACAFIAEgBUHwAGoQ4wggBSACEJIBDAELIAdBDGogACABIANrQfAAbUEBahCPBCAFIAAoAgBrQfAAbSAAQQhqEI0CIQEjAEEgayIIJAACQCABKAIIIgMgASgCDEcNACABKAIEIgQgASgCACIGSwRAIAEgBCADIAQgBCAGa0HwAG1BAWpBfm1B8ABsIgZqEKsEIgM2AgggASABKAIE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AWoPCyABIAIQVSABIAAQKUUEQCAEQQJqDwsgACABEFUgBEEDagUgBAsLOgEBfyAAKAIEIgIgACgCCEcEQCACIAEpAwA3AwAgAiABKQMINwMIIAAgAkEQajYCBA8LIAAgARDxBAuKDQEGfwNAIAFBIGshCQNAIAAhBANAAkACQAJAAkACQAJAAkACQCABIARrIgZBBXUiAA4GBwcABAECAwsgAUEgayIAIAQQKUUNBiAEIAAQVQ8LIAQgBEEgaiAEQUBrIAFBIGsQ/gQaDwsgBCAEQSBqIARBQGsgBEHgAGogAUEgaxD9BBoPCyAGQd8HTARAIAEhBiMAQSBrIgUkACAEIARBIGogBEFAayICEMUCGiAEQeAAaiEAA0AgBiAAIgFHBEAgACACECkEQCAFIAApABg3AxggBSAAKQAQNwMQIAUgACkACDcDCCAFIAApAAA3AwAgACEDA0ACQCADIAIiACkAADcAACADIAApABg3ABggAyAAKQAQNwAQIAMgACkACDcACCAAIARGBEAgBCEADAELIAAhAyAFIABBIGsiAhApDQELCyAAIAUpAwA3AAAgACAFKQMYNwAYIAAgBSkDEDcAECAAIAUpAwg3AAgLIAFBIGohACABIQIMAQsLIAVBIGokAA8LIANFBEAgASAERyIABH8gAARAAkAgASAEayIAQSFIDQAgAEEFdSICQQJrQQF2IQADQCAAQQBIDQEgBCACIAQgAEEFdGoQrgcgAEEBayEADAALAAsgASAEa0EFdSECIAEhAANAIAAgAUcEQCAAIAQQKQRAIAAgBBBVIAQgAiAEEK4HCyAAQSBqIQAMAQsLIAEgBGtBBXUhAANAIABBAUoEQCABIQNBACEGIwBBIGsiByQAAkAgACICQQJJDQAgByAEKQAYNwMYIAcgBCkAEDcDECAHIAQpAAg3AwggByAEKQAANwMAIAQhACACQQJrQQF2IQgDQCAGQQF0IglBAXIhASAGQQV0IABqQSBqIQUgAiAJQQJqIglMBH8gAQUgBUEgaiIGIAUgBSAGECkiBhshBSAJIAEgBhsLIQYgACAFKQAANwAAIAAgBSkAGDcAGCAAIAUpABA3ABAgACAFKQAINwAIIAUhACAGIAhMDQALIANBIGsiASAARgRAIAAgBykDADcAACAAIAcpAxg3ABggACAHKQMQNwAQIAAg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KAIAIAFGQQJ0aigCACEBDAALAAsgBEEBOgAMCwsgBgskACAAIAFBJhAfIgBBKGogAUEoahCrCCAAQTRqIAFBNGoQqggLKwEBfyAAKAIEIQIDQCABIAJGRQRAIAJBxABrEIYBIQIMAQsLIAAgATYCBAswACAAIAEQGyAAIAEpAiQ3AiQgACABKQIcNwIcIAAgASkCFDcCFCAAIAEpAgw3AgwLCwAgACABQSwQmAQLEwAgACABEIYEIAAgAS0AGDoAGAsUACAAQcQAaiIAELIIIAAgARCgAwslACAAKAIQIgBFBEAQEgALIAAgASACIAMgBCAAKAIAKAIYEQoAC5EBAQN/IAEoAgQhAiAAKAIAIQQgACgCBCEDA0AgAyAERkUEQCACQQhrIgIgA0EIayIDKQIANwIADAELCyABIAI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIACxsBAX8gACgCACECIAAgATYCACACBEAgAhALCwsPACAAIAAoAgRBKGsQzggLCwAgACABEFdBAXMLCQAgAEEoEJoEC2EBAn8jAEEgayICJAACQCABIAAoAgggACgCACIDa0EobUsEQCABQefMmTNPDQEgACACQQxqIAEgACgCBCADa0EobSAAQQhqEIcBIgAQ8AEgABDvAQsgAkEgaiQADwsQAQALIwAgACABKQIANwIAIAAgASgCCDYCCCAAQQxqIAFBDGoQJRoLDAAgACAAKAIAEM4IC/EBAgF/AX0CQCAAIAFGDQAgABBNIAAoAgAEQCAAEK4FIAAoAgAQCyAAQQA2AgggAEIANwIACyAAIAEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCABQQA2AgggAUIANwIAIAEQrgUgASgCDCECIAFBADYCDCAAIAI2AgwgASgCECECIAFBADYCECAAIAI2AhAgASgCFCECIAFBADYCFCAAIAI2AhQgAS0AHiECIAFBPjoAHiAAIAI6AB4gASoCGCEDIAFBzZmz+gM2AhggACADOAIYIAEQMCABKAIMIgBFDQAgAEEAIAEoAhBBA3QQHRoLC2wCA38CfiABEDghBiABIAAoAgBrQTBtIQIgBiAAMQAeiKchASAAKAIQIQMgACgCDCEEA0AgBCABQQN0aigCBCACRkUEQCABQQFqIgFBACABIANHGyEBDAELCyAAIAEQ+AsgACgCACACQTBsagvMAwIEfwF+IwBBIGsiBCQAIAQgAjYCGCAEIAE2AhwgAEH4AmohAQJAIABBhANqIgUgBEEcahChAyICIAAoAogDRwRAIAEgAigCBEEIahC7CCAAIAApA6gDQgF8Igg3A6gDIAAoAvwCIAg3AxAgASACKAIEEIgEIAIgACgC/AI2AgQMAQsgACAAKQOoA0IBfDcDqAMgASAEQRhqIARBHGoiASAAQagDahC6CCAEIAAoAvwCNgIUIARBDGogBSABIARBFGoQuQgLIAMoAgQhBiADKAIAIQADQCAAIAZGBEAgBEEgaiQABSAAKAIAIQEgBCgCHCEDIAQoAhghBSMAQSBrIgIkACACIAU2AhggAiADNgIcIAFBjANqIQMCQCABQZgDaiIHIAJBHGoQoQMiBSABKAKcA0cEQCADIAUoAgRBCGoQuwggASABKQO4A0IBfCIINwO4AyABKAKQAyAINwMQIAMgBSgCBBCIBCAFIAEoApADNgIEDAELIAEgASkDuANCAXw3A7gDIAMgAkEYaiACQRxqIgMgAUG4A2oQugggAiABKAKQAzYCFCACQQxqIAcgAyACQRRqELkICyACQSBqJAAgAEEEaiEADAELCwsWACAALQAgBEAgABDhAiAAQQA6ACALCyUBAX8jAEEQayICJAAgAiABNgIMIAAgAkEMahCoAyACQRBqJAALGwAgACABEGoiASAAKAIERgRAEBIACyABQRBqC4sBAQJ/IwBBMGsiAiQAIABBJGoQ3gggAEE0ahDeCCAAQcQAaiIBIgAQygggAEEBOgAMIABBADYCCCAAQgA3AgAgAkEMaiIAQQBBJBAdGiACQRhqQgAQ3QgCQCABKAIEIAEoAghJBEAgASAAEMkIDAELIAEgABDICAsgASgCBBogABC9ARogAkEwaiQAC+QBAQN/IAAoAgQhAiAAKAIAIQQgASgCBCEDA0AgAiAERwRAIANBgAFrIgMgAkGAAWsiAikDADcDACADIAIoAgg2AgggAkEANgIIIAJCADcDACADIAIpAxA3AxAgAyACKAIgNgIgIAMgAikDGDcDGCACQQA2AiAgAkIANwMYIANBKGogAkEoahDZAhoMAQsLIAEgAzYCBCAAKAIAIQQgACADNgIAIAEgBDYCBCAAKAIEIQQgACABKAIINgIEIAEgBDYCCCAAKAIIIQQgACABKAIMNgIIIAEgBDYCDCABIAEoAgQ2AgALIwAgAEEAOgDAASAAQQA6AAAgAS0AwAEEQCAAIAEQngILIAALUAAgACgCAARAIAAQgQkgACgCABALIABBADYCCCAAQgA3AgALIAAgASgCADYCACAAIAEoAgQ2AgQgACABKAIINgIIIAFBADYCCCABQgA3AgALEgAgACABEBsgACABKQMQNwMQCwkAIABBGBCZBAuyAQEDfyAAKAIEIQIgACgCACEEIAEoAgQhAwNAIAIgBEcEQCADQRhrIgMgAkEYayICKQMANwMAIAMgAigCCDYCCCACQgA3AwAgAkEANgIIIAMgAikDEDcDEAwBCwsgASADNgIEIAAoAgAhAiAAIAM2AgAgASACNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAsRACAAIAEQECIAQgA3AxAgAAvfAgECfyMAQRBrIgUkACAAIAEgAiADEL4FIQYCQCAEIAMQHEUNACAFIAMoAgg2AgggBSADKQIANwMAIAMgBCgCCDYCCCADIAQpAgA3AgAgBCAFKAIINgIIIAQgBSkDADcCACADIAIQHEUEQCAGQQFqIQYMAQsgBSACKAIINgIIIAUgAikCADcDACACIAMoAgg2AgggAiADKQIANwIAIAMgBSgCCDYCCCADIAUpAwA3AgAgAiABEBxFBEAgBkECaiEGDAELIAUgASgCCDYCCCAFIAEpAgA3AwAgASACKAIINgIIIAEgAikCADcCACACIAUoAgg2AgggAiAFKQMANwIAIAEgABAcRQRAIAZBA2ohBgwBCyAFIAAoAgg2AgggBSAAKQIANwMAIAAgASgCCDYCCCAAIAEpAgA3AgAgASAFKAIINgIIIAEgBSkDADcCACAGQQRqIQYLIAVBEGokACAGC44CAQJ/IwBBEGsiBCQAIAAgASACENsCIQUCQCADIAIQHEUNACAEIAIoAgg2AgggBCACKQIANwMAIAIgAygCCDYCCCACIAMpAgA3AgAgAyAEKAIINgIIIAMgBCkDADcCACACIAEQHEUEQCAFQQFqIQUMAQsgBCABKAIINgIIIAQgASkCADcDACABIAIoAgg2AgggASACKQIANwIAIAIgBCgCCDYCCCACIAQpAwA3AgAgASAAEBxFBEAgBUECaiEFDAELIAQgACgCCDYCCCAEIAApAgA3AwAgACABKAIINgIIIAAgASkCADcCACABIAQoAgg2AgggASAEKQMANwIAIAVBA2ohBQsgBEEQaiQAIAULkA4BCH8jAEEQayIHJAADQCABQQxrIQkDQCAAIQQDQAJAAkACQAJAAkACQAJAAkAgASAEayIFQQxtIgAOBgcHAAQBAgMLIAFBDGsiACAEEBxFDQYgByAEKAIINgIIIAcgBCkCADcDACAEIAAoAgg2AgggBCAAKQIANwIAIAAgBygCCDYCCCAAIAcpAwA3AgAMBgsgBCAEQQxqIARBGGogAUEMaxC+BRoMBQsgBCAEQQxqIARBGGogBEEkaiABQQxrEL0FGgwECyAFQdMATARAIAEhAyMAQRBrIgUkACAEIARBDGogBEEYaiIBENsCGiAEQSRqIQADQCADIAAiAkcEQCAAIAEQHARAIAUgACgCCDYCCCAFIAApAgA3AwAgAEIANwIAIABBADYCCANAAkAgACABIgAQGyAAIARGBEAgBCEADAELIAUgAEEMayIBEBwNAQsLIAAgBRAbIAUQChoLIAJBDGohACACIQEMAQsLIAVBEGokAAwECyADRQRAIAEgBEcEfyMAQRBrIggkACABIgAgBEcEQCAAIARrIgFBDG0hAgJAIAFBDUgNACACQQJrQQF2IQEDQCABQQBIDQEgBCACIAQgAUEMbGoQ6gggAUEBayEBDAALAAsgACAEa0EMbSECIAAhAQNAIAAgAUcEQCABIAQQHARAIAggASgCCDYCCCAIIAEpAgA3AwAgASAEKAIINgIIIAEgBCkCADcCACAEIAgoAgg2AgggBCAIKQMANwIAIAQgAiAEEOoICyABQQxqIQEMAQsLIAAgBGtBDG0hAQNAIAFBAUoEQCAAIQJBACEFIwBBEGsiCyQAIAFBAk8EQCALIAQoAgg2AgggCyAEKQIANwMAIARCADcCACAEQQA2AgggBCEAIAFBAmtBAXYhCgNAIAVBAXQiCUEBciEDIAVBDGwgAGpBDGohBiABIAlBAmoiCUwEfyADBSAGQQxqIgUgBiAGIAUQHCIFGyEGIAkgAyAF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BQsdACAAIAFBkM4AbiIAEKkCIAEgAEGQzgBsaxDeBQsbACAAIAFB5ABuIgAQqQIgASAAQeQAbGsQqQILsQEBA38jAEEQayICJAAgAiABNgIMAkACQAJ/IAAQiwEiBEUEQEEBIQEgABC3BAwBCyAAEIcCQQFrIQEgACgCBAsiAyABRgRAIAAgAUEBIAEgARCxCSAAECEaDAELIAAQIRogBA0AIAAiASADQQFqEHkMAQsgACgCACEBIAAgA0EBahBvCyABIANBAnRqIgAgAkEMahCAASACQQA2AgggAEEEaiACQQhqEIABIAJBEGokAAvPAQEDfyMAQRBrIgUkACACQe////8HIAFrTQRAIAAQISEGIAVBBGoiByAAIAFB5////wNJBH8gBSABQQF0NgIMIAUgASACajYCBCAHIAVBDGoQtQIoAgAQtAJBAWoFQe////8HCxCGAiAFKAIEIQIgBSgCCBogBARAIAIgBiAEEIwBCyADIARHBEAgAiAEaiAEIAZqIAMgBGsQjAELIAFBAWoiAUELRwRAIAAgBiABELMECyAAIAIQigEgACAFKAIIEIkBIAVBEGokAA8LEG4ACw0AIAAgASACQn8Q2woLBwAgAEEMagsrAQJ/IAAoAgAhASMAQRBrIgAkACAAIAE2AgwgACgCDCECIABBEGokACACCxcAIAAoAggQM0cEQCAAKAIIEJUKCyAACwkAIABBIBDlAgs6AQJ/IwBBEGsiAyQAIAMgAjYCDCADQQhqIANBDGoQqwEhBCAAIAEQiwYhACAEEKoBIANBEGokACAACw8AIAAgACgCBEEBajYCBAs3AQJ/IwBBEGsiAiQAIAIgACgCADYCDCACIAIoAgwgAUECdGo2AgwgAigCDCEDIAJBEGokACADCxsBAX9BASEBIAAQiwEEfyAAEIcCQQFrBUEBCws0AQJ/IwBBEGsiAiQAIAIgACgCADYCDCACIAIoAgwgAWo2AgwgAigCDCEDIAJBEGokACADC5EBAQN/IAEoAgQhAiAAKAIAIQQgACgCBCEDA0AgAyAERkUEQCACQQhrIgIgA0EIayIDKQMANwMADAELCyABIAI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASAB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IAQoAhAiBiAEKAIURgRAIAQgBCgCDDYCFAsgB0EBaiEHIAQgBkEIaiIGNgIQDAALAAsCQCAGIAQoAhQiCEYNACAIIAYQNEUNACAHQQFqIQcgBEEQaiAEQRRqEFYLIAQoAhAhBgJAIAcNACAFIAYgAhDICiEHIAQoAhBBCGogASACEMgKBEAgBw0FIAQgBCgCECIBNgIYDAcLIAQoAhAhBiAHRQ0AIAZBCGohAAwCCyAGIABrIAEgBmtIBEAgACAGIAIgAxCHBiAEKAIQQQhqIQAMAgsgBkEIaiABIAIgAxCHBiAEIAQoAhAiATYCGAwGCyAEIAFBCGsiADYCGCAFIAVBCGogABC6BAwCCyAEIAA2AhwMBAsgBiAEKAIMRg0AA0ACQCAFIAYQNEUNAANAIAQgBCgCDEEIayIANgIMIAUgABA0DQALIAQoAhAiACAEKAIMSQRAIARBEGogBEEMahBWDAELIAQgADYCHCAAIQUMAwsgBCAEKAIQQQhqIgY2AhAMAAsACwsLCyAEQSBqJAALDQAgACgCACABKAIASQvSAwICfgJ/IwBBIGsiBCQAAkAgAUL///////////8AgyIDQoCAgICAgMCAPH0gA0KAgICAgIDA/8MAfVQEQCABQgSGIABCPIiEIQMgAEL//////////w+DIgBCgYCAgICAgIAIWgRAIANCgYCAgICAgIDAAHwhAgwCCyADQoCAgICAgICAQH0hAiAAQoCAgICAgICACFINASACIANCAYN8IQIMAQsgAFAgA0KAgICAgIDA//8AVCADQoCAgICAgMD//wBRG0UEQCABQgSGIABCPIiEQv////////8Dg0KAgICAgICA/P8AhCECDAELQoCAgICAgID4/wAhAiADQv///////7//wwBWDQBCACECIANCMIinIgVBkfcASQ0AIARBEGogACABQv///////z+DQoCAgICAgMAAhCICIAVBgfcAaxBhIAQgACACQYH4ACAFaxC7AiAEKQMIQgSGIAQpAwAiAEI8iIQhAiAEKQMQIAQpAxiEQgBSrSAAQv//////////D4OEIgBCgYCAgICAgIAIWgRAIAJCAXwhAgwBCyAAQoCAgICAgICACFINACACQgGDIAJ8IQILIARBIGokACACIAFCgICAgICAgICAf4OEvwtEAQF/IwBBEGsiBSQAIAUg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IARBCGohBiADKAIAQZCRAUcEQEH3H0GfwwBBkARB1iUQAAALIAMgBhBxIARBEGokACABIAEpA2giB0IBfDcDaCACQQhqIgNBAUHmACABLQBkIAdBACAFEI8CIABBADYCACAAIAIoAhA2AgwgACACKQMINwIEIAJBADYCECACQgA3AwggAxAKGiAFEAoaIAJBQGskAAsnAQF/IwBBEGsiAiQAIAIgATcDCCAAIAJBCGpBCBB3GiACQRBqJAALJwEBfyMAQRBrIgIkACACIAE6AA8gACACQQ9qQQEQdxogAkEQaiQAC7wCAQR/IAAoAgQgACgCCEkEQCAAIAAoAgQgARA9QRhqNgIEDwsjAEEgayIEJAAgBEEMaiAAIAAoAgQgACgCAGtBGG1BAWoQ2wEgACgCBCAAKAIAa0EYbSAAQQhqEL4BIgIoAgggARA9GiACIAIoAghBGGo2AgggACgCBCEDIAAoAgAhBSACKAIEIQEDQCADIAVHBEAgAUEYayADQRhrIgMQPSEBDAELCyACIAE2AgQgACgCACEDIAAgATYCACACIAM2AgQgACgCBCEBIAAgAigCCDYCBCACIAE2AgggACgCCCEBIAAgAigCDDYCCCACIAE2AgwgAiACKAIENgIAIAIoAgQhAANAIAAgAigCCCIBRwRAIAIgAUEYayIBNgIIIAEQERoMAQsLIAIoAgAiAARAIAAQCwsgBEEgaiQACwwAIAAgACgCBBCcBgtdAQR/AkAgACgCCEUNACAAKAIEIgEoAgAiAyAAKAIAIgIoAgQ2AgQgAigCBCADNgIAIABBADYCCANAIAAgAUYNASABKAIEIQQgAUEIahC/AiABEAsgBCEBDAALAAsLngMCBX8BfiMAQeAAayIEJAACQCABLQA0RQRAIABB09IAEA4aDAELEIsCIQgjAEEQayIDJAAgAyACOgAPIARBGGogAUHoAWogA0EPahDKAyADQRBqJAACQCAEKAIwIAJyRQRAIABB09IAEA4aDAELIAQgCELoB383AyggBEEANgIQIARCADcDCCMAQRBrIgMkACAEQRhqIgIoAgBBmOkARwRAQYwXQerCAEH7AkG4MBAAAAsgBEEIaiIFIAIQYxBnIAMgBTYCDCADQeIBNgIIIANBCGohBiACKAIAQZjpAEcEQEGMF0HqwgBBiQNB8CIQAAALIAIg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IAItAAA6AAALSwAgACABKQMANwMAIAAgASkDCDcDCCAAIAIoAgg2AhggACACKQIANwIQIAJCADcCACACQQA2AgggAEEBOgAgIABBKGogAxAyGiAACz4BAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQZgBayIBNgIIIAEQ3QYaDAELCyAAKAIAIgAEQCAAEAsLC7cBAQN/IAAoAgQhAyAAKAIAIQQgASgCBCECA0AgAyAERwRAIAJBmAFrIgIgA0GYAWsiAykDADcDACACIAMpAwg3AwggAkEQaiADQRBqEO4DGiACQShqIANBKGoQMhoMAQsLIAEgAjYCBCAAKAIAIQMgACACNgIAIAEgAzYCBCAAKAIEIQIgACABKAIINgIEIAEgAjYCCCAAKAIIIQIgACABKAIMNgIIIAEgAjYCDCABIAEoAgQ2AgALFQAgACABIAIgA0GYAUHs0LwNEKYBCxsAIAAgAUG1qN4GQZgBQevQvA1B7NC8DRCUAQs5AQF+IAAgASkDADcDACAAIAEpAwg3AwggAikDACEEIABBADoAICAAIAQ3AxAgAEEoaiADEDIaIAALDQAgACABQdjVABCSCQsMACABIAIrAwA5AwALCgAgASACEO0DGguXAQICfwF+IwBBEGsiAiQAQQIhAyAAKQMIIgQgACkDAFQEQAJAIAEtADBFDQAgACAEQgF8NwMIIAIgARCcAiAALQAoBEAgACACKQMANwMYIAAgAikDCDcDIAwBCyAAQRhqIgEgAikDADcDACABIAIpAwg3AwggAEEBOgAoCyAAIAApAxBCAXw3AxBBACEDCyACQRBqJAAgAwviAQIFfwJ+AkAgACgCACICIAAoAgQiA0cEQANAIAcgAyACa0HIAG2tIghUIQMgByAIWg0CAkACQCABIAIgB6ciBEHIAGwiBWoQ3AZBAWsOAgAEAQsgACgCACAFaiABENsGDQMLIAAoAhAgACgCDCICa0HwAG2tIAdWBEAgASACIARB8ABsahDaBkECRg0DCyAHQgF8IQcgACgCACECIAAoAgQhAwwACwALIAAoAhAhAiAAKAIMIQADQCAAIAJHIQMgACACRg0BIAEgABDaBiEGIABB8ABqIQAgBkECRw0ACwsgAwtAAgF/An5BASECIAApAwggASkDQHwiAyAAKQMAVAR/IAEpAzghBCAA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ACABEBQLIABBOGohAwJAIAAtAEhFBEBCACABEBQgAyABEEcMAQtCASABEBQgAxByKQMAIAEQFCADEHIpAwggARAUIARBCGogAiADEHJBCGoQyQILIAAxAFAgARAUIAAxAGggARAUAkAgAC0AaEUNACAAKQNYIAEQFCAAQeAAaiIDKQMAIAEQFCAAKQNYUA0AIARBCGogAiADEMkCCyAEQRBqJAALWAEBfyMAQRBrIgMkACADIAI2AgggAyABNgIMIAAgAygCDCIBKQIANwIAIAAgASgCCDYCCCABQgA3AgAgAUEANgIIIABBEGogAygCCBAyGiADQRBqJAAgAAstAQF/IAAoAighASAAKAIkIQADQCAAIAFHBEAgAEEBOgAgIABBKGohAAwBCwsLEAAgAC0AgAEEQCAAEH8aCwsSACAAIAEoAgAgASgCBBBRIAALmQMCB38CfiMAQcABayICJAACQCABKAIEIgRBCE0EQCAAQQA6ADggAEEAOgAADAELIAEoAgAiAygAAEGF36maeEcEQEEDEBoEQCACQThqEBUhByACQQM2AjQgB0G7LBANGiACQTRqEBkLIABBADoAOCAAQQA6AAAMAQsgAiADKAAEIgU2AjAgAy0ACCEGIAEgBEEJazYCBCABIANBCWo2AgAgAkEgaiABEBYgAi0AKEUEQCAAQQA6ADggAEEAOgAADAELIAIpAyAiCSABNQIEIgpWBEAgAEEAOgA4IABBADoAAAwBCyACIANBCGogCSAErSAKfSIKfEIIfRCvAyAAAn8gAigCMCACKAAARwRAQQMQGgRAIAJBOGoQFSEIIAJBAzYCNCAIQdcsEA0aIAJBNGoQGQsgAEEAOgAAQQAMAQsgAikDICEJIAAgAikAADcAGCAAIAIpABg3ADAgACACKQAQNwAoIAAgAikACDcAICAAIAo3AxAgACAJNwMIIAAgBjoABCAAIAU2AgBBAQs6ADgLIAJBwAFqJAALWQEBfyMAQRBrIgMkACADIAI2AgggAyABNgIMIAAgAygCDCIBKQIANwIAIAAgASgCCDYCCCABQgA3AgAgAUEANgIIIABBEGogAygCCBCHAxogA0EQaiQAIAALWQEBfyMAQRBrIgMkACADIAI2AgggAyABNgIMIAAgAygCDCIBKQIANwIAIAAgASgCCDYCCCABQgA3AgAgAUEANgIIIABBEGogAygCCBDmBBogA0EQaiQAIAALOwAgACgCFEGAgICAeEYEQCAAIAAoAgRBMGsQ9AYQEgALIAAgAC0AHkEBazoAHiAAEE0gABAwIAAQjwgLKgEBfyAAKAIEIQIDQCABIAJGRQRAIAJBMGsQ9QYhAgwBCwsgACABNgIECw4AIABBEGoQswEgABAKCxcAIAIoAgAhACACQQA2AgAgASAANgIACz0BAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQTBrIgE2AgggARD1BhoMAQsLIAAoAgAiAARAIAAQCwsLtgEBA38gACgCBCECIAAoAgAhAyABKAIEIQQDQCACIANHBEAgBEEwayIEIAJBMGsiAikDADcDACAEIAIoAgg2AgggAkIANwMAIAJBADYCCCAEQRBqIAJBEGoQhwMaDAELCyABIAQ2AgQgACgCACEDIAAgBDYCACABIAM2AgQgACgCBCEDIAAgASgCCDYCBCABIAM2AgggACgCCCEDIAAgASgCDDYCCCABIAM2AgwgASABKAIENgIACxcAIAAgARAQIgBBGGogAkEIahCTAiAACw4AIABBGGoQhQEgABAKC+IBAgV/An4CQCAAKAIAIgIgACgCBCIDRwRAA0AgByADIAJrQcgAba0iCFQhAyAHIAhaDQICQAJAIAEgAiAHpyIEQcgAbCIFahDaA0EBaw4CAAQBCyAAKAIAIAVqIAEQ+wYNAwsgACgCECAAKAIMIgJrQfAAba0gB1YEQCABIAIgBEHwAGxqENkDQQJGDQMLIAdCAXwhByAAKAIAIQIgACgCBCEDDAALAAsgACgCECECIAAoAgwhAANAIAAgAkchAyAAIAJGDQEgASAAENkDIQYgAEHwAGohACAGQQJHDQALCyADCzwBAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQQxrIgE2AgggARAPGgwBCwsgACgCACIABEAgABALCwuMAQEDfyAAKAIEIQMgACgCACEEIAEoAgQhAgNAIAMgBEcEQCACQQxrIANBDGsiAxAlIQIMAQsLIAEgAjYCBCAAKAIAIQMgACACNgIAIAEgAzYCBCAAKAIEIQIgACABKAIINgIEIAEgAjYCCCAAKAIIIQIgACABKAIMNgIIIAEgAjYCDCABIAEoAgQ2AgALKwEBfyABQQBIBEAQAQALIAAgARAYIgI2AgQgACACNgIAIAAgASACajYCCAuPAQEDfyAAKAIEIgIgACgCCEcEQCACIAEoAgA2AgAgACACQQRqNgIEDwsjAEEgayIDJAAgA0EMaiAAIAAoAgQgACgCAGtBAnVBAWoQtAogACgCBCAAKAIAa0ECdSAAQQhqEMgBIgIoAggiBCABKAIANgIAIAIgBEEEajYCCCAAIAIQ/AUgAhCbASADQSBqJAAL2AYBB38jAEEgayIIJAAgACgCACIDIAEgA2tByABtQcgAbGohAQJAIAAoAgQiByAAKAIISQRAIAEgB0YEQCAAIAIQhQkMAgsgACgCBCIDIQYgASADIAFByABqa0HIAG1ByABsaiIFIQQDQCAEIAdPBEAgACAGNgIEIwBBEGsiBiQAIwBBEGsiBCQAIAMhACAFIQcDQCABIAdHBEAgAEHIAGsiACAHQcgAayIHEK0DDAELCyAEIAA2AgwgBCAFNgIIIAQoAgghACAGIAMgBCgCDCADa0HIAG1ByABsajYCDCAGIAEgACABa0HIAG1ByABsajYCCCAEQRBqJAAgBigCDBogBkEQaiQABSAGIAQQZUHIAGohBiAEQcgAaiEEDAELCyABIAIQrQMMAQsgCEEMaiAAIAcgA2tByABtQQFqEOcIIAEgACgCAGtByABtIABBCGoQoAQhAyMAQSBrIgckAAJAIAMoAggiBCADKAIMRw0AIAMoAgQiBSADKAIAIgZLBEAgAyAFIAQgBSAFIAZrQcgAbUEBakF+bUHIAGwiBmoQzgUiBDYCCCADIAMoAgQgBmo2AgQMAQsgB0EMakEBIAQgBmtByABtQQF0IAQgBkYbIgUgBUECdiADKAIQEKAEIgUoAggiBCADKAIIIAMoAgQiBmtByABtQcgAbGohCQNAIAQgCUcEQCAEIAYQZUHIAGohBCAGQcgAaiEGDAELCyAFIAk2AgggAygCACEEIAMgBSgCADYCACAFIAQ2AgAgAygCBCEEIAMgBSgCBDYCBCAFIAQ2AgQgAygCCCEEIAMgBSgCCDYCCCAFIAQ2AgggAygCDCEEIAMgBSgCDDYCDCAFIAQ2AgwgBRCXBCADKAIIIQQLIAQgAhBlGiADIAMoAghByABqNgIIIAdBIGokACADIAEgACgCACADKAIEEJ4KNgIEIAAoAgQhBSADKAIIIQIDQCABIAVHBEAgAiABEGVByABqIQIgAUHIAGohAQwBCwsgAyACNgIIIAAoAgAhASAAIAMoAgQ2AgAgAyABNgIEIAAoAgQhASAAIAMoAgg2AgQgAyABNgIIIAAoAgghASAAIAMoAgw2AgggAyABNgIMIAMgAygCBDYCACADEJcECyAIQSBqJAALMwAgACgCFEGAgICAeEYEQCAAEOkEEBIACyAAIAAtAB5BAWs6AB4gABBNIAAQMCAAEOQLCz0BAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQYABayIBNgIIIAEQfxoMAQsLIAAoAgAiAARAIAAQCwsLjwEBA38gACgCBCEDIAAoAgAhBCABKAIEIQIDQCADIARHBEAgAkGAAWsgA0GAAWsiAxCTASECDAELCyABIAI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIACygBAX8jAEEQayICJAAgAiABOgAPIAAgAkEPakEBENQFGiACQRBqJAALEAAgAC0ADEUEQBASAAsgAAuNAgEDfyAAKAIEIAAoAgAiA2tBDG0iAiABSQRAIwBBIGsiAyQAAkAgASACayICIAAoAgggACgCBCIBa0EMbU0EQCAAKAIEIgEgAkEMbGohAgNAIAEgAkYEQCAAIAI2AgQFIAFBADYCCCABQgA3AgAgAUEMaiEBDAELCwwBCyADQQxqIAAgASAAKAIAa0EMbSACahDiAiAAKAIEIAAoAgBrQQxtIABBCGoQqgIiBCgCCCIBIAJBDGxqIQIDQCABIAJHBEAgAUEANgIIIAFCADcCACABQQxqIQEMAQsLIAQgAjYCCCAAIAQQ/QYgBBD8BgsgA0EgaiQADwsgASACSQRAIAAgAyABQQxsahCECAsLngQCB38CfiMAQRBrIgUkAAJAIAAoAgAgACgCBEYNACAFQQhqIAAgARCZAyAFKAIMIQIgBSgCCCEDA0ACQCAAKAIMIAJBA3RqIgYoAgAiBCADRgRAIAEgACgCACAGKAIEQSxsahBXIQggBSgCCCEDIAhFDQEgACgCDCAFKAIMIgJBA3RqKAIAIQQLIAMgBEcNAiACIgFBAWoiA0EAIAMgACICKAIQRxshAyAAKAIMIgQgAUEDdGooAgQhBgNAIAQgAyIAQQN0aiIDKAIAIgdBgARPBEAgBCABQQN0aiIBIAMoAgQ2AgQgASAHQYACazYCACAAQQFqIgFBACABIAIoAhBHGyEDIAIoAgwhBCAAIQEMAQsLIAQgAUEDdGpCADcCACACKAIEIgEgAigCACIAa0EsbUEBayAGRwRAIAAgBkEsbGoiACABQSxrIgEpAgA3AgAgACABKQIYNwIYIAAgASkCEDcCECAAIAEpAgg3AgggAEEgaiABQSBqEEwgAEEgEIgBIQogAigCBCACKAIAa0EsbUEBayEAIAogAjEAHoinIQQgAigCECEBIAIoAgwhAwNAIAMgBEEDdGoiBygCBCAARwRAIARBAWoiBEEAIAEgBEcbIQQMAQsLIAcgBjYCBAsgAhDpBAwCCyAFIANBgAJqIgM2AgggBSAFKAIMQQFqIgJBACACIAAoAhBHGyICNgIMDAALAAsgBUEQaiQAC84BAQR/IwBBQGoiAyQAAkAgAEHkAGogARCNASIELQC4AUUNACAAIARBmAFqIgUgAhCIByAEKAKsASAELQCzASIGIAbAQQBIGwRAIAIgA0EgaiAEQagBahBdIgAQ6gEgABAqDAELIANCADcDMCADQQA6ADggA0IANwMoIAMgATYCICAAQeQAaiAFENEBIgEgACgCaEcEQCABQRBqEGkgA0EgahCLCAsgA0EAOgAYIAMgAykDKDcDCCACIANBCGoiABDqASAAECoLIANBQGskAAvVAgIGfwJ+IAFBAWoiAkEAIAIgACgCEEcbIQQgACgCDCIDIAFBA3RqKAIEIQUDQCADIAQiAkEDdGoiBCgCACIGQYAESUUEQCADIAFBA3RqIgEgBCgCBDYCBCABIAZBgAJrNgIAIAJBAWoiAUEAIAEgACgCEEcbIQQgACgCDCEDIAIhAQwBCwsgAyABQQN0akIANwIAIAAoAgQiAiAAKAIAIgFrQQV1QQFrIAVHBEAgASAFQQV0aiIBIAJBIGsiAikAADcAACABIAIpABg3ABggASACKQAQNwAQIAEgAikACDcACCABQSAQiAEhCSAAKAIEIgIgACgCAGtBBXVBAWshASAJIAAxAB6IpyEDIAAoAhAhBCAAKAIMIQYDQCABIAYgA0EDdGoiBygCBEZFBEAgA0EBaiIDQQAgAyAERxshAwwBCwsgByAFNgIECyAAIAJBIGs2AgQLEAAgAC0AJARAIAAQvQEaCwtbAQF/IABCADcDUCAAQgA3A0AgAEEANgJIIABBADoAPAJAIABBAEExEB0iAkEwaiIALQAMBEAgAEHT0gAQ5wQMAQsgAEHT0gAQDkEBOgAMCyACIAEpA5ABNwNQC68FAgt/Bn4jAEHAAWsiAyQAIANBADYCLCADQgA3AiQgA0GwAWogASACIANBJGoiBEEAELQBIAQQDxoCQCADLQC8AQRAIAMoArQBIAMoArABIgVrQQN1rSEQIAEoAuwBIAEoAugBIgZrQQxtrSERIAEoAvQBIQcDfiAOIBFRBH4gA0IANwMYIANCADcDECADQgA3AwggA0EIaiAPEN0IQgAFIA8gByAOpyIEQQN0aikDACAOIBBUBH4gBSAEQQN0aikDAAVCAAt9IhIgBiAEQQxsaiIEKAIEIAQoAgBrQQN1rSITIBIgE1QbfCEPIA5CAXwhDgwBCwshDgNAIAEoAuwBIAEoAugBIgVrQQxtrSAOWARAIANBJGogAhCYAiIBQQxqIANBCGoQrQUgACABEKUDQQE6ACQgARC9ARogA0EUahAPGgwDBSAFIA6nIgRBDGxqIgUoAgQiByAEQQN0IgQgASgC9AFqKQMAIAMoArQBIAMoArABIgZrQQN1rSAOVgR+IAQgBmopAwAFQgALfSIPIAcgBSgCAGtBA3WtIhAgDyAQVBunQQN0ayEFA0AgBSAHRwRAIAEoApABIAUoAgBBB3RqQShqIQYjAEEQayIEJAAgBEEEaiADQQhqIgkgBhCNByAEKAIIIQogBCgCBCEGA0AgBiAKRgRAIARBBGoQDxogBEEQaiQABSAGKAIAIgtBA3YiCCAJKAIQIAkoAgwiDGtJBEAgCCAMaiIIIAgtAABBASALQQdxdHI6AAALIAZBBGohBgwBCwsgBUEIaiEFDAELCyAOQgF8IQ4MAQsACwALQQMQGgRAIANBKGoQFSENIANBAzYCJCANIAFB0ANqEBNB6BEQDRogA0EkahAZCyAAQQA6ACQgAEEAOgAACyADQbABahA/IANBwAFqJAALpwEBBX8jAEEQayIDJAAgAyACKAAAIAEoAhAgASgCDGtBA3QiBXA2AgwgAigABCEEIAIoAAghByAAQQA2AgggAEIANwIAIAAgASgCCBB0IAAgA0EMahD/BiAHIAVwIQZBASECA0AgAiABKAIIT0UEQCADIAQgBXAiBCADKAIMaiAFcDYCDCAAIANBDGoQ/wYgAkEBaiECIAQgBmohBAwBCwsgA0EQaiQACwwAIAAgARDeA0EBcwt6AQN/IAAoAgAhAiAAIAE2AgAgAgRAIAIEQCMAQRBrIgEkACABIAI2AgwgASgCDCIAKAIABEAgACgCACEEIAAoAgQhAwNAIAMgBEcEQCADQSBrIgMQswEMAQsLIAAgBDYCBCABKAIMKAIAEAsLIAFBEGokAAsgAhALCwtmAQF/IAAoAgAhAiAAIAE2AgAgAgRAIAIEQCACKAIMIgAEQCAAEAsLIwBBEGsiACQAIAAgAjYCDCAAKAIMIgEoAgAEQCABIAEoAgAQ9AYgACgCDCgCABALCyAAQRBqJAALIAIQCwsLCQAgAEEAEI8HCxgBAX9BDBAYIgBCADcCACAAQQA2AgggAAsJACAAQQAQkAcLPQECfyAAKAIEIQIDQCACIAAoAggiAUcEQCAAIAFBKGs2AgggAUEgaxCFAQwBCwsgACgCACIABEAgABALCwuXAQEDfyAAKAIEIQMgACgCACEEIAEoAgQhAgNAIAMgBEcEQCACQSBrIANBIGsQkwIgA0EoayEDIAJBKGshAgwBCwsgASACNgIEIAAoAgAhAyAAIAI2AgAgASADNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAs9AQJ/IAAoAgQhAgNAIAIgACgCCCIBRwRAIAAgAUE4ayIBNgIIIAEQ+gYaDAELCyAAKAIAIgAEQCAAEAsLC7UBAQN/IAAoAgQhAiAAKAIAIQMgASgCBCEEA0AgAiADRwRAIARBOGsiBCACQThrIgIpAwA3AwAgBCACKAIINgIIIAJCADcDACACQQA2AgggBEEYaiACQRhqEJMCDAELCyABIAQ2AgQgACgCACEDIAAgBDYCACABIAM2AgQgACgCBCEDIAAgASgCCDYCBCABIAM2AgggACgCCCEDIAAgASgCDDYCCCABIAM2AgwgASABKAIENgIACxQAIAAgASACIANBOEGlkskkEKYBC2MBA38jAEEQayIBJAAgASAANgIMIAEoAgwiACgCAARAIAAoAgAhAyAAKAIEIQIDQCACIANHBEAgAkEgaxCFASACQShrIQIMAQsLIAAgAzYCBCABKAIMKAIAEAsLIAFBEGokAAteAQN/IwBBEGsiASQAIAEgADYCDCABKAIMIgAoAgAEQCAAKAIAIQMgACgCBCECA0AgAiADRwRAIAJBOGsQ+gYhAgwBCwsgACADNgIEIAEoAgwoAgAQCwsgAUEQaiQAC7gBAgR/AX0jAEEQayIEJAAgAEEANgIIIABCADcCACABKAIEIgIgASgCACIDRwRAIAAgAiADa0EEdRD5CSAAKAIEIQIgASgCBCEFIAEoAgAhAwNAIAMgBUcEQCACIAMpAwA3AwAgAiADKQMINwMIIAJBEGohAiADQRBqIQMMAQsLIAAgAjYCBAsgAEEANgIUIABCADcCDCABKgIYIQYgAEE+OgAeIAAgBjgCGCAAIAEQwwogBEEQaiQACx0AIABBCGogAUEIahCTAiAAQQE6ACggAEEBOgAwCz8BAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQYABazYCCCABQfAAaxBCGgwBCwsgACgCACIABEAgABALCwupAQEDfyAAKAIEIQMgACgCACEEIAEoAgQhAgNAIAMgBEcEQCACQYABayICIANBgAFrIgMpAwA3AwAgAiADKQMINwMIIAJBEGogA0EQahAyGgwBCwsgASACNgIEIAAoAgAhAyAAIAI2AgAgASADNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAuhTAMmfwt+AXwjAEGwAmsiCSQAIAlB4ABqIgZBAEGwARAdGiAJQZQCaiERIwBB8AFrIggkACACIhYoAgAhAiAGIBYoAgQgFi0ACyIEIATAQQBIIgQbIgM2AgQgBiACIBYgBBsiAjYCACAGIAMgFigCeCIEazYCBCAGIAIgBGo2AgAgCEHgAWogBhAWAkACQAJAIAgtAOgBRQRAIBFBADoAGCARQQA6AAAMAQsgBkEIaiICIAgoAuABEP0BA0AgCCkD4AEgKlYEQCAIQRBqIAYQUgJAIAgtABwiA0UEQCARQQA6ABggEUEAOgAADAELIAhBEGohBAJAIAIoAgQgAigCCEcEQCACIAQQrgkMAQsgAiAEEK0JCwsgKkIBfCEqIAhBEGoQNhogAw0BDAILCyAIQdABaiAGEBYgCC0A2AFFBEAgEUEAOgAYIBFBADoAAAwBCyAIQQA2AswBQgAhKiAIQgA3AsQBIAhBxAFqIAgoAtABEJENAkADQCAIKQPQASAqVgRAIAhBsAFqIAYQFiAILQC4AUUEQCARQQA6ABggEUEAOgAADAMLIAhBoAFqIAYQFgJAAkAgCC0AqAFFDQAgCCkDsAEhKSAqUA0BICkgCCgCxAEgKqdBBHRqQRBrKQMAWg0BQQMQGkUNACAIQRRqEBUhJSAIQQM2AhAgJUH4JRANGiAIQRBqEBkLIBFBADoAGCARQQA6AAAMAwsgCCApNwMQIAggCCkDoAE3AxggKkIBfCEqIAhBEGohAgJAIAhBxAFqIgQoAgQiAyAEKAIISQRAIAMgAikDADcDACADIAIpAwg3AwggBCADQRBqNgIEDAELIAQgAhDxBAsMAQsLIAgoAsQBIQIgCEEANgLEASAIIAI2AgQgCCkCyAEhKSAIQgA3AsgBIAggKTcCCCAIQbABaiEKIwBB4ABrIgMkACADQgA3A1ggBkEUaiEbIAZBIGohHCAGQSxqIR0gBkE4aiEXIAZBxABqIQsgBkHcAGohHiAGQegAaiEfIAZBgAFqISAgBkGMAWohISAGQZgBaiEiIANByABqIRMgA0HEAGohECADQRhqIRogCEEEaiIjIgIoAgQhJCACKAIAIRUDQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgFSAkRwRAIBUpAwgiKiAGNQIEVgRAIApBADoADCAKQQA6AAAMEgsgKqchAiAGKAIAIQQgFSkDACIpQhF9IitCBFgNASApQvAAfSIrQgNYDQIgKUIBfSIrQgFYDQMgKULWAH0iK0IBWA0EAkAgKUI0UgRAIClCwgBSDQcgA0EAOgAwQgAhKSADQgA3AyggA0EAOgAgIANBADoAGCADIAStICpCIIaENwMQICqnIQIDQCACRSApUHENEyADQUBrIANBEGoQpwIgAy0AQEUNAiADLQBQRQ0CIB4gExCmAiADKQMoISkgAygCFCECDAALAAtCACEpIANCADcDICADQQE6ABggAyAErSAqQiCGhDcDECAqpyECA0AgAkUgKVBxDRIgA0FAayEFIwBBEGsiBCQAIANBEGoiAikDECErAkADQCArUARAIAQgAhAWIAQtAAgEQCACIAQpAwAiKzcDECACIAItAAhBAXM6AAgMAgUgBUEAOwAADAMLAAsLIAIgK0IBfTcDECAFQQE6AAAgBSACLQAIOgABCyAEQRBqJAAgAy0AQARAIAYoAlQiAiAGKAJYQQV0RgRAAn8gAkEBaiICQQBOBEAgBigCWCIEQQV0Qf7///8DTQR/IARBBnQiBCACQR9qQWBxIgIgAiAESRsFQf////8HCwwBCwwaCyECIwBBIGsiDSQAIAIgBigCWEEFdEsEQCACQQBIIgQNGiANQQA2AhwgDUIANwIUIAQNGiACQQFrQQV2QQFqIgIQ+gUhBCANQRRqIhQgAjYCCCAUQQA2AgQgFCAENgIAIAYoAlAhAiANQQA2AhAgDSACNgIMIA0gBigCVCIEQR9xNgIIIA0gAiAEQQN2Qfz///8BcWo2AgQjAEEgayIHJAAgFCANKAIIIgUgFCgCBCICIA0oAhAiDGtqIA0oAgQiDiANKAIMIg9rQQN0aiIENgIEIAJBACAEQQFrIhIgAkEBa3NBIEkbRQRAIBQoAgAgEkEFdkEAIARBIU8bQQJ0akEANgIACyAHIAw2AhwgByAPNgIYIAcgBTYCFCAHIA42AhAgFCgCACEEIAcgAkEfcTYCDCAHIAQgAkEDdkH8////AXFqNgIIIwBBIGsiBSQAAkAgBygCHCICIAcoAgwiBEYEQCAHKAIYIQQgBSACNgIcIAUgBDYCGCAFIAcoAhA2AhAgBSAHKAIUNgIUIAcoAgghBCAFIAI2AgwgBSAENgIIAkAgBSgCFCAFKAIcIgRrIAUoAhAgBSgCGCIMa0EDdGoiAkEATARAIAUoAgghBAwBCyAEBEAgBSgCCCIOIA4oAgBBfyAEdEF/QSAgBGsiBCACIAQgAiAESBsiBGt2cSIPQX9zcSAMKAIAIA9xcjYCACAFIAUoAgwgBGoiDEEfcTYCDCAFIA4gDEEDdkH8////AXFqNgIIIAUgBSgCGEEEaiIMNgIYIAIgBGshAgsgBSgCCCAMIAJBIG0iDkECdCIMEFsaIAUgBSgCCCAMaiIENgIIIAIgDkEFdGsiAkEATA0AIAUgBSgCGCAMaiIMNgIYIAUoAggiBCAEKAIAQX9BICACa3YiDkF/c3EgDCgCACAOcXI2AgAgBSACNgIMCyAHIAQ2AgAgByAFKAIMNgIEDAELIAcoAhghDCAFIAI2AhwgBSAMNgIYIAUgBygCEDYCECAFIAcoAhQ2AhQgBygCCCECIAUgBDYCDCAFIAI2AggCQCAFKAIUIAUoAhwiAmsgBSgCECAFKAIYIgRrQQN0aiIOQQBMBEAgBSgCDCECIAUoAgghDAwBCwJAIAJFBEAgBSgCDCECDAELIAUoAggiGSAZKAIAQX9BICAFKAIMIgxrIhIgEiAOQSAgAmsiGCAOIBhIGyIPIA8gEksbIhJrdkF/IAx0cUF/c3EgBCgCAEF/IAJ0QX8gGCAPa3ZxcSIYIAwgAmt0IBggAiAMa3YgAiAMSRtyNgIAIAUgDCASaiIEQR9xIgI2AgwgBSAZIARBA3ZB/P///wFxaiIMNgIIIA8gEmsiBEEASgRAIAwgDCgCAEF/QSAgBGt2QX9zcSAYIAUoAhwgEmp2cjYCACAFIAQ2AgwgBCECCyAOIA9rIQ4gBSAFKAIYQQRqIgQ2AhgLQSAgAmshD0F/IAJ0IhJBf3MhGQNAIAUoAgghDCAOQSBOBEAgDCAMKAIAIBlxIAQoAgAiBCACdHI2AgAgBSAMQQRqNgIIIAwgDCgCBCAScSAEIA92cjYCBCAFIAUoAhhBBGoiBDYCGCAOQSBrIQ4MAQsLIA5BAEwNACAMIAwoAgBBfyAPIA8gDiAOIA9KGyIPa3YgEnFBf3NxIAQoAgBBf0EgIA5rdnEiEiACdHI2AgAgBSACIA9qIgJBH3EiBDYCDCAFIAwgAkEDdkH8////AXFqIgw2AgggDiAPayICQQBMBEAgBCECDAELIAwgDCgCAEF/QSAgAmt2QX9zcSASIA92cjYCACAFIAI2AgwLIAcgAjYCBCAHIAw2AgALIAVBIGokACAHQSBqJAAgBigCUCECIAYgDSgCFDYCUCANIAI2AhQgBigCVCECIAYgDSgCGDYCVCANIAI2AhggBigCWCECIAYgDSgCHDYCWCANIAI2AhwgFBD7CAsgDUEgaiQAIAYoAlQhAgsgBiACQQFqNgJUQQEgAnQhBCAGKAJQIAJBA3ZB/P///wFxaiICAn8gAy0AQQRAIAIoAgAgBHIMAQsgAigCACAEQX9zcQs2AgAgAykDICEpIAMoAhQhAgwBCwsgCkEAOgAMIApBADoAAAwSCyAKQQA6AAwgCkEAOgAADBELIAYoAmwgBigCaGtBA3UhBSMAQSBrIgckACAFIAZB9ABqIgQiAigCCCACKAIAIgtrQRhtSwRAIAVBq9Wq1QBPDRUgAiAHQQxqIAUgAigCBCALa0EYbSACQQhqEL4BIgIQiwkgAhCKCQsgB0EgaiQAIAYoAmwhBSAGKAJoIQIDQCACIAVHBEAgAikDACIqQgSIISkCQAJAAkACQAJAAkACQAJAAkACQCAqp0EPcQ4JCAABAgMEBwUGBwsgA0EDOgAgIANBADoAECAEIANBEGoiBxDcASAHEDsMCAsgA0EDOgAgIANBAToAECAEIANBEGoiBxDcASAHEDsMBwsgAygCXCEHIANBQGsgA0HYAGoQFgJAIAMtAEgEQCApIAcgAygCXGutUQ0BCyAKQQA6AAwgCkEAOgAADBoLIANBAToAICADIAMpA0A3AxAgBCADQRBqIgcQ3AEgBxA7DAYLIAMoAlwhByADQUBrIANB2ABqEKkBAkAgAy0ASARAICkgByADKAJca61RDQELIApBADoADCAKQQA6AAAMGQsgA0EAOgAgIAMgAykDQDcDECAEIANBEGoiBxDcASAHEDsMBQsgKUIIUgRAIApBADoADCAKQQA6AAAMGAsgAygCXCIHQQhPBEAgAygCWCILKwAAITQgAyAHQQhrNgJcIAMgC0EIajYCWCADQQI6ACAgAyA0OQMQIAQgA0EQaiIHENwBIAcQOwwFCyAKQQA6AAwgCkEAOgAADBcLIAMoAlwiB60gKVQEQCAKQQA6AAwgCkEAOgAADBcLAkAgBwRAIANBQGsiCyADKAJYICmnIgcQUSADIAMoAkg2AhggA0EANgJIIANBBDoAICADIAMpA0A3AxAgA0IANwNAIAQgA0EQaiINENwBIA0QOyALEAoaDAELIANBADYCGCADQQA2AkggA0IANwMQIANBBDoAICADQgA3A0AgBCADQRBqIgcQ3AEgBxA7IANBQGsQChogKachBwsgAyADKAJYIAdqNgJYIAMgAygCXCAHazYCXAwDCyADKAJcIQcgA0FAayADQdgAahCpAQJAIAMtAEgEQCApIAcgAygCXGutUQ0BCyAKQQA6AAwgCkEAOgAADBYLIANBBToAICADIAMpA0AiKTcDGCADICk3AxAgBCADQRBqIgcQ3AEgBxA7DAILIApBADoADCAKQQA6AAAMFAsgA0EGOgAgIAQgA0EQaiIHENwBIAcQOwsgAkEIaiECDAELCyAGKAKEASAGKAKAAWtBA3UhAiMAQSBrIgUkACACIAZBpAFqIgQoAgggBCgCACIHa0EYbUsEQCACQavVqtUATw0VIAQgBUEMaiACIAQoAgQgB2tBGG0gBEEIahC+ASICEIkJIAIQiAkLIAVBIGokACAGKAKEASENIAYoAoABIQJCACEpAkADQCACIA1GDQEgAikDACEqIANBADoAICADQQA6ABACQCAqUEUEQCApIAYoApwBIAYoApgBIgVrQQN1rVoNASApIAYoApABIAYoAowBIgdrQQN1rVoNASAFICmnQQN0IgtqKQMAISogByALaikDACErIANBAToAICADICs3AxggAyAqNwMQIClCAXwhKQsCQCAEKAIEIgUgBCgCCEcEQCAFIAMpAxA3AwAgBSADKQMgNwMQIAUgAykDGDcDCCAEIAVBGGo2AgQMAQsjAEEgayILJAAgC0EMaiAEIAQoAgQgBCgCAGtBGG1BAWoQ2wEgBCgCBCAEKAIAa0EYbSAEQQhqEL4BIgUoAggiByADKQMQNwMAIAcgAykDIDcDECAHIAMpAxg3AwggBSAHQRhqNgIIIAQgBRCJCSAFEIgJIAtBIGokAAsgAkEIaiECDAELCyAKQQA6AAwgCkEAOgAADBELQgAhKSMAQZACayICJAACQAJAAkAgBigCVCIEIAYoAmAgBigCXGtBA3VHDQAgBCAGKAJsIAYoAmhrQQN1Rw0AIAQgBigCeCAGKAJ0a0EYbUcNACAEIAYoAqgBIAYoAqQBa0EYbUYNAQtBAxAaBEAgAkGEAWoQFSEmIAJBAzYCgAEgJkGdLBANGiACQYABahAZCyAKQQA6AAwgCkEAOgAADAELIAJBADYCiAEgAkIANwKAASACQfAAaiACQYABaiIEEPkBIQUgBBDRBSAGKAJgIAYoAlxrQQN1IQQjAEEgayIHJAAgBCAFKAIIIAUoAgAiC2tB8ABtSwRAIARBk8mkEk8NFiAFIAdBDGogBCAFKAIEIAtrQfAAbSAFQQhqEI0CIgQQgwkgBBCCCQsgB0EgaiQAIAJBhAFqIRQgAkEgaiEVIAJBsAFqIRcDQAJAAkACfgJAAkAgBigCYCAGKAJca0EDda0gLFYEQEIAIS1BACEEQQAhDSAGKAIYIAYoAhQiB2tBBHWtICxWBEAgByAsp0EEdGoiBykDACItQgiIIS8gBy0ACCENC0EAIQwgBigCJCAGKAIgIgdrQQR1rSAsVgRAIAcgLKdBBHRqIgQpAwAiKkIIiCEuICqnIQwgBC0ACCEEC0EAIQdCACEqQgAhK0EAIQsgBigCMCAGKAIsIg5rQQR1rSAsVgRAIA4gLKdBBHRqIgspAwAiK0IIiCEwIAstAAghCwsgBigCPCAGKAI4Ig5rQQR1rSAsVgRAIA4gLKdBBHRqIgcpAwAiKkIIiCEpIActAAghBwsgAkEAOgBsIAJBADoAYCAGKAJIIAYoAkQiE2tBBHWtICxWBEACQCACQeAAaiIOLQAMIhAgEyAsp0EEdGoiEy0ADEYEQCAQRQ0BIA4gExClAgwBCyAQBEAgDhCMCQwBCyAOIBMQzQULCyAERQRAIA0NAgwDCwJAIA0EQCAtQv8BgyAvQgiGhCItIAYoAgwgBigCCGtBDG2tWA0BDAMLIAytQv8BgyAuQgiGhFANAwwCCyAMrUL/AYMgLkIIhoQMAwsgCiAFEPgBGgwECyAKQQA6AAwgCkEAOgAAQQEhBAwCC0IAIS1CAAshMSACQQA2AlAgAkIANwNIIAJBADoAWCACLQBsIQQCQAJAAkACQCAHBEAgC0UgBEVyDQEMAwsgCyAERXINAiACQcgAaiACQeAAahCHCQwBCwJAAkAgKkL/AYMgKUIIhoQiKlAEQCALDQEgBA0EIAJByABqQdjSABC1AwwDCyALRSAEcg0DDAELIAQNAgsgK0L/AYMgMEIIhoQiKyAGKAIMIAYoAghrQQxtrVYNASACICs3A4gBIAIgKjcDgAEgAkHIAGogAkGAAWoQtQMLIAJBGGogLKciBEEDdCIHIAYoAlxqKQMAIAIgBEEYbCILIAYoAnRqEHMiDRCGCSANEDsCfyACLQBARQRAQQMQGgRAIBQQFSEnIAJBAzYCgAEgJ0H/zQAQDSAGKAJcIAdqKQMAEHoaIAJBgAFqEBkLIApBADoADCAKQQA6AABBAQwBCyAGKAJQIARBA3ZB/P///wFxaigCACENIAJBgAFqIAJByABqELEDIQcgAiAtNwOgASACIDE3A5gBIBcgFRB2GiACIA0gBHZBAXE6ANABIAIgBigCpAEgC2oiBCkDADcD2AEgAiAELQAQOgDoASACIAQpAwg3A+ABAkAgBSgCBCAFKAIISQRAIAUgBSgCBCAHEMwFQfAAajYCBAwBCyMAQSBrIgskACALQQxqIAUgBSgCBCAFKAIAa0HwAG1BAWoQjwQgBSgCBCAFKAIAa0HwAG0gBUEIahCNAiIEKAIIIAcQzAUaIAQgBCgCCEHwAGo2AgggBSAEEIMJIAQQggkgC0EgaiQACyAHENAFGkEACyEEIAJBGGoQhAkMAQsgCkEAOgAMIApBADoAAEEBIQQLIAJByABqELkBCyAsQgF8ISwgAkHgAGoQNhogBEUNAQsLIAUQvAkLIAJBkAJqJAAMEAsgK6dBAWsOBAMKAwkLCyArp0EBaw4DBAIDBQsgK6dBAWsNCwwKCyArp0EBaw0FDAQLIApBADoADCAKQQA6AAAMCwtCACEpIANCADcDOCADQQA6ADAgA0IANwMoIANBADoAICADQQA6ABggAyAErSAqQiCGhDcDECAqpyECA0AgAkUgKVBxDQogA0FAayADQRBqEI8JAkAgAy0AQEUNACADLQBQRQ0AIAMgAykDSDcDACAiIAMQXiADKQMoISkgAygCFCECDAELCyAKQQA6AAwgCkEAOgAADAoLIANBADoAMEIAISkgA0IANwMoIANBADoAICADQQA6ABggAyAErSAqQiCGhDcDECAqpyECA0AgAkUgKVBxDQkgA0FAayADQRBqEKcCAkAgAy0AQEUNACADLQBQRQ0AICEgExCmAiADKQMoISkgAygCFCECDAELCyAKQQA6AAwgCkEAOgAADAkLIANBADoAMEIAISkgA0IANwMoIANBADoAICADQQA6ABggAyAErSAqQiCGhDcDECAqpyECA0AgAkUgKVBxDQggA0FAayADQRBqEKcCAkAgAy0AQEUNACADLQBQRQ0AICAgExCmAiADKQMoISkgAygCFCECDAELCyAKQQA6AAwgCkEAOgAADAgLIAMgAjYCXCADIAQ2AlgMBgsgA0EAOgAwQgAhKSADQgA3AyggA0EAOgAgIANBADoAGCADIAStICpCIIaENwMQICqnIQIDQCACRSApUHENBiADQUBrIANBEGoQpwICQCADLQBARQ0AIAMtAFBFDQAgHyATEKYCIAMpAyghKSADKAIUIQIMAQsLIApBADoADCAKQQA6AAAMBgsgA0EAOgAwIANCADcDKCADQQA6ACQgA0EAOgAYIAMgBK0gKkIghoQ3AxACQANAIAMoAhRFBEAgAykDKFANAgsjAEEgayICJAAgA0FAayIFQQRqIQcgA0EQaiIEQQhqIQ0CQAJAA0AgBCkDGCIpQgBSDQEgAkEQaiAEEKkBIAItABhFBEAgBUEAOgAQIAVBADoABCAFQQA6AAAMAwsgAikDECIpQgBVBEAgBCApNwMYIAIgBBBSAkAgAi0ADCIMRQRAIAVBADoAECAFQQA6AAQgBUEAOgAADAELIA0gAhCNCSAEQQA6ACALIAIQNhogDA0BDAMLIClCAFMEQCAEQQE6ACAgBEIAICl9NwMYDAELIAIgBBAWIAItAAgEQCAEIAIpAwA3AxggDRCMCSAEQQA6ACAMAQsLIAVBADoAECAFQQA6AAQgBUEAOgAADAELIAQgKUIBfTcDGCAELQAgBEAgAkEQaiAEEFIgBQJ/IAItABxFBEAgB0EAOgAAQQAMAQsgByACKQMQNwIAIAcgAigCGDYCCCACQQA2AhggAkIANwMQQQELIgQ6ABAgBSAEOgAAIAJBEGoQNhoMAQsgBUEBOgAAIAdBADoADCAHQQA6AAAgDS0ADARAIAcgDRDNBQsLIAJBIGokAAJAIAMtAEAiDUUEQCAKQQA6AAwgCkEAOgAADAELAkAgCygCBCALKAIISQRAIAsoAgQiAkEAOgAMIAJBADoAACAQLQAMBEAgAiAQKQIANwIAIAIgECgCCDYCCCAQQgA3AgAgEEEANgIIIAJBAToADAsgCyACQRBqNgIEDAELIwBBIGsiBSQAIAVBDGogCyALKAIEIAsoAgBrQQR1QQFqEIEDIAsoAgQgCygCAGtBBHUgC0EIahDAAiICKAIIIgRBADoADCAEQQA6AAAgEC0ADARAIAQgECkCADcCACAEIBAoAgg2AgggEEIANwIAIBBBADYCCCAEQQE6AAwLIAIgAigCCEEQajYCCCALKAIEIQQgCygCACEMIAIoAgQhBwNAIAQgDEcEQCAHQRBrIgdBADoAACAHQQA6AAwgBEEQayIELQAMRQ0BIAcgBCkCADcCACAHIAQoAgg2AgggBEIANwIAIARBADYCCCAHQQE6AAwMAQsLIAIgBzYCBCALKAIAIQQgCyAHNgIAIAIgBDYCBCALKAIEIQQgCyACKAIINgIEIAIgBDYCCCALKAIIIQQgCyACKAIMNgIIIAIgBDYCDCACIAIoAgQ2AgAgAigCBCEEA0AgBCACKAIIIgdHBEAgAiAHQRBrIgc2AgggBxA2GgwBCwsgAigCACICBEAgAhALCyAFQSBqJAALCyAQEDYaIA0NAAsgGhA2GgwGCyAaEDYaDAQLQgAhKSADQgA3AzggA0EAOgAwIANCADcDKCADQQA6ACAgA0EAOgAYIAMgBK0gKkIghoQ3AxADQCACRSApUHENBCADQUBrIANBEGoQjwkgAy0AQARAIANBADoACCADQQA6AAAgAy0AUARAIANBAToACCADIAMpA0g3AwALAkAgFygCBCICIBcoAghJBEAgAiADKQMANwMAIAIgAykDCDcDCCAXIAJBEGo2AgQMAQsgFyADEI4JCyADKQMoISkgAygCFCECDAELCyAKQQA6AAwgCkEAOgAADAQLIANBADoAMEIAISkgA0IANwMoIANBADoAICADQQA6ABggAyAErSAqQiCGhDcDECAqpyECA0AgAkUgKVBxDQMgA0FAayADQRBqEKcCIAMtAEAEQCAdIBMQ0gUgAykDKCEpIAMoAhQhAgwBCwsgCkEAOgAMIApBADoAAAwDCyADQQA6ADBCACEpIANCADcDKCADQQA6ACAgA0EAOgAYIAMgBK0gKkIghoQ3AxAgKqchAgNAIAJFIClQcQ0CIANBQGsgA0EQahCnAiADLQBABEAgHCATENIFIAMpAyghKSADKAIUIQIMAQsLIApBADoADCAKQQA6AAAMAgsgA0EAOgAwQgAhKSADQgA3AyggA0EAOgAgIANBADoAGCADIAStICpCIIaENwMQICqnIQIDQCACRSApUHENASADQUBrIANBEGoQpwIgAy0AQARAIBsgExDSBSADKQMoISkgAygCFCECDAELCyAKQQA6AAwgCkEAOgAADAELIAYgFSgCCCICIAYoAgBqNgIAIAYgBigCBCACazYCBCAVQRBqIRUMAQsLIANB4ABqJAAgIxAPGgJAIAgtALwBRQRAQQMQGgRAIAhBFGoQFSEoIAhBAzYCECAoQYM8EA0aIAhBEGoQGQsgEUEAOgAYIBFBADoAAAwBCyAIIAYoAgg2AhAgCCAGKAIMNgIUIAggBigCEDYCGCAGQQA2AhAgBkIANwIIIAggCCkCtAE3AiAgCCAIKAKwATYCHCAIQQA2ArgBIAhCADcCsAEgESAIQRBqIgIQJSIEQQxqIAJBDGoQJRogBEEBOgAYIAIQwwkLIAhBsAFqELwJCyAIQcQBahAPGgsgCEHwAWokAAwBCxABAAsgBkGkAWoQDxogBkGYAWoQDxogBkGMAWoQDxogBkGAAWoQDxojAEEQayIEJAAgBCAGQfQAajYCDCAEKAIMIgMoAgAEQCADKAIAIQggAygCBCECA0AgAiAIRwRAIAJBGGsiAhA7DAELCyADIAg2AgQgBCgCDCgCABALCyAEQRBqJAAgBkHoAGoQDxogBkHcAGoQDxogBkHQAGoQ+wgjAEEQayIEJAAgBCAGQcQAajYCDCAEKAIMIgMoAgAEQCADKAIAIQggAygCBCECA0AgAiAIRwRAIAJBEGsQNiECDAELCyADIAg2AgQgBCgCDCgCABALCyAEQRBqJAAgBkE4ahAPGiAGQSxqEA8aIAZBIGoQDxogBkEUahAPGiAGQQhqEEACQCAJLQCsAkUEQCAAQQA2AgggAEIANwIADAELIAEgCUHMAGogFkHUAGoQECICEPsDISkgAhAKGiAJICk3A1ggCUEANgJIIAlCADcCQCAJQUBrIgIgCSgCmAIgCSgClAJrQQxtQQFqEOACIAIgCUHYAGoQpgIgCSgCmAIhBiAJKAKUAiECA0AgAiAGRgRAIABBADYCCCAAQgA3AgAgCSgCpAIgCSgCoAJrQfAAbSEBIwBBIGsiAiQAAkACQCABIAAoAgggACgCACIGa0EHdUsEQCABQYCAgBBPDQEgACACQQxqIAEgACgCBCAGa0EHdSAAQQhqENcBIgEQngcgARCdBwsgAkEgaiQADAELEAEACyAJQZgBaiEDIAlB+ABqIQhCACEpA0AgCSgCpAIgCSgCoAIiAmtB8ABtrSApVgRAIBYpA2ghLCAJKQNYISsgCUEANgIgIAlCADcDGCAJQQA6ACggAiApp0HwAGwiBmohAQJAAkAgAkUNACABLQAQDQAgCUEYaiABEIcJDAELIAEQciIBKQMAIiogASkDCCIthFAEQCAJQRhqQbDUABC1AwwBCyAJICo3A2AgCSAJKAJAIC2nQQN0aikDADcDaCAJQRhqIAlB4ABqELUDC0IAISogCUIANwMQIAlCADcDCCApICx8ISwgCSAJKAKgAiAGaiIBKQMYIi1QBH5CAAUgCSgCQCABKAIgQQN0aikDAAs3AxAgCSAtNwMIIAEtAGgEfyABKQNYIipQBH5CAAUgCSgCQCABKAJgQQN0aikDAAshMiAqQgiIITNBAQVBAAshAiAJICs3A2ggCSAsNwNgIAggAUEwahB2GiADIAlBGGoiBRCxAxogCSgCoAIgBmotAFAhASAJIAI6AMgBIAkgMjcDwAEgCSAqQv8BgyAzQgiGhDcDuAEgCSABOgCwASAJQeAAaiECAkAgACgCBCAAKAIISQRAIAAoAgQiASAJKQMINwMAIAEgCSkDEDcDCCABQRBqIAIQMhogACABQYABajYCBAwBCyMAQSBrIgYkACAGQQxqIAAgACgCBCAAKAIAa0EHdUEBahDWAiAAKAIEIAAoAgBrQQd1IABBCGoQ1wEiASgCCCIEIAkpAwg3AwAgBCAJKQMQNwMIIARBEGogAhAyGiABIAEoAghBgAFqNgIIIAAgARCeByABEJ0HIAZBIGokAAsgACgCBBogKUIBfCEpIAIQQhogBRC5AQwBCwsgCUFAaxAPGgUgCSABIAlBNGogAhAQIgQQ+wM3A2AgCUFAayAJQeAAahBeIAQQChogAkEMaiECDAELCwsgCUGUAmoiAC0AGARAIAAQwwkLIAlBsAJqJAALQwECfyABpyICQQN0IAEgACgCBCAAKAIAIgNrQQN1rVoEfyAAIAJBAWoQ6wMgACgCAAUgAwtqIgAgACkDAEIBfDcDAAs7ACAAAn8gAUHkAGogAhDRASICIAEoAmhHBEAgACACLQCgAUEARzYCAEEBDAELIABBADoAAEEACzoABAsVACAAIAEQECIAQRBqIAIQ7gEaIAALIgAgACABLQAAOgAAIABBBGogAhAQGiAAQRBqIAMQEBogAAvpBgEMfyMAQRBrIgokACAAQeQAaiEDIAAoAmghAiAAKAJYIQYgACgCXCEEIwBBIGsiCyQAAkAgBCAGayIFQQBMDQAgBUEEdSIHIAMoAgggAygCBCIJa0EEdUwEQAJAIAkgAmsiDEEEdSIFIAdOBEAgBCEFDAELIAkhASAGIAVBBHRqIgUhCANAIAQgCEcEQCABIAgpAwA3AwAgASAIKQMINwMIIAFBEGohASAIQRBqIQgMAQsLIAMgATYCBCAMQQBMDQILIAMoAgQiBCEBIAIgBCACIAdBBHRqa2oiCCEHA0AgByAJTwRAIAMgATYCBCMAQRBrIgMkACAEIQEgCCEEA0AgAiAERwRAIAFBEGsiASAEQRBrIgQpAwA3AwAgASAEKQMINwMIDAELCyADIAE2AgwgAyAINgIIIAMoAgwaIANBEGokAAUgASAHKQMANwMAIAEgBykDCDcDCCABQRBqIQEgB0EQaiEHDAELCyMAQRBrIgEkAANAIAUgBkcEQCACIAYpAwA3AwAgAiAGKQMINwMIIAJBEGohAiAGQRBqIQYMAQsLIAEgAjYCDCABIAU2AgggASgCDBogAUEQaiQADAELIAtBDGogAyAJIAMoAgBrQQR1IAdqEIEDIAIgAygCAGtBBHUgA0EIahDAAiIBKAIIIgUgBCAGa2ohBANAIAQgBUcEQCAFIAYpAwA3AwAgBSAGKQMINwMIIAZBEGohBiAFQRBqIQUMAQsLIAEgBDYCCCADIgQoAgAhCSABKAIEIQUgAiEDA0AgAyAJRwRAIAVBEGsiBSADQRBrIgMpAwA3AwAgBSADKQMINwMIDAELCyABIAU2AgQgASgCCCEDIAQoAgQhBQNAIAIgBUcEQCADIAIpAwA3AwAgAyACKQMINwMIIANBEGohAyACQRBqIQIMAQsLIAEgAzYCCCAEKAIAIQIgBCABKAIENgIAIAEgAjYCBCAEKAIEIQIgBCABKAIINgIEIAEgAjYCCCAEKAIIIQIgBCABKAIMNgIIIAEgAjYCDCABIAEoAgQ2AgAgARD+AgsgC0EgaiQAIAAoAlghAiAAQQA2AlggCiACNgIEIAAoAlwhAiAAQQA2AlwgCiACNgIIIAAoAmAhAiAAQQA2AmAgCiACNgIMIApBBGoQDxogCkEQaiQAC5wBAQJ/AkAgACgCBCAAKAIISQRAIAAgACgCBCABIAIgAxCjB0EcajYCBAwBCyMAQSBrIgUkACAFQQxqIAAgACgCBCAAKAIAa0EcbUEBahCLBSAAKAIEIAAoAgBrQRxtIABBCGoQkAMiBCgCCCABIAIgAxCjBxogBCAEKAIIQRxqNgIIIAAgBBD6BCAEEPkEIAVBIGokAAsgACgCBBoLuAEBBH8gAUE0aiIDIAAoAjggACgCNGtBLG0gASgCOCABKAI0a0EsbWoQqQcgACgCOCEEIAAoAjQhAgNAIAIgBEYEQAJAIAFBKGoiAyABKAIsIAEoAihrQcQAbSIEIAAoAiwgACgCKGtBxABtahCoByAAKAIsIQUgACgCKCECA0AgAiAFRg0BIAMgAhDQAiACQcQAaiECDAALAAsFIAMgAhCnByACQSxqIQIMAQsLIAEgBK1CAX0Q5gMLkgIBA38gACgCBCICIAAoAghJBEAgAiABKQIANwIAIAIgASgCCDYCCCABQgA3AgAgAUEANgIIIAIgASkCJDcCJCACIAEpAhw3AhwgAiABKQIUNwIUIAIgASkCDDcCDCAAIAJBLGo2AgQPCyMAQSBrIgQkACAEQQxqIAAgACgCBCAAKAIAa0EsbUEBahDSAiAAKAIEIAAoAgBrQSxtIABBCGoQ7AEiAygCCCICIAEpAgA3AgAgAiABKAIINgIIIAFCADcCACABQQA2AgggAiABKQIkNwIkIAIgASkCHDcCHCACIAEpAhQ3AhQgAiABKQIMNwIMIAMgAygCCEEsajYCCCAAIAMQ/gMgAxDRAiAEQSBqJAALYwECfyMAQSBrIgIkAAJAIAEgACgCCCAAKAIAIgNrQcQAbUsEQCABQcSHjx5PDQEgACACQQxqIAEgACgCBCADa0HEAG0gAEEIahCbAiIAEJQDIAAQmgILIAJBIGokAA8LEAEAC2EBAn8jAEEgayICJAACQCABIAAoAgggACgCACIDa0EsbUsEQCABQd7oxS5PDQEgACACQQxqIAEgACgCBCADa0EsbSAAQQhqEOwBIgAQ/gMgABDRAgsgAkEgaiQADwsQAQALYQECfyMAQSBrIgIkAAJAIAEgACgCCCAAKAIAIgNrQSJtSwRAIAFBiI+ePE8NASAAIAJBDGogASAAKAIEIANrQSJtIABBCGoQ6QMiABDoAyAAEOcDCyACQSBqJAAPCxABAAulAgEGfyMAQcABayIDJAACQAJAIABBiAFqIgYgARBqIgQgACgCjAFHBEAgBEEQaiACENUCRQ0BDAILIABBqAFqIgcgARCRASIEIAAoAqwBRwRAIAIgBEEQaiIFENQCDQIgBSkDACAAKQPwAVYEQCAAIAQQpQUgAEHIAWogBRDtASAEEJYDCyAHIAQQsAUaDAELIAAtAIQCRQ0AIAIpAwAgACkD6AFWDQBBAxAaRQ0BIANBEGoQFSEIIANBAzYCDCAIQZnQABANIAIpAwAQekHO0gAQDSACQQhqEBMaIANBDGoQGQwBCyADQQxqIAYgASACEIIEIAMtABBFBEAgAygCDEEQaiACEIYECyAAIAAgAygCDCIAIABBEGoQ0wILIANBwAFqJAALkQMCBH8BfiMAQdAAayIDJAAgACACELgBIAItADBBAUYEQCADQQhqIABB8ABqIAIQdQsgAEEIaiEEAkACQCAALQBQBEAgACgCGCIFIAAoAhQiBmtB8ABtQR9JDQEgAyAAKAIINgIIIAMgACgCDDYCDCADIABBEGooAgA2AhAgAEEANgIQIABCADcDCCADIAU2AhggAyAGNgIUIAMgAEEcaigCADYCHCAAQQA2AhwgAEIANwIUIANBIGogAEEgahCbByADIABBQGsiBSkDADcDQCADIAApA0g3A0ggBCADQQhqEKwDIARCABDJBCAFIAUpAwBCAXw3AwAgBCACEPUBAn8gASAAKAIIIgApAzgiB1YEQCAAQcgAaiAHQn+FIAF8IAIQiQMMAQsgACABIAIQiQMLIQAgA0EIahBkGgwCCyADQgA3AxggA0IANwMQIANCADcDCCADQSBqEL8BIANCADcDSCADQgA3A0AgBCADQQhqIgAQjQUgABBkGgsgBCABIAIQiQMhAAsgA0HQAGokACAAC4ABAQF/IwBBMGsiAyQAIAMgASgCCDYCKCADIAEpAgA3AyAgAUIANwIAIAFBADYCCCADIAIpAwA3AwggAyACKAIQNgIYIAMgAikDCDcDECACQQA2AhAgAkIANwMIIAAgA0EgaiIAIANBCGoQqwcgA0EQahAKGiAAEAoaIANBMGokAAvNAgEGfyMAQSBrIgUkAAJAIAFBAkgNACABQQJrQQF2IgggAiAAayIDQQV1SA0AIAAgA0EEdSIDQQFqIgZBBXRqIQQgASADQQJqIgNKBEAgBEEgaiIHIAQgBCAHECkiBxshBCADIAYgBxshBgsgBCACECkNACAFIAIpABg3AxggBSACKQAQNwMQIAUgAikACDcDCCAFIAIpAAA3AwADQAJAIAIgBCIDKQAANwAAIAIgAykAGDcAGCACIAMpABA3ABAgAiADKQAINwAIIAYgCEoNACAAIAZBAXQiAkEBciIGQQV0aiEEIAEgAkECaiICSgRAIARBIGoiByAEIAQgBxApIgcbIQQgAiAGIAcbIQYLIAMhAiAEIAUQKUUNAQsLIAMgBSkDADcAACADIAUpAxg3ABggAyAFKQMQNwAQIAMgBSkDCDcACAsgBUEgaiQAC5IDAQd/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ECABQgA3AgAgAUEANgIIIABBADoAICAAQQQ6ABggARAKGgwBCyAAQQhqIAFBEGoQ0AEQugcLIAJBEGokAAvhAgINfwJ+IwBBMGsiBCQAIAMtADBBAUYEQCAEIAEpAwg3AxggBCABKQMANwMQIARBIGogAhAQIRAgBCAANgIMIARBBGohByADQRhqIQkgBEEQaiEKIARBDGohCyMAQRBrIgEkACADELEBIhGnQf8BcUGAAnIhAiARIABB5ABqIgAxAB6IpyEFIAAoAhAhDCADKQMIIREgAykDACESIAAoAgAhDSAAKAIMIQ4DQAJAAkACQCAOIAVBA3RqIgYoAgAiDyACRgRAIBIgDSAGKAIEQdABbGoiBikDAFINAiARIAYpAwhSDQIgB0EAOgAEIAcgBjYCAAwBCyACIA9NDQEgASADNgIMIAEgCzYCCCABIAo2AgQgASAJNgIAIAcgACACIAUgAUEMaiABELwHCyABQRBqJAAMAQsgBUEBaiIFQQAgBSAMRxshBSACQYACaiECDAELCyAQEAoaCyAEQTBqJAALZQEDfyMAQRBrIgEkACABIAA2AgwgASgCDCIAKAIABEAgACgCACEDIAAoAgQhAgNAIAIgA0cEQCACQfAAaxBCGiACQYABayECDAELCyAAIAM2AgQgASgCDCgCABALCyABQRBqJAALiAEBAX8gACABIAMQ7wMgAEHkAGogARCNARBpIQAjAEEQayIBJAACQAJAAkAgAy0AMA4CAQACCyABIABB8ABqIAMQdQwBCyAAQdgAaiADEP8EIAAgAykDCBDLAgsgAUIANwMIIAFCADcDACAAQQhqIAAgAiADIAQgASAFELQHIQYgAUEQaiQAIAYLsQEBBH8jAEHwAGsiBCQAIARB5ABqIgUgACABEPADIARBADoAWCAEIAI3A0ggBSAEQcgAaiIBEOoBIAEQKiAAKAIIIQcgBEE8aiAAKAIAEBAhACAEIAQoAmQ2AjAgBCkCaCECIARBADYCbCAEIAI3AjQgBEIANwJkIARBCGoiBiADEMkHIAcgACAEQTBqIgFBACAGEKQBIARBEGoQSiABEFggABAKGiAFEFggBEHwAGokAAsfACAAIAEgAxDvAyAAQeQAaiABEI0BEGkgAiADEKwHC7YBAQN/IwBB8ABrIgMkACADQeQAaiIEIAAgARDwAyAD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BjYCACAAIAI2AgQgASAFNgIEIAAgAiAEIAVrajYCCCABIAQ2AgggACgCDCECIAAgASgCDDYCDCABIAI2AgwgARCbAQsgA0EgaiQAC0ABAX8gACgCECICQcAASSACQSBJIAFycUUEQCAAKAIEKAIAEAsgACAAKAIEQQRqNgIEIAAgACgCEEEgazYCEAsLDwAgACAAKAIIQQRrEKcKC1AAIAAoAgAEQCAAEMcIIAAoAgAQCyAAQQA2AgggAEIANwIACyAAIAEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCABQQA2AgggAUIANwIACxQAIAAgARAQIgAgAjQCADcDECAACz0BAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQSxrNgIIIAFBDGsQDxoMAQsLIAAoAgAiAARAIAAQCwsLuwEBA38gACgCBCEDIAAoAgAhBCABKAIEIQIDQCADIARHBEAgAkEsayICIANBLGsiAykCADcCACACIAMpAhg3AhggAiADKQIQNwIQIAIgAykCCDcCCCACQSBqIANBIGoQJRoMAQsLIAEgAjYCBCAAKAIAIQMgACACNgIAIAEgAzYCBCAAKAIEIQIgACABKAIINgIEIAEgAjYCCCAAKAIIIQIgACABKAIMNgIIIAEgAjYCDCABIAEoAgQ2AgALCQAgAEEoEJkEC8oBAQN/IAEoAgQhAyAAKAIAIQQgACgCBCECA0AgAiAERkUEQCADQShrIgMgAkEoayICKQMANwMAIAMgAkEIaigCADYCCCACQgA3AwAgAkEANgIIIAMgAikDIDcDICADIAIpAxg3AxggAyACKQMQNwMQDAELCyABIAM2AgQgACgCACECIAAgAzYCACABIAI2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIACz4BAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQYABayIBNgIIIAEQ9gcaDAELCyAAKAIAIgAEQCAAEAsLC7cBAQN/IAAoAgQhAiAAKAIAIQMgASgCBCEEA0AgAiADRwRAIARBgAFrIgQgAkGAAWsiAikDADcDACAEIAIoAgg2AgggAkIANwMAIAJBADYCCCAEQRBqIAJBEGoQMhoMAQsLIAEgBDYCBCAAKAIAIQMgACAENgIAIAEgAzYCBCAAKAIEIQMgACABKAIINgIEIAEgAzYCCCAAKAIIIQMgACABKAIMNgIIIAEgAzYCDCABIAEoAgQ2AgALFgAgAC0ASARAIAAQZBogAEEAOgBICwuTAQAjAEEQayIAJAAgAigCACECIAAgAygCCDYCCCAAIAMpAgA3AwAgACACNgIMIwBBMGsiAiQAIAEgACgCDCIDKQMANwMAIAEgAykDCDcDCCAAKAIAKAIAIQMgAkEAOgAoIAJBADoACCABQRBqIAMgAkEIaiIBIAAoAggoAgAQjgUgARD8AyACQTBqJAAgAEEQaiQACxAAIAAgACgCBEHQAWsQgggLCwAgACABQSgQmAQL8QECAX8BfQJAIAAgAUYNACAAEE0gACgCAARAIAAQkQUgACgCABALIABBADYCCCAAQgA3AgALIAAgASgCADYCACAAIAEoAgQ2AgQgACABKAIINgIIIAFBADYCCCABQgA3AgAgARCRBSABKAIMIQIgAUEANgIMIAAgAjYCDCABKAIQIQIgAUEANgIQIAAgAjYCECABKAIUIQIgAUEANgIUIAAgAjYCFCABLQAeIQIgAUE+OgAeIAAgAjoAHiABKgIYIQMgAUHNmbP6AzYCGCAAIAM4AhggARAwIAEoAgwiAEUNACAAQQAgASgCEEEDdBAdGgsLDgAgAEEQahBCGiAAEAoLKwEBfyAAKAIEIQIDQCABIAJGRQRAIAJBgAFrEPYHIQIMAQsLIAAgATYCBAviAQIFfwJ+AkAgACgCACICIAAoAgQiA0cEQANAIAcgAyACa0HIAG2tIghUIQMgByAIWg0CAkACQCABIAIgB6ciBEHIAGwiBWoQ/QdBAWsOAgAEAQsgACgCACAFaiABEPgHDQMLIAAoAhAgACgCDCICa0HwAG2tIAdWBEAgASACIARB8ABsahCJCkECRg0DCyAHQgF8IQcgACgCACECIAAoAgQhAwwACwALIAAoAhAhAiAAKAIMIQADQCAAIAJHIQMgACACRg0BIAEgABCJCiEGIABB8ABqIQAgBkECRw0ACwsgAwvxAQIBfwF9AkAgACABRg0AIAAQTSAAKAIABEAgABCSBSAAKAIAEAsgAEEANgIIIABCADcCAAsgACABKAIANgIAIAAgASgCBDYCBCAAIAEoAgg2AgggAUEANgIIIAFCADcCACABEJIFIAEoAgwhAiABQQA2AgwgACACNgIMIAEoAhAhAiABQQA2AhAgACACNgIQIAEoAhQhAiABQQA2AhQgACACNgIUIAEtAB4hAiABQT46AB4gACACOgAeIAEqAhghAyABQc2Zs/oDNgIYIAAgAzgCGCABEDAgASgCDCIARQ0AIABBACABKAIQQQN0EB0aCwtkAQJ/IAAgASgCADYCACAAQQhqIgJBADoASCACQQA6AAAgAUEIaiIDLQBIBEAgAiADEIAGCyAAQdgAaiABQdgAahAlGiAAQeQAaiABQeQAahAlGiAAQfAAaiABQfAAahCDBCAAC6sBAQJ/IAAgASgCADYCACMAQRBrIgMkACAAQQRqIgJCADcCACACQT46AB4gAkHNmbP6AzYCGCACQgA3AhAgAkIANwIIIAIgAUEEahD5ByADQRBqJAAjAEEQayIDJAAgAEEkaiICQgA3AgAgAkE+OgAeIAJBzZmz+gM2AhggAkIANwIQIAJCADcCCCACIAFBJGoQ9QcgA0EQaiQAIABBxABqIAFBxABqEIMEIAALVQAgAEEAOgAgIABBADoAACABLQAgBEAgACABKQMANwMAIAAgASkDCDcDCCAAIAEoAhg2AhggACABKQMQNwMQIAFCADcDECABQQA2AhggAEEBOgAgCwtDAQF/QQEhAiABQRhqIAAoAgAQ9AUgASgCHEYEfyAAIAApAxAgASkDOHw3AxAgACAAKQMIIAEpA0B8NwMIQQAFQQELCxUAIAAgAUEDQf8DQfz//w9BBxCbCQs8AQF/IwBBEGsiASQAIAEgADYCDCABKAIMIgAoAgAEQCAAIAAoAgAQ5gggASgCDCgCABALCyABQRBqJAALFwEBfyAAKAIMIgEEQCABEAsLIAAQ/wcLEAAgAEGYAWoQ/AMgABCTAwsxAQF/IAAoAgQhAgNAIAEgAkZFBEAgAkHAAWsQgQggAkHQAWshAgwBCwsgACABNgIECy8BAX8gACgCBCECA0AgASACRkUEQCACQQxrEA8aIAJBLGshAgwBCwsgACABNgIECykBAX8gACgCBCECA0AgASACRkUEQCACQQxrEA8hAgwBCwsgACABNgIEC2ABAn8gAUHw////B0kEQCABQQpNBEAgAEEANgIIIABCADcCACAAIAE6AAsgAA8LIAFBD3JBAWoiAhAYIQMg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aiEFDAELCyAGQTBqJAAgBEEEaiEEDAALAAsFIAQoAgAhBSMAQYACayICJAAgAkH4AWogBUGUA2ogABCqAyACLQD8AUUEQCACQQhqIgVBAEHwARAdGiAFEJoDIQUgAigC+AFBEGogBRCSAyAFEJgDCyACQYACaiQAIARBBGohBAwBCwsgAygC0AIEQCABQUBrIAAQECEAIAFBADoAKCABQQY6ACAgAUEANgI8IAFCADcCNCAKIAAgAUE0aiICQQEgAUEIahCkASABQRBqEEogAhBYIAAQChoLIAFB8ABqEDwgAUHQAWokAAsgCEHAAWokACAJC0QAIwBBEGsiACQAIAIoAgAhAiAAIAMpAgA3AwAgACACNgIMIAEgACgCDBAQQRBqIAAoAgAgACgCBBCcBRogAEEQaiQAC1kBAX8jAEEQayIDJAAgAyACNgIIIAMgATYCDCAAIAMoAgwiASkCADcCACAAIAEoAgg2AgggAUIANwIAIAFBADYCCCAAQRBqIAMoAggQ7gEaIANBEGokACAACykAIAAgARAQIgAgAikDADcDECAAQRhqIAMQEBogAEEoaiAEENkCGiAACysBAX8gACgCBCECA0AgASACRkUEQCACQYACaxCjCCECDAELCyAAIAE2AgQLDgAgAEEQahCYAyAAEAoLSgEBfyAAQgA3AgAgAEE+OgAeIABBzZmz+gM2AhggAEIANwIQIABCADcCCCAAEDAgACgCDCIBBEAgAUEAIAAoAhBBA3QQHRoLIAALNgEBfyMAQRBrIgIkACACIAE2AgwgACACKAIMEBAiAEEQakEAQfABEB0QmgMaIAJBEGokACAACxAAIAAgACgCBEGAAmsQoggLXQAgACABKQIANwIAIAAgASgCCDYCCCABQgA3AgAgAUEANgIIIAAgAikDADcDECAAIAMoAgg2AiAgACADKQIANwIYIANCADcCACADQQA2AgggAEEoaiAEENkCGiAACxYAIABBKGoQqwMgAEEYahAKGiAAEAoLMQEBfwNAIAEEQCACIAEgAUEQaiAAEBwiAxshAiABQQRqIAEgAxsoAgAhAQwBCwsgAgtQACAAKAIABEAgABCuCCAAKAIAEAsgAEEANgIIIABCADcCAAsgACABKAIANgIAIAAgASgCBDYCBCAAIAEoAgg2AgggAUEANgIIIAFCADcCAAtQ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kAEgBUEQaiQAC3wBAn8jAEEQayIDJABBGBAYIQIgAyAAQQhqNgIIIANBATYCDCACIAEpAwg3AxAgAiABKQMANwMIIAIgADYCACACIAAoAgQiATYCBCABIAI2AgAgACACNgIEIAAgACgCCEEBajYCCCADQQA2AgQgA0EEahCQASADQRBqJAALOwEBfyMAQRBrIgMkACADIAI2AgggAyABNgIMIAAgAygCDBAQIgBBEGogAygCCBDuARogA0EQaiQAIAALGAAgACABEBAiAEEQaiABQRBqEO4BGiAAC2kBAn8jAEEgayIDJAAgA0EMaiAAIAAoAgQgACgCAGtBKG1BAWoQowEgACgCBCAAKAIAa0EobSAAQQhqEIcBIgIoAgggARC9CBogAiACKAIIQShqNgIIIAAgAhDwASACEO8BIANBIGokAAsUACAAIAAoAgQgARC9CEEoajYCBAsWACAAQShqENYBIABBGGoQChogABAKC2EBAX8gAEGAgICAeCABIAFBAEgbIgEQrAUgACABIAAoAgQgACgCAGtBKG0iAiABIAJLGxCLDSEBAkAgACgCEARAIAEgAC0AHk8NAQsgACABOgAeIAAQTSAAEDAgABCrBQsLFwAgAEHI4/E4TwRAEBIACyAAQSRsEBgLPQECfyAAKAIEIQIDQCACIAAoAggiAUcEQCAAIAFBJGsiATYCCCABEL0BGgwBCwsgACgCACIABEAgABALCwuNAQEDfyAAKAIEIQMgACgCACEEIAEoAgQhAgNAIAMgBEcEQCACQSRrIANBJGsiAxClAyECDAELCyABIAI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIAC0oBAX8gAEEANgIMIAAgAzYCECABBEAgARDCCCEECyAAIAQ2AgAgACAEIAJBJGxqIgI2AgggACAEIAFBJGxqNgIMIAAgAjYCBCAACzkBAX8gAUEASARAEAEAC0H/////ByAAKAIIIAAoAgBrIgBBAXQiAiABIAEgAkkbIABB/////wNPGwswAQJ/IAAoAgAhAiAAKAIEIQEDQCABIAJHBEAgAUEkaxC9ASEBDAELCyAAIAI2AgQLnQEBBH8jAEEgayIDJAAgACgCBCAA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ACFOIAFCADcCxAIgAUHEAmogASgC0AIQrAUCQANAAkACQAJAIAEpA9ACIE5WBEAgAUHgAWogBRBSIAEtAOwBRQ0BIAFBsAJqIAUQFiABLQC4AkUNASABQaACaiAFEFICfyABLQCsAkUEQCAEQQA6AMABIARBADoAAEEBDAELIAEgASkDsAI3AwAgCyABKQOgAjcCACALIAEoAqgCNgIIIAFBADYCqAIgAUIANwOgAgJAIAFBxAJqIgIoAgQiBiACKAIISQRAIAYgASkC4AE3AgAgBiABKALoATYCCCABQgA3AuABIAFBADYC6AEgBiABKQMANwMQIAYgASgCEDYCICAGIAEpAwg3AxggAUEANgIQIAFCADcDCCACIAZBKGo2AgQMAQsjAEEgayIPJAAgD0EMaiACIAIoAgQgAigCAGtBKG1BAWoQowEgAigCBCACKAIAa0EobSACQQhqEIcBIgYoAggiCCABKQLgATcCACAIIAEoAugBNgIIIAFCADcC4AEgAUEANgLoASAIIAEpAwA3AxAgCCABKAIQNgIgIAggASkDCDcDGCABQQA2AhAgAUIANwMIIAYgBigCCEEoajYCCCACIAYQ8AEgBhDvASAPQSBqJAAgAigCBBoLIAsQChpBAAshAiABQaACahA2GgwCCyABQbACaiAFEBYgAS0AuAJFBEAgBEEAOgDAASAEQQA6AAAMAwsgAUEANgKcAkIAIU4gAUIANwKUAiABQZQCaiABKAKwAhCqBwJ/AkADQCBOIAEpA7ACWg0BIAFBoAJqIAUQFgJAIAEtAKgCRQ0AIAFBADoAISABQQA6AAAgASkDoAJQRQRAIAFBgAJqIAUQFiABLQCIAkUNASAFKAIEIgZBIEkNASAFKAIAIgItAAAhCCABIAIpABg3APcBIAEgAikAETcD8AEgASACKQAJNwPoASABIAIpAAE3A+ABIAUgBkEgazYCBCAFIAJBIGo2AgAgASAIOgABIAEgASkDgAI8AAAgASABKQD3ATcAGSABIAEpA/ABNwASIAEgASkD6AE3AAogASABKQPgATcAAiABQQE6ACELIE5CAXwhTgJAIAFBlAJqIgIoAgQiBiACKAIIRwRAIAIgBiABQSIQH0EiajYCBAwBCyMAQSBrIggkACAIQQxqIAIgAigCBCACKAIAa0EibUEBahDzBCACKAIE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ASABKAKsAjYCrAMgAUEANgKkAiABQQA2AqgCIAFBADYCrAIgAUEAOgC8AyABQQA6ALADIAEtAIQBBEAgASABKQN4NwKwAyABIAEoAoABNgK4AyABQQA2AoABIAFCADcDeCABQQE6ALwDCyABIAEpAnA3AsQDIAEgASgCbDYCwAMgAUEANgJ0IAFCADcCbCABIE43A9ADIAQgAUGAA2oiBBDnASAEEKsDCyABQewAahDzASABQfgAahA2GgsgAUGkAmoQ8wEMAgsgBEEAOgBYIARBADoAAEEBIQYLIE5CAXwhTiABQdABahA/IAZFDQELCyABQcQCahDyAQsgAUHgAmoQPwsgAUHwAmoQPwsgAUGQBGokAAJ/IAMtAMACRQRAQQMQGgRAIA8QFSE0IANBAzYCECA0Qb3RABANIBIQExogA0EQahAZCyAOQQA6ANgBIA5BADoAAEEBDAELIBQgAygCyAIiASAUKAIAajYCACAUIBQoAgQgAWs2AgQgA0H8AmohBSADQegCaiECIANB2AJqIQYgA0HoAWohBwJAIANBjANqIgEoAgQgASgCCEkEQCABIAEoAgQgBSACIAYgBxCnCEGAAWo2AgQMAQsjAEEgayIIJAAgCEEMaiABIAEoAgQgASgCAGtBB3VBAWoQ1gIgASgCBCABKAIAa0EHdSABQQhqENcBIgQoAgggBSACIAYgBxCnCBogBCAEKAIIQYABajYCCCABIAQQtgUgBBDgCCAIQSBqJAALIAEoAgQaQQALIQEgA0HoAWoiBC0AWARAIAQQqwMLDAILIANBEGogA0GoA2oQtwUiASADKAKMAzYCyAEgASADKAKQAzYCzAEgASADKAKUAzYC0AEgA0EANgKUAyADQgA3AowDIA4gARC3BSIEQcgBaiABQcgBahAlGiAEQQE6ANgBIAEQ4ggMBAsgDkEAOgDYASAOQQA6AABBASEBCyADQdgCahA2GgwBCyAOQQA6ANgBIA5BADoAAEEBIQELIFFCAXwhUSADQfwCahA2GiABRQ0BCwsgA0GMA2oQ4QgLIANBqANqENoCCyADQYAFaiQAIBQtAOgBIiQEQCMAQfADayISJAAgDigCzAEhByAOKALIASEJAkACQCAOLQDAAQRAIA5B8ABqIQEDQCAHIAlGBEAgACgCAEEQaiEEIABBCGohDyASQbACaiAO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RQ0AIAMhAUEDEBpFDQAgKxAVIUsgD0EDNgIEIEsgJhATQfLRABANIBcQExogD0EEahAZCyAqEFggAw0BCyAXQYABaiEXDAELCyAPQaACaiQAIAEiCQ0AAkAgACgCACIBLQCkAg0AIAAoAvQCIQMgACgC8AIhCQNAIAMgCUcEQCABQZgCaiAJELoBIgQgACgCACIBQZwCakYNAiAJQQxqIQkgBC0A5AMNAQwCCwtBARAaBEAgEkGkAWoQFSFMIBJBATYCoAEgTCAAKAIAQbADahATQYPRABANIAAoAgAQExogEkGgAWoQGQsgACgCACIBQQE6AKQCIAEoAtwCIQMgASgC2AIhCQNAIAMgCUcEQCAJKAIAIgEtAJADBEAgAUHwAmoQsgULIAlBBGohCQwBCwtBACEJIAAoAgAiACgCuAJFDQEgEkGgAWogAEGoAmoQPSIAQQAQswUgABARGgwBC0EAIQkLIBJB8ANqJAALIBRBEGoiAC0A2AEEQCAAEOIICyAkRQ0BDAILQQMQGkUNACAUQRRqEBUhTSAUQQM2AhAgTSAAKAIAQbADahATQabLABANGiAUQRBqEBkLQQkhCQsgFEHwAWokACAJCy8BA38gAC0AISICQQBHIAEtACEiA0EAR3MhBCACRSADRXIEfyAEBSAAIAEQjQQLC6ABAQJ/IAEgAiAAKAIAIAEoAgQQowo2AgQgACgCBCEEIAEoAgghAwNAIAIgBEcEQCADIAIQMkHwAGohAyACQfAAaiECDAELCyABIAM2AgggACgCACECIAAgASgCBDYCACABIAI2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIACzcBAX8jAEEQayIBJAAgASAANgIMIAEoAgwiACgCAARAIAAQzwggASgCDCgCABALCyABQRBqJAALNwEBfyMAQRBrIgEkACABIAA2AgwgASgCDCIAKAIABEAgABDMCCABKAIMKAIAEAsLIAFBEGokAAvbAQEBfyAAIAFB4QAQHyIAQeQAaiICKAIABEAgAhDPCCACKAIAEAsgAkEANgIIIAJCADcCAAsgACABKAJkNgJkIAAgASgCaDYCaCAAIAEoAmw2AmwgAUEANgJsIAFCADcCZCAAQfAAaiABQfAAahCvBSAAQZAB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IQQgASgCBCECA0AgAyAERwRAIAJB8ABrIANB8ABrIgMQzAUhAgwBCwsgASACNgIEIAAoAgAhAyAAIAI2AgAgASADNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAsRACAALQAoBEAgAEEIahBGCwsUACAAIAAoAgQgARBlQcgAajYCBAvKAgECfyMAQUBqIgMkAAJAAkAgAUIFVg0AAkACQAJAAkACQCABp0EBaw4FAQIDBQQACyADQQE6ADggA0EANgIgIAAgA0EYahDkAiADQSBqEEYMBQsgA0EgaiADIAIQcyICEHMiBEECOgAYIAAgA0EYahDkAiAEEEYgAhA7DAQLIANBAToAOCADQQE2AiAgACADQRhqEOQCIANBIGoQRgwDCyADQQA6ADggACADQRhqEOQCIANBIGoQRgwCCwJAIAJFDQACQAJAIAItABAOAgABAgsgAikDACEBIANBAzoAOCADIAE3AyAgACADQRhqEOQCIANBIGoQRgwDCyACKQMAIQEgA0EDOgA4IAMgATcDICAAIANBGGoQ5AIgA0EgahBGDAILIABBADoAKCAAQQA6AAAMAQsgAEEAOgAoIABBADoAAAsgA0FAayQACwsAIAAgACABEPkICwkAIABBGBDlAgulAQEDfyABKAIEIQIgACgCACEEIAAoAgQhAwNAIAMgBEZFBEAgAkEYayICIANBGGsiAykDADcDACACIAMpAxA3AxAgAiADKQMINwMIDAELCyABIAI2AgQgACgCACEDIAAgAjYCACABIAM2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIACzsBAn8gACgCBCECA0AgAiAAKAIIIgFHBEAgACABQRhrIgE2AgggARA7DAELCyAAKAIAIgAEQCAAEAsLC4wBAQN/IAAoAgQhAyAAKAIAIQQgASgCBCECA0AgAyAERwRAIAJBGGsgA0EYayIDEHMhAgwBCwsgASACNgIEIAAoAgAhAyAAIAI2AgAgASADNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAsWACAALQAMBEAg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CkcEQCAEQQJ0IgMgAmogBkECdGogAyAJaiAFQQJ0aiAHEIgCCyABQQFqIgFBAkcEQCAAIAkgARChBAsgACACEIoBIAAgCCgCCBCJASAAIAQgBmogB2oiABBvIAhBADYCDCACIABBAnRqIAhBDGoQgAEgCEEQaiQADwsQbgALbwEDfyMAQRBrIgQkACABBEAgASAAECciAyAAEAwiAmtLBEAgACADIAEgA2sgAmogAiACEOAFCyACIAAQISIDaiABQQAQtAkgACABIAJqIgAQrgIgBEEAOgAPIAAgA2ogBEEPahCDAQsgBEEQaiQACz0BAX8jAEEQayIDJAAgAyACOgAPA0AgAQRAIAAgAy0ADzoAACABQQFrIQEgAEEBaiEADAELCyADQRBqJAALFgAgACABIAJCgICAgICAgICAfxDbCgsJACAAEDM2AgALIwECfyAAIQEDQCABIgJBBGohASACKAIADQALIAIgAGtBAnULDwAgACAAKAIAQQRrNgIACwoAIAAoAgBBBGsLLAAgACgCABogACgCABogABCrAhogACgCABogABCoARogACgCABogABCrAhoLMAAjAEEQayICJAACQCAAIAFGBEAgAUEAOgB4DAELIAJBD2ogARDGCQsgAkEQaiQACw8AIAAtAAwEQCAAENEFCwssAQF/IAAoAgQhAgNAIAEgAkcEQCAAEKwCGiACQQRrIQIMAQsLIAAgATYCBAsJACAAQQA2AgALJgAgACgCABogACgCABogABCrAhogACgCABogABCrAhogACgCABoLSwEBfyMAQRBrIgMkAAJAAkAgAkEeSw0AIAEtAHgNACABQQE6AHgMAQsgA0EPaiACEMgJIQELIANBEGokACAAIAI2AgQgACABNgIAC0QBAn8jAEEQayIBJAAgABCsAhogAUH/////AzYCDCABQf////8HNgIIIAFBDGogAUEIahC2BCgCACECIAFBEGokACACCwsAIABBADYCACAACw4AIABBDGoQ0QUgABBACycBAn8jAEEQayIBJAAgASAANgIMIAFBDGoQ4wUhAiABQRBqJAAgAgs3AQF/IwBBEGsiAyQAIAMgARDECTYCDCADIAIQxAk2AgggACADQQxqIANBCGoQtAQgA0EQaiQACwkAIAFBBBCmCgsvAQF/IwBBEGsiAyQAIAAgAhCuAiAD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IgokACAJAn8gAARAIAIQ7gkhAAJAIAEEQCAKQQRqIgEgABCBAiADIAooAgQ2AAAgASAAEIACDAELIApBBGoiASAAEKYEIAMgCigCBDYAACABIAAQmQELIAggARBgIAEQChogBCAAEJcBOgAAIAUgABBtOgAAIApBBGoiASAAEGwgBiABEGAgARAKGiABIAAQmgEgByABEGAgCkEEahAKGiAAEP8BDAELIAIQ7QkhAAJAIAEEQCAKQQRqIgEgABCBAiADIAooAgQ2AAAgASAAEIACDAELIApBBGoiASAAEKYEIAMgCigCBDYAACABIAAQmQELIAggARBgIAEQChogBCAAEJcBOgAAIAUgABBtOgAAIApBBGoiASAAEGwgBiABEGAgARAKGiABIAAQmgEgByABEGAgCkEEahAKGiAAEP8BCzYCACAKQRBqJAALCwAgAEGstAIQ4QELCwAgAEG0tAIQ4QELHwEBfyABKAIAELEKIQIgACABKAIANgIEIAAgAjYCAAvzDwEKfyMAQZAEayILJAAgCyAKNgKIBCALIAE2AowEAkAgACALQYwEahAtBEAgBSAFKAIAQQRyNgIAQQAhAAwBCyALQdsDNgJIIAsgC0HoAGogC0HwAGogC0HIAGoiARBEIg8oAgAiCjYCZCALIApBkANqNgJgIAEQJiERIAtBPGoQJiEMIAtBMGoQJiEOIAtBJGoQJiENIAtBGGoQJiEQIwBBEGsiCiQAIAsCfyACBEAgCkEEaiIBIAMQ6QkiAhCBAiALIAooAgQ2AFwgASACEIACIA0gARDAASABEEEaIAEgAhCZASAOIAEQwAEgARBBGiALIAIQlwE2AlggCyACEG02AlQgASACEGwgESABEGAgARAKGiABIAIQmgEgDCABEMABIAEQQRogAhD/AQwBCyAKQQRqIgEgAxDoCSICEIECIAsgCigCBDYAXCABIAIQgAIgDSABEMABIAEQQRogASACEJkBIA4gARDAASABEEEaIAsgAhCXATYCWCALIAIQbTYCVCABIAIQbCARIAEQYCABEAoaIAEgAhCaASAMIAEQwAEgARBBGiACEP8BCzYCFCAKQRBqJAAgCSAIKAIANgIAIARBgARxIRRBACEDQQAhAQNAIAEhAgJAAkACQAJAIANBBEYNACAAIAtBjARqEC0NAEEAIQoCQAJAAkACQAJAAkAgC0HcAGogA2osAAAOBQEABAMFCQsgA0EDRg0HIAdBASAAEEgQnAEEQCALQQxqIAAQ6gkgECALKAIMEN8FDAILIAUgBSgCAEEEcjYCAEEAIQAMBgsgA0EDRg0GCwNAIAAgC0GMBGoQLQ0GIAdBASAAEEgQnAFFDQYgC0EMaiAAEOoJIBAgCygCDBDfBQwACwALAkAgDhAMRQ0AIAAQSCAOECEoAgBHDQAgABBTGiAGQQA6AAAgDiACIA4QDEEBSxshAQwGCwJAIA0QDEUNACAAEEggDRAhKAIARw0AIAAQUxogBkEBOgAAIA0gAiANEAxBAUsbIQEMBgsCQCAOEAxFDQAgDRAMRQ0AIAUgBSgCAEEEcjYCAEEAIQAMBAsgDhAMRQRAIA0QDEUNBQsgBiANEAxFOgAADAQLIBQgA0ECSSACcnJFBEBBACEBIANBAkYgCy0AX0EAR3FFDQULIAsgDBCCATYCCCALQQxqIAtBCGoQswIhBAJAIANFDQAgAyALai0AW0EBSw0AA0ACQCALIAwQgwI2AgggBCALQQhqEMUBRQ0AIAdBASAEKAIAKAIAEJwBRQ0AIAQQvAMMAQsLIAsgDBCCATYCCCAEKAIAIAtBCGoiASgCAGtBAnUiCiAQEAxNBEAgCyAQEIMCNgIIIAFBACAKaxDoBSEKIBAQgwIhEiAMEIIBIRMjAEEQayIBJAAgASASNgIIIAEgCjYCDCABIBM2AgQDQAJAIAFBDGoiCiABQQhqEMUBIhJFDQAgCigCACgCACABQQRqIhMoAgAoAgBHDQAgChC8AyATELwDDAELCyABQRBqJAAgEkEBcw0BCyALIAwQggE2AgQgBCALQQhqIAtBBGoQswIoAgA2AgALIAsgBCgCADYCCANAAkAgCyAMEIMCNgIEIAtBCGoiASALQQRqEMUBRQ0AIAAgC0GMBGoQLQ0AIAAQSCABKAIAKAIARw0AIAAQUxogARC8AwwBCwsgFEUNAyALIAwQgwI2AgQgC0EIaiALQQRqEMUBRQ0DIAUgBSgCAEEEcjYCAEEAIQAMAgsDQAJAIAAgC0GMBGoQLQ0AAn8gB0HAACAAEEgiARCcAQRAIAkoAgAiBCALKAKIBEYEQCAIIAkgC0GIBGoQ6gIgCSgCACEECyAJIARBBGo2AgAgBCABNgIAIApBAWoMAQsgERAMRSAKRXINASABIAsoAlRHDQEgCygCZCIBIAsoAmBGBEAgDyALQeQAaiALQeAAahDqAiALKAJkIQELIAsgAUEEajYCZCABIAo2AgBBAAshCiAAEFMaDAELCyAKRSALKAJkIgEgDygCAEZyRQRAIAsoAmAgAUYEQCAPIAtB5ABqIAtB4ABqEOoCIAsoAmQhAQsgCyABQQRqNgJkIAEgCjYCAAsCQCALKAIUQQBMDQACQCAAIAtBjARqEC1FBEAgABBIIAsoAlhGDQELIAUgBSgCAEEEcjYCAEEAIQAMAwsDQCAAEFMaIAsoAhRBAEwNAQJAIAAgC0GMBGoQLUUEQCAHQcAAIAAQSBCcAQ0BCyAFIAUoAgBBBHI2AgBBACEADAQLIAkoAgAgCygCiARGBEAgCCAJIAtBiARqEOoCCyAAEEghASAJIAkoAgAiBEEEajYCACAEIAE2AgAgCyALKAIUQQFrNgIUDAALAAsgAiEBIAgoAgAgCSgCAEcNAyAFIAUoAgBBBHI2AgBBACEADAELAkAgAkUNAEEBIQoDQCACEAwgCk0NAQJAIAAgC0GMBGoQLUUEQCAAEEggAiAKEK4EKAIARg0BCyAFIAUoAgBBBHI2AgBBACEADAMLIAAQUxogCkEBaiEKDAALAAtBASEAIA8oAgAgCygCZEYNAEEAIQAgC0EANgIMIBEgDygCACALKAJkIAtBDGoQXyALKAIMBEAgBSAFKAIAQQRyNgIADAELQQEhAAsgEBBBGiANEEEaIA4QQRogDBBBGiAREAoaIA8QQwwDCyACIQELIANBAWohAwwACwALIAtBkARqJAAgAAsfACAAIAEQpwQQTyABEPwCKAIAIQEgABD8AiABNgIACwsAIABBnLQCEOEBCwsAIABBpLQCEOEBC8cBAQZ/IwBBEGsiBCQAIAAQ/AIoAgAhBUEBAn8gAigCACAAKAIAayIDQf////8HSQRAIANBAXQMAQtBfwsiAyADQQFNGyEDIAEoAgAhBiAAKAIAIQcgBUHbA0YEf0EABSAAKAIACyADELwEIggEQCAFQdsDRwRAIAAQpwQaCyAEQdoDNgIEIAAgBEEIaiAIIARBBGoQRCIFEOwJIAUQQyABIAAoAgAgBiAHa2o2AgAgAiADIAAoAgBqNgIAIARBEGokAA8LEBIACyABAX8gASgCABC3CsAhAiAAIAEoAgA2AgQgACACOgAAC4UQAQp/IwBBkARrIgskACALIAo2AogEIAsgATYCjAQCQCAAIAtBjARqEC4EQCAFIAUoAgBBBHI2AgBBACEADAELIAtB2wM2AkwgCyALQegAaiALQfAAaiALQcwAaiIBEEQiDygCACIKNgJkIAsgCkGQA2o2AmAgARAmIREgC0FAaxAmIQwgC0E0ahAmIQ4gC0EoahAmIQ0gC0EcahAmIRAjAEEQayIKJAAgCwJ/IAIEQCAKQQRqIgEgAxDuCSICEIECIAsgCigCBDYAXCABIAIQgAIgDSABEGAgARAKGiABIAIQmQEgDiABEGAgARAKGiALIAIQlwE6AFsgCyACEG06AFogASACEGwgESABEGAgARAKGiABIAIQmgEgDCABEGAgARAKGiACEP8BDAELIApBBGoiASADEO0JIgIQgQIgCyAKKAIENgBcIAEgAhCAAiANIAEQYCABEAoaIAEgAhCZASAOIAEQYCABEAoaIAsgAhCXAToAWyALIAIQbToAWiABIAIQbCARIAEQYCABEAoaIAEgAhCaASAMIAEQYCABEAoaIAIQ/wELNgIYIApBEGokACAJIAgoAgA2AgAgBEGABHEhFEEAIQNBACEBA0AgASECAkACQAJAAkAgA0EERg0AIAAgC0GMBGoQLg0AQQAhCgJAAkACQAJAAkACQCALQdwAaiADaiwAAA4FAQAEAwUJCyADQQNGDQcgB0EBIAAQSRCdAQRAIAtBEGogABDwCSAQIAssABAQ/AEMAgsgBSAFKAIAQQRyNgIAQQAhAAwGCyADQQNGDQYLA0AgACALQYwEahAuDQYgB0EBIAAQSRCdAUUNBiALQRBqIAAQ8AkgECALLAAQEPwBDAALAAsCQCAOEAxFDQAgABBJQf8BcSAOQQAQIC0AAEcNACAAEFQaIAZBADoAACAOIAIgDhAMQQFLGyEBDAYLAkAgDRAMRQ0AIAAQSUH/AXEgDUEAECAtAABHDQAgABBUGiAGQQE6AAAgDSACIA0QDEEBSxshAQwGCwJAIA4QDEUNACANEAxFDQAgBSAFKAIAQQRyNgIAQQAhAAwECyAOEAxFBEAgDRAMRQ0FCyAGIA0QDEU6AAAMBAsgFCADQQJJIAJyckUEQEEAIQEgA0ECRiALLQBfQQBHcUUNBQsgCyAMEIIBNgIMIAtBEGogC0EMahCzAiEEAkAgA0UNACADIAtqLQBbQQFLDQADQAJAIAsgDBCEAjYCDCAEIAtBDGoQxQFFDQAgB0EBIAQoAgAsAAAQnQFFDQAgBBC9AwwBCwsgCyAMEIIBNgIMIAQoAgAgC0EMaiIBKAIAayIKIBAQDE0EQCALIBAQhAI2AgwgAUEAIAprEOoFIQogEBCEAiESIAwQggEhEyMAQRBrIgEkACABIBI2AgggASAKNgIMIAEgEzYCBANAAkAgAUEMaiIKIAFBCGoQxQEiEkUNACAKKAIALQAAIAFBBGoiEygCAC0AAEcNACAKEL0DIBMQvQMMAQsLIAFBEGokACASQQFzDQELIAsgDBCCATYCCCAEIAtBDGogC0EIahCzAigCADYCAAsgCyAEKAIANgIMA0ACQCALIAwQhAI2AgggC0EMaiIBIAtBCGoQxQFFDQAgACALQYwEahAuDQAgABBJQf8BcSABKAIALQAARw0AIAAQVBogARC9AwwBCwsgFEUNAyALIAwQhAI2AgggC0EMaiALQQhqEMUBRQ0DIAUgBSgCAEEEcjYCAEEAIQAMAgsDQAJAIAAgC0GMBGoQLg0AAn8gB0HAACAAEEkiARCdAQRAIAkoAgAiBCALKAKIBEYEQCAIIAkgC0GIBGoQ7wkgCSgCACEECyAJIARBAWo2AgAgBCABOgAAIApBAWoMAQsgERAMRSAKRXINASALLQBaIAFB/wFxRw0BIAsoAmQiASALKAJgRgRAIA8gC0HkAGogC0HgAGoQ6gIgCygCZCEBCyALIAFBBGo2AmQgASAKNgIAQQALIQogABBUGgwBCwsgCkUgCygCZCIBIA8oAgBGckUEQCALKAJgIAFGBEAgDyALQeQAaiALQeAAahDqAiALKAJkIQELIAsgAUEEajYCZCABIAo2AgALAkAgCygCGEEATA0AAkAgACALQYwEahAuRQRAIAAQSUH/AXEgCy0AW0YNAQsgBSAFKAIAQQRyNgIAQQAhAAwDCwNAIAAQVBogCygCGEEATA0BAkAgACALQYwEahAuRQRAIAdBwAAgABBJEJ0BDQELIAUgBSgCAEEEcjYCAEEAIQAMBAsgCSgCACALKAKIBEYEQCAIIAkgC0GIBGoQ7wkLIAAQSSEBIAkgCSgCACIEQQFqNgIAIAQgAToAACALIAsoAhhBAWs2AhgMAAsACyACIQEgCCgCACAJKAIARw0DIAUgBSgCAEEEcjYCAEEAIQAMAQsCQCACRQ0AQQEhCgNAIAIQDCAKTQ0BAkAgACALQYwEahAuRQRAIAAQSUH/AXEgAiAKECAtAABGDQELIAUgBSgCAEEEcjYCAEEAIQAMAwsgABBUGiAKQQFqIQoMAAsAC0EBIQAgDygCACALKAJkRg0AQQAhACALQQA2AhAgESAPKAIAIAsoAmQgC0EQahBfIAsoAhAEQCAFIAUoAgBBBHI2AgAMAQtBASEACyAQEAoaIA0QChogDhAKGiAMEAoaIBEQChogDxBDDAMLIAIhAQsgA0EBaiEDDAALAAsgC0GQBGokACAACwwAIABBAUEtEP4JGgsbACMAQRBrIgEkACAAQQFBLRCdBCABQRBqJAALiwYCBH8BfiMAQYACayICJAAgASgCOCEDIAIgASgCPCABLQBDIgQgBMBBAEgiBBsgASgCECIFazYC/AEgAiAFIAMgAUE4aiAEG2o2AvgBIAJB6AFqIAJB+AFqEBYCQCACLQDwAUUEQCAAQQA6AIABIABBADoAAAwBCyACQQA2AuQBIAJCADcC3AEgAkHcAWogAigC6AEQ6wICQAJAA0AgBiACKQPoAVoNASACKAL8ASIEQSBPBEAgAiACKAL4ASIDKQAINwMQIAIgAykAEDcDGCACIAMpABg3AyAgAiADKQAANwMIIAIgBEEgazYC/AEgAkEBOgAoIAIgA0EgajYC+AEgBkIBfCEGIAJB3AFqIAJBCGoQlQEMAQsLIABBADoAgAEgAEEAOgAADAELIAJBzAFqIAJB+AFqEFICQCACLQDYAUUEQCAAQQA6AIABIABBADoAAAwBCyACQbgBaiACQfgBahAWIAItAMABRQRAIABBADoAgAEgAEEAOgAADAELIAJBqAFqIAJB+AFqEBYgAi0AsAFFBEAgAEEAOgCAASAAQQA6AAAMAQsgAkGYAWogAkH4AWoQqQEgAi0AoAFFBEAgAEEAOgCAASAAQQA6AAAMAQsgAkGIAWogAkH4AWoQFgJAIAItAJABBEAgAikDiAEiBiACKAL8ASIDrVgNAQsgAEEAOgCAASAAQQA6AAAMAQsgAiAGpyIEIAIoAvgBajYC+AEgAiADIARrIgQ2AvwBIAEoAjwhBSABLQBDIQMgAiABKAJANgIQIAIgASkDODcDCCABQgA3AzggAUEANgJAIAJBGGogAUE4EB8aIAIgAikC4AE3AlQgAiACKALcATYCUCACQQA2AuQBIAJCADcC3AEgAkHcAGogAkHMAWoQEBogAiAFIAMgA8BBAEgbIARrrTcDgAEgAiACKQO4ATcDaCACIAIpA6gBNwNwIAIgAikDmAE3A3ggACACQQhqIgAQkwFBAToAgAEgABB/GgsgAkHMAWoQNhoLIAJB3AFqEA8aCyACQYACaiQAC2QBAX8jAEEQayIGJAAgBkEAOgAPIAYgBToADiAGIAQ6AA0gBkElOgAMIAUEQCAGQQ1qIAZBDmoQxgoLIAIgASABIAIoAgAQogogBkEMaiADIAAoAgAQAiABajYCACAGQRBqJAALQgAgASACIAMgBEEEEMEBIQEgAy0AAEEEcUUEQCAAIAFB0A9qIAFB7A5qIAEgAUHkAEgbIAFBxQBIG0HsDms2AgALC0AAIAIgAyAAQQhqIAAoAggoAgQRAgAiACAAQaACaiAFIARBABCvBCAAayIAQZ8CTARAIAEgAEEMbUEMbzYCAAsLQAAgAiADIABBCGogACgCCCgCABECACIAIABBqAFqIAUgBEEAEK8EIABrIgBBpwFMBEAgASAAQQxtQQdvNgIACwszAQF/IAFBgICAgAFPBEAQAQALIAAgARCuCyICNgIEIAAgAjYCACAAIAIgAUEEdGo2AggLQgAgASACIAMgBEEEEMIBIQEgAy0AAEEEcUUEQCAAIAFB0A9qIAFB7A5qIAEgAUHkAEgbIAFBxQBIG0HsDms2AgALC0AAIAIgAyAAQQhqIAAoAggoAgQRAgAiACAAQaACaiAFIARBABCxBCAAayIAQZ8CTARAIAEgAEEMbUEMbzYCAAsLQAAgAiADIABBCGogACgCCCgCABECACIAIABBqAFqIAUgBEEAELEEIABrIgBBpwFMBEAgASAAQQxtQQdvNgIACwsEAEECC90BAQV/IwBBEGsiByQAIwBBEGsiAyQAAkAgAUHv////A00EQAJAIAEQogQEQCAAIAEQeSAAIQQMAQsgA0EIaiAAIAEQ5wJBAWoQ5gIgAygCDBogACADKAIIIgQQigEgACADKAIMEIkBIAAgARBvCyMAQRBrIgUkACAFIAI2AgwgBCECIAEhBgNAIAYEQCACIAUoAgw2AgAgBkEBayEGIAJBBGohAgwBCwsgBUEQaiQAIANBADYCBCAEIAFBAnRqIANBBGoQgAEgA0EQaiQADAELEG4ACyAHQRBqJAAgAAu6BQELfyMAQRBrIgskACAGEHAhCiALQQRqIAYQ8AIiDhBsIAUgAzYCAAJAAkAgACIILQAAIgZBK2sOAwABAAELIAogBsAQeCEGIAUgBSgCACIHQQRqNgIAIAcgBjYCACAAQQFqIQgLAkACQCACIAgiBmtBAUwNACAGLQAAQTBHDQAgBi0AAUEgckH4AEcNACAKQTAQeCEHIAUgBSgCACIIQQRqNgIAIAggBzYCACAKIAYsAAEQeCEHIAUgBSgCACIIQQRqNgIAIAggBzYCACAGQQJqIgghBgNAIAIgBk0NAiAGLAAAEDMQmApFDQIgBkEBaiEGDAALAAsDQCACIAZNDQEgBiwAACEREDMaIBEQrAFFDQEgBkEBaiEGDAALAAsCQCALQQRqEJgBBEAgCiAIIAYgBSgCABDgASAFIAUoAgAgBiAIa0ECdGo2AgAMAQsgCCAGEK8CIA4QbSEPIAghBwNAIAYgB00EQCADIAggAGtBAnRqIAUoAgAQqgQFAkAgC0EEaiIMIA0QICwAAEEATA0AIAkgDCANECAsAABHDQAgBSAFKAIAIglBBGo2AgAgCSAPNgIAIA0gDSAMEAxBAWtJaiENQQAhCQsgCiAHLAAAEHghDCAFIAUoAgAiEEEEajYCACAQIAw2AgAgB0EBaiEHIAlBAWohCQwBCwsLAkACQANAIAIgBk0NASAGQQFqIQcgBi0AACIGQS5HBEAgCiAGwBB4IQYgBSAFKAIAIghBBGo2AgAgCCAGNgIAIAchBgwBCwsgDhCXASEGIAUgBSgCACIIQQRqIgk2AgAgCCAGNgIADAELIAUoAgAhCSAGIQcLIAogByACIAkQ4AEgBSAFKAIAIAIgB2tBAnRqIgU2AgAgBCAFIAMgASAAa0ECdGogASACRhs2AgAgC0EEahAKGiALQRBqJAAL4gMBCH8jAEEQayIKJAAgBhBwIQsgCkEEaiIHIAYQ8AIiBhBsAkAgBxCYAQRAIAsgACACIAMQ4AEgBSADIAIgAGtBAnRqIgY2AgAMAQsgBSADNgIAAkACQCAAIgctAAAiCEEraw4DAAEAAQsgCyAIwBB4IQcgBSAFKAIAIghBBGo2AgAgCCAHNgIAIABBAWohBwsCQCACIAdrQQJIDQAgBy0AAEEwRw0AIActAAFBIHJB+ABHDQAgC0EwEHghCCAFIAUoAgAiCUEEajYCACAJIAg2AgAgCyAHLAABEHghCCAFIAUoAgAiCUEEajYCACAJIAg2AgAgB0ECaiEHCyAHIAIQrwJBACEJIAYQbSENQQAhCCAHIQYDfyACIAZNBH8gAyAHIABrQQJ0aiAFKAIAEKoEIAUoAgAFAkAgCkEEaiIMIAgQIC0AAEUNACAJIApBBGogCBAgLAAARw0AIAUgBSgCACIJQQRqNgIAIAkgDTYCACAIIAggDBAMQQFrSWohCEEAIQkLIAsgBiwAABB4IQwgBSAFKAIAIg5BBGo2AgAgDiAMNgIAIAZBAWohBiAJQQFqIQkMAQsLIQYLIAQgBiADIAEgAGtBAnRqIAEgAkYbNgIAIApBBGoQChogCkEQaiQAC6oFAQt/IwBBEGsiCiQAIAYQayEJIApBBGogBhDyAiIOEGwgBSADNgIAAkACQCAAIggtAAAiBkEraw4DAAEAAQsgCSAGwBBZIQYgBSAFKAIAIgdBAWo2AgAgByAGOgAAIABBAWohCAsCQAJAIAIgCCIGa0EBTA0AIAYtAABBMEcNACAGLQABQSByQfgARw0AIAlBMBBZIQcgBSAFKAIAIghBAWo2AgAgCCAHOgAAIAkgBiwAARBZIQcgBSAFKAIAIghBAWo2AgAgCCAHOgAAIAZBAmoiCCEGA0AgAiAGTQ0CIAYsAAAQMxCYCkUNAiAGQQFqIQYMAAsACwNAIAIgBk0NASAGLAAAIREQMxogERCsAUUNASAGQQFqIQYMAAsACwJAIApBBGoQmAEEQCAJIAggBiAFKAIAEIUCIAUgBSgCACAGIAhrajYCAAwBCyAIIAYQrwIgDhBtIQ8gCCEHA0AgBiAHTQRAIAMgCCAAa2ogBSgCABCvAgUCQCAKQQRqIgwgDRAgLAAAQQBMDQAgCyAMIA0QICwAAEcNACAFIAUoAgAiC0EBajYCACALIA86AAAgDSANIAwQDEEBa0lqIQ1BACELCyAJIAcsAAAQWSEMIAUgBSgCACIQQQFqNgIAIBAgDDoAACAHQQFqIQcgC0EBaiELDAELCwsDQAJAAkAgAiAGTQRAIAYhBwwBCyAGQQFqIQcgBi0AACIGQS5HDQEgDhCXASEGIAUgBSgCACIIQQFqNgIAIAggBjoAAAsgCSAHIAIgBSgCABCFAiAFIAUoAgAgAiAHa2oiBTYCACAEIAUgAyABIABraiABIAJGGzYCACAKQQRqEAoaIApBEGokAA8LIAkgBsAQWSEGIAUgBSgCACIIQQFqNgIAIAggBjoAACAHIQYMAAsAC9kDAQh/IwBBEGsiCiQAIAYQayELIApBBGoiByAGEPICIgYQbAJAIAcQmAEEQCALIAAgAiADEIUCIAUgAyACIABraiIGNgIADAELIAUgAzYCAAJAAkAgACIHLQAAIghBK2sOAwABAAELIAsgCMAQWSEHIAUgBSgCACIIQQFqNgIAIAggBzoAACAAQQFqIQcLAkAgAiAHa0ECSA0AIActAABBMEcNACAHLQABQSByQfgARw0AIAtBMBBZIQggBSAFKAIAIglBAWo2AgAgCSAIOgAAIAsgBywAARBZIQggBSAFKAIAIglBAWo2AgAgCSAIOgAAIAdBAmohBwsgByACEK8CQQAhCSAGEG0hDUEAIQggByEGA38gAiAGTQR/IAMgByAAa2ogBSgCABCvAiAFKAIABQJAIApBBGoiDCAIECAtAABFDQAgCSAKQQRqIAgQICwAAEcNACAFIAUoAgAiCUEBajYCACAJIA06AAAgCCAIIAwQDEEBa0lqIQhBACEJCyALIAYsAAAQWSEMIAUgBSgCACIOQQFqNgIAIA4gDDoAACAGQQFqIQYgCUEBaiEJDAELCyEGCyAEIAYgAyABIABraiABIAJGGzYCACAKQQRqEAoaIApBEGokAAubAwEDfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQxgEhBiADIABB0AFqEMADIQcgAEHEAWogAyAAQcQCahC/AyAAQbgBahAmIgEgARAnEB4gACABQQAQICICNgK0ASAAIABBEGo2AgwgAEEANgIIA0ACQCAAQcwCaiAAQcgCahAtDQAgACgCtAEgARAMIAJqRgRAIAEQDCEDIAEgARAMQQF0EB4gASABECcQHiAAIAMgAUEAECAiAmo2ArQBCyAAQcwCaiIDEEggBiACIABBtAFqIABBCGogACgCxAIgAEHEAWogAEEQaiAAQQxqIAcQ7wINACADEFMaDAELCwJAIABBxAFqEAxFDQAgACgCDCIDIABBEGprQZ8BSg0A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AiACKAIEQQFyNgIEIAkgBiAJKAIAQQFxckECcjYCACABIAZqIgIgAigCBEEBcjYCBCABIAYQuwQLAkAgACgCBCICQQNxRQ0AIAJBeHEiASAFQRBqTQ0AIAAgBSACQQFxckECcjYCBCAAIAVqIgQgASAFayICQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEIAQgAhC7BAsgAEEIagsLIgBFDQEaIAggADYCDEEAIQELIAELIQBBACAIKAIMIAAbIQELIAhBEGokACABDQBByMMCKAIAIgBFDQAgABEQAAwBCwsgAQ8LIAAQGAsHACABIABrCyMAA0AgACABRwRAIAJB8ABrIABB8ABrIgAQMiECDAELCyACCwkAIAAgARCiCgsHACAAQQhLCxMAIAEQpQoEQCAAEAsPCyAAEAsLJQEBfyAAKAIIIQIDQCABIAJGRQRAIAAgAkEEayICNgIIDAELCwuBAQEDfyMAQRBrIgQkACMAQSBrIgMkACADQRhqIAAgARD5BSADQRBqIANBDGoiASADKAIYIAMoAhwgAhD4BSADIAAgAygCEBD3BTYCDCADIAIgAygCFBC1BDYCCCAEQQhqIAEgA0EIahDHASADQSBqJAAgBCgCDCEFIARBEGokACAFCwwAIAAgACgCBBCnCgsJACAAEN0BEAsLDgBBACAAIABBfxCJAhsLqQEBA38jAEEQayIDJAAgASACEKQKIgVB7////wdNBEACQCAFEMIDBEAgACAFEHkgACEEDAELIANBCGogACAFELQCQQFqEIYCIAMoAgwaIAAgAygCCCIEEIoBIAAgAygCDBCJASAAIAUQbwsDQCABIAJHBEAgBCABEIMBIARBAWohBCABQQFqIQEMAQsLIANBADoAByAEIANBB2oQgwEgA0EQaiQADwsQbgALEAAgAEIANwIAIABBADYCCAsPACAAIAAoAhggAWo2AhgLFwAgACACNgIcIAAgATYCFCAAIAE2AhgLVwECfwJAIAAoAgAiAkUNAAJ/IAIoAhgiAyACKAIcRgRAIAIgASACKAIAKAI0EQMADAELIAIgA0EEajYCGCADIAE2AgAgAQtBfxCJAkUNACAAQQA2AgALCzEBAX8gACgCDCIBIAAoAhBGBEAgACAAKAIAKAIoEQIADwsgACABQQRqNgIMIAEoAgALJwEBfyAAKAIMIgEgACgCEEYEQCAAIAAoAgAoAiQRAgAPCyABKAIACycBAX8CQCAAKAIAIgJFDQAgAiABELYKQX8QiQJFDQAgAEEANgIACwsdACAAIAFB/P///wdBAUH/////A0GAgICABBC2AwsJACAAEP4FEAsLPQEBfyAAKAIYIgIgACgCHEYEQCAAIAEQugIgACgCACgCNBEDAA8LIAAgAkEBajYCGCACIAE6AAAgARC6Ags0AQF/IAAoAgwiASAAKAIQRgRAIAAgACgCACgCKBECAA8LIAAgAUEBajYCDCABLAAAELoCCyoBAX8gACgCDCIBIAAoAhBGBEAgACAAKAIAKAIkEQIADwsgASwAABC6AgsPACAAIAAoAgAoAhgRAgALCAAgACgCEEULBABBfwsOACAAIAAgAWogAhCoCgsIACAAEPYFGgsKACABIABrQQJ1C4QBAQN/IwBBEGsiBSQAIAVBADoADiMAQRBrIgMkACAAIAEQhQYhAQNAIAEEQCADIAA2AgwgAyADKAIMIAFBAXYiBEECdGo2AgwgASAEQX9zaiAEIAMoAgwgAhCIBiIEGyEBIAMoAgxBBGogACAEGyEADAELCyADQRBqJAAgBUEQaiQAIAALrQwBBn8jAEEQayIEJAAgBCAANgIMAkAgAEHTAU0EQEHQywFBkM0BIARBDGoQvwooAgAhAgwBCyAAQXxPBEAQEgALIAQgACAAQdIBbiIGQdIBbCICazYCCEGQzQFB0M4BIARBCGoQvwpBkM0Ba0ECdSEFA0AgBUECdEGQzQFqKAIAIAJqIQJBBSEAA0ACQCAAQS9GBEBB0wEhAANAIAIgAG4iASAASQ0FIAIgACABbEYNAiACIABBCmoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBDGoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBEGoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBEmoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBFmoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBHGoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBHmoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBJGoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBKGoiAW4iAyABSQ0FIAIgASADbEYNAiACIABBKmoiAW4iAyAB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QgBSDQEgAiAEQQFxaiECDAELIABQIAVCgICAgICAwP//AFQgBUKAgICAgIDA//8AURtFBEAgAUIZiKdB////AXFBgICA/gdyIQIMAQtBgICA/AchAiAFQv///////7+/wABWDQBBACECIAVCMIinIgRBkf4ASQ0AIANBEGogACABQv///////z+DQoCAgICAgMAAhCIFIARBgf4AaxBhIAMgACAFQYH/ACAEaxC7AiADKQMIIgBCGYinIQIgAykDACADKQMQIAMpAxiEQgBSrYQiBVAgAEL///8PgyIAQoCAgAhUIABCgICACFEbRQRAIAJBAWohAgwBCyAFIABCgICACIWEQgBSDQAgAkEBcSACaiECCyADQSBqJAAgAiABQiCIp0GAgICAeHFyvguqDwIFfw9+IwBB0AJrIgUkACAEQv///////z+DIQsgAkL///////8/gyEKIAIgBIVCgICAgICAgICAf4MhDSAEQjCIp0H//wFxIQgCQAJAIAJCMIinQf//AXEiCUH//wFrQYKAfk8EQCAIQf//AWtBgYB+Sw0BCyABUCACQv///////////wCDIgxCgICAgICAwP//AFQgDEKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCENDAILIANQIARC////////////AIMiAkKAgICAgIDA//8AVCACQoCAgICAgMD//wBRG0UEQCAEQoCAgICAgCCEIQ0gAyEBDAILIAEgDEKAgICAgIDA//8AhYRQBEAgAyACQoCAgICAgMD//wCFhFAEQEIAIQFCgICAgICA4P//ACENDAMLIA1CgICAgICAwP//AIQhDUIAIQEMAgsgAyACQoCAgICAgMD//wCFhFAEQEIAIQEMAgsgASAMhFAEQEKAgICAgIDg//8AIA0gAiADhFAbIQ1CACEBDAILIAIgA4RQBEAgDUKAgICAgIDA//8AhCENQgAhAQwCCyAMQv///////z9YBEAgBUHAAmogASAKIAEgCiAKUCIGG3kgBkEGdK18pyIGQQ9rEGFBECAGayEGIAUpA8gCIQogBSkDwAIhAQsgAkL///////8/Vg0AIAVBsAJqIAMgCyADIAsgC1AiBxt5IAdBBnStfKciB0EPaxBhIAYgB2pBEGshBiAFKQO4AiELIAUpA7ACIQMLIAVBoAJqIAtCgICAgICAwACEIhJCD4YgA0IxiIQiAkIAQoCAgICw5ryC9QAgAn0iBEIAEC8gBUGQAmpCACAFKQOoAn1CACAEQgAQLyAFQYACaiAFKQOYAkIBhiAFKQOQAkI/iIQiBEIAIAJCABAvIAVB8AFqIARCAEIAIAUpA4gCfUIAEC8gBUHgAWogBSkD+AFCAYYgBSkD8AFCP4iEIgRCACACQgAQLyAFQdABaiAEQgBCACAFKQPoAX1CABAvIAVBwAFqIAUpA9gBQgGGIAUpA9ABQj+IhCIEQgAgAkIAEC8gBUGwAWogBEIAQgAgBSkDyAF9QgAQLyAFQaABaiACQgAgBSkDuAFCAYYgBSkDsAFCP4iEQgF9IgJCABAvIAVBkAFqIANCD4ZCACACQgAQLyAFQfAAaiACQgBCACAFKQOoASAFKQOgASIMIAUpA5gBfCIEIAxUrXwgBEIBVq18fUIAEC8gBUGAAWpCASAEfUIAIAJCABAvIAYgCSAIa2ohBgJ/IAUpA3AiE0IBhiIOIAUpA4gBIg9CAYYgBSkDgAFCP4iEfCIQQufsAH0iFEIgiCICIApCgICAgICAwACEIhVCAYYiFkIgiCIEfiIRIAFCAYYiDEIgiCILIBAgFFatIA4gEFatIAUpA3hCAYYgE0I/iIQgD0I/iHx8fEIBfSITQiCIIhB+fCIOIBFUrSAOIA4gE0L/////D4MiEyABQj+IIhcgCkIBhoRC/////w+DIgp+fCIOVq18IAQgEH58IAQgE34iESAKIBB+fCIPIBFUrUIghiAPQiCIhHwgDiAOIA9CIIZ8Ig5WrXwgDiAOIBRC/////w+DIhQgCn4iESACIAt+fCIPIBFUrSAPIA8gEyAMQv7///8PgyIRfnwiD1atfHwiDlatfCAOIAQgFH4iGCAQIBF+fCIEIAIgCn58IgogCyATfnwiEEIgiCAKIBBWrSAEIBhUrSAEIApWrXx8QiCGhHwiBCAOVK18IAQgDyACIBF+IgIgCyAUfnwiC0IgiCACIAtWrUIghoR8IgIgD1StIAIgEEIghnwgAlStfHwiAiAEVK18IgRC/////////wBYBEAgFiAXhCEVIAVB0ABqIAIgBCADIBIQLyABQjGGIAUpA1h9IAUpA1AiAUIAUq19IQpCACABfSELIAZB/v8AagwBCyAFQeAAaiAEQj+GIAJCAYiEIgIgBEIBiCIEIAMgEhAvIAFCMIYgBSkDaH0gBSkDYCIMQgBSrX0hCkIAIAx9IQsgASEMIAZB//8AagsiBkH//wFOBEAgDUKAgICAgIDA//8AhCENQgAhAQwBCwJ+IAZBAEoEQCAKQgGGIAtCP4iEIQogBEL///////8/gyAGrUIwhoQhDCALQgGGDAELIAZBj39MBEBCACEBDAILIAVBQGsgAiAEQQEgBmsQuwIgBUEwaiAMIBUgBkHwAGoQYSAFQSBqIAMgEiAFKQNAIgIgBSkDSCIMEC8gBSkDOCAFKQMoQgGGIAUpAyAiAUI/iIR9IAUpAzAiBCABQgGGIgFUrX0hCiAEIAF9CyEEIAVBEGogAyASQgNCABAvIAUgAyASQgVCABAvIAwgAiACIAMgAkIBgyIBIAR8IgNUIAogASADVq18IgEgElYgASASURutfCICVq18IgQgAiACIARCgICAgICAwP//AFQgAyAFKQMQViABIAUpAxgiBFYgASAEURtxrXwiAlatfCIEIAIgBEKAgICAgIDA//8AVCADIAUpAwBWIAEgBSkDCCIDViABIANRG3GtfCIBIAJUrXwgDYQhDQsgACABNwMAIAAgDTcDCCAFQdACaiQAC8ABAgF/An5BfyEDAkAgAEIAUiABQv///////////wCDIgRCgICAgICAwP//AFYgBEKAgICAgIDA//8AURsNACACQv///////////wCDIgVCgICAgICAwP//AFYgBUKAgICAgIDA//8AUnENACAAIAQgBYSEUARAQQAPCyABIAKDQgBZBEAgASACUiABIAJTcQ0BIAAgASAChYRCAFIPCyAAQgBSIAEgAlUgASACURsNACAAIAEgAoWEQgBSIQMLIAMLcgEBfyMAQRBrIgMkAAJAIAAtABBBAUYEQCABIAIpAwA3AwAgASACKQMINwMIDAELIAMgAjYCDCADIAA2AgggAygCDCEBIAMoAggiABC5ASAAIAEpAwg3AwggACABKQMANwMAIABBAToAEAsgA0EQaiQACxIAIABFBEBBAA8LIAAgARCLBgspACABIAEoAgBBB2pBeHEiAUEQajYCACAAIAEpAwAgASkDCBCJBjkDAAuXGAMTfwF8An4jAEGwBGsiDCQAIAxBADYCLAJAIAG9IhpCAFMEQEEBIRBBigshEyABmiIBvSEaDAELIARBgBBx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AEgbOgAAIARBCHEhBiAMQRBqIQcDQCAHIgUCfyABmUQAAAAAAADgQWMEQCABqgwBC0GAgICAeAsiB0HAywFqLQAAIA1yOgAAIAYgA0EASnJFIAEgB7ehRAAAAAAAADBAoiIBRAAAAAAAAAAAYXEgBUEBaiIHIAxBEGprQQFHckUEQCAFQS46AAEgBUECaiEHCyABRAAAAAAAAAAAYg0AC0F/IQlB/f///wcgCyARIAprIgZqIg1rIANIDQAgAEEgIAIgDSADQQJqIAcgDEEQaiIHayIFIAVBAmsgA0gbIAUgAxsiCWoiAyAEEGIgACAIIAsQWiAAQTAgAiADIARBgIAEcxBiIAAgByAFEFogAEEwIAkgBWtBAEEAEGIgACAKIAYQWiAAQSAgAiADIARBgMAAcxBiIAMgAiACIANIGyEJCyAMQbAEaiQAIAkLMAAgABC5ASAAIAEoAgg2AgggACABKQIANwIAIAFCADcCACABQQA2AgggAEEAOgAQC7oCAAJAAkACQAJAAkACQAJAAkACQAJAAkAgAUEJaw4SAAgJCggJAQIDBAoJCgoICQUGBwsgAiACKAIAIgFBBGo2AgAgACABKAIANgIADwsgAiACKAIAIgFBBGo2AgAgACABMgEANwMADwsgAiACKAIAIgFBBGo2AgAgACABMwEANwMADwsgAiACKAIAIgFBBGo2AgAgACABMAAANwMADwsgAiACKAIAIgFBBGo2AgAgACABMQAANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKwMAOQMADwsgACACENEKCw8LIAIgAigCACIBQQRqNgIAIAAgATQCADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATUCADcDAA8LIAIgAigCAEEHakF4cSIBQQhqNgIAIAAgASkDADcDAAttAQR/IAAoAgAsAAAQrAFFBEBBAA8LA0AgACgCACEDQX8hASACQcyZs+YATQRAQX8gAywAAEEwayIEIAJBCmwiAWogBCABQf////8Hc0obIQELIAAgA0EBajYCACABIQIgAywAARCsAQ0ACyABC4kTAhZ/AX4jAEHQAGsiBiQAIAYgATYCTCAGQTdqIRYgBkE4aiEQAkACQAJAA0BBACEFA0AgASELIAUgD0H/////B3NKDQIgBSAPaiEPAkACQAJAIAEiBS0AACIH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A/ACCyEWIA4gFTcDKCAOIBY3AyAgBEGQxgBqJAAgDikDKCEVIA4pAyAhFgwECyABKQNwQgBZBEAgASABKAIEQQFrNgIECwwBCwJAAn8gASgCBCICIAEoAmhHBEAgASACQQFqNgIEIAItAAAMAQsgARAoC0EoRgRAQQEhBgwBC0KAgICAgIDg//8AIRUgASkDcEIAUw0DIAEgASgCBEEBazYCBAwDCwNAAn8gASgCBCICIAEoAmhHBEAgASACQQFqNgIEIAItAAAMAQsgARAoCyICQTBrQQpJIAJBwQBrQRpJciACQd8ARnJFIAJB4QBrQRpPcUUEQCAGQQFqIQYMAQsLQoCAgICAgOD//wAhFSACQSlGDQIgASkDcCIYQgBZBEAgASABKAIEQQFrNgIECwJAIAMEQCAGDQEMBAsMAQsDQCAYQgBZBEAgASABKAIEQQFrNgIECyAGQQFrIgYNAAsMAgtB0K0CQRw2AgAgAUIAEK0BC0IAIRULIAAgFjcDACAAIBU3AwggDkEwaiQAC8oGAgV/BH4jAEGAAWsiBSQAAkACQAJAIAMgBEIAQgAQvAJFDQACfyAEQv///////z+DIQsCfyAEQjCIp0H//wFxIgZB//8BRwRAQQQgBg0BGkECQQMgAyALhFAbDAILIAMgC4RQCwshCSACQjCIpyIIQf//AXEiB0H//wFGDQAgCQ0BCyAFQRBqIAEgAiADIAQQNyAFIAUpAxAiAiAFKQMYIgEgAiABEM0KIAUpAwghAiAFKQMAIQQMAQsgASACQv///////////wCDIgsgAyAEQv///////////wCDIgoQvAJBAEwEQCABIAsgAyAKELwCBEAgASEEDAILIAVB8ABqIAEgAkIAQgAQNyAFKQN4IQIgBSkDcCEEDAELIARCMIinQf//AXEhBiAHBH4gAQUgBUHgAGogASALQgBCgICAgICAwLvAABA3IAUpA2giC0IwiKdB+ABrIQcgBSkDYAshBCAGRQRAIAVB0ABqIAMgCkIAQoCAgICAgMC7wAAQNyAFKQNYIgpCMIinQfgAayEGIAUpA1AhAwsgCkL///////8/g0KAgICAgIDAAIQhDCALQv///////z+DQoCAgICAgMAAhCELIAYgB0gEQANAAn4gCyAMfSADIARWrX0iCkIAWQRAIAogBCADfSIEhFAEQCAFQSBqIAEgAkIAQgAQNyAFKQMoIQIgBSkDICEEDAULIApCAYYgBEI/iIQMAQsgC0IBhiAEQj+IhAshCyAEQgGGIQQgB0EBayIHIAZKDQALIAYhBwsCQCALIAx9IAMgBFatfSIKQgBTBEAgCyEKDAELIAogBCADfSIEhEIAUg0AIAVBMGogASACQgBCABA3IAUpAzghAiAFKQMwIQQMAQsgCkL///////8/WARAA0AgBEI/iCENIAdBAWshByAEQgGGIQQgDSAKQgGGhCIKQoCAgICAgMAAVA0ACwsgCEGAgAJxIQYgB0EATARAIAVBQGsgBCAKQv///////z+DIAdB+ABqIAZyrUIwhoRCAEKAgICAgIDAwz8QNyAFKQNIIQIgBSkDQCEEDAELIApC////////P4MgBiAHcq1CMIaEIQILIAAgBDcDACAAIAI3AwggBUGAAWokAAu/AgEBfyMAQdAAayIEJAACQCADQYCAAU4EQCAEQSBqIAEgAkIAQoCAgICAgID//wAQNyAEKQMoIQIgBCkDICEBIANB//8BSQRAIANB//8AayEDDAILIARBEGogASACQgBCgICAgICAgP//ABA3Qf3/AiADIANB/f8CThtB/v8BayEDIAQpAxghAiAEKQMQIQEMAQsgA0GBgH9KDQAgBEFAayABIAJCAEKAgICAgICAORA3IAQpA0ghAiAEKQNAIQEgA0H0gH5LBEAgA0GN/wBqIQMMAQsgBEEwaiABIAJCAEKAgICAgICAORA3QeiBfSADIANB6IF9TBtBmv4BaiEDIAQpAzghAiAEKQMwIQELIAQgASACQgAgA0H//wBqrUIwhhA3IAAgBCkDCDcDCCAAIAQpAwA3AwAgBEHQAGokAAs1ACAAIAE3AwAgACACQv///////z+DIARCMIinQYCAAnEgAkIwiKdB//8BcXKtQjCGhDcDCAsOACAAKAIAIAEgAhDPCgt8AQJ/IAAgACgCSCIBQQFrIAFyNgJIIAAoAhQgACgCHEcEQCAAQQBBACAAKAIkEQUAGgsgAEEANgIcIABCADcDECAAKAIAIgFBBHEEQCAAIAFBIHI2AgBBfw8LIAAgACgCLCAAKAIwaiICNgIIIAAgAjYCBCABQRt0QR91CywBAn8jAEEQayICJAAgAiABNgIMIABB5ABBli4gARC9BCEDIAJBEGokACADC2wBAn8gASAAKAIEIAAoAgAgASgCBBCjCiICNgIEIAAoAgAhAyAAIAI2AgAgASADNgIEIAAoAgQhAiAAIAEoAgg2AgQgASACNgIIIAAoAgghAiAAIAEoAgw2AgggASACNgIMIAEgASgCBDYCAAsTACAAQQAgAUGgrAIoAgARBQAaC4QFAQt/IAEoAgAiBCgCHCELA0ACQCAEKAIYIApNBEBBAQ8LAkACQAJAAkAgCyAKQTBsaiIDKAIIQQFrDgMBAAECCyAAIAMoAhAiBmoiBCgCACIIRQ0BIAEgAygCFCIFaiEHIAAgBWohBQJAIAEgBmoiBigCAARAIAMoAgwQvQIhAyACKAIIIAMgBigCACAEKAIAamwgAigCABEDACIIRQ0EIAggBSgCACAEKAIAIANsEB8iCCAEKAIAIANsaiAHKAIAIAYoAgAgA2wQHxogBygCACIDBEAgAigCCCADIAIoAgQRAAALIAUoAgAiAwRAIAIoAgggAyACKAIEEQAACyAHIAg2AgAgBiAGKAIAIAQoAgBqNgIADAELIAYgCDYCACAHIAUoAgA2AgALIARBADYCACAFQQA2AgAMAQsgASADKAIQIgZqIQggACAGaiEGIAMtACBBBHEEQCAIKAIADQEgBCgCJCAEKAIoIAYoAgAQkAYiA0EASA0DIAQoAhwgA0EwbGohAwsgASADKAIUIgRqIQcgACAEaiEEIAMoAhwhBQJAAkACQAJAAkACQCADKAIMIgxBDmsOAwIBAAMLIAQoAgAiBUUNBSAHKAIAIglFDQQgBSAJIAIQ5gpFDQYMBQsgBCgCBCINRQ0EIAcoAgQhCSAFRQ0CIA0gBSgCBCIFRg0EIAlFIAUgCUZyDQMMBAsgBCgCACAFRg0DIAcoAgAgBUYNAgwDCyAGKAIARQ0CIAgoAgANAgwBCyAJDQELIAcgBCAMEL0CIgcQHxogBEEAIAcQHRogAygCEEUNACAIIAYoAgA2AgAgBkEANgIACyAKQQFqIQogASgCACEEDAILCwtBAAsuAQN/A0AgACACRgRAQQAPCyABIAJqIQQgAkEBaiECIAQtAABB/wBxRQ0AC0EBCz0BAX8jAEEQayICJAAgAC0AEEEGRwRAIAIgATYCDCACIAA2AgggAigCCCIAEDsgAEEGOgAQCyACQRBqJAALlwUBAn8jAEEgayIDJAAgACgCBCADEJEGIQQCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAKAIMDhEACwQDAgUBBAMFBAUGAAcICQoLIAIgASgCACADIARqEO0KIARqIgAgAyACKAIAEQQADAsLIAIgASgCACADIARqEMsBIARqIgAgAyACKAIAEQQADAoLIAIgASkDACADIARqEOoKIARqIgAgAyACKAIAEQQADAkLIAIgASkDACADIARqEMEEIARqIgAgAyACKAIAEQQADAgLIAMgAy0AAEEFcjoAACADIARqIAEoAgA2AAAgAiAEQQRqIgAgAyACKAIAEQQADAcLIAMgAy0AAEEBcjoAACADIARqIAEpAwA3AAAgAiAEQQhqIgAgAyACKAIAEQQADAYLIAMgBGogASgCAEEARzoAACACIARBAWoiACADIAIoAgARBAAMBQsgASgCACIBBH8gARDiAQVBAAshACADIAMtAABBAnI6AAAgAiAAIAMgBGoQywEgBGoiBCADIAIoAgARBAAgAiAAIAEgAigCABEEACAAIARqIQAMBAsgASgCACEAIAMgAy0AAEECcjoAACACIAAgAyAEahDLASAEaiIEIAMgAigCABEEACACIAAgASgCBCACKAIAEQQAIAAgBGohAAwDCyABKAIAIQAgAyADLQAAQQJyOgAAIABFBEAgAyAEakEAOgAAIAIgBEEBaiIAIAMgAigCABEEAAwDCyACIAAQYyIBIAMgBGoQywEgBGoiBCADIAIoAgARBAAgACACEHEgASAEaiEADAILQY7KAEG1wgBB6QxBgSEQAAALIAIgASgCACADIARqEOwKIARqIgAgAyACKAIAEQQACyADQSBqJAAgAAsSACAAQgGGIABCP4eFIAEQwQQLcQEBfyMAQRBrIgMkAAJAIAAtABBBBUYEQCABIAIpAwA3AwAgASACKQMINwMIDAELIAMgAjYCDCADIAA2AgggAygCDCEBIAMoAggiABA7IAAgASkDCDcDCCAAIAEpAwA3AwAgAEEFOgAQCyADQRBqJAALEgAgAEEBdCAAQR91cyABEMsBC2UAIABBAEgEQCABQQE6AAkgAUF/NgAFIAEgAEGAAXI6AAAgASAAQRx1QYABcjoABCABIABBFXZBgAFyOgADIAEgAEEOdkGAAXI6AAIgASAAQQd2QYABcjoAAUEKDwsgACABEMsBC4UBAQF/QQEhAgJAAkACQAJAAkACQAJAAkAgACgCDA4RAQEBAgICAQECAgMEAAEFBgYHCyABKAIARQ8LIAEoAgBFDwsgASkDAFAPCyABKgIAQwAAAABbDwsgASsDAEQAAAAAAAAAAGEPCyABKAIAIgBFDQEgAC0AAEUPCyABKAIARSECCyACCy8AIAAQOyAAIAEoAgg2AgggACABKQIANwIAIAFCADcCACABQQA2AgggAEEEOgAQCzIAIABB/JcBKAIANgIYIABB9JcBKQIANwIQIABB7JcBKQIANwIIIABB5JcBKQIANwIACw4AIABB4JYBQcgAEB8aCw0AIABBoJUBQSgQHxoLJgAgAEHclAEpAgA3AhAgAEHUlAEpAgA3AgggAEHMlAEpAgA3AgALDQAgAEHskwFBJBAfGgsNACAAQdCRAUEwEB8aCyYAIABBiJEBKQMANwMQIABBgJEBKQMANwMIIABB+JABKQMANwMACyYAIABBtJABKAIANgIQIABBrJABKQIANwIIIABBpJABKQIANwIACzIAIABB5I8BKAIANgIYIABB3I8BKQIANwIQIABB1I8BKQIANwIIIABBzI8BKQIANwIACzIAIABBmIwBKQMANwMYIABBkIwBKQMANwMQIABBiIwBKQMANwMIIABBgIwBKQMANwMAC0UBAX8jAEEQayIDJAACQCAALQAQQQRGBEAgASACEBsMAQsgAyACNgIMIAMgADYCCCADKAIIIAMoAgwQ7woLIANBEGokAAsOACAAQYiKAUHAABAfGgsmACAAQcSJASgCADYCECAAQbyJASkCADcCCCAAQbSJASkCADcCAAsNACAAQcCIAUE4EB8aCw0AIABB6OgAQTAQHxoLDgAgAEHw5QBB4AAQHxoLYQECfyMAQRBrIgMkAAJAIAAtABBBA0YEQCABIAItAAA6AAAMAQsgAyACNgIMIAMgADYCCCADKAIMIQQgAygCCCIAEDsgBC0AACEBIABBAzoAECAAIAE6AAALIANBEGokAAsNACAAQdDiAEEoEB8aC2MCAn8BfCMAQRBrIgMkAAJAIAAtABBBAkYEQCABIAIrAwA5AwAMAQsgAyACNgIMIAMgADYCCCADKAIMIQQgAygCCCIAEDsgBCsDACEFIABBAjoAECAAIAU5AwALIANBEGokAAtjAgJ/AX4jAEEQayIDJAACQCAALQAQQQFGBEAgASACKQMANwMADAELIAMgAjYCDCADIAA2AgggAygCDCEEIAMoAggiABA7IAQpAwAhBSAAQQE6ABAgACAFNwMACyADQRBqJAALFQAgAEG44AA2AgAgAEEIahAKGiAACw4AIABBCGoQChogABALCwoAIABBCGoQChoLYQICfwF+IwBBEGsiAyQAAkAgAC0AEEUEQCABIAIpAwA3AwAMAQsgAyACNgIMIAMgADYCCCADKAIMIQQgAygCCCIAEDsgBCkDACEFIABBADoAECAAIAU3AwALIANBEGokAAsVACAAQZTgADYCACAAQQhqEAoaIAALDAAgACgCACACEOgKCxYAIABBqN8ANgIAIABBBGoQtgEaIAALDwAgAEEEahC2ARogABALCwsAIABBBGoQtgEaCw4AIAAoAgAgASACEOsKCxYAIABBhN8ANgIAIABBBGoQtgEaIAALGgAgACABKAIANgIAIABBCGogAUEIahCDAxoLFQAgAEGY3gA2AgAgAEEQahARGiAACw4AIAAoAgAgASACEIALCw4AIAAoAgAgASACEIILCw4AIAAoAgAgASACEIMLCw4AIAAoAgAgASACEIcLC8YBAQd/An8gARCRAiEEAkAgACgCuAQiA0UNACAAKAK0BAJ/IANBAWsgBHEgA2kiAkEBTQ0AGiAEIAMgBEsNABogBCADcAsiBkECdGooAgAiBUUNACADQQFrIQcgAkEBSyEIA0AgBSgCACIFRQ0BIAUoAgQiAiAERwRAAkAgCEUEQCACIAdxIQIMAQsgAiADSQ0AIAIgA3AhAgsgAiAGRw0CDAELIAVBCGogARAjRQ0ACyAFDAELQQALIgFBFGogAEG0DWogARsLEQAgABBGIAAgARBzQQI6ABgLzwMBCH8jAEGQAWsiBCQAAkAgAC0ApAJFDQBBARAaBEAgBEEIahAVIQcgBEEBNgIEIAcgAEGwA2oQE0HBEBANGiAEQQRqEBkLIAAoArwBIQMgACgCuAEhAQNAIAEgA0YEQCAAIAApA+gBNwPwAQUgAUEBOgAoIAFBMGohAQwBCwsgAEGcAmohBiAAKAKYAiEAA0AgACAGRg0BIwBBkAFrIgMkAAJAIABBIGoiAS0AxANFDQAgASgCkAEgASgClAFGDQBBABAaBEAgA0EIahAV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AToAGCACIAM2AgALIABBEGokAAtLAQF/IAAoAgAhAyMAQRBrIgAkAAJAIAMtABhFBEAgASACEMYEDAELIAAgAjYCDCAAIAM2AgggACgCCCAAKAIMEK8GCyAAQRBqJAALZAEBfyMAQRBrIgMkACAAQQhqIQACQCABLwEAIgEEQCAAIAEgA0EEakHT0gAQDiIBEM4DDAELIANBBGoiASACKAIEIgIoAhAgAigCDBBRIABBACABEM4DCyABEAoaIANBEGokAAsNACAAIAFBmNkAEPoBCwsAIABBmNkAEPsBCwkAIAAQsgYQCwv4AQIEfwF+IwBBMGsiAyQAIABBCGohBQJ/IAEvAQAiAQRAIANBJGpB09IAEA4hAiADQRhqQdPSABAOIQAgA0EANgIUIANCADcCDCAFIAEgAiAAIANBDGoiARCzBiABDAELIANBJGoiASACKAIEKAIMEA4aIANBGGoiACACKAIEKAIQEA4aIANBDGoiBEEANgIIIARCADcCACAEIAIoAgQoAhQQ/QEDQCACKAIEIgY1AhQgB1YEQCAEIAYoAhggB6dBAnRqEIIDIAdCAXwhBwwBCwsgBUEAIAEgACAEELMGIAEhAiAECxBAIAAQChogAhAKGiADQTBqJAALDQAgACABQfTYABD6AQsLACAAQfTYABD7AQsJACAAELQGEAsLDQAgACABQdDYABD6AQsLACAAQdDYABD7AQuUAQEDfyMAQSBrIgEkACAAKAIMIgIEQCACQQAgACgCEEEDdBAdGgsgACgCBCAAKAIAa0EEdSEDQQAhAgNAIAIgA0YEQCABQSBqJAAFIAFBGGogACAAKAIAIAJBBHRqEMgEIAEgAjYCFCABIAEoAhg2AhAgASABKQIQNwMIIAAgAUEIaiABKAIcEDEgAkEBaiECDAELCwsJACAAELUGEAsLDQAgACABQazYABD6AQsLACAAQazYABD7AQsJACAAELYGEAsLDQAgACABQYjYABD6AQsLACAAQYjYABD7AQsJACAAELcGEAsLDQAgACABQeTXABD6AQsLACAAQeTXABD7AQsJACAAELgGEAsLfAECfyMAQRBrIgMkACAAQQhqIQACQCABLwEAIgEEQCAAIAEgA0EEakHT0gAQDiIBEM4DDAELIANBBGohAQJAIAIoAgQiAigCHCIERQRAIAFB09IAEA4aDAELIAEgAigCICAEEFELIABBACABEM4DCyABEAoaIANBEGokAAsNACAAIAFBwNcAEPoBCwsAIABBwNcAEPsBCwkAIAAQuQYQCwsJACAAENUEEAsLCQAgABDWBBALCwkAIAAQ1wQQCwsJACAAENgEEAsLCQAgABDCAhALCw4AIAAoAgAgASACEPkIC2sBAX8gACgCACEDIwBBEGsiACQAAkAgAy0AEEEERgRAIAEgAhClAgwBCyAAIAI2AgwgACADNgIIIwBBEGsiASQAIAAoAgggAUEEaiAAKAIMEBAiAhDvCiACEAoaIAFBEGokAAsgAEEQaiQAC2sBAX8gACgCACEDIwBBEGsiACQAAkAgAy0AGEECRgRAIAEgAhDXBgwBCyAAIAI2AgwgACADNgIIIwBBIGsiASQAIAAoAgggAUEIaiAAKAIMEO0DIgIQlgsgAhA7IAFBIGokAAsgAEEQaiQACwkAIABBBBCnCQsHACABEJkHCwcAIAEQmgcLBwAgARCRBwsHACABEJMHCwcAIAEQswELIAAgASACKQMANwMAIAEgAikDEDcDECABIAIpAwg3AwgLYgECfyMAQSBrIgIkAAJAIAEgACgCCCAAKAIAIgNrQQN1SwRAIAFBgICAgAJPDQEgACACQQxqIAEgACgCBCADa0EDdSAAQQhqELICIgAQpwUgABCwAgsgAkEgaiQADwsQAQALywEBA38gACgCACEDIwBBEGsiACQAAkAgAy0AkAFBAUYEQCABIAIoAgA2AgACQCABQQhqIgMtAEgiBCACQQhqIgUtAEhGBEAgBEUNASADIAUQrQMMAQsgBARAIAMQ8QcMAQsgAyAFEIAGCyABQdgAaiACQdgAahBMIAFB5ABqIAJB5ABqEEwgAUHwAGogAkHwAGoQ9gIMAQsgACACNgIMIAAgAzYCCCAAKAIMIQEgACgCCCICEJMDIAIgARD6B0EBOgCQAQsgAEEQaiQAC4kBAQF/IAAoAgAhAyMAQRBrIgAkAAJAIAMtAJABRQRAIAEgAigCADYCACABQQRqIAJBBGoQ+QcgAUEkaiACQSRqEPUHIAFBxABqIAJBxABqEPYCDAELIAAgAjYCDCAAIAM2AgggACgCDCEBIAAoAggiAhCTAyACIAEQ+wdBADoAkAELIABBEGokAAuXAQEBfyAAKAIAIQMjAEEQayIAJAACQCADLQAQQQFGBEAgASACEKUCDAELIAAgAjYCDCAAIAM2AggjAEEQayIDJAAgACgCCCEBIANBBGogACgCDBAQIQIgARAqIAEgAigCCDYCCCABIAIpAgA3AgAgAkIANwIAIAJBADYCCCABQQE6ABAgAhAKGiADQRBqJAALIABBEGokAAtoAgJ/AX4gACgCACEDIwBBEGsiACQAAkAgAy0AEEUEQCABIAIpAwA3AwAMAQsgACACNgIMIAAgAzYCCCAAKAIMIQQgACgCCCIBECogBCkDACEFIAFBADoAECABIAU3AwALIABBEGokAAsHACABEPQBCwkAIABBLBCpCQsJACAAQSgQ5QILCwAgACABQSgQlQkLCQAgAEEoEKkJCwkAIABBBxCoCQsKACABIAIQ+gcaCwoAIAEgAhD7BxoLlgEBA38jAEEgayIBJAAgACgCDCICBEAgAkEAIAAoAhBBA3QQHRoLIAAoAgQgACgCAGtB0AFtIQNBACECA0AgAiADRgRAIAFBIGokAAUgAUEYaiAAIAAoAgAgAkHQAWxqEMgEIAEgAjYCFCABIAEoAhg2AhAgASABKQIQNwMIIAAgAUEIaiABKAIcEDEgAkEBaiECDAELCws/ACABQQhqIQAgAS0AUARAIAAgARCXCAsgAUHwAGoQPCABQeQAahAPGiABQdgAahAPGiAALQBIBEAgABBkGgsL9QEBAn8gASgCCCECIAEoAgQhAANAIAAgAkYEQAJAIAFBJGohAiABKAIoIQMgASgCJCEAA0AgACADRg0BIAEgACkDGBDPAiAAQShqIQAMAAsACwUgASAAQRBqEI4BIABBgAFqIQAMAQsLIAFBxABqEDwgASgCMCIABEAgABALCyMAQRBrIgAkACAAIAI2AgwgACgCDCICKAIABEAgAhCRBSAAKAIMKAIAEAsLIABBEGokACABKAIQIgAEQCAAEAsLIwBBEGsiACQAIAAgAUEEajYCDCAAKAIMIgEoAgAEQCABEJIFIAAoAgwoAgAQCwsgAEEQaiQACwkAIABBMBClCQveAQEDfyAAKAIEIQIgACgCACEEIAEoAgQhAwNAIAIgBEcEQCADQTBrIgMgAkEwayICKQMANwMAIAMgAigCCDYCCCACQQA2AgggAkIANwMAIAMgAikDEDcDECADIAIoAiA2AiAgAyACKQMYNwMYIAJBADYCICACQgA3AxggAyACLQAoOgAoDAELCyABIAM2AgQgACgCACECIAAgAzYCACABIAI2AgQgACgCBCECIAAgASgCCDYCBCABIAI2AgggACgCCCECIAAgASgCDDYCCCABIAI2AgwgASABKAIENgIAC4kDAQR/IwBB8ABrIgMkAAJAIABBqAFqIgUgARCRASIEIAAoAqwBRwRAIARBEGoiASACENUCDQEgASkDACAAKQPwAVYEQCAAQcgBaiABEO0BIAQQlgMLIAMgAikDADcDUCADIAIoAhA2AmAgAyACKQMINwNYIAJBADYCECACQgA3AwggA0EAOgBoIAEgA0HQAGoiAhCkBSADQdgAahAKGiABKQMAIAApA/ABWA0BIAAgAEHEAGogBCABENMCIAIgAEHIAWogARDtASAEEPYBDAELAkAgAEGIAWoiBiABEGoiBCAAKAKMAUcEQCAEQRBqIAIQ1QINAiAAIAAgARCgAyAAKAI0IAAoAjhGBEAgABDXAgsgBiAEEJwIIAIpAwAgACkD8AFWDQEMAgsgAikDACAAKQPwAVgNAQsgA0EAOgAnIANB0ABqIgQgBSABIAIgA0EnahCaCCAAIABBxABqIAMoAlAiASABQRBqIgIQ0wIgBCAAQcgBaiACEO0BIAEQ9gELIANB8ABqJAALlAEBA38jAEEgayIBJAAgACgCDCICBEAgAkEAIAAoAhBBA3QQHRoLIAAoAgQgACgCAGtBBXUhA0EAIQIDQCACIANGBEAgAUEgaiQABSABQRhqIAAgACgCACACQQV0ahCZAyABIAI2AhQgASABKAIYNgIQIAEgASkCEDcDCCAAIAFBCGogASgCHBAxIAJBAWohAgwBCwsLWQEBfwJAIAAtABAiAiABLQAQRgRAIAJFDQEgACABKQMANwMAIAAgASkDCDcDCA8LIAIEQCAAQQA6ABAPCyAAIAEpAwA3AwAgACABKQMINwMIIABBAToAEAsLPgECfyAAKAIEIQIDQCACIAAoAggiAUcEQCAAIAFBgAJrIgE2AgggARCjCBoMAQsLIAAoAgAiAARAIAAQCwsLhAQBBX8gACgCBCEFIAAoAgAhBiABKAIEIQQDQCAFIAZHBEAgBEGAAmsiBCAFQYACayIFIgIpAwA3AwAgBCACKAIINgIIIAJCADcDACACQQA2Aggg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IAIgAyAEQQAQmgkLEQAgACABIAIgAyAEQQAQmQkLEQAgACABIAIgAyAEQQEQmgkLEQAgACABIAIgAyAEQQEQmQkLzQEBAX8jAEEgayIFJAAgBSABNgIcAkAgAigCBEEBcUUEQCAAIAEgAiADIAQgACgCACgCGBEJACECDAELIAVBEGoiACACECQgABDyAiEBIAAQIgJAIAQEQCAAIAEQmgEMAQsgBUEQaiABEJkBCyAFIAVBEGoQggE2AgwDQCAFIAVBEGoiABCEAjYCCCAFQQxqIgEgBUEIahDFAQRAIAVBHGogASIAKAIALAAAELMKIAAQvQMMAQUgBSgCHCECIAAQChoLCwsgBUEgaiQAIAIL8AIBBH8jAEHAAmsiACQAIAAgAjYCuAIgACABNgK8AiAAQcQBahAmIQYgAEEQaiICIAMQJCACEHBBoPEBQbrxASAAQdABahDgASACECIgAEG4AWoQJiIDIAMQJxAeIAAgA0EAECAiATYCtAEgACACNgIMIABBADYCCANAAkAgAEG8AmogAEG4AmoQLQ0AIAAoArQBIAMQDCABakYEQCADEAwhAiADIAMQDEEBdBAeIAMgAxAnEB4gACACIANBABAgIgFqNgK0AQsgAEG8AmoiAhBIQRAgASAAQbQBaiAAQQhqQQAgBiAAQRBqIABBDGogAEHQAWoQ7wINACACEFMaDAELCyADIAAoArQBIAFrEB4gAxAhIQkQMyEHIAAgBTYCACAJIAcgABCFCkEBRwRAIARBBDYCAAsgAEG8AmogAEG4AmoQLQRAIAQgBCgCAEECcjYCAAsgACgCvAIhCCADEAoaIAYQChogAEHAAmokACAICwkAIABBAxCnCQvRAwIBfgF/IwBBgANrIgAkACAAIAI2AvgCIAAgATYC/AIgAEHcAWogAyAAQfABaiAAQewBaiAAQegBahDvBSAAQdABahAmIgEgARAnEB4gACABQQAQICICNgLMASAAIABBIGo2AhwgAEEANgIYIABBAToAFyAAQcUAOgAWA0ACQCAAQfwCaiAAQfgCahAtDQAgACgCzAEgARAMIAJqRgRAIAEQDCEDIAEgARAMQQF0EB4gASABECcQHiAAIAMgAUEAECAiAmo2AswBCyAAQfwCaiIDEEggAEEXaiAAQRZqIAIgAEHMAWogACgC7AEgACgC6AEgAEHcAWogAEEgaiAAQRxqIABBGGogAEHwAWoQ7gUNACADEFMaDAELCwJAIABB3AFqEAxFDQAgAC0AF0UNACAAKAIcIgMgAEEgamtBnwFKDQAgACADQQRqNgIcIAMgACgCGDYCAAsgACACIAAoAswBIAQQhgogACkDACEGIAUgACkDCDcDCCAFIAY3AwAgAEHcAWogAEEgaiAAKAIcIAQQXyAAQfwCaiAAQfgCahAtBEAgBCAEKAIAQQJyNgIACyAAKAL8AiEHIAEQChogAEHcAWoQChogAEGAA2okACAHC7oDAQF/IwBB8AJrIgAkACAAIAI2AugCIAAgATYC7AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahDvBSAAQcABahAmIgEgARAnEB4gACABQQAQICICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGA0ACQCAAQewCaiAAQegCahAtDQAgACgCvAEgARAMIAJqRgRAIAEQDCEDIAEgARAMQQF0EB4gASABECcQHiAAIAMgAUEAECAiAmo2ArwBCyAAQewCaiIDEEggAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ7gUNACADEFMaDAELCwJAIABBzAFqEAxFDQAgAC0AB0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArwBIAQQhwo5AwAgAEHMAWogAEEQaiAAKAIMIAQQXyAAQewCaiAAQegCahAtBEAgBCAEKAIAQQJyNgIACyAAKALsAiEGIAEQChogAEHMAWoQChogAEHwAmokACAGC7oDAQF/IwBB8AJrIgAkACAAIAI2AugCIAAgATYC7AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahDvBSAAQcABahAmIgEgARAnEB4gACABQQAQICICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGA0ACQCAAQewCaiAAQegCahAtDQAgACgCvAEgARAMIAJqRgRAIAEQDCEDIAEgARAMQQF0EB4gASABECcQHiAAIAMgAUEAECAiAmo2ArwBCyAAQewCaiIDEEggAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ7gUNACADEFMaDAELCwJAIABBzAFqEAxFDQAgAC0AB0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArwBIAQQiAo4AgAgAEHMAWogAEEQaiAAKAIMIAQQXyAAQewCaiAAQegCahAtBEAgBCAEKAIAQQJyNgIACyAAKALsAiEGIAEQChogAEHMAWoQChogAEHwAmokACAGC5sDAQN/IwBB0AJrIgAkACAAIAI2AsgCIAAgATYCzAIgAxDGASEGIAMgAEHQAWoQwAMhByAAQcQBaiADIABBxAJqEL8DIABBuAFqECYiASABECcQHiAAIAFBABAgIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqEC0NACAAKAK0ASABEAwgAmpGBEAgARAMIQMgASABEAxBAXQQHiABIAEQJxAeIAAgAyABQQAQICICajYCtAELIABBzAJqIgMQSCAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxDvAg0AIAMQUxoMAQsLAkAgAEHEAWoQDEUNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCKCjcDACAAQcQBaiAAQRBqIAAoAgwgBBBfIABBzAJqIABByAJqEC0EQCAEIAQoAgBBAnI2AgALIAAoAswCIQggARAKGiAAQcQBahAKGiAAQdACaiQAIAgLmwMBA38jAEHQAmsiACQAIAAgAjYCyAIgACABNgLMAiADEMYBIQYgAyAAQdABahDAAyEHIABBxAFqIAMgAEHEAmoQvwMgAEG4AWoQJiIBIAEQJxAeIAAgAUEAECAiAjYCtAEgACAAQRBqNgIMIABBADYCCANAAkAgAEHMAmogAEHIAmoQLQ0AIAAoArQBIAEQDCACakYEQCABEAwhAyABIAEQDEEBdBAeIAEgARAnEB4gACADIAFBABAgIgJqNgK0AQsgAEHMAmoiAxBIIAYgAiAAQbQBaiAAQQhqIAAoAsQCIABBxAFqIABBEGogAEEMaiAHEO8CDQAgAxBTGgwBCwsCQCAAQcQBahAMRQ0AIAAoAgwiAyAAQRBqa0GfAUoNACAAIANBBGo2AgwgAyAAKAIINgIACyAFIAIgACgCtAEgBCAGEI0KOwEAIABBxAFqIABBEGogACgCDCAEEF8gAEHMAmogAEHIAmoQLQRAIAQgBCgCAEECcjYCAAsgACgCzAIhCCABEAoaIABBxAFqEAoaIABB0AJqJAAgCAubAwEDfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQxgEhBiADIABB0AFqEMADIQcgAEHEAWogAyAAQcQCahC/AyAAQbgBahAmIgEgARAnEB4gACABQQAQICICNgK0ASAAIABBEGo2AgwgAEEANgIIA0ACQCAAQcwCaiAAQcgCahAtDQAgACgCtAEgARAMIAJqRgRAIAEQDCEDIAEgARAMQQF0EB4gASABECcQHiAAIAMgAUEAECAiAmo2ArQBCyAAQcwCaiIDEEggBiACIABBtAFqIABBCGogACgCxAIgAEHEAWogAEEQaiAAQQxqIAcQ7wINACADEFMaDAELCwJAIABBxAFqEAxFDQAgACgCDCIDIABBEGprQZ8BSg0AIAAgA0EEajYCDCADIAAoAgg2AgALIAUgAiAAKAK0ASAEIAYQjgo3AwAgAEHEAWogAEEQaiAAKAIMIAQQXyAAQcwCaiAAQcgCahAtBEAgBCAEKAIAQQJyNgIACyAAKALMAiEIIAEQChogAEHEAWoQChogAEHQAmokACAIC5sDAQN/IwBB0AJrIgAkACAAIAI2AsgCIAAgATYCzAIgAxDGASEGIAMgAEHQAWoQwAMhByAAQcQBaiADIABBxAJqEL8DIABBuAFqECYiASABECcQHiAAIAFBABAgIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqEC0NACAAKAK0ASABEAwgAmpGBEAgARAMIQMgASABEAxBAXQQHiABIAEQJxAeIAAgAyABQQAQICICajYCtAELIABBzAJqIgMQSCAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxDvAg0AIAMQUxoMAQsLAkAgAEHEAWoQDEUNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCPCjYCACAAQcQBaiAAQRBqIAAoAgwgBBBfIABB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IApBEGpB09IAEA4iEiAKQQRqQdPSABAOIhMQsAEgExAKGiASEAoaIBEQChogDxAKGiAJEAoaIAYQERogABARGiAHEAoaIA4QChogDRAKGiAMEAoaIBAQChogCkGgAmokACAIEBEaIAQQChogAxAKGiACEAoaIAEQChogC0HQAGokAEEAC8ADAQp/IwBBQGoiBCQAIARBNGogARAOIQcgBCACNgIEIARBCGogARAOIQIgBCADNgIUQRgQGCIBQbjgADYCACABIAQoAgQ2AgQgASACKAIINgIQIAEgAikCADcCCCACQgA3AgAgAkEANgIIIAEgAzYCFCAEIAE2AigjAEGwAWsiASQAIAFCADcCmAEgAUIANwKgASABQgA3AKUBIAFCADcCkAEgAUGg1gA2AowBIAFBjAFqIgMgAUGAAWogBxAQIgUQxwYgBRAKGiADEIsCQugHfxDGBiABQQA2AnggAUIANwNwIAMgAUHwAGoiBRCmCyABQUBrIARBGGoiCRA9IQhBIBAYIgZB5NcANgIAIAZBCGogCBA9GiABIAY2AmggAEGxAiAFIAFB2ABqIgBBASABQTRqQdPSABAOIgYgAUEoakHT0gAQDiIKIAFBHGpB09IAEA4iCyABQRBqQdPSABAOIgwgAUEEakHT0gAQDiINELABIA0QChogDBAKGiALEAoaIAoQChogBhAKGiAAEBEaIAgQERogBRAKGiADEMICGiABQbABaiQAIAkQERogAhAKGiAHEAoaIARBQGskAEEAC/0EAQp/IwBB0ABrIggkACAIQcQAaiABEA4hDCAIQThqIgkgAiADpxBRIAggBDYCDCAIQRBqIAEQDiEKIAggBTYCHEEYEBgiAUGU4AA2AgAgASAIKAIMNgIEIAEgCigCCDYCECABIAopAgA3AgggCkIANwIAIApBADYCCCABIAU2AhQgCCABNgIwIAhBIGohDSMAQcABayIGJAAgBkIANwKoASAGQgA3ArABIAZCADcAtQEgBkIANwKgASAGQaDWADYCnAEgBkGcAWoiByAGQZABaiAMEBAiARDHBiABEAoaIAkoAgQgCS0ACyIBIAHAQQBIGwRAIAYgCSgCCDYCiAEgBiAJKQIANwOAASAJQgA3AgAgCUEANgIIIAZBgAFqIgshAiAHKAIERQRAIAdBKBAYIgE2AgQgARDDBAsgB0EUaiIBIAIQGyAHKAIYIQUgBygCBCIEIAcoAhQgASAHLQAfIgLAQQBIIgEbNgIgIAQgBSACIAEbNgIcIAsQChoLIAZBnAFqIg4QiwJC6Ad/EMYGIAZBADYCeCAGQgA3A3AgDiAGQfAAaiIPEKYLIAZBQGsgDRA9IQdBIBAYIgFBwNcANgIAIAFBCGogBxA9GiAGIAE2AmggAEGvAiAPIAZB2ABqIgtBASAGQTRqQdPSABAOIgUgBkEoakHT0gAQDiIEIAZBHGpB09IAEA4iAiAGQRBqQdPSABAOIgEgBkEEakHT0gAQDiIAELABIAAQChogARAKGiACEAoaIAQQChogBRAKGiALEBEaIAcQERogDxAKGiAOEMICGiAGQcABaiQAIA0QERogChAKGiAJEAoaIAwQChogCEHQAGokAEEAC/EDAQd/IwBBMGsiCSQAIAlBJGogARAOIgshBSAJQRhqIAIQDiEGIAlBDGogAxAOIQcjAEEQayIIJAAgCCAENgIMIwBBEGsiBCQAIwBBEGsiAyQAQTgQGCECIAMgAEGoBGoiCkEEaiIBNgIIIAMgAjYCBCACIAUoAgg2AhggAiAFKQIANwIQIAVCADcCACAFQQA2AgggAiAGKAIINgIkIAIgBikCADcCHCAGQgA3AgAgBkEANgIIIAIgBygCCDYCMCACIAcpAgA3AiggB0IANwIAIAdBADYCCCACIAgoAgw2AjQgA0EBOgAMIAMoAgRBEGohBQJAIAooAgQiAkUEQCABIQAMAQsDQCAFIAIiAEEQaiICELEGBEAgACEBIAAoAgAiAg0BDAILIAIgBRCxBkUNASAAQQRqIQEgACgCBCICDQALCyADIAA2AgAgBCABKAIAIgIEf0EABSAKIAMoAgAgASADKAIEEP8DIAMoAgQhAiADQQA2AgRBAQs6AAwgBCACNgIIIAMoAgQhACADQQA2AgQgAARAIAMtAAwEQCAAQRBqELoGCyAABEAgABALCwsgA0EQaiQAIAggBCgCCDYCBCAIIAQtAAw6AAggBEEQaiQAIAhBEGokACAHEAoaIAYQChogCxAKGiAJQTBqJABBAAvjAQICfwF+IwBBIGsiAyQAIANBADYCHCADQgA3AhQgA0EUaiACEP0BA38gAiAERgR/IAMgAygCFDYCCCADKQIYIQUgA0EANgIcIAMgBTcCDCADQgA3AhQjAEEQayIBJAAgASADQQhqIgIoAgA2AgQgASACKAIENgIIIAEgAigCCDYCDCACQQA2AgggAkIANwIAIABByANqIAFBBGoiBBC4BSAAQQE6AOADIAQQQCABQRBqJAAgAhBAIANBFGoQQCADQSBqJABBAAUgA0EUaiABIARBAnRqEIIDIARBAWohBAwBCwsLRwEBfyMAQSBrIgMkACADIAI2AhAgAyABNgIMIANB8N8ANgIIIAMgA0EIaiIBNgIYIABB4A1qIAEQzAEgARARGiADQSBqJAALCwBBkKwCIAA2AgALswMBB38jAEEgayIDJAAgA0HM3wA2AgggAyADQQhqIgQ2AhgjAEEgayIFJAAgBUEIaiAEEIMDIQAjAEEQayICJAACQCAAQZCtAkYNAEGgrQIoAgAhASAAIAAoAhAiBkYEQCABQZCtAkYEQCAAIAIgACgCACgCDBEAACAAKAIQIgEgASgCACgCEBEBACAAQQA2AhBBoK0CKAIAIgEgACABKAIAKAIMEQAAQaCtAigCACIBIAEoAgAoAhARAQBBoK0CQQA2AgAgACAANgIQIAJBkK0CIAIoAgAoAgwRAAAgAiACKAIAKAIQEQEAQaCtAkGQrQI2AgAMAgsgAEGQrQIgACgCACgCDBEAACAAKAIQIgEgASgCACgCEBEBACAAQaCtAigCADYCEEGgrQJBkK0CNgIADAELIAFBkK0CRgRAQZCtAiAAQZCtAigCACgCDBEAAEGgrQIoAgAiASABKAIAKAIQEQEAQaCtAiAAKAIQNgIAIAAgADYCEAwBCyAAIAE2AhBBoK0CIAY2AgALIAJBEGokACAAEBEaIAVBIGokAEGorQJBADYCACAEEBEaIANBIGokAAs/AQF/IAAoAgAiAiAAKAIERgRAQbECDwsgASACKAIIIAJBCGogAiwAE0EASBs2AgAgACAAKAIAKAIANgIAQQALWgEEfyMAQSBrIgIkAEEIEBghAyAAIAJBFGogARAOIgQQlQsoAgghBSAAIAJBCGogARAOIgAQlQsaIANBADYCBCADIAU2AgAgABAKGiAEEAoaIAJBIGokACADC+YEAQh/IwBBIGsiByQAIAdBFGogARAOIQQgB0EIaiACEA4hBiMAQZACayIDJABBARAaBEAgA0GEAWoQFSEKIANBATYCgAEgCkGn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AhCYCyAFQYgEahCOAiABECoCQCAGLQAoRQRAIAAgAxDOASEBIAUgBSkD+AI3A5gDIAUgBSkD8AI3A5ADIAVB6AFqIAkQXSEAIAVBAToA4AEgBSAFKQOYAzcDSCAFQQA2AsgBIAUgBSkDkAM3A0AgASAFQUBrIAAgBUHAAWogBUHwAmoQwwIgBUHIAWoQSiAAECogBUGQA2ogARDNASABELIBDAELIAUgBhC1ASIAKQMINwPwAiAFIAApAxA3A/gCCyAFQYAEaiADEM4BIQEgBSAFKQP4AjcDmAMgBSAFKQPwAjcDkAMgBUGoAWogAhBdIQAgBUEAOgCgASAFQQE6AJgBIAUgBSkDmAM3AzggBSAErTcDiAEgBSAFKQOQAzcDMCABIAVBMGogACAFQYABakEAEMMCIAVBiAFqEEogABAqIAVBkANqIAEQzQEgARCyASAGEMcECyAFQfAEaiQAIAIQChogCRAKGiAHEAoaIAhBMGokAAsJACAAIAE2AjgLCQAgACABNgJICwkAIAAgATYCQAvjAwEFfyAABEAgAEHgDWoQERogAEHIDWoQERogAEG0DWoQzgQgAEHYCWoiAS0A0AMEQCABENEECyAAQeAEahC+BiAAQcgEaiIDKAIIIQEDQCABBEAgASgCACEEIAFBCGoQwgYgARALIAQhAQwBCwsgAxDQAyAAQbQEaiIDKAIIIQEDQCABBEAgASgCACEFIAFBCGoQuwYgARALIAUhAQwBCwsgAxDQAyAAQagEaiAAKAKsBBDPAyAAQZgEahAKGiAAQYwEahBAIABB/ANqIAAoAoAEEJYGIABB6ANqEM4EIABByANqEEAgAEGwA2oQERogAEGYA2oQERogAEGIA2oQChogAEH4AmoQChogAEHgAmoQERogAEHIAmoQERogAEGwAmoQERogAEGYAmoQERogAEGAAmoQERogAEHoAWoQERogAEHQAWoQERogAEG4AWoQERogAEGgAWoQERogAEGIAWoQERogAEHYAGoQpgYgAEHMAGoQpwYgACgCMCIBBEAgASABKAIEIgJBAWs2AgQgAkUEQCABIAEoAgAoAggRAQACQCABQQhqIgIoAgAEQCACENsJQX9HDQELIAEgASgCACgCEBEBAAsLCyAAQSBqEAoaIABBFGoQChogABAKGgsgABALC7YMAQ9/IwBBMGsiBSQAIAVBADYCLCAFQgA3AiQgBUEkaiACEP0BA38gAiADRgR/QfgNEBghASAFQRhqIAAQDiEIIAVBCGogBUEkaiIOEPkBIQYjAEGQAWsiAiQAIAJBhAFqIAgQECEJAkAgBi0ADARAIAJB+ABqIgBBADYCCCAAQgA3AgAgBigCBCIDIAYoAgAiBEcEQCADIARrQQxtIgNB1qrVqgFPBEAQAQALIAAgAxD8CCIENgIEIAAgBDYCACAAIAQgA0EMbGo2AgggACAGKAIAIAYoAgQQ9wgLDAELIAJBADYCgAEgAkIANwJ4CyMAQRBrIgokACAKQQRqQdPSABAOIQsjAEEQayIMJAAgAUIANwMAIAFCADcABSABQRBqQQBBJhAdGiABQdwAaiIAQgA3AgAgAUEANgJUIAEgAUHMAGoiAzYCUCABIAM2AkwgAUEKNgJIIAFCuJeAgID3AjcDQCABQQE6ADwgAUEPNgI4IAFBADYCyAEgAUEANgKwASABQQA2ApgBIAFBADoAZCABIAA2AlggAUIANwNoIAFCADcDcCABQgA3A3ggAUIANwOAASABQQA2AvACIAFBADYC2AIgAUEANgLAAiABQQA2AqgCIAEgAUGAAmo2ApACIAFB3NwANgKAAiABIAFB6AFqNgL4ASABQbjcADYC6AEgASABQdABajYC4AEgAUGQ3AA2AtABIAFCADcDiAMgAUEANgKQAyABQQA2AqgDIAFBADYCwAMgAUEANgLQAyABQgA3A9gDIAFCADcDyAMgAUEAOgDgAyABQgA3AP0CIAFCADcD+AIgDEEEaiALEBAiDyEDIwBBkAFrIgQkACABIgAgAxClAgJAIAMoAgQgAy0ACyIBIAHAQQBIIgEbIgdFDQAgByADKAIAIAMgARtqQQFrLQAAQS9GDQAjAEEQayIQJABBkMoAEOIBIQEgBEEEaiIDIAEgACgCBCAALQALIgcgB8BBAEgbIgdqEIUIIg0oAgAgDSANLAALQQBIGyAAKAIAIAAgACwAC0EASBsgBxBbIAdqQZDKACABEFsgAWpBADoAACAQQRBqJAAgACADEBsgAxAKGgtBARAaBEAgBEEIahAVIREgBEEBNgIEIBFBgcwAEA0gABATGiAEQQRqEBkLIARBkAFqJAAgDxAKGiAMQRBqJAAgCxAKGiAAQQE6AIQDIABBiANqIAkQGyAAQcgDaiACQfgAaiIBELgFIApBEGokACABEEAgCRAKGiAAQgA3A/ADIABCADcD6AMgAEGABGoiAUIANwMAIABBgICA/AM2AvgDIABCADcDkAQgAEKsAjcDiAQgACABNgL8AyAAQZgEaiAIEBAhASAAQgA3ArQEIAAgAEGsBGo2AqgEIABCADcCrAQgAEIANwK8BCAAQgA3A8gEIABBgICA/AM2AsQEIABCADcD0AQgAEGAgID8AzYC2AQgAEHgBGogAkHsAGogARAQIgMQ0gQhASADEAoaIABCADcCtA0gAEEAOgCwDSAAQagNakEAOgAAIABBADoA2AkgAEG8DWpCADcCACAAQfANakEANgIAIABB2A1qQQA2AgAgAEHEDWpBgICA/AM2AgAgAiAANgJUIAJBgN0ANgJQIAIgAkHQAGoiAzYCYCAAQZgDaiADEMwBIAMQERogAiAANgI8IAJBpN0ANgI4IAIgAkE4aiIDNgJIIABBsANqIAMQzAEgAxARGiACIAA2AiQgAkHI3QA2AiAgAiACQSBqIgM2AjAgAEGIAWogAxDMASADEBEaIAIgADYCDCACQezdADYCCCACIAJBCGoiAzYCGCAAQZgCaiADEMwBIAMQERogACAGLQAMIgM6ALANIAMEQCACIAE2AgQgAEHYCWogAkEEahCZCyABQZwCaiEEIAEoApgCIQMDQCADIARGBEAgAUEBOgCkAgUgA0EBOgDkAyADENQBIQMMAQsLIABBowpqQYACOwAAIABBgwpqQQA6AAAgAEGACmpBgAI7AQAgAEHgCWpBADoAAAsgAkGQAWokACAGLQAMBEAgBhBACyAIEAoaIA4QQCAFQTBqJAAgAAUgBUEkaiABIANBAnRqEIIDIANBAWohAwwBCwsLxwEBA38jAEHQAGsiBSQAIAUgASgCCDYCSCAFIAEpAgA3A0AgAUIANwIAIAFBADYCCCAFIAIoAgA2AjQgBSACKAIENgI4IAUgAigCCDYCPCACQQA2AgggAkIANwIAIAMoAgAhASAFQRBqIARBCGoQmgshByAFKAJAIAVBQGsiBiAFLQBLIgPAQQBIIgQbIAUoAkQgAyAEG60gBUE0aiIDIAEgBUEIaiAAKAIIIAAoAgQRSwAgBxBKIAMQWCAGEAoaIAVB0ABqJAALFQAgAUHk2wA2AgAgASAAKQIENwIECwsAIABB5NsAEKcBCxUAIAFBwNsANgIAIAEgACkCBDcCBAsLACAAQcDbABCnAQsHACABEMcEC1kBAX8jAEEwayIDJAAgAAJ/IAFFBEAgA0EANgIoIANBGGoMAQsgAyACNgIIIAMgATYCBCADQeTbADYCACADIAM2AhAgAwsiARCdCyABEBEaIANBMGokAEEAC0UBAX8jAEEgayIDJAAgAyACNgIQIAMgATYCDCADQcDbADYCCCADIANBCGoiATYCGCAAIAEQmAYgARARGiADQSBqJABBAAtdAQF/IAAoAgAiAyAAKAIERgRAQbECDwsgASADKAIQIANBEGogAywAG0EASBs2AgAgAiAAKAIAIgEoAhQgAS0AGyIBIAHAQQBIG603AwAgACAAKAIAENQBNgIAQQALagEDfyMAQRBrIgQkACAAQZgCaiEDAkAgAUUEQCADKAIAIQEMAQsgBEEEaiIFIAEgAqcQUSAFIAMoAgQgA0EEahCpCCEBIAUQChoLQQgQGCIDIABBnAJqNgIEIAMgATYCACAEQRBqJAAgAwubAQEDfyMAQRBrIgMkACADQQRqIgQgASACpxBRAkACfyAAQZgCaiIFQQRqIQEDf0EAIAEoAgAiAUUNARogBCABQRBqIgAQHA0AIAAgBBAcBH8gAUEEaiEBDAEFQQELCwtFBEBBACEBDAELQQgQGCEBIAUgA0EEahDVASEAIAFBADYCBCABIAA2AgALIANBBGoQChogA0EQaiQAIAELLgECfyMAQRBrIgMkACADQQRqIgQgASACpxBRIAAgBBDNBiAEEAoaIANBEGokAAsuAQJ/IwBBEGsiAyQAIANBBGoiBCABIAKnEFEgACAEENMDIAQQChogA0EQaiQAC5IDAQZ/IwBB4ABrIgQkAAJ/QbQCIAAoAgRFDQAaAkAgAigCACACKAIERg0AIAAoAgAhBSAEIAFBmNsAIAEbIgEpAwg3AxggBCABKQMANwMQIARByABqIAUgBEEQaiACEMkDIAQtAFhFDQAgACgCBCEBIARBQGsiBSAEKQNQNwMAIAQgBCkDSDcDOCAEQSBqIAIoAgRBGGsQlgIhACAEIAUpAwA3AwggBCAEKQM4NwMAIwBBkAFrIgIkAAJAIAEtADgNACABKAIAIAQgABCKAw0AIAJBAzoAiAEgAiADNwNwIAJB8ABqIQUCQCAALQAQQQFGBEAgAiAAKAIINgJgIAIgACkCADcDWCAAQgA3AgAgAEEANgIIIAJBOGogBRB2IQcgASAEIAJB2ABqIgEgAkEwakEAEOIEIAcQRiABEAoaDAELIAAQ6AEpAwAhAyACQRBqIAUQdiEIIAEgBCADIAJBCGpBABDhBCAIEEYLIAUQRgsgAkGQAWokACAAECpBAAwBC0G1AgshCSAEQeAAaiQAIAkL0QEBBH8jAEHgAGsiAyQAAn9BtAIgACgCBEUNABoCQCACKAIAIAIoAgRGDQAgACgCACEEIAMgAUGY2wAgARsiASkDCDcDGCADIAEpAwA3AxAgA0HIAGogBCADQRBqIAIQyQMgAy0AWEUNACAAKAIEIQUgA0FAayIEIAMpA1A3AwAgAyADKQNINwM4IANBIGogAigCBEEYaxCWAiEAIAMgBCkDADcDCCADIAMpAzg3AwAgBSADIAAQ1QMgABAqQQAMAQtBtQILIQYgA0HgAGokACAGC/gBAgR/AX4jAEHwAGsiBCQAAkAgACgCBEUEQEG0AiEFDAELQbUCIQUgAigCBCIGIAIoAgBGDQAgBkEIay0AAEEBRg0AIAAoAgAhBSAEIAFBmNsAIAEbIgEpAwg3AxggBCABKQMANwMQIARB2ABqIAUgBEEQaiACEMkDIAQtAGhFBEBBtQIhBQwBCyAAKAIEIQcgBCAEKQNgNwNQIAQgBCkDWDcDSCACKAIEQRhrEOgBKQMAIQggBEEoaiADQQhqEJsGIQEgBCAEKQNQNwMIIAQgBCkDSDcDAEEAIQUgByAEIAggBEEgahDeBiABEEoLIARB8ABqJAAgBQvsAQEEfyMAQZABayIEJAACf0G0AiAAKAIERQ0AGgJAIAIoAgAgAigCBEYNACAAKAIAIQUgBCABQZjbACABGyIBKQMINwMgIAQgASkDADcDGCAEQfgAaiAFIARBGGogAhDJAyAELQCIAUUNACAAKAIEIQYgBCAEKQOAATcDcCAEIAQpA3g3A2ggBEHQAGogAigCBEEYaxCWAiEAIARBMGogA0EIahCbBiEDIAQgBCkDcDcDECAEIAQpA2g3AwggBiAEQQhqIAAgBEEoakEAEMMCIAMQSiAAECpBAAwBC0G1AgshByAEQZABaiQAIAcLPAEDfyMAQTBrIgIkACAAKAIEIgEEfyACQQ9qIAEQzQEgAEEEakEAEJkGQQAFQbQCCyEDIAJBMGokACADC6kBAQN/IwBB0ABrIgMkAEGzAiEBIAAoAgRFBEAgA0EIaiAAKAIAEM4BIQFBwAAQGCICIAEpAwA3AwAgAiABKQMYNwMYIAIgASkDEDcDECACIAEpAwg3AwggAkEgaiABQSBqECUaIAJBLGogAUEsahAlGiACIAEtADg6ADggA0EANgJMIABBBGogAhCZBiADQcwAahCgCyABELIBQQAhAQsgA0HQAGokACABC/oFAQR/IwBBkAJrIgQkACABQZjbACABGyEBAkAgAigCACACKAIERgRAIAAoAgAhACAEIAEpAwg3AxAgBCABKQMANwMIIARB8ABqIgEgACAEQQhqEOEDIAQtAJgBBH8gAyABEOADELAGQQAFQbUCCyECIARB+ABqEN8DDAELIAAoAgAhBSAEIAEpAwg3A1AgBCABKQMANwNIIARB+AFqIAUgBEHIAGogAhDJAyAELQCIAkUEQEG1AiECDAELIAAoAgAhBiACKAIEIQUgBEFAayAEKQOAAjcDACAEIAQpA/gBNwM4IwBBgAFrIgEkACABIAQpA0A3AzggASAEKQM4NwMwIAFBGGogBUEYaxCWAiEFIAEgASkDODcDECABIAEpAzA3AwggAUFAayIHIAYgAUEIaiAFEJQCIAUQKgJAAkAgAS0AeEUNACAHEL4CIgUtAChFDQBBASEGIAUtACBBAUcNACAEIAUpAxg3A+gBIAQgBSkDEDcD4AEMAQtBACEGIARBADoA4AELIAQgBjoA8AEgAUHIAGoQjgIgAUGAAWokACAELQDwAQRAIAAoAgAhACAEIAQpA+gBNwMwIAQgBCkD4AE3AyggBEHwAGoiASAAIARBKGoQ4QMgAyABEOADELAGIARB+ABqEN8DQQAhAgwBCyAAKAIAIQEgBCAEKQOAAjcDuAEgBCAEKQP4ATcDsAEgBEHYAGogAigCBEEYaxCWAiEAIAQgBCkDuAE3AyAgBCAEKQOwATcDGCAEQfAAaiICIAEgBEEYaiAAEJQCIARBsAFqIAIQvgIQmgYhASAEQfgAahCOAiAAECogAS0AKAR/IAEtACAEQBASAAsgAUEIaiECIwBBEGsiACQAAkAgAy0AGEUEQCADIAIQ1wYMAQsgACACNgIMIAAgAzYCCCMAQSBrIgIkACAAKAIIIAJBCGogACgCDBDtAyIDEK8GIAMQOyACQSBqJAALIABBEGokAEEABUG1AgshAiABEMcECyAEQZACaiQAIAILDgAgACgCACABIAIQmwsLEwAgAARAIABBBGoQoAsLIAAQCwt5AQF/IAAoAgAiBCAAKAIERgRAQbECDwsCQAJAIARFDQAgBC0AEEEBRw0AIAEgBCgCACAEIAQsAAtBAEgbNgIAIAIgBCgCBCAELQALIgEgAcBBAEgbrTcDAAwBCyADIAQQ6AEpAwA3AwALIAAgACgCAEEYajYCAEEACxQBAX9BCBAYIgEgACkCADcCACABCzIBAX8jAEEgayICJAAgAkEAOgAYIAIgATcDCCAAIAJBCGoiABDqASAAECogAkEgaiQAC2ABAn8jAEEwayIDJAAgA0EIaiIEIAEgAqcQUSADIAMoAhA2AiAgA0EANgIQIANBAToAKCADIAMpAwg3AxggA0IANwMIIAAgA0EYaiIAEOoBIAAQKiAEEAoaIANBMGokAAsPACAABEAgABBYCyAAEAsLCwBBDBAYIAAQxwcLGAEBf0EMEBgiAEEANgIIIABCADcCACAAC0kBAX8gAC0ACEUEQEGyAg8LIAAtAAhBAUcEQBASAAsgACgCACICIAAoAgRGBEBBsQIPCyABIAI2AgAgACAAKAIAQSBqNgIAQQALfgEBfyAALQAIQQFHBH8gAC0ACARAEBIACyAAKAIAIgQgACgCBEYEQEGxAg8LIAEgBCgCACAEIAQsAAtBAEgbNgIAIAIgACgCACIBKAIEIAEtAAsiAiACwEEASButNwMAIAMgAUEQajYCACAAIAAoAgBBMGo2AgBBAAVBsgILC1UBAX8CQCAARQ0AAn8CQAJAIAAtABhBAWsOAgABAwtBDBAYIgEgACgCACkCADcCAEEADAELQQwQGCIBIAAoAgApAgA3AgBBAQshACABIAA6AAgLIAELFQAgAEUEQEEADwtBACAAIAAtABgbCwoAIAAtABhBAkYLCgAgAC0AGEEBRgsIACAALQAYRQtYAQV/IwBBoAFrIgEkAEEBEBoEQCABQRhqEBUhBCABQQE2AhQgBEGK0AAQDSEFIAFBCGoiAyAAQQAQzQQgBSADEBMaIAMQChogAUEUahAZCyABQaABaiQACxAAIAAEQCAAELMBCyAAEAsLHwEBf0EgEBgiAEEAOgAYIABBADoAECAAQgA3AwAgAAsnAQF/QbICIQIgAC0AEEEFRgR/IAEgABDpASkDCDcDAEEABUGyAgsLTQEBf0GyAiEDIAAtABBBBEYEfyABIAAQrAYiACgCACAAIAAsAAtBAEgbNgIAIAIgACgCBCAALQALIgAgAMBBAEgbrTcDAEEABUGyAgsLJwEBf0GyAiECIAAtABBBA0YEfyABIAAQrQYtAAA6AABBAAVBsgILCycBAX9BsgIhAiAALQAQQQJGBH8gASAAEK4GKwMAOQMAQQAFQbICCwsmAQF/QbICIQIgAC0AEEEBRgR/IAEgABByKQMANwMAQQAFQbICCwskAQF/QbICIQIgAC0AEAR/QbICBSABIAAQ6AEpAwA3AwBBAAsLCgAgAC0AEEEFRgsKACAALQAQQQZGCwoAIAAtABBBBEYLCgAgAC0AEEEDRgsKACAALQAQQQJGCwoAIAAtABBBAUYLCAAgAC0AEEULKQEBfyMAQRBrIgIkACACIAE3AwggAiABNwMAIAAgAhDkBiACQRBqJAALCwAgAEG02QAQ6AoLLgECfyMAQRBrIgMkACADQQRqIgQgASACpxBRIAAgBBDlBiAEEAoaIANBEGokAAslAQF/IwBBEGsiAiQAIAIgAToADyAAIAJBD2oQ5gYgAkEQaiQACyUBAX8jAEEQayICJAAgAiABOQMIIAAgAkEIahDnBiACQRBqJAALJQEBfyMAQRBrIgIkACACIAE3AwggACACQQhqEOgGIAJBEGokAAslAQF/IwBBEGsiAiQAIAIgATcDCCAAIAJBCGoQ6QYgAkEQaiQACwkAIABBARCmCQthAQJ/IwBBEGsiAiQAAkAgAC0AGEEBRgRAIAAgASgCADYCAAwBCyACIAE2AgwgAiAANgIIIAIoAgwhAyACKAIIIgAQSiADKAIAIQEgAEEBOgAYIAAgATYCAAsgAkEQaiQACwkAIABBABCmCQuTAQEHfyMAQSBrIgIkACACQQA6ABggAkIANwMIIAJBCGohAyMAQRBrIgEkAAJAIABBCGoiBC0AGEUEQCAEIAMQxgQMAQsgASADNgIMIAEgBDYCCCABKAIMIQYgASgCCCIHEEogByAGEHNBADoAGAsgAUEQaiQAIAMQOyAABEBBACAEIAAtACAbIQULIAJBIGokACAFCxgAIABFBEBBAA8LQQAgAEEIaiAALQAgGwsdAQF/IAAtACBBAUYEfyAAELUBKAIAQQFGBUEACwsbAQF/IAAtACBBAUYEfyAAELUBKAIABUEBC0ULCAAgAC0AIEULEgAgAARAIABBCGoQSgsgABALCxgBAX9BKBAYIgFBCGogAEEIahCbBhogAQsfAQF/QSgQGCIAQgA3AwggAEEAOgAgIABBADoAGCAACwkAQZCtAhARGguHAgEHfyMAQbABayIDJAAgACgCBCEAAkAgAS8BACIBBEBBAhAaBEAgA0EoahAVIQYgA0ECNgIkIAZBq8wAEA0gARBoGiADQSRqEBkLIAFB5QBGDQEgABCQAgwBC0EBEBoEQCADQShqEBUhByADQQE2AiQgB0HOzQAQDSEIIANBGGoiASACKAIEKAIgEA4aIAggARATQb/NABANIQkgA0EMaiIEIAIoAgQoAiwQDhogCSAEEBMaIAQQChogARAKGiADQSRqEBkLIABBATsBNCAAKALwAkUNACADQSRqIgEgAigCBCICKAI0IAIoAjAQUSAAQeACaiABEKgDIAEQChoLIANBsAFqJAALFQAgAUH82gA2AgAgASAAKAIENgIECx0BAX9BCBAYIgFB/NoANgIAIAEgACgCBDYCBCABC/YBAQV/IwBBoAFrIgMkACAAKAIEIQACQCABLwEAIgEEQEECEBoEQCADQRhqEBUhBSADQQI2AhQgBUGrzAAQDSABEGgaIANBFGoQGQsgAUHlAEYNASAAEJACDAELIAAoArABBEAgAEGgAWogAhCoAwtBARAaBEAgA0EYahAVIQYgA0EBNgIUIAZBzs0AEA0hByADQQhqIgEgAigCBCgCNBAOGiAHIAEQExogARAKGiADQRRqEBkLIABCADcDeCAAQQE7ATQgACgCwAJFDQAgA0EUaiIBIABBsAJqIAIQygMgAEH4AmogARAbIAEQChoLIANBoAFqJAALFQAgAUHY2gA2AgAgASAAKAIENgIECx0BAX9BCBAYIgFB2NoANgIAIAEgACgCBDYCBCABCwkAIAAQnQYQCwsJACAAEJ4GEAsLCQAgABCfBhALCwkAIAAQoAYQCwsLu+4BiQMAQYAIC9NKAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAAAAAAAAmAAAAJwAAAH0AaW5maW5pdHkARmVicnVhcnkASmFudWFyeQBKdWx5AERpZ2VzdE9ubHkAQ291bnRPbmx5AEtleXNPbmx5AEhhc2hLZXkAUm91dGluZ0tleQBVbmlxdWVLZXkAU3luY0tleQBzaXplb2ZfZWx0X2luX3JlcGVhdGVkX2FycmF5AFRodXJzZGF5AFR1ZXNkYXkAV2VkbmVzZGF5AFNhdHVyZGF5AFN1bmRheQBNb25kYXkARnJpZGF5AE1heQAlbS8lZC8leQBDb25uSW5kZXgATmFtZXNwYWNlSW5kZXgALSsgICAwWDB4AC0wWCswWCAwWC0weCsweCAweABfX25leHRfcHJpbWUgb3ZlcmZsb3cATm92AFRodQBUaW1lb3V0AEF1Z3VzdABDUlNZTkNfX1ZBTFVFX1RZUEVfX0xpc3QAQ3JzeW5jX19SYW5nZURvY3NSZXF1ZXN0AGNyc3luYy5SYW5nZURvY3NSZXF1ZXN0AEdhbGFjdHVzX19Fc3RhYmxpc2hSZXF1ZXN0AENyc3luY19fRXN0YWJsaXNoUmVxdWVzdABnYWxhY3R1cy5Fc3RhYmxpc2hSZXF1ZXN0AGNyc3luYy5Fc3RhYmxpc2hSZXF1ZXN0AENyc3luY19fVXBkYXRlUmVxdWVzdABjcnN5bmMuVXBkYXRlUmVxdWVzdABDcnN5bmNfX0RhdGFiYXNlUmVxdWVzdABjcnN5bmMuRGF0YWJhc2VSZXF1ZXN0AEdhbGFjdHVzX19TaGFrZUhhbmRSZXF1ZXN0AGdhbGFjdHVzLlNoYWtlSGFuZFJlcXVlc3QAQ3JzeW5jX19RdWVyeURvY1JlcXVlc3QAY3JzeW5jLlF1ZXJ5RG9jUmVxdWVzdABDcnN5bmNfX1B1dERvY1JlcXVlc3QAY3JzeW5jLlB1dERvY1JlcXVlc3QAQ3JzeW5jX19HZXREb2NSZXF1ZXN0AGNyc3luYy5HZXREb2NSZXF1ZXN0AENyc3luY19fRGVsRG9jUmVxdWVzdABjcnN5bmMuRGVsRG9jUmVxdWVzdABCZXN0AENSU1lOQ19fVVBEQVRFX01FVEhPRF9fTGlzdEluc2VydABTdGFydAByZWNlaXZlZCBlbXB0eSBzbmFwc2hvdABmYWlsIHRvIHJlY3Ygc25hcHNob3QAc2VuZGluZyBzbmFwc2hvdABDb25uZWN0aW9uQ291bnQAU3RyZWFtQ291bnQAIGNyZWF0ZSBjaGVja3BvaW50AEVuZHBvaW50AENyc3luY19fVGlja2V0RXZlbnQAY3JzeW5jLlRpY2tldEV2ZW50AENyc3luY19fUGVybWlzc2lvbkV2ZW50AGNyc3luYy5QZXJtaXNzaW9uRXZlbnQAQ3JzeW5jX19LZWVwYWxpdmVFdmVudABjcnN5bmMuS2VlcGFsaXZlRXZlbnQAQ29udGVudABzaG91bGQgaGF2ZSBvbmx5IHVzZWQgaGFzaGVzIHRoYXQgYXJlIGluIHRoZSBkb2N1bWVudABDcnN5bmNfX0RvY3VtZW50AGNyc3luYy5Eb2N1bWVudABJbnN0YW50AExpbWl0AENSU1lOQ19fVVBEQVRFX01FVEhPRF9fQ291bnRlclNldABDUlNZTkNfX1VQREFURV9NRVRIT0RfX1NldABDUlNZTkNfX1ZBTFVFX1RZUEVfX0RpY3QAIGNvbXBhY3QAT2N0AENSU1lOQ19fVkFMVUVfVFlQRV9fRmxvYXQAU2F0AGdhbGFjdHVzAERvY3VtZW50cwBDbGllbnRzAEdyYW50cwBUaWNrZXRzAENsdXN0ZXJzAE9wdGlvbnMAUGVybXMASXRlbXMAUGF0aHMAZGlmZnMARm9yYmlkcwBMb2FkcwBEb2NzAFRzACVzAEFwcgBtZXNzYWdlLT5iYXNlLmRlc2NyaXB0b3IgPT0gJmNyc3luY19fcmFuZ2VfZG9jc19yZXF1ZXN0X19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmZ2FsYWN0dXNfX2VzdGFibGlzaF9yZXF1ZXN0X19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19lc3RhYmxpc2hfcmVxdWVzdF9fZGVzY3JpcHRvcgBtZXNzYWdlLT5iYXNlLmRlc2NyaXB0b3IgPT0gJmNyc3luY19fdXBkYXRlX3JlcXVlc3RfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZjcnN5bmNfX2RhdGFiYXNlX3JlcXVlc3RfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZnYWxhY3R1c19fc2hha2VfaGFuZF9yZXF1ZXN0X19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19xdWVyeV9kb2NfcmVxdWVzdF9fZGVzY3JpcHRvcgBtZXNzYWdlLT5iYXNlLmRlc2NyaXB0b3IgPT0gJmNyc3luY19fcHV0X2RvY19yZXF1ZXN0X19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19nZXRfZG9jX3JlcXVlc3RfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZjcnN5bmNfX2RlbF9kb2NfcmVxdWVzdF9fZGVzY3JpcHRvcgBtZXNzYWdlLT5iYXNlLmRlc2NyaXB0b3IgPT0gJmNyc3luY19fdGlja2V0X2V2ZW50X19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19wZXJtaXNzaW9uX2V2ZW50X19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19rZWVwYWxpdmVfZXZlbnRfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZnYWxhY3R1c19fZXh0X2hlYWRlcl9fZGVzY3JpcHRvcgBtZXNzYWdlLT5iYXNlLmRlc2NyaXB0b3IgPT0gJmdhbGFjdHVzX19yZW5ld19rZXlfcmVzcG9uc2VfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZjcnN5bmNfX3JhbmdlX2RvY3NfcmVzcG9uc2VfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZnYWxhY3R1c19fZXN0YWJsaXNoX3Jlc3BvbnNlX19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19lc3RhYmxpc2hfcmVzcG9uc2VfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZnYWxhY3R1c19fc2hha2VfaGFuZF9yZXNwb25zZV9fZGVzY3JpcHRvcgBtZXNzYWdlLT5iYXNlLmRlc2NyaXB0b3IgPT0gJmNyc3luY19fcXVlcnlfZG9jX3Jlc3BvbnNlX19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19nZXRfZG9jX3Jlc3BvbnNlX19kZXNjcmlwdG9yAG1lc3NhZ2UtPmJhc2UuZGVzY3JpcHRvciA9PSAmY3JzeW5jX19zeW5jX21lc3NhZ2VfX2Rlc2NyaXB0b3IAbWVzc2FnZS0+YmFzZS5kZXNjcmlwdG9yID09ICZjcnN5bmNfX3NoYWtlaGFuZF9fZGVzY3JpcHRvcgB2ZWN0b3IAQ2x1c3RlcgBwcm90b2J1Zl9jX21lc3NhZ2VfcGFja190b19idWZmZXIAcmVwZWF0ZWRfZmllbGRfcGFja190b19idWZmZXIAcmVxdWlyZWRfZmllbGRfcGFja190b19idWZmZXIAY3JzeW5jX19yYW5nZV9kb2NzX3JlcXVlc3RfX3BhY2tfdG9fYnVmZmVyAGdhbGFjdHVzX19lc3RhYmxpc2hfcmVxdWVzdF9fcGFja190b19idWZmZXIAY3JzeW5jX19lc3RhYmxpc2hfcmVxdWVzdF9fcGFja190b19idWZmZXIAY3JzeW5jX191cGRhdGVfcmVxdWVzdF9fcGFja190b19idWZmZXIAY3JzeW5jX19kYXRhYmFzZV9yZXF1ZXN0X19wYWNrX3RvX2J1ZmZlcgBnYWxhY3R1c19fc2hha2VfaGFuZF9yZXF1ZXN0X19wYWNrX3RvX2J1ZmZlcgBjcnN5bmNfX3F1ZXJ5X2RvY19yZXF1ZXN0X19wYWNrX3RvX2J1ZmZlcgBjcnN5bmNfX3B1dF9kb2NfcmVxdWVzdF9fcGFja190b19idWZmZXIAY3JzeW5jX19nZXRfZG9jX3JlcXVlc3RfX3BhY2tfdG9fYnVmZmVyAGNyc3luY19fZGVsX2RvY19yZXF1ZXN0X19wYWNrX3RvX2J1ZmZlcgBjcnN5bmNfX3RpY2tldF9ldmVudF9fcGFja190b19idWZmZXIAY3JzeW5jX19rZWVwYWxpdmVfZXZlbnRfX3BhY2tfdG9fYnVmZmVyAGdhbGFjdHVzX19leHRfaGVhZGVyX19wYWNrX3RvX2J1ZmZlcgBjcnN5bmNfX3N5bmNfbWVzc2FnZV9fcGFja190b19idWZmZXIAY3JzeW5jX19zaGFrZWhhbmRfX3BhY2tfdG9fYnVmZmVyAGNvbHVtbnMgb3V0IG9mIG9yZGVyAF9mb2xkZXIATGVhZGVyAEdhbGFjdHVzX19FeHRIZWFkZXIAZ2FsYWN0dXMuRXh0SGVhZGVyAE9jdG9iZXIATm92ZW1iZXIAU2VwdGVtYmVyAHBhcnNlX21lbWJlcgBwYXJzZV9wYWNrZWRfcmVwZWF0ZWRfbWVtYmVyAERlY2VtYmVyAExvY2FsQWRkcgBSZW1vdGVBZGRyAGlvc19iYXNlOjpjbGVhcgBNYXIARGlmZlNlcQBtZWRpYV9zZXJ2ZXJfbGlicmFyeS9jcmR0L2RvY3VtZW50LmNwcABtZWRpYV9zZXJ2ZXJfbGlicmFyeS9jcmR0L21lcmtsZV9zZWFyY2hfdHJlZS5jcHAAU2VwAE9wACVJOiVNOiVTICVwAEdhbGFjdHVzX19QZWVySW5mbwBnYWxhY3R1cy5QZWVySW5mbwBTdW4ASnVuAFBlcm1Kc29uAEJpRGlyZWN0aW9uAFRyeSB0byBlc3RhYmxpc2ggY29ubmVjdGlvbgBUcnkgdG8gZXN0YWJsaXNoIG5ld3N5bmMgY29ubmVjdGlvbgBDb2xsZWN0aW9uAENyc3luY19fT3BlcmF0aW9uAGNyc3luYy5PcGVyYXRpb24AQ3JzeW5jX19QZXJtaXNzaW9uAGNyc3luYy5QZXJtaXNzaW9uAFZlcnNpb24ATW9uAHRtcCA9PSBwYXlsb2FkX2xlbgBuYW4ASmFuAFF1b3J1bQBDcnN5bmNfX0tlZXBhbGl2ZUl0ZW0AY3JzeW5jLktlZXBhbGl2ZUl0ZW0AQ3JzeW5jX19JdGVtAGNyc3luYy5JdGVtAEluc2VydEVsZW0ASnVsAFR0bABHYWxhY3R1c19fUGVlclByb3RvY29sAGdhbGFjdHVzLlBlZXJQcm90b2NvbABudWxsAENvbGwAQXByaWwARXhpc3RzRmFpbABfZXBoZW1lcmFsAExvY2FsAHByb3RvYnVmX2NfbWVzc2FnZV91bnBhY2sARnJpAGdldF9wYWNrZWRfcGF5bG9hZF9sZW5ndGgAUGF0aABvcCBmaWVsZCBjb3VudCBkb2VzIG5vdCBtYXRjaABtYWdpYyBudW1iZXIgZG9lcyBub3QgbWF0Y2gAY2hlY2tzdW0gZG9lcyBub3QgbWF0Y2gATWFyY2gALi9tZWRpYV9zZXJ2ZXJfbGlicmFyeS9jcmR0L21lcmtsZV9zZWFyY2hfdHJlZS5oAEF1ZwAgcmVjdiBlcnIgbXNnAGJhc2ljX3N0cmluZwBDUlNZTkNfX1ZBTFVFX1RZUEVfX1N0cmluZwBGbGFnAGluZgBHYWxhY3R1c19fSW50ZXJlc3REaWZmAGdhbGFjdHVzLkludGVyZXN0RGlmZgAlLjBMZgAlTGYAcHJvdG9idWZfY19tZXNzYWdlX2dldF9wYWNrZWRfc2l6ZQByZXF1aXJlZF9maWVsZF9nZXRfcGFja2VkX3NpemUAY3JzeW5jX19yYW5nZV9kb2NzX3JlcXVlc3RfX2dldF9wYWNrZWRfc2l6ZQBnYWxhY3R1c19fZXN0YWJsaXNoX3JlcXVlc3RfX2dldF9wYWNrZWRfc2l6ZQBjcnN5bmNfX2VzdGFibGlzaF9yZXF1ZXN0X19nZXRfcGFja2VkX3NpemUAY3JzeW5jX191cGRhdGVfcmVxdWVzdF9fZ2V0X3BhY2tlZF9zaXplAGNyc3luY19fZGF0YWJhc2VfcmVxdWVzdF9fZ2V0X3BhY2tlZF9zaXplAGdhbGFjdHVzX19zaGFrZV9oYW5kX3JlcXVlc3RfX2dldF9wYWNrZWRfc2l6ZQBjcnN5bmNfX3F1ZXJ5X2RvY19yZXF1ZXN0X19nZXRfcGFja2VkX3NpemUAY3JzeW5jX19wdXRfZG9jX3JlcXVlc3RfX2dldF9wYWNrZWRfc2l6ZQBjcnN5bmNfX2dldF9kb2NfcmVxdWVzdF9fZ2V0X3BhY2tlZF9zaXplAGNyc3luY19fZGVsX2RvY19yZXF1ZXN0X19nZXRfcGFja2VkX3NpemUAY3JzeW5jX190aWNrZXRfZXZlbnRfX2dldF9wYWNrZWRfc2l6ZQBjcnN5bmNfX2tlZXBhbGl2ZV9ldmVudF9fZ2V0X3BhY2tlZF9zaXplAGdhbGFjdHVzX19leHRfaGVhZGVyX19nZXRfcGFja2VkX3NpemUAY3JzeW5jX19zeW5jX21lc3NhZ2VfX2dldF9wYWNrZWRfc2l6ZQBjcnN5bmNfX3NoYWtlaGFuZF9fZ2V0X3BhY2tlZF9zaXplAHRydWUAVmFsdWUAVHVlAFJlbW90ZQBDUlNZTkNfX09QRVJBVElPTl9fV3JpdGUAQ1JTWU5DX19VUERBVEVfTUVUSE9EX19EZWxldGUALCByZXNldCBjb25uZWN0aW9uIHN0YXRlAENyZWF0ZQBDUlNZTkNfX1VQREFURV9NRVRIT0RfX1VwZGF0ZQBUcmF2ZXJzZQBHYWxhY3R1c19fUmVuZXdLZXlSZXNwb25zZQBnYWxhY3R1cy5SZW5ld0tleVJlc3BvbnNlAENyc3luY19fUmFuZ2VEb2NzUmVzcG9uc2UAY3JzeW5jLlJhbmdlRG9jc1Jlc3BvbnNlAEdhbGFjdHVzX19Fc3RhYmxpc2hSZXNwb25zZQBDcnN5bmNfX0VzdGFibGlzaFJlc3BvbnNlAGdhbGFjdHVzLkVzdGFibGlzaFJlc3BvbnNlAGNyc3luYy5Fc3RhYmxpc2hSZXNwb25zZQBHYWxhY3R1c19fU2hha2VIYW5kUmVzcG9uc2UAZ2FsYWN0dXMuU2hha2VIYW5kUmVzcG9uc2UAQ3JzeW5jX19RdWVyeURvY1Jlc3BvbnNlAGNyc3luYy5RdWVyeURvY1Jlc3BvbnNlAENyc3luY19fR2V0RG9jUmVzcG9uc2UAY3JzeW5jLkdldERvY1Jlc3BvbnNlAGZhbHNlAERhdGFiYXNlAGNoYW5nZSBpcyBlYXJsaWVyIHRoYW4gcGVlciBiYXNlAFNjb3JlAE1vcmUAQ2xpZW50VHlwZQBDcnN5bmNfX1ZhbHVlVHlwZQBjcnN5bmMuVmFsdWVUeXBlAEp1bmUATmFtZQBBdmFpbGFibGUAQ3JzeW5jX19Qcml2aWxlZ2UAY3JzeW5jLlByaXZpbGVnZQBDcnN5bmNfX1N5bmNNZXNzYWdlAGNyc3luYy5TeW5jTWVzc2FnZQBiYXNlIGlzIG5vdCBiZWZvcmUgc2hhcmVkIGhlYWRzLCB0byBwcm9iZSBtb2RlAHJlY3YgZXJyLCB0byBwcm9iZSBtb2RlAGJhc2UgaXMgbm90IGJlZm9yZSBsYXN0IHN5bmMsIHRvIHByb2JlIG1vZGUAR2FsYWN0dXNfX1BlZXJNb2RlAGdhbGFjdHVzLlBlZXJNb2RlAEFzeW5jTW9kZQBBZGFwdG9yIHN1Z2dlc3QgZGlzY29ubmVjdCBmb3IgbmFtZXNwYWNlAE5hbWVzcGFjZQBDcnN5bmNfX1VwZGF0ZU1ldGhvZABjcnN5bmMuVXBkYXRlTWV0aG9kAGNoZWNrcG9pbnQgbm90IGZvdW5kAFVwdGltZUluU2Vjb25kAEdldENoYW5nZXNUb1NlbmQAQ3JzeW5jX19TaGFrZWhhbmQAY3JzeW5jLlNoYWtlaGFuZABFbmQAUmVtb3ZlZABjb25uZWN0aW9uIHRpbWVvdXRlZABkZWNvZGUgb3BzIGZhaWxlZABwYXJzZSBmb2xkZXIgbXNnIGZhaWxlZABjbG9ja19nZXR0aW1lKENMT0NLX1JFQUxUSU1FKSBmYWlsZWQAY2xvY2tfZ2V0dGltZShDTE9DS19NT05PVE9OSUMpIGZhaWxlZABwcm90b2J1Zl9jX21lc3NhZ2VfZnJlZV91bnBhY2tlZABjcnN5bmNfX2RhdGFiYXNlX3JlcXVlc3RfX2ZyZWVfdW5wYWNrZWQAY3JzeW5jX19wZXJtaXNzaW9uX2V2ZW50X19mcmVlX3VucGFja2VkAGdhbGFjdHVzX19yZW5ld19rZXlfcmVzcG9uc2VfX2ZyZWVfdW5wYWNrZWQAY3JzeW5jX19yYW5nZV9kb2NzX3Jlc3BvbnNlX19mcmVlX3VucGFja2VkAGdhbGFjdHVzX19lc3RhYmxpc2hfcmVzcG9uc2VfX2ZyZWVfdW5wYWNrZWQAY3JzeW5jX19lc3RhYmxpc2hfcmVzcG9uc2VfX2ZyZWVfdW5wYWNrZWQAZ2FsYWN0dXNfX3NoYWtlX2hhbmRfcmVzcG9uc2VfX2ZyZWVfdW5wYWNrZWQAY3JzeW5jX19xdWVyeV9kb2NfcmVzcG9uc2VfX2ZyZWVfdW5wYWNrZWQAY3JzeW5jX19nZXRfZG9jX3Jlc3BvbnNlX19mcmVlX3VucGFja2VkAGNyc3luY19fc3luY19tZXNzYWdlX19mcmVlX3VucGFja2VkAGhlYWRzIGVxdWFsLCBwZWVyIHN5bmNlZABXZWQAcGFja19idWZmZXJfcGFja2VkX3BheWxvYWQAR2FsYWN0dXNfX1F1b3J1bUxvYWQAZ2FsYWN0dXMuUXVvcnVtTG9hZABUb3RhbExvYWQAQ1JTWU5DX19PUEVSQVRJT05fX1JlYWQATGVhc2VJZABBdXRvQ3JlYXRlRG9jAGNyc3luYwBzdGFydCBhIHJvdW5kIG9mIHN5bmMAc3RhcnQgYSByb3VuZCBvZiB0b21ic3RvbmUgc3luYwBDUlNZTkNfX1VQREFURV9NRVRIT0RfX0NvdW50ZXJJbmMARGVjAG1lZGlhX3NlcnZlcl9saWJyYXJ5L3RoaXJkX3BhcnR5L2V0Y2QtYy9wcm90b2J1Zi1jLmMAbWVkaWFfc2VydmVyX2xpYnJhcnkvdGhpcmRfcGFydHkvZXRjZC1jL3Byb3h5LnBiLWMuYwBtZWRpYV9zZXJ2ZXJfbGlicmFyeS90aGlyZF9wYXJ0eS9ldGNkLWMvY3JzeW5jLnBiLWMuYwBGZWIAXQBdWwBBWgBHQUxBQ1RVU19fUEVFUl9NT0RFX19QRUVSX01PREVfUFJPWFkAJWEgJWIgJWQgJUg6JU06JVMgJVkAUE9TSVgAR0FMQUNUVVNfX1BFRVJfTU9ERV9fUEVFUl9NT0RFX0NMVVNURVJfQ0xJRU5UAEdBTEFDVFVTX19QRUVSX01PREVfX1BFRVJfTU9ERV9DTElFTlQAU3BsaXRPZmZMVABHQUxBQ1RVU19fUEVFUl9NT0RFX19QRUVSX01PREVfU0lERUNBUl9ESVJFQ1QAR0FMQUNUVVNfX1BFRVJfTU9ERV9fUEVFUl9NT0RFX0VNUwAlSDolTTolUwBHQUxBQ1RVU19fUEVFUl9NT0RFX19QRUVSX01PREVfTUlHUkFUT1IAR0FMQUNUVVNfX1BFRVJfTU9ERV9fUEVFUl9NT0RFX0NPT1JESU5BVE9SAEdBTEFDVFVTX19QRUVSX01PREVfX1BFRVJfTU9ERV9TWU5DX0NFTlRFUgBHQUxBQ1RVU19fUEVFUl9NT0RFX19QRUVSX01PREVfU0lERUNBUgBHQUxBQ1RVU19fUEVFUl9QUk9UT0NPTF9fUFJPVE9DT0xfVENQAE5BTgBQTQBBTQBUVEwAcnYtPmRlc2NyaXB0b3IgIT0gTlVMTABMQ19BTEwATEFORwBJTkYASUQAR0FMQUNUVVNfX1BFRVJfUFJPVE9DT0xfX1BST1RPQ09MX0dSUEMAKChtZXNzYWdlKS0+ZGVzY3JpcHRvciktPm1hZ2ljID09IFBST1RPQlVGX0NfX01FU1NBR0VfREVTQ1JJUFRPUl9NQUdJQwAoZGVzYyktPm1hZ2ljID09IFBST1RPQlVGX0NfX01FU1NBR0VfREVTQ1JJUFRPUl9NQUdJQwBJREMALCBlcnI6AHJlY3YgdXJpOgAsIHNlcWlkOgAwMTIzNDU2Nzg5AEMuVVRGLTgAbm9kZS5jaGlsZHJlbl8uc2l6ZSgpID09IG5vZGUuZWxlbWVudHNfLnNpemUoKSArIDEAY2hpbGRyZW5fLnNpemUoKSA9PSBlbGVtZW50c18uc2l6ZSgpICsgMQAwAC8AIGFscmVhZHkgdGltZW91dC4ALCBpZ25vcmUuACwAK3RvbWJzdG9uZSsAKG51bGwpACFzeW5jX3N0YXRlLnRoZWlyX2hhdmUtPmVtcHR5KCkAIWVsZW1lbnRzXy5lbXB0eSgpAGd0X2VsZW1zLnNpemUoKSArIDEgPT0gZ3RfY2hpbGRyZW4uc2l6ZSgpACAgICAiACBjb2xsIG1zZyB0eXBlIGRvZXMgbm90IG1hdGNoIQBzeW5jIG1zZyB0eXBlIGRvZXMgbm90IG1hdGNoIQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBTZXQgbmFtZXNwYWNlIGFzIABwdXJnZWQgdG8gACB3aXRoIGVycm5vIABGYWlsZWQgdG8gZXN0YWJsaXNoIGNvbm4gAFJlY2VpdmUgd3JvbmcgdGVybSAAVW5rbm93biB1cmkgACBvbiB1cmkgAGNvbW1hbmQgAFJlY2VpdmUgdW5rb3duIHNlcWlkIABdIABkZXAgbm90IG1ldDogACBpbml0aWFsIGRvY3M6IAB1cGRhdGUgZm9sZGVyOiAALCBsb2NhbF9hZGRyOiAAZXN0YWJsaXNoIGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bGx5LCByZW1vdGVfYWRkcjogAGludmFsaWQgb3AgYWN0aW9uOiAALCBnZW5lcmF0aW9uOiAALCBjdXJyZW50IHZlcnNpb246IAAsIHZlcnNpb246IABjb21wYWN0IG51bTogAHNuYXBzaG90dGluZywgY2hh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////tGkAANUBAADWAQAAGGkAAFBpAABkaQAALGkAADgAAAAAAAAApGgAAMgBAADJAQAAyP///8j///+kaAAAygEAAMsBAABOU3QzX18yMTliYXNpY19vc3RyaW5nc3RyZWFtSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAABIlQAAbGkAAKRoAAAAAAAA5GkAANcBAADYAQAATlN0M19fMjhpb3NfYmFzZUUAAAAglQAA0GkAAAAAAAD/////////////////////////////////////////////////////////////////AAECAwQFBgcICf////////8KCwwNDg8QERITFBUWFxgZGhscHR4fICEiI////////woLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIj/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wABAgQHAwYFAAAAAAAAAAIAAMADAADABAAAwAUAAMAGAADABwAAwAgAAMAJAADACgAAwAsAAMAMAADADQAAwA4AAMAPAADAEAAAwBEAAMASAADAEwAAwBQAAMAVAADAFgAAwBcAAMAYAADAGQAAwBoAAMAbAADAHAAAwB0AAMAeAADAHwAAwAAAALMBAADDAgAAwwMAAMMEAADDBQAAwwYAAMMHAADDCAAAwwkAAMMKAADDCwAAwwwAAMMNAADTDgAAww8AAMMAAAy7AQAMwwIADMMDAAzDBAAM2wAAAADeEgSVAAAAAP///////////////9BrAAAUAAAAQy5VVEYtOABBoNgBCwLkawBBwNgBC0pMQ19DVFlQRQAAAABMQ19OVU1FUklDAABMQ19USU1FAAAAAABMQ19DT0xMQVRFAABMQ19NT05FVEFSWQBMQ19NRVNTQUdFUwCQbgBBlN0BC/kDAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAA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AgAAxwIAAMgCAABOU3QzX18yMTBtb25leXB1bmN0SXdMYjFFRUUApJUAACiMAAAAAAAAAgAAAIR/AAACAAAA4IoAAAIAAAAAAAAA6IwAABACAADJAgAA7gEAAMoCAADLAgAATlN0M19fMjltb25leV9nZXRJY05TXzE5aXN0cmVhbWJ1Zl9pdGVyYXRvckljTlNfMTFjaGFyX3RyYWl0c0ljRUVFRUVFAE5TdDNfXzIxMV9fbW9uZXlfZ2V0SWNFRQAAIJUAAMaMAACklQAAgIwAAAAAAAACAAAAhH8AAAIAAADgjABBjJoCC5oBjI0AABACAADMAgAA7gEAAM0CAADOAgAATlN0M19fMjltb25leV9nZXRJd05TXzE5aXN0cmVhbWJ1Zl9pdGVyYXRvckl3TlNfMTFjaGFyX3RyYWl0c0l3RUVFRUVFAE5TdDNfXzIxMV9fbW9uZXlfZ2V0SXdFRQAAIJUAAGqNAACklQAAJI0AAAAAAAACAAAAhH8AAAIAAACEjQBBsJsCC5oBMI4AABACAADPAgAA7gEAANACAADRAgAATlN0M19fMjltb25leV9wdXRJY05TXzE5b3N0cmVhbWJ1Zl9pdGVyYXRvckljTlNfMTFjaGFyX3RyYWl0c0ljRUVFRUVFAE5TdDNfXzIxMV9fbW9uZXlfcHV0SWNFRQAAIJUAAA6OAACklQAAyI0AAAAAAAACAAAAhH8AAAIAAAAojgBB1JwCC5oB1I4AABACAADSAgAA7gEAANMCAADUAgAATlN0M19fMjltb25leV9wdXRJd05TXzE5b3N0cmVhbWJ1Zl9pdGVyYXRvckl3TlNfMTFjaGFyX3RyYWl0c0l3RUVFRUVFAE5TdDNfXzIxMV9fbW9uZXlfcHV0SXdFRQAAIJUAALKOAACklQAAbI4AAAAAAAACAAAAhH8AAAIAAADMjgBB+J0CC7kITI8AABACAADVAgAA7gEAANYCAADXAgAA2AIAAE5TdDNfXzI4bWVzc2FnZXNJY0VFAE5TdDNfXzIxM21lc3NhZ2VzX2Jhc2VFAAAAACCVAAApjwAApJUAABSPAAAAAAAAAgAAAIR/AAACAAAARI8AAAIAAAAAAAAApI8AABACAADZAgAA7gEAANoCAADbAgAA3AIAAE5TdDNfXzI4bWVzc2FnZXNJd0VFAAAAAKSVAACM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\")||(L=k,k=o.locateFile?o.locateFile(L,s):s+L);var v,O=A=>{for(;A.length>0;)A.shift()(o)},T=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf8\"):void 0,F=(A,e)=>A?((A,e,t)=>{for(var o=e+t,g=e;A[g]&&!(g>=o);)++g;if(g-e>16&&A.buffer&&T)return T.decode(A.subarray(e,g));for(var i=\"\";e<g;){var r=A[e++];if(128&r){var n=63&A[e++];if(192!=(224&r)){var I=63&A[e++];if((r=224==(240&r)?(15&r)<<12|n<<6|I:(7&r)<<18|n<<12|I<<6|63&A[e++])<65536)i+=String.fromCharCode(r);else{var s=r-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else i+=String.fromCharCode((31&r)<<6|n)}else i+=String.fromCharCode(r)}return i})(Q,A,e):\"\",K=A=>{var e=(A-E.buffer.byteLength+65535)/65536;try{return E.grow(e),R(),1}catch(A){}},Y={},J=()=>{if(!J.strings){var A={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:(\"object\"==typeof navigator&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\",_:i||\"./this.program\"};for(var e in Y)void 0===Y[e]?delete A[e]:A[e]=Y[e];var t=[];for(var e in A)t.push(\"\".concat(e,\"=\").concat(A[e]));J.strings=t}return J.strings},P=A=>A%4==0&&(A%100!=0||A%400==0),q=[31,29,31,30,31,30,31,31,30,31,30,31],$=[31,28,31,30,31,30,31,31,30,31,30,31],x=A=>{for(var e=0,t=0;t<A.length;++t){var o=A.charCodeAt(t);o<=127?e++:o<=2047?e+=2:o>=55296&&o<=57343?(e+=4,++t):e+=3}return e},H=(A,e,t,o)=>{if(!(o>0))return 0;for(var g=t,i=t+o-1,r=0;r<A.length;++r){var n=A.charCodeAt(r);if(n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&A.charCodeAt(++r)),n<=127){if(t>=i)break;e[t++]=n}else if(n<=2047){if(t+1>=i)break;e[t++]=192|n>>6,e[t++]=128|63&n}else if(n<=65535){if(t+2>=i)break;e[t++]=224|n>>12,e[t++]=128|n>>6&63,e[t++]=128|63&n}else{if(t+3>=i)break;e[t++]=240|n>>18,e[t++]=128|n>>12&63,e[t++]=128|n>>6&63,e[t++]=128|63&n}}return e[t]=0,t-g},j=(A,e,t,o)=>{var g=u[o+40>>2],i={tm_sec:l[o>>2],tm_min:l[o+4>>2],tm_hour:l[o+8>>2],tm_mday:l[o+12>>2],tm_mon:l[o+16>>2],tm_year:l[o+20>>2],tm_wday:l[o+24>>2],tm_yday:l[o+28>>2],tm_isdst:l[o+32>>2],tm_gmtoff:l[o+36>>2],tm_zone:g?F(g):\"\"},r=F(t),n={\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m/%d/%y\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%r\":\"%I:%M:%S %p\",\"%R\":\"%H:%M\",\"%T\":\"%H:%M:%S\",\"%x\":\"%m/%d/%y\",\"%X\":\"%H:%M:%S\",\"%Ec\":\"%c\",\"%EC\":\"%C\",\"%Ex\":\"%m/%d/%y\",\"%EX\":\"%H:%M:%S\",\"%Ey\":\"%y\",\"%EY\":\"%Y\",\"%Od\":\"%d\",\"%Oe\":\"%e\",\"%OH\":\"%H\",\"%OI\":\"%I\",\"%Om\":\"%m\",\"%OM\":\"%M\",\"%OS\":\"%S\",\"%Ou\":\"%u\",\"%OU\":\"%U\",\"%OV\":\"%V\",\"%Ow\":\"%w\",\"%OW\":\"%W\",\"%Oy\":\"%y\"};for(var I in n)r=r.replace(new RegExp(I,\"g\"),n[I]);var s=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],C=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];function E(A,e,t){for(var o=\"number\"==typeof A?A.toString():A||\"\";o.length<e;)o=t[0]+o;return o}function a(A,e){return E(A,e,\"0\")}function Q(A,e){function t(A){return A<0?-1:A>0?1:0}var o;return 0===(o=t(A.getFullYear()-e.getFullYear()))&&0===(o=t(A.getMonth()-e.getMonth()))&&(o=t(A.getDate()-e.getDate())),o}function c(A){switch(A.getDay()){case 0:return new Date(A.getFullYear()-1,11,29);case 1:return A;case 2:return new Date(A.getFullYear(),0,3);case 3:return new Date(A.getFullYear(),0,2);case 4:return new Date(A.getFullYear(),0,1);case 5:return new Date(A.getFullYear()-1,11,31);case 6:return new Date(A.getFullYear()-1,11,30)}}function h(A){var e=((A,e)=>{for(var t=new Date(A.getTime());e>0;){var o=P(t.getFullYear()),g=t.getMonth(),i=(o?q:$)[g];if(!(e>i-t.getDate()))return t.setDate(t.getDate()+e),t;e-=i-t.getDate()+1,t.setDate(1),g<11?t.setMonth(g+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return t})(new Date(A.tm_year+1900,0,1),A.tm_yday),t=new Date(e.getFullYear(),0,4),o=new Date(e.getFullYear()+1,0,4),g=c(t),i=c(o);return Q(g,e)<=0?Q(i,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var d={\"%a\":A=>s[A.tm_wday].substring(0,3),\"%A\":A=>s[A.tm_wday],\"%b\":A=>C[A.tm_mon].substring(0,3),\"%B\":A=>C[A.tm_mon],\"%C\":A=>a((A.tm_year+1900)/100|0,2),\"%d\":A=>a(A.tm_mday,2),\"%e\":A=>E(A.tm_mday,2,\" \"),\"%g\":A=>h(A).toString().substring(2),\"%G\":A=>h(A),\"%H\":A=>a(A.tm_hour,2),\"%I\":A=>{var e=A.tm_hour;return 0==e?e=12:e>12&&(e-=12),a(e,2)},\"%j\":A=>a(A.tm_mday+((A,e)=>{for(var t=0,o=0;o<=e;t+=A[o++]);return t})(P(A.tm_year+1900)?q:$,A.tm_mon-1),3),\"%m\":A=>a(A.tm_mon+1,2),\"%M\":A=>a(A.tm_min,2),\"%n\":()=>\"\\n\",\"%p\":A=>A.tm_hour>=0&&A.tm_hour<12?\"AM\":\"PM\",\"%S\":A=>a(A.tm_sec,2),\"%t\":()=>\"\\t\",\"%u\":A=>A.tm_wday||7,\"%U\":A=>{var e=A.tm_yday+7-A.tm_wday;return a(Math.floor(e/7),2)},\"%V\":A=>{var e=Math.floor((A.tm_yday+7-(A.tm_wday+6)%7)/7);if((A.tm_wday+371-A.tm_yday-2)%7<=2&&e++,e){if(53==e){var t=(A.tm_wday+371-A.tm_yday)%7;4==t||3==t&&P(A.tm_year)||(e=1)}}else{e=52;var o=(A.tm_wday+7-A.tm_yday-1)%7;(4==o||5==o&&P(A.tm_year%400-1))&&e++}return a(e,2)},\"%w\":A=>A.tm_wday,\"%W\":A=>{var e=A.tm_yday+7-(A.tm_wday+6)%7;return a(Math.floor(e/7),2)},\"%y\":A=>(A.tm_year+1900).toString().substring(2),\"%Y\":A=>A.tm_year+1900,\"%z\":A=>{var e=A.tm_gmtoff,t=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(t?\"+\":\"-\")+String(\"0000\"+e).slice(-4)},\"%Z\":A=>A.tm_zone,\"%%\":()=>\"%\"};for(var I in r=r.replace(/%%/g,\"\\0\\0\"),d)r.includes(I)&&(r=r.replace(new RegExp(I,\"g\"),d[I](i)));r=r.replace(/\\0\\0/g,\"%\");var p,y,D,R,w,f=(y=x(p=r)+1,D=new Array(y),H(p,D,0,D.length),D);return f.length>e?0:(R=f,w=A,B.set(R,w),f.length-1)},V=(A,e)=>{A<128?e.push(A):e.push(A%128|128,A>>7)},W=(A,e)=>{if(\"function\"==typeof WebAssembly.Function)return new WebAssembly.Function((A=>{for(var e={i:\"i32\",j:\"i64\",f:\"f32\",d:\"f64\",p:\"i32\"},t={parameters:[],results:\"v\"==A[0]?[]:[e[A[0]]]},o=1;o<A.length;++o)t.parameters.push(e[A[o]]);return t})(e),A);var t=[1];((A,e)=>{var t=A.slice(0,1),o=A.slice(1),g={i:127,p:127,j:126,f:125,d:124};e.push(96),V(o.length,e);for(var i=0;i<o.length;++i)e.push(g[o[i]]);\"v\"==t?e.push(0):e.push(1,g[t])})(e,t);var o=[0,97,115,109,1,0,0,0,1];V(t.length,o),o.push.apply(o,t),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var g=new WebAssembly.Module(new Uint8Array(o));return new WebAssembly.Instance(g,{e:{f:A}}).exports.f},Z=A=>y.get(A),X=void 0,z=A=>(X||(X=new WeakMap,((A,e)=>{if(X)for(var t=A;t<A+e;t++){var o=Z(t);o&&X.set(o,t)}})(0,y.length)),X.get(A)||0),AA=[],eA=(A,e)=>y.set(A,e),tA={a:(A,e,t,o)=>{_(\"Assertion failed: \".concat(F(A),\", at: \")+[e?F(e):\"unknown filename\",t,o?F(o):\"unknown function\"])},f:()=>!0,b:()=>{_(\"\")},g:()=>Date.now(),i:()=>performance.now(),h:A=>{var e=Q.length,t=2147483648;if((A>>>=0)>t)return!1;for(var o,g,i=1;i<=4;i*=2){var r=e*(1+.2/i);r=Math.min(r,A+100663296);var n=Math.min(t,(o=Math.max(A,r))+((g=65536)-o%g)%g);if(K(n))return!0}return!1},d:(A,e)=>{var t=0;return J().forEach(((o,g)=>{var i=e+t;u[A+4*g>>2]=i,((A,e)=>{for(var t=0;t<A.length;++t)B[0|e++]=A.charCodeAt(t);B[0|e]=0})(o,i),t+=o.length+1})),0},e:(A,e)=>{var t=J();u[A>>2]=t.length;var o=0;return t.forEach((A=>o+=A.length+1)),u[e>>2]=o,0},j:function(A,e){o.rtejsLog(A,F(e))},c:(A,e,t,o,g)=>j(A,e,t,o)},oA=function(){var A,e,g,i={a:tA};function r(A,e){var t,g=A.exports;return E=(oA=g).k,R(),y=oA.m,t=oA.l,f.unshift(t),function(){if(N--,o.monitorRunDependencies&&o.monitorRunDependencies(N),0==N&&M){var A=M;M=null,A()}}(),g}if(N++,o.monitorRunDependencies&&o.monitorRunDependencies(N),o.instantiateWasm)try{return o.instantiateWasm(i,r)}catch(A){a(\"Module.instantiateWasm callback failed with error: \".concat(A)),t(A)}return(A=k,e=i,g=function(A){r(A.instance)},U(A,e,g)).catch(t),{}}();function gA(){function A(){v||(v=!0,o.calledRun=!0,D||(O(f),e(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for(\"function\"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)A=o.postRun.shift(),S.unshift(A);var A;O(S)}()))}N>0||(function(){if(o.preRun)for(\"function\"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)A=o.preRun.shift(),w.unshift(A);var A;O(w)}(),N>0||(o.setStatus?(o.setStatus(\"Running...\"),setTimeout((function(){setTimeout((function(){o.setStatus(\"\")}),1),A()}),1)):A()))}if(o._free=A=>(o._free=oA.n)(A),o._malloc=A=>(o._malloc=oA.o)(A),o._rte_crdt_value_create=()=>(o._rte_crdt_value_create=oA.p)(),o._rte_crdt_value_clone=A=>(o._rte_crdt_value_clone=oA.q)(A),o._rte_crdt_value_destroy=A=>(o._rte_crdt_value_destroy=oA.r)(A),o._rte_crdt_value_is_scalar=A=>(o._rte_crdt_value_is_scalar=oA.s)(A),o._rte_crdt_value_is_map=A=>(o._rte_crdt_value_is_map=oA.t)(A),o._rte_crdt_value_is_list=A=>(o._rte_crdt_value_is_list=oA.u)(A),o._rte_crdt_value_get_scalar=A=>(o._rte_crdt_value_get_scalar=oA.v)(A),o._rte_crdt_value_set_scalar=A=>(o._rte_crdt_value_set_scalar=oA.w)(A),o._rte_crdt_value_set_map=A=>(o._rte_crdt_value_set_map=oA.x)(A),o._rte_crdt_value_set_list=A=>(o._rte_crdt_value_set_list=oA.y)(A),o._rte_crdt_scalar_value_set_i64=(A,e)=>(o._rte_crdt_scalar_value_set_i64=oA.z)(A,e),o._rte_crdt_scalar_value_set_u64=(A,e)=>(o._rte_crdt_scalar_value_set_u64=oA.A)(A,e),o._rte_crdt_scalar_value_set_double=(A,e)=>(o._rte_crdt_scalar_value_set_double=oA.B)(A,e),o._rte_crdt_scalar_value_set_bool=(A,e)=>(o._rte_crdt_scalar_value_set_bool=oA.C)(A,e),o._rte_crdt_scalar_value_set_bytes=(A,e,t)=>(o._rte_crdt_scalar_value_set_bytes=oA.D)(A,e,t),o._rte_crdt_scalar_value_set_null=A=>(o._rte_crdt_scalar_value_set_null=oA.E)(A),o._rte_crdt_scalar_value_set_counter=(A,e)=>(o._rte_crdt_scalar_value_set_counter=oA.F)(A,e),o._rte_crdt_scalar_value_is_i64=A=>(o._rte_crdt_scalar_value_is_i64=oA.G)(A),o._rte_crdt_scalar_value_is_u64=A=>(o._rte_crdt_scalar_value_is_u64=oA.H)(A),o._rte_crdt_scalar_value_is_double=A=>(o._rte_crdt_scalar_value_is_double=oA.I)(A),o._rte_crdt_scalar_value_is_bool=A=>(o._rte_crdt_scalar_value_is_bool=oA.J)(A),o._rte_crdt_scalar_value_is_bytes=A=>(o._rte_crdt_scalar_value_is_bytes=oA.K)(A),o._rte_crdt_scalar_value_is_null=A=>(o._rte_crdt_scalar_value_is_null=oA.L)(A),o._rte_crdt_scalar_value_is_counter=A=>(o._rte_crdt_scalar_value_is_counter=oA.M)(A),o._rte_crdt_scalar_value_get_i64=(A,e)=>(o._rte_crdt_scalar_value_get_i64=oA.N)(A,e),o._rte_crdt_scalar_value_get_u64=(A,e)=>(o._rte_crdt_scalar_value_get_u64=oA.O)(A,e),o._rte_crdt_scalar_value_get_double=(A,e)=>(o._rte_crdt_scalar_value_get_double=oA.P)(A,e),o._rte_crdt_scalar_value_get_bool=(A,e)=>(o._rte_crdt_scalar_value_get_bool=oA.Q)(A,e),o._rte_crdt_scalar_value_get_bytes=(A,e,t)=>(o._rte_crdt_scalar_value_get_bytes=oA.R)(A,e,t),o._rte_crdt_scalar_value_get_counter=(A,e)=>(o._rte_crdt_scalar_value_get_counter=oA.S)(A,e),o._rte_crdt_nested_value_create=()=>(o._rte_crdt_nested_value_create=oA.T)(),o._rte_crdt_nested_value_destroy=A=>(o._rte_crdt_nested_value_destroy=oA.U)(A),o._rte_crdt_nested_value_print=A=>(o._rte_crdt_nested_value_print=oA.V)(A),o._rte_crdt_nested_value_is_scalar=A=>(o._rte_crdt_nested_value_is_scalar=oA.W)(A),o._rte_crdt_nested_value_is_map=A=>(o._rte_crdt_nested_value_is_map=oA.X)(A),o._rte_crdt_nested_value_is_list=A=>(o._rte_crdt_nested_value_is_list=oA.Y)(A),o._rte_crdt_nested_value_get_scalar=A=>(o._rte_crdt_nested_value_get_scalar=oA.Z)(A),o._rte_crdt_nested_value_iterator_create=A=>(o._rte_crdt_nested_value_iterator_create=oA._)(A),o._rte_crdt_nested_value_iterator_destroy=A=>(o._rte_crdt_nested_value_iterator_destroy=oA.$)(A),o._rte_crdt_nested_value_iterator_next_key_value=(A,e,t,g)=>(o._rte_crdt_nested_value_iterator_next_key_value=oA.aa)(A,e,t,g),o._rte_crdt_nested_value_iterator_next_value=(A,e)=>(o._rte_crdt_nested_value_iterator_next_value=oA.ba)(A,e),o._rte_crdt_path_create=()=>(o._rte_crdt_path_create=oA.ca)(),o._rte_crdt_path_clone=A=>(o._rte_crdt_path_clone=oA.da)(A),o._rte_crdt_path_destroy=A=>(o._rte_crdt_path_destroy=oA.ea)(A),o._rte_crdt_path_add_property=(A,e,t)=>(o._rte_crdt_path_add_property=oA.fa)(A,e,t),o._rte_crdt_path_add_index=(A,e)=>(o._rte_crdt_path_add_index=oA.ga)(A,e),o._rte_crdt_path_iterator_create=A=>(o._rte_crdt_path_iterator_create=oA.ha)(A),o._rte_crdt_path_iterator_destroy=A=>(o._rte_crdt_path_iterator_destroy=oA.ia)(A),o._rte_crdt_path_iterator_next=(A,e,t,g)=>(o._rte_crdt_path_iterator_next=oA.ja)(A,e,t,g),o._rte_crdt_document_destroy=A=>(o._rte_crdt_document_destroy=oA.ka)(A),o._rte_crdt_document_get=(A,e,t,g)=>(o._rte_crdt_document_get=oA.la)(A,e,t,g),o._rte_crdt_document_batch_write_begin=A=>(o._rte_crdt_document_batch_write_begin=oA.ma)(A),o._rte_crdt_document_batch_write_end=A=>(o._rte_crdt_document_batch_write_end=oA.na)(A),o._rte_crdt_document_put=(A,e,t,g)=>(o._rte_crdt_document_put=oA.oa)(A,e,t,g),o._rte_crdt_document_insert=(A,e,t,g)=>(o._rte_crdt_document_insert=oA.pa)(A,e,t,g),o._rte_crdt_document_delete=(A,e,t)=>(o._rte_crdt_document_delete=oA.qa)(A,e,t),o._rte_crdt_document_increment=(A,e,t,g)=>(o._rte_crdt_document_increment=oA.ra)(A,e,t,g),o._rte_crdt_collection_put_doc=(A,e,t)=>(o._rte_crdt_collection_put_doc=oA.sa)(A,e,t),o._rte_crdt_collection_delete_doc=(A,e,t)=>(o._rte_crdt_collection_delete_doc=oA.ta)(A,e,t),o._rte_crdt_collection_ref_doc=(A,e,t)=>(o._rte_crdt_collection_ref_doc=oA.ua)(A,e,t),o._rte_crdt_collection_iterator_create=(A,e,t)=>(o._rte_crdt_collection_iterator_create=oA.va)(A,e,t),o._rte_crdt_collection_iterator_destroy=A=>(o._rte_crdt_collection_iterator_destroy=oA.wa)(A),o._rte_crdt_collection_iterator_next=(A,e,t)=>(o._rte_crdt_collection_iterator_next=oA.xa)(A,e,t),o._rte_crdt_collection_init=(A,e,t)=>(o._rte_crdt_collection_init=oA.ya)(A,e,t),o._rte_crdt_collection_subscribe=(A,e,t)=>(o._rte_crdt_collection_subscribe=oA.za)(A,e,t),o._sync_client_create=(A,e,t)=>(o._sync_client_create=oA.Aa)(A,e,t),o._sync_client_destroy=A=>(o._sync_client_destroy=oA.Ba)(A),o._sync_client_set_shakehand_interval=(A,e)=>(o._sync_client_set_shakehand_interval=oA.Ca)(A,e),o._sync_client_set_connection_timeout=(A,e)=>(o._sync_client_set_connection_timeout=oA.Da)(A,e),o._sync_client_set_request_timeout=(A,e)=>(o._sync_client_set_request_timeout=oA.Ea)(A,e),o._sync_client_set_doc_ttl=(A,e,t,g,i)=>(o._sync_client_set_doc_ttl=oA.Fa)(A,e,t,g,i),o._sync_client_init=(A,e,t)=>(o._sync_client_init=oA.Ga)(A,e,t),o._sync_buffer_create=()=>(o._sync_buffer_create=oA.Ha)(),o._sync_buffer_destroy=A=>(o._sync_buffer_destroy=oA.Ia)(A),o._sync_buffer_data=A=>(o._sync_buffer_data=oA.Ja)(A),o._sync_buffer_length=A=>(o._sync_buffer_length=oA.Ka)(A),o._sync_client_tick=(A,e)=>(o._sync_client_tick=oA.La)(A,e),o._sync_client_shakehand=(A,e)=>(o._sync_client_shakehand=oA.Ma)(A,e),o._sync_client_on_recv=(A,e,t,g)=>(o._sync_client_on_recv=oA.Na)(A,e,t,g),o._sync_client_reset_connection=A=>(o._sync_client_reset_connection=oA.Oa)(A),o._sync_client_compact=A=>(o._sync_client_compact=oA.Pa)(A),o._sync_client_create_coll=(A,e,t,g,i,r,n,I,s)=>(o._sync_client_create_coll=oA.Qa)(A,e,t,g,i,r,n,I,s),o._sync_client_subscribe=(A,e,t,g,i)=>(o._sync_client_subscribe=oA.Ra)(A,e,t,g,i),o._sync_client_get_coll=(A,e,t)=>(o._sync_client_get_coll=oA.Sa)(A,e,t),o._sync_client_delete_coll=(A,e,t)=>(o._sync_client_delete_coll=oA.Ta)(A,e,t),o._sync_collection_iterator_create=(A,e)=>(o._sync_collection_iterator_create=oA.Ua)(A,e),o._sync_collection_iterator_next=(A,e)=>(o._sync_collection_iterator_next=oA.Va)(A,e),o._sync_client_enable_js_logging=()=>(o._sync_client_enable_js_logging=oA.Wa)(),o._sync_client_set_log_level=A=>(o._sync_client_set_log_level=oA.Xa)(A),o._sync_client_set_exception_callback=(A,e,t)=>(o._sync_client_set_exception_callback=oA.Ya)(A,e,t),o._sync_client_renew_tickets=(A,e,t)=>(o._sync_client_renew_tickets=oA.Za)(A,e,t),o._sync_client_keepalive=(A,e,t,g,i)=>(o._sync_client_keepalive=oA._a)(A,e,t,g,i),o._sync_client_connect_database=(A,e,t,g,i,r)=>(o._sync_client_connect_database=oA.$a)(A,e,t,g,i,r),o._sync_client_disconnect_database=(A,e,t,g)=>(o._sync_client_disconnect_database=oA.ab)(A,e,t,g),o._sync_client_query_doc=(A,e,t,g,i,r,n,I,s,C)=>(o._sync_client_query_doc=oA.bb)(A,e,t,g,i,r,n,I,s,C),o._sync_client_put_doc=(A,e,t,g,i,r,n,I,s)=>(o._sync_client_put_doc=oA.cb)(A,e,t,g,i,r,n,I,s),o._sync_client_delete_doc=(A,e,t,g,i,r)=>(o._sync_client_delete_doc=oA.db)(A,e,t,g,i,r),o._sync_client_update_doc=(A,e,t,g,i,r,n,I,s,C,E,a,B,Q,c,l)=>(o._sync_client_update_doc=oA.eb)(A,e,t,g,i,r,n,I,s,C,E,a,B,Q,c,l),o._sync_client_range_docs=(A,e,t,g,i,r,n,I)=>(o._sync_client_range_docs=oA.fb)(A,e,t,g,i,r,n,I),o._sync_client_get_doc=(A,e,t,g,i,r,n)=>(o._sync_client_get_doc=oA.gb)(A,e,t,g,i,r,n),o._sync_client_set_permission_callback=(A,e,t)=>(o._sync_client_set_permission_callback=oA.hb)(A,e,t),o.___start_em_js=38440,o.___stop_em_js=38534,o.addFunction=(A,e)=>{var t=z(A);if(t)return t;var o=(()=>{if(AA.length)return AA.pop();try{y.grow(1)}catch(A){if(!(A instanceof RangeError))throw A;throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\"}return y.length-1})();try{eA(o,A)}catch(t){if(!(t instanceof TypeError))throw t;var g=W(A,e);eA(o,g)}return X.set(A,o),o},o.removeFunction=A=>{X.delete(Z(A)),AA.push(A)},o.setValue=function(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"i8\";switch(t.endsWith(\"*\")&&(t=\"*\"),t){case\"i1\":case\"i8\":B[0|A]=e;break;case\"i16\":c[A>>1]=e;break;case\"i32\":l[A>>2]=e;break;case\"i64\":d[A>>3]=BigInt(e);break;case\"float\":h[A>>2]=e;break;case\"double\":p[A>>3]=e;break;case\"*\":u[A>>2]=e;break;default:_(\"invalid type for setValue: \".concat(t))}},o.getValue=function(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"i8\";switch(e.endsWith(\"*\")&&(e=\"*\"),e){case\"i1\":case\"i8\":return B[0|A];case\"i16\":return c[A>>1];case\"i32\":return l[A>>2];case\"i64\":return d[A>>3];case\"float\":return h[A>>2];case\"double\":return p[A>>3];case\"*\":return u[A>>2];default:_(\"invalid type for getValue: \".concat(e))}},o.UTF8ToString=F,o.stringToUTF8=(A,e,t)=>H(A,Q,e,t),o.lengthBytesUTF8=x,M=function A(){v||gA(),v||(M=A)},o.preInit)for(\"function\"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return gA(),A.ready};const getUTCTimestamp=()=>{const A=new Date;return\"\".concat(A.toISOString().split(\"T\")[1].replace(/\\..+/,\"\"),\".\").concat(A.getMilliseconds())};let wasmReject,wasmResolve;const wasmPromise=new Promise(((A,e)=>{wasmReject=e,wasmResolve=A}));let Module,isBrowser;async function initWasm(A){Module=await wasmPromise,initFunc(A)}function setBrowser(A){isBrowser=A}createModule({rtejsLog:(A,e)=>{switch(A){case 0:console.debug(e,\" ----------rtejslog\");break;case 1:console.info(e,\" ----------rtejslog\");break;case 2:console.warn(e,\" ----------rtejslog\");break;case 3:console.error(e,\" ----------rtejslog\")}}}).then((A=>{wasmResolve(A),console.log(getUTCTimestamp(),\"wasm-module initialized\")})).catch((A=>{wasmReject(A)}));class QueryDocBuffer{constructor(){this.docs=new Map,this.count=-1,this.more=!1}SetDocs(A,e){this.docs.set(A,e)}SetCount(A){if(!isInteger(A))throw new TypeError(\"The num is expected to be an integer, but a double was got.\");this.count=A}SetMore(A){this.more=A}}class SyncClient{constructor(A){this.appId=A.appId,this.logLevel=A.logLevel,this.shakehandInterval=A.shakehandInterval,this.manualShakehand=A.manualShakehand,this.manualTick=A.manualTick,this.uuidPrefix=A.uuidPrefix,this.getLogger=A.getLogger,this.reuseConn=A.reuseConn,this.tickets=new Map,this.exceptionCb=null,this.exceptionChan=new eventsExports.EventEmitter;const e=getPtrWithStr(this.uuidPrefix+\"_\"+uuid_1.v4()),[t,o]=getPtrStringList(Array.from(this.tickets.values()));this.clientPtr=Module._sync_client_create(e,t,this.tickets.size);for(let A=0;A<o.length;A++){releasePtr(o[A])}releasePtr(e),this.timer=null,this.databaseConnected=new Map,this.tickBufferPtr=0,this.connected=!1,Module._sync_client_enable_js_logging(),Module._sync_client_set_log_level(this.logLevel),this.manualShakehand?(Module._sync_client_set_shakehand_interval(this.clientPtr,0),this.shakehandBufferPtr=Module._sync_buffer_create()):(Module._sync_client_set_shakehand_interval(this.clientPtr,this.shakehandInterval),this.shakehandBufferPtr=0),null!==this.reuseConn&&(this.tickBufferPtr=Module._sync_buffer_create(),this.reuseConn().internalEmitter.on(\"connected\",(()=>{this.connected=!0,this.manualTick||(tickLoop(this),this.timer=setInterval((()=>{tickLoop(this)}),2e3))})),this.reuseConn().internalEmitter.on(\"disconnected\",(()=>{this.connected=!1,this.manualTick||clearInterval(this.timer),Module._sync_client_reset_connection(this.clientPtr)})),this.reuseConn().internalEmitter.on(\"received-packet\",(A=>{try{const e=A.length*A.BYTES_PER_ELEMENT,t=Module._malloc(e);Module.HEAPU8.set(A,t);const o=Module._sync_client_on_recv(this.clientPtr,t,BigInt(e),this.tickBufferPtr);if(Module._free(t),101===o)Module._sync_client_reset_connection(this.clientPtr);else{const A=new Uint8Array(Module.HEAPU8.buffer,Module._sync_buffer_data(this.tickBufferPtr),Number(Module._sync_buffer_length(this.tickBufferPtr))).slice();if(0!=A.length){this.reuseConn().sendPacket(A);logger((new Date).toString()+\" : recv and send packet\",this.getLogger,\"info\")}}}catch(A){let e=A;console.log(e),logger(\"recvError : \".concat(e),this.getLogger,\"error\")}})))}async Login(){if(null===this.reuseConn){if(!(this.tickets.size>0))throw new Error(\"Tickets should be set before logging in.\");await fetchHelper(this,isBrowser),logger(\"Open the WebSocket successfully\",this.getLogger,\"info\")}}Logout(){Module._sync_buffer_destroy(this.tickBufferPtr),null===this.reuseConn&&clearInterval(this.timer),this.manualShakehand&&Module._sync_buffer_destroy(this.shakehandBufferPtr),null!=this.exceptionCb&&Module.removeFunction(this.exceptionCb),this.connected=!1,logger(\"Logout successfully\",this.getLogger,\"info\")}async ConnectDatabase(A){try{if(await promisify(connectDatabase)({client:this,databaseName:A}),!this.databaseConnected.has(A)){const e=new SyncDatabase(A,this);this.databaseConnected.set(A,e)}}catch(A){logger(\"Database connection failed by the error : \".concat(A),this.getLogger,\"error\")}}async DisConnectDatabase(A){if(this.databaseConnected.has(A))try{await promisify(disconnectDatabase)({client:this,databaseName:A}),this.databaseConnected.delete(A)}catch(A){logger(\"Database disconnection failed by the error : \".concat(A),this.getLogger,\"error\")}}Database(A){return this.databaseConnected.has(A)?this.databaseConnected.get(A):null}SetTicket(A,e){this.tickets.set(A,e);const[t,o]=getPtrStringList(Array.from(this.tickets.values()));Module._sync_client_renew_tickets(this.clientPtr,t,this.tickets.size),this.connected&&tickLoop(this),releasePtr(t);for(let A=0;A<o.length;A++){releasePtr(o[A])}}RemoveTicket(A){if(this.tickets.has(A)){this.tickets.delete(A);const[e,t]=getPtrStringList(Array.from(this.tickets.values()));Module._sync_client_renew_tickets(this.clientPtr,e,this.tickets.size),this.connected&&tickLoop(this),releasePtr(e);for(let A=0;A<t.length;A++){releasePtr(t[A])}}}async QueryDoc(A,e,t){const o=new QueryDocBuffer;try{await promisify(queryDoc)({client:this,database:A,coll:e,option:t,buffer:o})}catch(A){logger(\"Query Doc is failed by the error : \".concat(A),this.getLogger,\"error\")}if(o.count>=0)return t.countOnly?[null,o.count,o.more]:t.keysOnly?[Array.from(o.docs.keys()).sort(),o.count,o.more]:[new Map([...o.docs].sort()),o.count,o.more];throw new Error(\"The query doc operation is failed\")}Shakehand(){if(!this.manualShakehand)throw new Error(\"The manualShakehand is set to false for this client.\");shakehandOnce(this)}Tick(){if(!this.manualTick)throw new Error(\"The manualTick is set to false for this client.\");tickLoop(this)}SetConnectionTimeout(A){if(!isInteger(A)||A<=0)throw new TypeError(\"The seconds is expected to be a positive integer.\");Module._sync_client_set_connection_timeout(this.clientPtr,A)}GetConnectionState(){return this.connected}ExceptionCallback(){return null!=this.exceptionCb&&Module.removeFunction(this.exceptionCb),exceptionCallback(this),this.exceptionChan}}class SyncConfig{constructor(A,e,t,o,g,i){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!isInteger(e))throw new TypeError(\"The logLevel is expected to be an int, but a double was got.\");if(!isInteger(t))throw new TypeError(\"The shakehandInterval is expected to be an integer, but a double was got.\");this.appId=A,this.logLevel=e,this.shakehandInterval=t,this.manualShakehand=o,this.manualTick=g,this.uuidPrefix=i,this.getLogger=r,this.reuseConn=n}}class QueryOption{constructor(A,e,t,o,g){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!isInteger(g)||g<0)throw new TypeError(\"The limit is expected to be an int greater than or equal to zero, but a double or a negative int was got.\");this.start=A,this.end=e,this.keysOnly=t,this.countOnly=o,this.limit=g,this.startIncluded=i,this.endIncluded=r}}async function CreateClient(A){return await initWasm(A.getLogger),\"object\"==typeof process?setBrowser(!1):\"object\"==typeof window&&setBrowser(!0),new SyncClient(A)}class VirtualSyncSocket{constructor(A){_defineProperty$1(this,\"getSockets\",void 0),_defineProperty$1(this,\"internalEmitter\",new eventsExports.EventEmitter),this.getSockets=A,this.internalEmitter.setMaxListeners(512)}sendPacket(A){var e,t;null===(e=this.getSockets()[0])||void 0===e||null===(t=e.sendSyncPacket)||void 0===t||t.call(e,A)}}const resetIntervalInfo=()=>({joined:new Set,left:new Set,timeout:new Set,stateChanged:new Set});class PresenceSession extends EventBase{constructor(A,e,t,o,g,i,r,n,I){super(t,\"SessionSync\"),_defineProperty$1(this,\"syncClient\",void 0),_defineProperty$1(this,\"virtualSocket\",void 0),_defineProperty$1(this,\"ticket\",void 0),_defineProperty$1(this,\"operation\",OperationName.login),_defineProperty$1(this,\"startTime\",Date.now()),_defineProperty$1(this,\"seq\",Long$2.fromNumber(1,!0)),_defineProperty$1(this,\"seqSentStatuses\",[!1]),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"vid\",void 0),_defineProperty$1(this,\"instanceId\",void 0),_defineProperty$1(this,\"clientPtr\",0),_defineProperty$1(this,\"channelsUsersStates\",new Map),_defineProperty$1(this,\"getConsoleConfig\",void 0),_defineProperty$1(this,\"getLocalStateCache\",void 0),_defineProperty$1(this,\"timeoutInSnapshot\",new Map),_defineProperty$1(this,\"timeoutUsersWithoutInterval\",new Map),_defineProperty$1(this,\"intervalMode\",new Map),_defineProperty$1(this,\"intervalTimerId\",new Map),_defineProperty$1(this,\"intervalSnapshot\",new Map),_defineProperty$1(this,\"intervalInfos\",new Map),_defineProperty$1(this,\"presenceTimeout\",0),_defineProperty$1(this,\"dbObj\",void 0),_defineProperty$1(this,\"getVirtualSyncSocket\",void 0),_defineProperty$1(this,\"updateLastSubOrJoinOptionsCache\",void 0),_defineProperty$1(this,\"getLastSubscribeOrJoinOptions\",void 0),_defineProperty$1(this,\"expiredPresenceEvent\",new Map),_defineProperty$1(this,\"_decoupleChannels\",new Map),_defineProperty$1(this,\"_decoupleChannelPromises\",new Map),_defineProperty$1(this,\"_intervals4CreateColl\",[...CREATE_COLL_INTERVALS]),_defineProperty$1(this,\"cacheCrdtState\",void 0),_defineProperty$1(this,\"controlInterval\",((A,e)=>{var t,o,g;const i=null!==(t=null===(o=this.channelsUsersStates.get(A))||void 0===o?void 0:o.size)&&void 0!==t?t:0,r=Number(getParameter(\"PRESENCE_THRESHOLD\")||(null===(g=this.getConsoleConfig())||void 0===g?void 0:g[\"presence.occupancy\"]))||0;switch(this.log(\"occupancy: %d, channelOccupancy: %d\",r,i),this.log(this.intervalMode.get(A),A,\"intervalMode\"),e){case\"open\":var n,I;if(i>=r&&!this.intervalMode.get(A))this.log(\"open interval mode in channel: \".concat(replaceRangeWithAsterisk(A))),this.intervalMode.set(A,!0),this.intervalSnapshot.set(A,this.getIntervalSnapshot(A)),this.intervalTimerId.set(A,setInterval((()=>{this.emit(\"presence-interval\",A)}),1e3*(null!==(n=getParameter(\"PRESENCE_INTERVAL\"))&&void 0!==n?n:Number(null===(I=this.getConsoleConfig())||void 0===I?void 0:I[\"presence.interval\"])))),this.intervalInfos.set(A,resetIntervalInfo());break;case\"close\":i<r&&this.intervalMode.get(A)&&(this.log(\"close interval mode in channel: \".concat(replaceRangeWithAsterisk(A))),this.intervalMode.delete(A),this.emit(\"presence-interval\",A,!0),this.clearIntervalById(this.intervalTimerId.get(A)),this.intervalTimerId.delete(A))}})),_defineProperty$1(this,\"handlePresenceEvent\",(A=>e=>{console.log(\"events\",e);const{channelName:t,channelType:o}=getChannelDetailByName(A),g={eventType:\"SNAPSHOT\",channelType:o,channelName:t,publisher:\"\",stateChanged:{},interval:null,snapshot:[],timestamp:getUTCTimeBaseREG(this.context.offsetTime)},i=e.length;try{for(let b=0;b<i;b++){const{document:U,type:v,path:O,value:T}=e[b];if(g.publisher=U,\"DocSyncEnd\"===v){if(U===this.context.uid){const e=this.expiredPresenceEvent.get(A);e&&(this.emit(e,A),this.expiredPresenceEvent.delete(A))}return}if(\"Put\"===v&&!O&&!T){var r;g.eventType=\"REMOTE_JOIN\";const e=this.requestGetState(A,U,!0);if(null===(r=this.channelsUsersStates.get(A))||void 0===r||r.set(U,e),U===this.context.uid)this.log('\"'.concat(replaceRangeWithAsterisk(U),'\" receive self presence event in channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\"), type is JOIN.'));else{var n,I,s,C;if(this.log(\"remote user(\".concat(replaceRangeWithAsterisk(U),') join channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\") in presence subscribe callback')),this.intervalMode.get(A))if(this.log(\"interval mode\"),null!==(I=this.intervalInfos.get(A))&&void 0!==I&&I.timeout.has(U))null===(s=this.intervalInfos.get(A))||void 0===s||s.timeout.delete(U);else null===(C=this.intervalInfos.get(A))||void 0===C||C.joined.add(U);else this.log(\"emit presence,controlInterval open\"),this.emit(\"presence\",g),this.controlInterval(A,\"open\");null===(n=this.timeoutUsersWithoutInterval.get(A))||void 0===n||n.delete(U)}return}if(\"Delete\"===v&&!O&&!T){var E;if(null===(E=this.channelsUsersStates.get(A))||void 0===E||E.delete(U),g.eventType=\"REMOTE_LEAVE\",U===this.context.uid)this.log('\"'.concat(replaceRangeWithAsterisk(U),'\" receive self presence event in channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\"), type is ').concat(g.eventType,\". will need execute logout.\")),this.emit(\"doc-timeout\",A);else{var a,B;if(null!==(a=this.timeoutUsersWithoutInterval.get(A))&&void 0!==a&&a.has(U))return null===(B=this.timeoutUsersWithoutInterval.get(A))||void 0===B||B.delete(U),void this.log(\"timeout user(\".concat(replaceRangeWithAsterisk(U),\") left, ignore\"));if(this.intervalMode.get(A)){var Q,c,l;if(null!==(Q=this.intervalInfos.get(A))&&void 0!==Q&&Q.joined.has(U))null===(c=this.intervalInfos.get(A))||void 0===c||c.joined.delete(U);else null===(l=this.intervalInfos.get(A))||void 0===l||l.left.add(U);this.controlInterval(A,\"close\")}else this.emit(\"presence\",g)}return}if(\"Delete\"===v&&O===K_PRESENCE_EXPIRED){var u;g.eventType=\"REMOTE_JOIN\";const e=this.requestGetState(A,U,!0);if(null===(u=this.channelsUsersStates.get(A))||void 0===u||u.set(U,e),U===this.context.uid)this.log('\"'.concat(replaceRangeWithAsterisk(U),'\" receive self presence event in channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\"), type is REJOIN.'));else{var h,d,p,y;if(this.log(\"remote user(\".concat(replaceRangeWithAsterisk(U),') rejoin channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\") in presence subscribe callback')),this.intervalMode.get(A))if(null!==(d=this.intervalInfos.get(A))&&void 0!==d&&d.timeout.has(U))null===(p=this.intervalInfos.get(A))||void 0===p||p.timeout.delete(U);else null===(y=this.intervalInfos.get(A))||void 0===y||y.joined.add(U);else this.emit(\"presence\",g),this.controlInterval(A,\"open\");null===(h=this.timeoutUsersWithoutInterval.get(A))||void 0===h||h.delete(U)}return}if(\"Put\"===v&&O===K_PRESENCE_EXPIRED){var D,R;if(null===(D=this.channelsUsersStates.get(A))||void 0===D||D.delete(U),g.eventType=\"REMOTE_TIMEOUT\",U===this.context.uid)this.log('\"'.concat(replaceRangeWithAsterisk(U),'\" receive self presence event in channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\"), type is TIMEOUT.')),this.expiredPresenceEvent.set(A,\"doc-timeout\");else if(this.log(\"remote user(\".concat(replaceRangeWithAsterisk(U),') timeout at channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\") in presence subscribe callback')),this.intervalMode.get(A)){var w,f,S;if(null!==(w=this.intervalInfos.get(A))&&void 0!==w&&w.joined.has(U))null===(f=this.intervalInfos.get(A))||void 0===f||f.joined.delete(U);else null===(S=this.intervalInfos.get(A))||void 0===S||S.timeout.add(U);this.controlInterval(A,\"close\")}else if(null===(R=this.timeoutUsersWithoutInterval.get(A))||void 0===R||!R.has(U)){var N;null===(N=this.timeoutUsersWithoutInterval.get(A))||void 0===N||N.add(U),this.emit(\"presence\",g)}return}if(!checkKeyValidity(O[0]))return void this.log(\"key is invalid in presence subscribe callback, key(\".concat(O,\")\"));if(\"Delete\"===v&&O&&!T&&!e.some((A=>\"Put\"===A.type&&A.path===K_PRESENCE_EXPIRED))){var M,_;g.eventType=\"REMOTE_STATE_CHANGED\";const r=null!==(M=null===(_=this.channelsUsersStates.get(A))||void 0===_?void 0:_.get(U))&&void 0!==M?M:{};if(delete r[O],g.stateChanged=r,U===this.context.uid)this.log('\"'.concat(replaceRangeWithAsterisk(U),'\" receive self presence event in channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\"), type is ').concat(g.eventType,\", state is \").concat(g.stateChanged));else if(O[0]!==K_SYNC_INTERNAL_KEY_PREFIX){var k;if(this.intervalMode.get(A))null===(k=this.intervalInfos.get(A))||void 0===k||k.stateChanged.add(U);else b===findLastIndex$1(e,(A=>{let{type:t}=A;return t===e[b].type}))&&this.emit(\"presence\",g)}if(b===i-1)return}if(\"Put\"===v&&O&&T){var L,G;const e=null!==(L=null===(G=this.channelsUsersStates.get(A))||void 0===G?void 0:G.get(U))&&void 0!==L?L:{};if(g.eventType=\"REMOTE_STATE_CHANGED\",e[O]=T,g.stateChanged=e,U===this.context.uid)this.log('\"'.concat(replaceRangeWithAsterisk(U),'\" receive self presence event in channel(\"').concat(o,'\"-\"').concat(replaceRangeWithAsterisk(t),'\"), type is ').concat(g.eventType,\", state is \").concat(g.stateChanged));else if(O[0]!==K_SYNC_INTERNAL_KEY_PREFIX){var m;if(this.intervalMode.get(A))null===(m=this.intervalInfos.get(A))||void 0===m||m.stateChanged.add(U);else b===i-1&&this.emit(\"presence\",g)}if(b===i-1)return}}}catch(A){this.warn(\"handlePresenceEvent error: %o\",A)}})),this.context=A,this.context.startTime=this.startTime,this.updateLastSubOrJoinOptionsCache=o,this.getLastSubscribeOrJoinOptions=g,this.getConsoleConfig=i,this.getLocalStateCache=r,this.getVirtualSyncSocket=n,this.cacheCrdtState=I,getParameter(\"PRESENCE_RPC_TIMEOUT\"),this.instanceId=e,this.setMaxListeners(512),this.log(\"The instanceId is %s\",this.instanceId.toString()),this.on(\"presence-interval\",((A,e)=>{var t,o,g,i,r,n,I,s;const{channelType:C,channelName:E}=getChannelDetailByName(A),a={eventType:\"INTERVAL\",channelType:C,channelName:E,publisher:\"\",stateChanged:{},interval:{join:{users:[],userCount:0},leave:{users:[],userCount:0},timeout:{users:[],userCount:0},userStateList:[]},snapshot:[],timestamp:getUTCTimeBaseREG(this.context.offsetTime)},{alreadyJoinedUsers:B,alreadyTimeoutUsers:Q}=this.intervalSnapshot.get(A);null===(t=this.intervalInfos.get(A))||void 0===t||t.timeout.forEach((A=>{var e;B.includes(A)&&(null===(e=a.interval)||void 0===e||e.timeout.users.push(A),a.interval.timeout.userCount++)})),null===(o=this.intervalInfos.get(A))||void 0===o||o.left.forEach((A=>{var e;B.includes(A)&&(null===(e=a.interval)||void 0===e||e.leave.users.push(A),a.interval.leave.userCount++)})),null===(g=this.intervalInfos.get(A))||void 0===g||g.joined.forEach((A=>{a.interval.join.users.push(A),a.interval.join.userCount++}));const c=B.filter((e=>{var t,o;return!(null!==(t=this.intervalInfos.get(A))&&void 0!==t&&t.left.has(e)||null!==(o=this.intervalInfos.get(A))&&void 0!==o&&o.timeout.has(e))})).concat([...null!==(i=null===(r=this.intervalInfos.get(A))||void 0===r?void 0:r.joined)&&void 0!==i?i:new Set]),l=Q.filter((e=>{var t,o;return!(null!==(t=this.intervalInfos.get(A))&&void 0!==t&&t.joined.has(e)||null!==(o=this.intervalInfos.get(A))&&void 0!==o&&o.left.has(e))})).concat([...null!==(n=null===(I=this.intervalInfos.get(A))||void 0===I?void 0:I.timeout)&&void 0!==n?n:new Set]);if(null===(s=this.intervalInfos.get(A))||void 0===s||s.stateChanged.forEach((e=>{if(c.includes(e)){var t,o,g;null===(t=this.intervalInfos.get(A))||void 0===t||t.stateChanged.delete(e);const i=null!==(o=null===(g=this.channelsUsersStates.get(A))||void 0===g?void 0:g.get(e))&&void 0!==o?o:{};a.interval.userStateList.push({userId:e,states:i,statesCount:Object.keys(i).length})}})),a.interval){const{join:A,leave:e,timeout:t,userStateList:o}=a.interval;(A.userCount>0||e.userCount>0||t.userCount>0||o.length>0)&&this.emit(\"presence\",a)}this.intervalSnapshot.set(A,{alreadyJoinedUsers:c,alreadyTimeoutUsers:l}),this.intervalInfos.set(A,resetIntervalInfo()),e&&this.timeoutUsersWithoutInterval.set(A,new Set(l))}))}updateTicket(A){const{ticket:e,vid:t}=A;this.ticket=e,this.vid=t}handlePacket(A){var e;const t=A.length,o=getSyncPacketUri(A);this.log(\"received packet, uri: %d, length: %d\",o,t),null===(e=this.virtualSocket)||void 0===e||e.internalEmitter.emit(\"received-packet\",A)}handleConnected(){var A;null===(A=this.virtualSocket)||void 0===A||A.internalEmitter.emit(\"connected\")}handleDisconnected(){var A;null===(A=this.virtualSocket)||void 0===A||A.internalEmitter.emit(\"disconnected\")}async initSync(){this.log(\"start logging sync...\");if(!(void 0===this.syncClient))return this.log(\"not firstInit\"),await this.connectDatabase(),this.cacheCrdtState(),this.manualShakeHand(),void this.handleConnected();let A=0;switch(this.context.rtmConfig.logLevel){case\"debug\":A=0;break;case\"info\":A=1;break;case\"warn\":A=2;break;default:A=3}const e=new VirtualSyncSocket(this.getVirtualSyncSocket);this.virtualSocket=e,e.internalEmitter.on(\"connected\",(()=>{this.log(\"virtual socket connected\")})),e.internalEmitter.on(\"disconnected\",(()=>{this.warn(\"virtual socket disconnected\")}));const t=new SyncConfig(this.context.appId,A,3e3,!0,!0,this.context.uid,(()=>({handleDebugLog:this.log,handleInfoLog:this.info,handleWarnLog:this.warn,handleErrorLog:this.logError})),(()=>e));try{var o,g;const A=this.context.heartbeatInterval+(null!==(o=getParameter(\"RTM_LINK_KEEP_ALIVE_TIMEOUT\"))&&void 0!==o?o:CONFIGURABLE_KEY_RTM_LINK_KEEP_ALIVE_TIMEOUT),e=await CreateClient(t);this.log(\"create sync client success\");const i=e.ExceptionCallback();null==i||i.addListener(\"exception\",(async A=>{var e;let[t,o]=A;if(this.logError(\"exception info: %o\",{db:t,coll:o}),t!==PRESENCE_DATABASE)return;const g=this.getChannelNameFromCollName(o),{withPresence:i,beQuiet:r}=null!==(e=this.getLastSubscribeOrJoinOptions().get(g))&&void 0!==e?e:{};await Promise.all([i?this.unSubPresence(g):this.unsubScribeSelfPresence(g,!1),r?void 0:this.cacheStateAndDelDoc(g)]),this.leave(g),await this.join(g,i,!1),r||this.putChannelDocAndSetState(g),i&&this.subPresence(g)})),e.SetConnectionTimeout(A/1e3),this.handleConnected(),this.syncClient=e,e.SetTicket(\"rtm\",null!==(g=this.ticket)&&void 0!==g?g:this.context.appId),this.sendTick(),this.log(\"send tick success, will connect database\"),await this.connectDatabase()}catch(A){this.logError(\"init sync error: \".concat(A));const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_REJECTED);throw new RtmUnavailableError(this.operation,[t+\"init sync error\"],e)}}cacheStateAndDelDoc(A){this.getStateAndSetByLocal(A),this.delChannelDoc(A)}async connectDatabase(){var A,e;this.log(\"\".concat(syncRpcStart,\": syncClient connectDatabase\")),await timeoutPromise(null==this||null===(A=this.syncClient)||void 0===A?void 0:A.ConnectDatabase(PRESENCE_DATABASE),DEFAULT_RPC_TIMEOUT_TIME,this.operation,RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT),this.sendTick(),this.log(\"\".concat(syncRpcEnd,\": syncClient connectDatabase\"));const t=null==this||null===(e=this.syncClient)||void 0===e?void 0:e.Database(PRESENCE_DATABASE);this.dbObj=t}async renewKey(A){const e=OperationName.renewToken;try{var t;this.log(\"\".concat(syncRpcStart,\": \").concat(e)),null===(t=this.syncClient)||void 0===t||t.SetTicket(\"rtm\",A),this.getSyncConnected()&&this.sendTick(),this.log(\"\".concat(syncRpcEnd,\": \").concat(e))}catch(A){this.logError(\"\".concat(syncRpcEnd,\": \").concat(e,\" by rpc failure. error is \").concat(A))}return!0}leave(A){var e;const t=this.getChannelCollName(A);null===(e=this.dbObj)||void 0===e||e.DestroyCollection(t),this.getSyncConnected()&&this.sendTick()}delChannelDoc(A){var e;if(this._decoupleChannels.has(A)&&getParameter(\"DECOUPLE_SYNC\"))return;const t=this.getChannelCollName(A),o=this.getColl(t,!0,\"delChannelDoc\");null===(e=this.dbObj)||void 0===e||e.CancelAutoKeepalive(t,this.context.uid),null==o||o.DelDoc(this.context.uid),this.getSyncConnected()&&this.sendTick(),this.log(\"Delete channel(\".concat(replaceRangeWithAsterisk(A),\") document succeed.\")),this.updateLastSubOrJoinOptionsCache(A,\"beQuiet\",!0)}async logoutHandler(){var A;this.log(\"\".concat(syncRpcStart,\": disconnectDatabase\"));try{var e;await timeoutPromise(null===(e=this.syncClient)||void 0===e?void 0:e.DisConnectDatabase(PRESENCE_DATABASE),DEFAULT_RPC_TIMEOUT_TIME,OperationName.logout,0)}catch(A){this.warn(\"disconnectDatabase timeout\")}this.log(\"\".concat(syncRpcEnd,\": disconnectDatabase\")),null===(A=this.syncClient)||void 0===A||A.Logout(),this.getSyncConnected()&&this.sendTick()}clearIntervalById(A){clearInterval(A)}getIntervalSnapshot(A){var e,t;const o=[...null!==(e=this.timeoutUsersWithoutInterval.get(A))&&void 0!==e?e:new Set],g=[];return null===(t=this.channelsUsersStates.get(A))||void 0===t||t.forEach(((A,e)=>{o.includes(e)||g.push(e)})),{alreadyJoinedUsers:g,alreadyTimeoutUsers:o}}clearIntervalCacheOfChannel(A){this.timeoutInSnapshot.delete(A),this.intervalMode.delete(A),this.intervalTimerId.delete(A),this.intervalInfos.delete(A),this.timeoutUsersWithoutInterval.delete(A),this.intervalSnapshot.delete(A)}emitPresenceSnapshot(A){const e=this.getCollUsers(A,!0,{querySnapshot:!0}),t=new Map;this.timeoutInSnapshot.set(A,new Set),this.log(\"presence snapshot: %o\",e);const o=e.filter((e=>{var o;let{userId:g,states:i}=e;return(null===(o=this.timeoutInSnapshot.get(A))||void 0===o||!o.has(g))&&(t.set(g,i),!0)}));this.channelsUsersStates.set(A,t);const{channelName:g,channelType:i}=getChannelDetailByName(A),r={eventType:\"SNAPSHOT\",channelType:i,channelName:g,publisher:\"\",stateChanged:{},interval:null,snapshot:o,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emit(\"presence\",r)}async join(A,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=!t,g=Date.now();try{var i;const o=t?\"re-\":\"\",g=A.includes(streamChannel_prefix),r=g?OperationName.join:OperationName.subscribe;this.validateSyncConnected(r);const n=this.getChannelCollName(A);if(null!==this.getColl(n))return void this.log(\"\".concat(o).concat(r,\" channel(\").concat(replaceRangeWithAsterisk(A),\") already.\"));this.log(\"\".concat(syncRpcStart,\": \").concat(o).concat(r,\" channel(\").concat(replaceRangeWithAsterisk(A),\")\"));const I=Date.now();await timeoutPromise(null===(i=this.dbObj)||void 0===i?void 0:i.CreateCollection(n,e?[\"*\"]:[this.context.uid],e?[\"*\"]:[this.context.uid]),COMMON_REQUEST_TIMEOUT,r,g?RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED:RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_TIMEOUT);const s=Date.now();this.log(\"\".concat(syncRpcEnd,\": \").concat(o).concat(r,\" channel(\").concat(replaceRangeWithAsterisk(A),\") succeed. cost: \").concat(s-I,\"ms.\")),e||this.withoutPresenceSubSelf(A)}catch(A){throw A}finally{if(o){const{channelName:e,channelType:t}=getChannelDetailByName(A),o=this.incGetSeq();this.context.addReportEvents(\"ChannelPresenceSnapshotEvent\",{channelName:e,channelType:ChannelTypeEnum[t],userId:this.context.uid,sid:this.context.sid,lts:Long$2.fromNumber(Date.now()),elapse:Long$2.fromNumber(Date.now()-g),vid:Long$2.fromString(getParameter(\"VID\").get(this.context.appId)||\"0\"),reqId:o})}}}async joinPresenceColl(A,e){var t,o,g;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.info(\"joinPresenceColl: %s, customOperation: %s, withPresence: %s\",A,i,e.withPresence),null!==(t=this._decoupleChannels.get(A))&&void 0!==t&&t.creating&&this.leave(A),this._decoupleChannels.has(A)||this._decoupleChannels.set(A,_objectSpread2(_objectSpread2({},e),{},{creating:!0})),this._decoupleChannels.has(A)&&i){const t=this._decoupleChannels.get(A);this._decoupleChannels.set(A,_objectSpread2(_objectSpread2(_objectSpread2({},t),e),{},{creating:!0}))}i||this._decoupleChannels.set(A,_objectSpread2(_objectSpread2({},e),{},{creating:!0}));const r=null!==(o=null===(g=this._decoupleChannels.get(A))||void 0===g?void 0:g.createTs)&&void 0!==o?o:Date.now();try{const{withPresence:t,reJoinCauseReconnect:o=!1}=e,g=this.join(A,t,o);this._decoupleChannelPromises.set(A,g),await g,this.info(\"onCreateCollection: %s\",A),this.onCreateCollection(A,e),this._decoupleChannels.delete(A)}catch(t){var n,I;const o=null!==(n=null===(I=this._decoupleChannels.get(A))||void 0===I?void 0:I.retryCnt)&&void 0!==n?n:0;if(!getParameter(\"DECOUPLE_SYNC\"))throw this._decoupleChannels.delete(A),t;var s;if(this.warn(\"joinPresenceColl error: %s, retryCnt: %d, withPresence: %s, error: %o\",A,o,e.withPresence,t),this._decoupleChannels.has(A)&&null!==(s=this._decoupleChannels.get(A))&&void 0!==s&&s.creating){var C;const t=null!==(C=this._decoupleChannels.get(A))&&void 0!==C?C:e;this._decoupleChannels.set(A,_objectSpread2(_objectSpread2({},t),{},{createTs:r,creating:!1,retryCnt:o+1}))}}finally{this._decoupleChannelPromises.delete(A)}}onCreateCollection(A,e){const{needDelDoc:t,needPutDoc:o=!1,needSub:g=!1,reJoinCauseReconnect:i=!1}=e;t&&this.cacheStateAndDelDoc(A),o&&this.putChannelDocAndSetState(A,i),g&&this.subPresence(A)}intervalCreateColl(){this._decoupleChannels.forEach(((A,e)=>{const t=Date.now(),{createTs:o=t,retryCnt:g=0}=A;t-o>=this._getExpectedRetryTs(g)&&!A.creating&&(this.info(\"intervalCreateColl, channel: %s, diff: %d, retryCnt: %d\",e,t-o,g),this.joinPresenceColl(e,A,!1))}))}withoutPresenceSubSelf(A){const e=this.getChannelCollName(A),t=this.getColl(e,!0,\"withoutPresenceSubSelf\"),o=null==t?void 0:t.Subscribe();null==o||o.addListener(\"document-events\",(e=>{const t=e.length;for(let o=0;o<t;o++){const{document:t,type:g,path:i,value:r}=e[o];if(t===this.context.uid){if(\"DocSyncEnd\"===g){const e=this.expiredPresenceEvent.get(A);return void(e&&(this.emit(e,A),this.expiredPresenceEvent.delete(A)))}\"Put\"===g&&i===K_PRESENCE_EXPIRED&&this.expiredPresenceEvent.set(A,\"doc-timeout\"),\"Delete\"!==g||i||r||this.emit(\"doc-deleted\",A)}}}))}unsubScribeSelfPresence(A){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=this._decoupleChannels.has(A);if(!getParameter(\"DECOUPLE_SYNC\")||!t){const e=this.getChannelCollName(A),t=this.getColl(e,!0,\"unSubPresence\");null==t||t.UnSubscribe(),this.getSyncConnected()&&this.sendTick()}e&&this.getLocalStateCache().delete(A)}subPresence(A){var e;this.subAndAddPresenceEventListener(A),this.emitPresenceSnapshot(A),this.timeoutUsersWithoutInterval.set(A,null!==(e=this.timeoutInSnapshot.get(A))&&void 0!==e?e:new Set),this.controlInterval(A,\"open\"),this.updateLastSubOrJoinOptionsCache(A,\"withPresence\",!0)}unSubPresence(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=this._decoupleChannels.has(A);if(!getParameter(\"DECOUPLE_SYNC\")||!t){const e=this.getChannelCollName(A),t=this.getColl(e,!0,\"unSubPresence\");null==t||t.UnSubscribe(),this.getSyncConnected()&&this.sendTick()}this.clearIntervalById(this.intervalTimerId.get(A)),this.clearIntervalCacheOfChannel(A),e&&this.getLocalStateCache().delete(A),this.updateLastSubOrJoinOptionsCache(A,\"withPresence\",!1)}leaveRetryChannels(A){this.info(\"leaveRetryChannels: %o\",A),A.forEach((A=>{this._decoupleChannels.delete(A),this._decoupleChannelPromises.delete(A)}))}putChannelDocAndSetState(A){var e,t,o;let g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.getChannelCollName(A),r=this.getColl(i,!0,\"putChannelDocAndSetState\"),n={};(null!==(e=this.getLocalStateCache().get(A))&&void 0!==e?e:new Map).forEach(((A,e)=>{n[e]=A})),this.log(\"local states: %o, reJoinCauseReconnect: %s\",n,g);const I=null==r?void 0:r.Doc(this.context.uid),s=!!I,C=null!==(t=null==I?void 0:I.Get())&&void 0!==t?t:{};this.log(\"remote doc exist: \".concat(s,\", remote state: %o\"),C),s&&C[K_PRESENCE_EXPIRED]&&(null==r||r.DelDoc(this.context.uid)),s&&!C[K_PRESENCE_EXPIRED]||(null==r||r.PutDoc(this.context.uid),this.log(\"Put channel(\".concat(replaceRangeWithAsterisk(A),\") document succeed.\")));const E=null==r?void 0:r.Doc(this.context.uid);if(null===(o=this.dbObj)||void 0===o||o.SetAutoKeepalive(i,this.context.uid,this.context.rtmConfig.presenceTimeout),this.getSyncConnected()&&this.sendTick(),g||this.getLocalStateCache().has(A)){if(this.log(\"update user state in channel(\".concat(replaceRangeWithAsterisk(A),\") local cache.\")),!s||C[K_PRESENCE_EXPIRED])this.log(\"remote doc not exist or expired, directly set\"),null==E||E.Set(n);else{const A=Object.keys(C).filter((A=>!n.hasOwnProperty(A)&&A!==K_PRESENCE_EXPIRED));A.length>0&&(null==E||E.Del(A));const e=Object.keys(n).filter((A=>!C.hasOwnProperty(A)||C[A]!==n[A]));e.length>0&&(null==E||E.Set(n)),this.log(\"diff state: %o\",{addOrChangedKeys:e,needDelKeys:A})}this.getSyncConnected()&&this.sendTick()}else this.log(\"first join presence and without local state\");this.updateLastSubOrJoinOptionsCache(A,\"beQuiet\",!1),this.getLocalStateCache().delete(A)}subAndAddPresenceEventListener(A){const e=this.getChannelCollName(A),t=this.getColl(e,!0,\"subAndAddPresenceEventListener\"),o=null==t?void 0:t.Subscribe();null==o||o.addListener(\"document-events\",this.handlePresenceEvent(A))}requestSetState(A,e){const t=this.getChannelCollName(A),o=this.getColl(t,!0,\"requestSetState\"),g=null==o?void 0:o.Doc(this.context.uid);null==g||g.Set(e),this.getSyncConnected()&&this.sendTick()}requestRemoveState(A,e){var t;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const g=this.getChannelCollName(A),i=this.getColl(g,!0,\"requestRemoveState\"),r=null==i?void 0:i.Doc(this.context.uid),n=null!==(t=null==r?void 0:r.Get())&&void 0!==t?t:{};null==r||r.Del(Object.keys(o?n:e)),this.getSyncConnected()&&this.sendTick()}requestGetState(A,e){var t;arguments.length>2&&void 0!==arguments[2]&&arguments[2]||e===this.context.uid||this.validateSyncConnected(OperationName.presenceGetState);const o=OperationName.presenceGetState,g=this.getChannelCollName(A),i=this.getColl(g,!0,\"requestGetState\"),r=null==i?void 0:i.Doc(e);if(isNil$1(r)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_USER_NOT_EXIST);throw new RtmUnavailableError(o,[e],A)}const n=null!==(t=null==r?void 0:r.Get())&&void 0!==t?t:{};return this.delKeyExpired(n),n}getStateAndSetByLocal(A){const e=null==this?void 0:this.requestGetState(A,this.context.uid,!0),t=new Map;e&&Object.keys(e).forEach((A=>{t.set(A,e[A])})),null==this||this.getLocalStateCache().set(A,t)}async requestRpcGetState(A,e){const t=Date.now(),o=this.incGetSeq();let g=0;try{var i;const t=new QueryOption(e,\"\",!1,!1,1),[o]=await timeoutPromise(null===(i=this.syncClient)||void 0===i?void 0:i.QueryDoc(PRESENCE_DATABASE,this.getChannelCollName(A),t),COMMON_REQUEST_TIMEOUT,OperationName.presenceGetState,RTMErrorCode.RTM_ERROR_PRESENCE_OPERATION_TIMEOUT);let g={};return o.forEach(((A,t)=>{if(t===e){try{g=JSON.parse(A)}catch(A){this.warn(\"parse doc error: \".concat(A))}this.delKeyExpired(g)}})),g}catch(A){const{serverCode:e,errorCode:t}=A;throw g=null!=e?e:g,A}finally{this.reportRpcEvent(\"getState\",{requestts:t,reqSeq:o,errCode:g})}}async requestRpcWhereNow(A){const e=Date.now(),t=this.incGetSeq();let o=0;try{var g;this.validateSyncConnected(OperationName.whereNow);const e=!1,t=!1,o=GlobalPresenceString(this.vid)+\"/\"+A,i=new QueryOption(o,\"\",e,t,1);this.log(\"whereNow query options: %o\",{start:o,end:\"\",keysOnly:e,countOnly:t,limit:1});const[r]=await timeoutPromise(null===(g=this.syncClient)||void 0===g?void 0:g.QueryDoc(PRESENCE_DATABASE,K_GLOBAL_PRESENCE_COLLECTION,i),COMMON_REQUEST_TIMEOUT,OperationName.whereNow,RTMErrorCode.RTM_ERROR_PRESENCE_OPERATION_TIMEOUT),n={channels:[],totalChannel:0,timestamp:0};return r.forEach(((A,e)=>{if(e===o){let e=null;try{e=JSON.parse(A),this.log(\"whereNow doc: %o\",e)}catch(A){e={},this.warn(\"parse doc error: \".concat(A))}const t=Object.keys(e).filter((A=>A[0]!==K_SYNC_INTERNAL_KEY_PREFIX));this.log(\"whereNow channels: %o\",t),t.forEach((A=>{const{channelName:e,channelType:t}=getChannelDetailByName(A);n.channels.push({channelName:e,channelType:t})})),n.totalChannel=t.length}})),n}catch(A){const{serverCode:e,errorCode:t}=A;throw o=null!=e?e:t,A}finally{this.reportRpcEvent(\"whereNow\",{requestts:e,reqSeq:t,errCode:o})}}async requestRPCWhoNow(A,e,t,o){const g=Date.now(),i=this.incGetSeq();let r=0;try{var n,I;const g=t&&!o,i=!t&&!o,r=Number(getParameter(\"PRESENCE_THRESHOLD\")||(null===(n=this.getConsoleConfig())||void 0===n?void 0:n[\"presence.occupancy\"]))||0,s=i;i&&e&&this.warn(\"countOnly and page is not compatible. page of param will be ignored.\");const C=new QueryOption(s?\"\":atob(e),\"\",g,i,s?0:r,!e,!0),E=this.getChannelCollName(A),[a,B,Q]=await timeoutPromise(null===(I=this.syncClient)||void 0===I?void 0:I.QueryDoc(PRESENCE_DATABASE,E,C),COMMON_REQUEST_TIMEOUT,OperationName.whoNow,RTMErrorCode.RTM_ERROR_PRESENCE_OPERATION_TIMEOUT),c=[],l={timestamp:0,occupants:c,nextPage:\"\",totalOccupancy:B};if(i)return l;{let A=\"\";if(g?a.forEach((e=>{c.push({userId:e,states:{},statesCount:0}),c.length===a.length&&Q&&(A=e)})):a.forEach(((e,t)=>{let g={};try{o&&(g=JSON.parse(e))}catch(A){this.warn(\"parse doc error: \".concat(A))}this.delKeyExpired(g),c.push({userId:t,states:g,statesCount:Object.keys(g).length}),c.length===a.size&&Q&&(A=t)})),Q){const e=btoa(A);l.nextPage=e}return l}}catch(A){const{serverCode:e,errorCode:t}=A;throw r=null!=e?e:t,A}finally{this.reportRpcEvent(\"whoNow\",{requestts:g,reqSeq:i,errCode:r})}}delKeyExpired(A){delete A[K_PRESENCE_EXPIRED]}async requestWhoNow(A,e,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"\";if(this.validateSyncConnected(OperationName.whoNow),null===this.getColl(this.getChannelCollName(A)))return await this.requestRPCWhoNow(A,o,e,t);const g=this.getChannelCollName(A),i=this.getColl(g,!0,\"requestWhoNow\"),r=i?this.getCollUsers(A,t,{collObj:i}):[];return{occupants:e?r:[],totalOccupancy:r.length,nextPage:\"\",timestamp:0}}getCollUsers(A,e,t){var o,g;const i=this.getChannelCollName(A),r=null!==(o=null==t?void 0:t.collObj)&&void 0!==o?o:this.getColl(i,!0,\"getCollUsers\"),n=null!==(g=null==r?void 0:r.Docs())&&void 0!==g?g:new Map,I=[];return n.forEach(((o,g)=>{const i=o.Get(),r=i[K_PRESENCE_EXPIRED];var n;(this.delKeyExpired(i),r&&null!=t&&t.querySnapshot)&&(null===(n=this.timeoutInSnapshot.get(A))||void 0===n||n.add(g));r||I.push({userId:g,states:e?i:{},statesCount:e?Object.keys(i).length:0})})),I}getColl(A){var e;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";const g=null===(e=this.dbObj)||void 0===e?void 0:e.Coll(A);return null===g&&t&&this.warn(\"coll(\".concat(A,\") is null in \").concat(o,\".\")),g}getChannelCollName(A){return ChannelQueryString(this.vid,A)}getChannelNameFromCollName(A){const{prefixChannelName:e}=extractPrefixChannelName(A);return null!=e?e:\"\"}manualShakeHand(){var A;this.getSyncConnected()&&(null===(A=this.syncClient)||void 0===A||A.Shakehand())}sendTick(){var A;null===(A=this.syncClient)||void 0===A||A.Tick()}validateSyncConnected(A){var e;if(!(null===(e=this.syncClient)||void 0===e?void 0:e.GetConnectionState())){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_NOT_CONNECTED);throw new RtmUnavailableError(A,[t],e)}}getSyncConnected(){var A;return null===(A=this.syncClient)||void 0===A?void 0:A.GetConnectionState()}getSelfDoc(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";const t=this.getChannelCollName(A),o=this.getColl(t,!0,e);return null==o?void 0:o.Doc(this.context.uid)}incGetSeq(){return this.seq=this.seq.add(1),this.seq}reportRpcEvent(A,e){let{requestts:t,reqSeq:o,errCode:g}=e;this.context.addReportEvents(\"SyncOperateEvent\",{lts:Long$2.fromNumber(Date.now()),ip:\"\",userid:this.context.uid,vid:Long$2.fromString(getParameter(\"VID\").get(this.context.appId)||\"0\"),sid:this.context.sid,usersid:this.context.sid,requestts:Long$2.fromNumber(t),replyts:Long$2.fromNumber(Date.now()),target:this.context.uid,eventtype:A,revision:Long$2.fromNumber(0),uuid:\"\".concat(o,\"_\").concat(this.instanceId),sdktype:4,flags:Long$2.fromNumber(0),code:g,seq:o,index:{index1:this.context.uid,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},lock:\"\",lockrev:Long$2.fromNumber(0),subtarget:this.context.uid,sdkip:\"\"})}_getExpectedRetryTs(A){let e=0;const t=this._intervals4CreateColl.length;if(A>t)return 1e3*(this._intervals4CreateColl.reduce(((A,e)=>A+e),0)+(A-t)*this._intervals4CreateColl[t-1]);for(let t=0;t<A;t++)e+=this._intervals4CreateColl[t];return 1e3*e}}const JOIN_LOCK_FLAG=1,JOIN_STORAGE_FLAG=2,JOIN_PRESENCE_FLAG=4,JOIN_MESSAGE_FLAG=8,JOIN_BE_QUIET_FLAG=16;class MainSession{constructor(A,e,t,o,g,i,r){_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"registrarSession\",void 0),_defineProperty$1(this,\"presenceSession\",void 0),_defineProperty$1(this,\"lastSubscribeOrJoinOptions\",new Map),this.context=A,this.presenceSession=new PresenceSession(A,t,e,(()=>this.updateLastSubOrJoinOptionsCache),(()=>this.lastSubscribeOrJoinOptions),o,g,this.getVirtualSyncSocket.bind(this),i);const n=new Connection(A,e,!1);this.registrarSession=new RegistrarSession(A,n,t,e,(()=>this.updateLastSubOrJoinOptionsCache),(()=>this.lastSubscribeOrJoinOptions),this.presenceSession.manualShakeHand.bind(this.presenceSession),this.presenceSession.sendTick.bind(this.presenceSession),this.presenceSession.initSync.bind(this.presenceSession),r),this.registrarSession.on(\"syncTicketUpdated\",(A=>{this.presenceSession.updateTicket(A)})),this.registrarSession.on(\"syncConnected\",(()=>{this.presenceSession.handleConnected()})),this.registrarSession.on(\"syncDisconnected\",(()=>{this.presenceSession.handleDisconnected()})),this.registrarSession.on(\"syncPacket\",(A=>{this.presenceSession.handlePacket(A)}))}getRegistrarSession(){return this.registrarSession}getPresenceSession(){return this.presenceSession}updateLastSubOrJoinOptionsCache(A,e,t){const o=_objectSpread2(_objectSpread2({},this.lastSubscribeOrJoinOptions.get(A)),{},{[e]:t}),g=this.getNewJoinFlag(o);this.lastSubscribeOrJoinOptions.set(A,_objectSpread2(_objectSpread2({},o),{},{joinFlag:g}))}getVirtualSyncSocket(){return this.registrarSession.getVirtualSyncSocket()}notifyNetworkChange(A){this.registrarSession.notifyNetworkChange(A)}reportChnJoin(A,e,t){var o;const g=this.getNewJoinFlag(e),i=(null===(o=this.lastSubscribeOrJoinOptions.get(A))||void 0===o?void 0:o.joinFlag)!==g;this.lastSubscribeOrJoinOptions.set(A,_objectSpread2(_objectSpread2({},e),{},{joinFlag:g})),A.startsWith(streamChannel_prefix)||i&&this.context.addReportEvents(\"ChnJoin\",{cname:A,lts:Long$2.fromNumber(Date.now()),userId:this.context.uid,elapse:getElapse(this.getRegistrarSession().startTime),errCode:0,sid:getSid(this.getRegistrarSession().instanceId),joinFlag:new Long$2(g,0,!0),seq:Long$2.fromNumber(t)})}getNewJoinFlag(A){let e=0;return null!=A&&A.withPresence&&(e|=JOIN_PRESENCE_FLAG),null!=A&&A.withLock&&(e|=JOIN_LOCK_FLAG),null!=A&&A.withMetadata&&(e|=JOIN_STORAGE_FLAG),null!=A&&A.withMessage&&(e|=JOIN_MESSAGE_FLAG),null!=A&&A.beQuiet&&(e|=JOIN_BE_QUIET_FLAG),e}}function genGetMainSession(A){return()=>{const e=A();if(!e){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(\"Client is not logged in. Cannot do the operation\",[e],A)}return e}}class LocalTopic extends EventBase{constructor(A,e,t,o){super(e,\"LocalTopic\"),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"topicName\",void 0),_defineProperty$1(this,\"localDatachannel\",void 0),this.context=A,this.topicName=t,this.localDatachannel=o}encodeMessage(A,e,t,o,g){return StreamMessageProtocol.encode(_objectSpread2({messageType:o,payload:A,encrypted:t,payloadLength:e},g?{customType:g}:{})).finish()}async publishTopicMessage(A,e,t){const o=this.localDatachannel,g=this.topicName;if(!o){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_JOINED);throw new RtmUnavailableError(A,[t],e)}if(\"open\"!==o.readyState){this.log(\"send topic(%s) message failed. readyState of datachannel is \".concat(o.readyState),g);const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);throw new RtmUnavailableError(A,[t],e)}const{initEncryption:i,iv:r,key:n,keyLength:I}=this.context.encryptionInfo,s=i,C=\"string\"==typeof e?(new TextEncoder).encode(e):e,E=C.byteLength;try{const A=s?encrypt(C,n,r,I):C,g=\"string\"==typeof e?1:0;o.send(this.encodeMessage(A,E,s,g,null==t?void 0:t.customType))}catch(e){const{code:t,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_ENCRYPT_MESSAGE_FAILED);throw new RtmUnavailableError(A,[o],t)}}getDataChannel(){return this.localDatachannel}}class RemoteTopic extends EventBase{constructor(A,e,t,o,g){super(e,\"RemoteTopic\"),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"topicName\",void 0),_defineProperty$1(this,\"channelName\",void 0),_defineProperty$1(this,\"users\",new Map),_defineProperty$1(this,\"emitTopicMessage\",void 0),_defineProperty$1(this,\"internalEmitter\",new EventEmitter$1),this.context=A,this.topicName=t,this.channelName=o,this.emitTopicMessage=g}addUserWithDc(A,e){this.users.set(A,e)}addUserWithoutDc(A,e){this.users.set(A,{subscribedState:\"PRE_SUBSCRIBE\",meta:\"\",id:0,user:e})}updateSubscribeState(A,e){const t=this.users.get(A);if(t){const{subscribedState:o,id:g,meta:i,datachannel:r,user:n}=t;let I=!1;switch(o){case\"PRE_SUBSCRIBE\":\"UNSUBSCRIBE\"===e?this.users.delete(A):\"SUBSCRIBED\"===e&&(I=!0);break;case\"SUBSCRIBED\":(\"UNSUBSCRIBE\"===e||\"PRE_SUBSCRIBE\"===e)&&(I=!0);break;case\"UNSUBSCRIBE\":I=!0}I&&this.users.set(A,{subscribedState:e,id:g,meta:i,datachannel:r,user:n})}}updateUserDatachannelInfo(A,e){if(this.users.has(A)){const t=this.users.get(A);if(t){const{subscribedState:o,datachannel:g}=t,{meta:i,id:r,user:n}=e;this.users.set(A,{meta:i,id:r,subscribedState:o,datachannel:g,user:n})}}else this.warn(\"update user datachannel info failure, not pre_subscribe the user in the topic.\")}fillUserDatachannel(A,e){const t=this.users.get(A);t&&this.users.set(A,_objectSpread2(_objectSpread2({},t),{},{datachannel:e}))}removeUser(A){this.users.delete(A)}removeUserDatachannel(A){const e=this.users.get(A);e&&this.users.set(A,_objectSpread2(_objectSpread2({},e),{},{datachannel:void 0}))}handleSubscription(A,e){this.fillUserDatachannel(e,A),this.addMessageEvent(A,e),this.updateSubscribeState(e,\"SUBSCRIBED\")}handleUnsubscription(A){this.internalEmitter.emit(\"unsubscribeTopicMessage\",A),this.updateSubscribeState(A,\"UNSUBSCRIBE\")}getUsers(){return this.users}getSubscribedUsers(){return Array.from(this.users.keys()).filter((A=>{var e;return\"SUBSCRIBED\"===(null===(e=this.users.get(A))||void 0===e?void 0:e.subscribedState)}))}getPreSubscribedUsers(){return Array.from(this.users.keys()).filter((A=>{var e;return\"PRE_SUBSCRIBE\"===(null===(e=this.users.get(A))||void 0===e?void 0:e.subscribedState)}))}getAllSubscribedUserCount(){return this.getSubscribedUsers().length+this.getPreSubscribedUsers().length}decodeMessage(A){return StreamMessageProtocol.decode(A)}addMessageEvent(A,e){const t=A=>{const t=this.decodeMessage(new Uint8Array(A)),{encrypted:o,payloadLength:g,messageType:i,payload:r,customType:n}=t,{key:I,iv:s,keyLength:C}=this.context.encryptionInfo;if(o&&!I)return void this.warn(\"Received a message with encryption but the key is not ready yet.\");if(!o&&I)return void this.warn(\"Received a message without encryption but the key is ready.\");let E;E=1===i?(new TextDecoder).decode(o?decrypt(r,I,s,C).slice(0,g):r):o?decrypt(r,I,s,C).slice(0,g):r,this.emitTopicMessage({channelName:this.channelName,channelType:\"STREAM\",topicName:this.topicName,message:E,publisher:e,messageType:1===i?\"STRING\":\"BINARY\",customType:n,timestamp:getUTCTimeBaseREG(this.context.offsetTime)})};null==A||A.on(\"open\",(()=>{this.warn(\"\".concat(this.channelName,\"(\").concat(this.topicName,\") remote dc opened.\"))})),null==A||A.on(\"close\",(()=>{this.warn(\"\".concat(this.channelName,\"(\").concat(this.topicName,\") remote dc closed.\"))})),null==A||A.on(\"error\",(A=>{this.warn(\"error occurs in \".concat(this.channelName,\"(\").concat(this.topicName,\") remote dc. error is \").concat(A))})),A.on(\"message\",t),this.log(\"\".concat(this.channelName,\"(\").concat(this.topicName,\") msg event added\")),this.internalEmitter.on(\"unsubscribeTopicMessage\",(o=>{o===e&&A.off(\"message\",t)}))}}class ApiRateLimiter{constructor(){_defineProperty$1(this,\"operationsTimeCache\",{})}canMakeOperation(A,e){var t;let o=getParameter(\"API_RATE_LIMIT\").get(A);null!=e&&e.times&&(o=e.times);const g=Date.now();if(this.operationsTimeCache[A]||(this.operationsTimeCache[A]=[]),this.operationsTimeCache[A]=this.operationsTimeCache[A].filter((A=>A>g-API_QPS_SECOND)),this.operationsTimeCache[A].length<o)return void this.operationsTimeCache[A].push(g);const i=RTMErrorCode.RTM_ERROR_OPERATION_RATE_EXCEED_LIMITATION,{code:r,reason:n}=getErrorInfoByCode(null!==(t=null==e?void 0:e.code)&&void 0!==t?t:i);if(!0===getParameter(\"ENABLE_API_RATE_LIMIT\"))throw new RtmUnavailableError(A,[n],r)}}const{SubscribeTopicErrorCode:SubscribeTopicErrorCode}=RTMStreamChannelStatusCode;class StreamChannelImpl extends EventBase{constructor(A,e,t,o,g,i,r,n,I,s){var C;super(e,\"StreamChannelImpl\",!0),_defineProperty$1(this,\"channelName\",void 0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"userId\",void 0),_defineProperty$1(this,\"appId\",void 0),_defineProperty$1(this,\"getMainSession\",void 0),_defineProperty$1(this,\"isJoinedChannel\",!1),_defineProperty$1(this,\"joinedAndSubscribed\",!1),_defineProperty$1(this,\"rtcClient\",void 0),_defineProperty$1(this,\"subscribeInfoMap\",new Map),_defineProperty$1(this,\"preSubscribeInfoMap\",new Map),_defineProperty$1(this,\"isReuseRtcClient\",!1),_defineProperty$1(this,\"internalEmitter\",new EventEmitter$1),_defineProperty$1(this,\"localTopics\",new Map),_defineProperty$1(this,\"remoteTopics\",new Map),_defineProperty$1(this,\"firstSnapshot\",!0),_defineProperty$1(this,\"emitRtmEvent\",void 0),_defineProperty$1(this,\"getStreamChannelList\",void 0),_defineProperty$1(this,\"getConsoleConfig\",void 0),_defineProperty$1(this,\"validateRtmConnection\",void 0),_defineProperty$1(this,\"getRtmLinkState\",void 0),_defineProperty$1(this,\"getChannelMetadataSub\",void 0),_defineProperty$1(this,\"apiRateLimit\",new ApiRateLimiter),_defineProperty$1(this,\"privatePermitUseMessageChn\",!1),_defineProperty$1(this,\"linkState\",\"IDLE\"),_defineProperty$1(this,\"controlReconnectTimer\",null),_defineProperty$1(this,\"handleConnectionStateChange\",(async(A,e,t)=>{if(this.log(\"rtc state: pre(%s), now(%s), reason: %s.\",e,A,t),\"RECONNECTING\"===e&&this.controlReconnectTimer&&clearTimeout(this.controlReconnectTimer),this.isJoinedChannel&&\"DISCONNECTED\"===A){if(this.firstSnapshot=!0,this.privatePermitUseMessageChn)if(await this.unSubLockAMeta(),\"LEAVE\"!==t&&\"UID_BANNED\"!==t){var o;const A=this.getPrefixChannelName();this.privatePermitUseMessageChn&&(null===(o=this.getMainSession())||void 0===o||null===(o=o.getPresenceSession())||void 0===o||o.getStateAndSetByLocal(A)),await this.handleLeaveEffects(!1)}else await this.handleLeaveEffects();if(t&&\"LEAVE\"!==t){this.warn(\"streamChannel connection state change to DISCONNECTED, reason: %s\",t);let A=LinkStateChangeReasonDescription.KICKED_OUT_BY_SERVER,e=\"KICKED_OUT_BY_SERVER\";if(t===ConnectionDisconnectedReason.TOKEN_EXPIRE)A=LinkStateChangeReasonDescription.TOKEN_EXPIRED,e=\"TOKEN_EXPIRED\";this.updateLinkState(\"FAILED\",\"SERVER_REJECT\",e,A)}}\"RECONNECTING\"===A&&(this.updateLinkState(\"CONNECTING\",\"AUTO_RECONNECT\",\"AUTO_RECONNECT\",LinkStateChangeReasonDescription.AUTO_RECONNECT),this.controlReconnectTimer=setTimeout((async()=>{this.warn(\"streamChannel reconnect timeout, force leave.\"),await this.leave()}),RECONNECT_STREAM_CHANNEL_TIMEOUT)),\"CONNECTED\"===A&&this.isJoinedChannel&&this.updateLinkState(\"CONNECTED\",\"RECONNECTED\",\"RECONNECT_SUCCESS\",LinkStateChangeReasonDescription.RECONNECT_SUCCESS);const g={channelName:this.channelName,state:A,reason:(null!=t?t:\"CONNECTED\"===A)?\"OK\":\"\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitRtmEvent(\"status\",g)})),_defineProperty$1(this,\"handleUserPublishedList\",(A=>{if(!this.firstSnapshot)return void this.handleUpdatedTopicsInOffline(A);const e=[];if(A.forEach((A=>{var t;null===(t=A.dataChannels)||void 0===t||t.forEach((t=>{t.getConfig()&&e.push({user:A,config:t.getConfig(),dc:t})}))})),this.firstSnapshot=!1,0!==e.length)this.handleReceivedDcs(e,\"\",\"SNAPSHOT\");else{const A={eventType:\"SNAPSHOT\",channelName:this.channelName,publisher:\"\",topicInfos:[],totalTopics:0,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitRtmEvent(\"topic\",A)}})),_defineProperty$1(this,\"handleUserPublished\",((A,e,t)=>{var o;if(\"datachannel\"!==e||void 0===t)return;const g=null===(o=A.dataChannels)||void 0===o?void 0:o.find((A=>A.id===t.id));this.handleReceivedDcs([{user:A,config:t,dc:g}],A.uid.toString(),\"REMOTE_JOIN\")})),_defineProperty$1(this,\"handleUserUnPublished\",((A,e,t)=>{if(\"datachannel\"!==e)return;const o=null==t?void 0:t.metadata;if(void 0===o)return;const g=this.decodeMetadata(o),i=g.topic,r=g.metadata;this._emitTopicLeft(i,A,r)})),_defineProperty$1(this,\"handleTokenPrivilegeWillExpire\",(()=>{this.emitRtmEvent(\"tokenPrivilegeWillExpire\",this.channelName)})),_defineProperty$1(this,\"emitTopicMessage\",(A=>{this.emitRtmEvent(\"message\",A)})),_defineProperty$1(this,\"_emitTopicLeft\",((A,e,t)=>{const o=e.uid.toString(),g=this.getInitTopicEventData(\"REMOTE_LEAVE\",this.channelName,o,1);g.topicInfos.push({publishers:[{publisherUserId:o,publisherMeta:t}],topicName:A,totalPublisher:1}),this.emitRtmEvent(\"topic\",g);const i=this.remoteTopics.get(A);null!=i&&i.getSubscribedUsers().includes(o)?null==i||i.addUserWithoutDc(o,e):this.deleteRemoteDc(A,o)}));switch(null!==(C=A.rtmConfig.logLevel)&&void 0!==C?C:\"none\"){case\"debug\":AgoraRTC.setLogLevel(0);break;case\"info\":AgoraRTC.setLogLevel(1);break;case\"warn\":AgoraRTC.setLogLevel(2);break;case\"none\":AgoraRTC.setLogLevel(4);break;default:AgoraRTC.setLogLevel(3)}this.channelName=t.channelName,this.context=A,this.appId=t.appId,this.userId=t.userId,this.emitRtmEvent=o,this.getStreamChannelList=g,this.getConsoleConfig=i,this.validateRtmConnection=r,this.getRtmLinkState=n,this.getChannelMetadataSub=I,this.getMainSession=genGetMainSession(s),this.setMaxListeners(512),this.internalEmitter.setMaxListeners(512),A.rtmConfig.privateConfig&&!A.rtmConfig.privateConfig.serviceType.includes(\"MESSAGE\")||(this.privatePermitUseMessageChn=!0),AgoraRTC.setParameter(\"ENABLE_DATASTREAM_2\",!0),AgoraRTC.setParameter(\"DATASTREAM_MAX_RETRANSMITS\",0),AgoraRTC.setParameter(\"AP_RTM\",!0),this.context.config.logUpload&&AgoraRTC.setParameter(\"UPLOAD_LOG\",!0);const E=[];this.isReuseRtcClient=E.length>0,this.log(\"Create streamChannel, isReuseRtcClient: \".concat(this.isReuseRtcClient)),this.rtcClient=this.isReuseRtcClient?E[0]:AgoraRTC.createClient({codec:\"vp8\",mode:\"rtc\"}),this.rtcClient.setRTMConfig({apRTM:!0,rtmFlag:3})}async handleLeaveEffects(){let A=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clearLocalCache(),this.isJoinedChannel=!1,this.joinedAndSubscribed=!1,this.internalEmitter.emit(\"stream-channel-leaved\",this.channelName),this.removeAllRtcListeners(),this.absent(A)}async unSubLockAMeta(){const A=this.getMainSession().getRegistrarSession(),e=this.getPrefixChannelName(),{withLock:t,withMetadata:o}=this.getLastSubOptions(e);t&&this.unSubLock(e),o&&this.unSubMetadata(e),A.emit(\"unSubChannelLock\",e),A.emit(\"unSubChannelMetadata\",e)}handleUpdatedTopicsInOffline(A){const e=new Map;this.remoteTopics.forEach(((A,t)=>{e.set(t,A)}));const t=new Map;A.forEach((A=>{var e;null===(e=A.dataChannels)||void 0===e||e.forEach((e=>{if(e.getConfig()){var o;const{metadata:g}=e.getConfig(),i=this.decodeMetadata(g),{topic:r}=i,n=null!==(o=t.get(r))&&void 0!==o?o:[];n.push({user:A,dc:e.getConfig()}),t.set(r,n)}}))})),t.forEach(((A,t)=>{var o,g;const i=null!==(o=null===(g=e.get(t))||void 0===g?void 0:g.getUsers())&&void 0!==o?o:new Map,r=A.filter((A=>{var e;let{user:t}=A;return!i.has(t.uid.toString())&&\"PRE_SUBSCRIBE\"!==(null===(e=i.get(t.uid.toString()))||void 0===e?void 0:e.subscribedState)}));r.length>0&&this.log(\"joined topic: %s, users: %o\",t,Array.from(r.values()).map((A=>{var e;return null===(e=A.user)||void 0===e?void 0:e.uid}))),r.forEach((A=>{let{user:e,dc:t}=A;this.handleUserPublished(e,\"datachannel\",t)}))})),e.forEach(((A,e)=>{var o;const g=A.getUsers(),i=null!==(o=t.get(e))&&void 0!==o?o:[],r=Array.from(g.values()).filter((A=>\"PRE_SUBSCRIBE\"!==A.subscribedState&&!i.find((e=>{var t;let{user:o}=e;return o.uid===(null===(t=A.user)||void 0===t?void 0:t.uid)}))));r.length>0&&this.log(\"left topic: %s, users: %o\",e,Array.from(r.values()).map((A=>{var e;return null===(e=A.user)||void 0===e?void 0:e.uid}))),r.forEach((A=>{this._emitTopicLeft(e,A.user,A.meta)}))}))}removeAllRtcListeners(){this.rtcClient.off(\"connection-state-change\",this.handleConnectionStateChange),this.rtcClient.off(\"published-user-list\",this.handleUserPublishedList),this.rtcClient.off(\"user-published\",this.handleUserPublished),this.rtcClient.off(\"user-unpublished\",this.handleUserUnPublished),this.rtcClient.off(\"token-privilege-will-expire\",this.handleTokenPrivilegeWillExpire)}addAllRtcListeners(){this.rtcClient.on(\"connection-state-change\",this.handleConnectionStateChange),this.rtcClient.on(\"published-user-list\",this.handleUserPublishedList),this.rtcClient.on(\"user-published\",this.handleUserPublished),this.rtcClient.on(\"user-unpublished\",this.handleUserUnPublished),this.rtcClient.on(\"token-privilege-will-expire\",this.handleTokenPrivilegeWillExpire)}async handleReceivedDcs(A,e,t){const o=new Map;for(let e=0;e<A.length;e++){var g;const{user:t,config:i,dc:r}=A[e],n=null==i?void 0:i.metadata;if(void 0===n){this.log(\"meta of datachannel is invalid. user(\".concat(t,\"), channel(\").concat(this.channelName,\"), dc(\").concat(i,\")\"));continue}const I=t.uid.toString(),s=this.decodeMetadata(n),C=s.topic,E=s.metadata,a=null==i?void 0:i.id;o.has(C)||o.set(C,[]),null===(g=o.get(C))||void 0===g||g.push({publisherUserId:I,publisherMeta:E}),this.addOrUpdateRemoteDc(C,I,t,E,a,r);const B=this.remoteTopics.get(C);null!=B&&B.getPreSubscribedUsers().includes(I)&&await this.handlePreSubscribeTopic(C,I)}this.emitTopic(e,t,o)}emitTopic(A,e,t){const o=this.getInitTopicEventData(e,this.channelName,A,t.size);t.forEach(((A,e)=>{o.topicInfos.push({publishers:A,topicName:e,totalPublisher:A.length})})),0===o.topicInfos.length&&this.log(\"length of topicInfos is 0 in emitTopic.\"),this.emitRtmEvent(\"topic\",o)}getInitTopicEventData(A,e,t,o){return{eventType:A,channelName:e,publisher:t,topicInfos:[],totalTopics:o,timestamp:getUTCTimeBaseREG(this.context.offsetTime)}}userIdToRTCRemoteUser(A){return{uid:\"number\"==typeof this.userId?parseInt$2(A):A,hasAudio:!1,hasVideo:!1,dataChannels:[]}}addOrUpdateRemoteDc(A,e,t,o,g,i){if(!this.remoteTopics.has(A)){const e=new RemoteTopic(this.context,this.logger,A,this.channelName,this.emitTopicMessage);this.remoteTopics.set(A,e)}const r=this.remoteTopics.get(A);r.getUsers().has(e)?r.updateUserDatachannelInfo(e,{meta:o,id:g,user:t}):r.addUserWithDc(e,{subscribedState:\"UNSUBSCRIBE\",meta:o,id:g,datachannel:i,user:t})}deleteRemoteDc(A,e){const t=this.remoteTopics.get(A);null==t||t.removeUser(e),0===(null==t?void 0:t.getUsers().size)&&this.remoteTopics.delete(A)}deleteSub(A,e){var t,o;null===(t=this.subscribeInfoMap.get(A))||void 0===t||t.delete(e),null!==(o=this.subscribeInfoMap.get(A))&&void 0!==o&&o.size||this.subscribeInfoMap.delete(A)}decodeMetadata(A){return TopicMetadata.decode((new TextEncoder).encode(A))}async handlePreSubscribeTopic(A,e){const t=this.remoteTopics.get(A),o=null==t?void 0:t.getUsers().get(e);if(!o)return void this.log(\"handlePreSubscribeTopic failed. remoteDcInfo is undefined. topicName: \".concat(A,\", userId: \").concat(replaceRangeWithAsterisk(e)));const{id:g,user:i}=o,r=await fromPromise(this.rtcClient.subscribe(i||this.userIdToRTCRemoteUser(e),\"datachannel\",g),(A=>A));if(r.isErr()){var n;const t=null==r||null===(n=r.error)||void 0===n?void 0:n.code;this.log(\"subscribe predictive user(\".concat(replaceRangeWithAsterisk(e),\") in topic(\").concat(A,\") failed, code is \").concat(t))}if(r.isOk()){const o=r.value;this.log(\"pre-subtopic \".concat(this.channelName,\"(\").concat(A,\") succeed.\")),null==t||t.handleSubscription(o,e)}}async patchSubscribeTopic(A,e){var t;const o={succeedUsers:[],failedUsers:[],failedDetails:[],timestamp:0,topicName:A},g=this.remoteTopics.get(A),i=SUB_TOPIC_USER_LIMITATION-(null!==(t=null==g?void 0:g.getAllSubscribedUserCount())&&void 0!==t?t:0),r=shuffle$1(e).filter(((e,t)=>(t+1>i&&(o.failedDetails.push({user:e,errorCode:SubscribeTopicErrorCode.SUB_USER_EXCEED_LIMITATION,timestamp:0,topicName:A}),o.failedUsers.push(e)),t+1<=i)));this.log(\"subscribe topic(%s) users: %o\",A,r.map((A=>replaceRangeWithAsterisk(A))));const n=(await Promise.all(r.map((e=>{const t=null==g?void 0:g.getUsers().get(e);if(!t)throw this.warn(\"subscribe topic(\".concat(A,\")-user(\").concat(replaceRangeWithAsterisk(e),\") failed, user not in remoteTopic users.\")),new Error;const{id:o,user:i}=t;return fromPromise(this.rtcClient.subscribe(i||this.userIdToRTCRemoteUser(e),\"datachannel\",o),(A=>A))})))).map(((A,e)=>({userId:r[e],result:A})));return n.forEach((e=>{if(e.result.isErr()){var t,i;const g=null===(t=e.result.error)||void 0===t?void 0:t.code,r=SubscribeTopicErrorCode.UNKNOWN_ERROR;o.failedDetails.push({user:e.userId,errorCode:r,reason:\"Subscribe topic failure, web_rtc code is \".concat(g,\", the reason of web_rtc is that \").concat(null==e||null===(i=e.result)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.toString()),timestamp:0,topicName:A}),o.failedUsers.push(e.userId),this.warn(e.result,\"WEB_RTCerror\"),this.log(\"subscribe user(\".concat(e.userId,\") in topic(\").concat(A,\") failed, code is \").concat(g))}else{o.succeedUsers.push(e.userId);const t=e.result.value;this.log(\"subtopic \".concat(this.channelName,\"(\").concat(A,\") succeed.\")),null==g||g.handleSubscription(t,e.userId)}})),o}clearLocalCache(){this.localTopics=new Map,this.remoteTopics=new Map,this.preSubscribeInfoMap=new Map,this.subscribeInfoMap=new Map}checkIsJoinedChannel(A){if(!this.isJoinedChannel||\"CONNECTED\"!==this.linkState){this.log(\"\".concat(this.channelName,\" have not joined stream channel when \").concat(A));const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_NOT_JOINED);throw new RtmUnavailableError(A,[t],e)}}updatePrivateSettings(){const A=this.context.rtmConfig.privateConfig;if(null!=A&&A.accessPointHosts){var e;const t=A.logUploadHosts,o=A.eventUploadHosts,g=443;this.rtcClient.setLocalAccessPointsV2({accessPoints:{serverList:A.accessPointHosts,domain:\"edge.\"+sample$1(null!==(e=A.originDomains)&&void 0!==e?e:[\"agora.io\"])},log:t?_objectSpread2({},getPrivateSettingsPortAndDomains(t,g)):void 0,report:o?_objectSpread2({},getPrivateSettingsPortAndDomains(o,g)):void 0})}else A&&this.warn(\"use private settings but apHosts is set to empty\")}updateLinkState(A,e,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"\";if(this.linkState===A)return;this.privatePermitUseMessageChn&&this.context.sendReport(\"LinkStateChange\",{elapse:getElapse(this.getMainSession().getRegistrarSession().startTime),lts:Long$2.fromNumber(Date.now()),reason:LinkStateChangeReason4Report[t],sid:getSid(this.getMainSession().getRegistrarSession().instanceId||Long$2.fromNumber(0)),vid:Long$2.fromString(getParameter(\"VID\").get(this.context.appId)||\"0\"),userid:this.context.uid,currentState:linkStateCodeMap[A],previousState:linkStateCodeMap[this.linkState],operation:linkOperationCodeMap[e],serviceType:1,streamChannelName:this.channelName}),\"FAILED\"!==A&&\"IDLE\"!==A||(this.firstSnapshot=!0);const g={currentState:A,previousState:this.linkState,serviceType:\"STREAM\",operation:e,reason:o,reasonCode:t,affectedChannels:[this.channelName],unrestoredChannels:[],timestamp:getUTCTimeBaseREG(this.context.offsetTime),isResumed:\"CONNECTED\"===A&&this.isJoinedChannel};this.linkState=A,this.emitRtmEvent(\"linkState\",g)}async join(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=getParameter(\"AREA_CONFIG\");if(t){const{areaCodes:A,excludedArea:e}=t;AgoraRTC.setArea({areaCode:A,excludedArea:e})}const o=getChannelNameByType(this.channelName,\"STREAM\"),g=OperationName.join,{currentResolve:i}=await this.context.operationControl.awaitPromise(g+o);try{if(\"CONNECTING\"===this.linkState){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_DUPLICATE_OPERATION);throw new RtmUnavailableError(g,[e],A)}const t={timestamp:0};this.isJoinedChannel||this.updateLinkState(\"CONNECTING\",\"JOIN\",\"IDLE\"===this.linkState?\"JOIN\":\"REJOIN\",\"IDLE\"===this.linkState?LinkStateChangeReasonDescription.JOIN:LinkStateChangeReasonDescription.REJOIN);try{var r,n,I,s;if(this.updatePrivateSettings(),this.apiRateLimit.canMakeOperation(\"join\"),this.privatePermitUseMessageChn){if(\"CONNECTED\"!==this.getRtmLinkState()){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_CONNECTED);throw new RtmUnavailableError(g,[e],A)}this.validateRtmConnection(g),this.validateSessionExist(g),this._validateJoinOptions(A,g)}null!==(r=A)&&void 0!==r&&r.token&&validateToken(A.token,this.appId,g,(A=>{this.warn(A)})),\"\"!==(null===(n=A)||void 0===n?void 0:n.token)&&void 0!==(null===(I=A)||void 0===I?void 0:I.token)||(A=_objectSpread2(_objectSpread2({},A),{},{token:this.context.appId}));const e=null!==(s=getParameter(\"STREAM_CHANNEL_COUNT\"))&&void 0!==s?s:SUB_STREAM_CHANNEL_LIMITATION;if(this.getStreamChannelList().length>=e){this.log(\"exceed join channel limit \".concat(e));const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INSTANCE_EXCEED_LIMITATION);throw new RtmUnavailableError(g,[t],A)}}catch(A){var C;this.logError(A);const{reason:e}=A;throw this._handleJoinFailedState(null!==(C=null==A?void 0:A.errorCode)&&void 0!==C?C:e),A}try{if(!this.isJoinedChannel){this.addAllRtcListeners();let e=!1;const t=AgoraRTC.__CLIENT_LIST__.map((A=>\"channel(\".concat(A.channelName,\"), state: \").concat(A.connectionState,\"}\")));this.log(\"FusionSDK: \".concat(FUSION,\". clientList of rtc: \").concat(t));try{this.log(\"Join streamChannel, isReuseRtcClient: \".concat(e)),this.internalEmitter.emit(\"stream-channel-joined\",this.channelName);const t=this.rtcClient.connectionState;if(FUSION&&e);else{if(!(\"CONNECTED\"===t||\"CONNECTING\"===t||\"RECONNECTING\"===t)){var E,a,B;const e=null===(E=A)||void 0===E?void 0:E.token;this.context.config.cloudProxy&&0===(null!==(a=null===(B=this.context.rtmConfig.privateConfig)||void 0===B||null===(B=B.accessPointHosts)||void 0===B?void 0:B.length)&&void 0!==a?a:0)&&this.rtcClient.startProxyServer(5),this.firstSnapshot=!0,await timeoutPromise(this.rtcClient.join(this.appId,this.channelName,e||null,this.userId),JOIN_TIMEOUT,g,RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED,!0)}}}catch(A){var Q;if(this.internalEmitter.emit(\"stream-channel-leaved\",this.channelName),await this._validCancelJoin(g),isRtmError(A))throw isTimeout(A)&&await this.rtcClient.leave(),A;this.warn(A);const e=null!==(Q=null==A?void 0:A.code)&&void 0!==Q?Q:AgoraRTCErrorCode.UNEXPECTED_ERROR;if(e===AgoraRTCErrorCode.CAN_NOT_GET_GATEWAY_SERVER){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_TOKEN);throw new RtmUnavailableError(g,[e],A)}if(e===AgoraRTCErrorCode.OPERATION_ABORTED){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_CANCELED);throw new RtmUnavailableError(g,[e],A)}const{code:t,reason:o}=convertDataChannelJoinCodeToSdkCode(e,RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED);throw new RtmUnavailableError(g,[o+\"Join channel failure, server code is \".concat(e)],t)}await this._validCancelJoin(g),this.updateLinkState(\"CONNECTED\",\"JOIN\",\"JOIN_SUCCESS\",LinkStateChangeReasonDescription.JOIN_SUCCESS),this.isJoinedChannel=!0}return this.privatePermitUseMessageChn&&(this.log(\"stream channel joined success, start sub other options\"),await this.subscribe(A,e)),this.joinedAndSubscribed=!0,i(t),t}catch(A){var c;i(!1);const{reason:e}=A;throw!1===this.joinedAndSubscribed&&this._handleJoinFailedState(null!==(c=null==A?void 0:A.errorCode)&&void 0!==c?c:e),A}}catch(A){throw i(void 0),A}}async subMetadata(A){try{var e;await(null===(e=this.getMainSession())||void 0===e?void 0:e.getRegistrarSession().requestSubscribeChannelMetadata(A,\"JOIN\")),this.getChannelMetadataSub().add(A)}catch(e){this.warn(\"sub channel metadata failure when sub channel(\".concat(replaceRangeWithAsterisk(A),\"), error is \").concat(e,\".\"))}}unSubMetadata(A){this.getMainSession().getRegistrarSession().requestUnsubscribeChannelMetadata(A),this.getChannelMetadataSub().delete(A)}async subLock(A){try{var e;await(null===(e=this.getMainSession())||void 0===e?void 0:e.getRegistrarSession().requestSubscribeLock(A))}catch(e){this.warn(\"sub lock info failure when sub channel(\".concat(replaceRangeWithAsterisk(A),\"), error is \").concat(e,\".\"))}}unSubLock(A){const e=this.getMainSession(),t=null==e?void 0:e.getRegistrarSession();null==t||t.requestUnsubscribeLock(A)}leavePresenceColl(A){var e;null===(e=this.getMainSession())||void 0===e||e.getPresenceSession().leave(A)}subPresence(A){var e;null===(e=this.getMainSession())||void 0===e||e.getPresenceSession().subPresence(A)}unSubPresence(A){var e;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=this.getMainSession())||void 0===e||e.getPresenceSession().unSubPresence(A,t)}cacheStateAndDelDoc(A){var e;const t=null===(e=this.getMainSession())||void 0===e?void 0:e.getPresenceSession();null==t||t.cacheStateAndDelDoc(A)}async subscribe(A){var e,t;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const g=OperationName.join,i=getChannelNameByType(this.channelName,\"STREAM\"),r=this.getMainSession(),n=!(null!=r&&r.lastSubscribeOrJoinOptions.has(i)),I=handleJoinOptionsAsDefault(A),{withLock:s,withMetadata:C,withPresence:E,beQuiet:a}=this.getLastSubOptions(i),B=getRandomInt(0,Number.MAX_SAFE_INTEGER);this.privatePermitUseMessageChn&&(null===(e=this.getMainSession())||void 0===e||e.reportChnJoin(i,I,B));const Q=getParameter(\"STORAGE_CHANNEL_SUB_ENABLED\"),c=(null==I?void 0:I.withMetadata)&&!C&&\"true\"===(void 0!==Q?String(Q):this.getConsoleConfig()[\"storage.channel_subscribe_enabled\"]),{code:l,reason:u}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_FAILED),h=(null==I?void 0:I.beQuiet)&&!a&&!n,d=!(null!=I&&I.beQuiet)&&(n||a),p=(null==I?void 0:I.withPresence)&&!E,y=null===(t=this.getMainSession())||void 0===t?void 0:t.getRegistrarSession();try{var D,R;await Promise.all([c?this.subMetadata(i):void 0,null!=I&&I.withMetadata||!C?void 0:this.unSubMetadata(i),null!=I&&I.withLock&&!s?this.subLock(i):void 0,null!=I&&I.withLock||!s?void 0:this.unSubLock(i),n?await(null===(D=this.getMainSession())||void 0===D?void 0:D.getPresenceSession().joinPresenceColl(i,{withPresence:I.withPresence,needPutDoc:d,needDelDoc:h,needSub:p,reJoinCauseReconnect:o})):null===(R=this.getMainSession())||void 0===R?void 0:R.getPresenceSession().onCreateCollection(i,{withPresence:I.withPresence,needPutDoc:d,needDelDoc:h,needSub:!1,reJoinCauseReconnect:o})])}catch(A){var w;throw y&&this.context.addReportEvents(\"ChnJoinRes\",{cname:this.channelName,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(y.startTime),errCode:null==A?void 0:A.errorCode,sid:getSid(null==y?void 0:y.instanceId),serverErrCode:null!==(w=A.serverCode)&&void 0!==w?w:A.errorCode,userId:this.context.uid,seq:Long$2.fromNumber(B)}),new RtmUnknownError(g,[u+A],l)}var f,S,N;null!=I&&I.withPresence&&!E&&(void 0!==E&&(null===(f=this.getMainSession())||void 0===f||f.getPresenceSession().unsubScribeSelfPresence(i,!1),this.leavePresenceColl(i),await(null===(S=this.getMainSession())||void 0===S?void 0:S.getPresenceSession().joinPresenceColl(i,{withPresence:!0,needPutDoc:d,needDelDoc:h,needSub:p}))));null!=I&&I.withPresence||!E||(this.unSubPresence(i),this.leavePresenceColl(i),await(null===(N=this.getMainSession())||void 0===N?void 0:N.getPresenceSession().joinPresenceColl(i,{withPresence:!1,needPutDoc:d,needDelDoc:h,needSub:p})));y&&this.context.addReportEvents(\"ChnJoinRes\",{cname:this.channelName,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(y.startTime),errCode:0,sid:getSid(y.instanceId),serverErrCode:0,userId:this.context.uid,seq:Long$2.fromNumber(B)})}getPrefixChannelName(){return getChannelNameByType(this.channelName,\"STREAM\")}absent(A){var e,t,o,g;const i=this.getPrefixChannelName(),{withPresence:r,beQuiet:n}=this.getLastSubOptions(i);r&&this.unSubPresence(i,A);const I=!n;!r&&(null===(e=this.getMainSession())||void 0===e||e.getPresenceSession().unsubScribeSelfPresence(i)),I&&(null===(t=this.getMainSession())||void 0===t||t.getPresenceSession().delChannelDoc(i)),this.leavePresenceColl(i),null===(o=this.getMainSession())||void 0===o||o.getPresenceSession().leaveRetryChannels([i]),null===(g=this.getMainSession())||void 0===g||g.lastSubscribeOrJoinOptions.delete(i)}getLastSubOptions(A){var e,t;return null!==(e=null===(t=this.getMainSession())||void 0===t?void 0:t.lastSubscribeOrJoinOptions.get(A))&&void 0!==e?e:{}}async renewStreamChannelToken(A){const e=OperationName.renewToken;try{await this.rtcClient.renewToken(A)}catch(A){var t;this.logError(A);const o=null!==(t=null==A?void 0:A.code)&&void 0!==t?t:AgoraRTCErrorCode.UNEXPECTED_ERROR,{code:g,reason:i}=convertDataChannelJoinCodeToSdkCode(o,RTMErrorCode.RTM_ERROR_INVALID_TOKEN);throw new RtmUnavailableError(e,[i+\"RenewToken of streamChannel failure, server code is \".concat(o)],g)}}localLeave(){this.isJoinedChannel=!1,this.joinedAndSubscribed=!1,this.removeAllRtcListeners(),this.clearLocalCache(),this.internalEmitter.emit(\"stream-channel-leaved\",this.channelName)}async leave(){let A=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=OperationName.leave;this.privatePermitUseMessageChn&&A&&(this.validateRtmConnection(e),this.validateSessionExist(e));const t={timestamp:0};if(\"FAILED\"===this.linkState)return this.updateLinkState(\"IDLE\",\"LEAVE\",\"LEAVE\",LinkStateChangeReasonDescription.LEAVE),this.localLeave(),t;if(\"CONNECTING\"===this.linkState)return await this.rtcClient.leave(),this.updateLinkState(\"IDLE\",\"LEAVE\",\"LEAVE\",LinkStateChangeReasonDescription.LEAVE),this.localLeave(),t;let o;this.checkIsJoinedChannel(e);const g=new Promise(((A,e)=>{o=A}));this.log(\"Leave streamChannel, isReuseRtcClient: \".concat(this.isReuseRtcClient));const i=[];try{const A=this.isReuseRtcClient&&FUSION;await Promise.all([A?this.fusionSdkLeave():this.rtcClient.leave(),...i.map((A=>fromPromise(this.rtcClient.unpublish(A),(A=>A)))),...this.isReuseRtcClient&&FUSION&&this.privatePermitUseMessageChn?[this.unSubLockAMeta(),this.handleLeaveEffects(),()=>{this.firstSnapshot=!0}]:[]]),this.context.config.cloudProxy&&!A&&this.rtcClient.stopProxyServer(),o(t)}catch(A){if(this.logError(A),isRtmError(A))throw A;const t=(null==A?void 0:A.code)||AgoraRTCErrorCode.UNEXPECTED_ERROR,{code:o,reason:g}=convertDataChannelJoinCodeToSdkCode(t,RTMErrorCode.RTM_ERROR_CHANNEL_LEAVE_FAILED);throw new RtmUnavailableError(e,[g+\"Leave channel failure, server code is  \".concat(t)],o)}finally{this.updateLinkState(\"IDLE\",\"LEAVE\",\"LEAVE\",LinkStateChangeReasonDescription.LEAVE)}return g}async fusionSdkJoin(){const A={channelName:this.channelName,state:\"CONNECTING\",reason:\"OK\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitRtmEvent(\"status\",A),await this.rtcClient.setRTMConfig({apRTM:!0,rtmFlag:1}),this.isJoinedChannel=!0;const e={channelName:this.channelName,state:\"CONNECTED\",reason:\"OK\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitRtmEvent(\"status\",e),this.handleUserPublishedList(this.rtcClient.remoteUsers)}async fusionSdkLeave(){const A={channelName:this.channelName,state:\"DISCONNECTING\",reason:\"LEAVE\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitRtmEvent(\"status\",A),await this.rtcClient.setRTMConfig({apRTM:!0,rtmFlag:0}),this.isJoinedChannel=!1;const e={channelName:this.channelName,state:\"DISCONNECTED\",reason:\"LEAVE\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitRtmEvent(\"status\",e)}async joinTopic(A,e){var t;const o=OperationName.joinTopic;this.apiRateLimit.canMakeOperation(\"joinTopic\"),this.privatePermitUseMessageChn&&(this.validateRtmConnection(o),this.validateSessionExist(o)),validateTopicName(A,o),this.checkIsJoinedChannel(o);const g={timestamp:0,topicName:A};if(this.localTopics.has(A))return this.log(\"topic(%s) already exists\",A),g;if(this.localTopics.size>=JOIN_TOPIC_LIMITATION){this.log(\"exceed create topic limit\");const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_EXCEED_TOPIC_LIMITATION);throw new RtmUnavailableError(o,[e],A)}e={meta:null};const i=TopicMetadata.encode({metadata:null===(t=e)||void 0===t?void 0:t.meta,topic:A}).finish(),r=()=>{const A=Array.from(this.localTopics.values()).filter((A=>void 0!==A)).filter((A=>void 0!==(null==A?void 0:A.getDataChannel()))).map((A=>{var e;return null==A||null===(e=A.getDataChannel())||void 0===e?void 0:e.getConfig().id}));for(let e=0;e<JOIN_TOPIC_LIMITATION;e++)if(-1===A.findIndex((A=>A===e)))return e;return-1};try{const e=r();this.localTopics.set(A,void 0);const t=await fromPromise(this.rtcClient.publish({id:e,ordered:!1,metadata:String.fromCharCode(...i)}),(A=>A));if(t.isErr()){var n;this.localTopics.delete(A);const e=null==t||null===(n=t.error)||void 0===n?void 0:n.code;throw new RtmUnavailableError(o,[\"JoinTopic failure, code of rtcClient.publish api is \".concat(e)],RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_TOPIC_FAILED)}{const e=t.value,o=new LocalTopic(this.context,this.logger,A,e);null==e||e.on(\"open\",(()=>{this.warn(\"\".concat(this.channelName,\"(\").concat(A,\") remote dc opened.\"))})),null==e||e.on(\"close\",(()=>{this.warn(\"\".concat(this.channelName,\"(\").concat(A,\") remote dc closed.\"))})),null==e||e.on(\"error\",(e=>{this.warn(\"error occurs in \".concat(this.channelName,\"(\").concat(A,\") remote dc. error is \").concat(e))})),this.localTopics.set(A,o)}}catch(A){throw A}return g}async publishTopicMessage(A,e,t){var o;const g=OperationName.publishTopicMessage;this.apiRateLimit.canMakeOperation(\"publishTopicMsg\"),this.privatePermitUseMessageChn&&(this.validateRtmConnection(g),this.validateSessionExist(g));const i={timestamp:0,topicName:A};if(validateTopicName(A,g),this.checkIsJoinedChannel(g),null!=t&&t.customType&&validateCustomType(null==t?void 0:t.customType,g),\"string\"==typeof e&&!e){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_MESSAGE);throw new RtmInvalidArgumentError(g,[e],A)}if((\"string\"==typeof e?(new TextEncoder).encode(e).buffer:e.buffer).byteLength+new Blob([null!==(o=null==t?void 0:t.customType)&&void 0!==o?o:\"\"]).size>TOPIC_MESSAGE_SIZE){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_MESSAGE_LENGTH_EXCEED_LIMITATION);throw new RtmInvalidArgumentError(g,[e],A)}if(\"CONNECTED\"!==this.rtcClient.connectionState){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_NOT_JOINED);throw new RtmUnavailableError(g,[e],A)}const r=this.localTopics.get(A);if(!r){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_JOINED);throw new RtmUnavailableError(g,[e],A)}return await(null==r?void 0:r.publishTopicMessage(g,e,t)),i}async leaveTopic(A){var e;const t=OperationName.leaveTopic;this.privatePermitUseMessageChn&&(this.validateRtmConnection(t),this.validateSessionExist(t));const o={timestamp:0,topicName:A};if(validateTopicName(A,t),this.checkIsJoinedChannel(t),!this.localTopics.has(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_JOINED);throw new RtmUnavailableError(t,[e],A)}const g=null===(e=this.localTopics.get(A))||void 0===e?void 0:e.getDataChannel();try{await this.rtcClient.unpublish(g),this.localTopics.delete(A)}catch(A){var i;this.logError(A);const e=null!==(i=null==A?void 0:A.code)&&void 0!==i?i:AgoraRTCErrorCode.UNEXPECTED_ERROR,{code:o,reason:g}=convertDataChannelJoinCodeToSdkCode(e,RTMErrorCode.RTM_ERROR_CHANNEL_IN_ERROR_STATE);throw new RtmUnavailableError(t,[g+\"LeaveTopic failure, server code is  \".concat(e),o])}return o}async subscribeTopic(A,e){const t=OperationName.subscribeTopic;this.apiRateLimit.canMakeOperation(\"subscribeTopic\"),this.privatePermitUseMessageChn&&(this.validateRtmConnection(t),this.validateSessionExist(t)),validateTopicName(A,t),this.checkIsJoinedChannel(t);const{currentResolve:o,currentReject:g}=await this.context.operationControl.awaitPromise(t+streamChannel_prefix+A);try{var i,r,n,I,s,C;const g=null!==(i=null==e||null===(r=e.users)||void 0===r?void 0:r.filter((A=>!isValidId(A))))&&void 0!==i?i:[];(null==e?void 0:e.users)&&(e.users=null==e||null===(n=e.users)||void 0===n?void 0:n.filter((A=>isValidId(A)))),null!=e&&e.users&&(e.users=[...new Set(e.users)]);const B=()=>Array.from(this.remoteTopics.values()).filter((A=>A.getAllSubscribedUserCount()>0)).length;if(B()>SUB_TOPIC_LIMITATION){this.log(\"subscribed topic(%s) failed, exceed subscribe topic limit \".concat(SUB_TOPIC_LIMITATION),A);const{code:e,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_EXCEED_TOPIC_LIMITATION);throw new RtmUnavailableError(t,[o],e)}const Q=this.remoteTopics.get(A);if((null!==(I=null==Q?void 0:Q.getAllSubscribedUserCount())&&void 0!==I?I:0)>=SUB_TOPIC_USER_LIMITATION){this.log(\"subscribe topic(\".concat(A,\") exceed user limit: \").concat(SUB_TOPIC_USER_LIMITATION));const{code:e,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_EXCEED_TOPIC_USER_LIMITATION);throw new RtmUnavailableError(t,[o],e)}const c={failedUsers:g,failedDetails:g.map((e=>({user:e,errorCode:SubscribeTopicErrorCode.INVALID_PARAMS,timestamp:0,topicName:A}))),succeedUsers:[],timestamp:0,topicName:A};if(!(this.remoteTopics.has(A)||null!=e&&e.users&&0!==e.users.length)){if(this.localTopics.has(A))return o(void 0),c;const{code:e,reason:g}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_EXIST);throw new RtmUnavailableError(t,[g],e)}const l=new Set;if(!this.remoteTopics.has(A)&&((null==e||null===(s=e.users)||void 0===s?void 0:s.length)||0)>0){this.log(\"createTopicHere\");const t=new RemoteTopic(this.context,this.logger,A,this.channelName,this.emitTopicMessage),g=SUB_TOPIC_USER_LIMITATION-(null==t?void 0:t.getAllSubscribedUserCount()),i=shuffle$1((null==e?void 0:e.users)||[]).filter(((e,t)=>(t+1>g&&(c.failedDetails.push({user:e,errorCode:SubscribeTopicErrorCode.SUB_USER_EXCEED_LIMITATION,timestamp:0,topicName:A}),c.failedUsers.push(e)),t+1<=g)));return this.log(\"shuffle pre subscribe topic(%s), users: %o\",A,i.map((A=>replaceRangeWithAsterisk(A)))),i.forEach((e=>{l.add(e),t.addUserWithoutDc(e),this.remoteTopics.set(A,t)})),this.log(\"\".concat(A,\" not existent in channel\").concat(this.channelName,\".\")),c.succeedUsers=[...l],this.log(\"subscribed \".concat(this.channelName,\"(\").concat(A,\"), resp is %o\"),c),o(void 0),c}let u=[];var E,a;if(null!=e&&e.users&&0!==e.users.length)u=(null==e||null===(E=e.users)||void 0===E?void 0:E.filter((e=>{const t=null==Q?void 0:Q.getPreSubscribedUsers().includes(e),o=null==Q?void 0:Q.getSubscribedUsers().includes(e),g=!(null!=Q&&Q.getUsers().has(e));return t||o?this.log(\"subscribe \".concat(replaceRangeWithAsterisk(e),\" in topic(\").concat(A,\") already.\")):g&&(null==Q||Q.addUserWithoutDc(e),this.log(\"pre subscribe user(\".concat(replaceRangeWithAsterisk(e),\")\"))),this.log(\"can't sub the user \".concat(e,\", isPreSubscribed: \").concat(t,\", isSubscribed: \").concat(o,\", isUserNotPublishTopic: \").concat(g)),!t&&!o&&!g})))||[];else(null!==(a=null==Q?void 0:Q.getUsers())&&void 0!==a?a:new Map).forEach(((A,e)=>{\"UNSUBSCRIBE\"===A.subscribedState&&u.push(e)}));const h=await this.patchSubscribeTopic(A,u);return this.log(\"\".concat(t,\" result: preSubUsers(\").concat([...l],\"), subUsers(\").concat(h.succeedUsers,\")\")),c.succeedUsers=[...l,...h.succeedUsers],c.failedUsers=[...c.failedUsers,...h.failedUsers],c.failedDetails=[...c.failedDetails,...h.failedDetails],c.failedUsers.length===(null==e||null===(C=e.users)||void 0===C?void 0:C.length)||c.failedUsers.length,o(void 0),c}catch(A){throw g(A),A}}async unsubscribeTopic(A,e){var t,o,g;const i=OperationName.unsubscribeTopic;this.privatePermitUseMessageChn&&(this.validateRtmConnection(i),this.validateSessionExist(i)),validateTopicName(A,i),this.checkIsJoinedChannel(i);const r=this.remoteTopics.get(A);if(null==r||!r.getAllSubscribedUserCount()){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_SUBSCRIBED);throw new RtmUnavailableError(i,[e],A)}const n=null!==(t=null==e||null===(o=e.users)||void 0===o?void 0:o.filter((A=>!isValidId(A))))&&void 0!==t?t:[],I={failedUsers:n,failedDetails:n.map((e=>({user:e,errorCode:SubscribeTopicErrorCode.INVALID_PARAMS,timestamp:0,topicName:A}))),timestamp:0,succeedUsers:[],topicName:A};let s=[];if(null!=e&&e.users&&0!==e.users.length)s=e.users.filter((A=>isValidId(A))).filter((e=>{const t=r.getPreSubscribedUsers().includes(e),o=r.getSubscribedUsers().includes(e);return t?(this.deleteRemoteDc(A,e),I.succeedUsers.push(e)):o||(I.failedDetails.push({user:e,errorCode:SubscribeTopicErrorCode.NOT_SUBSCRIBED_USER,timestamp:0,topicName:A}),I.failedUsers.push(e)),o}));else{r.getSubscribedUsers().forEach((A=>{s.push(A)}));r.getPreSubscribedUsers().forEach((e=>{this.deleteRemoteDc(A,e),I.succeedUsers.push(e)}))}try{const e=await Promise.all(s.map((e=>{const t=null==r?void 0:r.getUsers().get(e);if(!t)throw this.warn(\"unsubscribe topic(\".concat(A,\")-user(\").concat(replaceRangeWithAsterisk(e),\") failed, user not in remoteTopic users.\")),new Error;const{id:o,user:g}=t;return fromPromise(this.rtcClient.unsubscribe(g||this.userIdToRTCRemoteUser(e),\"datachannel\",o),(A=>A))})));e.map(((A,e)=>({userId:s[e],result:A}))).forEach((e=>{let{userId:t,result:o}=e;if(o.isErr()){var g,n,s;this.logError(o.error);const e=null!==(g=null==o||null===(n=o.error)||void 0===n?void 0:n.code)&&void 0!==g?g:AgoraRTCErrorCode.UNEXPECTED_ERROR;I.failedDetails.push({user:t,reason:\"Unsubscribe topic failure, web_rtc code is \".concat(e,\", the reason of web_rtc is that \").concat(null==o||null===(s=o.error)||void 0===s?void 0:s.toString()),timestamp:0,topicName:A}),I.failedUsers.push(t);const{code:r,reason:C}=convertDataChannelJoinCodeToSdkCode(e,RTMErrorCode.RTM_ERROR_CHANNEL_IN_ERROR_STATE);throw new RtmUnavailableError(i,[C+\"unsubscribeTopic failure, server code is \".concat(e)],r)}I.succeedUsers.push(t),r.handleUnsubscription(t)}))}catch(A){throw A}I.failedUsers.length===(null==e||null===(g=e.users)||void 0===g?void 0:g.length)||I.failedUsers.length,this.log(\"\".concat(i,\" success. sdk resp is %o\"),I);return I.succeedUsers.forEach((e=>{this.internalEmitter.emit(\"unsubscribeTopicMessage\",A,e)})),{timestamp:0}}getSubscribedUserList(A){const e=OperationName.getSubscribedUserList;this.privatePermitUseMessageChn&&(this.validateRtmConnection(e),this.validateSessionExist(e)),validateTopicName(A,e),this.checkIsJoinedChannel(e);const t=this.remoteTopics.get(A);if(null==t||!t.getAllSubscribedUserCount()){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_TOPIC_NOT_SUBSCRIBED);throw new RtmUnavailableError(e,[t],A)}const o={subscribed:[],timestamp:0,topicName:A};return o.subscribed=[...t.getSubscribedUsers(),...t.getPreSubscribedUsers()],o}validateSessionExist(A){if(void 0===this.getMainSession()){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(A,[t],e)}}setStreamChannelParameter(A,e){AgoraRTC.setParameter(A,e)}_handleJoinFailedState(A){if(\"string\"==typeof A)return void this.updateLinkState(\"FAILED\",\"JOIN\",\"JOIN_FAILED\",A);if(A===RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_CANCELED)return;let e=LinkStateChangeReasonDescription.JOIN_FAILED,t=\"JOIN_FAILED\";switch(A){case RTMErrorCode.RTM_ERROR_CHANNEL_INSTANCE_EXCEED_LIMITATION:e=LinkStateChangeReasonDescription.CHANNEL_INSTANCE_EXCEED_LIMITATION,t=\"CHANNEL_INSTANCE_EXCEED_LIMITATION\";break;case RTMErrorCode.RTM_ERROR_OPERATION_RATE_EXCEED_LIMITATION:e=LinkStateChangeReasonDescription.OPERATION_RATE_EXCEED_LIMITATION,t=\"OPERATION_RATE_EXCEED_LIMITATION\";break;case RTMErrorCode.RTM_ERROR_INVALID_TOKEN:e=LinkStateChangeReasonDescription.INVALID_TOKEN,t=\"INVALID_TOKEN\";break;case RTMErrorCode.RTM_ERROR_INCONSISTENT_APPID:e=LinkStateChangeReasonDescription.INCONSISTENT_APP_ID,t=\"INCONSISTENT_APP_ID\";break;case RTMErrorCode.RTM_ERROR_DUPLICATE_OPERATION:case RTMErrorCode.RTM_ERROR_NOT_CONNECTED:case RTMErrorCode.RTM_ERROR_NOT_LOGIN:e=LinkStateChangeReasonDescription.CHANNEL_IN_ERROR_STATE,t=\"CHANNEL_IN_ERROR_STATE\";break;case RTMErrorCode.RTM_ERROR_LOCK_NOT_AVAILABLE:e=LinkStateChangeReasonDescription.LOCK_NOT_AVAILABLE,t=\"LOCK_NOT_AVAILABLE\";break;case RTMErrorCode.RTM_ERROR_STORAGE_NOT_AVAILABLE:e=LinkStateChangeReasonDescription.STORAGE_NOT_AVAILABLE,t=\"STORAGE_NOT_AVAILABLE\";break;case RTMErrorCode.RTM_ERROR_CHANNEL_NOT_AVAILABLE:e=LinkStateChangeReasonDescription.STREAM_CHANNEL_NOT_AVAILABLE,t=\"STREAM_CHANNEL_NOT_AVAILABLE\"}this.updateLinkState(\"FAILED\",\"JOIN\",t,e)}async _validCancelJoin(A){if(\"IDLE\"===this.linkState){const e=this.isReuseRtcClient&&FUSION;await(e?this.rtcClient.setRTMConfig({apRTM:!0,rtmFlag:0}):this.rtcClient.leave()),this.context.config.cloudProxy&&!e&&this.rtcClient.stopProxyServer();const{code:t,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_JOIN_CANCELED);throw new RtmUnavailableError(A,[o],t)}}_validateJoinOptions(A,e){const t=getParameter(\"STORAGE_CHANNEL_SUB_ENABLED\"),o=\"true\"===(void 0!==t?String(t):this.getConsoleConfig()[\"storage.channel_subscribe_enabled\"]);if(null!=A&&A.withMetadata&&!o){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_NOT_AVAILABLE);throw new RtmUnavailableError(e,[t],A)}const g=getParameter(\"LOCK_ENABLED\"),i=\"true\"===(void 0!==g?String(g):this.getConsoleConfig()[\"lock.enabled\"]);if(null!=A&&A.withLock&&!i){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_NOT_AVAILABLE);throw new RtmUnavailableError(e,[t],A)}}}var _class$5;let StreamChannel=(_class$5=class extends EventBase{constructor(A,e,t,o,g,i,r,n,I,s){super(e,\"StreamChannel\",!0),_defineProperty$1(this,\"streamChannelImpl\",void 0),this.streamChannelImpl=new StreamChannelImpl(A,e,t,o,g,i,r,n,I,s)}get isJoinedChannel(){return this.streamChannelImpl.isJoinedChannel}get channelName(){return this.streamChannelImpl.channelName}get _streamChannelImpl(){return this.streamChannelImpl}get internalEmitter(){return this.streamChannelImpl.internalEmitter}async join(A){return this.streamChannelImpl.join(A)}async renewStreamChannelToken(A){return this.streamChannelImpl.renewStreamChannelToken(A)}async leave(){return this.streamChannelImpl.leave()}async joinTopic(A,e){return this.streamChannelImpl.joinTopic(A,e)}async publishTopicMessage(A,e,t){return this.streamChannelImpl.publishTopicMessage(A,e,t)}async leaveTopic(A){return this.streamChannelImpl.leaveTopic(A)}async subscribeTopic(A,e){return this.streamChannelImpl.subscribeTopic(A,e)}async unsubscribeTopic(A,e){return this.streamChannelImpl.unsubscribeTopic(A,e)}getSubscribedUserList(A){return this.streamChannelImpl.getSubscribedUserList(A)}},_applyDecoratedDescriptor(_class$5.prototype,\"join\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"join\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"leave\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"leave\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"joinTopic\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"joinTopic\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"publishTopicMessage\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"publishTopicMessage\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"leaveTopic\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"leaveTopic\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"subscribeTopic\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"subscribeTopic\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"unsubscribeTopic\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"unsubscribeTopic\"),_class$5.prototype),_applyDecoratedDescriptor(_class$5.prototype,\"getSubscribedUserList\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$5.prototype,\"getSubscribedUserList\"),_class$5.prototype),_class$5);class Context extends EventBase{get couldUploadLog(){return this._couldUploadLog}get couldReportEvent(){return this._couldReportEvent}constructor(A,e,t,o,g,i){var r,n,I,s;super(o,\"Context\"),_defineProperty$1(this,\"_token\",void 0),_defineProperty$1(this,\"config\",void 0),_defineProperty$1(this,\"_uid\",void 0),_defineProperty$1(this,\"_sid\",\"\"),_defineProperty$1(this,\"_vid\",void 0),_defineProperty$1(this,\"_startTime\",void 0),_defineProperty$1(this,\"_area\",\"CN\"),_defineProperty$1(this,\"_socketUseProxy\",!1),_defineProperty$1(this,\"appId\",void 0),_defineProperty$1(this,\"cloudProxy\",!1),_defineProperty$1(this,\"enablePrivate\",!1),_defineProperty$1(this,\"hasLoggedIn\",!1),_defineProperty$1(this,\"cloudProxyServers\",[]),_defineProperty$1(this,\"encryptionInfo\",{key:\"\",iv:\"\",keyLength:0,initEncryption:!1}),_defineProperty$1(this,\"rtmConfig\",void 0),_defineProperty$1(this,\"userMetadataSub\",new Set),_defineProperty$1(this,\"_pongTime\",(new Date).getTime()),_defineProperty$1(this,\"_offsetTime\",0),_defineProperty$1(this,\"_heartbeatInterval\",CONFIGURABLE_KEY_RTM_HEARTBEAT_INTERVAL),_defineProperty$1(this,\"_syncConnecting\",!1),_defineProperty$1(this,\"_connSyncEnv\",void 0),_defineProperty$1(this,\"linkIntervals\",[...LINK_INTERVALS]),_defineProperty$1(this,\"instanceId\",null),_defineProperty$1(this,\"_useAp4Ipv6Reg\",!1),_defineProperty$1(this,\"_operationControl\",void 0),_defineProperty$1(this,\"_couldUploadLog\",!1),_defineProperty$1(this,\"_couldReportEvent\",!1),this.appId=A,this.uid=e,this.config=t,this.rtmConfig=g,i&&(this.encryptionInfo=i),this.heartbeatInterval=g.heartbeatInterval?1e3*g.heartbeatInterval:void 0;const C=new OperationControl;this._operationControl=C,this.rtmConfig.privateConfig&&(this.enablePrivate=!0),(!this.rtmConfig.privateConfig||(null!==(r=null===(n=this.rtmConfig.privateConfig.logUploadHosts)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>0)&&(this._couldUploadLog=!0),(!this.rtmConfig.privateConfig||(null!==(I=null===(s=this.rtmConfig.privateConfig.eventUploadHosts)||void 0===s?void 0:s.length)&&void 0!==I?I:0)>0)&&(this._couldReportEvent=!0)}set pongTime(A){this._pongTime=A}get pongTime(){return this._pongTime}set offsetTime(A){this._offsetTime=A}get offsetTime(){return this._offsetTime}set heartbeatInterval(A){this._heartbeatInterval=\"number\"==typeof A&&A?A<MIN_HEARTBEAT_INTERVAL?MIN_HEARTBEAT_INTERVAL:A>MAX_HEARTBEAT_INTERVAL?MAX_HEARTBEAT_INTERVAL:A:CONFIGURABLE_KEY_RTM_HEARTBEAT_INTERVAL}get heartbeatInterval(){var A,e;return null!==(A=null!==(e=getParameter(\"HEART_BEAT\"))&&void 0!==e?e:this._heartbeatInterval)&&void 0!==A?A:CONFIGURABLE_KEY_RTM_HEARTBEAT_INTERVAL}set connSyncEnv(A){this._connSyncEnv=A}get connSyncEnv(){return this._connSyncEnv}set syncConnecting(A){this._syncConnecting=A}get syncConnecting(){return this._syncConnecting}set socketUseProxy(A){this.log(\"socketUseProxy is set to %s\",A),this._socketUseProxy=A}get socketUseProxy(){return this._socketUseProxy&&getParameter(\"ENABLE_EDGE_AUTO_FALLBACK\")}set token(A){this._token=\"string\"==typeof A&&A?A:void 0}set uid(A){if(this.log(\"The user ID is set to %s\",replaceRangeWithAsterisk(A)),!isValidId(A))throw new RtmInternalError;this._uid=A}get uid(){if(\"string\"==typeof this._uid&&this._uid)return this._uid;throw new RtmInternalError(\"Cannot get illegal uid\")}set vid(A){if(\"string\"!=typeof A)throw new RtmInternalError;this._vid=A}get vid(){return\"string\"==typeof this._vid?this._vid:(this.warn(\"Cannot get illegal vid\"),\"\")}get key(){if(\"string\"==typeof this._token&&this._token)return this._token;if(\"string\"==typeof this.appId&&this.appId)return this.appId;throw new RtmInternalError(\"Cannot get illegal key\")}get sid(){if(\"string\"==typeof this._sid&&this._sid)return this._sid;throw new RtmInternalError(\"Cannot get illegal sid\")}set sid(A){if(this.log(\"sid is set to %s\",A),\"string\"!=typeof A||!A)throw new RtmInternalError;this._sid=A}get startTime(){if(\"number\"==typeof this._startTime&&this._startTime)return this._startTime;throw new RtmInternalError(\"Cannot get illegal startTime\")}set startTime(A){if(this.log(\"startTime is set to %s\",A),\"number\"!=typeof A||!A)throw new RtmInternalError;this._startTime=A}get rtmArea(){if(\"string\"==typeof this._area&&this._area)return this._area;throw new RtmInternalError(\"Cannot get illegal area\")}set rtmArea(A){this.log(\"area is set to %s\",A),\"string\"==typeof A&&A?this._area=A:this.warn(\"set area failed\")}get useAp4Ipv6Reg(){return this._useAp4Ipv6Reg}set useAp4Ipv6Reg(A){this.log(\"useAp4Ipv6Reg is set to \",A),this._useAp4Ipv6Reg=A}get operationControl(){return this._operationControl}addReportEvents(A,e){var t,o;addReportEvents(this.appId,A,e,null!==(t=this.config.cloudProxy)&&void 0!==t&&t,null===(o=this.rtmConfig.privateConfig)||void 0===o?void 0:o.eventUploadHosts,this.couldReportEvent,this.vid)}sendReport(A,e){var t,o;sendReport(this.appId,A,e,null!==(t=this.config.cloudProxy)&&void 0!==t&&t,null===(o=this.rtmConfig.privateConfig)||void 0===o?void 0:o.eventUploadHosts,this.couldReportEvent)}}class PresenceImpl extends EventBase{constructor(A,e,t,o,g){super(A,\"PresenceImpl\",!0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"getMainSession\",void 0),_defineProperty$1(this,\"getRtmLinkState\",void 0),_defineProperty$1(this,\"getLocalStateCache\",void 0),_defineProperty$1(this,\"apiRateLimit\",new ApiRateLimiter),this.context=e,this.getMainSession=genGetMainSession(t),this.getRtmLinkState=o,this.getLocalStateCache=g}async whoNow(A,e,t){var o,g,i;const r=OperationName.whoNow;this.apiRateLimit.canMakeOperation(\"whoNow\"),validateChannelType(r,e);const n=!1!==(null==t?void 0:t.includedUserId),I=!0===(null==t?void 0:t.includedState),s=null!==(o=null==t?void 0:t.page)&&void 0!==o?o:\"\";if(this.validateRtmConnection(r),this.validateName(A,\"channelName\",r),!1===(null==t?void 0:t.includedUserId)&&!0===(null==t?void 0:t.includedState)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_INVALID_ARGUMENT);throw new RtmInvalidArgumentError(r,[e+\"include uid is false but include state is true\"],A)}const C=getChannelNameByType(A,e),E=null===(g=this.getMainSession())||void 0===g?void 0:g.getPresenceSession(),a=null===(i=this.getMainSession())||void 0===i?void 0:i.lastSubscribeOrJoinOptions.get(C);return a&&a.withPresence?await(null==E?void 0:E.requestWhoNow(C,n,I)):await(null==E?void 0:E.requestRPCWhoNow(C,s,n,I))}async getOnlineUsers(A,e,t){try{return await this.whoNow(A,e,t)}catch(A){throw A instanceof RTMBaseError&&(A.operation=OperationName.getOnlineUsers),A}}async whereNow(A){var e;const t=OperationName.whereNow;this.apiRateLimit.canMakeOperation(\"whereNow\"),this.validateRtmConnection(t),this.validateName(A,\"userId\",t);const o=null===(e=this.getMainSession())||void 0===e?void 0:e.getPresenceSession();return await o.requestRpcWhereNow(A)}async getUserChannels(A){try{return await this.whereNow(A)}catch(A){throw A instanceof RTMBaseError&&(A.operation=OperationName.getUserChannels),A}}async setState(A,e,t){const o=OperationName.presenceSetState;this.apiRateLimit.canMakeOperation(\"modifyState\"),validateChannelType(o,e),this.validateRtmConnection(o,!1),this.validateName(A,\"channelName\",o);const g=getChannelNameByType(A,e),i=Object.keys(t).length,{states:r}=await this.getState(this.context.uid,A,e,!0),n=new Set([...Object.keys(r),...Object.keys(t)]).size;if(0===i){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_INVALID_ARGUMENT);throw new RtmInvalidArgumentError(o,[e+\"state of parameter is empty\"],A)}if(i>MAX_STATE_COUNT||n>MAX_STATE_COUNT){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_STATE_COUNT_OVERFLOW);throw new RtmLimitExceededError(o,[e],A)}if(this.getLocalStateCache().size>K_PRESENCE_MAX_CHANNEL_COUNT){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_CACHED_TOO_MANY_STATES);throw new RtmLimitExceededError(o,[e],A)}validStateOfPresence(t,o);if(this.needOperationByCrdt(g)){var I;const A=null===(I=this.getMainSession())||void 0===I?void 0:I.getPresenceSession();this.log(\"\".concat(o,\" by crdt\")),A.requestSetState(g,t)}var s;(this.needOperationByLocal()||this.beQuietInChannel(g)||this.notInChannel(g))&&this.log(\"reconnecting, quiet or not in channel, \".concat(o,\" by local cache. decouple: \").concat(getParameter(\"DECOUPLE_SYNC\"),\", syncConnected: \").concat(null===(s=this.getMainSession())||void 0===s?void 0:s.getPresenceSession().getSyncConnected()));return this._updatePresenceStateCache(g,o,t),{timestamp:0}}async getState(A,e,t){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const g=OperationName.presenceGetState;o||this.apiRateLimit.canMakeOperation(\"getState\"),validateChannelType(g,t),this.validateRtmConnection(g,!1),this.context.uid!==A&&this.validateSyncConnection(g),this.validateName(e,\"channelName\",g),this.validateName(A,\"userId\",g);const i=getChannelNameByType(e,t),r={statesCount:0,states:{},userId:A,timestamp:0};if(this.notInChannel(i))if(A===this.context.uid)this.log(\"not in channel, get self state by local cache\"),this.getLocalState(i,g,r);else{var n;this.log(\"user(\".concat(replaceRangeWithAsterisk(A),\") not in channel, \").concat(g,\" by rpc api.\"));const e=null===(n=this.getMainSession())||void 0===n?void 0:n.getPresenceSession(),t=await e.requestRpcGetState(i,A);r.states=t,r.statesCount=Object.keys(t).length}else if(this.getMainSession().lastSubscribeOrJoinOptions.has(i)){let e=!1;if(A!==this.context.uid?(this.log(\"in channel, get other state by crdt\"),e=!0):this.needOperationByCrdt(i)&&(this.log(\"in channel, has doc, get self state by crdt\"),e=!0),e){const e=this.getCrdtState(i,A,o);r.statesCount=Object.keys(e).length,r.states=e}else this.log(\"in channel, get self state by local cache\"),this.getLocalState(i,g,r)}return r}getCrdtState(A,e,t){var o;return(null===(o=this.getMainSession())||void 0===o?void 0:o.getPresenceSession()).requestGetState(A,e,t)}getLocalState(A,e,t){var o;const g={},i=this.getLocalStateCache().get(A);null==i||i.forEach(((A,e)=>{g[e]=A})),this.log(\"quiet or not in channel, \".concat(e,\" by local cache. decouple: \").concat(getParameter(\"DECOUPLE_SYNC\"),\", syncConnected: \").concat(null===(o=this.getMainSession())||void 0===o?void 0:o.getPresenceSession().getSyncConnected())),t.states=g,t.statesCount=Object.keys(g).length}async removeState(A,e,t){var o,g,i,r,n,I,s;const C=OperationName.presenceRemoveState;this.apiRateLimit.canMakeOperation(\"modifyState\"),validateChannelType(C,e),this.validateRtmConnection(C,!1),this.validateName(A,\"channelName\",C);const E=!(null!=t&&null!==(o=t.states)&&void 0!==o&&o.length);if(!E&&null!=t&&null!==(g=t.states)&&void 0!==g&&g.length&&new Set(t.states).size!==(null===(i=t.states)||void 0===i?void 0:i.length)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_STATE_DUPLICATE_KEY);throw new RtmInvalidArgumentError(C,[e],A)}if((null!==(r=null==t||null===(n=t.states)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>MAX_STATE_COUNT){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_STATE_COUNT_OVERFLOW);throw new RtmLimitExceededError(C,[e],A)}null==t||null===(I=t.states)||void 0===I||I.forEach((A=>{validStateKeyOfPresence(A,C)}));const a=getChannelNameByType(A,e),B={};if(null==t||null===(s=t.states)||void 0===s||s.forEach((A=>{B[A]=\"\"})),this.needOperationByCrdt(a)){var Q;this.log(\"\".concat(C,\" by crdt. isClear: \").concat(E));(null===(Q=this.getMainSession())||void 0===Q?void 0:Q.getPresenceSession()).requestRemoveState(a,B,E)}var c;(this.needOperationByLocal()||this.beQuietInChannel(a)||this.notInChannel(a))&&this.log(\"reconnecting, quiet or not in channel, \".concat(C,\" by local cache. decouple: \").concat(getParameter(\"DECOUPLE_SYNC\"),\", syncConnected: \").concat(null===(c=this.getMainSession())||void 0===c?void 0:c.getPresenceSession().getSyncConnected()));return this._updatePresenceStateCache(a,C,B),{timestamp:0}}notInChannel(A){var e;return!(!this._noMainSession()&&null!==(e=this.getMainSession())&&void 0!==e&&e.lastSubscribeOrJoinOptions.has(A))}beQuietInChannel(A){var e;return!0===(null===(e=this.getMainSession())||void 0===e||null===(e=e.lastSubscribeOrJoinOptions.get(A))||void 0===e?void 0:e.beQuiet)}validateName(A,e,t){if(!isValidId(A)){const A=\"channelName\"===e?RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME:RTMErrorCode.RTM_ERROR_INVALID_USER_ID,{code:o,reason:g}=getErrorInfoByCode(A);throw new RtmInvalidArgumentError(t,[g],o)}}validateSyncConnection(A){var e;if(!(null===(e=this.getMainSession())||void 0===e?void 0:e.getPresenceSession()).getSyncConnected()){this.log(\"The sync service is not connected, cannot do the operation(\".concat(A,\")\"));const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_PRESENCE_NOT_CONNECTED);throw new RtmInvalidStatusError(A,[t],e)}}validateRtmConnection(A){var e;let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.context.enablePrivate&&(null===(e=this.context.rtmConfig.privateConfig)||void 0===e||!e.serviceType.includes(\"MESSAGE\"))){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_SERVICE_NOT_SUPPORTED);throw new RtmUnavailableError(A,t,e)}const o=this.getRtmLinkState();if(\"IDLE\"===o){this.log(\"The client state is \".concat(o,\", cannot do the operation(\").concat(A,\")\"));const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(A,[t],e)}t&&this.validateSyncConnection(A)}needOperationByLocal(){var A;const e=this.getRtmLinkState();return\"IDLE\"!==e&&\"CONNECTED\"!==e||!(null!==(A=this.getMainSession())&&void 0!==A&&A.getPresenceSession().getSyncConnected()||!getParameter(\"DECOUPLE_SYNC\"))}needOperationByCrdt(A){return!!this.getMainSession().getPresenceSession().getSelfDoc(A,\"needOperationByCrdt\")}_updatePresenceStateCache(A,e,t){var o;const g=null!==(o=this.getLocalStateCache().get(A))&&void 0!==o?o:new Map;if(e===OperationName.presenceSetState)for(const A in t)g.set(A,t[A]);else if(e===OperationName.presenceRemoveState)if(0===Object.keys(t).length)g.clear();else for(const A in t)g.delete(A);this.getLocalStateCache().set(A,g)}_noMainSession(){try{this.getMainSession()}catch(A){const{errorCode:e}=A;if(e===RTMErrorCode.RTM_ERROR_NOT_LOGIN)return!0}return!1}}var _class$4;let Presence=(_class$4=class extends EventBase{constructor(A,e,t,o,g){super(A,\"Presence\",!0),_defineProperty$1(this,\"presenceImpl\",void 0),this.presenceImpl=new PresenceImpl(A,e,t,o,g)}async whoNow(A,e,t){return await this.presenceImpl.whoNow(A,e,t)}async getOnlineUsers(A,e,t){return await this.presenceImpl.getOnlineUsers(A,e,t)}async whereNow(A){return await this.presenceImpl.whereNow(A)}async getUserChannels(A){return await this.presenceImpl.getUserChannels(A)}async setState(A,e,t){return await this.presenceImpl.setState(A,e,t)}async getState(A,e,t){return await this.presenceImpl.getState(A,e,t)}async removeState(A,e,t){return await this.presenceImpl.removeState(A,e,t)}},_applyDecoratedDescriptor(_class$4.prototype,\"whoNow\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"whoNow\"),_class$4.prototype),_applyDecoratedDescriptor(_class$4.prototype,\"getOnlineUsers\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"getOnlineUsers\"),_class$4.prototype),_applyDecoratedDescriptor(_class$4.prototype,\"whereNow\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"whereNow\"),_class$4.prototype),_applyDecoratedDescriptor(_class$4.prototype,\"getUserChannels\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"getUserChannels\"),_class$4.prototype),_applyDecoratedDescriptor(_class$4.prototype,\"setState\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"setState\"),_class$4.prototype),_applyDecoratedDescriptor(_class$4.prototype,\"getState\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"getState\"),_class$4.prototype),_applyDecoratedDescriptor(_class$4.prototype,\"removeState\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$4.prototype,\"removeState\"),_class$4.prototype),_class$4);class LockImpl extends EventBase{constructor(A,e,t,o,g,i,r){super(A,\"LockImpl\",!0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"getMainSession\",void 0),_defineProperty$1(this,\"localAcquiredLocks\",void 0),_defineProperty$1(this,\"setOperationNoRes\",new Set),_defineProperty$1(this,\"removeOperationNoRes\",new Set),_defineProperty$1(this,\"acquireOperationNoRes\",new Map),_defineProperty$1(this,\"releaseOperationNoRes\",new Set),_defineProperty$1(this,\"revokeOperationNoRes\",new Set),_defineProperty$1(this,\"watchingLocks\",new Set),_defineProperty$1(this,\"getRtmLinkState\",void 0),_defineProperty$1(this,\"onLockWatching\",(A=>{const{prefixChannelName:e,lockName:t}=A;this.watchingLocks.add(\"\".concat(e).concat(getPrefixLockName(t)))})),_defineProperty$1(this,\"getConsoleConfig\",void 0),_defineProperty$1(this,\"validateRtmConnection\",void 0),_defineProperty$1(this,\"apiRateLimit\",new ApiRateLimiter),this.context=e,this.getMainSession=genGetMainSession(t),this.getRtmLinkState=g,this.getConsoleConfig=o,this.validateRtmConnection=i,this.localAcquiredLocks=r}async setLock(A,e,t,o){const g=OperationName.setLock;this.apiRateLimit.canMakeOperation(\"setLock\"),validateChannelType(g,e),this.validateRtmConnection(g),this.validateEnableLock(g);const i={timestamp:0,channelName:A,channelType:e,lockName:t};this.validateChannelAndLock(A,t,g),void 0!==(null==o?void 0:o.ttl)&&(o.ttl<getParameter(\"LOCK_TTL\")?o.ttl=getParameter(\"LOCK_TTL\"):o.ttl>MAX_LOCK_TTL&&(o.ttl=MAX_LOCK_TTL));const r=getChannelNameByType(A,e),n=getPrefixLockName(t);this.setOperationNoRes.has(\"\".concat(r).concat(n))&&this.throwInvalidOperationError(g),this.setOperationNoRes.add(\"\".concat(r).concat(n));try{var I;const A=this.getMainSession().getRegistrarSession().requestSetLock(r,t,{ttl:null!==(I=null==o?void 0:o.ttl)&&void 0!==I?I:getParameter(\"LOCK_TTL\")});await A.toPromise()}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT);throw new RtmUnavailableError(g,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(g,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}finally{this.setOperationNoRes.delete(\"\".concat(r).concat(n))}return i}async removeLock(A,e,t){const o=OperationName.removeLock;this.apiRateLimit.canMakeOperation(\"removeLock\"),validateChannelType(o,e),this.validateRtmConnection(o),this.validateEnableLock(o);const g={timestamp:0,channelName:A,channelType:e,lockName:t};this.validateChannelAndLock(A,t,o);const i=getChannelNameByType(A,e),r=getPrefixLockName(t);this.removeOperationNoRes.has(\"\".concat(i).concat(r))&&this.throwInvalidOperationError(o),this.removeOperationNoRes.add(\"\".concat(i).concat(r));try{const A=this.getMainSession().getRegistrarSession().requestRemoveLock(i,t);await A.toPromise()}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT);throw new RtmUnavailableError(o,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(o,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}finally{this.removeOperationNoRes.delete(\"\".concat(i).concat(r))}return g}async acquireLock(A,e,t,o){var g,i;const r=OperationName.acquireLock;this.apiRateLimit.canMakeOperation(\"acquireLock\"),validateChannelType(r,e),this.validateRtmConnection(r),this.validateEnableLock(r),this.validateChannelAndLock(A,t,r);const n=getChannelNameByType(A,e),I=getPrefixLockName(t);if(null===(g=this.localAcquiredLocks.get(n))||void 0===g?void 0:g.get(t)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_PERFORMING);throw new RtmUnavailableError(r,[e],A)}let s,C;this.acquireOperationNoRes.has(\"\".concat(n).concat(I))&&this.throwInvalidOperationError(r),this.acquireOperationNoRes.set(\"\".concat(n).concat(I),null!==(i=null==o?void 0:o.retry)&&void 0!==i&&i);const E=new Promise(((A,e)=>{s=e,C=A}));try{const g=this.getMainSession().getRegistrarSession().requestAcquireLock(n,t,{retry:null==o?void 0:o.retry,checkTimeout:\"CONNECTED\"!==this.getRtmLinkState(),reject:s,resolve:C});await g.toPromise(),C({lockName:t,channelName:A,channelType:e,timestamp:0})}catch(A){if(this.logError(A),isRtmError(A))throw A;this.warn(\"acquireLock not match rtm error, \".concat(A))}finally{this.clearLockCacheForAcquire(n,I,null==o?void 0:o.retry)}return E}clearLockCacheForAcquire(A,e,t){this.acquireOperationNoRes.delete(\"\".concat(A).concat(e)),t&&this.watchingLocks.delete(\"\".concat(A).concat(e))}async releaseLock(A,e,t){var o;const g=OperationName.releaseLock;this.apiRateLimit.canMakeOperation(\"releaseLock\"),validateChannelType(g,e),this.validateRtmConnection(g),this.validateEnableLock(g);const i={timestamp:0,channelName:A,channelType:e,lockName:t};this.validateChannelAndLock(A,t,g);const r=getChannelNameByType(A,e),n=getPrefixLockName(t);if(!(this.watchingLocks.has(\"\".concat(r).concat(n))||null!==(o=this.localAcquiredLocks.get(r))&&void 0!==o&&o.get(t))){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_NOT_ACQUIRED);throw new RtmUnavailableError(g,[e],A)}this.releaseOperationNoRes.has(\"\".concat(r).concat(n))&&this.throwInvalidOperationError(g),this.releaseOperationNoRes.add(\"\".concat(r).concat(n));try{const A=this.getMainSession().getRegistrarSession().requestReleaseLock(r,t);await A.toPromise()}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT);throw new RtmUnavailableError(g,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(g,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}finally{this.releaseOperationNoRes.delete(\"\".concat(r).concat(n))}return i}async revokeLock(A,e,t,o){const g=OperationName.revokeLock;this.apiRateLimit.canMakeOperation(\"revokeLock\"),validateChannelType(g,e),this.validateRtmConnection(g),this.validateEnableLock(g);const i={timestamp:0,channelName:A,channelType:e,lockName:t};this.validateChannelAndLock(A,t,g),this.validateName(o,\"owner\",g);const r=getChannelNameByType(A,e),n=getPrefixLockName(t);this.revokeOperationNoRes.has(\"\".concat(r).concat(n))&&this.throwInvalidOperationError(g),this.revokeOperationNoRes.add(\"\".concat(r).concat(n));try{const A=this.getMainSession().getRegistrarSession().requestDisableLock(r,t,o);await A.toPromise()}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT);throw new RtmUnavailableError(g,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(g,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}finally{this.revokeOperationNoRes.delete(\"\".concat(r).concat(n))}return i}async getLock(A,e){const t=OperationName.getLock;this.apiRateLimit.canMakeOperation(\"getLock\"),validateChannelType(t,e),this.validateRtmConnection(t),this.validateEnableLock(t);const o={timestamp:0,totalLocks:0,lockDetails:[],channelName:A,channelType:e};this.validateName(A,\"channelName\",t);const g=getChannelNameByType(A,e);try{const A=this.getMainSession().getRegistrarSession().requestGetLock(g),e=await A.toPromise();o.totalLocks=e.length,o.lockDetails=e.map((A=>{var e,t,o,g;let i=null;try{(null==A?void 0:A.lockState)&&(i=JSON.parse(A.lockState))}catch(A){this.warn(\"parse lockState error, \".concat(A))}return{lockName:null!==(e=A.lockName)&&void 0!==e?e:\"\",ttl:null===(t=i)||void 0===t?void 0:t.create_ttl,owner:null!==(o=null===(g=i)||void 0===g?void 0:g.user)&&void 0!==o?o:\"\"}}))}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_TIMEOUT);throw new RtmUnavailableError(t,[e],A)}if(null!=A.code){const{code:e,reason:o}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(t,[o],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return o}validateName(A,e,t){if(!isValidId(A)){const A=\"lockName\"===e?RTMErrorCode.RTM_ERROR_LOCK_INVALID_NAME:\"channelName\"===e?RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME:RTMErrorCode.RTM_ERROR_INVALID_USER_ID,{code:o,reason:g}=getErrorInfoByCode(A);throw new RtmInvalidArgumentError(t,[g],o)}}validateChannelAndLock(A,e,t){if(this.validateName(A,\"channelName\",t),this.validateName(e,\"lockName\",t),!isValidId(e)||(null==e?void 0:e.length)>64){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_INVALID_NAME);throw new RtmInvalidArgumentError(t,[e],A)}}throwInvalidOperationError(A){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_OPERATION_PERFORMING);throw new RtmUnavailableError(A,[t],e)}validateEnableLock(A){const e=getParameter(\"LOCK_ENABLED\");if(\"true\"!==(void 0!==e?String(e):this.getConsoleConfig()[\"lock.enabled\"])){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_NOT_AVAILABLE);throw new RtmUnavailableError(A,[t],e)}}}var _class$3;let Lock=(_class$3=class extends EventBase{constructor(A,e,t,o,g,i,r){super(A,\"Lock\",!0),_defineProperty$1(this,\"lockImpl\",void 0),this.lockImpl=new LockImpl(A,e,t,o,g,i,r)}async setLock(A,e,t,o){return await this.lockImpl.setLock(A,e,t,o)}async removeLock(A,e,t){return await this.lockImpl.removeLock(A,e,t)}async acquireLock(A,e,t,o){return await this.lockImpl.acquireLock(A,e,t,o)}async releaseLock(A,e,t){return await this.lockImpl.releaseLock(A,e,t)}async revokeLock(A,e,t,o){return await this.lockImpl.revokeLock(A,e,t,o)}async getLock(A,e){return await this.lockImpl.getLock(A,e)}},_applyDecoratedDescriptor(_class$3.prototype,\"setLock\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$3.prototype,\"setLock\"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,\"removeLock\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$3.prototype,\"removeLock\"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,\"acquireLock\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$3.prototype,\"acquireLock\"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,\"releaseLock\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$3.prototype,\"releaseLock\"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,\"revokeLock\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$3.prototype,\"revokeLock\"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,\"getLock\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$3.prototype,\"getLock\"),_class$3.prototype),_class$3);class StorageImpl extends EventBase{constructor(A,e,t,o,g,i){super(A,\"StorageImpl\",!0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"getMainSession\",void 0),_defineProperty$1(this,\"localAcquiredLocks\",void 0),_defineProperty$1(this,\"getConsoleConfig\",void 0),_defineProperty$1(this,\"validateRtmConnection\",void 0),_defineProperty$1(this,\"apiRateLimit\",new ApiRateLimiter),this.context=e,this.getMainSession=genGetMainSession(t),this.getConsoleConfig=o,this.validateRtmConnection=g,this.localAcquiredLocks=i}async setChannelMetadata(A,e,t,o){var g;const i=OperationName.setChannelMetadata;this.apiRateLimit.canMakeOperation(\"channelMetaModify\"),validateChannelType(i,e),this.validateRtmConnection(i),this.validateEnableStorage(i);const r={totalCount:0,timestamp:0,channelName:A,channelType:e};this.validateSessionExist(i);const n=getChannelNameByType(A,e);let I;if(isValidId(A)||this.throwInvalidArgumentError(\"channelName\",i),null!=o&&o.lockName){var s,C;(!isValidId(o.lockName)||(null==o||null===(s=o.lockName)||void 0===s?void 0:s.length)>64)&&this.throwInvalidArgumentError(\"lockName\",i);const e=null===(C=this.localAcquiredLocks.get(n))||void 0===C?void 0:C.get(o.lockName);null!=e&&e.revision||this.throwNotAcquiredError(null==o?void 0:o.lockName,A,i),I=null==e?void 0:e.revision}const E=new Map;t.forEach((A=>{var e;const t=new MetadataItem;t.setKey(A.key),t.setRevision(null!==(e=A.revision)&&void 0!==e?e:-1),t.setValue(A.value),E.set(A.key,t)}));const a=[];E.forEach((A=>{a.push(A)}));const B=null!==(g=null==o?void 0:o.majorRevision)&&void 0!==g?g:-1;validMetaDataItem(i,{items:a,maxMetaDataCount:MAX_METADATA_COUNT,maxMetaValueSize:RTM_METADATA_VALUE_MAX_LENGTH,majorRevision:B,type:\"Set\"});try{const A=this.getMainSession().getRegistrarSession().requestSetChannelMetadata(a,{majorRevision:B,enableRecordTs:null==o?void 0:o.addTimeStamp,enableRecordUserId:null==o?void 0:o.addUserId},n,null==o?void 0:o.lockName,I).toPromise();await A}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(i,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(i,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return r}async getChannelMetadata(A,e){const t=OperationName.getChannelMetadata;this.apiRateLimit.canMakeOperation(\"channelMetaGet\"),validateChannelType(t,e),this.validateRtmConnection(t),this.validateEnableStorage(t);const o={totalCount:0,majorRevision:0,metadata:{},timestamp:0,channelName:A,channelType:e};this.validateSessionExist(t),isValidId(A)||this.throwInvalidArgumentError(\"channelName\",t);try{const t=this.getMainSession().getRegistrarSession().requestGetChannelMetadata(getChannelNameByType(A,e)),g=await t.pipe(map$1((A=>covertStateStringToMetaData(A)))).toPromise();o.majorRevision=g.majorRevision,o.totalCount=g.items.length,g.items.forEach((A=>{var e;o.metadata[A.getKey()]={value:null!==(e=A.getValue())&&void 0!==e?e:\"\",revision:A.getRevision(),updated:A.getUpdateTs(),authorUid:A.getAuthorUserId()}}))}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(t,[e],A)}if(null!=A.code){const{code:e,reason:o}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(t,[o],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return o}async removeChannelMetadata(A,e,t){const o=OperationName.removeChannelMetadata;this.apiRateLimit.canMakeOperation(\"channelMetaModify\"),validateChannelType(o,e),this.validateRtmConnection(o),this.validateEnableStorage(o);const g={totalCount:0,timestamp:0,channelName:A,channelType:e},i=getChannelNameByType(A,e);this.validateSessionExist(o),isValidId(A)||this.throwInvalidArgumentError(\"channelName\",o);const r=null==t?void 0:t.data,n=!r||0===r.length,I=new Map;null==r||r.forEach((A=>{var e,t;if(new Blob([null!==(e=A.value)&&void 0!==e?e:\"\"]).size>RTM_METADATA_VALUE_MAX_LENGTH){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_VALUE_LENGTH_OVERFLOW);throw new RtmLimitExceededError(o,[e],A)}const g=new MetadataItem;g.setKey(A.key),g.setRevision(null!==(t=A.revision)&&void 0!==t?t:-1),I.set(A.key,g)}));const s=[];var C;(I.forEach((A=>{s.push(A)})),n)?null!=t&&t.majorRevision&&validMetaDataMajorRevisionForRemove(o,t.majorRevision):validMetaDataItem(o,{items:s,maxMetaDataCount:MAX_METADATA_COUNT,maxMetaValueSize:RTM_METADATA_VALUE_MAX_LENGTH,majorRevision:null!==(C=null==t?void 0:t.majorRevision)&&void 0!==C?C:-1,type:\"Delete\"});let E;if(null!=t&&t.lockName){var a,B,Q;(!isValidId(t.lockName)||(null==t||null===(a=t.lockName)||void 0===a?void 0:a.length)>64)&&this.throwInvalidArgumentError(\"lockName\",o);const e=null===(B=this.localAcquiredLocks.get(i))||void 0===B?void 0:B.get(t.lockName);null!=e&&e.revision||this.throwNotAcquiredError(null==t?void 0:t.lockName,A,o),E=null!==(Q=null==e?void 0:e.revision)&&void 0!==Q?Q:void 0}try{var c,l;const A=n?this.getMainSession().getRegistrarSession().requestClearChannelMetadata({majorRevision:null!==(c=null==t?void 0:t.majorRevision)&&void 0!==c?c:-1,enableRecordTs:null==t?void 0:t.addTimeStamp,enableRecordUserId:null==t?void 0:t.addUserId},i,null==t?void 0:t.lockName,E).toPromise():this.getMainSession().getRegistrarSession().requestDeleteChannelMetadata(s,{majorRevision:null!==(l=null==t?void 0:t.majorRevision)&&void 0!==l?l:-1,enableRecordTs:null==t?void 0:t.addTimeStamp,enableRecordUserId:null==t?void 0:t.addUserId},i,null==t?void 0:t.lockName,E).toPromise();await A}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(o,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(o,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return g}async updateChannelMetadata(A,e,t,o){var g;const i=OperationName.updateChannelMetadata;this.apiRateLimit.canMakeOperation(\"channelMetaModify\"),validateChannelType(i,e),this.validateRtmConnection(i),this.validateEnableStorage(i);const r={timestamp:0,totalCount:0,channelName:A,channelType:e},n=getChannelNameByType(A,e);this.validateSessionExist(i),isValidId(A)||this.throwInvalidArgumentError(\"channelName\",i);const I=new Map;t.forEach((A=>{var e;const t=new MetadataItem;t.setKey(A.key),t.setRevision(null!==(e=A.revision)&&void 0!==e?e:-1),t.setValue(A.value),I.set(A.key,t)}));const s=[];let C;if(I.forEach((A=>{s.push(A)})),validMetaDataItem(i,{items:s,maxMetaDataCount:MAX_METADATA_COUNT,maxMetaValueSize:RTM_METADATA_VALUE_MAX_LENGTH,majorRevision:null!==(g=null==o?void 0:o.majorRevision)&&void 0!==g?g:-1,type:\"Update\"}),null!=o&&o.lockName){var E,a,B;(!isValidId(o.lockName)||(null==o||null===(E=o.lockName)||void 0===E?void 0:E.length)>64)&&this.throwInvalidArgumentError(\"lockName\",i);const e=null===(a=this.localAcquiredLocks.get(n))||void 0===a?void 0:a.get(o.lockName);null!=e&&e.revision||this.throwNotAcquiredError(null==o?void 0:o.lockName,A,i),C=null!==(B=null==e?void 0:e.revision)&&void 0!==B?B:void 0}try{var Q;const A=this.getMainSession().getRegistrarSession().requestUpdateChannelMetadata(s,{majorRevision:null!==(Q=null==o?void 0:o.majorRevision)&&void 0!==Q?Q:-1,enableRecordTs:null==o?void 0:o.addTimeStamp,enableRecordUserId:null==o?void 0:o.addUserId},n,null==o?void 0:o.lockName,C).toPromise();await A}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(i,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(i,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return r}async setUserMetadata(A,e){var t;const o=OperationName.setUserMetadata;this.apiRateLimit.canMakeOperation(\"userMetaModify\"),this.validateRtmConnection(o),this.validateEnableStorage(o);const g=null==e?void 0:e.userId,i={timestamp:0,totalCount:0,userId:g||this.context.uid};this.validateSessionExist(o),g&&!isValidId(g)&&this.throwInvalidArgumentError(\"userId\",o);const r=new Map;A.forEach((A=>{var e;const t=new MetadataItem;t.setKey(A.key),t.setRevision(null!==(e=A.revision)&&void 0!==e?e:-1),t.setValue(A.value),r.set(A.key,t)}));const n=[];r.forEach((A=>{n.push(A)}));const I=null!==(t=null==e?void 0:e.majorRevision)&&void 0!==t?t:-1;validMetaDataItem(o,{items:n,maxMetaDataCount:MAX_METADATA_COUNT,maxMetaValueSize:RTM_METADATA_VALUE_MAX_LENGTH,majorRevision:I,type:\"Set\"});try{await this.getMainSession().getRegistrarSession().requestSetLocalMetadata(n,{majorRevision:I,enableRecordTs:null==e?void 0:e.addTimeStamp,enableRecordUserId:null==e?void 0:e.addUserId},g).toPromise()}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(o,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(o,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return i}async getUserMetadata(A){const e=OperationName.getUserMetadata;this.apiRateLimit.canMakeOperation(\"userMetaGet\"),this.validateRtmConnection(e),this.validateEnableStorage(e);const t=null==A?void 0:A.userId,o={timestamp:0,totalCount:0,majorRevision:0,metadata:{},userId:t||this.context.uid};this.validateSessionExist(e),t&&!isValidId(t)&&this.throwInvalidArgumentError(\"userId\",e);try{const A=covertStateStringToMetaData(await this.getMainSession().getRegistrarSession().requestGetLocalMetaData(t||this.context.uid).toPromise());o.totalCount=A.items.length,o.majorRevision=A.majorRevision,A.items.forEach((A=>{var e;o.metadata[A.getKey()]={value:null!==(e=A.getValue())&&void 0!==e?e:\"\",revision:A.getRevision(),updated:A.getUpdateTs(),authorUid:A.getAuthorUserId()}}))}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(e,[t],A)}if(null!=A.code){const{code:t,reason:o}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(e,[o],t)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return o}async removeUserMetadata(A){const e=OperationName.removeUserMetadata;this.apiRateLimit.canMakeOperation(\"userMetaModify\"),this.validateRtmConnection(e),this.validateEnableStorage(e);const t=null==A?void 0:A.userId,o={timestamp:0,totalCount:0,userId:t||this.context.uid};this.validateSessionExist(e),t&&!isValidId(t)&&this.throwInvalidArgumentError(\"userId\",e);const g=null==A?void 0:A.data,i=!g||0===g.length,r=new Map;null==g||g.forEach((A=>{var t,o;if(new Blob([null!==(t=A.value)&&void 0!==t?t:\"\"]).size>RTM_METADATA_VALUE_MAX_LENGTH){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_VALUE_LENGTH_OVERFLOW);throw new RtmLimitExceededError(e,[t],A)}const g=new MetadataItem;g.setKey(A.key),g.setRevision(null!==(o=A.revision)&&void 0!==o?o:-1),r.set(A.key,g)}));const n=[];var I;(r.forEach((A=>{n.push(A)})),i)?null!=A&&A.majorRevision&&validMetaDataMajorRevisionForRemove(e,A.majorRevision):validMetaDataItem(e,{items:n,maxMetaDataCount:MAX_METADATA_COUNT,maxMetaValueSize:RTM_METADATA_VALUE_MAX_LENGTH,majorRevision:null!==(I=null==A?void 0:A.majorRevision)&&void 0!==I?I:-1,type:\"Delete\"});try{var s,C;const e=i?this.getMainSession().getRegistrarSession().requestClearLocalMetadata({majorRevision:null!==(s=null==A?void 0:A.majorRevision)&&void 0!==s?s:-1,enableRecordTs:null==A?void 0:A.addTimeStamp,enableRecordUserId:null==A?void 0:A.addUserId},t).toPromise():this.getMainSession().getRegistrarSession().requestDeleteLocalMetadata(n,{majorRevision:null!==(C=null==A?void 0:A.majorRevision)&&void 0!==C?C:-1,enableRecordTs:null==A?void 0:A.addTimeStamp,enableRecordUserId:null==A?void 0:A.addUserId},t).toPromise();await e}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(e,[t],A)}if(null!=A.code){const{code:t,reason:o}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(e,[o],t)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return o}async updateUserMetadata(A,e){var t;const o=OperationName.updateUserMetadata;this.apiRateLimit.canMakeOperation(\"userMetaModify\"),this.validateRtmConnection(o),this.validateEnableStorage(o);const g=null==e?void 0:e.userId,i={timestamp:0,totalCount:0,userId:g||this.context.uid};this.validateSessionExist(o),g&&!isValidId(g)&&this.throwInvalidArgumentError(\"userId\",o);const r=new Map;null==A||A.forEach((A=>{var e;const t=new MetadataItem;t.setKey(A.key),t.setRevision(null!==(e=A.revision)&&void 0!==e?e:-1),t.setValue(A.value),r.set(A.key,t)}));const n=[];r.forEach((A=>{n.push(A)})),validMetaDataItem(o,{items:n,maxMetaDataCount:MAX_METADATA_COUNT,maxMetaValueSize:RTM_METADATA_VALUE_MAX_LENGTH,majorRevision:null!==(t=null==e?void 0:e.majorRevision)&&void 0!==t?t:-1,type:\"Update\"});try{var I;await this.getMainSession().getRegistrarSession().requestUpdateLocalMetadata(n,{majorRevision:null!==(I=null==e?void 0:e.majorRevision)&&void 0!==I?I:-1,enableRecordTs:null==e?void 0:e.addTimeStamp,enableRecordUserId:null==e?void 0:e.addUserId},g).toPromise()}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw new RtmUnavailableError(o,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(o,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return i}async subscribeUserMetadata(A){const e=OperationName.subscribeUserMetadata;this.apiRateLimit.canMakeOperation(\"userMetaSub\"),this.validateRtmConnection(e),this.validateEnableStorage(e),this.validateEnableStorageSub(e);const t={timestamp:0,userId:A||this.context.uid};if(this.validateSessionExist(e),!isValidId(A)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID);throw new RtmInvalidArgumentError(e,[t],A)}if(A.split(\"\").includes(\".\")){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID);throw new RtmInvalidArgumentError(e,[t],A)}if(this.context.userMetadataSub.has(A))return t;if(this.context.userMetadataSub.size>=MAX_SUBSCRIPTION_USER){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_SUBSCRIBE_USER_EXCEED_LIMITATION);throw new RtmLimitExceededError(e,[t],A)}try{await this.getMainSession().getRegistrarSession().requestSubscribeUserMetadata(A,\"NORMAL\"),this.context.userMetadataSub.add(A)}catch(t){if(isRtmError(t)){if(this.logError(t),isNoLogged(t))throw t;if(t.code){const{code:A,reason:o}=getErrorInfoByCode(t.code);throw new RtmUnavailableError(e,[o],A)}this.warn(\"error code is undefined, \".concat(t))}else{if(isTimeout(t)){const{code:t,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_OPERATION_TIMEOUT);throw this.getMainSession().getRegistrarSession().emit(\"unSubUserMetadata\",A),new RtmUnavailableError(e,[o],t)}this.warn(\"\".concat(e,\" occurs error not of rtm, \").concat(t))}}return t}async unsubscribeUserMetadata(A){const e=OperationName.unsubscribeUserMetadata;this.validateRtmConnection(e),this.validateEnableStorage(e);const t={timestamp:0,userId:A||this.context.uid};if(this.validateSessionExist(e),!isValidId(A)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID);throw new RtmInvalidArgumentError(e,[t],A)}if(A.split(\"\").includes(\".\")){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID);throw new RtmInvalidArgumentError(e,[t],A)}if(!this.context.userMetadataSub.has(A)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_NOT_SUBSCRIBE);throw new RtmInvalidStatusError(e,[t],A)}try{this.getMainSession().getRegistrarSession().requestUnsubscribeUserMetadata(A),this.context.userMetadataSub.delete(A)}catch(A){if(isRtmError(A))throw A}return t}throwNotAcquiredError(A,e,t){const{code:o,reason:g}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_LOCK_NOT_ACQUIRED);throw new RtmUnavailableError(t,[g],o)}throwInvalidArgumentError(A,e){const{code:t,reason:o}=getErrorInfoByCode(\"userId\"===A?RTMErrorCode.RTM_ERROR_INVALID_USER_ID:\"channelName\"===A?RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME:RTMErrorCode.RTM_ERROR_STORAGE_INVALID_LOCK_NAME);throw new RtmInvalidArgumentError(e,[o],t)}validateSessionExist(A){if(void 0===this.getMainSession()){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(A,[t],e)}}validateEnableStorage(A){const e=getParameter(\"STORAGE_ENABLED\");if(\"true\"!==(void 0!==e?String(e):this.getConsoleConfig()[\"storage.enabled\"])){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_NOT_AVAILABLE);throw new RtmUnavailableError(A,[t],e)}}validateEnableStorageSub(A){const e=getParameter(\"STORAGE_USER_SUB_ENABLED\");if(\"true\"!==(void 0!==e?String(e):this.getConsoleConfig()[\"storage.user_subscribe_enabled\"])){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_NOT_AVAILABLE);throw new RtmUnavailableError(A,[t],e)}}}var _class$2;let RStorage=(_class$2=class extends EventBase{constructor(A,e,t,o,g,i){super(A,\"Storage\",!0),_defineProperty$1(this,\"storageImpl\",void 0),this.storageImpl=new StorageImpl(A,e,t,o,g,i)}async setChannelMetadata(A,e,t,o){return await this.storageImpl.setChannelMetadata(A,e,t,o)}async getChannelMetadata(A,e){return await this.storageImpl.getChannelMetadata(A,e)}async removeChannelMetadata(A,e,t){return await this.storageImpl.removeChannelMetadata(A,e,t)}async updateChannelMetadata(A,e,t,o){return await this.storageImpl.updateChannelMetadata(A,e,t,o)}async setUserMetadata(A,e){return await this.storageImpl.setUserMetadata(A,e)}async getUserMetadata(A){return await this.storageImpl.getUserMetadata(A)}async removeUserMetadata(A){return await this.storageImpl.removeUserMetadata(A)}async updateUserMetadata(A,e){return await this.storageImpl.updateUserMetadata(A,e)}async subscribeUserMetadata(A){return await this.storageImpl.subscribeUserMetadata(A)}async unsubscribeUserMetadata(A){return await this.storageImpl.unsubscribeUserMetadata(A)}},_applyDecoratedDescriptor(_class$2.prototype,\"setChannelMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"setChannelMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"getChannelMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"getChannelMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"removeChannelMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"removeChannelMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"updateChannelMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"updateChannelMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"setUserMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"setUserMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"getUserMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"getUserMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"removeUserMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"removeUserMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"updateUserMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"updateUserMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"subscribeUserMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"subscribeUserMetadata\"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,\"unsubscribeUserMetadata\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$2.prototype,\"unsubscribeUserMetadata\"),_class$2.prototype),_class$2);class HistoryImpl extends EventBase{constructor(A,e,t,o,g){super(A,\"HistoryImpl\",!0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"getConsoleConfig\",void 0),_defineProperty$1(this,\"getMainSession\",void 0),_defineProperty$1(this,\"validateRtmConnection\",void 0),_defineProperty$1(this,\"apiRateLimit\",new ApiRateLimiter),this.context=e,this.getMainSession=genGetMainSession(t),this.getConsoleConfig=o,this.validateRtmConnection=g}async getMessages(A,e,t){var o,g,i,r;const n=OperationName.getMessages;this.apiRateLimit.canMakeOperation(\"getMessages\"),validateHistoryChannelType(n,e),this.validateRtmConnection(n),this.validateEnableHistory(n);if(!isValidId(A)){this.warn(\"invalid channel name, \".concat(A));const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(n,[t],e)}if(\"USER\"===e&&A!==this.context.uid){this.warn(\"operation not permit\");const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_NOT_PERMITTED);throw new RtmInvalidArgumentError(n,[e],A)}const I=null!==(o=null==t?void 0:t.start)&&void 0!==o?o:0,s=null!==(g=null==t?void 0:t.end)&&void 0!==g?g:0;if(I>0&&s>0&&(I<=s||I-s>GET_MESSAGE_TIME_LIMIT)){this.warn(\"invalid start or end timestamp}\");const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_HISTORY_INVALID_TIMESTAMP);throw new RtmInvalidArgumentError(n,[e],A)}const C=null!==(i=getParameter(\"HISTORY_MSG_COUNT_LIMIT\"))&&void 0!==i?i:GET_MESSAGE_MAX_COUNT;let E=null!==(r=null==t?void 0:t.messageCount)&&void 0!==r?r:C;(0===E||E>C)&&(E=C);try{var a,B,Q;const t=this.getMainSession().getRegistrarSession().requestGetMessages({channelName:A,channelType:e,count:E,startTime:I,endTime:s}),o=await t.toPromise();return{messageList:null!==(a=o.messageList)&&void 0!==a?a:[],count:null!==(B=null===(Q=o.messageList)||void 0===Q?void 0:Q.length)&&void 0!==B?B:0,newStart:o.newStart,timestamp:0}}catch(A){if(isRtmError(A)){if(this.logError(A),isNoLogged(A))throw A;if(isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_HISTORY_OPERATION_TIMEOUT);throw new RtmUnavailableError(n,[e],A)}if(null!=A.code){const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnavailableError(n,[t],e)}this.warn(\"error code is undefined, \".concat(A))}else this.warn(\"not rtm error, \".concat(A))}return{timestamp:0,messageList:[],count:0,newStart:0}}validateEnableHistory(A){if(\"true\"!==this.getConsoleConfig()[\"history.enabled\"]){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_HISTORY_NOT_AVAILABLE);throw new RtmUnavailableError(A,[t],e)}}}var _class$1;let History=(_class$1=class extends EventBase{constructor(A,e,t,o,g){super(A,\"History\",!0),_defineProperty$1(this,\"historyImpl\",void 0),this.historyImpl=new HistoryImpl(A,e,t,o,g)}async getMessages(A,e,t){return await this.historyImpl.getMessages(A,e,t)}},_applyDecoratedDescriptor(_class$1.prototype,\"getMessages\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class$1.prototype,\"getMessages\"),_class$1.prototype),_class$1);var name=\"agora-rtm\",exports$1={\".\":{require:\"./dist/bundle.umd.js\",import:\"./dist/bundle.mjs\",types:\"./dist/types/index.d.ts\"}},version=\"2.2.1\",description=\"JavaScript SDK for Agora RTM\",keywords=[\"agora\",\"rtm\",\"real-time-messaging\",\"sdk\",\"javascript\",\"signaling\",\"stream\",\"messaging\"],homepage=\"https://bitbucket.agoralab.co/projects/WEBRTC/repos/rtm.js\",bugs={url:\"https://agora-ticket.agora.io\",email:\"support@agora.io\"},license=\"Apache\",author=\"Agora Lab.\",main=\"dist/bundle.umd.js\",types=\"dist/types/index.d.ts\",directories={lib:\"src\"},repository={type:\"git\",url:\"git+ssh://git@git.agoralab.co/webrtc/rtm.js.git\"},scripts={postinstall:\"touch ./.env && node --experimental-import-meta-resolve ./scripts/patch.mjs\",\"proto-gen\":\"npm run proto-gen:js && npm run proto-gen:ts\",\"proto-gen:js\":\"pbjs -t static-module --no-create --no-decode --no-verify --no-service --no-convert --force-long --no-delimited -w es6 -o ./src/lib/compiled_proto/report.js ./src/third_party/report.proto && pbjs -t static-module --no-delimited --no-convert --no-verify --no-service --no-create --force-long -w es6 -o ./src/lib/compiled_proto/gateway.js ./src/third_party/gateway.proto && pbjs -t static-module --no-delimited --no-convert --no-verify --no-service --no-create --force-long -w es6 -o ./src/lib/compiled_proto/metadata.js ./src/third_party/metadata.proto\",\"proto-gen:ts\":\"pbts --main --out ./src/lib/compiled_proto/report.d.ts ./src/lib/compiled_proto/report.js && pbts --main --out ./src/lib/compiled_proto/gateway.d.ts ./src/lib/compiled_proto/gateway.js && pbts --main --out ./src/lib/compiled_proto/metadata.d.ts ./src/lib/compiled_proto/metadata.js\",\"build:types\":\"run-s dts:tsc dts:gen\",\"dts:tsc\":\"tsc -p ./tsconfig.json\",\"dts:gen\":\"rollup -c ./rollup.types.config.mjs\",dev:\"FUSION=false NODE_ENV=development rollup -c rollup.config.mjs -w\",\"dev-fusion\":\"FUSION=true NODE_ENV=development rollup -c rollup.config.mjs -w\",build:'NODE_OPTIONS=\"--max-old-space-size=8192\" npm run build:web && NODE_OPTIONS=\"--max-old-space-size=8192\" npm run build:cdn',\"build:web\":'cross-env GIT_COMMIT=$(git describe --tags --long --match \"v*\" --dirty) npx cross-env NODE_ENV=production npx rollup -c rollup.config.mjs',\"build:cdn\":'cross-env GIT_COMMIT=$(git describe --tags --long --match \"v*\" --dirty) npx cross-env NODE_ENV=production npx rollup -c rollup.config.web.mjs',prepublishOnly:\"FUSION=false npm run build && npm run build:types && node ./prepublish.js\",prepublishOnlyOversea:\"cross-env FUSION=false OVERSEA=true npm run build && npm run build:types && cross-env OVERSEA=true node ./prepublish.js\",prepublishOnlyFusion:\"cross-env FUSION=true npm run build && npm run build:types && cross-env FUSION=true node ./prepublish.js\",beautify:\"concurrently -P 'npm:lint:*' -- --fix\",lint:\"npx eslint src/  --format codeframe\",wb:\"wb\"},config={scripts:{commit:\"npx git-cz\"}},dependencies={\"@thi.ng/cache\":\"^1.0.70\",\"cross-env\":\"^7.0.3\",debug:\"^4.3.4\",events:\"^3.2.0\",\"format-util\":\"^1.0.5\",gud:\"^1.0.0\",\"is-mobile\":\"^3.1.1\",\"is-what\":\"^3.14.1\",lodash:\"^4.17.21\",long:\"^4.0.0\",neverthrow:\"^5.0.1\",\"node-forge\":\"^1.3.1\",protobufjs:\"^7.2.6\",rxjs:\"^6.6.3\",\"rxjs-etc\":\"^10.6.0\",\"rxjs-websockets\":\"^8.0.1\",\"safe-json-stringify\":\"^1.2.0\",uuid:\"^3.4.0\",\"agora-rtc-sdk-ng\":\"4.22.0\"},devDependencies={\"@ampproject/rollup-plugin-closure-compiler\":\"^0.27.0\",\"@babel/core\":\"^7.23.7\",\"@babel/eslint-parser\":\"^7.23.3\",\"@babel/plugin-proposal-class-properties\":\"^7.13.0\",\"@babel/plugin-proposal-decorators\":\"^7.13.5\",\"@babel/plugin-syntax-import-attributes\":\"^7.23.3\",\"@babel/plugin-transform-for-of\":\"^7.13.0\",\"@babel/preset-env\":\"^7.13.5\",\"@babel/preset-typescript\":\"^7.13.0\",\"@rollup/plugin-babel\":\"^6.0.4\",\"@rollup/plugin-commonjs\":\"^25.0.7\",\"@rollup/plugin-json\":\"^6.1.0\",\"@rollup/plugin-node-resolve\":\"^15.2.3\",\"@rollup/plugin-replace\":\"^5.0.5\",\"@rollup/plugin-terser\":\"^0.4.4\",\"@types/long\":\"^4.0.2\",\"@types/node\":\"^14.18.63\",\"@typescript-eslint/eslint-plugin\":\"^6.19.0\",\"@typescript-eslint/parser\":\"^6.19.0\",\"agora-rte-extension\":\"^1.2.3\",\"babel-plugin-annotate-pure-calls\":\"^0.4.0\",\"babel-plugin-const-enum\":\"1.0.1\",\"babel-plugin-istanbul\":\"^6.0.0\",\"babel-plugin-polyfill-corejs3\":\"^0.2.4\",\"babel-plugin-polyfill-regenerator\":\"^0.2.2\",concurrently:\"^7.4.0\",\"core-js\":\"^3.9.0\",\"cross-zip\":\"^4.0.0\",decomment:\"^0.9.3\",\"dotenv-extended\":\"^2.9.0\",eslint:\"^8.56.0\",\"eslint-config-airbnb-typescript\":\"^17.1.0\",\"eslint-formatter-codeframe\":\"^7.32.1\",\"eslint-plugin-eslint-comments\":\"^3.2.0\",\"eslint-plugin-import\":\"^2.29.1\",\"eslint-plugin-prettier\":\"^5.1.3\",\"eslint-plugin-simple-import-sort\":\"^10.0.0\",\"fs-extra\":\"^9.1.0\",jsdom:\"^20.0.1\",nodemon:\"^2.0.22\",\"npm-run-all\":\"^4.1.5\",prettier:\"3.2.3\",\"protobufjs-cli\":\"~1.1.2\",\"regenerator-runtime\":\"^0.14.0\",rollup:\"^4.9.2\",\"rollup-plugin-dts\":\"^6.1.0\",\"strict-event-emitter-types\":\"^2.0.0\",touch:\"^3.1.0\",typedoc:\"^0.23.0\",typescript:\"^5.3.3\",\"utility-types\":\"^3.10.0\",\"white-brand-cli\":\"^1.2.3\"},optionalDependencies={\"@fast-csv/parse\":\"^4.3.6\",\"@types/debug\":\"4.1.5\",\"@types/format-util\":\"^1.0.1\",\"@types/google-closure-compiler\":\"^0.0.18\",\"@types/lodash\":\"^4.14.168\",\"@types/node-forge\":\"^1.3.1\",\"@types/pako\":\"^1.0.1\",\"@types/safe-json-stringify\":\"^1.1.2\",\"@types/uuid\":\"^3.4.9\",\"browserslist-useragent\":\"^3.0.3\",\"rollup-plugin-livereload\":\"^2.0.0\",\"rollup-plugin-serve\":\"^1.1.0\",\"rollup-plugin-visualizer\":\"^5.12.0\",\"typedoc-plugin-no-inherit\":\"^1.2.0\"},pkg={name:name,exports:exports$1,version:version,description:description,keywords:keywords,homepage:homepage,bugs:bugs,license:license,author:author,main:main,types:types,directories:directories,repository:repository,scripts:scripts,config:config,dependencies:dependencies,devDependencies:devDependencies,optionalDependencies:optionalDependencies};const configKey2PrivateParamKey={DECOUPLE_SYNC:\"DECOUPLE_SYNC\"},QUERY_INTERVAL=3e5,LOCAL_STORAGE_KEY=\"_agora_rtm_custom_config\",defaultConfig$1={\"_store log_rtm_only #173724\":'[\"A\",{\"rtm.log.encrypt_log\":false}]',\"_store web_rtm_decoupled_sync #203228\":'[\"A\",{\"DECOUPLE_SYNC\":false}]',\"_store two_rtm #108239\":'[\"A\",{\"rtm.decouple_sync\":true}]',\"_store log_rtm #106907\":'[\"A\",{\"rtc.log_encryption\":false,\"rtc.log_encryption_mode\":0,\"rtc.log_encryption_salt\":\"\"}]'};function getDeviceInfo(A){let e=\"Unknown\",t=\"Unknown\";return A.includes(\"Chrome\")?e=\"Chrome\":A.includes(\"Firefox\")?e=\"Firefox\":A.includes(\"Safari\")&&!A.includes(\"Chrome\")?e=\"Safari\":A.includes(\"Edge\")?e=\"Edge\":(A.includes(\"Opera\")||A.includes(\"OPR\"))&&(e=\"Opera\"),A.includes(\"Windows NT\")?t=\"Windows\":A.includes(\"Mac OS X\")?t=\"Mac OS\":A.includes(\"Android\")?t=\"Android\":A.includes(\"iPhone\")||A.includes(\"iPad\")?t=\"iOS\":A.includes(\"Linux\")&&(t=\"Linux\"),{deviceName:e,osName:t}}class CustomConfig{constructor(A,e){var t;_defineProperty$1(this,\"_appid\",\"\"),_defineProperty$1(this,\"_sid\",\"\"),_defineProperty$1(this,\"_timer\",null),_defineProperty$1(this,\"_device\",\"\"),_defineProperty$1(this,\"_system\",\"\"),_defineProperty$1(this,\"_systemGeneral\",\"\"),this._appid=A,this._sid=null!==(t=null==e?void 0:e.sid)&&void 0!==t?t:\"\",this._systemGeneral=navigator.userAgent;const{deviceName:o,osName:g}=getDeviceInfo(this._systemGeneral);this._device=o,this._system=g}init(A){this._sid=A;const e=this._getStorageConfig();if(e)for(const A in e)this._updateSdkConfig(A,e[A]);this._start()}stop(){this._timer&&(clearInterval(this._timer),this._timer=null)}async _query(){let A=null!=defaultConfig$1?defaultConfig$1:{};try{const e=await postWithAbortSignal(\"https://ap-web-1.agora.io/api/v1\",{headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"54\",\"Content-Type\":\"application/json\"},body:{flag:64,cipher_method:0,features:{device:this._device,system:this._system,system_general:navigator.userAgent,vendor:this._appid,version:pkg.version,install_id:this._sid,session_id:this._sid,detail:\"\"}}}),t=JSON.parse(e.responseText),{code:o,test_tags:g}=t;if(0!==o)return;A=g;for(const e in A)if(e.includes(\"web_rtm\")){const[t,o]=JSON.parse(A[e]),g=this._getStorageConfig()||{};for(const A in o)Object.hasOwn(configKey2PrivateParamKey,A)&&(g[A]=o[A]);this._setStorageConfig(g)}}catch(A){}}async _start(){await this._query(),this._timer=setInterval((async()=>{await this._query()}),QUERY_INTERVAL)}_getStorageConfig(){var A;const e=localStorage.getItem(LOCAL_STORAGE_KEY),t=null===(A=JSON.parse(null!=e?e:JSON.stringify({})))||void 0===A?void 0:A[this._appid];return t||null}_setStorageConfig(A){var e;const t=this._getStorageConfig()||{},o=JSON.parse(null!==(e=localStorage.getItem(LOCAL_STORAGE_KEY))&&void 0!==e?e:\"{}\");o[this._appid]=_objectSpread2(_objectSpread2({},t),A),localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(o))}_updateSdkConfig(A,e){getParameter(configKey2PrivateParamKey[A])!==e&&setParameter(configKey2PrivateParamKey[A],e)}}var _exec,_window;const chromeVersion=null===(_exec=/Chrome\\/([0-9.]+)/.exec(null===(_window=window)||void 0===_window||null===(_window=_window.navigator)||void 0===_window?void 0:_window.userAgent))||void 0===_exec||null===(_exec=_exec[1])||void 0===_exec?void 0:_exec.split(\".\")[0];if(chromeVersion&&parseInt(chromeVersion,10)>=88&&!isMobile$1()){var _hiddenCanvas$getCont;const A=document.createElement(\"video\"),e=document.createElement(\"canvas\");A.setAttribute(\"style\",\"display:none\"),A.setAttribute(\"muted\",\"\"),A.muted=!0,A.setAttribute(\"autoplay\",\"\"),A.autoplay=!0,A.setAttribute(\"playsinline\",\"\"),e.setAttribute(\"style\",\"display:none\"),e.setAttribute(\"width\",\"1\"),e.setAttribute(\"height\",\"1\"),null===(_hiddenCanvas$getCont=e.getContext(\"2d\"))||void 0===_hiddenCanvas$getCont||_hiddenCanvas$getCont.fillRect(0,0,1,1),A.srcObject=null==e?void 0:e.captureStream()}const connectionStateCodeMap={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,FAILED:5},connectionStateChangeReason={CONNECTING:0,LOGIN_SUCCESS:10001,REJECTED_BY_SERVER:10,LOST:16,INTERRUPTED:2,LOGOUT:10002,SAME_UID_LOGIN:8,TOKEN_EXPIRED:9,PRESENCE_NOT_READY:10},LogFilter={LOG_FILTER_NONE:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARN:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},updateLogLevel=(A,e)=>{switch(A){case\"debug\":e.logFilter=LogFilter.LOG_FILTER_DEBUG;break;case\"info\":e.logFilter=LogFilter.LOG_FILTER_INFO;break;case\"warn\":e.logFilter=LogFilter.LOG_FILTER_WARN;break;case\"none\":e.logFilter=LogFilter.LOG_FILTER_NONE;break;default:e.logFilter=LogFilter.LOG_FILTER_ERROR}},updateWasmLogLevel=A=>{},defaultConsoleConfig={\"-\":0,app_key:\"\",region:\"CN\",enabled:String(getParameter(\"RTM2_ENABLED\")),\"presence.occupancy\":String(K_DEFAULT_INTERVAL_THRESHOLD),\"presence.interval\":String(K_PRESENCE_INTERVAL_DEFAULT),\"presence.debounce\":String(K_DEBOUNCE_DEFAULT),\"storage.enabled\":String(!0),\"storage.channel_subscribe_enabled\":String(!0),\"storage.user_subscribe_enabled\":String(!0),\"lock.enabled\":String(!0),\"history.enabled\":String(!0)};class RTMImpl extends EventBase{constructor(A,e,t,o,g,i){var r,n;super(A,\"RTMImpl\",!0),_defineProperty$1(this,\"userId\",void 0),_defineProperty$1(this,\"appId\",void 0),_defineProperty$1(this,\"processId\",void 0),_defineProperty$1(this,\"streamChannelList\",[]),_defineProperty$1(this,\"stChannelInstances\",[]),_defineProperty$1(this,\"token\",void 0),_defineProperty$1(this,\"cipherKey\",void 0),_defineProperty$1(this,\"cloudProxy\",void 0),_defineProperty$1(this,\"presenceTimeout\",getParameter(\"PRESENCE_TIMEOUT\")),_defineProperty$1(this,\"presence\",void 0),_defineProperty$1(this,\"storage\",void 0),_defineProperty$1(this,\"lock\",void 0),_defineProperty$1(this,\"history\",void 0),_defineProperty$1(this,\"encryptionMode\",void 0),_defineProperty$1(this,\"salt\",void 0),_defineProperty$1(this,\"key\",\"\"),_defineProperty$1(this,\"iv\",\"\"),_defineProperty$1(this,\"keyLength\",0),_defineProperty$1(this,\"initEncryption\",!1),_defineProperty$1(this,\"useStringUserId\",void 0),_defineProperty$1(this,\"context\",void 0),_defineProperty$1(this,\"mainSession\",void 0),_defineProperty$1(this,\"loginPromise\",void 0),_defineProperty$1(this,\"lastLoginTime\",void 0),_defineProperty$1(this,\"connectionState\",\"DISCONNECTED\"),_defineProperty$1(this,\"linkState\",\"IDLE\"),_defineProperty$1(this,\"linkTimer\",null),_defineProperty$1(this,\"suspendedTimer\",null),_defineProperty$1(this,\"joinCheckTimer\",null),_defineProperty$1(this,\"suspended\",!1),_defineProperty$1(this,\"blacklistedIP\",{}),_defineProperty$1(this,\"reconnId\",0),_defineProperty$1(this,\"attributeDrafts\",new Set),_defineProperty$1(this,\"internalEmitter\",new EventEmitter$1),_defineProperty$1(this,\"localAcquiredLocks\",new Map),_defineProperty$1(this,\"consoleConfig\",defaultConsoleConfig),_defineProperty$1(this,\"channelMetadataSub\",new Set),_defineProperty$1(this,\"localStateCache\",new Map),_defineProperty$1(this,\"logLevel\",void 0),_defineProperty$1(this,\"apiRateLimit\",new ApiRateLimiter),_defineProperty$1(this,\"_lastOptions\",void 0),_defineProperty$1(this,\"_lastChannelMetaEventInfos\",new Map),_defineProperty$1(this,\"_lastUserMetaEventInfos\",new Map),_defineProperty$1(this,\"_createCollInterval\",null),_defineProperty$1(this,\"_customConfig\",void 0),_defineProperty$1(this,\"TokenPrivilegeWillExpireHandler\",(()=>{this.emit(\"tokenPrivilegeWillExpire\",\"\")})),_defineProperty$1(this,\"userDropHandler\",(async A=>{if(\"FAILED\"===this.connectionState)return;let e=\"INTERRUPTED\",t=LinkStateChangeReasonDescription.UNKNOWN,o=\"UNKNOWN\";switch(A){case 2:this.logError(\"Server banned because of token is expired, ticket expired.\"),e=\"TOKEN_EXPIRED\",t=LinkStateChangeReasonDescription.TOKEN_EXPIRED,o=\"TOKEN_EXPIRED\";break;case 11:this.logError(\"Kicked off by remote session\"),e=\"SAME_UID_LOGIN\",t=LinkStateChangeReasonDescription.SAME_UID_LOGIN,o=\"SAME_UID_LOGIN\";break;case 10019:this.logError(\"Kicked off by authorization\"),e=\"TOKEN_EXPIRED\",t=LinkStateChangeReasonDescription.TOKEN_EXPIRED,o=\"TOKEN_EXPIRED\";break;default:this.logError(\"User kicked off for unknown code: \".concat(A))}this.updateLinkState(\"FAILED\",\"SERVER_REJECT\",this.getUsedMessageChannelIds(),o,t),this.onConnectionStateChanged(\"FAILED\",e)})),_defineProperty$1(this,\"userMetaDataUpdatedHandler\",(A=>{var e,t,o,g,i;let{uid:r,data:n}=A;if((null!==(e=null===(t=this.mainSession)||void 0===t?void 0:t.getRegistrarSession().userMetaEventInfos.get(r))&&void 0!==e?e:-1)>=n.majorRevision||!this.context.userMetadataSub.has(r))return void this.log(\"user(\".concat(replaceRangeWithAsterisk(r),\") meta not changed or not subscribed, ignore.\"));const I={};n.items.map((A=>{var e;I[null==A?void 0:A.getKey()]={value:null!==(e=A.getValue())&&void 0!==e?e:\"\",revision:A.getRevision(),updated:A.getUpdateTs(),authorUid:A.getAuthorUserId()}}));const s={totalCount:null==n||null===(o=n.items)||void 0===o?void 0:o.length,majorRevision:null==n?void 0:n.majorRevision,metadata:I};let C=\"UPDATE\";null!==(g=this.mainSession)&&void 0!==g&&g.getRegistrarSession().userMetaEventInfos.has(r)||(C=\"SNAPSHOT\");const E={channelType:\"USER\",channelName:\"\",publisher:r,storageType:\"USER\",data:s,eventType:C,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};null===(i=this.mainSession)||void 0===i||i.getRegistrarSession().userMetaEventInfos.set(r,n.majorRevision),this.emit(\"storage\",E)})),_defineProperty$1(this,\"onChannelTextMessage\",(A=>{let{memberId:e,text:t,channelId:o,customType:g,channelType:i}=A;const r={channelName:o,channelType:i,topicName:\"\",message:t,publisher:e,messageType:\"STRING\",customType:g,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emit(\"message\",r)})),_defineProperty$1(this,\"onChannelRawMessage\",(A=>{let{raw:e,memberId:t,channelId:o,customType:g,channelType:i}=A;const r={channelName:o,channelType:i,topicName:\"\",message:e,publisher:t,messageType:\"BINARY\",customType:g,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emit(\"message\",r)})),_defineProperty$1(this,\"onChannelMetaDataUpdated\",(A=>{var e,t,o,g,i;let{channelId:r,data:n}=A;if((null!==(e=null===(t=this.mainSession)||void 0===t?void 0:t.getRegistrarSession().channelMetaEventInfos.get(r))&&void 0!==e?e:-1)>=n.majorRevision||!this.channelMetadataSub.has(r))return void this.log(\"channel(\".concat(r,\") meta not changed or not subscribed, ignore.\"));const{channelName:I,channelType:s}=getChannelDetailByName(r),C={};n.items.map((A=>{var e;C[null==A?void 0:A.getKey()]={value:null!==(e=A.getValue())&&void 0!==e?e:\"\",revision:A.getRevision(),updated:A.getUpdateTs(),authorUid:A.getAuthorUserId()}}));const E={totalCount:null==n||null===(o=n.items)||void 0===o?void 0:o.length,majorRevision:null==n?void 0:n.majorRevision,metadata:C};let a=\"UPDATE\";null!==(g=this.mainSession)&&void 0!==g&&g.getRegistrarSession().channelMetaEventInfos.has(r)||(a=\"SNAPSHOT\");const B={channelType:s,channelName:I,publisher:\"\",storageType:\"CHANNEL\",data:E,eventType:a,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};null===(i=this.mainSession)||void 0===i||i.getRegistrarSession().channelMetaEventInfos.set(r,n.majorRevision),this.emit(\"storage\",B)})),_defineProperty$1(this,\"onChannelLockEvent\",(A=>{var e,t;const{channelName:o,channelType:g}=A,i=getChannelNameByType(o,g);null!==(e=null===(t=this.mainSession)||void 0===t||null===(t=t.lastSubscribeOrJoinOptions.get(i))||void 0===t?void 0:t.withLock)&&void 0!==e&&e&&this.emit(\"lock\",A)})),_defineProperty$1(this,\"emitLockExpired\",(A=>{var e;const t=getChannelNameByType(A.channelName,A.channelType);null!==(e=this.localAcquiredLocks.get(t))&&void 0!==e&&e.get(A.lockName)&&(this.emit(\"lock\",_objectSpread2(_objectSpread2({},A),{},{ttl:0})),this.updateLocalAcquiredLocksCache(t,null==A?void 0:A.lockName,\"delete\"))})),_defineProperty$1(this,\"onLogout\",(()=>{var A,e,t;const o=OperationName.logout;this.validateMainSessionExist(o);try{this.clearChannel(this.getUsedChannelIds())}catch(A){}null===(A=this.mainSession)||void 0===A||A.getRegistrarSession().removeListener(\"channelTextMessage\",this.onChannelTextMessage),null===(e=this.mainSession)||void 0===e||e.getRegistrarSession().removeListener(\"channelRawMessage\",this.onChannelRawMessage),null===(t=this.mainSession)||void 0===t||t.getRegistrarSession().removeListener(\"channelMetaDataUpdated\",this.onChannelMetaDataUpdated),this.internalEmitter.removeListener(\"LOGOUT\",this.onLogout)}));const I=OperationName.initRTM;if(!isValidAppId(t)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_APP_ID),t=new RtmUnavailableError(I,[e],A);throw this.logError(t),t}if(!isValidId(o)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID),t=new RtmUnavailableError(I,[e],A);throw this.logError(t),t}if((null==i?void 0:i.logLevel)&&updateLogLevel(i.logLevel,g),this.logLevel=null!==(r=null==i?void 0:i.logLevel)&&void 0!==r?r:\"error\",this.appId=t,this.userId=o,this.processId=e,this.setMaxListeners(512),this.internalEmitter.setMaxListeners(512),\"number\"==typeof(null==i?void 0:i.presenceTimeout)){let A=i.presenceTimeout;i.presenceTimeout>K_PRESENCE_TIMEOUT_MAX?A=K_PRESENCE_TIMEOUT_MAX:i.presenceTimeout<K_PRESENCE_TIMEOUT_MIN&&(A=K_PRESENCE_TIMEOUT_MIN),this.presenceTimeout=A}if(\"AES_128_GCM\"===(null==i?void 0:i.encryptionMode)||\"AES_256_GCM\"===(null==i?void 0:i.encryptionMode)){var s,C;const A=\"detail: \";let e=A;if(void 0===(null==i?void 0:i.cipherKey))e+=\"not provide cipherKey but set encryptionMode.\";else if(i.salt&&(null==i||null===(s=i.salt)||void 0===s?void 0:s.byteLength)>0&&(null==i||null===(C=i.salt)||void 0===C?void 0:C.byteLength)>SALT_LENGTH)e+=\"salt should be \".concat(SALT_LENGTH,\" bytes\");else if(e===A){var E;this.keyLength=\"AES_128_GCM\"===i.encryptionMode?16:32;const A=new Uint8Array(SALT_LENGTH);A.set(null!==(E=i.salt)&&void 0!==E?E:new Uint8Array([])),this.salt=A,this.cipherKey=null==i?void 0:i.cipherKey,this.encryptionMode=i.encryptionMode;try{const A=util$6.createBuffer(this.salt),e=pkcs5$1(this.cipherKey,A.getBytes(A.length()),KEY_ITERATIONS_COUNT,IV_LENGTH+this.keyLength,\"sha256\");this.key=e,this.iv=e.slice(-IV_LENGTH),e?(this.initEncryption=!0,this.log(\"initialize crypto key success.\")):this.warn(\"generate crypto key failure using pbkdf2.\")}catch(A){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_ENCRYPTION_PARAMETER),o=new RtmUnavailableError(I,[t+A],e);throw this.logError(o),o}}if(e.length>A.length){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_ENCRYPTION_PARAMETER),o=new RtmUnavailableError(I,[t+e],A);throw this.logError(o),o}}if(!1===(null==i?void 0:i.useStringUserId)){if(!isUintString(o)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID),t=new RtmInvalidArgumentError(I,[e],A);throw this.logError(t),t}this.useStringUserId=!1}else this.useStringUserId=!0;window.addEventListener(\"offline\",(()=>{this.warn(\"network-state-change: ONLINE -> OFFLINE\")})),window.addEventListener(\"online\",(()=>{var A;this.log(\"network-state-change: OFFLINE -> ONLINE\"),null===(A=this.mainSession)||void 0===A||A.notifyNetworkChange(!0)}));const a=this.handlePrivateConfig(I,i),B=!a&&(null!==(n=g.cloudProxy)&&void 0!==n&&n);null!=i&&i.privateConfig&&i.cloudProxy&&this._throwInvalidPrivateConfig(I,\" Use private config, not permit cloudProxy\"),a&&areaConfig&&this._throwInvalidPrivateConfig(I,\" Use private config, not permit setArea\"),this.context=new Context(t,o,_objectSpread2(_objectSpread2({},g),{},{cloudProxy:B}),A,{useStringUserId:this.useStringUserId,presenceTimeout:this.presenceTimeout,logLevel:this.logLevel,heartbeatInterval:null==i?void 0:i.heartbeatInterval,privateConfig:a?null==i?void 0:i.privateConfig:void 0},null!=this&&this.initEncryption?{key:this.key,iv:this.iv,keyLength:this.keyLength,initEncryption:this.initEncryption}:void 0),this.lock=new Lock(A,this.context,(()=>this.mainSession),(()=>this.consoleConfig),(()=>this.linkState),this.validateRtmConnection.bind(this),this.localAcquiredLocks),this.presence=new Presence(A,this.context,(()=>this.mainSession),(()=>this.linkState),(()=>this.localStateCache)),this.storage=new RStorage(A,this.context,(()=>this.mainSession),(()=>this.consoleConfig),this.validateRtmConnection.bind(this),this.localAcquiredLocks),this.history=new History(A,this.context,(()=>this.mainSession),(()=>this.consoleConfig),this.validateRtmConnection.bind(this)),this.log(\"rtm use private config: %s, enable cloud proxy: %s\",a,B),this._customConfig=new CustomConfig(this.appId)}async renewToken(A,e){var t;const o=OperationName.renewToken;this.apiRateLimit.canMakeOperation(\"renewToken\"),this.validateRtmConnection(o),validateToken(A,this.appId,o,(A=>{this.warn(A)}));const g={timestamp:0};this.context.addReportEvents(\"RenewToken\",{sid:this.context.sid,userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.context.startTime),cname:null!==(t=null==e?void 0:e.channelName)&&void 0!==t?t:\"\",token:A});let i=0;try{if(null==e||!e.channelName){var r,n,I;if(\"string\"!=typeof A||0===A.length){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_TOKEN);throw new RtmInvalidArgumentError(o,[e],A)}if(![\"CONNECTED\",\"RECONNECTING\"].includes(this.connectionState)||\"CONNECTED\"!==this.linkState){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_CONNECTED);throw new RtmInvalidStatusError(o,[e],A)}if(this.validateMainSessionExist(o),A===this.context.token){return{timestamp:0}}try{var s=this.context.token;this.context.token=A;var[{ticket:C}]=await Promise.all([this.mainSession.getRegistrarSession().connection.apClient.getApEdgeInfo$(!1).pipe(throwIfEmpty((()=>new Error(\"No available edge address to connect\"))),retryWhen((A=>A.pipe(tap((A=>{if(isRtmError(A))throw A})),delay(2500),take(4)))),take(1),timeout(COMMON_REQUEST_TIMEOUT),catchError((A=>(isTimeout(A)&&this.warn(\"renewToken timed out\"),throwError(A))))).toPromise()])}catch(A){if(this.context.token=s,isTimeout(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT);throw new RtmTimeoutError(o,[e],A)}{const{code:e,reason:t}=getErrorInfoByCode(A.code);throw new RtmUnauthenticatedError(o,[t],e)}}const e=null===(r=this.mainSession)||void 0===r?void 0:r.getRegistrarSession(),t=await e.requestUpdateEdgeTicket(C).toPromise();if(0!==t.code){const{code:A,reason:e}=getErrorInfoByCode(t.code);throw new RtmUnavailableError(o,[e],A)}e.curLoginSockets.filter((A=>void 0!==A)).forEach((A=>A.ticket=C));const i=atob(C);return null===(n=this.mainSession)||void 0===n||n.getRegistrarSession().emit(\"syncTicketUpdated\",{ticket:i,vid:this.context.vid}),await(null===(I=this.mainSession)||void 0===I?void 0:I.getPresenceSession().renewKey(i)),g}if(!isValidId(e.channelName)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(o,[e],A)}if(!this.streamChannelList.some((A=>A===e.channelName))){this.warn(\"renewToken: channel(\".concat(e.channelName,\") not join.\"));const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(o,[t],A)}try{const t=this.stChannelInstances.find((A=>A.channelName===e.channelName));return await(null==t?void 0:t.renewStreamChannelToken(A)),g}catch(A){throw A}}catch(A){const{serverCode:e,errorCode:t}=A;throw i=null!=e?e:t,A}finally{var E;this.context.addReportEvents(\"RenewTokenRes\",{lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(getParameter(\"VID\").get(this.context.appId)||\"0\"),sid:this.context.sid,userId:this.context.uid,elapse:getElapse(this.context.startTime),cname:null!==(E=null==e?void 0:e.channelName)&&void 0!==E?E:\"\",token:A,apErrCode:i,regErrCode:i})}}async updateConfig(A){for(let e=0,t=getKeys(A);e<t.length;e++){const o=t[e];if(\"logLevel\"===o){A.logLevel&&(updateWasmLogLevel(A.logLevel),updateLogLevel(A.logLevel,this.context.config));continue}const g=A[o];null!=g&&(A.cloudProxy&&this.info(\"RTM cloud proxy enabled\"),A.logUpload&&this.info(\"Log upload enabled\"),this.context.config[o]=g)}return{timestamp:0}}async login(A){var e,t,o;const g=\"FAILED\"===this.linkState;g&&this.cacheCrdtState();const i=Array.from(null!==(e=null===(t=this._lastOptions)||void 0===t?void 0:t.keys())&&void 0!==e?e:[]),r=new Map;i.forEach((A=>{var e,t;null!==(e=this._lastOptions)&&void 0!==e&&e.has(A)&&r.set(A,null===(t=this._lastOptions)||void 0===t?void 0:t.get(A))}));const n=[],I=OperationName.login;this.token=null==A?void 0:A.token;let s=this.token;if(\"CONNECTING\"===this.linkState){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_DUPLICATE_OPERATION);throw new RtmUnavailableError(I,[e],A)}const C=null===this.context.instanceId,E=null!==(o=this.context.instanceId)&&void 0!==o?o:getRandomUInt64();if(this.context.instanceId=E,this.context.sid=getSid(E),\"IDLE\"===this.linkState&&this.updateLinkState(\"CONNECTING\",\"LOGIN\",[],\"LOGIN\",LinkStateChangeReasonDescription.LOGIN),[\"FAILED\",\"SUSPENDED\",\"DISCONNECTED\"].includes(this.linkState)&&this.updateLinkState(\"CONNECTING\",\"LOGIN\",[],\"RELOGIN\",LinkStateChangeReasonDescription.RELOGIN),\"CONNECTED\"===this.connectionState)return{timestamp:0};try{if(this.context.rtmConfig.privateConfig&&!this.context.rtmConfig.privateConfig.serviceType.includes(\"MESSAGE\")){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_SERVICE_NOT_SUPPORTED);throw new RtmUnavailableError(I,[e],A)}if(this.apiRateLimit.canMakeOperation(\"login\"),this.token&&validateToken(this.token,this.appId,I,(A=>{this.warn(A)})),\"DISCONNECTED\"!==this.connectionState&&\"FAILED\"!==this.connectionState){return{timestamp:0}}if(!isValidId(this.userId)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID);throw new RtmInvalidArgumentError(I,[e],A)}if(this.token===this.context.appId&&(s=void 0),\"string\"==typeof s&&s)this.context.token=s;else if(\"string\"!=typeof s&&!isNil$1(s)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_TOKEN);throw new RtmInvalidArgumentError(I,[e],A)}this.context.enablePrivate&&areaConfig&&this._throwInvalidPrivateConfig(I,\" Use private config, not permit setArea\")}catch(A){const{errorCode:e}=A;throw this._handleLoginFailedState(e),A}const a={timestamp:0};if(\"CONNECTED\"===this.linkState)return a;this.internalEmitter.once(\"LOGOUT\",this.onLogout),changeBusyStatus(!0),this.info(\"RTM Client logging in as \".concat(replaceRangeWithAsterisk(this.userId))),C&&this.context.sendReport(\"Session\",{appId:this.context.appId,did:navigator.userAgent,elapse:getElapse(this.mainSession&&this.mainSession.getRegistrarSession().startTime),index:{index1:this.userId,index2:this.context.appId,index3:\"logUpload=\".concat(this.context.config.logUpload)},installId:this.processId,lts:Long$2.fromNumber(Date.now()),os:WEB_PLATFORM_TYPE,sid:getSid(E),token:s||\"\",userId:this.userId,ver:VERSION,buildno:100*VERSION_NO+SUBVERSION,subVersion:SUBVERSION,version:VERSION_NO}),this._customConfig.init(this.context.sid);const B=Date.now();this.loginPromise=this.loginImpl({uid:this.userId,instanceId:E});try{var Q,c;await this.loginPromise,this.checkVid(),this.onConnectionStateChanged(\"CONNECTED\",\"LOGIN_SUCCESS\"),this.context.addReportEvents(\"LoginResult\",{lts:Long$2.fromNumber(Date.now()),vid:Long$2.fromString(getParameter(\"VID\").get(this.context.appId)||\"0\"),sid:this.context.sid,code:null!==(Q=this.mainSession)&&void 0!==Q&&null!==(Q=Q.getPresenceSession())&&void 0!==Q&&Q.getSyncConnected()?0:RTMErrorCode.RTM_ERROR_PRESENCE_NOT_CONNECTED,elapse:getElapse(null===(c=this.mainSession)||void 0===c?void 0:c.getRegistrarSession().startTime),userId:this.context.uid}),this.updateLinkState(\"CONNECTED\",\"LOGIN\",[...n],\"LOGIN_SUCCESS\",LinkStateChangeReasonDescription.LOGIN_SUCCESS);try{if(g){var l,u,h,d;(null!==(l=null===(u=this._lastChannelMetaEventInfos)||void 0===u?void 0:u.size)&&void 0!==l?l:0)>0&&this.mainSession&&(this.mainSession.getRegistrarSession().channelMetaEventInfos=new Map(this._lastChannelMetaEventInfos)),(null!==(h=null===(d=this._lastUserMetaEventInfos)||void 0===d?void 0:d.size)&&void 0!==h?h:0)>0&&this.mainSession&&(this.mainSession.getRegistrarSession().userMetaEventInfos=new Map(this._lastUserMetaEventInfos));const A=await Promise.all([...null==i?void 0:i.map((A=>{const{channelName:e,channelType:t}=getChannelDetailByName(A),o=r.get(A);return o&&\"MESSAGE\"===t?this.subscribe(e,o,!0):o&&\"STREAM\"===t?null===(g=this.stChannelInstances.find((A=>A.channelName===e)))||void 0===g||null===(g=g._streamChannelImpl)||void 0===g?void 0:g.subscribe(o,!0):[];var g})),this.reSubUserMetadata(),this.reSub()]);A.forEach(((A,e)=>{e>=i.length||A instanceof RTMBaseError&&n.push(i[e])})),this._lastOptions=void 0,this._lastChannelMetaEventInfos=void 0,this._lastUserMetaEventInfos=void 0}}catch(A){console.error(\"restore failed\",A),this.logError(\"restore failed \".concat(JSON.stringify(A)))}return a}catch(A){var p;if(isRtmError(A)&&(null===(p=this.mainSession)||void 0===p||!p.getRegistrarSession().connection.cancelLogin)){var y;const{errorCode:e}=A;this.context.addReportEvents(\"Link\",{ackedServerIp:\"\",destServerIp:\"\",ec:A.code||1,sc:A.serverCode,elapse:getElapse(this.mainSession&&this.mainSession.getRegistrarSession().startTime),lts:Long$2.fromNumber(Date.now()),responseTime:Date.now()-B,sid:getSid(E),userId:this.userId,version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),linktype:4,linkflag:Long$2.fromNumber(0),linkenv:0}),(null===(y=this.mainSession)||void 0===y||null===(y=y.getRegistrarSession().connection)||void 0===y||!y.cancelLogin)&&this._handleLoginFailedState(e)}throw this.context.socketUseProxy=!1,A}finally{this.loginPromise=void 0,changeBusyStatus(!1),this.context.socketUseProxy&&this.log(\"port fallback to 443\")}}async internalLogoutHandler(){let A=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{await this.logoutVosWeb();try{await this.logoutSync(e)}catch(A){throw A}}catch(A){throw console.error(\"internalLogoutHandler error\",A),A}finally{A&&this.logoutRegistrar(),this.clearEffectsOfLogout()}}clearEffectsOfLogout(){this.channelMetadataSub.clear(),this.localAcquiredLocks.clear(),this.context.userMetadataSub.clear(),this.clearLinkTimers(),this.context.instanceId=null,this.context.hasLoggedIn=!1,this.deleteIntervalCreateColl(),this.internalEmitter.emit(\"LOGOUT\"),this.localStateCache.clear()}async logoutVosWeb(){await Promise.all(this.stChannelInstances.filter((A=>(this.log(\"channel(\".concat(A.channelName,\"), isJoinedChannel: \").concat(A.isJoinedChannel)),A.isJoinedChannel))).map((A=>(A.removeAllListeners(),A._streamChannelImpl.leave(!1)))))}reportEvents(){var A,e;if(!this.context.couldReportEvent)return;triggerReport(this.context.vid,this.context.appId,this.context.cloudProxy,null===(A=this.context.rtmConfig.privateConfig)||void 0===A?void 0:A.eventUploadHosts,this.context.couldReportEvent,!0);const t=null===(e=this.mainSession)||void 0===e?void 0:e.getRegistrarSession().connection.apClient.reportIntervalId;t&&clearEventReportTimer(t)}async logout(){var A,e;const t={timestamp:0},o=null===(A=this.mainSession)||void 0===A?void 0:A.getRegistrarSession(),g=null==o?void 0:o.connection;if(\"CONNECTING\"!==this.linkState&&\"SUSPENDED\"!==this.linkState&&\"DISCONNECTED\"!==this.linkState||(this.warn(\"logout: cancel login\"),g&&(g.cancelLogin=!0),null==o||o.emit(\"login-cancel\"),null==o||o.loginSubject$.next(),null==g||g.apClient.apFinish$.next(),null==g||g.endLogin$.next()),\"DISCONNECTED\"===this.connectionState&&\"IDLE\"===this.linkState)return this.warn(\"Already in logout state: \".concat(this.connectionState)),t;if(this.mainSession&&getParameter(\"VID\").get(this.context.appId)&&this.context.addReportEvents(\"Logout\",{elapse:getElapse(null===(e=this.mainSession)||void 0===e?void 0:e.getRegistrarSession().startTime),lts:Long$2.fromNumber(Date.now()),sid:getSid(this.mainSession.getRegistrarSession().instanceId),userId:this.userId,version:VERSION_NO,subVersion:SUBVERSION,connectionsequence:Long$2.fromNumber(0),linktype:4,linkflag:Long$2.fromNumber(0),linkenv:0}),this._customConfig.stop(),\"FAILED\"===this.connectionState||\"FAILED\"===this.linkState){\"FAILED\"===this.linkState&&this.updateLinkState(\"IDLE\",\"LOGOUT\",[],\"LOGOUT\",LinkStateChangeReasonDescription.LOGOUT),\"FAILED\"===this.connectionState&&this.onConnectionStateChanged(\"DISCONNECTED\",\"LOGOUT\");try{await this.internalLogoutHandler(!1,!1)}catch(A){this.logError(\"logout failed when linkState is FAILED: \".concat(A))}return t}if(\"RECONNECTING\"===this.connectionState||\"DISCONNECTED\"===this.linkState||\"SUSPENDED\"===this.linkState||\"CONNECTING\"===this.linkState){var i;this.info('Reset connection state from \"RECONNECTING\" to \"DISCONNECTED\"');try{await this.internalLogoutHandler(!0,!1)}catch(A){this.logError(\"logout failed when RECONNECTING: \".concat(A))}return\"DISCONNECTED\"!==this.linkState&&\"SUSPENDED\"!==this.linkState&&\"CONNECTING\"!==this.linkState&&!0!==(null===(i=this.mainSession)||void 0===i?void 0:i.getRegistrarSession().connection.cancelLogin)||(this.updateLinkState(\"IDLE\",\"LOGOUT\",this.getUsedMessageChannelIds(),\"LOGOUT\",LinkStateChangeReasonDescription.LOGOUT),g&&(g.cancelLogin=!1)),this.onConnectionStateChanged(\"DISCONNECTED\",\"LOST\"),t}return await this.logoutImpl(!0,!0),this.updateLinkState(\"IDLE\",\"LOGOUT\",this.getUsedMessageChannelIds(),\"LOGOUT\",LinkStateChangeReasonDescription.LOGOUT),t}async logoutImpl(){let A=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{await this.internalLogoutHandler(A,e),this.log(\"logout success\")}catch(A){this.logError(\"logout failed: \".concat(A))}finally{this.reportEvents(),this.onConnectionStateChanged(\"DISCONNECTED\",\"LOGOUT\")}}async logoutRegistrar(){const A=this.hasLock();return this.mainSession.getRegistrarSession().logoutHandler(A)}absent(A){var e,t,o;const{withPresence:g,beQuiet:i}=this.getLastSubOptions(A);g&&this.unSubPresence(A,!0),!g&&(null===(e=this.mainSession)||void 0===e||e.getPresenceSession().unsubScribeSelfPresence(A)),!i&&(null===(t=this.mainSession)||void 0===t||t.getPresenceSession().delChannelDoc(A)),this.leavePresenceColl(A),null===(o=this.mainSession)||void 0===o||o.getPresenceSession().leaveRetryChannels([A])}async logoutSync(){var A;let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];await Promise.all(this.getUsedChannelIds().map((A=>(this.reportChannelLeave(A,0),this.absent(A)))));const t=null===(A=this.mainSession)||void 0===A?void 0:A.getPresenceSession();e&&await(null==t?void 0:t.logoutHandler())}async publish(A,e,t){const o=OperationName.publish;if(this.apiRateLimit.canMakeOperation(\"publish\"),null!=t&&t.channelType&&\"USER\"!==(null==t?void 0:t.channelType)&&\"MESSAGE\"!==(null==t?void 0:t.channelType)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_TYPE);throw new RtmInvalidArgumentError(o,[e],A)}if(this.validateRtmConnection(o),!isValidId(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(o,[e],A)}if(validateMessageSize(e,o),null!=t&&t.customType&&validateCustomType(null==t?void 0:t.customType,o),null!=t&&t.storeInHistory&&\"true\"!==this.consoleConfig[\"history.enabled\"]){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_HISTORY_NOT_AVAILABLE);throw new RtmInvalidArgumentError(o,[e],A)}const g={timestamp:0,channelName:A},i=e instanceof Uint8Array?{rawMessage:e,messageType:\"RAW\"}:{text:e,messageType:\"TEXT\"},r=\"USER\"===(null==t?void 0:t.channelType);let n;if(n=r?\"TEXT\"===i.messageType?RtmMessageCategoryEnum.P2pSMsgNoOfflineFlag:RtmMessageCategoryEnum.P2pRMsgNoOfflineFlag:\"TEXT\"===i.messageType?RtmMessageCategoryEnum.ChannelSMsg:RtmMessageCategoryEnum.ChannelRMsg,validMessage(i,RTMErrorCode.RTM_ERROR_CHANNEL_INVALID_MESSAGE),\"RECONNECTING\"===this.connectionState){const e=Date.now();return await new Promise(((g,I)=>{let s;const C=async()=>{const C=Date.now()-e;try{var E;await commonSendMessage({message:i,peerId:A,session:null===(E=this.mainSession)||void 0===E?void 0:E.getRegistrarSession(),diff:C,customType:null==t?void 0:t.customType,storeInHistory:null==t?void 0:t.storeInHistory,toPeer:r}),g()}catch(A){var a,B;const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);var Q,c;if(isTimeout(A))null===(Q=this.mainSession)||void 0===Q||Q.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"sentcount\"}),null===(c=this.mainSession)||void 0===c||c.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"timeoutcount\"}),I(new RtmTimeoutError(o,[t],e));isRtmError(A)&&I(A),null===(a=this.mainSession)||void 0===a||a.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"sentcount\"}),null===(B=this.mainSession)||void 0===B||B.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"unknowerrorcount\"}),I(new RtmUnavailableError(o,[t],e))}finally{clearTimeout(s)}};this.internalEmitter.once(\"RECONNECTED\",C),s=setTimeout((()=>{this.internalEmitter.off(\"RECONNECTED\",C);const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);I(new RtmTimeoutError(o,[e],A))}),9e3)})),g}try{var I;await commonSendMessage({message:i,peerId:A,session:null===(I=this.mainSession)||void 0===I?void 0:I.getRegistrarSession(),diff:0,customType:null==t?void 0:t.customType,storeInHistory:null==t?void 0:t.storeInHistory,toPeer:r})}catch(A){var s,C;if(isTimeout(A)){var E,a;null===(E=this.mainSession)||void 0===E||E.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"sentcount\"}),null===(a=this.mainSession)||void 0===a||a.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"timeoutcount\"});const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_TIMEOUT);throw new RtmTimeoutError(o,[e],A)}if(isRtmError(A))throw A;null===(s=this.mainSession)||void 0===s||s.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"sentcount\"}),null===(C=this.mainSession)||void 0===C||C.getRegistrarSession().emit(\"messageCount\",{messageCategory:n,type:\"common\",key:\"unknowerrorcount\"});const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_PUBLISH_MESSAGE_FAILED);throw new RtmUnknownError(o,[t],e)}return g}getLastSubOptions(A){var e,t;return null!==(e=null===(t=this.mainSession)||void 0===t?void 0:t.lastSubscribeOrJoinOptions.get(A))&&void 0!==e?e:{}}async subscribe(A,e){var t,o,g;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=OperationName.subscribe;if(this.apiRateLimit.canMakeOperation(\"subscribe\"),this.validateRtmConnection(r),this.validateMainSessionExist(r),\"CONNECTED\"!==this.linkState){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_CONNECTED);throw new RtmInvalidStatusError(r,[e],A)}if(!isValidId(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(r,[e],A)}const n=!(null!==(t=this.mainSession)&&void 0!==t&&t.lastSubscribeOrJoinOptions.has(A)),I=this.getUsedMessageChannelIds(),s=null!==(o=getParameter(\"MESSAGE_CHANNEL_COUNT\"))&&void 0!==o?o:MAX_JOINED_CHANNELS;if(n&&(this.getUsedChannelIds().length>=s||I.length>=s)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_INSTANCE_EXCEED_LIMITATION);throw new RtmLimitExceededError(r,[e],A)}this._validateJoinOptions(e,r);const C=handleSubOptionsAsDefault(e),E={timestamp:0,channelName:A},{currentResolve:a,currentReject:B}=await this.context.operationControl.awaitPromise(OperationName.subscribe+A),Q=null===(g=this.mainSession)||void 0===g?void 0:g.getRegistrarSession(),c=getRandomInt(0,Number.MAX_SAFE_INTEGER);try{var l;const{withLock:e,withMessage:t,withMetadata:o,withPresence:g,beQuiet:I}=this.getLastSubOptions(A);if(null===(l=this.mainSession)||void 0===l||l.reportChnJoin(A,C,c),null!=C&&C.withMessage&&!t)try{await this.subMessage(A,r)}catch(e){var u;throw null==Q||Q.emit(\"channelLeft\",A),null===(u=this.mainSession)||void 0===u||u.lastSubscribeOrJoinOptions.delete(A),e}const s=getParameter(\"STORAGE_CHANNEL_SUB_ENABLED\"),E=C.withMetadata&&!o&&\"true\"===(void 0!==s?String(s):this.consoleConfig[\"storage.channel_subscribe_enabled\"]),a=C.withLock&&!e,{code:B,reason:R}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_FAILED),w=(null==C?void 0:C.beQuiet)&&!I&&!n,f=!(null!=C&&C.beQuiet)&&(n||I),S=(null==C?void 0:C.withPresence)&&!g;try{var h,d;await Promise.all([null!=C&&C.withMessage||!t?void 0:this.unSubMessage(A),E?this.subMetadata(A):void 0,null!=C&&C.withMetadata||!o?void 0:this.unSubMetadata(A),a?this.subLock(A):void 0,null!=C&&C.withLock||!e?void 0:this.unSubLock(A),n?await(null===(h=this.mainSession)||void 0===h?void 0:h.getPresenceSession().joinPresenceColl(A,{withPresence:C.withPresence,needPutDoc:f,needDelDoc:w,needSub:S,reJoinCauseReconnect:i})):null===(d=this.mainSession)||void 0===d?void 0:d.getPresenceSession().onCreateCollection(A,{withPresence:C.withPresence,needPutDoc:f,needDelDoc:w,needSub:!1,reJoinCauseReconnect:i})])}catch(A){throw new RtmUnknownError(r,[R+A],B)}var p,y,D;if(null!=C&&C.withPresence&&!g)if(void 0!==g)null===(p=this.mainSession)||void 0===p||p.getPresenceSession().unsubScribeSelfPresence(A,!1),this.leavePresenceColl(A),await(null===(y=this.mainSession)||void 0===y?void 0:y.getPresenceSession().joinPresenceColl(A,{withPresence:!0,needPutDoc:f,needDelDoc:w,needSub:S}));if((null==C||!C.withPresence)&&g)this.unSubPresence(A),this.leavePresenceColl(A),await(null===(D=this.mainSession)||void 0===D?void 0:D.getPresenceSession().joinPresenceColl(A,{withPresence:!1,needPutDoc:f,needDelDoc:w,needSub:S}))}catch(e){a(void 0);const{errorCode:t,serverCode:o}=e;throw Q&&this.context.addReportEvents(\"ChnJoinRes\",{cname:A,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(Q.startTime),errCode:t,sid:getSid(null==Q?void 0:Q.instanceId),serverErrCode:null!=o?o:t,userId:this.context.uid,seq:Long$2.fromNumber(c)}),e}return Q&&this.context.addReportEvents(\"ChnJoinRes\",{cname:A,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(Q.startTime),errCode:0,sid:getSid(Q.instanceId),serverErrCode:0,userId:this.context.uid,seq:Long$2.fromNumber(c)}),a(void 0),E}async unsubscribe(A){var e;const t=OperationName.unsubscribe;if(this.validateRtmConnection(t),!isValidId(A)){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(t,[e],A)}const o={timestamp:0,channelName:A};this.validateMainSessionExist(t);const g=null===(e=this.mainSession)||void 0===e?void 0:e.lastSubscribeOrJoinOptions.has(A);if(!g)return o;const{withPresence:i,withLock:r,withMetadata:n,withMessage:I,beQuiet:s}=this.getLastSubOptions(A);try{var C,E,a;this.reportChannelLeave(A,0);const e=!s;await Promise.all([I?this.unSubMessage(A):void 0,n?this.unSubMetadata(A):void 0,r?this.unSubLock(A):void 0,i?this.unSubPresence(A,!0):null===(C=this.mainSession)||void 0===C?void 0:C.getPresenceSession().unsubScribeSelfPresence(A),e?null===(E=this.mainSession)||void 0===E?void 0:E.getPresenceSession().delChannelDoc(A):void 0]),g&&this.leavePresenceColl(A),this.localAcquiredLocks.delete(A),null===(a=this.mainSession)||void 0===a||a.lastSubscribeOrJoinOptions.delete(A)}catch(A){let e;const o=RTMErrorCode.RTM_ERROR_CHANNEL_LEAVE_FAILED;if(this.logError(A),isRtmError(A))void 0===(null==A?void 0:A.code)&&(A.code=RTMErrorCode.RTM_ERROR_CHANNEL_LEAVE_FAILED),e=A;else{const{code:A,reason:g}=getErrorInfoByCode(o);e=new RtmUnknownError(t,[g],A)}throw e}finally{var B;null===(B=this.mainSession)||void 0===B||B.getPresenceSession().leaveRetryChannels([A])}return o}async subMessage(A,e){try{this.log(\"Joining the channel %s\",replaceRangeWithAsterisk(A)),await this.mainSession.getRegistrarSession().requestChannelJoin(A),this.info(\"The channel %s joined successfully\",replaceRangeWithAsterisk(A))}catch(A){if(this.logError(A),isRtmError(A))throw A;const{code:t,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_CHANNEL_SUBSCRIBE_FAILED);throw new RtmUnknownError(e,[o],t)}}async unSubMessage(A){this.mainSession.getRegistrarSession().requestChannelLeave(A),this.clearChannel([A])}async subMetadata(A){try{var e;await(null===(e=this.mainSession)||void 0===e?void 0:e.getRegistrarSession().requestSubscribeChannelMetadata(A,\"JOIN\")),this.channelMetadataSub.add(A)}catch(e){this.warn(\"sub channel metadata failure when sub channel(\".concat(replaceRangeWithAsterisk(A),\"), error is \").concat(e,\".\"))}}unSubMetadata(A){this.mainSession.getRegistrarSession().requestUnsubscribeChannelMetadata(A),this.channelMetadataSub.delete(A)}async subLock(A){try{var e;await(null===(e=this.mainSession)||void 0===e?void 0:e.getRegistrarSession().requestSubscribeLock(A))}catch(e){this.warn(\"sub lock info failure when sub channel(\".concat(replaceRangeWithAsterisk(A),\"), error is \").concat(e,\".\"))}}unSubLock(A){const e=this.mainSession,t=null==e?void 0:e.getRegistrarSession();null==t||t.requestUnsubscribeLock(A)}leavePresenceColl(A){var e;null===(e=this.mainSession)||void 0===e||e.getPresenceSession().leave(A)}subPresence(A){var e;null===(e=this.mainSession)||void 0===e||e.getPresenceSession().subPresence(A)}unSubPresence(A){var e;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=this.mainSession)||void 0===e||e.getPresenceSession().unSubPresence(A,t)}cacheStateAndDelDoc(A){var e;const t=null===(e=this.mainSession)||void 0===e?void 0:e.getPresenceSession();null==t||t.cacheStateAndDelDoc(A)}createStreamChannel(A){const e=OperationName.createStreamChannel;if(this.context.rtmConfig.privateConfig&&!this.context.rtmConfig.privateConfig.serviceType.includes(\"STREAM\")){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_SERVICE_NOT_SUPPORTED);throw new RtmUnavailableError(e,[t],A)}if(!isValidId(A)){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_CHANNEL_NAME);throw new RtmInvalidArgumentError(e,[t],A)}const t=this.stChannelInstances.find((e=>e.channelName===A));if(t)return this.log(\"channel already exists \".concat(replaceRangeWithAsterisk(A))),t;const o=new StreamChannel(this.context,this.logger,{channelName:A,appId:this.appId,userId:!1===this.useStringUserId?parseInt(this.userId):this.userId},this.emit,(()=>this.streamChannelList),(()=>this.consoleConfig),this.validateRtmConnection.bind(this),(()=>this.linkState),(()=>this.channelMetadataSub),(()=>this.mainSession));return this.stChannelInstances.push(o),o.internalEmitter.on(\"stream-channel-joined\",(A=>{this.streamChannelList.push(A)})),o.internalEmitter.on(\"stream-channel-leaved\",(A=>{this.streamChannelList=this.streamChannelList.filter((e=>e!==A)),this.localAcquiredLocks.delete(getChannelNameByType(A,\"STREAM\"))})),o}addEventListener(A,e){this.on(A,e)}removeEventListener(A,e){this.off(A,e)}clearLinkTimers(){this.suspended=!1,this.suspendedTimer&&clearTimeout(this.suspendedTimer),this.suspendedTimer=null,this.context.linkIntervals=[...LINK_INTERVALS],this.linkTimer&&clearTimeout(this.linkTimer),this.linkTimer=null,this.joinCheckTimer&&clearTimeout(this.joinCheckTimer),this.joinCheckTimer=null}async loginImpl(A){let{uid:e,instanceId:t,forceLoginTime:o=0}=A;const g=OperationName.login;let i=t;if(void 0!==this.lastLoginTime&&Date.now()-this.lastLoginTime<1e3/LOGIN_QPS_LIMIT&&o>0){const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_ABORTED);throw new RtmInvokeTooOftenError(g,[e],A)}try{this.context.uid=e}catch(A){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_USER_ID);throw new RtmInvalidArgumentError(g,[t],e)}0===o&&this.onConnectionStateChanged(\"CONNECTING\",\"CONNECTING\");const r=new MainSession(this.context,this.logger,i,(()=>this.consoleConfig),(()=>this.localStateCache),this.cacheCrdtState.bind(this),null!=this&&this.initEncryption?{key:this.key,iv:this.iv,keyLength:this.keyLength,initEncryption:this.initEncryption}:void 0);if(this.mainSession=r,0===o){const A=this.mainSession.getPresenceSession();A.on(\"doc-timeout\",(async A=>{await this.presenceReJoin(A)})),A.on(\"doc-deleted\",(async A=>{await this.presenceReJoin(A)})),A.on(\"presence\",(A=>{this.emit(\"presence\",A)}))}const n=r.getRegistrarSession();return n.on(\"connectionLost\",(()=>{\"CONNECTED\"!==this.connectionState&&\"CONNECTED\"!==this.linkState||(this.updateLinkState(\"DISCONNECTED\",\"HEARTBEAT_TIMEOUT\",this.getUsedMessageChannelIds(),\"KEEP_ALIVE_TIMEOUT\",LinkStateChangeReasonDescription.KEEP_ALIVE_TIMEOUT),this.onConnectionStateChanged(\"RECONNECTING\",\"INTERRUPTED\"),0===n.listenerCount(\"userJoined\")&&n.on(\"userJoined\",(async()=>{this.log(\"received reconnected userJoined event\"),\"CONNECTED\"!==this.linkState&&(await this.updateLinkState(\"CONNECTED\",\"AUTO_RECONNECT\",this.getUsedMessageChannelIds(),\"RECONNECT_SUCCESS\",LinkStateChangeReasonDescription.RECONNECT_SUCCESS,!this.suspended),this.onConnectionStateChanged(\"CONNECTED\",\"LOGIN_SUCCESS\"),this.clearLinkTimers())})),null==n||n.clearLockSnapshotLastTime())})),n.on(\"tokenExpired\",(async()=>{this.warn(\"reg session listen the token expired\"),n.connection.apClient.apFinish$.next(void 0),n.connection.stopLogin(),this.userDropHandler(2)})),n.on(\"tokenPrivilegeWillExpire\",this.TokenPrivilegeWillExpireHandler),n.once(\"userDrop\",this.userDropHandler),n.on(\"instanceChanged\",(A=>i=A)),n.on(\"banEdgeIP\",(A=>{this.banIP(A)})),n.on(\"userMetaDataUpdated\",this.userMetaDataUpdatedHandler),n.on(\"channelTextMessage\",this.onChannelTextMessage),n.on(\"channelRawMessage\",this.onChannelRawMessage),n.on(\"channelMetaDataUpdated\",this.onChannelMetaDataUpdated),n.on(\"channelLockEvent\",this.onChannelLockEvent),n.on(\"lockWatching\",this.lock.lockImpl.onLockWatching),n.on(\"lockExpired\",this.emitLockExpired),n.on(\"acquireSuccess\",(A=>{let{prefixChannelName:e,lockName:t,revision:o}=A;this.updateLocalAcquiredLocksCache(e,t,\"add\",o)})),n.on(\"releaseSuccess\",(A=>{let{channelName:e,lockName:t}=A;this.updateLocalAcquiredLocksCache(e,t,\"delete\")})),n.on(\"appConfig\",(A=>{this.consoleConfig=A})),n.on(\"login-request\",(()=>{\"DISCONNECTED\"!==this.linkState&&\"SUSPENDED\"!==this.linkState||this.updateLinkState(\"CONNECTING\",\"AUTO_RECONNECT\",[],\"AUTO_RECONNECT\",LinkStateChangeReasonDescription.AUTO_RECONNECT)})),n.on(\"login-timeout\",(A=>{this.log(\"login - timeout\"),this.suspended?this.updateLinkState(\"SUSPENDED\",\"AUTO_RECONNECT\",[],\"RECONNECT_TIMEOUT\",LinkStateChangeReasonDescription.RECONNECT_TIMEOUT):this.updateLinkState(\"DISCONNECTED\",\"SERVER_TIMEOUT\",[],A?\"RECONNECT_TIMEOUT\":\"LOGIN_TIMEOUT\",A?LinkStateChangeReasonDescription.RECONNECT_TIMEOUT:LinkStateChangeReasonDescription.LOGIN_TIMEOUT),isNil$1(this.suspendedTimer)&&(this.suspendedTimer=setTimeout((()=>{this.suspended=!0}),115e3))})),n.on(\"net-change-abort-reconn\",(()=>{this.updateLinkState(\"DISCONNECTED\",\"NETWORK_CHANGE\",[],\"NETWORK_CHANGE\",LinkStateChangeReasonDescription.NETWORK_CHANGE)})),this.lastLoginTime=Date.now(),n.loginHandler().toPromise().then((()=>{this.context.hasLoggedIn=!0})).catch((A=>{if(\"loginRespTimeout\"===A.name&&o<2)return this.log(\"loginRespTimeout: internal re-login...\"),n.removeAllListeners(),this.loginImpl({uid:e,instanceId:t,forceLoginTime:o+1});throw this.handleConnectionFailed(\"registrar\",A)}))}handleConnectionFailed(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:OperationName.login;if(this.log(\"Login failed when connecting \".concat(A)),\"CONNECTING\"!==this.connectionState)return e;if(isTimeout(e)){this.onConnectionStateChanged(\"DISCONNECTED\",\"LOST\");const{code:A,reason:e}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_TIMEOUT);throw new RtmTimeoutError(t,[e],A)}if((null==e?void 0:e.code)===RTMErrorCode.RTM_ERROR_TOKEN_EXPIRED)throw this.onConnectionStateChanged(\"DISCONNECTED\",\"TOKEN_EXPIRED\"),e;if((null==e?void 0:e.code)===RTMErrorCode.RTM_ERROR_LOGIN_CANCELED)throw e;if(this.onConnectionStateChanged(\"DISCONNECTED\",\"REJECTED_BY_SERVER\"),isRtmError(e))throw e;const{code:o,reason:g}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOGIN_ABORTED);throw new RtmUnavailableError(t,[g],o)}getUsedChannelIds(){var A,e;const t=null!==(A=this._lastOptions)&&void 0!==A?A:null===(e=this.mainSession)||void 0===e?void 0:e.lastSubscribeOrJoinOptions,o=null==t?void 0:t.keys();return[...null!=o?o:[]]}getUsedMessageChannelIds(){return this.getUsedChannelIds().filter((A=>!A.startsWith(K_STREAM_CHANNEL_PREFIX)))}async presenceReJoin(A){this.log(\"Try rejoin channel(\".concat(A,\") when reconnected.\"));try{var e;const{beQuiet:g}=this.getLastSubOptions(A),i=null===(e=this.mainSession)||void 0===e?void 0:e.getPresenceSession();if(null===(null==i?void 0:i.getColl(i.getChannelCollName(A)))){var t;this.log(\"presence coll destroyed already, need re create, channelId is \",A);const{withPresence:e}=this.getLastSubOptions(A);await(null===(t=this.mainSession)||void 0===t?void 0:t.getPresenceSession().joinPresenceColl(A,{needPutDoc:!g,withPresence:null!=e&&e,needDelDoc:!1,needSub:!1,reJoinCauseReconnect:!0},!1))}var o;if(!g)this.log(\"presence coll exists, need restore doc and states, channelId is \",A),null===(o=this.mainSession)||void 0===o||o.getPresenceSession().putChannelDocAndSetState(A,!0)}catch(A){this.warn(\"resume presence failed\",A)}}async reSub(){const A=this.getUsedChannelIds();A&&A.length>0&&A.forEach((A=>{const e=this.localAcquiredLocks.get(A)||new Map;this.lock.lockImpl.acquireOperationNoRes.forEach(((e,t)=>{var o;const g=t.slice(A.length).slice(lock_prefix.length);this.log(\"Try reacquireLock(\".concat(g,\" from notResp lock queue when reconnected, isRetry: \").concat(e,\").\")),null===(o=this.mainSession)||void 0===o||null===(o=o.getRegistrarSession())||void 0===o||o.requestAcquireLock(A,g,{retry:e}).toPromise().then((A=>{this.log(\"reacquireLock(\".concat(g,\") succeed that want to acquire with retry true before connection lost, code is \").concat(A,\".\"))})).catch((A=>{this.warn(\"reacquireLock(\".concat(g,\") failed, ret is \").concat(null==A?void 0:A.errorCode))})).finally((()=>{this.lock.lockImpl.clearLockCacheForAcquire(A,getPrefixLockName(g),e)}))})),e&&e.forEach(((e,t)=>{var o;this.log(\"Try reacquireLock(\".concat(t,\") when reconnected.\"));const g=()=>{var e;const{channelName:o,channelType:g}=getChannelDetailByName(A),i={channelType:g,channelName:o,eventType:\"EXPIRED\",lockName:t,ttl:0,publisher:\"\",snapshot:[],owner:\"\",timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emitLockExpired(i),null===(e=this.mainSession)||void 0===e||null===(e=e.getRegistrarSession())||void 0===e||e.requestReleaseLock(A,t).toPromise()};null===(o=this.mainSession)||void 0===o||null===(o=o.getRegistrarSession())||void 0===o||o.requestAcquireLock(A,t).toPromise().then((A=>{A.lockRev.toNumber()!==e.revision&&(this.log(\"newRev: \".concat(A.lockRev,\", rev: \").concat(e.revision,\", code: \").concat(A,\" for reacquire.\")),g())})).catch((()=>{g()}))}))}))}async reSubUserMetadata(){this.context.userMetadataSub.forEach((A=>{var e;null===(e=this.mainSession)||void 0===e||e.getRegistrarSession().requestSubscribeUserMetadata(A,\"RECONNECTED\")}))}async onLinkReconnected(){await this.reSub(),this.internalEmitter.emit(\"RECONNECTED\")}cacheCrdtState(){var A;const e=this.getUsedChannelIds(),t=null===(A=this.mainSession)||void 0===A?void 0:A.getPresenceSession();e.forEach((A=>{try{null==t||t.getStateAndSetByLocal(A)}catch(e){this.logError(e),e.code===RTMErrorCode.RTM_ERROR_PRESENCE_USER_NOT_EXIST&&this.localStateCache.delete(A)}}))}onConnectionStateChanged(A,e){\"RECONNECTING\"===A&&(this.reconnId+=1),this.context.sendReport(\"ConnectionStateChange\",{sid:getSid(this.context.instanceId||Long$2.fromNumber(0)),userId:this.context.uid,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.mainSession&&this.mainSession.getRegistrarSession().startTime),oldState:connectionStateCodeMap[this.connectionState],newState:connectionStateCodeMap[A],reason:connectionStateChangeReason[e],reconnId:this.reconnId,version:VERSION_NO,subVersion:SUBVERSION,lastdonestep:0,failedstep:0,errorcode:Long$2.fromNumber(0),servererrorcode:Long$2.fromNumber(0),networkchangesequence:Long$2.fromNumber(0),networkchangeelapse:Long$2.fromNumber(0),statechangeelapse:Long$2.fromNumber(0)}),this.connectionState=A,\"FAILED\"!==A&&\"DISCONNECTED\"!==A||(this.reconnId=0,this.mainSession&&(this.mainSession.getPresenceSession().removeAllListeners(),this.mainSession.getRegistrarSession().removeAllListeners(),this.mainSession.getRegistrarSession().msgDedupLru.empty(),this.mainSession.getRegistrarSession().dialogueSequenceLru.empty(),this.mainSession.getRegistrarSession().dialPendingMsgSubjectMap.clear()),this.attributeDrafts.clear());const t={state:A,reason:e,timestamp:getUTCTimeBaseREG(this.context.offsetTime)};this.emit(\"status\",t)}async updateLinkState(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(\"CONNECTED\"===A&&this.setIntervalCreateColl(),this.linkState===A)return;if(this.context.sendReport(\"LinkStateChange\",{elapse:getElapse(this.mainSession&&this.mainSession.getRegistrarSession().startTime),lts:Long$2.fromNumber(Date.now()),reason:LinkStateChangeReason4Report[o],sid:getSid(this.context.instanceId||Long$2.fromNumber(0)),vid:Long$2.fromString(getParameter(\"VID\").get(this.context.appId)||\"0\"),userid:this.context.uid,currentState:linkStateCodeMap[A],previousState:linkStateCodeMap[this.linkState],operation:linkOperationCodeMap[e],serviceType:0,streamChannelName:\"\"}),\"CONNECTED\"===this.linkState&&\"DISCONNECTED\"===A&&this.log(\"link disconnected\"),\"CONNECTED\"===this.linkState&&\"FAILED\"===A){var r,n,I,s,C;if(!this._lastOptions&&(null!==(r=null===(n=this.mainSession)||void 0===n||null===(n=n.lastSubscribeOrJoinOptions)||void 0===n?void 0:n.size)&&void 0!==r?r:0)>0)this._lastOptions=new Map(null===(C=this.mainSession)||void 0===C?void 0:C.lastSubscribeOrJoinOptions);this._lastChannelMetaEventInfos=new Map(null===(I=this.mainSession)||void 0===I?void 0:I.getRegistrarSession().channelMetaEventInfos),this._lastUserMetaEventInfos=new Map(null===(s=this.mainSession)||void 0===s?void 0:s.getRegistrarSession().userMetaEventInfos)}\"CONNECTING\"===this.linkState&&\"CONNECTED\"===A&&\"AUTO_RECONNECT\"===e&&await this.onLinkReconnected();const E={currentState:A,previousState:this.linkState,serviceType:\"MESSAGE\",operation:e,reason:null!=g?g:e,reasonCode:o,affectedChannels:t,unrestoredChannels:[],timestamp:getUTCTimeBaseREG(this.context.offsetTime),isResumed:i};this.linkState=A,this.emit(\"linkState\",E)}banIP(A){var e;this.log(\"ip banned\",A);const t=null!==(e=this.blacklistedIP[A])&&void 0!==e?e:0;this.blacklistedIP[A]=t+1}updateLocalAcquiredLocksCache(A,e,t,o){var g;const i=null!==(g=this.localAcquiredLocks.get(A))&&void 0!==g?g:new Map;\"delete\"===t?null==i||i.delete(e):(i.set(e,{revision:o}),this.localAcquiredLocks.set(A,i))}clearChannel(A){var e;const t=null===(e=this.mainSession)||void 0===e?void 0:e.getRegistrarSession();for(let e=0;e<A.length;e++){const o=A[e];null==t||t.emit(\"channelLeft\",o),null==t||t.emit(\"unSubChannelLock\",o),null==t||t.emit(\"unSubChannelMetadata\",o)}}hasLock(){let A=!1;return this.localAcquiredLocks.size>0&&this.localAcquiredLocks.forEach((e=>{e.size>0&&(A=!0)})),A}validateRtmConnection(A){var e;if(this.context.enablePrivate&&(null===(e=this.context.rtmConfig.privateConfig)||void 0===e||!e.serviceType.includes(\"MESSAGE\"))){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_SERVICE_NOT_SUPPORTED);throw new RtmUnavailableError(A,t,e)}if(\"IDLE\"===this.linkState){this.log(\"The client state is \".concat(this.connectionState,\", cannot do the operation(\").concat(A,\")\"));const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmInvalidStatusError(A,[t],e)}}validateMainSessionExist(A){if(void 0===this.mainSession){const{code:e,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_NOT_LOGIN);throw new RtmUnavailableError(A,[t],e)}}checkVid(){var A;const e=this.context.vid,t=null===(A=this.mainSession)||void 0===A?void 0:A.getPresenceSession().vid;e!==t&&this.warn(\"The vid of uniLbs(\".concat(e,\") is not the same as the vid of syncProxy(\").concat(t,\")\"))}reportChannelLeave(A,e){this.context.addReportEvents(\"ChnLeave\",{cname:A,lts:Long$2.fromNumber(Date.now()),elapse:getElapse(this.mainSession.getRegistrarSession().startTime),errCode:e,sid:getSid(this.mainSession.getRegistrarSession().instanceId),userId:this.userId})}handlePrivateConfig(A,e){var t,o,g,i,r,n,I,s,C;if(isEmptyObject(null==e?void 0:e.privateConfig)||isEmptyObject(null==e||null===(t=e.privateConfig)||void 0===t?void 0:t.serviceType)||null==e||!e.privateConfig)return!1;let E=!1,a=\"\";const B=null==e||null===(o=e.privateConfig)||void 0===o?void 0:o.serviceType,Q=null==e||null===(g=e.privateConfig)||void 0===g?void 0:g.accessPointHosts,c=null==e||null===(i=e.privateConfig)||void 0===i?void 0:i.eventUploadHosts,l=null==e||null===(r=e.privateConfig)||void 0===r?void 0:r.logUploadHosts,u=null==e||null===(n=e.privateConfig)||void 0===n?void 0:n.originDomains;return 0!==(null==B?void 0:B.length)&&(0===(null!==(I=null==B?void 0:B.length)&&void 0!==I?I:0)||null!=B&&B.includes(\"MESSAGE\")||null!=B&&B.includes(\"STREAM\")||(a=\" ServiceType is illegal.\",E=!0),0!==(null!==(s=null==B?void 0:B.length)&&void 0!==s?s:0)&&0===(null!==(C=null==Q?void 0:Q.length)&&void 0!==C?C:0)&&(E=!0),(null!=Q&&Q.some((A=>!validDomain(A)))||null!=u&&u.some((A=>!validDomain(A)))||null!=c&&c.some((A=>!validDomain(A)))||null!=l&&l.some((A=>!validDomain(A))))&&(E=!0,a+=\" Hosts or domains is illegal.\"),E&&this._throwInvalidPrivateConfig(A,a),!0)}setIntervalCreateColl(){this._createCollInterval&&clearInterval(this._createCollInterval),this._createCollInterval=setInterval((()=>{var A;null==this||null===(A=this.mainSession)||void 0===A||A.getPresenceSession().intervalCreateColl()}),MONITOR_INTERVAL)}deleteIntervalCreateColl(){this._createCollInterval&&clearInterval(this._createCollInterval)}_throwInvalidPrivateConfig(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";const{code:t,reason:o}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_INVALID_PRIVATE_CONFIG),g=new RtmInvalidArgumentError(A,[o+e],t);throw this.logError(g),g}_handleLoginFailedState(A){let e=LinkStateChangeReasonDescription.LOGIN_REJECTED,t=\"LOGIN_REJECTED\";switch(A){case RTMErrorCode.RTM_ERROR_INVALID_USER_ID:e=LinkStateChangeReasonDescription.INVALID_USER_ID,t=\"INVALID_USER_ID\";break;case RTMErrorCode.RTM_ERROR_INVALID_TOKEN:e=LinkStateChangeReasonDescription.INVALID_TOKEN,t=\"INVALID_TOKEN\";break;case RTMErrorCode.RTM_ERROR_INCONSISTENT_APPID:e=LinkStateChangeReasonDescription.INCONSISTENT_APP_ID,t=\"INCONSISTENT_APP_ID\";break;case RTMErrorCode.RTM_ERROR_SERVICE_NOT_SUPPORTED:e=LinkStateChangeReasonDescription.SERVICE_NOT_SUPPORTED,t=\"SERVICE_NOT_SUPPORTED\";break;case RTMErrorCode.RTM_ERROR_OPERATION_RATE_EXCEED_LIMITATION:e=LinkStateChangeReasonDescription.OPERATION_RATE_EXCEED_LIMITATION,t=\"OPERATION_RATE_EXCEED_LIMITATION\"}this.updateLinkState(\"FAILED\",\"LOGIN\",[],t,e)}_validateJoinOptions(A,e){const t=getParameter(\"STORAGE_CHANNEL_SUB_ENABLED\"),o=\"true\"===(void 0!==t?String(t):this.consoleConfig[\"storage.channel_subscribe_enabled\"]);if(null!=A&&A.withMetadata&&!o){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_STORAGE_NOT_AVAILABLE);throw new RtmUnavailableError(e,[t],A)}const g=getParameter(\"LOCK_ENABLED\"),i=\"true\"===(void 0!==g?String(g):this.consoleConfig[\"lock.enabled\"]);if(null!=A&&A.withLock&&!i){const{code:A,reason:t}=getErrorInfoByCode(RTMErrorCode.RTM_ERROR_LOCK_NOT_AVAILABLE);throw new RtmUnavailableError(e,[t],A)}}}var _class;const defaultConfig={logUpload:!1,logFilter:LogFilter.LOG_FILTER_ERROR,cloudProxy:!1};let RTM=(_class=class extends EventBase{constructor(A,e,t){var o,g,i,r,n,I,s,C,E;const a={logUpload:null!==(o=null==t?void 0:t.logUpload)&&void 0!==o?o:defaultConfig.logUpload,logFilter:defaultConfig.logFilter,cloudProxy:null!==(g=null==t?void 0:t.cloudProxy)&&void 0!==g?g:defaultConfig.cloudProxy},B=_objectSpread2(_objectSpread2(_objectSpread2({},defaultConfig),a),{},{logFilter:_objectSpread2(_objectSpread2({},null==defaultConfig?void 0:defaultConfig.logFilter),null==a?void 0:a.logFilter)});(null!=t&&null!==(i=t.privateConfig)&&void 0!==i&&null!==(i=i.serviceType)&&void 0!==i&&i.includes(\"MESSAGE\")||null!=t&&null!==(r=t.privateConfig)&&void 0!==r&&null!==(r=r.serviceType)&&void 0!==r&&r.includes(\"STREAM\"))&&(null!==(n=null==t||null===(I=t.privateConfig)||void 0===I||null===(I=I.accessPointHosts)||void 0===I?void 0:I.length)&&void 0!==n?n:0)>0&&B.logUpload&&(null!==(s=null==t||null===(C=t.privateConfig)||void 0===C||null===(C=C.logUploadHosts)||void 0===C?void 0:C.length)&&void 0!==s?s:0)<=0&&(B.logUpload=!1);const Q=uuid$1(),c=initLoggerId(Q,null==t||null===(E=t.privateConfig)||void 0===E?void 0:E.logUploadHosts),l=genInfoLogger(A,B,Q,e),u=genWarnLogger(A,B,Q,e),h=genErrorLogger(A,B,Q,e),d=trackLoggerGenerator(A,c,B,Q,e),p=debugLoggerGenerator(A,c,B,Q,e),y=p(\"RTM:DEBUG\",\"<Entry> \"),D={genLogger:p,genTracker:d,info:l,warn:u,logError:h,loggerId:c};super(D,\"RTM\",!0),_defineProperty$1(this,\"presence\",void 0),_defineProperty$1(this,\"storage\",void 0),_defineProperty$1(this,\"lock\",void 0),_defineProperty$1(this,\"history\",void 0),_defineProperty$1(this,\"rtmImpl\",void 0),this.rtmImpl=new RTMImpl(D,Q,A,e,B,t),this.lock=this.rtmImpl.lock,this.presence=this.rtmImpl.presence,this.storage=this.rtmImpl.storage,this.history=this.rtmImpl.history,l(\"The Agora RTM Web SDK version is %s, fusion is %s\",VERSION,FUSION),l(\"The new process ID is %s\",Q);B.logUpload&&y(\"The uploaded logs address is:\".concat(\"http://log-collector-query.dc3.agoralab.co/api/v3/download?namespace=web&process_id=process-\").concat(Q)),l('The Git commit ID is \"'.concat(BUILD,'\"')),l(\"The build is %s\",BUILD),l(\"NODE_ENV is %s\",\"production\"),l(\"Creating an RTM instance\"),l(\"The App ID is %s\",replaceRange(A,4,10,\"*\".repeat(6)))}async renewToken(A,e){return await this.rtmImpl.renewToken(A,e)}updateConfig(A){return this.rtmImpl.updateConfig(A)}async login(A){return await this.rtmImpl.login(A)}async logout(){return await this.rtmImpl.logout()}async publish(A,e,t){return await this.rtmImpl.publish(A,e,t)}async subscribe(A,e){return await this.rtmImpl.subscribe(A,e)}async unsubscribe(A){return await this.rtmImpl.unsubscribe(A)}createStreamChannel(A){return this.rtmImpl.createStreamChannel(A)}addEventListener(A,e){this.rtmImpl.addEventListener(A,e)}removeEventListener(A,e){this.rtmImpl.removeEventListener(A,e)}},_applyDecoratedDescriptor(_class.prototype,\"renewToken\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"renewToken\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"updateConfig\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"updateConfig\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"login\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"login\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"logout\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"logout\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"publish\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"publish\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"subscribe\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"subscribe\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"unsubscribe\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"unsubscribe\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"createStreamChannel\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"createStreamChannel\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"addEventListener\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"addEventListener\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"removeEventListener\",[loggedSensitive],Object.getOwnPropertyDescriptor(_class.prototype,\"removeEventListener\"),_class.prototype),_class);var index={BUILD:BUILD,VERSION:VERSION,processId:processId,RTM:RTM,getParameter:getParameter,setArea:setArea,setParameter:setParameter,constantsType:ConstantsType,RTMBaseError:RTMBaseError};return index}));\n\n//# sourceURL=webpack://@livePlay/web-sdk/./node_modules/agora-rtm-sdk/agora-rtm.js?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgoraRTC: () => (/* reexport safe */ agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   AgoraRTM: () => (/* reexport default from dynamic */ agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_3___default.a),\n/* harmony export */   MediaManager: () => (/* reexport safe */ _media_manager_media_manager__WEBPACK_IMPORTED_MODULE_0__.MediaManager),\n/* harmony export */   RTMClient: () => (/* reexport safe */ agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_3__.RTMClient),\n/* harmony export */   SignalingManager: () => (/* reexport safe */ _signaling_manager_signaling_manager__WEBPACK_IMPORTED_MODULE_1__.SignalingManager)\n/* harmony export */ });\n/* harmony import */ var _media_manager_media_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./media-manager/media-manager */ \"./src/media-manager/media-manager.ts\");\n/* harmony import */ var _signaling_manager_signaling_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signaling-manager/signaling-manager */ \"./src/signaling-manager/signaling-manager.ts\");\n/* harmony import */ var agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! agora-rtc-sdk-ng */ \"./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.esm.mjs\");\n/* harmony import */ var agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! agora-rtm-sdk */ \"./node_modules/agora-rtm-sdk/agora-rtm.js\");\n/* harmony import */ var agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_3__);\n\n\n// Export Agora RTC SDK\n\n// Export Agora RTM SDK\n\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/index.ts?");

/***/ }),

/***/ "./src/join-controller/join-controller.ts":
/*!************************************************!*\
  !*** ./src/join-controller/join-controller.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JoinController: () => (/* binding */ JoinController)\n/* harmony export */ });\n/* harmony import */ var _network_network_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/network-api */ \"./src/network/network-api.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nclass JoinControllerClass {\n    constructor(networkApi) {\n        this.networkApi = networkApi;\n    }\n    fetchRTCToken(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.networkApi.fetchRTCToken(token);\n            return data;\n        });\n    }\n    fetchSignalingToken(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.networkApi.fetchSignalingToken(token);\n        });\n    }\n}\nconst JoinController = new JoinControllerClass(new _network_network_api__WEBPACK_IMPORTED_MODULE_0__.NetworkApi());\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/join-controller/join-controller.ts?");

/***/ }),

/***/ "./src/media-manager/media-engines/agora-media-engine.ts":
/*!***************************************************************!*\
  !*** ./src/media-manager/media-engines/agora-media-engine.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgoraMediaEngine: () => (/* binding */ AgoraMediaEngine)\n/* harmony export */ });\n/* harmony import */ var agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! agora-rtc-sdk-ng */ \"./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.esm.mjs\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nclass AgoraMediaEngine {\n    constructor() {\n        this.agoraRTCClient = agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createClient({ codec: \"vp8\", mode: \"live\" });\n        this.agoraRTCClient.enableAudioVolumeIndicator();\n        this.setLowStreamParameter();\n        this.enableDualMode();\n        agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].enableLogUpload();\n        agora_rtc_sdk_ng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setLogLevel(4);\n    }\n    setLowStreamParameter() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this.agoraRTCClient.setLowStreamParameter({\n                    width: 240,\n                    height: 240,\n                    framerate: 15,\n                    bitrate: 140,\n                });\n            }\n            catch (e) {\n                console.log(e);\n            }\n        });\n    }\n    enableDualMode() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            try {\n                yield ((_a = this.agoraRTCClient) === null || _a === void 0 ? void 0 : _a.enableDualStream());\n            }\n            catch (e) {\n                console.log(e);\n            }\n        });\n    }\n    joinRTCChannel(channelDetails) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.agoraRTCClient.setClientRole(\"audience\");\n                yield this.agoraRTCClient.join(channelDetails.appId, channelDetails.channelId, channelDetails.token, channelDetails.uid);\n            }\n            catch (error) {\n                throw error;\n            }\n        });\n    }\n    get mediaClient() {\n        return this.agoraRTCClient;\n    }\n}\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/media-manager/media-engines/agora-media-engine.ts?");

/***/ }),

/***/ "./src/media-manager/media-manager.ts":
/*!********************************************!*\
  !*** ./src/media-manager/media-manager.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MediaManager: () => (/* binding */ MediaManager)\n/* harmony export */ });\n/* harmony import */ var _join_controller_join_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../join-controller/join-controller */ \"./src/join-controller/join-controller.ts\");\n/* harmony import */ var _media_engines_agora_media_engine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./media-engines/agora-media-engine */ \"./src/media-manager/media-engines/agora-media-engine.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nclass MediaManager {\n    constructor() {\n        this.joinController = _join_controller_join_controller__WEBPACK_IMPORTED_MODULE_0__.JoinController;\n        this.mediaEngine = new _media_engines_agora_media_engine__WEBPACK_IMPORTED_MODULE_1__.AgoraMediaEngine();\n    }\n    joinRTCChannel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const tokenInfo = yield this.joinController.fetchRTCToken(token);\n                console.log('fetchRTCToken', tokenInfo);\n                const ChannelInfo = {\n                    appId: \"2f7cffbb5a1d43e49521b09ae330e330\",\n                    token: tokenInfo.RTCToken,\n                    uid: tokenInfo.userId,\n                    channelId: tokenInfo.streamChannelId,\n                    userName: tokenInfo.username\n                };\n                window.client = this.mediaEngine;\n                yield this.mediaEngine.joinRTCChannel(ChannelInfo);\n            }\n            catch (error) {\n                throw error;\n            }\n        });\n    }\n    get mediaClient() {\n        return this.mediaEngine.mediaClient;\n    }\n}\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/media-manager/media-manager.ts?");

/***/ }),

/***/ "./src/network/http-client.ts":
/*!************************************!*\
  !*** ./src/network/http-client.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HttpClient: () => (/* binding */ HttpClient)\n/* harmony export */ });\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/request */ \"./src/utils/request.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (undefined && undefined.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n\nconst getRequestHeaders = () => {\n    let params = {};\n    params = { \"Content-Type\": \"application/json\" };\n    //   if (authToken != \"\") {\n    //     params = {\n    //       ...params,\n    //       Authorization: authToken,\n    //     };\n    //   }\n    return params;\n};\nclass HttpClientClass {\n    /**\n     * Performs a GET request to the specified URL with optional request options\n     * @param {string} url - The URL to perform the GET request to\n     * @param {IRequestOptions} options - Optional request options such as headers and timeout\n     * @returns {Promise<any>} - A Promise that resolves to the response body of the GET request\n     */\n    createGetRequest(url, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Extract timeout and headers from the options parameter, or use default values if not provided\n            const _a = Object.assign({ method: \"GET\" }, options), { timeout = 10000, headers = {} } = _a, opts = __rest(_a, [\"timeout\", \"headers\"]);\n            // Construct the request options object with merged headers\n            const requestOptions = Object.assign(Object.assign({}, opts), { headers: Object.assign(Object.assign({}, headers), getRequestHeaders()) });\n            try {\n                // Create a new AbortController and signal for the request\n                const controller = new AbortController();\n                const signal = controller.signal;\n                // Set a timeout for the request and abort it if it takes too long\n                const timeoutId = setTimeout(() => controller.abort(), timeout);\n                // Make the GET request with the specified URL and request options\n                const resp = yield (0,_utils_request__WEBPACK_IMPORTED_MODULE_0__.request)(`${url}`, Object.assign(Object.assign({}, requestOptions), { signal }));\n                // Clear the timeout since the request completed successfully\n                clearTimeout(timeoutId);\n                // If the response contains an error, throw an error with the error message\n                if (resp === null || resp === void 0 ? void 0 : resp.error) {\n                    throw new Error(resp.error);\n                }\n                else {\n                    // Otherwise, return the response body\n                    return resp;\n                }\n            }\n            catch (error) {\n                // If an error occurred during the request, re-throw the error\n                throw error;\n            }\n        });\n    }\n    createPostRequest(url, body, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            // Destructure options into timeout and headers variables, and use defaults where necessary\n            const _b = Object.assign({ method: \"POST\" }, options), { timeout = 10000, headers = {} } = _b, opts = __rest(_b, [\"timeout\", \"headers\"]);\n            // Combine headers from options and default headers\n            const requestOptions = Object.assign(Object.assign({}, opts), { headers: Object.assign(Object.assign({}, headers), getRequestHeaders()), body: body && JSON.stringify(body) });\n            try {\n                // Create an AbortController and timeout\n                const controller = new AbortController();\n                const signal = controller.signal;\n                const timeoutId = setTimeout(() => controller.abort(), timeout);\n                // Send the request with the options and signal\n                const resp = yield (0,_utils_request__WEBPACK_IMPORTED_MODULE_0__.request)(`${url}`, Object.assign(Object.assign({}, requestOptions), { signal }));\n                clearTimeout(timeoutId); // Clear the timeout\n                // Check if the response was successful\n                if ((resp === null || resp === void 0 ? void 0 : resp.success) === false) {\n                    throw new Error((_a = resp === null || resp === void 0 ? void 0 : resp.message) !== null && _a !== void 0 ? _a : \"Request failed!\"); // Throw an error if unsuccessful\n                }\n                else {\n                    return resp; // Return the response if successful\n                }\n            }\n            catch (error) {\n                throw error; // Throw any errors\n            }\n        });\n    }\n}\nconst HttpClient = new HttpClientClass();\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/network/http-client.ts?");

/***/ }),

/***/ "./src/network/network-api.ts":
/*!************************************!*\
  !*** ./src/network/network-api.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NetworkApi: () => (/* binding */ NetworkApi)\n/* harmony export */ });\n/* harmony import */ var _http_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./http-client */ \"./src/network/http-client.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nconst BASE_URL = \"https://liveplay-backend.vercel.app/api/agora\"; // Replace with your server's base URL\nconst LIVEPLAY_BASE_URL = \"https://api.dev.liveplayservice.com/sweeps\";\nclass NetworkApi {\n    fetchRTCToken(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _http_client__WEBPACK_IMPORTED_MODULE_0__.HttpClient.createGetRequest(`${LIVEPLAY_BASE_URL}/get-rtc-token?token=${token}`);\n            }\n            catch (error) {\n                throw error;\n            }\n        });\n    }\n    fetchSignalingToken(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _http_client__WEBPACK_IMPORTED_MODULE_0__.HttpClient.createGetRequest(`${LIVEPLAY_BASE_URL}/get-rtm-token?token=${token}`);\n            }\n            catch (error) {\n                throw error;\n            }\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/network/network-api.ts?");

/***/ }),

/***/ "./src/signaling-manager/signaling-engines/agora-signaling-engine.ts":
/*!***************************************************************************!*\
  !*** ./src/signaling-manager/signaling-engines/agora-signaling-engine.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgoraSignalingEngine: () => (/* binding */ AgoraSignalingEngine)\n/* harmony export */ });\n/* harmony import */ var agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! agora-rtm-sdk */ \"./node_modules/agora-rtm-sdk/agora-rtm.js\");\n/* harmony import */ var agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_0__);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nclass AgoraSignalingEngine {\n    constructor() {\n        this.signalingChanelName = null;\n        this.isSignalingConnected = false;\n        this.userId = null;\n        this.userName = null;\n    }\n    joinSignalingChannel(channelDetails) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this.agoraSignalingClient = new (agora_rtm_sdk__WEBPACK_IMPORTED_MODULE_0___default().RTM)(channelDetails.appId, channelDetails.uid.toString(), { logLevel: 'debug', });\n                this.signalingChanelName = channelDetails.channelId;\n                this.userId = channelDetails.uid.toString();\n                this.userName = channelDetails.userName;\n                yield this.agoraSignalingClient.login({ token: channelDetails.token });\n                yield this.handleSubscribe();\n                this.isSignalingConnected = true;\n                console.log(\"Successfully logged into RTM\");\n            }\n            catch (error) {\n                console.error(\"Failed to join channel:\", error);\n            }\n        });\n    }\n    handleSubscribe() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (this.agoraSignalingClient) {\n                    const result = yield this.agoraSignalingClient.subscribe(this.signalingChanelName);\n                    console.log(\"successfullysubscribe signaling channel \");\n                }\n            }\n            catch (status) {\n                console.log(status);\n            }\n        });\n    }\n    get signalingClient() {\n        return this.agoraSignalingClient;\n    }\n}\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/signaling-manager/signaling-engines/agora-signaling-engine.ts?");

/***/ }),

/***/ "./src/signaling-manager/signaling-manager.ts":
/*!****************************************************!*\
  !*** ./src/signaling-manager/signaling-manager.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SignalingManager: () => (/* binding */ SignalingManager)\n/* harmony export */ });\n/* harmony import */ var _signaling_engines_agora_signaling_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./signaling-engines/agora-signaling-engine */ \"./src/signaling-manager/signaling-engines/agora-signaling-engine.ts\");\n/* harmony import */ var _join_controller_join_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../join-controller/join-controller */ \"./src/join-controller/join-controller.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nclass SignalingManager {\n    constructor() {\n        this.joinController = _join_controller_join_controller__WEBPACK_IMPORTED_MODULE_1__.JoinController;\n        this.signalingEngine = new _signaling_engines_agora_signaling_engine__WEBPACK_IMPORTED_MODULE_0__.AgoraSignalingEngine();\n    }\n    joinSignalingChannel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const tokenInfo = yield this.joinController.fetchSignalingToken(token);\n                window.signalingEngine = this.signalingEngine;\n                console.log('fetchSignalingToken', tokenInfo);\n                const ChannelInfo = {\n                    appId: \"2f7cffbb5a1d43e49521b09ae330e330\",\n                    token: tokenInfo.RTMToken,\n                    uid: tokenInfo.userId,\n                    channelId: tokenInfo.chatChannelId,\n                    userName: tokenInfo.username\n                };\n                console.log('Rohit ChannelInfo', ChannelInfo);\n                yield this.signalingEngine.joinSignalingChannel(ChannelInfo);\n            }\n            catch (error) {\n                console.error(\"Failed to join channel:\", error);\n                throw error;\n            }\n        });\n    }\n    get signalingClient() {\n        return this.signalingEngine.signalingClient;\n    }\n    get signalingChanelName() {\n        return this.signalingEngine.signalingChanelName;\n    }\n    get isSignalingConnected() {\n        return this.signalingEngine.isSignalingConnected;\n    }\n    get userId() {\n        return this.signalingEngine.userId;\n    }\n    get userName() {\n        return this.signalingEngine.userName;\n    }\n}\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/signaling-manager/signaling-manager.ts?");

/***/ }),

/***/ "./src/utils/request.ts":
/*!******************************!*\
  !*** ./src/utils/request.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   request: () => (/* binding */ request)\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst request = (url, opts) => __awaiter(void 0, void 0, void 0, function* () {\n    const response = yield fetch(url, opts);\n    const data = yield response.json();\n    if (!response.ok) {\n        const errorMessage = data.customCode\n            ? data.message\n            : data.code\n                ? data.msg\n                : \"Request Failed\";\n        const error = new Error(errorMessage);\n        error.data = data;\n        error.status = response.status;\n        throw error;\n    }\n    return data;\n});\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./src/utils/request.ts?");

/***/ }),

/***/ "./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.esm.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.esm.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ $K)\n/* harmony export */ });\n/**\n * AgoraWebSDK_N-v4.22.0-0-g8569241d-dirty Copyright AgoraInc.\n */\n\nfunction e(e,t){return t.forEach((function(t){t&&\"string\"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if(\"default\"!==i&&!(i in e)){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(e)}var t=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var n=function(e){try{return!!e()}catch(e){return!0}},r=!n((function(){var e=function(){}.bind();return\"function\"!=typeof e||e.hasOwnProperty(\"prototype\")})),o=r,s=Function.prototype,a=s.call,c=o&&s.bind.bind(a,a),d=o?c:function(e){return function(){return a.apply(e,arguments)}},l=d({}.isPrototypeOf),u=function(e){return e&&e.Math==Math&&e},h=u(\"object\"==typeof globalThis&&globalThis)||u(\"object\"==typeof window&&window)||u(\"object\"==typeof self&&self)||u(\"object\"==typeof t&&t)||function(){return this}()||t||Function(\"return this\")(),p=r,_=Function.prototype,E=_.apply,m=_.call,f=\"object\"==typeof Reflect&&Reflect.apply||(p?m.bind(E):function(){return m.apply(E,arguments)}),T=d,S=T({}.toString),g=T(\"\".slice),R=function(e){return g(S(e),8,-1)},C=R,I=d,v=function(e){if(\"Function\"===C(e))return I(e)},y=\"object\"==typeof document&&document.all,A={all:y,IS_HTMLDDA:void 0===y&&void 0!==y},b=A.all,w=A.IS_HTMLDDA?function(e){return\"function\"==typeof e||e===b}:function(e){return\"function\"==typeof e},O={},N=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=r,P=Function.prototype.call,L=D?P.bind(P):function(){return P.apply(P,arguments)},k={},M={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,x=U&&!M.call({1:2},1);k.f=x?function(e){var t=U(this,e);return!!t&&t.enumerable}:M;var V,F,B=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},j=n,G=R,W=Object,H=d(\"\".split),K=j((function(){return!W(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==G(e)?H(e,\"\"):W(e)}:W,Y=function(e){return null==e},q=Y,z=TypeError,J=function(e){if(q(e))throw z(\"Can't call method on \"+e);return e},X=K,Q=J,Z=function(e){return X(Q(e))},$=w,ee=A.all,te=A.IS_HTMLDDA?function(e){return\"object\"==typeof e?null!==e:$(e)||e===ee}:function(e){return\"object\"==typeof e?null!==e:$(e)},ie={},ne=ie,re=h,oe=w,se=function(e){return oe(e)?e:void 0},ae=function(e,t){return arguments.length<2?se(ne[e])||se(re[e]):ne[e]&&ne[e][t]||re[e]&&re[e][t]},ce=\"undefined\"!=typeof navigator&&String(navigator.userAgent)||\"\",de=h,le=ce,ue=de.process,he=de.Deno,pe=ue&&ue.versions||he&&he.version,_e=pe&&pe.v8;_e&&(F=(V=_e.split(\".\"))[0]>0&&V[0]<4?1:+(V[0]+V[1])),!F&&le&&(!(V=le.match(/Edge\\/(\\d+)/))||V[1]>=74)&&(V=le.match(/Chrome\\/(\\d+)/))&&(F=+V[1]);var Ee=F,me=Ee,fe=n,Te=h.String,Se=!!Object.getOwnPropertySymbols&&!fe((function(){var e=Symbol();return!Te(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&me&&me<41})),ge=Se&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator,Re=ae,Ce=w,Ie=l,ve=Object,ye=ge?function(e){return\"symbol\"==typeof e}:function(e){var t=Re(\"Symbol\");return Ce(t)&&Ie(t.prototype,ve(e))},Ae=String,be=function(e){try{return Ae(e)}catch(e){return\"Object\"}},we=w,Oe=be,Ne=TypeError,De=function(e){if(we(e))return e;throw Ne(Oe(e)+\" is not a function\")},Pe=De,Le=Y,ke=function(e,t){var i=e[t];return Le(i)?void 0:Pe(i)},Me=L,Ue=w,xe=te,Ve=TypeError,Fe={exports:{}},Be=h,je=Object.defineProperty,Ge=function(e,t){try{je(Be,e,{value:t,configurable:!0,writable:!0})}catch(i){Be[e]=t}return t},We=\"__core-js_shared__\",He=h[We]||Ge(We,{}),Ke=He;(Fe.exports=function(e,t){return Ke[e]||(Ke[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.31.1\",mode:\"pure\",copyright:\"Â© 2014-2023 Denis Pushkarev (zloirock.ru)\",license:\"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE\",source:\"https://github.com/zloirock/core-js\"});var Ye=Fe.exports,qe=J,ze=Object,Je=function(e){return ze(qe(e))},Xe=Je,Qe=d({}.hasOwnProperty),Ze=Object.hasOwn||function(e,t){return Qe(Xe(e),t)},$e=d,et=0,tt=Math.random(),it=$e(1..toString),nt=function(e){return\"Symbol(\"+(void 0===e?\"\":e)+\")_\"+it(++et+tt,36)},rt=Ye,ot=Ze,st=nt,at=Se,ct=ge,dt=h.Symbol,lt=rt(\"wks\"),ut=ct?dt.for||dt:dt&&dt.withoutSetter||st,ht=function(e){return ot(lt,e)||(lt[e]=at&&ot(dt,e)?dt[e]:ut(\"Symbol.\"+e)),lt[e]},pt=L,_t=te,Et=ye,mt=ke,ft=function(e,t){var i,n;if(\"string\"===t&&Ue(i=e.toString)&&!xe(n=Me(i,e)))return n;if(Ue(i=e.valueOf)&&!xe(n=Me(i,e)))return n;if(\"string\"!==t&&Ue(i=e.toString)&&!xe(n=Me(i,e)))return n;throw Ve(\"Can't convert object to primitive value\")},Tt=TypeError,St=ht(\"toPrimitive\"),gt=function(e,t){if(!_t(e)||Et(e))return e;var i,n=mt(e,St);if(n){if(void 0===t&&(t=\"default\"),i=pt(n,e,t),!_t(i)||Et(i))return i;throw Tt(\"Can't convert object to primitive value\")}return void 0===t&&(t=\"number\"),ft(e,t)},Rt=ye,Ct=function(e){var t=gt(e,\"string\");return Rt(t)?t:t+\"\"},It=te,vt=h.document,yt=It(vt)&&It(vt.createElement),At=function(e){return yt?vt.createElement(e):{}},bt=At,wt=!N&&!n((function(){return 7!=Object.defineProperty(bt(\"div\"),\"a\",{get:function(){return 7}}).a})),Ot=N,Nt=L,Dt=k,Pt=B,Lt=Z,kt=Ct,Mt=Ze,Ut=wt,xt=Object.getOwnPropertyDescriptor;O.f=Ot?xt:function(e,t){if(e=Lt(e),t=kt(t),Ut)try{return xt(e,t)}catch(e){}if(Mt(e,t))return Pt(!Nt(Dt.f,e,t),e[t])};var Vt=n,Ft=w,Bt=/#|\\.prototype\\./,jt=function(e,t){var i=Wt[Gt(e)];return i==Kt||i!=Ht&&(Ft(t)?Vt(t):!!t)},Gt=jt.normalize=function(e){return String(e).replace(Bt,\".\").toLowerCase()},Wt=jt.data={},Ht=jt.NATIVE=\"N\",Kt=jt.POLYFILL=\"P\",Yt=jt,qt=De,zt=r,Jt=v(v.bind),Xt=function(e,t){return qt(e),void 0===t?e:zt?Jt(e,t):function(){return e.apply(t,arguments)}},Qt={},Zt=N&&n((function(){return 42!=Object.defineProperty((function(){}),\"prototype\",{value:42,writable:!1}).prototype})),$t=te,ei=String,ti=TypeError,ii=function(e){if($t(e))return e;throw ti(ei(e)+\" is not an object\")},ni=N,ri=wt,oi=Zt,si=ii,ai=Ct,ci=TypeError,di=Object.defineProperty,li=Object.getOwnPropertyDescriptor,ui=\"enumerable\",hi=\"configurable\",pi=\"writable\";Qt.f=ni?oi?function(e,t,i){if(si(e),t=ai(t),si(i),\"function\"==typeof e&&\"prototype\"===t&&\"value\"in i&&pi in i&&!i[pi]){var n=li(e,t);n&&n[pi]&&(e[t]=i.value,i={configurable:hi in i?i[hi]:n[hi],enumerable:ui in i?i[ui]:n[ui],writable:!1})}return di(e,t,i)}:di:function(e,t,i){if(si(e),t=ai(t),si(i),ri)try{return di(e,t,i)}catch(e){}if(\"get\"in i||\"set\"in i)throw ci(\"Accessors not supported\");return\"value\"in i&&(e[t]=i.value),e};var _i=Qt,Ei=B,mi=N?function(e,t,i){return _i.f(e,t,Ei(1,i))}:function(e,t,i){return e[t]=i,e},fi=h,Ti=f,Si=v,gi=w,Ri=O.f,Ci=Yt,Ii=ie,vi=Xt,yi=mi,Ai=Ze,bi=function(e){var t=function(i,n,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,n)}return new e(i,n,r)}return Ti(e,this,arguments)};return t.prototype=e.prototype,t},wi=function(e,t){var i,n,r,o,s,a,c,d,l,u=e.target,h=e.global,p=e.stat,_=e.proto,E=h?fi:p?fi[u]:(fi[u]||{}).prototype,m=h?Ii:Ii[u]||yi(Ii,u,{})[u],f=m.prototype;for(o in t)n=!(i=Ci(h?o:u+(p?\".\":\"#\")+o,e.forced))&&E&&Ai(E,o),a=m[o],n&&(c=e.dontCallGetSet?(l=Ri(E,o))&&l.value:E[o]),s=n&&c?c:t[o],n&&typeof a==typeof s||(d=e.bind&&n?vi(s,fi):e.wrap&&n?bi(s):_&&gi(s)?Si(s):s,(e.sham||s&&s.sham||a&&a.sham)&&yi(d,\"sham\",!0),yi(m,o,d),_&&(Ai(Ii,r=u+\"Prototype\")||yi(Ii,r,{}),yi(Ii[r],o,s),e.real&&f&&(i||!f[o])&&yi(f,o,s)))},Oi=Math.ceil,Ni=Math.floor,Di=Math.trunc||function(e){var t=+e;return(t>0?Ni:Oi)(t)},Pi=Di,Li=function(e){var t=+e;return t!=t||0===t?0:Pi(t)},ki=Li,Mi=Math.max,Ui=Math.min,xi=function(e,t){var i=ki(e);return i<0?Mi(i+t,0):Ui(i,t)},Vi=Li,Fi=Math.min,Bi=function(e){return e>0?Fi(Vi(e),9007199254740991):0},ji=Bi,Gi=function(e){return ji(e.length)},Wi=Z,Hi=xi,Ki=Gi,Yi=function(e){return function(t,i,n){var r,o=Wi(t),s=Ki(o),a=Hi(n,s);if(e&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},qi={includes:Yi(!0),indexOf:Yi(!1)},zi=qi.includes;wi({target:\"Array\",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(e){return zi(this,e,arguments.length>1?arguments[1]:void 0)}});var Ji=ie,Xi=function(e){return Ji[e+\"Prototype\"]},Qi=Xi(\"Array\").includes,Zi=te,$i=R,en=ht(\"match\"),tn=function(e){var t;return Zi(e)&&(void 0!==(t=e[en])?!!t:\"RegExp\"==$i(e))},nn=tn,rn=TypeError,on={};on[ht(\"toStringTag\")]=\"z\";var sn=\"[object z]\"===String(on),an=sn,cn=w,dn=R,ln=ht(\"toStringTag\"),un=Object,hn=\"Arguments\"==dn(function(){return arguments}()),pn=an?dn:function(e){var t,i,n;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=un(e),ln))?i:hn?dn(t):\"Object\"==(n=dn(t))&&cn(t.callee)?\"Arguments\":n},_n=pn,En=String,mn=function(e){if(\"Symbol\"===_n(e))throw TypeError(\"Cannot convert a Symbol value to a string\");return En(e)},fn=ht(\"match\"),Tn=wi,Sn=function(e){if(nn(e))throw rn(\"The method doesn't accept regular expressions\");return e},gn=J,Rn=mn,Cn=function(e){var t=/./;try{\"/./\"[e](t)}catch(i){try{return t[fn]=!1,\"/./\"[e](t)}catch(e){}}return!1},In=d(\"\".indexOf);Tn({target:\"String\",proto:!0,forced:!Cn(\"includes\")},{includes:function(e){return!!~In(Rn(gn(this)),Rn(Sn(e)),arguments.length>1?arguments[1]:void 0)}});var vn=Xi(\"String\").includes,yn=l,An=Qi,bn=vn,wn=Array.prototype,On=String.prototype,Nn=function(e){var t=e.includes;return e===wn||yn(wn,e)&&t===wn.includes?An:\"string\"==typeof e||e===On||yn(On,e)&&t===On.includes?bn:t},Dn=i(Nn),Pn=De,Ln=Je,kn=K,Mn=Gi,Un=TypeError,xn=function(e){return function(t,i,n,r){Pn(i);var o=Ln(t),s=kn(o),a=Mn(o),c=e?a-1:0,d=e?-1:1;if(n<2)for(;;){if(c in s){r=s[c],c+=d;break}if(c+=d,e?c<0:a<=c)throw Un(\"Reduce of empty array with no initial value\")}for(;e?c>=0:a>c;c+=d)c in s&&(r=i(r,s[c],c,o));return r}},Vn={left:xn(!1),right:xn(!0)},Fn=n,Bn=function(e,t){var i=[][e];return!!i&&Fn((function(){i.call(null,t||function(){return 1},1)}))},jn=\"undefined\"!=typeof process&&\"process\"==R(process),Gn=Vn.left;wi({target:\"Array\",proto:!0,forced:!jn&&Ee>79&&Ee<83||!Bn(\"reduce\")},{reduce:function(e){var t=arguments.length;return Gn(this,e,t,t>1?arguments[1]:void 0)}});var Wn=Xi(\"Array\").reduce,Hn=l,Kn=Wn,Yn=Array.prototype,qn=function(e){var t=e.reduce;return e===Yn||Hn(Yn,e)&&t===Yn.reduce?Kn:t},zn=qn,Jn=i(zn);let Xn=!0,Qn=!0;function Zn(e,t,i){const n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function $n(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),r.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(i))return o.apply(this,arguments);const n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,\"on\"+t,{get(){return this[\"_on\"+t]},set(e){this[\"_on\"+t]&&(this.removeEventListener(t,this[\"_on\"+t]),delete this[\"_on\"+t]),e&&this.addEventListener(t,this[\"_on\"+t]=e)},enumerable:!0,configurable:!0})}function er(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+typeof e+\". Please use a boolean.\"):(Xn=e,e?\"adapter.js logging disabled\":\"adapter.js logging enabled\")}function tr(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+typeof e+\". Please use a boolean.\"):(Qn=!e,\"adapter.js deprecation warnings \"+(e?\"disabled\":\"enabled\"))}function ir(){if(\"object\"==typeof window){if(Xn)return;\"undefined\"!=typeof console&&\"function\"==typeof console.log&&console.log.apply(console,arguments)}}function nr(e,t){Qn&&console.warn(e+\" is deprecated, please use \"+t+\" instead.\")}function rr(e){return\"[object Object]\"===Object.prototype.toString.call(e)}function or(e){var t;return rr(e)?Jn(t=Object.keys(e)).call(t,(function(t,i){const n=rr(e[i]),r=n?or(e[i]):e[i],o=n&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[i]:r})}),{}):e}function sr(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((n=>{n.endsWith(\"Id\")?sr(e,e.get(t[n]),i):n.endsWith(\"Ids\")&&t[n].forEach((t=>{sr(e,e.get(t),i)}))})))}function ar(e,t,i){const n=i?\"outbound-rtp\":\"inbound-rtp\",r=new Map;if(null===t)return r;const o=[];return e.forEach((e=>{\"track\"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((i=>{i.type===n&&i.trackId===t.id&&sr(e,i,r)}))})),r}var cr=nt,dr=Ye(\"keys\"),lr=function(e){return dr[e]||(dr[e]=cr(e))},ur=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),hr=Ze,pr=w,_r=Je,Er=ur,mr=lr(\"IE_PROTO\"),fr=Object,Tr=fr.prototype,Sr=Er?fr.getPrototypeOf:function(e){var t=_r(e);if(hr(t,mr))return t[mr];var i=t.constructor;return pr(i)&&t instanceof i?i.prototype:t instanceof fr?Tr:null},gr=d,Rr=De,Cr=w,Ir=String,vr=TypeError,yr=function(e,t,i){try{return gr(Rr(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(e){}},Ar=ii,br=function(e){if(\"object\"==typeof e||Cr(e))return e;throw vr(\"Can't set \"+Ir(e)+\" as a prototype\")},wr=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,i={};try{(e=yr(Object.prototype,\"__proto__\",\"set\"))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return Ar(i),br(n),t?e(i,n):i.__proto__=n,i}}():void 0),Or={},Nr={},Dr=Ze,Pr=Z,Lr=qi.indexOf,kr=Nr,Mr=d([].push),Ur=function(e,t){var i,n=Pr(e),r=0,o=[];for(i in n)!Dr(kr,i)&&Dr(n,i)&&Mr(o,i);for(;t.length>r;)Dr(n,i=t[r++])&&(~Lr(o,i)||Mr(o,i));return o},xr=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],Vr=Ur,Fr=xr.concat(\"length\",\"prototype\");Or.f=Object.getOwnPropertyNames||function(e){return Vr(e,Fr)};var Br={};Br.f=Object.getOwnPropertySymbols;var jr=ae,Gr=Or,Wr=Br,Hr=ii,Kr=d([].concat),Yr=jr(\"Reflect\",\"ownKeys\")||function(e){var t=Gr.f(Hr(e)),i=Wr.f;return i?Kr(t,i(e)):t},qr=Ze,zr=Yr,Jr=O,Xr=Qt,Qr={},Zr=Ur,$r=xr,eo=Object.keys||function(e){return Zr(e,$r)},to=N,io=Zt,no=Qt,ro=ii,oo=Z,so=eo;Qr.f=to&&!io?Object.defineProperties:function(e,t){ro(e);for(var i,n=oo(t),r=so(t),o=r.length,s=0;o>s;)no.f(e,i=r[s++],n[i]);return e};var ao,co=ae(\"document\",\"documentElement\"),lo=ii,uo=Qr,ho=xr,po=Nr,_o=co,Eo=At,mo=\"prototype\",fo=\"script\",To=lr(\"IE_PROTO\"),So=function(){},go=function(e){return\"<\"+fo+\">\"+e+\"</\"+fo+\">\"},Ro=function(e){e.write(go(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t},Co=function(){try{ao=new ActiveXObject(\"htmlfile\")}catch(e){}var e,t,i;Co=\"undefined\"!=typeof document?document.domain&&ao?Ro(ao):(t=Eo(\"iframe\"),i=\"java\"+fo+\":\",t.style.display=\"none\",_o.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(go(\"document.F=Object\")),e.close(),e.F):Ro(ao);for(var n=ho.length;n--;)delete Co[mo][ho[n]];return Co()};po[To]=!0;var Io=Object.create||function(e,t){var i;return null!==e?(So[mo]=lo(e),i=new So,So[mo]=null,i[To]=e):i=Co(),void 0===t?i:uo.f(i,t)},vo=te,yo=mi,Ao=Error,bo=d(\"\".replace),wo=String(Ao(\"zxcasd\").stack),Oo=/\\n\\s*at [^:]*:[^\\n]*/,No=Oo.test(wo),Do=B,Po=!n((function(){var e=Error(\"a\");return!(\"stack\"in e)||(Object.defineProperty(e,\"stack\",Do(1,7)),7!==e.stack)})),Lo=mi,ko=function(e,t){if(No&&\"string\"==typeof e&&!Ao.prepareStackTrace)for(;t--;)e=bo(e,Oo,\"\");return e},Mo=Po,Uo=Error.captureStackTrace,xo={},Vo=xo,Fo=ht(\"iterator\"),Bo=Array.prototype,jo=function(e){return void 0!==e&&(Vo.Array===e||Bo[Fo]===e)},Go=pn,Wo=ke,Ho=Y,Ko=xo,Yo=ht(\"iterator\"),qo=function(e){if(!Ho(e))return Wo(e,Yo)||Wo(e,\"@@iterator\")||Ko[Go(e)]},zo=L,Jo=De,Xo=ii,Qo=be,Zo=qo,$o=TypeError,es=function(e,t){var i=arguments.length<2?Zo(e):t;if(Jo(i))return Xo(zo(i,e));throw $o(Qo(e)+\" is not iterable\")},ts=L,is=ii,ns=ke,rs=function(e,t,i){var n,r;is(e);try{if(!(n=ns(e,\"return\"))){if(\"throw\"===t)throw i;return i}n=ts(n,e)}catch(e){r=!0,n=e}if(\"throw\"===t)throw i;if(r)throw n;return is(n),i},os=Xt,ss=L,as=ii,cs=be,ds=jo,ls=Gi,us=l,hs=es,ps=qo,_s=rs,Es=TypeError,ms=function(e,t){this.stopped=e,this.result=t},fs=ms.prototype,Ts=function(e,t,i){var n,r,o,s,a,c,d,l=i&&i.that,u=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_RECORD),p=!(!i||!i.IS_ITERATOR),_=!(!i||!i.INTERRUPTED),E=os(t,l),m=function(e){return n&&_s(n,\"normal\",e),new ms(!0,e)},f=function(e){return u?(as(e),_?E(e[0],e[1],m):E(e[0],e[1])):_?E(e,m):E(e)};if(h)n=e.iterator;else if(p)n=e;else{if(!(r=ps(e)))throw Es(cs(e)+\" is not iterable\");if(ds(r)){for(o=0,s=ls(e);s>o;o++)if((a=f(e[o]))&&us(fs,a))return a;return new ms(!1)}n=hs(e,r)}for(c=h?e.next:n.next;!(d=ss(c,n)).done;){try{a=f(d.value)}catch(e){_s(n,\"throw\",e)}if(\"object\"==typeof a&&a&&us(fs,a))return a}return new ms(!1)},Ss=mn,gs=wi,Rs=l,Cs=Sr,Is=wr,vs=function(e,t,i){for(var n=zr(t),r=Xr.f,o=Jr.f,s=0;s<n.length;s++){var a=n[s];qr(e,a)||i&&qr(i,a)||r(e,a,o(t,a))}},ys=Io,As=mi,bs=B,ws=function(e,t){vo(t)&&\"cause\"in t&&yo(e,\"cause\",t.cause)},Os=function(e,t,i,n){Mo&&(Uo?Uo(e,t):Lo(e,\"stack\",ko(i,n)))},Ns=Ts,Ds=function(e,t){return void 0===e?arguments.length<2?\"\":t:Ss(e)},Ps=ht(\"toStringTag\"),Ls=Error,ks=[].push,Ms=function(e,t){var i,n=Rs(Us,this);Is?i=Is(Ls(),n?Cs(this):Us):(i=n?this:ys(Us),As(i,Ps,\"Error\")),void 0!==t&&As(i,\"message\",Ds(t)),Os(i,Ms,i.stack,1),arguments.length>2&&ws(i,arguments[2]);var r=[];return Ns(e,ks,{that:r}),As(i,\"errors\",r),i};Is?Is(Ms,Ls):vs(Ms,Ls,{name:!0});var Us=Ms.prototype=ys(Ls.prototype,{constructor:bs(1,Ms),message:bs(1,\"\"),name:bs(1,\"AggregateError\")});gs({global:!0,constructor:!0,arity:2},{AggregateError:Ms});var xs,Vs,Fs,Bs=w,js=h.WeakMap,Gs=Bs(js)&&/native code/.test(String(js)),Ws=h,Hs=te,Ks=mi,Ys=Ze,qs=He,zs=lr,Js=Nr,Xs=\"Object already initialized\",Qs=Ws.TypeError,Zs=Ws.WeakMap;if(Gs||qs.state){var $s=qs.state||(qs.state=new Zs);$s.get=$s.get,$s.has=$s.has,$s.set=$s.set,xs=function(e,t){if($s.has(e))throw Qs(Xs);return t.facade=e,$s.set(e,t),t},Vs=function(e){return $s.get(e)||{}},Fs=function(e){return $s.has(e)}}else{var ea=zs(\"state\");Js[ea]=!0,xs=function(e,t){if(Ys(e,ea))throw Qs(Xs);return t.facade=e,Ks(e,ea,t),t},Vs=function(e){return Ys(e,ea)?e[ea]:{}},Fs=function(e){return Ys(e,ea)}}var ta,ia,na,ra={set:xs,get:Vs,has:Fs,enforce:function(e){return Fs(e)?Vs(e):xs(e,{})},getterFor:function(e){return function(t){var i;if(!Hs(t)||(i=Vs(t)).type!==e)throw Qs(\"Incompatible receiver, \"+e+\" required\");return i}}},oa=N,sa=Ze,aa=Function.prototype,ca=oa&&Object.getOwnPropertyDescriptor,da=sa(aa,\"name\"),la={EXISTS:da,PROPER:da&&\"something\"===function(){}.name,CONFIGURABLE:da&&(!oa||oa&&ca(aa,\"name\").configurable)},ua=mi,ha=function(e,t,i,n){return n&&n.enumerable?e[t]=i:ua(e,t,i),e},pa=n,_a=w,Ea=te,ma=Io,fa=Sr,Ta=ha,Sa=ht(\"iterator\"),ga=!1;[].keys&&(\"next\"in(na=[].keys())?(ia=fa(fa(na)))!==Object.prototype&&(ta=ia):ga=!0);var Ra=!Ea(ta)||pa((function(){var e={};return ta[Sa].call(e)!==e}));_a((ta=Ra?{}:ma(ta))[Sa])||Ta(ta,Sa,(function(){return this}));var Ca={IteratorPrototype:ta,BUGGY_SAFARI_ITERATORS:ga},Ia=pn,va=sn?{}.toString:function(){return\"[object \"+Ia(this)+\"]\"},ya=sn,Aa=Qt.f,ba=mi,wa=Ze,Oa=va,Na=ht(\"toStringTag\"),Da=function(e,t,i,n){if(e){var r=i?e:e.prototype;wa(r,Na)||Aa(r,Na,{configurable:!0,value:t}),n&&!ya&&ba(r,\"toString\",Oa)}},Pa=Ca.IteratorPrototype,La=Io,ka=B,Ma=Da,Ua=xo,xa=function(){return this},Va=function(e,t,i,n){var r=t+\" Iterator\";return e.prototype=La(Pa,{next:ka(+!n,i)}),Ma(e,r,!1,!0),Ua[r]=xa,e},Fa=wi,Ba=L,ja=la,Ga=Va,Wa=Sr,Ha=Da,Ka=ha,Ya=xo,qa=Ca,za=ja.PROPER,Ja=qa.BUGGY_SAFARI_ITERATORS,Xa=ht(\"iterator\"),Qa=\"keys\",Za=\"values\",$a=\"entries\",ec=function(){return this},tc=function(e,t,i,n,r,o,s){Ga(i,t,n);var a,c,d,l=function(e){if(e===r&&E)return E;if(!Ja&&e in p)return p[e];switch(e){case Qa:case Za:case $a:return function(){return new i(this,e)}}return function(){return new i(this)}},u=t+\" Iterator\",h=!1,p=e.prototype,_=p[Xa]||p[\"@@iterator\"]||r&&p[r],E=!Ja&&_||l(r),m=\"Array\"==t&&p.entries||_;if(m&&(a=Wa(m.call(new e)))!==Object.prototype&&a.next&&(Ha(a,u,!0,!0),Ya[u]=ec),za&&r==Za&&_&&_.name!==Za&&(h=!0,E=function(){return Ba(_,this)}),r)if(c={values:l(Za),keys:o?E:l(Qa),entries:l($a)},s)for(d in c)(Ja||h||!(d in p))&&Ka(p,d,c[d]);else Fa({target:t,proto:!0,forced:Ja||h},c);return s&&p[Xa]!==E&&Ka(p,Xa,E,{name:r}),Ya[t]=E,c},ic=function(e,t){return{value:e,done:t}},nc=Z,rc=xo,oc=ra;Qt.f;var sc=tc,ac=ic,cc=\"Array Iterator\",dc=oc.set,lc=oc.getterFor(cc);sc(Array,\"Array\",(function(e,t){dc(this,{type:cc,target:nc(e),index:0,kind:t})}),(function(){var e=lc(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,ac(void 0,!0)):ac(\"keys\"==i?n:\"values\"==i?t[n]:[n,t[n]],!1)}),\"values\"),rc.Arguments=rc.Array;var uc=Qt,hc=function(e,t,i){return uc.f(e,t,i)},pc=ae,_c=hc,Ec=N,mc=ht(\"species\"),fc=l,Tc=TypeError,Sc=function(e,t){if(fc(t,e))return e;throw Tc(\"Incorrect invocation\")},gc=w,Rc=He,Cc=d(Function.toString);gc(Rc.inspectSource)||(Rc.inspectSource=function(e){return Cc(e)});var Ic=Rc.inspectSource,vc=d,yc=n,Ac=w,bc=pn,wc=Ic,Oc=function(){},Nc=[],Dc=ae(\"Reflect\",\"construct\"),Pc=/^\\s*(?:class|function)\\b/,Lc=vc(Pc.exec),kc=!Pc.exec(Oc),Mc=function(e){if(!Ac(e))return!1;try{return Dc(Oc,Nc,e),!0}catch(e){return!1}},Uc=function(e){if(!Ac(e))return!1;switch(bc(e)){case\"AsyncFunction\":case\"GeneratorFunction\":case\"AsyncGeneratorFunction\":return!1}try{return kc||!!Lc(Pc,wc(e))}catch(e){return!0}};Uc.sham=!0;var xc,Vc,Fc,Bc,jc=!Dc||yc((function(){var e;return Mc(Mc.call)||!Mc(Object)||!Mc((function(){e=!0}))||e}))?Uc:Mc,Gc=jc,Wc=be,Hc=TypeError,Kc=ii,Yc=function(e){if(Gc(e))return e;throw Hc(Wc(e)+\" is not a constructor\")},qc=Y,zc=ht(\"species\"),Jc=function(e,t){var i,n=Kc(e).constructor;return void 0===n||qc(i=Kc(n)[zc])?t:Yc(i)},Xc=d([].slice),Qc=TypeError,Zc=function(e,t){if(e<t)throw Qc(\"Not enough arguments\");return e},$c=/(?:ipad|iphone|ipod).*applewebkit/i.test(ce),ed=h,td=f,id=Xt,nd=w,rd=Ze,od=n,sd=co,ad=Xc,cd=At,dd=Zc,ld=$c,ud=jn,hd=ed.setImmediate,pd=ed.clearImmediate,_d=ed.process,Ed=ed.Dispatch,md=ed.Function,fd=ed.MessageChannel,Td=ed.String,Sd=0,gd={},Rd=\"onreadystatechange\";od((function(){xc=ed.location}));var Cd=function(e){if(rd(gd,e)){var t=gd[e];delete gd[e],t()}},Id=function(e){return function(){Cd(e)}},vd=function(e){Cd(e.data)},yd=function(e){ed.postMessage(Td(e),xc.protocol+\"//\"+xc.host)};hd&&pd||(hd=function(e){dd(arguments.length,1);var t=nd(e)?e:md(e),i=ad(arguments,1);return gd[++Sd]=function(){td(t,void 0,i)},Vc(Sd),Sd},pd=function(e){delete gd[e]},ud?Vc=function(e){_d.nextTick(Id(e))}:Ed&&Ed.now?Vc=function(e){Ed.now(Id(e))}:fd&&!ld?(Bc=(Fc=new fd).port2,Fc.port1.onmessage=vd,Vc=id(Bc.postMessage,Bc)):ed.addEventListener&&nd(ed.postMessage)&&!ed.importScripts&&xc&&\"file:\"!==xc.protocol&&!od(yd)?(Vc=yd,ed.addEventListener(\"message\",vd,!1)):Vc=Rd in cd(\"script\")?function(e){sd.appendChild(cd(\"script\"))[Rd]=function(){sd.removeChild(this),Cd(e)}}:function(e){setTimeout(Id(e),0)});var Ad={set:hd,clear:pd},bd=function(){this.head=null,this.tail=null};bd.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var wd,Od,Nd,Dd,Pd,Ld=bd,kd=/ipad|iphone|ipod/i.test(ce)&&\"undefined\"!=typeof Pebble,Md=/web0s(?!.*chrome)/i.test(ce),Ud=h,xd=Xt,Vd=O.f,Fd=Ad.set,Bd=Ld,jd=$c,Gd=kd,Wd=Md,Hd=jn,Kd=Ud.MutationObserver||Ud.WebKitMutationObserver,Yd=Ud.document,qd=Ud.process,zd=Ud.Promise,Jd=Vd(Ud,\"queueMicrotask\"),Xd=Jd&&Jd.value;if(!Xd){var Qd=new Bd,Zd=function(){var e,t;for(Hd&&(e=qd.domain)&&e.exit();t=Qd.get();)try{t()}catch(e){throw Qd.head&&wd(),e}e&&e.enter()};jd||Hd||Wd||!Kd||!Yd?!Gd&&zd&&zd.resolve?((Dd=zd.resolve(void 0)).constructor=zd,Pd=xd(Dd.then,Dd),wd=function(){Pd(Zd)}):Hd?wd=function(){qd.nextTick(Zd)}:(Fd=xd(Fd,Ud),wd=function(){Fd(Zd)}):(Od=!0,Nd=Yd.createTextNode(\"\"),new Kd(Zd).observe(Nd,{characterData:!0}),wd=function(){Nd.data=Od=!Od}),Xd=function(e){Qd.head||wd(),Qd.add(e)}}var $d=Xd,el=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},tl=h.Promise,il=\"object\"==typeof Deno&&Deno&&\"object\"==typeof Deno.version,nl=!il&&!jn&&\"object\"==typeof window&&\"object\"==typeof document,rl=h,ol=tl,sl=w,al=Yt,cl=Ic,dl=ht,ll=nl,ul=il,hl=Ee,pl=ol&&ol.prototype,_l=dl(\"species\"),El=!1,ml=sl(rl.PromiseRejectionEvent),fl=al(\"Promise\",(function(){var e=cl(ol),t=e!==String(ol);if(!t&&66===hl)return!0;if(!pl.catch||!pl.finally)return!0;if(!hl||hl<51||!/native code/.test(e)){var i=new ol((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((i.constructor={})[_l]=n,!(El=i.then((function(){}))instanceof n))return!0}return!t&&(ll||ul)&&!ml})),Tl={CONSTRUCTOR:fl,REJECTION_EVENT:ml,SUBCLASSING:El},Sl={},gl=De,Rl=TypeError,Cl=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw Rl(\"Bad Promise constructor\");t=e,i=n})),this.resolve=gl(t),this.reject=gl(i)};Sl.f=function(e){return new Cl(e)};var Il,vl,yl=wi,Al=jn,bl=h,wl=L,Ol=ha,Nl=Da,Dl=function(e){var t=pc(e);Ec&&t&&!t[mc]&&_c(t,mc,{configurable:!0,get:function(){return this}})},Pl=De,Ll=w,kl=te,Ml=Sc,Ul=Jc,xl=Ad.set,Vl=$d,Fl=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},Bl=el,jl=Ld,Gl=ra,Wl=tl,Hl=Tl,Kl=Sl,Yl=\"Promise\",ql=Hl.CONSTRUCTOR,zl=Hl.REJECTION_EVENT,Jl=Gl.getterFor(Yl),Xl=Gl.set,Ql=Wl&&Wl.prototype,Zl=Wl,$l=Ql,eu=bl.TypeError,tu=bl.document,iu=bl.process,nu=Kl.f,ru=nu,ou=!!(tu&&tu.createEvent&&bl.dispatchEvent),su=\"unhandledrejection\",au=function(e){var t;return!(!kl(e)||!Ll(t=e.then))&&t},cu=function(e,t){var i,n,r,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,d=e.reject,l=e.domain;try{a?(s||(2===t.rejection&&pu(t),t.rejection=1),!0===a?i=o:(l&&l.enter(),i=a(o),l&&(l.exit(),r=!0)),i===e.promise?d(eu(\"Promise-chain cycle\")):(n=au(i))?wl(n,i,c,d):c(i)):d(o)}catch(e){l&&!r&&l.exit(),d(e)}},du=function(e,t){e.notified||(e.notified=!0,Vl((function(){for(var i,n=e.reactions;i=n.get();)cu(i,e);e.notified=!1,t&&!e.rejection&&uu(e)})))},lu=function(e,t,i){var n,r;ou?((n=tu.createEvent(\"Event\")).promise=t,n.reason=i,n.initEvent(e,!1,!0),bl.dispatchEvent(n)):n={promise:t,reason:i},!zl&&(r=bl[\"on\"+e])?r(n):e===su&&Fl(\"Unhandled promise rejection\",i)},uu=function(e){wl(xl,bl,(function(){var t,i=e.facade,n=e.value;if(hu(e)&&(t=Bl((function(){Al?iu.emit(\"unhandledRejection\",n,i):lu(su,i,n)})),e.rejection=Al||hu(e)?2:1,t.error))throw t.value}))},hu=function(e){return 1!==e.rejection&&!e.parent},pu=function(e){wl(xl,bl,(function(){var t=e.facade;Al?iu.emit(\"rejectionHandled\",t):lu(\"rejectionhandled\",t,e.value)}))},_u=function(e,t,i){return function(n){e(t,n,i)}},Eu=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,du(e,!0))},mu=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw eu(\"Promise can't be resolved itself\");var n=au(t);n?Vl((function(){var i={done:!1};try{wl(n,t,_u(mu,i,e),_u(Eu,i,e))}catch(t){Eu(i,t,e)}})):(e.value=t,e.state=1,du(e,!1))}catch(t){Eu({done:!1},t,e)}}};ql&&($l=(Zl=function(e){Ml(this,$l),Pl(e),wl(Il,this);var t=Jl(this);try{e(_u(mu,t),_u(Eu,t))}catch(e){Eu(t,e)}}).prototype,(Il=function(e){Xl(this,{type:Yl,done:!1,notified:!1,parent:!1,reactions:new jl,rejection:!1,state:0,value:void 0})}).prototype=Ol($l,\"then\",(function(e,t){var i=Jl(this),n=nu(Ul(this,Zl));return i.parent=!0,n.ok=!Ll(e)||e,n.fail=Ll(t)&&t,n.domain=Al?iu.domain:void 0,0==i.state?i.reactions.add(n):Vl((function(){cu(n,i)})),n.promise})),vl=function(){var e=new Il,t=Jl(e);this.promise=e,this.resolve=_u(mu,t),this.reject=_u(Eu,t)},Kl.f=nu=function(e){return e===Zl||undefined===e?new vl(e):ru(e)}),yl({global:!0,constructor:!0,wrap:!0,forced:ql},{Promise:Zl}),Nl(Zl,Yl,!1,!0),Dl(Yl);var fu=ht(\"iterator\"),Tu=!1;try{var Su=0,gu={next:function(){return{done:!!Su++}},return:function(){Tu=!0}};gu[fu]=function(){return this},Array.from(gu,(function(){throw 2}))}catch(e){}var Ru=tl,Cu=function(e,t){if(!t&&!Tu)return!1;var i=!1;try{var n={};n[fu]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},Iu=Tl.CONSTRUCTOR||!Cu((function(e){Ru.all(e).then(void 0,(function(){}))})),vu=L,yu=De,Au=Sl,bu=el,wu=Ts;wi({target:\"Promise\",stat:!0,forced:Iu},{all:function(e){var t=this,i=Au.f(t),n=i.resolve,r=i.reject,o=bu((function(){var i=yu(t.resolve),o=[],s=0,a=1;wu(e,(function(e){var c=s++,d=!1;a++,vu(i,t,e).then((function(e){d||(d=!0,o[c]=e,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise}});var Ou=wi,Nu=Tl.CONSTRUCTOR;tl&&tl.prototype,Ou({target:\"Promise\",proto:!0,forced:Nu,real:!0},{catch:function(e){return this.then(void 0,e)}});var Du=L,Pu=De,Lu=Sl,ku=el,Mu=Ts;wi({target:\"Promise\",stat:!0,forced:Iu},{race:function(e){var t=this,i=Lu.f(t),n=i.reject,r=ku((function(){var r=Pu(t.resolve);Mu(e,(function(e){Du(r,t,e).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}});var Uu=L,xu=Sl;wi({target:\"Promise\",stat:!0,forced:Tl.CONSTRUCTOR},{reject:function(e){var t=xu.f(this);return Uu(t.reject,void 0,e),t.promise}});var Vu=ii,Fu=te,Bu=Sl,ju=function(e,t){if(Vu(e),Fu(t)&&t.constructor===e)return t;var i=Bu.f(e);return(0,i.resolve)(t),i.promise},Gu=wi,Wu=tl,Hu=Tl.CONSTRUCTOR,Ku=ju,Yu=ae(\"Promise\"),qu=!Hu;Gu({target:\"Promise\",stat:!0,forced:true},{resolve:function(e){return Ku(qu&&this===Yu?Wu:this,e)}});var zu=L,Ju=De,Xu=Sl,Qu=el,Zu=Ts;wi({target:\"Promise\",stat:!0,forced:Iu},{allSettled:function(e){var t=this,i=Xu.f(t),n=i.resolve,r=i.reject,o=Qu((function(){var i=Ju(t.resolve),r=[],o=0,s=1;Zu(e,(function(e){var a=o++,c=!1;s++,zu(i,t,e).then((function(e){c||(c=!0,r[a]={status:\"fulfilled\",value:e},--s||n(r))}),(function(e){c||(c=!0,r[a]={status:\"rejected\",reason:e},--s||n(r))}))})),--s||n(r)}));return o.error&&r(o.value),i.promise}});var $u=L,eh=De,th=ae,ih=Sl,nh=el,rh=Ts,oh=\"No one promise resolved\";wi({target:\"Promise\",stat:!0,forced:Iu},{any:function(e){var t=this,i=th(\"AggregateError\"),n=ih.f(t),r=n.resolve,o=n.reject,s=nh((function(){var n=eh(t.resolve),s=[],a=0,c=1,d=!1;rh(e,(function(e){var l=a++,u=!1;c++,$u(n,t,e).then((function(e){u||d||(d=!0,r(e))}),(function(e){u||d||(u=!0,s[l]=e,--c||o(new i(s,oh)))}))})),--c||o(new i(s,oh))}));return s.error&&o(s.value),n.promise}});var sh=wi,ah=tl,ch=n,dh=ae,lh=w,uh=Jc,hh=ju,ph=ah&&ah.prototype;sh({target:\"Promise\",proto:!0,real:!0,forced:!!ah&&ch((function(){ph.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=uh(this,dh(\"Promise\")),i=lh(e);return this.then(i?function(i){return hh(t,e()).then((function(){return i}))}:e,i?function(i){return hh(t,e()).then((function(){throw i}))}:e)}});var _h=d,Eh=Li,mh=mn,fh=J,Th=_h(\"\".charAt),Sh=_h(\"\".charCodeAt),gh=_h(\"\".slice),Rh=function(e){return function(t,i){var n,r,o=mh(fh(t)),s=Eh(i),a=o.length;return s<0||s>=a?e?\"\":void 0:(n=Sh(o,s))<55296||n>56319||s+1===a||(r=Sh(o,s+1))<56320||r>57343?e?Th(o,s):n:e?gh(o,s,s+2):r-56320+(n-55296<<10)+65536}},Ch={codeAt:Rh(!1),charAt:Rh(!0)},Ih=Ch.charAt,vh=mn,yh=ra,Ah=tc,bh=ic,wh=\"String Iterator\",Oh=yh.set,Nh=yh.getterFor(wh);Ah(String,\"String\",(function(e){Oh(this,{type:wh,string:vh(e),index:0})}),(function(){var e,t=Nh(this),i=t.string,n=t.index;return n>=i.length?bh(void 0,!0):(e=Ih(i,n),t.index+=e.length,bh(e,!1))}));var Dh=ie.Promise,Ph={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Lh=h,kh=pn,Mh=mi,Uh=xo,xh=ht(\"toStringTag\");for(var Vh in Ph){var Fh=Lh[Vh],Bh=Fh&&Fh.prototype;Bh&&kh(Bh)!==xh&&Mh(Bh,xh,Vh),Uh[Vh]=Uh.Array}var jh=Dh,Gh=i(jh);const Wh=ir;function Hh(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const n=function(e){if(\"object\"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((i=>{if(\"require\"===i||\"advanced\"===i||\"mediaSource\"===i)return;const n=\"object\"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&\"number\"==typeof n.exact&&(n.min=n.max=n.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):\"deviceId\"===t?\"sourceId\":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};\"number\"==typeof n.ideal?(e[r(\"min\",i)]=n.ideal,t.optional.push(e),e={},e[r(\"max\",i)]=n.ideal,t.optional.push(e)):(e[r(\"\",i)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&\"number\"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r(\"\",i)]=n.exact):[\"min\",\"max\"].forEach((e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&\"object\"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,\"autoGainControl\",\"googAutoGainControl\"),t(e.audio,\"noiseSuppression\",\"googNoiseSuppression\"),e.audio=n(e.audio)}if(e&&\"object\"==typeof e.video){let o=e.video.facingMode;o=o&&(\"object\"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&(\"user\"===o.exact||\"environment\"===o.exact||\"user\"===o.ideal||\"environment\"===o.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,\"environment\"===o.exact||\"environment\"===o.ideal?t=[\"back\",\"rear\"]:\"user\"!==o.exact&&\"user\"!==o.ideal||(t=[\"front\"]),t)return i.mediaDevices.enumerateDevices().then((i=>{let s=(i=i.filter((e=>\"videoinput\"===e.kind))).find((e=>t.some((t=>{var i;return Dn(i=e.label.toLowerCase()).call(i,t)}))));return!s&&i.length&&Dn(t).call(t,\"back\")&&(s=i[i.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=n(e.video),Wh(\"chrome: \"+JSON.stringify(e)),r(e)}))}e.video=n(e.video)}return Wh(\"chrome: \"+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:\"NotAllowedError\",PermissionDismissedError:\"NotAllowedError\",InvalidStateError:\"NotAllowedError\",DevicesNotFoundError:\"NotFoundError\",ConstraintNotSatisfiedError:\"OverconstrainedError\",TrackStartError:\"NotReadableError\",MediaDeviceFailedDueToShutdown:\"NotAllowedError\",MediaDeviceKillSwitchOn:\"NotAllowedError\",TabCaptureError:\"AbortError\",ScreenCaptureError:\"AbortError\",DeviceCaptureError:\"AbortError\"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&\": \")+this.message}}};if(i.getUserMedia=function(e,t,n){r(e,(e=>{i.webkitGetUserMedia(e,t,(e=>{n&&n(o(e))}))}))}.bind(i),i.mediaDevices.getUserMedia){const e=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException(\"\",\"NotFoundError\");return e}),(e=>Gh.reject(o(e))))))}}}function Kh(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Yh(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&!(\"ontrack\"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,\"ontrack\",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener(\"track\",this._ontrack),this.addEventListener(\"track\",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener(\"addtrack\",(i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.track.id)):{track:i.track};const r=new Event(\"track\");r.track=i.track,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.id)):{track:i};const r=new Event(\"track\");r.track=i,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener(\"addstream\",this._ontrackpoly)),t.apply(this,arguments)}}else $n(e,\"track\",(e=>(e.transceiver||Object.defineProperty(e,\"transceiver\",{value:{receiver:e.receiver}}),e)))}function qh(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&!(\"getSenders\"in e.RTCPeerConnection.prototype)&&\"createDTMFSender\"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(\"audio\"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if(\"object\"==typeof e&&e.RTCPeerConnection&&\"getSenders\"in e.RTCPeerConnection.prototype&&\"createDTMFSender\"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!(\"dtmf\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,\"dtmf\",{get(){return void 0===this._dtmf&&(\"audio\"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function zh(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;if(arguments.length>0&&\"function\"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||\"function\"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach((e=>{const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"}[e.type]||e.type};e.names().forEach((t=>{i[t]=e.stat(t)})),t[i.id]=i})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const n=function(e){i(o(r(e)))};return t.apply(this,[n,e])}return new Gh(((e,i)=>{t.apply(this,[function(t){e(o(r(t)))},i])})).then(i,n)}}function Jh(e){if(!(\"object\"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!(\"getStats\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ar(t,e.track,!0)))}}if(!(\"getStats\"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),$n(e,\"track\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ar(t,e.track,!1)))}}if(!(\"getStats\"in e.RTCRtpSender.prototype)||!(\"getStats\"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,i,n;return this.getSenders().forEach((i=>{i.track===e&&(t?n=!0:t=i)})),this.getReceivers().forEach((t=>(t.track===e&&(i?n=!0:i=t),t.track===e))),n||t&&i?Gh.reject(new DOMException(\"There are more than one sender or receiver for the track.\",\"InvalidAccessError\")):t?t.getStats():i?i.getStats():Gh.reject(new DOMException(\"There is no sender or receiver for the track.\",\"InvalidAccessError\"))}return t.apply(this,arguments)}}function Xh(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")}));const t=this.getSenders();i.apply(this,arguments);const n=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const i=this._shimmedLocalStreams[t].indexOf(e);-1!==i&&this._shimmedLocalStreams[t].splice(i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function Qh(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Xh(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")})),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,\"g\"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((e=>e===t)))throw new DOMException(\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\",\"NotSupportedError\");const r=this.getSenders().find((e=>e.track===t));if(r)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[i.id];if(o)o.addTrack(t),Gh.resolve().then((()=>{this.dispatchEvent(new Event(\"negotiationneeded\"))}));else{const n=new e.MediaStream([t]);this._streams[i.id]=n,this._reverseStreams[n.id]=i,this.addStream(n)}return this.getSenders().find((e=>e.track===t))},[\"createOffer\",\"createAnswer\"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&\"function\"==typeof arguments[0]?i.apply(this,[t=>{const i=o(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=n[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,\"g\"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,\"localDescription\");Object.defineProperty(e.RTCPeerConnection.prototype,\"localDescription\",{get(){const e=a.get.apply(this);return\"\"===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");if(!e._pc)throw new DOMException(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\",\"TypeError\");if(!(e._pc===this))throw new DOMException(\"Sender was not created by this connection.\",\"InvalidAccessError\");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((i=>{this._streams[i].getTracks().find((t=>e.track===t))&&(t=this._streams[i])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event(\"negotiationneeded\")))}}function Zh(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function $h(e,t){$n(e,\"negotiationneeded\",(e=>{const i=e.target;if(!(t.version<72||i.getConfiguration&&\"plan-b\"===i.getConfiguration().sdpSemantics)||\"stable\"===i.signalingState)return e}))}var ep=Object.freeze({__proto__:null,fixNegotiationNeeded:$h,shimAddTrackRemoveTrack:Qh,shimAddTrackRemoveTrackWithNative:Xh,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(\"function\"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((t=>{const n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error(\"shimGetDisplayMedia: getSourceId argument is not a function\"))},shimGetSendersWithDtmf:qh,shimGetStats:zh,shimGetUserMedia:Hh,shimMediaStream:Kh,shimOnTrack:Yh,shimPeerConnection:Zh,shimSenderReceiverGetStats:Jh});function tp(e,t){const i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){nr(\"navigator.getUserMedia\",\"navigator.mediaDevices.getUserMedia\"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&\"autoGainControl\"in i.mediaDevices.getSupportedConstraints())){const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return\"object\"==typeof i&&\"object\"==typeof i.audio&&(i=JSON.parse(JSON.stringify(i)),e(i.audio,\"autoGainControl\",\"mozAutoGainControl\"),e(i.audio,\"noiseSuppression\",\"mozNoiseSuppression\")),t(i)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,\"mozAutoGainControl\",\"autoGainControl\"),e(i,\"mozNoiseSuppression\",\"noiseSuppression\"),i}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(i){return\"audio\"===this.kind&&\"object\"==typeof i&&(i=JSON.parse(JSON.stringify(i)),e(i,\"autoGainControl\",\"mozAutoGainControl\"),e(i,\"noiseSuppression\",\"mozNoiseSuppression\")),t.apply(this,[i])}}}}function ip(e){\"object\"==typeof e&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get(){return{receiver:this.receiver}}})}function np(e,t){if(\"object\"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const i={inboundrtp:\"inbound-rtp\",outboundrtp:\"outbound-rtp\",candidatepair:\"candidate-pair\",localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return n.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=i[e.type]||e.type}))}catch(t){if(\"TypeError\"!==t.name)throw t;e.forEach(((t,n)=>{e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,o)}}function rp(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\"getStats\"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Gh.resolve(new Map)}}function op(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\"getStats\"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),$n(e,\"track\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function sp(e){e.RTCPeerConnection&&!(\"removeStream\"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){nr(\"removeStream\",\"removeTrack\"),this.getSenders().forEach((t=>{var i;t.track&&Dn(i=e.getTracks()).call(i,t.track)&&this.removeTrack(t)}))})}function ap(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function cp(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const i=e.length>0;i&&e.forEach((e=>{if(\"rid\"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError(\"Invalid RID value provided.\")}if(\"scaleResolutionDownBy\"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError(\"scale_resolution_down_by must be >= 1.0\");if(\"maxFramerate\"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError(\"max_framerate must be >= 0.0\")}));const n=t.apply(this,arguments);if(i){const{sender:t}=n,i=t.getParameters();(!(\"encodings\"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(i).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return n})}function dp(e){if(\"object\"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return\"encodings\"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function lp(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Gh.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function up(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Gh.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var hp=Object.freeze({__proto__:null,shimAddTransceiver:cp,shimCreateAnswer:up,shimCreateOffer:lp,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException(\"getDisplayMedia without video constraints is undefined\");return e.name=\"NotFoundError\",e.code=8,Gh.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})},shimGetParameters:dp,shimGetUserMedia:tp,shimOnTrack:ip,shimPeerConnection:np,shimRTCDataChannel:ap,shimReceiverGetStats:op,shimRemoveStream:sp,shimSenderGetStats:rp});function pp(e){if(\"object\"==typeof e&&e.RTCPeerConnection){if(\"getLocalStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!(\"addStream\"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i;this._localStreams||(this._localStreams=[]),Dn(i=this._localStreams).call(i,e)||this._localStreams.push(e),e.getAudioTracks().forEach((i=>t.call(this,i,e))),e.getVideoTracks().forEach((i=>t.call(this,i,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n&&n.forEach((e=>{var t;this._localStreams?Dn(t=this._localStreams).call(t,e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}\"removeStream\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach((e=>{Dn(i).call(i,e.track)&&this.removeTrack(e)}))})}}function _p(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&(\"getRemoteStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!(\"onaddstream\"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,\"onaddstream\",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener(\"addstream\",this._onaddstream),this.removeEventListener(\"track\",this._onaddstreampoly)),this.addEventListener(\"addstream\",this._onaddstream=e),this.addEventListener(\"track\",this._onaddstreampoly=e=>{e.streams.forEach((e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),Dn(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const i=new Event(\"addstream\");i.stream=e,this.dispatchEvent(i)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener(\"track\",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const i=new Event(\"addstream\");i.stream=t,e.dispatchEvent(i)}))}),t.apply(e,arguments)}}}function Ep(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Gh.resolve()):r},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Gh.resolve()):r};let a=function(e,t,i){const n=r.apply(this,[e]);return i?(n.then(t,i),Gh.resolve()):n};t.setLocalDescription=a,a=function(e,t,i){const n=o.apply(this,[e]);return i?(n.then(t,i),Gh.resolve()):n},t.setRemoteDescription=a,a=function(e,t,i){const n=s.apply(this,[e]);return i?(n.then(t,i),Gh.resolve()):n},t.addIceCandidate=a}function mp(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,i=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>i(fp(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function fp(e){return e&&void 0!==e.video?Object.assign({},e,{video:or(e.video)}):e}function Tp(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty(\"urls\")&&n.hasOwnProperty(\"url\")?(nr(\"RTCIceServer.url\",\"RTCIceServer.urls\"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,\"generateCertificate\"in t&&Object.defineProperty(e.RTCPeerConnection,\"generateCertificate\",{get:()=>t.generateCertificate})}function Sp(e){\"object\"==typeof e&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get(){return{receiver:this.receiver}}})}function gp(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>\"audio\"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?\"sendrecv\"===t.direction?t.setDirection?t.setDirection(\"sendonly\"):t.direction=\"sendonly\":\"recvonly\"===t.direction&&(t.setDirection?t.setDirection(\"inactive\"):t.direction=\"inactive\"):!0!==e.offerToReceiveAudio||t||this.addTransceiver(\"audio\",{direction:\"recvonly\"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=this.getTransceivers().find((e=>\"video\"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&i?\"sendrecv\"===i.direction?i.setDirection?i.setDirection(\"sendonly\"):i.direction=\"sendonly\":\"recvonly\"===i.direction&&(i.setDirection?i.setDirection(\"inactive\"):i.direction=\"inactive\"):!0!==e.offerToReceiveVideo||i||this.addTransceiver(\"video\",{direction:\"recvonly\"})}return t.apply(this,arguments)}}function Rp(e){\"object\"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Cp=Object.freeze({__proto__:null,shimAudioContext:Rp,shimCallbacksAPI:Ep,shimConstraints:fp,shimCreateOfferLegacy:gp,shimGetUserMedia:mp,shimLocalStreamsAPI:pp,shimRTCIceServerUrls:Tp,shimRemoteStreamsAPI:_p,shimTrackEventTransceiver:Sp}),Ip=\"\\t\\n\\v\\f\\r Â áââââââââââââ¯âã\\u2028\\u2029\\ufeff\",vp=J,yp=mn,Ap=Ip,bp=d(\"\".replace),wp=RegExp(\"^[\"+Ap+\"]+\"),Op=RegExp(\"(^|[^\"+Ap+\"])[\"+Ap+\"]+$\"),Np=function(e){return function(t){var i=yp(vp(t));return 1&e&&(i=bp(i,wp,\"\")),2&e&&(i=bp(i,Op,\"$1\")),i}},Dp={start:Np(1),end:Np(2),trim:Np(3)},Pp=la.PROPER,Lp=n,kp=Ip,Mp=Dp.trim;wi({target:\"String\",proto:!0,forced:function(e){return Lp((function(){return!!kp[e]()||\"âÂá \"!==\"âÂá \"[e]()||Pp&&kp[e].name!==e}))}(\"trim\")},{trim:function(){return Mp(this)}});var Up=Xi(\"String\").trim,xp=l,Vp=Up,Fp=String.prototype,Bp=function(e){var t=e.trim;return\"string\"==typeof e||e===Fp||xp(Fp,e)&&t===Fp.trim?Vp:t},jp=i(Bp),Gp={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split(\"\\n\").map((e=>e.trim()))},t.splitSections=function(e){return e.split(\"\\nm=\").map(((e,t)=>(t>0?\"m=\"+e:e).trim()+\"\\r\\n\"))},t.getDescription=function(e){const i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){const i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter((e=>0===e.indexOf(i)))},t.parseCandidate=function(e){let t;t=0===e.indexOf(\"a=candidate:\")?e.substring(12).split(\" \"):e.substring(10).split(\" \");const i={foundation:t[0],component:{1:\"rtp\",2:\"rtcp\"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case\"raddr\":i.relatedAddress=t[e+1];break;case\"rport\":i.relatedPort=parseInt(t[e+1],10);break;case\"tcptype\":i.tcpType=t[e+1];break;case\"ufrag\":i.ufrag=t[e+1],i.usernameFragment=t[e+1];break;default:void 0===i[t[e]]&&(i[t[e]]=t[e+1])}return i},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const i=e.component;\"rtp\"===i?t.push(1):\"rtcp\"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const n=e.type;return t.push(\"typ\"),t.push(n),\"host\"!==n&&e.relatedAddress&&e.relatedPort&&(t.push(\"raddr\"),t.push(e.relatedAddress),t.push(\"rport\"),t.push(e.relatedPort)),e.tcpType&&\"tcp\"===e.protocol.toLowerCase()&&(t.push(\"tcptype\"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push(\"ufrag\"),t.push(e.usernameFragment||e.ufrag)),\"candidate:\"+t.join(\" \")},t.parseIceOptions=function(e){return e.substring(14).split(\" \")},t.parseRtpMap=function(e){let t=e.substring(9).split(\" \");const i={payloadType:parseInt(t.shift(),10)};return t=t[0].split(\"/\"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const i=e.channels||e.numChannels||1;return\"a=rtpmap:\"+t+\" \"+e.name+\"/\"+e.clockRate+(1!==i?\"/\"+i:\"\")+\"\\r\\n\"},t.parseExtmap=function(e){const t=e.substring(9).split(\" \");return{id:parseInt(t[0],10),direction:t[0].indexOf(\"/\")>0?t[0].split(\"/\")[1]:\"sendrecv\",uri:t[1],attributes:t.slice(2).join(\" \")}},t.writeExtmap=function(e){return\"a=extmap:\"+(e.id||e.preferredId)+(e.direction&&\"sendrecv\"!==e.direction?\"/\"+e.direction:\"\")+\" \"+e.uri+(e.attributes?\" \"+e.attributes:\"\")+\"\\r\\n\"},t.parseFmtp=function(e){const t={};let i;const n=e.substring(e.indexOf(\" \")+1).split(\";\");for(let e=0;e<n.length;e++)i=n[e].trim().split(\"=\"),t[i[0].trim()]=i[1];return t},t.writeFmtp=function(e){let t=\"\",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const n=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?n.push(t+\"=\"+e.parameters[t]):n.push(t)})),t+=\"a=fmtp:\"+i+\" \"+n.join(\";\")+\"\\r\\n\"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(\" \")+1).split(\" \");return{type:t.shift(),parameter:t.join(\" \")}},t.writeRtcpFb=function(e){let t=\"\",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+=\"a=rtcp-fb:\"+i+\" \"+e.type+(e.parameter&&e.parameter.length?\" \"+e.parameter:\"\")+\"\\r\\n\"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(\" \"),i={ssrc:parseInt(e.substring(7,t),10)},n=e.indexOf(\":\",t);return n>-1?(i.attribute=e.substring(t+1,n),i.value=e.substring(n+1)):i.attribute=e.substring(t+1),i},t.parseSsrcGroup=function(e){const t=e.substring(13).split(\" \");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const i=t.matchPrefix(e,\"a=mid:\")[0];if(i)return i.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(\" \");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,i){return{role:\"auto\",fingerprints:t.matchPrefix(e+i,\"a=fingerprint:\").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let i=\"a=setup:\"+t+\"\\r\\n\";return e.fingerprints.forEach((e=>{i+=\"a=fingerprint:\"+e.algorithm+\" \"+e.value+\"\\r\\n\"})),i},t.parseCryptoLine=function(e){const t=e.substring(9).split(\" \");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return\"a=crypto:\"+e.tag+\" \"+e.cryptoSuite+\" \"+(\"object\"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?\" \"+e.sessionParams.join(\" \"):\"\")+\"\\r\\n\"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf(\"inline:\"))return null;const t=e.substring(7).split(\"|\");return{keyMethod:\"inline\",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(\":\")[0]:void 0,mkiLength:t[2]?t[2].split(\":\")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+\":\"+e.keySalt+(e.lifeTime?\"|\"+e.lifeTime:\"\")+(e.mkiValue&&e.mkiLength?\"|\"+e.mkiValue+\":\"+e.mkiLength:\"\")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,\"a=crypto:\").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){const n=t.matchPrefix(e+i,\"a=ice-ufrag:\")[0],r=t.matchPrefix(e+i,\"a=ice-pwd:\")[0];return n&&r?{usernameFragment:n.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t=\"a=ice-ufrag:\"+e.usernameFragment+\"\\r\\na=ice-pwd:\"+e.password+\"\\r\\n\";return e.iceLite&&(t+=\"a=ice-lite\\r\\n\"),t},t.parseRtpParameters=function(e){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(\" \");i.profile=n[2];for(let r=3;r<n.length;r++){const o=n[r],s=t.matchPrefix(e,\"a=rtpmap:\"+o+\" \")[0];if(s){const n=t.parseRtpMap(s),r=t.matchPrefix(e,\"a=fmtp:\"+o+\" \");switch(n.parameters=r.length?t.parseFmtp(r[0]):{},n.rtcpFeedback=t.matchPrefix(e,\"a=rtcp-fb:\"+o+\" \").map(t.parseRtcpFb),i.codecs.push(n),n.name.toUpperCase()){case\"RED\":case\"ULPFEC\":i.fecMechanisms.push(n.name.toUpperCase())}}}t.matchPrefix(e,\"a=extmap:\").forEach((e=>{i.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,\"a=rtcp-fb:* \").map(t.parseRtcpFb);return i.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),i},t.writeRtpDescription=function(e,i){let n=\"\";n+=\"m=\"+e+\" \",n+=i.codecs.length>0?\"9\":\"0\",n+=\" \"+(i.profile||\"UDP/TLS/RTP/SAVPF\")+\" \",n+=i.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(\" \")+\"\\r\\n\",n+=\"c=IN IP4 0.0.0.0\\r\\n\",n+=\"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\",i.codecs.forEach((e=>{n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));let r=0;return i.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+=\"a=maxptime:\"+r+\"\\r\\n\"),i.headerExtensions&&i.headerExtensions.forEach((e=>{n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){const i=[],n=t.parseRtpParameters(e),r=-1!==n.fecMechanisms.indexOf(\"RED\"),o=-1!==n.fecMechanisms.indexOf(\"ULPFEC\"),s=t.matchPrefix(e,\"a=ssrc:\").map((e=>t.parseSsrcMedia(e))).filter((e=>\"cname\"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const d=t.matchPrefix(e,\"a=ssrc-group:FID\").map((e=>e.substring(17).split(\" \").map((e=>parseInt(e,10)))));d.length>0&&d[0].length>1&&d[0][0]===a&&(c=d[0][1]),n.codecs.forEach((e=>{if(\"RTX\"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),i.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?\"red+ulpfec\":\"red\"},i.push(t))}})),0===i.length&&a&&i.push({ssrc:a});let l=t.matchPrefix(e,\"b=\");return l.length&&(l=0===l[0].indexOf(\"b=TIAS:\")?parseInt(l[0].substring(7),10):0===l[0].indexOf(\"b=AS:\")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,i.forEach((e=>{e.maxBitrate=l}))),i},t.parseRtcpParameters=function(e){const i={},n=t.matchPrefix(e,\"a=ssrc:\").map((e=>t.parseSsrcMedia(e))).filter((e=>\"cname\"===e.attribute))[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);const r=t.matchPrefix(e,\"a=rtcp-rsize\");i.reducedSize=r.length>0,i.compound=0===r.length;const o=t.matchPrefix(e,\"a=rtcp-mux\");return i.mux=o.length>0,i},t.writeRtcpParameters=function(e){let t=\"\";return e.reducedSize&&(t+=\"a=rtcp-rsize\\r\\n\"),e.mux&&(t+=\"a=rtcp-mux\\r\\n\"),void 0!==e.ssrc&&e.cname&&(t+=\"a=ssrc:\"+e.ssrc+\" cname:\"+e.cname+\"\\r\\n\"),t},t.parseMsid=function(e){let i;const n=t.matchPrefix(e,\"a=msid:\");if(1===n.length)return i=n[0].substring(7).split(\" \"),{stream:i[0],track:i[1]};const r=t.matchPrefix(e,\"a=ssrc:\").map((e=>t.parseSsrcMedia(e))).filter((e=>\"msid\"===e.attribute));return r.length>0?(i=r[0].value.split(\" \"),{stream:i[0],track:i[1]}):void 0},t.parseSctpDescription=function(e){const i=t.parseMLine(e),n=t.matchPrefix(e,\"a=max-message-size:\");let r;n.length>0&&(r=parseInt(n[0].substring(19),10)),isNaN(r)&&(r=65536);const o=t.matchPrefix(e,\"a=sctp-port:\");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:i.fmt,maxMessageSize:r};const s=t.matchPrefix(e,\"a=sctpmap:\");if(s.length>0){const e=s[0].substring(10).split(\" \");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let i=[];return i=\"DTLS/SCTP\"!==e.protocol?[\"m=\"+e.kind+\" 9 \"+e.protocol+\" \"+t.protocol+\"\\r\\n\",\"c=IN IP4 0.0.0.0\\r\\n\",\"a=sctp-port:\"+t.port+\"\\r\\n\"]:[\"m=\"+e.kind+\" 9 \"+e.protocol+\" \"+t.port+\"\\r\\n\",\"c=IN IP4 0.0.0.0\\r\\n\",\"a=sctpmap:\"+t.port+\" \"+t.protocol+\" 65535\\r\\n\"],void 0!==t.maxMessageSize&&i.push(\"a=max-message-size:\"+t.maxMessageSize+\"\\r\\n\"),i.join(\"\")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,i,n){let r;const o=void 0!==i?i:2;r=e||t.generateSessionId();return\"v=0\\r\\no=\"+(n||\"thisisadapterortc\")+\" \"+r+\" \"+o+\" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\"},t.getDirection=function(e,i){const n=t.splitLines(e);for(let e=0;e<n.length;e++)switch(n[e]){case\"a=sendrecv\":case\"a=sendonly\":case\"a=recvonly\":case\"a=inactive\":return n[e].substring(2)}return i?t.getDirection(i):\"sendrecv\"},t.getKind=function(e){return t.splitLines(e)[0].split(\" \")[0].substring(2)},t.isRejected=function(e){return\"0\"===e.split(\" \",2)[1]},t.parseMLine=function(e){const i=t.splitLines(e)[0].substring(2).split(\" \");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(\" \")}},t.parseOLine=function(e){const i=t.matchPrefix(e,\"o=\")[0].substring(2).split(\" \");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if(\"string\"!=typeof e||0===e.length)return!1;const i=t.splitLines(e);for(let e=0;e<i.length;e++)if(i[e].length<2||\"=\"!==i[e].charAt(1))return!1;return!0},e.exports=t}(Gp);var Wp=Gp.exports,Hp=i(Wp),Kp=e({__proto__:null,default:Hp},[Wp]);function Yp(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&\"foundation\"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if(\"object\"==typeof e&&e.candidate&&0===e.candidate.indexOf(\"a=\")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const i=new t(e),n=Hp.parseCandidate(e.candidate),r=Object.assign(i,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,$n(e,\"icecandidate\",(t=>(t.candidate&&Object.defineProperty(t,\"candidate\",{value:new e.RTCIceCandidate(t.candidate),writable:\"false\"}),t)))}function qp(e){!e.RTCIceCandidate||e.RTCIceCandidate&&\"relayProtocol\"in e.RTCIceCandidate.prototype||$n(e,\"icecandidate\",(e=>{if(e.candidate){const t=Hp.parseCandidate(e.candidate.candidate);\"relay\"===t.type&&(e.candidate.relayProtocol={0:\"tls\",1:\"tcp\",2:\"udp\"}[t.priority>>24])}return e}))}function zp(e,t){if(!e.RTCPeerConnection)return;\"sctp\"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,\"sctp\",{get(){return void 0===this._sctp?null:this._sctp}});const i=function(e){if(!e||!e.sdp)return!1;const t=Hp.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Hp.parseMLine(e);return t&&\"application\"===t.kind&&-1!==t.protocol.indexOf(\"SCTP\")}))},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);if(null===t||t.length<2)return-1;const i=parseInt(t[1],10);return i!=i?-1:i},r=function(e){let i=65536;return\"firefox\"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){let n=65536;\"firefox\"===t.browser&&57===t.version&&(n=65535);const r=Hp.matchPrefix(e.sdp,\"a=max-message-size:\");return r.length>0?n=parseInt(r[0].substr(19),10):\"firefox\"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,\"chrome\"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();\"plan-b\"===e&&Object.defineProperty(this,\"sctp\",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const e=n(arguments[0]),t=r(e),i=o(arguments[0],e);let s;s=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);const a={};Object.defineProperty(a,\"maxMessageSize\",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function Jp(e){if(!e.RTCPeerConnection||!(\"createDataChannel\"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const n=arguments[0],r=n.length||n.size||n.byteLength;if(\"open\"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError(\"Message too large (can send a maximum of \"+t.sctp.maxMessageSize+\" bytes)\");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},$n(e,\"datachannel\",(e=>(t(e.channel,e.target),e)))}function Xp(e){if(!e.RTCPeerConnection||\"connectionState\"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,\"connectionState\",{get(){return{completed:\"connected\",checking:\"connecting\"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"onconnectionstatechange\",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener(\"connectionstatechange\",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener(\"connectionstatechange\",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),[\"setLocalDescription\",\"setRemoteDescription\"].forEach((e=>{const i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event(\"connectionstatechange\",e);t.dispatchEvent(i)}return e},this.addEventListener(\"iceconnectionstatechange\",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}function Qp(e,t){if(!e.RTCPeerConnection)return;if(\"chrome\"===t.browser&&t.version>=71)return;if(\"safari\"===t.browser&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf(\"\\na=extmap-allow-mixed\")){const i=t.sdp.split(\"\\n\").filter((e=>\"a=extmap-allow-mixed\"!==jp(e).call(e))).join(\"\\n\");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return i.apply(this,arguments)}}function Zp(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(\"chrome\"===t.browser&&t.version<78||\"firefox\"===t.browser&&t.version<68||\"safari\"===t.browser)&&arguments[0]&&\"\"===arguments[0].candidate?Gh.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Gh.resolve())})}function $p(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.setLocalDescription;i&&0!==i.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if(\"object\"!=typeof e||e.type&&e.sdp)return i.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case\"stable\":case\"have-local-offer\":case\"have-remote-pranswer\":e.type=\"offer\";break;default:e.type=\"answer\"}if(e.sdp||\"offer\"!==e.type&&\"answer\"!==e.type)return i.apply(this,[e]);return(\"offer\"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>i.apply(this,[e])))})}var e_=Object.freeze({__proto__:null,removeExtmapAllowMixed:Qp,shimAddIceCandidateNullOrEmpty:Zp,shimConnectionState:Xp,shimMaxMessageSize:zp,shimParameterlessSetLocalDescription:$p,shimRTCIceCandidate:Yp,shimRTCIceCandidateRelayProtocol:qp,shimSendThrowTypeError:Jp});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=ir,n=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser=\"Not a browser.\",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser=\"firefox\",t.version=Zn(i.userAgent,/Firefox\\/(\\d+)\\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser=\"chrome\",t.version=Zn(i.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return t.browser=\"Not a supported browser.\",t;t.browser=\"safari\",t.version=Zn(i.userAgent,/AppleWebKit\\/(\\d+)\\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&\"currentDirection\"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:n,commonShim:e_,extractVersion:Zn,disableLog:er,disableWarnings:tr,sdp:Kp};switch(n.browser){case\"chrome\":if(!ep||!Zh||!t.shimChrome)return i(\"Chrome shim is not included in this adapter release.\"),r;if(null===n.version)return i(\"Chrome shim can not determine version, not shimming.\"),r;i(\"adapter.js shimming chrome.\"),r.browserShim=ep,Zp(e,n),$p(e),Hh(e,n),Kh(e),Zh(e,n),Yh(e),Qh(e,n),qh(e),zh(e),Jh(e),$h(e,n),Yp(e),qp(e),Xp(e),zp(e,n),Jp(e),Qp(e,n);break;case\"firefox\":if(!hp||!np||!t.shimFirefox)return i(\"Firefox shim is not included in this adapter release.\"),r;i(\"adapter.js shimming firefox.\"),r.browserShim=hp,Zp(e,n),$p(e),tp(e,n),np(e,n),ip(e),sp(e),rp(e),op(e),ap(e),cp(e),dp(e),lp(e),up(e),Yp(e),Xp(e),zp(e,n),Jp(e);break;case\"safari\":if(!Cp||!t.shimSafari)return i(\"Safari shim is not included in this adapter release.\"),r;i(\"adapter.js shimming safari.\"),r.browserShim=Cp,Zp(e,n),$p(e),Tp(e),gp(e),Ep(e),pp(e),_p(e),Sp(e),mp(e),Rp(e),Yp(e),qp(e),zp(e,n),Jp(e),Qp(e,n);break;default:i(\"Unsupported browser!\")}}({window:\"undefined\"==typeof window?void 0:window});var t_=Xi(\"Array\").keys,i_=pn,n_=Ze,r_=l,o_=t_,s_=Array.prototype,a_={DOMTokenList:!0,NodeList:!0},c_=function(e){var t=e.keys;return e===s_||r_(s_,e)&&t===s_.keys||n_(a_,i_(e))?o_:t},d_=i(c_),l_=be,u_=TypeError,h_=Ct,p_=Qt,__=B,E_=function(e,t,i){var n=h_(t);n in e?p_.f(e,n,__(0,i)):e[n]=i},m_=xi,f_=Gi,T_=E_,S_=Array,g_=Math.max,R_=function(e,t,i){for(var n=f_(e),r=m_(t,n),o=m_(void 0===i?n:i,n),s=S_(g_(o-r,0)),a=0;r<o;r++,a++)T_(s,a,e[r]);return s.length=a,s},C_=R_,I_=Math.floor,v_=function(e,t){var i=e.length,n=I_(i/2);return i<8?y_(e,t):A_(e,v_(C_(e,0,n),t),v_(C_(e,n),t),t)},y_=function(e,t){for(var i,n,r=e.length,o=1;o<r;){for(n=o,i=e[o];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==o++&&(e[n]=i)}return e},A_=function(e,t,i,n){for(var r=t.length,o=i.length,s=0,a=0;s<r||a<o;)e[s+a]=s<r&&a<o?n(t[s],i[a])<=0?t[s++]:i[a++]:s<r?t[s++]:i[a++];return e},b_=v_,w_=ce.match(/firefox\\/(\\d+)/i),O_=!!w_&&+w_[1],N_=/MSIE|Trident/.test(ce),D_=ce.match(/AppleWebKit\\/(\\d+)\\./),P_=!!D_&&+D_[1],L_=wi,k_=d,M_=De,U_=Je,x_=Gi,V_=function(e,t){if(!delete e[t])throw u_(\"Cannot delete property \"+l_(t)+\" of \"+l_(e))},F_=mn,B_=n,j_=b_,G_=Bn,W_=O_,H_=N_,K_=Ee,Y_=P_,q_=[],z_=k_(q_.sort),J_=k_(q_.push),X_=B_((function(){q_.sort(void 0)})),Q_=B_((function(){q_.sort(null)})),Z_=G_(\"sort\"),$_=!B_((function(){if(K_)return K_<70;if(!(W_&&W_>3)){if(H_)return!0;if(Y_)return Y_<603;var e,t,i,n,r=\"\";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)q_.push({k:t+n,v:i})}for(q_.sort((function(e,t){return t.v-e.v})),n=0;n<q_.length;n++)t=q_[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return\"DGBEFHACIJK\"!==r}}));L_({target:\"Array\",proto:!0,forced:X_||!Q_||!Z_||!$_},{sort:function(e){void 0!==e&&M_(e);var t=U_(this);if($_)return void 0===e?z_(t):z_(t,e);var i,n,r=[],o=x_(t);for(n=0;n<o;n++)n in t&&J_(r,t[n]);for(j_(r,function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:F_(t)>F_(i)?1:-1}}(e)),i=x_(r),n=0;n<i;)t[n]=r[n++];for(;n<o;)V_(t,n++);return t}});var eE,tE,iE=Xi(\"Array\").sort,nE=l,rE=iE,oE=Array.prototype,sE=function(e){var t=e.sort;return e===oE||nE(oE,e)&&t===oE.sort?rE:t},aE=i(sE),cE={exports:{}};eE=cE,tE=cE.exports,function(e,t){var i=\"function\",n=\"undefined\",r=\"object\",o=\"string\",s=\"major\",a=\"model\",c=\"name\",d=\"type\",l=\"vendor\",u=\"version\",h=\"architecture\",p=\"console\",_=\"mobile\",E=\"tablet\",m=\"smarttv\",f=\"wearable\",T=\"embedded\",S=\"Amazon\",g=\"Apple\",R=\"ASUS\",C=\"BlackBerry\",I=\"Browser\",v=\"Chrome\",y=\"Firefox\",A=\"Google\",b=\"Huawei\",w=\"LG\",O=\"Microsoft\",N=\"Motorola\",D=\"Opera\",P=\"Samsung\",L=\"Sharp\",k=\"Sony\",M=\"Xiaomi\",U=\"Zebra\",x=\"Facebook\",V=\"Chromium OS\",F=\"Mac OS\",B=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},j=function(e,t){return typeof e===o&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===o)return e=e.replace(/^\\s\\s*/,\"\"),typeof t===n?e:e.substring(0,350)},H=function(e,n){for(var o,s,a,c,d,l,u=0;u<n.length&&!d;){var h=n[u],p=n[u+1];for(o=s=0;o<h.length&&!d&&h[o];)if(d=h[o++].exec(e))for(a=0;a<p.length;a++)l=d[++s],typeof(c=p[a])===r&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):t:this[c[0]]=l?c[1].call(this,l,c[2]):t:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):t):this[c]=l||t;u+=2}},K=function(e,i){for(var n in i)if(typeof i[n]===r&&i[n].length>0){for(var o=0;o<i[n].length;o++)if(j(i[n][o],e))return\"?\"===n?t:n}else if(j(i[n],e))return\"?\"===n?t:n;return e},Y={ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"},q={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[u,[c,\"Chrome\"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[u,[c,\"Edge\"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[c,u],[/opios[\\/ ]+([\\w\\.]+)/i],[u,[c,D+\" Mini\"]],[/\\bopr\\/([\\w\\.]+)/i],[u,[c,D]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[c,u],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[u,[c,\"UC\"+I]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[u,[c,\"WeChat(Win) Desktop\"]],[/micromessenger\\/([\\w\\.]+)/i],[u,[c,\"WeChat\"]],[/konqueror\\/([\\w\\.]+)/i],[u,[c,\"Konqueror\"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[u,[c,\"IE\"]],[/yabrowser\\/([\\w\\.]+)/i],[u,[c,\"Yandex\"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[c,/(.+)/,\"$1 Secure \"+I],u],[/\\bfocus\\/([\\w\\.]+)/i],[u,[c,y+\" Focus\"]],[/\\bopt\\/([\\w\\.]+)/i],[u,[c,D+\" Touch\"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[u,[c,\"Coc Coc\"]],[/dolfin\\/([\\w\\.]+)/i],[u,[c,\"Dolphin\"]],[/coast\\/([\\w\\.]+)/i],[u,[c,D+\" Coast\"]],[/miuibrowser\\/([\\w\\.]+)/i],[u,[c,\"MIUI \"+I]],[/fxios\\/([-\\w\\.]+)/i],[u,[c,y]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[c,\"360 \"+I]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[c,/(.+)/,\"$1 \"+I],u],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[c,/_/g,\" \"],u],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[c,u],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[c],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[c,x],u],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[c,u],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[u,[c,\"GSA\"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[u,[c,v+\" Headless\"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[c,v+\" WebView\"],u],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[u,[c,\"Android \"+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[c,u],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[u,[c,\"Mobile Safari\"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[u,c],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[c,[u,K,{\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[c,u],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[c,\"Netscape\"],u],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[u,[c,y+\" Reality\"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[c,u],[/(cobalt)\\/([\\w\\.]+)/i],[c,[u,/master.|lts./,\"\"]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[h,\"amd64\"]],[/(ia32(?=;))/i],[[h,G]],[/((?:i[346]|x)86)[;\\)]/i],[[h,\"ia32\"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[h,\"arm64\"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[h,\"armhf\"]],[/windows (ce|mobile); ppc;/i],[[h,\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[h,/ower/,\"\",G]],[/(sun4\\w)[;\\)]/i],[[h,\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[h,G]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[l,P],[d,E]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[a,[l,P],[d,_]],[/\\((ip(?:hone|od)[\\w ]*);/i],[a,[l,g],[d,_]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[a,[l,g],[d,E]],[/(macintosh);/i],[a,[l,g]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[a,[l,L],[d,_]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[a,[l,b],[d,E]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[a,[l,b],[d,_]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[a,/_/g,\" \"],[l,M],[d,_]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[a,/_/g,\" \"],[l,M],[d,E]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[a,[l,\"OPPO\"],[d,_]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[a,[l,\"Vivo\"],[d,_]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[a,[l,\"Realme\"],[d,_]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[a,[l,N],[d,_]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[a,[l,N],[d,E]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[l,w],[d,E]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[a,[l,w],[d,_]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[a,[l,\"Lenovo\"],[d,E]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[a,/_/g,\" \"],[l,\"Nokia\"],[d,_]],[/(pixel c)\\b/i],[a,[l,A],[d,E]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[a,[l,A],[d,_]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[a,[l,k],[d,_]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[a,\"Xperia Tablet\"],[l,k],[d,E]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[a,[l,\"OnePlus\"],[d,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[a,[l,S],[d,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[a,/(.+)/g,\"Fire Phone $1\"],[l,S],[d,_]],[/(playbook);[-\\w\\),; ]+(rim)/i],[a,l,[d,E]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[a,[l,C],[d,_]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[a,[l,R],[d,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[a,[l,R],[d,_]],[/(nexus 9)/i],[a,[l,\"HTC\"],[d,E]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[l,[a,/_/g,\" \"],[d,_]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[a,[l,\"Acer\"],[d,E]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[a,[l,\"Meizu\"],[d,_]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[l,a,[d,_]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[l,a,[d,E]],[/(surface duo)/i],[a,[l,O],[d,E]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[a,[l,\"Fairphone\"],[d,_]],[/(u304aa)/i],[a,[l,\"AT&T\"],[d,_]],[/\\bsie-(\\w*)/i],[a,[l,\"Siemens\"],[d,_]],[/\\b(rct\\w+) b/i],[a,[l,\"RCA\"],[d,E]],[/\\b(venue[\\d ]{2,7}) b/i],[a,[l,\"Dell\"],[d,E]],[/\\b(q(?:mv|ta)\\w+) b/i],[a,[l,\"Verizon\"],[d,E]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[a,[l,\"Barnes & Noble\"],[d,E]],[/\\b(tm\\d{3}\\w+) b/i],[a,[l,\"NuVision\"],[d,E]],[/\\b(k88) b/i],[a,[l,\"ZTE\"],[d,E]],[/\\b(nx\\d{3}j) b/i],[a,[l,\"ZTE\"],[d,_]],[/\\b(gen\\d{3}) b.+49h/i],[a,[l,\"Swiss\"],[d,_]],[/\\b(zur\\d{3}) b/i],[a,[l,\"Swiss\"],[d,E]],[/\\b((zeki)?tb.*\\b) b/i],[a,[l,\"Zeki\"],[d,E]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[l,\"Dragon Touch\"],a,[d,E]],[/\\b(ns-?\\w{0,9}) b/i],[a,[l,\"Insignia\"],[d,E]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[a,[l,\"NextBook\"],[d,E]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,\"Voice\"],a,[d,_]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[l,\"LvTel\"],a,[d,_]],[/\\b(ph-1) /i],[a,[l,\"Essential\"],[d,_]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[a,[l,\"Envizen\"],[d,E]],[/\\b(trio[-\\w\\. ]+) b/i],[a,[l,\"MachSpeed\"],[d,E]],[/\\btu_(1491) b/i],[a,[l,\"Rotor\"],[d,E]],[/(shield[\\w ]+) b/i],[a,[l,\"Nvidia\"],[d,E]],[/(sprint) (\\w+)/i],[l,a,[d,_]],[/(kin\\.[onetw]{3})/i],[[a,/\\./g,\" \"],[l,O],[d,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[a,[l,U],[d,E]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[a,[l,U],[d,_]],[/smart-tv.+(samsung)/i],[l,[d,m]],[/hbbtv.+maple;(\\d+)/i],[[a,/^/,\"SmartTV\"],[l,P],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[l,w],[d,m]],[/(apple) ?tv/i],[l,[a,g+\" TV\"],[d,m]],[/crkey/i],[[a,v+\"cast\"],[l,A],[d,m]],[/droid.+aft(\\w)( bui|\\))/i],[a,[l,S],[d,m]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[a,[l,L],[d,m]],[/(bravia[\\w ]+)( bui|\\))/i],[a,[l,k],[d,m]],[/(mitv-\\w{5}) bui/i],[a,[l,M],[d,m]],[/Hbbtv.*(technisat) (.*);/i],[l,a,[d,m]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[l,W],[a,W],[d,m]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[d,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,a,[d,p]],[/droid.+; (shield) bui/i],[a,[l,\"Nvidia\"],[d,p]],[/(playstation [345portablevi]+)/i],[a,[l,k],[d,p]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[a,[l,O],[d,p]],[/((pebble))app/i],[l,a,[d,f]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[a,[l,g],[d,f]],[/droid.+; (glass) \\d/i],[a,[l,A],[d,f]],[/droid.+; (wt63?0{2,3})\\)/i],[a,[l,U],[d,f]],[/(quest( 2| pro)?)/i],[a,[l,x],[d,f]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[l,[d,T]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[a,[d,_]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[a,[d,E]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[d,E]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[d,_]],[/(android[-\\w\\. ]{0,9});.+buil/i],[a,[l,\"Generic\"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[u,[c,\"EdgeHTML\"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[u,[c,\"Blink\"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i],[c,u],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[u,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,u],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[c,[u,K,Y]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[c,\"Windows\"],[u,K,Y]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/cfnetwork\\/.+darwin/i],[[u,/_/g,\".\"],[c,\"iOS\"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[c,F],[u,/_/g,\".\"]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[u,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[c,u],[/\\(bb(10);/i],[u,[c,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[u,[c,\"Symbian\"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[u,[c,y+\" OS\"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[u,[c,\"webOS\"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[u,[c,\"watchOS\"]],[/crkey\\/([\\d\\.]+)/i],[u,[c,v+\"cast\"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[c,V],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[c,u],[/(sunos) ?([\\w\\.\\d]*)/i],[[c,\"Solaris\"],u],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\\w\\.]*)/i],[c,u]]},z=function(p,m){if(typeof p===r&&(m=p,p=t),!(this instanceof z))return new z(p,m).getResult();var f=typeof e!==n&&e.navigator?e.navigator:t,T=p||(f&&f.userAgent?f.userAgent:\"\"),S=f&&f.userAgentData?f.userAgentData:t,g=m?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(q,m):q;return this.getBrowser=function(){var e={};return e[c]=t,e[u]=t,H.call(e,T,g.browser),e[s]=function(e){return typeof e===o?e.replace(/[^\\d\\.]/g,\"\").split(\".\")[0]:t}(e[u]),f&&f.brave&&typeof f.brave.isBrave==i&&(e[c]=\"Brave\"),e},this.getCPU=function(){var e={};return e[h]=t,H.call(e,T,g.cpu),e},this.getDevice=function(){var e={};return e[l]=t,e[a]=t,e[d]=t,H.call(e,T,g.device),!e[d]&&S&&S.mobile&&(e[d]=_),\"Macintosh\"==e[a]&&f&&typeof f.standalone!==n&&f.maxTouchPoints&&f.maxTouchPoints>2&&(e[a]=\"iPad\",e[d]=E),e},this.getEngine=function(){var e={};return e[c]=t,e[u]=t,H.call(e,T,g.engine),e},this.getOS=function(){var e={};return e[c]=t,e[u]=t,H.call(e,T,g.os),!e[c]&&S&&\"Unknown\"!=S.platform&&(e[c]=S.platform.replace(/chrome os/i,V).replace(/macos/i,F)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return T},this.setUA=function(e){return T=typeof e===o&&e.length>350?W(e,350):e,this},this.setUA(T),this};z.VERSION=\"0.7.34\",z.BROWSER=B([c,u,s]),z.CPU=B([h]),z.DEVICE=B([a,l,d,p,_,m,E,f,T]),z.ENGINE=z.OS=B([c,u]),eE.exports&&(tE=eE.exports=z),tE.UAParser=z;var J=typeof e!==n&&(e.jQuery||e.Zepto);if(J&&!J.ua){var X=new z;J.ua=X.getResult(),J.ua.get=function(){return X.getUA()},J.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var i in t)J.ua[i]=t[i]}}}(\"object\"==typeof window?window:t);var dE=i(cE.exports),lE=pn,uE=Ze,hE=Y,pE=xo,_E=ht(\"iterator\"),EE=Object,mE=function(e){if(hE(e))return!1;var t=EE(e);return void 0!==t[_E]||\"@@iterator\"in t||uE(pE,lE(t))},fE=i(mE),TE=h;wi({global:!0,forced:TE.globalThis!==TE},{globalThis:TE});var SE=i(h);function gE(e,t){return function(){return e.apply(t,arguments)}}const{toString:RE}=Object.prototype,{getPrototypeOf:CE}=Object,IE=(vE=Object.create(null),e=>{const t=RE.call(e);return vE[t]||(vE[t]=t.slice(8,-1).toLowerCase())});var vE;const yE=e=>(e=e.toLowerCase(),t=>IE(t)===e),AE=e=>t=>typeof t===e,{isArray:bE}=Array,wE=AE(\"undefined\");const OE=yE(\"ArrayBuffer\");const NE=AE(\"string\"),DE=AE(\"function\"),PE=AE(\"number\"),LE=e=>null!==e&&\"object\"==typeof e,kE=e=>{if(\"object\"!==IE(e))return!1;const t=CE(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||fE(e))},ME=yE(\"Date\"),UE=yE(\"File\"),xE=yE(\"Blob\"),VE=yE(\"FileList\"),FE=yE(\"URLSearchParams\");function BE(e,t){let i,n,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if(\"object\"!=typeof e&&(e=[e]),bE(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const n=r?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let s;for(i=0;i<o;i++)s=n[i],t.call(null,e[s],s,e)}}function jE(e,t){t=t.toLowerCase();const i=Object.keys(e);let n,r=i.length;for(;r-- >0;)if(n=i[r],t===n.toLowerCase())return n;return null}const GE=void 0!==SE?SE:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,WE=e=>!wE(e)&&e!==GE;const HE=(KE=\"undefined\"!=typeof Uint8Array&&CE(Uint8Array),e=>KE&&e instanceof KE);var KE;const YE=yE(\"HTMLFormElement\"),qE=(e=>{let{hasOwnProperty:t}=e;return(e,i)=>t.call(e,i)})(Object.prototype),zE=yE(\"RegExp\"),JE=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};BE(i,((i,r)=>{let o;!1!==(o=t(i,r,e))&&(n[r]=o||i)})),Object.defineProperties(e,n)},XE=\"abcdefghijklmnopqrstuvwxyz\",QE=\"0123456789\",ZE={DIGIT:QE,ALPHA:XE,ALPHA_DIGIT:XE+XE.toUpperCase()+QE};const $E=yE(\"AsyncFunction\");var em={isArray:bE,isArrayBuffer:OE,isBuffer:function(e){return null!==e&&!wE(e)&&null!==e.constructor&&!wE(e.constructor)&&DE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(\"function\"==typeof FormData&&e instanceof FormData||DE(e.append)&&(\"formdata\"===(t=IE(e))||\"object\"===t&&DE(e.toString)&&\"[object FormData]\"===e.toString()))},isArrayBufferView:function(e){let t;return t=\"undefined\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&OE(e.buffer),t},isString:NE,isNumber:PE,isBoolean:e=>!0===e||!1===e,isObject:LE,isPlainObject:kE,isUndefined:wE,isDate:ME,isFile:UE,isBlob:xE,isRegExp:zE,isFunction:DE,isStream:e=>LE(e)&&DE(e.pipe),isURLSearchParams:FE,isTypedArray:HE,isFileList:VE,forEach:BE,merge:function e(){const{caseless:t}=WE(this)&&this||{},i={},n=(n,r)=>{const o=t&&jE(i,r)||r;kE(i[o])&&kE(n)?i[o]=e(i[o],n):kE(n)?i[o]=e({},n):bE(n)?i[o]=n.slice():i[o]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&BE(arguments[e],n);return i},extend:function(e,t,i){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return BE(t,((t,n)=>{i&&DE(t)?e[n]=gE(t,i):e[n]=t}),{allOwnKeys:n}),e},trim:e=>jp(e)?jp(e).call(e):e.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\"),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,\"super\",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,n)=>{let r,o,s;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==i&&CE(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:IE,kindOfTest:yE,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return-1!==n&&n===i},toArray:e=>{if(!e)return null;if(bE(e))return e;let t=e.length;if(!PE(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const n=[];for(;null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:YE,hasOwnProperty:qE,hasOwnProp:qE,reduceDescriptors:JE,freezeMethods:e=>{JE(e,((t,i)=>{if(DE(e)&&-1!==[\"arguments\",\"caller\",\"callee\"].indexOf(i))return!1;const n=e[i];DE(n)&&(t.enumerable=!1,\"writable\"in t?t.writable=!1:t.set||(t.set=()=>{throw Error(\"Can not rewrite read-only method '\"+i+\"'\")}))}))},toObjectSet:(e,t)=>{const i={},n=e=>{e.forEach((e=>{i[e]=!0}))};return bE(e)?n(e):n(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:jE,global:GE,isContextDefined:WE,ALPHABET:ZE,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZE.ALPHA_DIGIT,i=\"\";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i},isSpecCompliantForm:function(e){return!!(e&&DE(e.append)&&\"FormData\"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,n)=>{if(LE(e)){if(t.indexOf(e)>=0)return;if(!(\"toJSON\"in e)){t[n]=e;const r=bE(e)?[]:{};return BE(e,((e,t)=>{const o=i(e,n+1);!wE(o)&&(r[t]=o)})),t[n]=void 0,r}}return e};return i(e,0)},isAsyncFn:$E,isThenable:e=>e&&(LE(e)||DE(e))&&DE(e.then)&&DE(e.catch)};function tm(e,t,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name=\"AxiosError\",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}em.inherits(tm,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:em.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const im=tm.prototype,nm={};[\"ERR_BAD_OPTION_VALUE\",\"ERR_BAD_OPTION\",\"ECONNABORTED\",\"ETIMEDOUT\",\"ERR_NETWORK\",\"ERR_FR_TOO_MANY_REDIRECTS\",\"ERR_DEPRECATED\",\"ERR_BAD_RESPONSE\",\"ERR_BAD_REQUEST\",\"ERR_CANCELED\",\"ERR_NOT_SUPPORT\",\"ERR_INVALID_URL\"].forEach((e=>{nm[e]={value:e}})),Object.defineProperties(tm,nm),Object.defineProperty(im,\"isAxiosError\",{value:!0}),tm.from=(e,t,i,n,r,o)=>{const s=Object.create(im);return em.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>\"isAxiosError\"!==e)),tm.call(s,e.message,t,i,n,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};function rm(e){return em.isPlainObject(e)||em.isArray(e)}function om(e){return em.endsWith(e,\"[]\")?e.slice(0,-2):e}function sm(e,t,i){return e?e.concat(t).map((function(e,t){return e=om(e),!i&&t?\"[\"+e+\"]\":e})).join(i?\".\":\"\"):t}const am=em.toFlatObject(em,{},null,(function(e){return/^is[A-Z]/.test(e)}));function cm(e,t,i){if(!em.isObject(e))throw new TypeError(\"target must be an object\");t=t||new FormData;const n=(i=em.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!em.isUndefined(t[e])}))).metaTokens,r=i.visitor||d,o=i.dots,s=i.indexes,a=(i.Blob||\"undefined\"!=typeof Blob&&Blob)&&em.isSpecCompliantForm(t);if(!em.isFunction(r))throw new TypeError(\"visitor must be a function\");function c(e){if(null===e)return\"\";if(em.isDate(e))return e.toISOString();if(!a&&em.isBlob(e))throw new tm(\"Blob is not supported. Use a Buffer instead.\");return em.isArrayBuffer(e)||em.isTypedArray(e)?a&&\"function\"==typeof Blob?new Blob([e]):Buffer.from(e):e}function d(e,i,r){let a=e;if(e&&!r&&\"object\"==typeof e)if(em.endsWith(i,\"{}\"))i=n?i:i.slice(0,-2),e=JSON.stringify(e);else if(em.isArray(e)&&function(e){return em.isArray(e)&&!e.some(rm)}(e)||(em.isFileList(e)||em.endsWith(i,\"[]\"))&&(a=em.toArray(e)))return i=om(i),a.forEach((function(e,n){!em.isUndefined(e)&&null!==e&&t.append(!0===s?sm([i],n,o):null===s?i:i+\"[]\",c(e))})),!1;return!!rm(e)||(t.append(sm(r,i,o),c(e)),!1)}const l=[],u=Object.assign(am,{defaultVisitor:d,convertValue:c,isVisitable:rm});if(!em.isObject(e))throw new TypeError(\"data must be an object\");return function e(i,n){if(!em.isUndefined(i)){if(-1!==l.indexOf(i))throw Error(\"Circular reference detected in \"+n.join(\".\"));l.push(i),em.forEach(i,(function(i,o){!0===(!(em.isUndefined(i)||null===i)&&r.call(t,i,em.isString(o)?jp(o).call(o):o,n,u))&&e(i,n?n.concat(o):[o])})),l.pop()}}(e),t}function dm(e){const t={\"!\":\"%21\",\"'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\",\"%00\":\"\\0\"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function lm(e,t){this._pairs=[],e&&cm(e,this,t)}const um=lm.prototype;function hm(e){return encodeURIComponent(e).replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}function pm(e,t,i){if(!t)return e;const n=i&&i.encode||hm,r=i&&i.serialize;let o;if(o=r?r(t,i):em.isURLSearchParams(t)?t.toString():new lm(t,i).toString(n),o){const t=e.indexOf(\"#\");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+o}return e}um.append=function(e,t){this._pairs.push([e,t])},um.toString=function(e){const t=e?function(t){return e.call(this,t,dm)}:dm;return this._pairs.map((function(e){return t(e[0])+\"=\"+t(e[1])}),\"\").join(\"&\")};var _m=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){em.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Em={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mm={exports:{}},fm=wi,Tm=N,Sm=Qt.f;fm({target:\"Object\",stat:!0,forced:Object.defineProperty!==Sm,sham:!Tm},{defineProperty:Sm});var gm=ie.Object,Rm=mm.exports=function(e,t,i){return gm.defineProperty(e,t,i)};gm.defineProperty.sham&&(Rm.sham=!0);var Cm=i(mm.exports),Im=R,vm=Array.isArray||function(e){return\"Array\"==Im(e)},ym=TypeError,Am=vm,bm=jc,wm=te,Om=ht(\"species\"),Nm=Array,Dm=function(e){var t;return Am(e)&&(t=e.constructor,(bm(t)&&(t===Nm||Am(t.prototype))||wm(t)&&null===(t=t[Om]))&&(t=void 0)),void 0===t?Nm:t},Pm=function(e,t){return new(Dm(e))(0===t?0:t)},Lm=n,km=Ee,Mm=ht(\"species\"),Um=function(e){return km>=51||!Lm((function(){var t=[];return(t.constructor={})[Mm]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},xm=wi,Vm=n,Fm=vm,Bm=te,jm=Je,Gm=Gi,Wm=function(e){if(e>9007199254740991)throw ym(\"Maximum allowed index exceeded\");return e},Hm=E_,Km=Pm,Ym=Um,qm=Ee,zm=ht(\"isConcatSpreadable\"),Jm=qm>=51||!Vm((function(){var e=[];return e[zm]=!1,e.concat()[0]!==e})),Xm=function(e){if(!Bm(e))return!1;var t=e[zm];return void 0!==t?!!t:Fm(e)};xm({target:\"Array\",proto:!0,arity:1,forced:!Jm||!Ym(\"concat\")},{concat:function(e){var t,i,n,r,o,s=jm(this),a=Km(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(Xm(o=-1===t?s:arguments[t]))for(r=Gm(o),Wm(c+r),i=0;i<r;i++,c++)i in o&&Hm(a,c,o[i]);else Wm(c+1),Hm(a,c++,o);return a.length=c,a}});var Qm={},Zm=R,$m=Z,ef=Or.f,tf=R_,nf=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Qm.f=function(e){return nf&&\"Window\"==Zm(e)?function(e){try{return ef(e)}catch(e){return tf(nf)}}(e):ef($m(e))};var rf={},of=ht;rf.f=of;var sf=ie,af=Ze,cf=rf,df=Qt.f,lf=function(e){var t=sf.Symbol||(sf.Symbol={});af(t,e)||df(t,e,{value:cf.f(e)})},uf=L,hf=ae,pf=ht,_f=ha,Ef=function(){var e=hf(\"Symbol\"),t=e&&e.prototype,i=t&&t.valueOf,n=pf(\"toPrimitive\");t&&!t[n]&&_f(t,n,(function(e){return uf(i,this)}),{arity:1})},mf=Xt,ff=K,Tf=Je,Sf=Gi,gf=Pm,Rf=d([].push),Cf=function(e){var t=1==e,i=2==e,n=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,d,l,u){for(var h,p,_=Tf(c),E=ff(_),m=mf(d,l),f=Sf(E),T=0,S=u||gf,g=t?S(c,f):i||s?S(c,0):void 0;f>T;T++)if((a||T in E)&&(p=m(h=E[T],T,_),e))if(t)g[T]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return T;case 2:Rf(g,h)}else switch(e){case 4:return!1;case 7:Rf(g,h)}return o?-1:n||r?r:g}},If={forEach:Cf(0),map:Cf(1),filter:Cf(2),some:Cf(3),every:Cf(4),find:Cf(5),findIndex:Cf(6),filterReject:Cf(7)},vf=wi,yf=h,Af=L,bf=d,wf=N,Of=Se,Nf=n,Df=Ze,Pf=l,Lf=ii,kf=Z,Mf=Ct,Uf=mn,xf=B,Vf=Io,Ff=eo,Bf=Or,jf=Qm,Gf=Br,Wf=O,Hf=Qt,Kf=Qr,Yf=k,qf=ha,zf=hc,Jf=Ye,Xf=Nr,Qf=nt,Zf=ht,$f=rf,eT=lf,tT=Ef,iT=Da,nT=ra,rT=If.forEach,oT=lr(\"hidden\"),sT=\"Symbol\",aT=\"prototype\",cT=nT.set,dT=nT.getterFor(sT),lT=Object[aT],uT=yf.Symbol,hT=uT&&uT[aT],pT=yf.TypeError,_T=yf.QObject,ET=Wf.f,mT=Hf.f,fT=jf.f,TT=Yf.f,ST=bf([].push),gT=Jf(\"symbols\"),RT=Jf(\"op-symbols\"),CT=Jf(\"wks\"),IT=!_T||!_T[aT]||!_T[aT].findChild,vT=wf&&Nf((function(){return 7!=Vf(mT({},\"a\",{get:function(){return mT(this,\"a\",{value:7}).a}})).a}))?function(e,t,i){var n=ET(lT,t);n&&delete lT[t],mT(e,t,i),n&&e!==lT&&mT(lT,t,n)}:mT,yT=function(e,t){var i=gT[e]=Vf(hT);return cT(i,{type:sT,tag:e,description:t}),wf||(i.description=t),i},AT=function(e,t,i){e===lT&&AT(RT,t,i),Lf(e);var n=Mf(t);return Lf(i),Df(gT,n)?(i.enumerable?(Df(e,oT)&&e[oT][n]&&(e[oT][n]=!1),i=Vf(i,{enumerable:xf(0,!1)})):(Df(e,oT)||mT(e,oT,xf(1,{})),e[oT][n]=!0),vT(e,n,i)):mT(e,n,i)},bT=function(e,t){Lf(e);var i=kf(t),n=Ff(i).concat(DT(i));return rT(n,(function(t){wf&&!Af(wT,i,t)||AT(e,t,i[t])})),e},wT=function(e){var t=Mf(e),i=Af(TT,this,t);return!(this===lT&&Df(gT,t)&&!Df(RT,t))&&(!(i||!Df(this,t)||!Df(gT,t)||Df(this,oT)&&this[oT][t])||i)},OT=function(e,t){var i=kf(e),n=Mf(t);if(i!==lT||!Df(gT,n)||Df(RT,n)){var r=ET(i,n);return!r||!Df(gT,n)||Df(i,oT)&&i[oT][n]||(r.enumerable=!0),r}},NT=function(e){var t=fT(kf(e)),i=[];return rT(t,(function(e){Df(gT,e)||Df(Xf,e)||ST(i,e)})),i},DT=function(e){var t=e===lT,i=fT(t?RT:kf(e)),n=[];return rT(i,(function(e){!Df(gT,e)||t&&!Df(lT,e)||ST(n,gT[e])})),n};Of||(qf(hT=(uT=function(){if(Pf(hT,this))throw pT(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?Uf(arguments[0]):void 0,t=Qf(e),i=function(e){this===lT&&Af(i,RT,e),Df(this,oT)&&Df(this[oT],t)&&(this[oT][t]=!1),vT(this,t,xf(1,e))};return wf&&IT&&vT(lT,t,{configurable:!0,set:i}),yT(t,e)})[aT],\"toString\",(function(){return dT(this).tag})),qf(uT,\"withoutSetter\",(function(e){return yT(Qf(e),e)})),Yf.f=wT,Hf.f=AT,Kf.f=bT,Wf.f=OT,Bf.f=jf.f=NT,Gf.f=DT,$f.f=function(e){return yT(Zf(e),e)},wf&&zf(hT,\"description\",{configurable:!0,get:function(){return dT(this).description}})),vf({global:!0,constructor:!0,wrap:!0,forced:!Of,sham:!Of},{Symbol:uT}),rT(Ff(CT),(function(e){eT(e)})),vf({target:sT,stat:!0,forced:!Of},{useSetter:function(){IT=!0},useSimple:function(){IT=!1}}),vf({target:\"Object\",stat:!0,forced:!Of,sham:!wf},{create:function(e,t){return void 0===t?Vf(e):bT(Vf(e),t)},defineProperty:AT,defineProperties:bT,getOwnPropertyDescriptor:OT}),vf({target:\"Object\",stat:!0,forced:!Of},{getOwnPropertyNames:NT}),tT(),iT(uT,sT),Xf[oT]=!0;var PT=Se&&!!Symbol.for&&!!Symbol.keyFor,LT=wi,kT=ae,MT=Ze,UT=mn,xT=Ye,VT=PT,FT=xT(\"string-to-symbol-registry\"),BT=xT(\"symbol-to-string-registry\");LT({target:\"Symbol\",stat:!0,forced:!VT},{for:function(e){var t=UT(e);if(MT(FT,t))return FT[t];var i=kT(\"Symbol\")(t);return FT[t]=i,BT[i]=t,i}});var jT=wi,GT=Ze,WT=ye,HT=be,KT=PT,YT=Ye(\"symbol-to-string-registry\");jT({target:\"Symbol\",stat:!0,forced:!KT},{keyFor:function(e){if(!WT(e))throw TypeError(HT(e)+\" is not a symbol\");if(GT(YT,e))return YT[e]}});var qT=vm,zT=w,JT=R,XT=mn,QT=d([].push),ZT=wi,$T=ae,eS=f,tS=L,iS=d,nS=n,rS=w,oS=ye,sS=Xc,aS=function(e){if(zT(e))return e;if(qT(e)){for(var t=e.length,i=[],n=0;n<t;n++){var r=e[n];\"string\"==typeof r?QT(i,r):\"number\"!=typeof r&&\"Number\"!=JT(r)&&\"String\"!=JT(r)||QT(i,XT(r))}var o=i.length,s=!0;return function(e,t){if(s)return s=!1,t;if(qT(this))return t;for(var n=0;n<o;n++)if(i[n]===e)return t}}},cS=Se,dS=String,lS=$T(\"JSON\",\"stringify\"),uS=iS(/./.exec),hS=iS(\"\".charAt),pS=iS(\"\".charCodeAt),_S=iS(\"\".replace),ES=iS(1..toString),mS=/[\\uD800-\\uDFFF]/g,fS=/^[\\uD800-\\uDBFF]$/,TS=/^[\\uDC00-\\uDFFF]$/,SS=!cS||nS((function(){var e=$T(\"Symbol\")();return\"[null]\"!=lS([e])||\"{}\"!=lS({a:e})||\"{}\"!=lS(Object(e))})),gS=nS((function(){return'\"\\\\udf06\\\\ud834\"'!==lS(\"\\udf06\\ud834\")||'\"\\\\udead\"'!==lS(\"\\udead\")})),RS=function(e,t){var i=sS(arguments),n=aS(t);if(rS(n)||void 0!==e&&!oS(e))return i[1]=function(e,t){if(rS(n)&&(t=tS(n,this,dS(e),t)),!oS(t))return t},eS(lS,null,i)},CS=function(e,t,i){var n=hS(i,t-1),r=hS(i,t+1);return uS(fS,e)&&!uS(TS,r)||uS(TS,e)&&!uS(fS,n)?\"\\\\u\"+ES(pS(e,0),16):e};lS&&ZT({target:\"JSON\",stat:!0,arity:3,forced:SS||gS},{stringify:function(e,t,i){var n=sS(arguments),r=eS(SS?RS:lS,null,n);return gS&&\"string\"==typeof r?_S(r,mS,CS):r}});var IS=Br,vS=Je;wi({target:\"Object\",stat:!0,forced:!Se||n((function(){IS.f(1)}))},{getOwnPropertySymbols:function(e){var t=IS.f;return t?t(vS(e)):[]}}),lf(\"asyncIterator\"),lf(\"hasInstance\"),lf(\"isConcatSpreadable\"),lf(\"iterator\"),lf(\"match\"),lf(\"matchAll\"),lf(\"replace\"),lf(\"search\"),lf(\"species\"),lf(\"split\");var yS=Ef;lf(\"toPrimitive\"),yS();var AS=ae,bS=Da;lf(\"toStringTag\"),bS(AS(\"Symbol\"),\"Symbol\"),lf(\"unscopables\"),Da(h.JSON,\"JSON\",!0);var wS=ie.Symbol,OS=ht,NS=Qt.f,DS=OS(\"metadata\"),PS=Function.prototype;void 0===PS[DS]&&NS(PS,DS,{value:null}),lf(\"dispose\"),lf(\"metadata\");var LS=wS;lf(\"asyncDispose\");var kS=d,MS=ae(\"Symbol\"),US=MS.keyFor,xS=kS(MS.prototype.valueOf),VS=MS.isRegisteredSymbol||function(e){try{return void 0!==US(xS(e))}catch(e){return!1}};wi({target:\"Symbol\",stat:!0},{isRegisteredSymbol:VS});for(var FS=Ye,BS=ae,jS=d,GS=ye,WS=ht,HS=BS(\"Symbol\"),KS=HS.isWellKnownSymbol,YS=BS(\"Object\",\"getOwnPropertyNames\"),qS=jS(HS.prototype.valueOf),zS=FS(\"wks\"),JS=0,XS=YS(HS),QS=XS.length;JS<QS;JS++)try{var ZS=XS[JS];GS(HS[ZS])&&WS(ZS)}catch(e){}var $S=function(e){if(KS&&KS(e))return!0;try{for(var t=qS(e),i=0,n=YS(zS),r=n.length;i<r;i++)if(zS[n[i]]==t)return!0}catch(e){}return!1};wi({target:\"Symbol\",stat:!0,forced:!0},{isWellKnownSymbol:$S}),lf(\"matcher\"),lf(\"observable\"),wi({target:\"Symbol\",stat:!0,name:\"isRegisteredSymbol\"},{isRegistered:VS}),wi({target:\"Symbol\",stat:!0,name:\"isWellKnownSymbol\",forced:!0},{isWellKnown:$S}),lf(\"metadataKey\"),lf(\"patternMatch\"),lf(\"replaceAll\");var eg=i(LS),tg=i(rf.f(\"iterator\"));function ig(e){return ig=\"function\"==typeof eg&&\"symbol\"==typeof tg?function(e){return typeof e}:function(e){return e&&\"function\"==typeof eg&&e.constructor===eg&&e!==eg.prototype?\"symbol\":typeof e},ig(e)}var ng=i(rf.f(\"toPrimitive\"));function rg(e){var t=function(e,t){if(\"object\"!==ig(e)||null===e)return e;var i=e[ng];if(void 0!==i){var n=i.call(e,t||\"default\");if(\"object\"!==ig(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===ig(t)?t:String(t)}function og(e,t,i){return(t=rg(t))in e?Cm(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var sg=n,ag=ht(\"iterator\"),cg=!sg((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,i=new URLSearchParams(\"a=1&a=2\"),n=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,i){t.delete(\"b\"),n+=i+e})),i.delete(\"a\",2),!e.toJSON||!i.has(\"a\",1)||i.has(\"a\",2)||!t.size&&true||!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[ag]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://ÑÐµÑÑ\").host||\"#%D0%B1\"!==new URL(\"http://a#Ð±\").hash||\"a1c3\"!==n||\"x\"!==new URL(\"http://x\",void 0).host})),dg=ha,lg=wi,ug=h,hg=L,pg=d,_g=N,Eg=cg,mg=ha,fg=hc,Tg=function(e,t,i){for(var n in t)i&&i.unsafe&&e[n]?e[n]=t[n]:dg(e,n,t[n],i);return e},Sg=Da,gg=Va,Rg=ra,Cg=Sc,Ig=w,vg=Ze,yg=Xt,Ag=pn,bg=ii,wg=te,Og=mn,Ng=Io,Dg=B,Pg=es,Lg=qo,kg=Zc,Mg=b_,Ug=ht(\"iterator\"),xg=\"URLSearchParams\",Vg=xg+\"Iterator\",Fg=Rg.set,Bg=Rg.getterFor(xg),jg=Rg.getterFor(Vg),Gg=Object.getOwnPropertyDescriptor,Wg=function(e){if(!_g)return ug[e];var t=Gg(ug,e);return t&&t.value},Hg=Wg(\"fetch\"),Kg=Wg(\"Request\"),Yg=Wg(\"Headers\"),qg=Kg&&Kg.prototype,zg=Yg&&Yg.prototype,Jg=ug.RegExp,Xg=ug.TypeError,Qg=ug.decodeURIComponent,Zg=ug.encodeURIComponent,$g=pg(\"\".charAt),eR=pg([].join),tR=pg([].push),iR=pg(\"\".replace),nR=pg([].shift),rR=pg([].splice),oR=pg(\"\".split),sR=pg(\"\".slice),aR=/\\+/g,cR=Array(4),dR=function(e){return cR[e-1]||(cR[e-1]=Jg(\"((?:%[\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},lR=function(e){try{return Qg(e)}catch(t){return e}},uR=function(e){var t=iR(e,aR,\" \"),i=4;try{return Qg(t)}catch(e){for(;i;)t=iR(t,dR(i--),lR);return t}},hR=/[!'()~]|%20/g,pR={\"!\":\"%21\",\"'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},_R=function(e){return pR[e]},ER=function(e){return iR(Zg(e),hR,_R)},mR=gg((function(e,t){Fg(this,{type:Vg,iterator:Pg(Bg(e).entries),kind:t})}),\"Iterator\",(function(){var e=jg(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value=\"keys\"===t?n.key:\"values\"===t?n.value:[n.key,n.value]),i}),!0),fR=function(e){this.entries=[],this.url=null,void 0!==e&&(wg(e)?this.parseObject(e):this.parseQuery(\"string\"==typeof e?\"?\"===$g(e,0)?sR(e,1):e:Og(e)))};fR.prototype={type:xg,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,r,o,s,a,c=Lg(e);if(c)for(i=(t=Pg(e,c)).next;!(n=hg(i,t)).done;){if(o=(r=Pg(bg(n.value))).next,(s=hg(o,r)).done||(a=hg(o,r)).done||!hg(o,r).done)throw Xg(\"Expected sequence with length 2\");tR(this.entries,{key:Og(s.value),value:Og(a.value)})}else for(var d in e)vg(e,d)&&tR(this.entries,{key:d,value:Og(e[d])})},parseQuery:function(e){if(e)for(var t,i,n=oR(e,\"&\"),r=0;r<n.length;)(t=n[r++]).length&&(i=oR(t,\"=\"),tR(this.entries,{key:uR(nR(i)),value:uR(eR(i,\"=\"))}))},serialize:function(){for(var e,t=this.entries,i=[],n=0;n<t.length;)e=t[n++],tR(i,ER(e.key)+\"=\"+ER(e.value));return eR(i,\"&\")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var TR=function(){Cg(this,SR);var e=Fg(this,new fR(arguments.length>0?arguments[0]:void 0));_g||(this.size=e.entries.length)},SR=TR.prototype;if(Tg(SR,{append:function(e,t){var i=Bg(this);kg(arguments.length,2),tR(i.entries,{key:Og(e),value:Og(t)}),_g||this.length++,i.updateURL()},delete:function(e){for(var t=Bg(this),i=kg(arguments.length,1),n=t.entries,r=Og(e),o=i<2?void 0:arguments[1],s=void 0===o?o:Og(o),a=0;a<n.length;){var c=n[a];if(c.key!==r||void 0!==s&&c.value!==s)a++;else if(rR(n,a,1),void 0!==s)break}_g||(this.size=n.length),t.updateURL()},get:function(e){var t=Bg(this).entries;kg(arguments.length,1);for(var i=Og(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){var t=Bg(this).entries;kg(arguments.length,1);for(var i=Og(e),n=[],r=0;r<t.length;r++)t[r].key===i&&tR(n,t[r].value);return n},has:function(e){for(var t=Bg(this).entries,i=kg(arguments.length,1),n=Og(e),r=i<2?void 0:arguments[1],o=void 0===r?r:Og(r),s=0;s<t.length;){var a=t[s++];if(a.key===n&&(void 0===o||a.value===o))return!0}return!1},set:function(e,t){var i=Bg(this);kg(arguments.length,1);for(var n,r=i.entries,o=!1,s=Og(e),a=Og(t),c=0;c<r.length;c++)(n=r[c]).key===s&&(o?rR(r,c--,1):(o=!0,n.value=a));o||tR(r,{key:s,value:a}),_g||(this.size=r.length),i.updateURL()},sort:function(){var e=Bg(this);Mg(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,i=Bg(this).entries,n=yg(e,arguments.length>1?arguments[1]:void 0),r=0;r<i.length;)n((t=i[r++]).value,t.key,this)},keys:function(){return new mR(this,\"keys\")},values:function(){return new mR(this,\"values\")},entries:function(){return new mR(this,\"entries\")}},{enumerable:!0}),mg(SR,Ug,SR.entries,{name:\"entries\"}),mg(SR,\"toString\",(function(){return Bg(this).serialize()}),{enumerable:!0}),_g&&fg(SR,\"size\",{get:function(){return Bg(this).entries.length},configurable:!0,enumerable:!0}),Sg(TR,xg),lg({global:!0,constructor:!0,forced:!Eg},{URLSearchParams:TR}),!Eg&&Ig(Yg)){var gR=pg(zg.has),RR=pg(zg.set),CR=function(e){if(wg(e)){var t,i=e.body;if(Ag(i)===xg)return t=e.headers?new Yg(e.headers):new Yg,gR(t,\"content-type\")||RR(t,\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),Ng(e,{body:Dg(0,Og(i)),headers:Dg(0,t)})}return e};if(Ig(Hg)&&lg({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Hg(e,arguments.length>1?CR(arguments[1]):{})}}),Ig(Kg)){var IR=function(e){return Cg(this,qg),new Kg(e,arguments.length>1?CR(arguments[1]):{})};qg.constructor=IR,IR.prototype=qg,lg({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:IR})}}var vR={URLSearchParams:TR,getState:Bg},yR=i(ie.URLSearchParams),AR={isBrowser:!0,classes:{URLSearchParams:void 0!==yR?yR:lm,FormData:\"undefined\"!=typeof FormData?FormData:null,Blob:\"undefined\"!=typeof Blob?Blob:null},protocols:[\"http\",\"https\",\"file\",\"blob\",\"url\",\"data\"]};const bR=\"undefined\"!=typeof window&&\"undefined\"!=typeof document,wR=(OR=\"undefined\"!=typeof navigator&&navigator.product,bR&&[\"ReactNative\",\"NativeScript\",\"NS\"].indexOf(OR)<0);var OR;const NR=\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&\"function\"==typeof self.importScripts;function DR(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function PR(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?DR(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DR(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var LR=PR(PR({},Object.freeze({__proto__:null,hasBrowserEnv:bR,hasStandardBrowserEnv:wR,hasStandardBrowserWebWorkerEnv:NR})),AR);var kR=ii,MR=L,UR=Ze,xR=l,VR=function(){var e=kR(this),t=\"\";return e.hasIndices&&(t+=\"d\"),e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.unicodeSets&&(t+=\"v\"),e.sticky&&(t+=\"y\"),t},FR=RegExp.prototype,BR=function(e){var t=e.flags;return void 0!==t||\"flags\"in FR||UR(e,\"flags\")||!xR(FR,e)?t:MR(VR,e)},jR=Ch.charAt,GR=L,WR=ii,HR=w,KR=R,YR=/./.exec,qR=TypeError,zR=wi,JR=L,XR=v,QR=Va,ZR=ic,$R=J,eC=Bi,tC=mn,iC=ii,nC=Y,rC=R,oC=tn,sC=BR,aC=ke,cC=n,dC=Jc,lC=function(e,t,i){return t+(i?jR(e,t).length:1)},uC=function(e,t){var i=e.exec;if(HR(i)){var n=GR(i,e,t);return null!==n&&WR(n),n}if(\"RegExp\"===KR(e))return GR(YR,e,t);throw qR(\"RegExp#exec called on incompatible receiver\")},hC=ra,pC=ht(\"matchAll\"),_C=\"RegExp String\",EC=_C+\" Iterator\",mC=hC.set,fC=hC.getterFor(EC),TC=TypeError,SC=XR(\"\".indexOf),gC=XR(\"\".matchAll),RC=!!gC&&!cC((function(){gC(\"a\",/./)})),CC=QR((function(e,t,i,n){mC(this,{type:EC,regexp:e,string:t,global:i,unicode:n,done:!1})}),_C,(function(){var e=fC(this);if(e.done)return ZR(void 0,!0);var t=e.regexp,i=e.string,n=uC(t,i);return null===n?(e.done=!0,ZR(void 0,!0)):e.global?(\"\"===tC(n[0])&&(t.lastIndex=lC(i,eC(t.lastIndex),e.unicode)),ZR(n,!1)):(e.done=!0,ZR(n,!1))})),IC=function(e){var t,i,n,r=iC(this),o=tC(e),s=dC(r,RegExp),a=tC(sC(r));return t=new s(s===RegExp?r.source:r,a),i=!!~SC(a,\"g\"),n=!!~SC(a,\"u\"),t.lastIndex=eC(r.lastIndex),new CC(t,o,i,n)};zR({target:\"String\",proto:!0,forced:RC},{matchAll:function(e){var t,i,n,r,o=$R(this);if(nC(e)){if(RC)return gC(o,e)}else{if(oC(e)&&(t=tC($R(sC(e))),!~SC(t,\"g\")))throw TC(\"`.matchAll` does not allow non-global regexes\");if(RC)return gC(o,e);if(void 0===(n=aC(e,pC))&&\"RegExp\"==rC(e)&&(n=IC),n)return JR(n,e,o)}return i=tC(o),r=new RegExp(e,\"g\"),JR(IC,r,i)}});var vC=Xi(\"String\").matchAll,yC=l,AC=vC,bC=String.prototype,wC=function(e){var t=e.matchAll;return\"string\"==typeof e||e===bC||yC(bC,e)&&t===bC.matchAll?AC:t},OC=i(wC);function NC(e){function t(e,i,n,r){let o=e[r++];if(\"__proto__\"===o)return!0;const s=Number.isFinite(+o),a=r>=e.length;if(o=!o&&em.isArray(n)?n.length:o,a)return em.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!s;n[o]&&em.isObject(n[o])||(n[o]=[]);return t(e,i,n[o],r)&&em.isArray(n[o])&&(n[o]=function(e){const t={},i=Object.keys(e);let n;const r=i.length;let o;for(n=0;n<r;n++)o=i[n],t[o]=e[o];return t}(n[o])),!s}if(em.isFormData(e)&&em.isFunction(e.entries)){const i={};return em.forEachEntry(e,((e,n)=>{t(function(e){return OC(em).call(em,/\\w+|\\[(\\w*)]/g,e).map((e=>\"[]\"===e[0]?\"\":e[1]||e[0]))}(e),n,i,0)})),i}return null}const DC={transitional:Em,adapter:[\"xhr\",\"http\"],transformRequest:[function(e,t){const i=t.getContentType()||\"\",n=i.indexOf(\"application/json\")>-1,r=em.isObject(e);r&&em.isHTMLForm(e)&&(e=new FormData(e));if(em.isFormData(e))return n?JSON.stringify(NC(e)):e;if(em.isArrayBuffer(e)||em.isBuffer(e)||em.isStream(e)||em.isFile(e)||em.isBlob(e))return e;if(em.isArrayBufferView(e))return e.buffer;if(em.isURLSearchParams(e))return t.setContentType(\"application/x-www-form-urlencoded;charset=utf-8\",!1),e.toString();let o;if(r){if(i.indexOf(\"application/x-www-form-urlencoded\")>-1)return function(e,t){return cm(e,new LR.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,n){return LR.isNode&&em.isBuffer(e)?(this.append(t,e.toString(\"base64\")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=em.isFileList(e))||i.indexOf(\"multipart/form-data\")>-1){const t=this.env&&this.env.FormData;return cm(o?{\"files[]\":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType(\"application/json\",!1),function(e,t,i){if(em.isString(e))try{return(t||JSON.parse)(e),jp(em).call(em,e)}catch(e){if(\"SyntaxError\"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||DC.transitional,i=t&&t.forcedJSONParsing,n=\"json\"===this.responseType;if(e&&em.isString(e)&&(i&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(i){if(\"SyntaxError\"===e.name)throw tm.from(e,tm.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,maxBodyLength:-1,env:{FormData:LR.classes.FormData,Blob:LR.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":void 0}}};em.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\"],(e=>{DC.headers[e]={}}));var PC=DC;const LC=em.toObjectSet([\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"]);const kC=Symbol(\"internals\");function MC(e){var t;return e&&jp(t=String(e)).call(t).toLowerCase()}function UC(e){return!1===e||null==e?e:em.isArray(e)?e.map(UC):String(e)}function xC(e,t,i,n,r){return em.isFunction(n)?n.call(this,t,i):(r&&(t=i),em.isString(t)?em.isString(n)?-1!==t.indexOf(n):em.isRegExp(n)?n.test(t):void 0:void 0)}class VC{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function r(e,t,i){const r=MC(t);if(!r)throw new Error(\"header name must be a non-empty string\");const o=em.findKey(n,r);(!o||void 0===n[o]||!0===i||void 0===i&&!1!==n[o])&&(n[o||t]=UC(e))}const o=(e,t)=>em.forEach(e,((e,i)=>r(e,i,t)));var s;return em.isPlainObject(e)||e instanceof this.constructor?o(e,t):em.isString(e)&&(e=jp(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(jp(s=e).call(s))?o((e=>{const t={};let i,n,r;return e&&e.split(\"\\n\").forEach((function(e){var o,s;r=e.indexOf(\":\"),i=jp(o=e.substring(0,r)).call(o).toLowerCase(),n=jp(s=e.substring(r+1)).call(s),!i||t[i]&&LC[i]||(\"set-cookie\"===i?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+\", \"+n:n)})),t})(e),t):null!=e&&r(t,e,i),this}get(e,t){if(e=MC(e)){const i=em.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}(e);if(em.isFunction(t))return t.call(this,e,i);if(em.isRegExp(t))return t.exec(e);throw new TypeError(\"parser must be boolean|regexp|function\")}}}has(e,t){if(e=MC(e)){const i=em.findKey(this,e);return!(!i||void 0===this[i]||t&&!xC(0,this[i],i,t))}return!1}delete(e,t){const i=this;let n=!1;function r(e){if(e=MC(e)){const r=em.findKey(i,e);!r||t&&!xC(0,i[r],r,t)||(delete i[r],n=!0)}}return em.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const r=t[i];e&&!xC(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,i={};return em.forEach(this,((n,r)=>{var o;const s=em.findKey(i,r);if(s)return t[s]=UC(n),void delete t[r];const a=e?function(e){return jp(e).call(e).toLowerCase().replace(/([a-z\\d])(\\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(r):jp(o=String(r)).call(o);a!==r&&delete t[r],t[a]=UC(n),i[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return em.forEach(this,((i,n)=>{null!=i&&!1!==i&&(t[n]=e&&em.isArray(i)?i.join(\", \"):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,i]=e;return t+\": \"+i})).join(\"\\n\")}get[Symbol.toStringTag](){return\"AxiosHeaders\"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[kC]=this[kC]={accessors:{}}).accessors,i=this.prototype;function n(e){const n=MC(e);t[n]||(!function(e,t){const i=em.toCamelCase(\" \"+t);[\"get\",\"set\",\"has\"].forEach((n=>{Object.defineProperty(e,n+i,{value:function(e,i,r){return this[n].call(this,t,e,i,r)},configurable:!0})}))}(i,e),t[n]=!0)}return em.isArray(e)?e.forEach(n):n(e),this}}VC.accessor([\"Content-Type\",\"Content-Length\",\"Accept\",\"Accept-Encoding\",\"User-Agent\",\"Authorization\"]),em.reduceDescriptors(VC.prototype,((e,t)=>{let{value:i}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(e){this[n]=e}}})),em.freezeMethods(VC);var FC=VC;function BC(e,t){const i=this||PC,n=t||i,r=FC.from(n.headers);let o=n.data;return em.forEach(e,(function(e){o=e.call(i,o,r.normalize(),t?t.status:void 0)})),r.normalize(),o}function jC(e){return!(!e||!e.__CANCEL__)}function GC(e,t,i){tm.call(this,null==e?\"canceled\":e,tm.ERR_CANCELED,t,i),this.name=\"CanceledError\"}em.inherits(GC,tm,{__CANCEL__:!0});var WC=LR.hasStandardBrowserEnv?{write(e,t,i,n,r,o){const s=[e+\"=\"+encodeURIComponent(t)];em.isNumber(i)&&s.push(\"expires=\"+new Date(i).toGMTString()),em.isString(n)&&s.push(\"path=\"+n),em.isString(r)&&s.push(\"domain=\"+r),!0===o&&s.push(\"secure\"),document.cookie=s.join(\"; \")},read(e){const t=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+e+\")=([^;]*)\"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,\"\",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function HC(e,t){return e&&!function(e){return/^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(e)}(t)?function(e,t){return t?e.replace(/\\/?\\/$/,\"\")+\"/\"+t.replace(/^\\/+/,\"\"):e}(e,t):t}var KC=LR.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement(\"a\");let i;function n(i){let n=i;return e&&(t.setAttribute(\"href\",n),n=t.href),t.setAttribute(\"href\",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,\"\"):\"\",host:t.host,search:t.search?t.search.replace(/^\\?/,\"\"):\"\",hash:t.hash?t.hash.replace(/^#/,\"\"):\"\",hostname:t.hostname,port:t.port,pathname:\"/\"===t.pathname.charAt(0)?t.pathname:\"/\"+t.pathname}}return i=n(window.location.href),function(e){const t=em.isString(e)?n(e):e;return t.protocol===i.protocol&&t.host===i.host}}():function(){return!0};function YC(e,t){let i=0;const n=function(e,t){e=e||10;const i=new Array(e),n=new Array(e);let r,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),d=n[s];r||(r=c),i[o]=a,n[o]=c;let l=s,u=0;for(;l!==o;)u+=i[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-r<t)return;const h=d&&c-d;return h?Math.round(1e3*u/h):void 0}}(50,250);return r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-i,c=n(a);i=o;const d={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:r};d[t?\"download\":\"upload\"]=!0,e(d)}}var qC=\"undefined\"!=typeof XMLHttpRequest&&function(e){return new Gh((function(t,i){let n=e.data;const r=FC.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function d(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener(\"abort\",o)}if(em.isFormData(n))if(LR.hasStandardBrowserEnv||LR.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if(!1!==(s=r.getContentType())){const[e,...t]=s?s.split(\";\").map((e=>jp(e).call(e))).filter(Boolean):[];r.setContentType([e||\"multipart/form-data\",...t].join(\"; \"))}let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||\"\",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):\"\";r.set(\"Authorization\",\"Basic \"+btoa(t+\":\"+i))}const u=HC(e.baseURL,e.url);function h(){if(!l)return;const n=FC.from(\"getAllResponseHeaders\"in l&&l.getAllResponseHeaders());!function(e,t,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new tm(\"Request failed with status code \"+i.status,[tm.ERR_BAD_REQUEST,tm.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}((function(e){t(e),d()}),(function(e){i(e),d()}),{data:a&&\"text\"!==a&&\"json\"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),pm(u,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,\"onloadend\"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf(\"file:\"))&&setTimeout(h)},l.onabort=function(){l&&(i(new tm(\"Request aborted\",tm.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new tm(\"Network Error\",tm.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?\"timeout of \"+e.timeout+\"ms exceeded\":\"timeout exceeded\";const n=e.transitional||Em;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new tm(t,n.clarifyTimeoutError?tm.ETIMEDOUT:tm.ECONNABORTED,e,l)),l=null},LR.hasStandardBrowserEnv&&(c&&em.isFunction(c)&&(c=c(e)),c||!1!==c&&KC(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&WC.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===n&&r.setContentType(null),\"setRequestHeader\"in l&&em.forEach(r.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),em.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&\"json\"!==a&&(l.responseType=e.responseType),\"function\"==typeof e.onDownloadProgress&&l.addEventListener(\"progress\",YC(e.onDownloadProgress,!0)),\"function\"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener(\"progress\",YC(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{l&&(i(!t||t.type?new GC(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener(\"abort\",o)));const p=function(e){const t=/^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(e);return t&&t[1]||\"\"}(u);p&&-1===LR.protocols.indexOf(p)?i(new tm(\"Unsupported protocol \"+p+\":\",tm.ERR_BAD_REQUEST,e)):l.send(n||null)}))};const zC={http:null,xhr:qC};em.forEach(zC,((e,t)=>{if(e){try{Object.defineProperty(e,\"name\",{value:t})}catch(e){}Object.defineProperty(e,\"adapterName\",{value:t})}}));const JC=e=>\"- \".concat(e),XC=e=>em.isFunction(e)||null===e||!1===e;var QC={getAdapter:e=>{e=em.isArray(e)?e:[e];const{length:t}=e;let i,n;const r={};for(let o=0;o<t;o++){let t;if(i=e[o],n=i,!XC(i)&&(n=zC[(t=String(i)).toLowerCase()],void 0===n))throw new tm(\"Unknown adapter '\".concat(t,\"'\"));if(n)break;r[t||\"#\"+o]=n}if(!n){const e=Object.entries(r).map((e=>{let[t,i]=e;return\"adapter \".concat(t,\" \")+(!1===i?\"is not supported by the environment\":\"is not available in the build\")}));throw new tm(\"There is no suitable adapter to dispatch the request \"+(t?e.length>1?\"since :\\n\"+e.map(JC).join(\"\\n\"):\" \"+JC(e[0]):\"as no adapter specified\"),\"ERR_NOT_SUPPORT\")}return n},adapters:zC};function ZC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new GC(null,e)}function $C(e){ZC(e),e.headers=FC.from(e.headers),e.data=BC.call(e,e.transformRequest),-1!==[\"post\",\"put\",\"patch\"].indexOf(e.method)&&e.headers.setContentType(\"application/x-www-form-urlencoded\",!1);return QC.getAdapter(e.adapter||PC.adapter)(e).then((function(t){return ZC(e),t.data=BC.call(e,e.transformResponse,t),t.headers=FC.from(t.headers),t}),(function(t){return jC(t)||(ZC(e),t&&t.response&&(t.response.data=BC.call(e,e.transformResponse,t.response),t.response.headers=FC.from(t.response.headers))),Gh.reject(t)}))}function eI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const tI=e=>e instanceof FC?function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eI(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e):e;function iI(e,t){t=t||{};const i={};function n(e,t,i){return em.isPlainObject(e)&&em.isPlainObject(t)?em.merge.call({caseless:i},e,t):em.isPlainObject(t)?em.merge({},t):em.isArray(t)?t.slice():t}function r(e,t,i){return em.isUndefined(t)?em.isUndefined(e)?void 0:n(void 0,e,i):n(e,t,i)}function o(e,t){if(!em.isUndefined(t))return n(void 0,t)}function s(e,t){return em.isUndefined(t)?em.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(i,r,o){return o in t?n(i,r):o in e?n(void 0,i):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>r(tI(e),tI(t),!0)};return em.forEach(Object.keys(Object.assign({},e,t)),(function(n){const o=c[n]||r,s=o(e[n],t[n],n);em.isUndefined(s)&&o!==a||(i[n]=s)})),i}const nI=\"1.6.8\",rI={};[\"object\",\"boolean\",\"number\",\"function\",\"string\",\"symbol\"].forEach(((e,t)=>{rI[e]=function(i){return typeof i===e||\"a\"+(t<1?\"n \":\" \")+e}}));const oI={};rI.transitional=function(e,t,i){function n(e,t){return\"[Axios v\"+nI+\"] Transitional option '\"+e+\"'\"+t+(i?\". \"+i:\"\")}return(i,r,o)=>{if(!1===e)throw new tm(n(r,\" has been removed\"+(t?\" in \"+t:\"\")),tm.ERR_DEPRECATED);return t&&!oI[r]&&(oI[r]=!0,console.warn(n(r,\" has been deprecated since v\"+t+\" and will be removed in the near future\"))),!e||e(i,r,o)}};var sI={assertOptions:function(e,t,i){if(\"object\"!=typeof e)throw new tm(\"options must be an object\",tm.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const o=n[r],s=t[o];if(s){const t=e[o],i=void 0===t||s(t,o,e);if(!0!==i)throw new tm(\"option \"+o+\" must be \"+i,tm.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new tm(\"Unknown option \"+o,tm.ERR_BAD_OPTION)}},validators:rI};const aI=sI.validators;let cI=class{constructor(e){this.defaults=e,this.interceptors={request:new _m,response:new _m}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const i=t.stack?t.stack.replace(/^.+\\n/,\"\"):\"\";e.stack?i&&!String(e.stack).endsWith(i.replace(/^.+\\n.+\\n/,\"\"))&&(e.stack+=\"\\n\"+i):e.stack=i}throw e}}_request(e,t){\"string\"==typeof e?(t=t||{}).url=e:t=e||{},t=iI(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:r}=t;void 0!==i&&sI.assertOptions(i,{silentJSONParsing:aI.transitional(aI.boolean),forcedJSONParsing:aI.transitional(aI.boolean),clarifyTimeoutError:aI.transitional(aI.boolean)},!1),null!=n&&(em.isFunction(n)?t.paramsSerializer={serialize:n}:sI.assertOptions(n,{encode:aI.function,serialize:aI.function},!0)),t.method=(t.method||this.defaults.method||\"get\").toLowerCase();let o=r&&em.merge(r.common,r[t.method]);r&&em.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],(e=>{delete r[e]})),t.headers=FC.concat(o,r);const s=[];let a=!0;this.interceptors.request.forEach((function(e){\"function\"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let d;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,u=0;if(!a){const e=[$C.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,d=Gh.resolve(t);u<l;)d=d.then(e[u++],e[u++]);return d}l=s.length;let h=t;for(u=0;u<l;){const e=s[u++],t=s[u++];try{h=e(h)}catch(e){t.call(this,e);break}}try{d=$C.call(this,h)}catch(e){return Gh.reject(e)}for(u=0,l=c.length;u<l;)d=d.then(c[u++],c[u++]);return d}getUri(e){return pm(HC((e=iI(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};em.forEach([\"delete\",\"get\",\"head\",\"options\"],(function(e){cI.prototype[e]=function(t,i){return this.request(iI(i||{},{method:e,url:t,data:(i||{}).data}))}})),em.forEach([\"post\",\"put\",\"patch\"],(function(e){function t(t){return function(i,n,r){return this.request(iI(r||{},{method:e,headers:t?{\"Content-Type\":\"multipart/form-data\"}:{},url:i,data:n}))}}cI.prototype[e]=t(),cI.prototype[e+\"Form\"]=t(!0)}));var dI=cI;class lI{constructor(e){if(\"function\"!=typeof e)throw new TypeError(\"executor must be a function.\");let t;this.promise=new Gh((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const n=new Gh((e=>{i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,r){i.reason||(i.reason=new GC(e,n,r),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new lI((function(t){e=t})),cancel:e}}}var uI=lI;const hI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hI).forEach((e=>{let[t,i]=e;hI[i]=t}));var pI=hI;const _I=function e(t){const i=new dI(t),n=gE(dI.prototype.request,i);return em.extend(n,dI.prototype,i,{allOwnKeys:!0}),em.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return e(iI(t,i))},n}(PC);_I.Axios=dI,_I.CanceledError=GC,_I.CancelToken=uI,_I.isCancel=jC,_I.VERSION=nI,_I.toFormData=cm,_I.AxiosError=tm,_I.Cancel=_I.CanceledError,_I.all=function(e){return Gh.all(e)},_I.spread=function(e){return function(t){return e.apply(null,t)}},_I.isAxiosError=function(e){return em.isObject(e)&&!0===e.isAxiosError},_I.mergeConfig=iI,_I.AxiosHeaders=FC,_I.formToJSON=e=>NC(em.isHTMLForm(e)?new FormData(e):e),_I.getAdapter=QC.getAdapter,_I.HttpStatusCode=pI,_I.default=_I;var EI=_I;const mI=()=>{};function fI(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:mI};return e.promise=new Gh(((t,i)=>{e.resolve=i=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(i),e.value=i)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,i(t))}})),e}const TI=new Map,SI=new Map,gI=new Map;let RI=function(e){return e.WIN_10=\"Windows 10\",e.WIN_81=\"Windows 8.1\",e.WIN_8=\"Windows 8\",e.WIN_7=\"Windows 7\",e.WIN_VISTA=\"Windows Vista\",e.WIN_SERVER_2003=\"Windows Server 2003\",e.WIN_XP=\"Windows XP\",e.WIN_2000=\"Windows 2000\",e.ANDROID=\"Android\",e.HARMONY_OS=\"HarmonyOS\",e.OPEN_BSD=\"Open BSD\",e.SUN_OS=\"Sun OS\",e.LINUX=\"Linux\",e.IOS=\"iOS\",e.MAC_OS=\"Mac OS\",e.CHROMIUM_OS=\"Chromium OS\",e.QNX=\"QNX\",e.UNIX=\"UNIX\",e.BEOS=\"BeOS\",e.OS_2=\"OS/2\",e.SEARCH_BOT=\"Search Bot\",e}({}),CI=function(e){return e.CHROME=\"Chrome\",e.SAFARI=\"Safari\",e.EDGE=\"Edge\",e.FIREFOX=\"Firefox\",e.OPERA=\"OPR\",e.QQ=\"QQBrowser\",e.WECHAT=\"MicroMessenger\",e}({});const II=new dE;let vI=II.getResult(),yI=null;function AI(e){if(!yI){e&&II.setUA(e),vI=II.getResult();const t=function(e){if(\"Blink\"===e.engine.name&&\"WeChat\"!==e.browser.name)return CI.CHROME;switch(e.browser.name){case\"Chrome Headless\":case\"Chrome\":case\"Chromium\":return CI.CHROME;case\"Safari\":case\"Mobile Safari\":return CI.SAFARI;case\"Edge\":return CI.EDGE;case\"Firefox\":return CI.FIREFOX;case\"QQ\":case\"QQBrowser\":return CI.QQ;case\"Opera\":return CI.OPERA;case\"WeChat\":return CI.WECHAT;default:return e.browser.name||\"\"}}(vI),i=bI(vI),n=function(e){return\"Windows\"===e.os.name?e.os.version?e.os.name+\" \"+e.os.version:e.os.name:e.os.name||\"\"}(vI),r=vI.os.version,o=bI(vI,!1),s=vI.device.type;if(!(t&&i&&n&&r))return{name:t,version:i,os:n,osVersion:r,browserVersion:o,deviceType:s};yI={name:t,version:i,os:n,osVersion:r,browserVersion:o,deviceType:s}}return yI}function bI(e){let t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=\"Blink\"===e.engine.name?e.engine.version||\"\":e.browser.version||\"\",i?t.split(\".\")[0]:t}function wI(){return AI().os}function OI(){const e=AI();return\"\".concat(e.os,\" \").concat(e.osVersion)}function NI(){const e=AI();return!!(\"WebKit\"===vI.engine.name&&e.os===RI.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==CI.SAFARI||MI()&&e.name!==CI.SAFARI)}function DI(){return AI().name===CI.CHROME}function PI(){return AI().name===CI.SAFARI}function LI(){return AI().name===CI.EDGE}function kI(){return AI().name===CI.FIREFOX}function MI(){return AI().os===RI.IOS}function UI(e){const t=AI();return!(t.name!==CI.CHROME||!t.osVersion)&&Number(t.version)>=e}function xI(e){const t=AI();return!(t.name!==CI.CHROME||!t.osVersion)&&Number(t.version)<e}function VI(e){const t=AI();return!(t.name!==CI.EDGE||!t.osVersion)&&Number(t.version)>=e}function FI(e){const t=AI();return!(t.name!==CI.SAFARI||!t.osVersion)&&Number(t.version)>=e}function BI(e,t,i){const n=AI();if(n.os!==RI.IOS||!n.osVersion)return!1;const r=n.osVersion.split(\".\");return i?t&&Number(r[0])===e&&Number(r[1])<t||Number(r[0])<e:t?Number(r[0])===e&&Number(r[1])<=t||Number(r[0])<e:Number(r[0])<=e}function jI(e,t,i){const n=AI();if(n.name!==CI.SAFARI||!n.osVersion||!n.browserVersion)return!1;const r=n.browserVersion.split(\".\");return i?t&&Number(r[0])===e&&Number(r[1])<t||Number(r[0])<e:t?Number(r[0])===e&&Number(r[1])<=t||Number(r[0])<e:Number(r[0])<=e}function GI(e){const t=AI();return!(t.name!==CI.OPERA||!t.osVersion)&&Number(t.version)>=e}function WI(){const e=AI();if(e.os!==RI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function HI(){const e=AI();if(e.os!==RI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 15===Number(t[0])}function KI(){const e=AI();if(e.os!==RI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 16===Number(t[0])}function YI(){const e=AI();if(e.os!==RI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 15===Number(t[0])&&Number(t[1])>=1}function qI(){return PI()&&navigator.maxTouchPoints>0}function zI(){return AI().name===CI.WECHAT}function JI(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)&&window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1]<=35}function XI(){const e=wI();return function(){const{deviceType:e}=AI();return\"mobile\"===e||\"tablet\"===e}()||e===RI.ANDROID||e===RI.IOS||e===RI.HARMONY_OS}function QI(){const e=AI();return e.name!==CI.EDGE&&e.name!==CI.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]./i)}function ZI(){return wI()===RI.ANDROID}function $I(){const e=AI();return ZI()&&(e.name===CI.CHROME||e.name===CI.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function ev(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,\"string\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function tv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function iv(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?tv(Object(i),!0).forEach((function(t){ev(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let nv=function(e){return e.UNEXPECTED_ERROR=\"UNEXPECTED_ERROR\",e.UNEXPECTED_RESPONSE=\"UNEXPECTED_RESPONSE\",e.TIMEOUT=\"TIMEOUT\",e.INVALID_PARAMS=\"INVALID_PARAMS\",e.NOT_READABLE=\"NOT_READABLE\",e.NOT_SUPPORTED=\"NOT_SUPPORTED\",e.INVALID_OPERATION=\"INVALID_OPERATION\",e.OPERATION_ABORTED=\"OPERATION_ABORTED\",e.WEB_SECURITY_RESTRICT=\"WEB_SECURITY_RESTRICT\",e.EXCHANGE_SDP_FAILED=\"EXCHANGE_SDP_FAILED\",e.ADD_CANDIDATE_FAILED=\"ADD_CANDIDATE_FAILED\",e.DATACHANNEL_FAILED=\"DATACHANNEL_FAILED\",e.NETWORK_ERROR=\"NETWORK_ERROR\",e.NETWORK_TIMEOUT=\"NETWORK_TIMEOUT\",e.NETWORK_RESPONSE_ERROR=\"NETWORK_RESPONSE_ERROR\",e.API_INVOKE_TIMEOUT=\"API_INVOKE_TIMEOUT\",e.ENUMERATE_DEVICES_FAILED=\"ENUMERATE_DEVICES_FAILED\",e.DEVICE_NOT_FOUND=\"DEVICE_NOT_FOUND\",e.ELECTRON_IS_NULL=\"ELECTRON_IS_NULL\",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR=\"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\",e.CHROME_PLUGIN_NO_RESPONSE=\"CHROME_PLUGIN_NO_RESPONSE\",e.CHROME_PLUGIN_NOT_INSTALL=\"CHROME_PLUGIN_NOT_INSTALL\",e.MEDIA_OPTION_INVALID=\"MEDIA_OPTION_INVALID\",e.PERMISSION_DENIED=\"PERMISSION_DENIED\",e.CONSTRAINT_NOT_SATISFIED=\"CONSTRAINT_NOT_SATISFIED\",e.TRACK_IS_DISABLED=\"TRACK_IS_DISABLED\",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR=\"GET_VIDEO_ELEMENT_VISIBLE_ERROR\",e.SHARE_AUDIO_NOT_ALLOWED=\"SHARE_AUDIO_NOT_ALLOWED\",e.LOW_STREAM_ENCODING_ERROR=\"LOW_STREAM_ENCODING_ERROR\",e.SET_ENCODING_PARAMETER_ERROR=\"SET_ENCODING_PARAMETER_ERROR\",e.TRACK_STATE_UNREACHABLE=\"TRACK_STATE_UNREACHABLE\",e.INVALID_UINT_UID_FROM_STRING_UID=\"INVALID_UINT_UID_FROM_STRING_UID\",e.CAN_NOT_GET_PROXY_SERVER=\"CAN_NOT_GET_PROXY_SERVER\",e.CAN_NOT_GET_GATEWAY_SERVER=\"CAN_NOT_GET_GATEWAY_SERVER\",e.VOID_GATEWAY_ADDRESS=\"VOID_GATEWAY_ADDRESS\",e.UID_CONFLICT=\"UID_CONFLICT\",e.MULTI_UNILBS_RESPONSE_ERROR=\"MULTI_UNILBS_RESPONSE_ERROR\",e.UPDATE_TICKET_FAILED=\"UPDATE_TICKET_FAILED\",e.INVALID_LOCAL_TRACK=\"INVALID_LOCAL_TRACK\",e.INVALID_TRACK=\"INVALID_TRACK\",e.SENDER_NOT_FOUND=\"SENDER_NOT_FOUND\",e.CREATE_OFFER_FAILED=\"CREATE_OFFER_FAILED\",e.SET_ANSWER_FAILED=\"SET_ANSWER_FAILED\",e.ICE_FAILED=\"ICE_FAILED\",e.PC_CLOSED=\"PC_CLOSED\",e.SENDER_REPLACE_FAILED=\"SENDER_REPLACE_FAILED\",e.GET_LOCAL_CAPABILITIES_FAILED=\"GET_LOCAL_CAPABILITIES_FAILED\",e.GET_LOCAL_CONNECTION_PARAMS_FAILED=\"GET_LOCAL_CONNECTION_PARAMS_FAILED\",e.SUBSCRIBE_FAILED=\"SUBSCRIBE_FAILED\",e.UNSUBSCRIBE_FAILED=\"UNSUBSCRIBE_FAILED\",e.GATEWAY_P2P_LOST=\"GATEWAY_P2P_LOST\",e.NO_ICE_CANDIDATE=\"NO_ICE_CANDIDATE\",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS=\"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\",e.EXIST_DISABLED_VIDEO_TRACK=\"EXIST_DISABLED_VIDEO_TRACK\",e.INVALID_REMOTE_USER=\"INVALID_REMOTE_USER\",e.REMOTE_USER_IS_NOT_PUBLISHED=\"REMOTE_USER_IS_NOT_PUBLISHED\",e.CUSTOM_REPORT_SEND_FAILED=\"CUSTOM_REPORT_SEND_FAILED\",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH=\"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\",e.FETCH_AUDIO_FILE_FAILED=\"FETCH_AUDIO_FILE_FAILED\",e.READ_LOCAL_AUDIO_FILE_ERROR=\"READ_LOCAL_AUDIO_FILE_ERROR\",e.DECODE_AUDIO_FILE_FAILED=\"DECODE_AUDIO_FILE_FAILED\",e.WS_ABORT=\"WS_ABORT\",e.WS_DISCONNECT=\"WS_DISCONNECT\",e.WS_ERR=\"WS_ERR\",e.EXTERNAL_SIGNAL_ABORT=\"EXTERNAL_SIGNAL_ABORT\",e.LIVE_STREAMING_TASK_CONFLICT=\"LIVE_STREAMING_TASK_CONFLICT\",e.LIVE_STREAMING_INVALID_ARGUMENT=\"LIVE_STREAMING_INVALID_ARGUMENT\",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR=\"LIVE_STREAMING_INTERNAL_SERVER_ERROR\",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED=\"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED=\"LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED\",e.LIVE_STREAMING_CDN_ERROR=\"LIVE_STREAMING_CDN_ERROR\",e.LIVE_STREAMING_INVALID_RAW_STREAM=\"LIVE_STREAMING_INVALID_RAW_STREAM\",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT=\"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE=\"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST=\"LIVE_STREAMING_WARN_FREQUENT_REQUEST\",e.WEBGL_INTERNAL_ERROR=\"WEBGL_INTERNAL_ERROR\",e.BEAUTY_PROCESSOR_INTERNAL_ERROR=\"BEAUTY_PROCESSOR_INTERNAL_ERROR\",e.CROSS_CHANNEL_WAIT_STATUS_ERROR=\"CROSS_CHANNEL_WAIT_STATUS_ERROR\",e.CROSS_CHANNEL_FAILED_JOIN_SRC=\"CROSS_CHANNEL_FAILED_JOIN_SEC\",e.CROSS_CHANNEL_FAILED_JOIN_DEST=\"CROSS_CHANNEL_FAILED_JOIN_DEST\",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST=\"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE=\"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\",e.METADATA_OUT_OF_RANGE=\"METADATA_OUT_OF_RANGE\",e.LOCAL_AEC_ERROR=\"LOCAL_AEC_ERROR\",e.INVALID_PLUGIN=\"INVALID_PLUGIN\",e.DISCONNECT_P2P=\"DISCONNECT_P2P\",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED=\"CONVERTING_IMAGEDATA_TO_BLOB_FAILED\",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED=\"CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED\",e.INIT_DATACHANNEL_TIMEOUT=\"INIT_DATACHANNEL_TIMEOUT\",e.CREATE_DATACHANNEL_ERROR=\"CREATE_DATACHANNEL_ERROR\",e.DATACHANNEL_CONNECTION_TIMEOUT=\"DATACHANNEL_CONNECTION_TIMEOUT\",e.PROHIBITED_OPERATION=\"PROHIBITED_OPERATION\",e.IMAGE_MODERATION_UPLOAD_FAILED=\"IMAGE_MODERATION_UPLOAD_FAILED\",e.P2P_MESSAGE_FAILED=\"P2P_MESSAGE_FAILED\",e}({}),rv=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",i=arguments.length>2?arguments[2]:void 0;super(t),ev(this,\"code\",void 0),ev(this,\"message\",void 0),ev(this,\"data\",void 0),ev(this,\"name\",\"AgoraRTCException\"),this.code=e,this.message=\"AgoraRTCError \".concat(this.code,\": \").concat(t),this.data=i}toString(){return this.data?\"data: \".concat(JSON.stringify(this.data),\"\\n\").concat(this.stack):\"\".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"error\",t=arguments.length>1?arguments[1]:void 0;return\"error\"===e&&(t||console).error(this.toString()),\"warning\"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print(\"error\",e),this}};function ov(e,t){if(\"boolean\"!=typeof e)throw new rv(nv.INVALID_PARAMS,\"Invalid \".concat(t,\": The value is of the boolean type.\"))}function sv(e,t,i){if(!Dn(i).call(i,e))throw new rv(nv.INVALID_PARAMS,\"\".concat(t,\" can only be set as \").concat(JSON.stringify(i)))}function av(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<i||e>n||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return\"number\"==typeof e&&e%1==0}(e))throw new rv(nv.INVALID_PARAMS,\"invalid \".concat(t,\": the value range is [\").concat(i,\", \").concat(n,\"]. integer only\"))}function cv(e,t){if(\"number\"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new rv(nv.INVALID_PARAMS,\"\".concat(t,\" is not a valid ConstrainLong\"));void 0!==e.min&&av(e.min,\"\".concat(t,\".min\"),0,1/0),void 0!==e.max&&av(e.max,\"\".concat(t,\".max\"),1,1/0),void 0!==e.exact&&av(e.exact,\"\".concat(t,\".exact\"),1,1/0),void 0!==e.ideal&&av(e.ideal,\"\".concat(t,\".ideal\"),1,1/0)}else av(e,t,1,1/0)}function dv(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new rv(nv.INVALID_PARAMS,\"\".concat(t||\"param\",\" cannot be empty\"));if(!hv(e,i,n,r))throw new rv(nv.INVALID_PARAMS,\"Invalid \".concat(t||\"string param\",\": Length of the string: [\").concat(i,\",\").concat(n,\"].\").concat(r?\" ASCII characters only.\":\"\"))}function lv(e,t){if(!Array.isArray(e))throw new rv(nv.INVALID_PARAMS,\"\".concat(t,\" should be an array\"))}function uv(e){return null==e}function hv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return\"string\"==typeof e&&e.length<=i&&e.length>=t&&(!n||function(e){if(\"string\"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const i=e.charCodeAt(t);if(i<0||i>255)return!1}return!0}(e))}var pv=function(e){return e.COVERED=\"COVERED\",e.POSITION=\"POSITION\",e.SIZE=\"SIZE\",e.STYLE=\"STYLE\",e}(pv||{}),_v=function(e){return e.UNMOUNTED=\"UNMOUNTED\",e.INVALID_HTML_ELEMENT=\"INVALID_HTML_ELEMENT\",e}(_v||{});const Ev=new class{constructor(){ev(this,\"_clientSize\",null),ev(this,\"getClientWidth\",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),ev(this,\"getClientHeight\",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),ev(this,\"getStyle\",(e=>window.getComputedStyle(e,null))),ev(this,\"checkCssVisibleProperty\",(e=>{var t;let i=!0;const n=this.getStyle(e),{display:r,visibility:o,opacity:s,filter:a}=n;return(\"none\"===r||Dn(t=[\"hidden\",\"collapse\"]).call(t,o)||Number(s)<.1)&&(i=!1),!!i&&(a&&a.split(\" \").filter((e=>{var t;const i=e.split(\"(\")[0];return Dn(t=[\"brightness\",\"blur\",\"opacity\"]).call(t,i)})).map((e=>{const[t,i]=e.split(/\\(|\\)/);return[t,Number(i.match(/^[0-9\\.]+/))]})).forEach((e=>{const[t,n]=e;switch(t){case\"brightness\":(n<.1||n>3)&&(i=!1);break;case\"blur\":n>3&&(i=!1);break;case\"opacity\":n<.1&&(i=!1)}})),i)})),ev(this,\"checkPropertyUpToAllParentNodes\",((e,t)=>{let i=!0,n=!0;const r=e=>t(e);let o=e;for(;o&&n;)r(o)||(i=!1,n=!1),o=o.parentElement,o||(n=!1);return i})),ev(this,\"checkActualCssVisibleIncludeInherit\",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),ev(this,\"getSizeAboutClient\",(e=>{const{width:t,height:i,left:n,right:r,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:i,left:n,right:r,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),ev(this,\"checkActualSize\",(()=>{const{width:e,height:t,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(e,t,i)})),ev(this,\"elementFromPoint\",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),ev(this,\"checkCoverForAPoint\",((e,t,i)=>{const n=this.elementFromPoint(e,t);return null!==n&&n!==i})),ev(this,\"getPointPositionList\",(()=>{const{width:e,height:t,left:i,top:n}=this._clientSize,r=e/6,o=t/6,s=[],a=10**6;for(let e=0;e<5;e++)for(let t=0;t<5;t++){const c=(i*a+(0===e?.1:4===e?(r*e*a-1e5)/a:r*e)*a)/a,d=(n*a+(0===t?.1:4===t?(o*t*a-1e5)/a:o*t)*a)/a;s.push({x:c,y:d})}return[...s]})),ev(this,\"checkElementCover\",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),ev(this,\"checkSizeIsVisible\",((e,t,i)=>(e>50||i/e<=10)&&(t>50||i/t<=10))),ev(this,\"checkSizeOfPartInClient\",(()=>{const{left:e,right:t,top:i,bottom:n,clientHeight:r,clientWidth:o,clientMin:s}=this._clientSize;let a,c,d,l;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,i<0)d=0;else{if(!(i<r))return!1;d=i}if(n<0)return!1;l=n<r?n:r;const u=c-a,h=l-d;return this.checkSizeIsVisible(u,h,s)})),ev(this,\"returnHiddenResult\",(e=>(this._clientSize=null,{visible:!1,reason:e}))),ev(this,\"checkOneElementVisible\",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(pv.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(pv.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(pv.SIZE)}}return this.returnHiddenResult(pv.STYLE)}return this.returnHiddenResult(_v.UNMOUNTED)}return this.returnHiddenResult(_v.INVALID_HTML_ELEMENT)})),ev(this,\"checkElementIsMountedOnDom\",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>\"HTML\"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function mv(e){return(new TextEncoder).encode(e)}const fv=function(e,t){const i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i};const Tv=async e=>function(e,t){let i=\"\";return new Uint8Array(e).forEach((e=>{i+=e.toString(t).padStart(2,\"0\")})),i}(await crypto.subtle.digest(\"SHA-256\",mv(e)),16);let Sv=class{constructor(){ev(this,\"_events\",{}),ev(this,\"addListener\",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const i=this._events[e],n=this._indexOfListener(i,t);-1!==n&&i.splice(n,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(let i=0;i<t.length;i+=1){const r=t[i];r.once&&this.off(e,r.listener),r.listener.apply(this,n||[])}}safeEmit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,i)}catch(t){console.error(\"safeEmit event:\".concat(e,\" error \").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let i=e.length;for(;i--;)if(e[i].listener===t)return i;return-1}};let gv=null;function Rv(){if(gv)return gv;if(window.electron)return gv=window.electron;if(!window.require)return null;try{return gv=window.require(\"electron\"),gv}catch(e){return null}}let Cv=function(e){return e.CREATE_CLIENT=\"createClient\",e.CHECK_SYSTEM_REQUIREMENTS=\"checkSystemRequirements\",e.SET_AREA=\"setArea\",e.PRELOAD=\"PRELOAD\",e.CHECK_VIDEO_TRACK_IS_ACTIVE=\"checkVideoTrackIsActive\",e.CHECK_AUDIO_TRACK_IS_ACTIVE=\"checkAudioTrackIsActive\",e.CREATE_MIC_AUDIO_TRACK=\"createMicrophoneAudioTrack\",e.CREATE_CUSTOM_AUDIO_TRACK=\"createCustomAudioTrack\",e.CREATE_BUFFER_AUDIO_TRACK=\"createBufferSourceAudioTrack\",e.CREATE_CAM_VIDEO_TRACK=\"createCameraVideoTrack\",e.CREATE_CUSTOM_VIDEO_TRACK=\"createCustomVideoTrack\",e.CREATE_MIC_AND_CAM_TRACKS=\"createMicrophoneAndCameraTracks\",e.CREATE_SCREEN_VIDEO_TRACK=\"createScreenVideoTrack\",e.SET_ENCRYPTION_CONFIG=\"Client.setEncryptionConfig\",e.START_PROXY_SERVER=\"Client.startProxyServer\",e.STOP_PROXY_SERVER=\"Client.stopProxyServer\",e.SET_PROXY_SERVER=\"Client.setProxyServer\",e.SET_TURN_SERVER=\"Client.setTurnServer\",e.SET_CLIENT_ROLE=\"Client.setClientRole\",e.SET_LOW_STREAM_PARAMETER=\"Client.setLowStreamParameter\",e.ENABLE_DUAL_STREAM=\"Client.enableDualStream\",e.DISABLE_DUAL_STREAM=\"Client.disableDualStream\",e.JOIN=\"Client.join\",e.LEAVE=\"Client.leave\",e.PUBLISH=\"Client.publish\",e.UNPUBLISH=\"Client.unpublish\",e.SUBSCRIBE=\"Client.subscribe\",e.MASS_SUBSCRIBE=\"Client.massSubscribe\",e.MASS_UNSUBSCRIBE=\"Client.massUnsubscribe\",e.UNSUBSCRIBE=\"Client.unsubscribe\",e.RENEW_TOKEN=\"Client.renewToken\",e.SET_REMOTE_VIDEO_STREAM_TYPE=\"Client.setRemoteVideoStreamType\",e.SET_STREAM_FALLBACK_OPTION=\"Client.setStreamFallbackOption\",e.ENABLE_AUDIO_VOLUME_INDICATOR=\"Client.enableAudioVolumeIndicator\",e.SEND_CUSTOM_REPORT_MESSAGE=\"Client.sendCustomReportMessage\",e.INSPECT_VIDEO_CONTENT=\"Client.inspectVideoContent\",e.STOP_INSPECT_VIDEO_CONTENT=\"Client.stopInspectVideoContent\",e.JOIN_FALLBACK_TO_PROXY=\"Client._joinFallbackToProxy\",e.ON_LIVE_STREAM_WARNING=\"Client.onLiveStreamWarning\",e.ON_LIVE_STREAM_ERROR=\"Client.onLiveStreamingError\",e.START_LIVE_STREAMING=\"Client.startLiveStreaming\",e.SET_LIVE_TRANSCODING=\"Client.setLiveTranscoding\",e.STOP_LIVE_STREAMING=\"Client.stopLiveStreaming\",e.START_CHANNEL_MEDIA_RELAY=\"Client.startChannelMediaRelay\",e.UPDATE_CHANNEL_MEDIA_RELAY=\"Client.updateChannelMediaRelay\",e.STOP_CHANNEL_MEDIA_RELAY=\"Client.stopChannelMediaRelay\",e.REQUEST_CONFIG_DISTRIBUTE=\"_config-distribute-request\",e.SET_CONFIG_DISTRIBUTE=\"_configDistribute\",e.LOCAL_TRACK_SET_MUTED=\"LocalTrack.setMute\",e.LOCAL_AUDIO_TRACK_PLAY=\"LocalAudioTrack.play\",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT=\"LocalAudioTrack.playInElement\",e.LOCAL_AUDIO_TRACK_STOP=\"LocalAudioTrack.stop\",e.LOCAL_AUDIO_TRACK_SET_VOLUME=\"LocalAudioTrack.setVolume\",e.MIC_AUDIO_TRACK_SET_DEVICE=\"MicrophoneAudioTrack.setDevice\",e.BUFFER_AUDIO_TRACK_START=\"BufferSourceAudioTrack.startProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_STOP=\"BufferSourceAudioTrack.stopProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_PAUSE=\"BufferSourceAudioTrack.pauseProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_RESUME=\"BufferSourceAudioTrack.resumeProcessAudioBuffer\",e.BUFFER_AUDIO_TRACK_SEEK=\"BufferSourceAudioTrack.seekAudioBuffer\",e.LOCAL_VIDEO_TRACK_PLAY=\"LocalVideoTrack.play\",e.LOCAL_VIDEO_TRACK_STOP=\"LocalVideoTrack.stop\",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE=\"LocalVideoTrack.getVideoElementVisibleStatus\",e.LOCAL_VIDEO_TRACK_BEAUTY=\"LocalVideoTrack.setBeautyEffect\",e.LOCAL_VIDEO_SEND_SEI_DATA=\"LocalVideoTrack.sendSeiData\",e.CAM_VIDEO_TRACK_SET_DEVICE=\"CameraVideoTrack.setDevice\",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG=\"CameraVideoTrack.setEncoderConfiguration\",e.REMOTE_VIDEO_TRACK_PLAY=\"RemoteVideoTrack.play\",e.REMOTE_VIDEO_TRACK_STOP=\"RemoteVideoTrack.stop\",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE=\"RemoteVideoTrack.getVideoElementVisibleStatus\",e.REMOTE_AUDIO_TRACK_PLAY=\"RemoteAudioTrack.play\",e.REMOTE_AUDIO_TRACK_STOP=\"RemoteAudioTrack.stop\",e.REMOTE_AUDIO_SET_VOLUME=\"RemoteAudioTrack.setVolume\",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE=\"RemoteAudioTrack.setOutputDevice\",e.GET_MEDIA_STREAM_TRACK=\"Track.getMediaStreamTrack\",e.STREAM_TYPE_CHANGE=\"streamTypeChange\",e.CONNECTION_STATE_CHANGE=\"connectionStateChange\",e.LOAD_CONFIG_FROM_LOCALSTORAGE=\"loadConfigFromLocalStorage\",e.IMAGE_MODERATION_UPLOAD=\"imageModerationUpload\",e}({}),Iv=function(e){return e.TRACER=\"tracer\",e}({});function vv(e){return av(e.timeout,\"config.timeout\",0,1e5),av(e.timeoutFactor,\"config.timeoutFactor\",0,100,!1),av(e.maxRetryCount,\"config.maxRetryConfig\",0,1/0),av(e.maxRetryTimeout,\"config.maxRetryTimeout\",0,1/0),!0}let yv=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]=\"AUDIENCE_LEVEL_LOW_LATENCY\",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]=\"AUDIENCE_LEVEL_ULTRA_LOW_LATENCY\",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]=\"AUDIENCE_LEVEL_SYNC_LATENCY\",e}({}),Av=function(e){return e.LEAVE=\"LEAVE\",e.NETWORK_ERROR=\"NETWORK_ERROR\",e.SERVER_ERROR=\"SERVER_ERROR\",e.UID_BANNED=\"UID_BANNED\",e.FALLBACK=\"FALLBACK\",e.IP_BANNED=\"IP_BANNED\",e.CHANNEL_BANNED=\"CHANNEL_BANNED\",e.LICENSE_MISSING=\"LICENSE_MISSING\",e.LICENSE_EXPIRED=\"LICENSE_EXPIRED\",e.LICENSE_MINUTES_EXCEEDED=\"LICENSE_MINUTES_EXCEEDED\",e.LICENSE_PERIOD_INVALID=\"LICENSE_PERIOD_INVALID\",e.LICENSE_MULTIPLE_SDK_SERVICE=\"LICENSE_MULTIPLE_SDK_SERVICE\",e.LICENSE_ILLEGAL=\"LICENSE_ILLEGAL\",e.TOKEN_EXPIRE=\"TOKEN_EXPIRE\",e}({});function bv(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function wv(e){return dv(e.turnServerURL,\"turnServerURL\"),dv(e.username,\"username\"),dv(e.password,\"password\"),e.udpport&&av(e.udpport,\"udpport\",1,99999,!0),e.forceturn&&ov(e.forceturn,\"forceturn\"),e.security&&ov(e.security,\"security\"),e.tcpport&&av(e.tcpport,\"tcpport\",1,99999,!0),!0}function Ov(e){return void 0!==e.level&&sv(e.level,\"level\",[1,2,3]),void 0!==e.delay&&av(e.delay,\"delay\",0,3e3,!0),!0}let Nv=function(e){return e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.MEDIA_RECONNECT_START=\"media-reconnect-start\",e.MEDIA_RECONNECT_END=\"media-reconnect-end\",e.IS_USING_CLOUD_PROXY=\"is-using-cloud-proxy\",e.USER_JOINED=\"user-joined\",e.USER_LEAVED=\"user-left\",e.USER_PUBLISHED=\"user-published\",e.USER_UNPUBLISHED=\"user-unpublished\",e.USER_INFO_UPDATED=\"user-info-updated\",e.CLIENT_BANNED=\"client-banned\",e.CHANNEL_MEDIA_RELAY_STATE=\"channel-media-relay-state\",e.CHANNEL_MEDIA_RELAY_EVENT=\"channel-media-relay-event\",e.VOLUME_INDICATOR=\"volume-indicator\",e.CRYPT_ERROR=\"crypt-error\",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE=\"token-privilege-will-expire\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"token-privilege-did-expire\",e.NETWORK_QUALITY=\"network-quality\",e.STREAM_TYPE_CHANGED=\"stream-type-changed\",e.STREAM_FALLBACK=\"stream-fallback\",e.RECEIVE_METADATA=\"receive-metadata\",e.STREAM_MESSAGE=\"stream-message\",e.LIVE_STREAMING_ERROR=\"live-streaming-error\",e.LIVE_STREAMING_WARNING=\"live-streaming-warning\",e.EXCEPTION=\"exception\",e.ERROR=\"error\",e.P2P_LOST=\"p2p_lost\",e.JOIN_FALLBACK_TO_PROXY=\"join-fallback-to-proxy\",e.CHANNEL_FALLBACK_TO_WEBSOCKET=\"channel-fallback-to-websocket\",e.MEDIA_CONNECTION_TYPE_CHANGE=\"media-connection-type-change\",e.PUBLISHED_USER_LIST=\"published-user-list\",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE=\"content-inspect-connection-state-change\",e.CONTENT_INSPECT_ERROR=\"content-inspect-error\",e.CONTENT_INSPECT_RESULT=\"content-inspect-result\",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE=\"image-moderation-connection-state-change\",e}({}),Dv=function(e){return e.NETWORK_ERROR=\"NETWORK_ERROR\",e.SERVER_ERROR=\"SERVER_ERROR\",e.MULTI_IP=\"MULTI_IP\",e.TIMEOUT=\"TIMEOUT\",e.OFFLINE=\"OFFLINE\",e.LEAVE=\"LEAVE\",e.P2P_FAILED=\"P2P_FAILED\",e.FALLBACK=\"FALLBACK\",e}({}),Pv=function(e){return e.ONLINE=\"ONLINE\",e.OFFLINE=\"OFFLINE\",e}({}),Lv=function(e){return e.NETWORK_STATE_CHANGE=\"NETWORK_STATE_CHANGE\",e.ONLINE=\"ONLINE\",e.OFFLINE=\"OFFLINE\",e}({});function kv(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return 0===e.getListeners(t).length?Gh.reject(new rv(nv.UNEXPECTED_ERROR,\"can not emit promise\")):new Gh(((i,r)=>{e.emit(t,...n,i,r)}))}function Mv(e,t){if(0===e.getListeners(t).length)return Gh.resolve();for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return kv(e,t,...n)}function Uv(e,t){if(0===e.getListeners(t).length)return null;for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return xv(e,t,...n)}function xv(e,t){let i=null,n=null;for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];if(e.emit(t,...o,(e=>{i=e}),(e=>{n=e})),null!==n)throw n;if(null===i)throw new rv(nv.UNEXPECTED_ERROR,\"handler is not sync\");return i}const Vv=new class extends Sv{set networkState(e){this.emit(Lv.NETWORK_STATE_CHANGE,e,this._networkState),e===Pv.ONLINE?this.emit(Lv.ONLINE):e===Pv.OFFLINE&&(this.onlineWaiter=new Gh((e=>{this.once(Lv.ONLINE,(()=>{this.onlineWaiter=void 0,e(Pv.ONLINE)}))})),this.emit(Lv.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===Pv.ONLINE}constructor(){super(),ev(this,\"_moduleName\",\"network-indicator\"),ev(this,\"_networkState\",Pv.ONLINE),ev(this,\"onlineWaiter\",void 0),window.addEventListener(\"online\",(()=>{this.networkState=Pv.ONLINE})),window.addEventListener(\"offline\",(()=>{this.networkState=Pv.OFFLINE}))}};function Fv(e,t){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}function Bv(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function jv(e){void 0!==Gh?Gh.resolve().then(e):setTimeout(e,0)}function Gv(e){return JSON.parse(JSON.stringify(e))}function Wv(e){try{return Gv(e)}catch(t){return e}}const Hv={};function Kv(e,t){Hv[t]||(Hv[t]=!0,e())}function Yv(e){const t=window.atob(e),i=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e+=1)i[e]=t.charCodeAt(e);return i}function qv(e){let t=\"\";for(let i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return window.btoa(t)}function zv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=(new TextEncoder).encode(e);if(i.length>t)i=i.slice(0,t);else if(i.length<t){const e=new Uint8Array(t);e.set(i),i=e}return i}function Jv(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=Jn(t).call(t,((e,t)=>e+t.length),0),r=new Uint8Array(new ArrayBuffer(n));let o=0;return t.forEach((e=>{r.set(e,o),o+=e.length})),r}function Xv(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function Qv(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+=\"string\"==typeof e?Xv(e):e.size})),t+138}function Zv(e){const t=new rv(nv.TIMEOUT,\"timeout\");return new Gh(((i,n)=>{window.setTimeout((()=>n(t)),e)}))}function $v(e){return new Gh((t=>{window.setTimeout(t,e)}))}function ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?\"\".concat(t).concat(i):\"\".concat(t).concat(i)+ey(e-i.length,\"\")}function ty(){return ey(32,\"\").toUpperCase()}const iy=()=>{},ny=new class{constructor(){ev(this,\"fnMap\",new Map)}throttleByKey(e,t,i,n){for(var r=arguments.length,o=new Array(r>4?r-4:0),s=4;s<r;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const r=this.fnMap.get(t);if(r.threshold!==i){r.fn(...r.args),clearTimeout(r.timer);const s=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),i);this.fnMap.set(t,{fn:e,threshold:i,timer:s,args:o,skipFn:n})}else r.skipFn&&r.skipFn(...r.args),this.fnMap.set(t,iv(iv({},r),{},{fn:e,args:o,skipFn:n}))}else{const r=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),i);this.fnMap.set(t,{fn:e,threshold:i,timer:r,args:o,skipFn:n})}}},ry=ny.throttleByKey.bind(ny);function oy(e){return\"object\"==typeof e&&null!==e&&!(e instanceof RegExp)}function sy(e,t){if(!oy(e)||!oy(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const i=[...e];for(let n=0;n<t.length;n++)i[n]=sy(e[n],t[n]);return i}{const i=iv({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?i[n]=sy(e[n],t[n]):i[n]=t[n]);return i}}function ay(e,t){let i=[0];if(t&&(i=new Array(t).fill(0)),0===e)return i;let n=0;for(;e>0&&(i[n]=255&e,e>>=8,n++,!t||n!==t););return i}function cy(e){return\"number\"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function dy(e){const t=\"0123456789abcdef\";function i(e){let i,n=\"\";for(i=0;i<=3;i++)n+=t.charAt(e>>8*i+4&15)+t.charAt(e>>8*i&15);return n}function n(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function r(e,t,i,r,o,s){return n(function(e,t){return e<<t|e>>>32-t}(n(n(t,e),n(r,s)),o),i)}function o(e,t,i,n,o,s,a){return r(t&i|~t&n,e,t,o,s,a)}function s(e,t,i,n,o,s,a){return r(t&n|i&~n,e,t,o,s,a)}function a(e,t,i,n,o,s,a){return r(t^i^n,e,t,o,s,a)}function c(e,t,i,n,o,s,a){return r(i^(t|~n),e,t,o,s,a)}const d=function(e){let t;const i=1+(e.length+8>>6),n=new Array(16*i);for(t=0;t<16*i;t++)n[t]=0;for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<t%4*8;return n[t>>2]|=128<<t%4*8,n[16*i-2]=8*e.length,n}(e);let l,u,h,p,_,E=1732584193,m=-271733879,f=-1732584194,T=271733878;for(l=0;l<d.length;l+=16)u=E,h=m,p=f,_=T,E=o(E,m,f,T,d[l+0],7,-680876936),T=o(T,E,m,f,d[l+1],12,-389564586),f=o(f,T,E,m,d[l+2],17,606105819),m=o(m,f,T,E,d[l+3],22,-1044525330),E=o(E,m,f,T,d[l+4],7,-176418897),T=o(T,E,m,f,d[l+5],12,1200080426),f=o(f,T,E,m,d[l+6],17,-1473231341),m=o(m,f,T,E,d[l+7],22,-45705983),E=o(E,m,f,T,d[l+8],7,1770035416),T=o(T,E,m,f,d[l+9],12,-1958414417),f=o(f,T,E,m,d[l+10],17,-42063),m=o(m,f,T,E,d[l+11],22,-1990404162),E=o(E,m,f,T,d[l+12],7,1804603682),T=o(T,E,m,f,d[l+13],12,-40341101),f=o(f,T,E,m,d[l+14],17,-1502002290),m=o(m,f,T,E,d[l+15],22,1236535329),E=s(E,m,f,T,d[l+1],5,-165796510),T=s(T,E,m,f,d[l+6],9,-1069501632),f=s(f,T,E,m,d[l+11],14,643717713),m=s(m,f,T,E,d[l+0],20,-373897302),E=s(E,m,f,T,d[l+5],5,-701558691),T=s(T,E,m,f,d[l+10],9,38016083),f=s(f,T,E,m,d[l+15],14,-660478335),m=s(m,f,T,E,d[l+4],20,-405537848),E=s(E,m,f,T,d[l+9],5,568446438),T=s(T,E,m,f,d[l+14],9,-1019803690),f=s(f,T,E,m,d[l+3],14,-187363961),m=s(m,f,T,E,d[l+8],20,1163531501),E=s(E,m,f,T,d[l+13],5,-1444681467),T=s(T,E,m,f,d[l+2],9,-51403784),f=s(f,T,E,m,d[l+7],14,1735328473),m=s(m,f,T,E,d[l+12],20,-1926607734),E=a(E,m,f,T,d[l+5],4,-378558),T=a(T,E,m,f,d[l+8],11,-2022574463),f=a(f,T,E,m,d[l+11],16,1839030562),m=a(m,f,T,E,d[l+14],23,-35309556),E=a(E,m,f,T,d[l+1],4,-1530992060),T=a(T,E,m,f,d[l+4],11,1272893353),f=a(f,T,E,m,d[l+7],16,-155497632),m=a(m,f,T,E,d[l+10],23,-1094730640),E=a(E,m,f,T,d[l+13],4,681279174),T=a(T,E,m,f,d[l+0],11,-358537222),f=a(f,T,E,m,d[l+3],16,-722521979),m=a(m,f,T,E,d[l+6],23,76029189),E=a(E,m,f,T,d[l+9],4,-640364487),T=a(T,E,m,f,d[l+12],11,-421815835),f=a(f,T,E,m,d[l+15],16,530742520),m=a(m,f,T,E,d[l+2],23,-995338651),E=c(E,m,f,T,d[l+0],6,-198630844),T=c(T,E,m,f,d[l+7],10,1126891415),f=c(f,T,E,m,d[l+14],15,-1416354905),m=c(m,f,T,E,d[l+5],21,-57434055),E=c(E,m,f,T,d[l+12],6,1700485571),T=c(T,E,m,f,d[l+3],10,-1894986606),f=c(f,T,E,m,d[l+10],15,-1051523),m=c(m,f,T,E,d[l+1],21,-2054922799),E=c(E,m,f,T,d[l+8],6,1873313359),T=c(T,E,m,f,d[l+15],10,-30611744),f=c(f,T,E,m,d[l+6],15,-1560198380),m=c(m,f,T,E,d[l+13],21,1309151649),E=c(E,m,f,T,d[l+4],6,-145523070),T=c(T,E,m,f,d[l+11],10,-1120210379),f=c(f,T,E,m,d[l+2],15,718787259),m=c(m,f,T,E,d[l+9],21,-343485551),E=n(E,u),m=n(m,h),f=n(f,p),T=n(T,_);return i(E)+i(m)+i(f)+i(T)}let ly=1,uy=console,hy=class{static setLogger(e){uy=e}constructor(e){ev(this,\"lockingPromise\",Gh.resolve()),ev(this,\"locks\",0),ev(this,\"name\",\"\"),ev(this,\"lockId\",void 0),this.lockId=ly++,e&&(this.name=e),uy.debug(\"[lock-\".concat(this.name,\"-\").concat(this.lockId,\"] is created.\"))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,uy.debug(\"[lock-\".concat(this.name,\"-\").concat(this.lockId,\"] is locked, current queue \").concat(this.locks,\". \").concat(\"string\"==typeof e?e:\"\"));const i=new Gh((i=>{t=()=>{this.locks-=1,uy.debug(\"[lock-\".concat(this.name,\"-\").concat(this.lockId,\"] is not locked, current queue \").concat(this.locks,\". \").concat(\"string\"==typeof e?e:\"\")),i()}})),n=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>i)),n}};function py(e,t){return function(i,n,r){const o=r.value;if(\"function\"!=typeof o)throw new Error(\"Cannot use mutex on object property.\");return r.value=async function(){const i=this[t];if(!i)throw new Error(\"mutex property key \".concat(t,\" doesn't exist on \").concat(e));const r=await i.lock(\"From \".concat(e,\".\").concat(n));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{r()}},r}}const _y={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Ey(e,t){const i=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,i)}function my(e,t,i,n){const r=Object.assign({},_y,n);let o=r.timeout;const s=async()=>{await function(e){return new Gh((t=>{window.setTimeout(t,e)}))}(o),o*=r.timeoutFactor,o=Math.min(r.maxRetryTimeout,o)};let a=!1;const c=new Gh((async(n,o)=>{t=t||(()=>!1),i=i||(()=>!0);for(let c=0;c<r.maxRetryCount;c+=1){if(a)return o(new rv(nv.OPERATION_ABORTED));try{const i=await e();if(!t(i,c))return n(i);if(c+1===r.maxRetryCount)return n(i);await s()}catch(e){if(!i(e,c))return o(e);if(c+1===r.maxRetryCount)return o(e);await s()}}}));return c.cancel=()=>a=!0,c}class fy{constructor(e){ev(this,\"input\",[]),ev(this,\"size\",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:Jn(e=this.input).call(e,((e,t)=>e+t))/this.input.length}}let Ty,Sy=0,gy=0;function Ry(e,t,i,n){return new Gh(((r,o)=>{t.responseType=t.responseType||\"json\",t.data&&!i?(t.data=JSON.stringify(t.data),Sy+=Xv(t.data)):i&&(t.data.size?Sy+=t.data.size:t.data instanceof FormData?Sy+=Qv(t.data):Sy+=Xv(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers[\"Content-Type\"]=t.headers[\"Content-Type\"]||\"application/json\",t.method=\"POST\",t.url=e,EI.request(t).then((e=>{\"string\"==typeof e.data?gy+=Xv(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?gy+=e.data.byteLength:gy+=Xv(JSON.stringify(e.data)),n&&r({data:e.data,headers:e.headers}),r(e.data)})).catch((e=>{EI.isCancel(e)?o(new rv(nv.OPERATION_ABORTED,\"cancel token canceled\")):\"ECONNABORTED\"===e.code?o(new rv(nv.NETWORK_TIMEOUT,e.message)):e.response?o(new rv(nv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new rv(nv.NETWORK_ERROR,e.message))}))}))}async function Cy(e,t){const i=new Blob([t.data],{type:\"buffer\"});return await Ry(e,iv(iv({},t),{},{data:i,headers:{\"Content-Type\":\"application/octet-stream\"}}),!0)}const Iy=()=>void 0!==window.isSecureContext;const vy=function(e){if(e.match(/[0-9]+\\.[0-9]+\\.[0-9]+$/))return e;const t=e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-alpha\\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],i=t[2];return\"\".concat(e,\".\").concat(i)}const i=e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-special\\.([0-9]+)/);if(i&&i[1]&&i[2]){const e=i[1],t=i[2];return\"\".concat(e,\".\").concat(100*(Number(t)+1))}return\"4.0.0.999\"}(\"4.22.0\"),yy=function(){try{return!0===JSON.parse(\"true\")}catch(e){return!0}}();let Ay=function(e){return e.Default=\"default\",e.Auto=\"auto\",e.Relay=\"relay\",e.SdRtn=\"sd-rtn\",e}({});const by={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},wy=\"v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)\",Oy=iv(iv({PROCESS_ID:\"\",ENCRYPT_AES:!0,AREAS:[\"CHINA\",\"GLOBAL\"],WEBCS_DOMAIN:[\"webrtc2-ap-web-1.agora.io\",\"webrtc2-2.ap.sd-rtn.com\"],WEBCS_DOMAIN_BACKUP_LIST:[\"webrtc2-ap-web-3.agora.io\",\"webrtc2-4.ap.sd-rtn.com\"],PROXY_CS:[\"ap-proxy-1.agora.io\",\"ap-proxy-2.agora.io\"],CDS_AP:[\"cds-ap-web-1.agora.io\",\"cds-web-2.ap.sd-rtn.com\",\"cds-ap-web-3.agora.io\",\"cds-web-4.ap.sd-rtn.com\"],ACCOUNT_REGISTER:[\"sua-ap-web-1.agora.io\",\"sua-web-2.ap.sd-rtn.com\",\"sua-ap-web-3.agora.io\",\"sua-web-4.ap.sd-rtn.com\"],UAP_AP:[\"uap-ap-web-1.agora.io\",\"uap-web-2.ap.sd-rtn.com\",\"uap-ap-web-3.agora.io\",\"uap-web-4.ap.sd-rtn.com\"],LOG_UPLOAD_SERVER:\"logservice.agora.io\",EVENT_REPORT_DOMAIN:\"statscollector-1.agora.io\",EVENT_REPORT_BACKUP_DOMAIN:\"web-2.statscollector.sd-rtn.com\",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:\"\",LIVE_STREAMING_ADDRESS:\"\",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:\"\",PUB_EXTEND:\"\",SUB_EXTEND:\"\",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:[\"edge.agora.io\",\"edge.sd-rtn.com\"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:\"edge.agora.io\",TURN_DOMAIN:\"edge.agora.io\",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:\"webnginx-proxy.agora.io\",PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy.sd-rtn.com\",\"webrtc-cloud-proxy.agora.io\"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:\"high\",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:\"\",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:[\"agora.io\",\"sd-rtn.com\"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:\"STANDARD_BITRATE\",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:[\"data-reporting.agora.io\",\"data-reporting.agora.io\"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:\"edge.agora.io\",VIDEO_INSPECT_WORKER_MANAGER_PORT:\"\",VIDEO_INSPECT_WORKER_PORT:\"\",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:\"edge.agora.io\",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:by,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:\"\",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:[\"H264\",\"VP8\",\"VP9\",\"AV1\"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function Ny(e,t,i){var n,r,o;Dn(n=Object.keys(Oy)).call(n,e)&&(!i&&Dn(r=Object.keys(Py)).call(r,e)||(Oy[e]=t,\"ENABLE_VIDEO_SEI\"===e&&!0===t&&(Oy.ENABLE_ENCODED_TRANSFORM=!0),\"USE_NEW_NETWORK_CONFIG\"===e&&t&&(o=!!t,Oy.USE_NEW_NETWORK_CONFIG=o,o&&(Oy.WEBCS_DOMAIN=[\"webrtc2-2.ap.sd-rtn.com\"],Oy.WEBCS_DOMAIN_BACKUP_LIST=[\"webrtc2-4.ap.sd-rtn.com\"],Oy.CDS_AP=[\"cds-web-2.ap.sd-rtn.com\",\"cds-web-4.ap.sd-rtn.com\"],Oy.ACCOUNT_REGISTER=[\"sua-web-2.ap.sd-rtn.com\",\"sua-web-4.ap.sd-rtn.com\"],Oy.EVENT_REPORT_DOMAIN=\"web-2.statscollector.sd-rtn.com\",Oy.EVENT_REPORT_BACKUP_DOMAIN=\"statscollector-1.agora.io\",Oy.GATEWAY_DOMAINS=[\"edge.sd-rtn.com\"])),\"ENABLE_PRE_SUB\"===e&&t&&(Oy.ENABLE_INSTANT_VIDEO=!0,Oy.ENABLE_PREALLOC_PC=!0),\"ENABLE_SVC\"===e&&t&&(Oy.ENABLE_AUT_CC=!0)))}function Dy(e){return Oy[e]}const Py={};var Ly=function(e){return e.SET_SESSION_ID=\"SET_SESSION_ID\",e.SET_P2P_ID=\"SET_P2P_id\",e.SET_DC_ID=\"SET_DC_id\",e.SET_UID=\"SET_UID\",e.SET_INT_UID=\"SET_INT_UID\",e.SET_PUB_ID=\"SET_PUB_ID\",e.SET_CLOUD_PROXY_SERVER_MODE=\"SET_CLOUD_PROXY_SERVER_MODE\",e.KEY_METRIC_CLIENT_CREATED=\"KEY_METRIC_CLIENT_CREATED\",e.KEY_METRIC_JOIN_START=\"KEY_METRIC_JOIN_START\",e.AVOID_JOIN_START=\"AVOID_JOIN_START\",e.KEY_METRIC_JOIN_END=\"KEY_METRIC_JOIN_END\",e.KEY_METRIC_REQUEST_AP_START=\"KEY_METRIC_REQUEST_AP_START\",e.KEY_METRIC_REQUEST_AP_END=\"KEY_METRIC_REQUEST_AP_END\",e.KEY_METRIC_JOIN_GATEWAY_START=\"KEY_METRIC_JOIN_GATEWAY_START\",e.KEY_METRIC_JOIN_GATEWAY_END=\"KEY_METRIC_JOIN_GATEWAY_END\",e.KEY_METRIC_PEER_CONNECTION_START=\"KEY_METRIC_PEER_CONNECTION_START\",e.KEY_METRIC_PEER_CONNECTION_END=\"KEY_METRIC_PEER_CONNECTION_END\",e.KEY_METRIC_DESCRIPTION_START=\"KEY_METRIC_DESCRIPTION_START\",e.KEY_METRIC_ICE_CONNECTION_END=\"KEY_METRIC_ICE_CONNECTION_END\",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN=\"KEY_METRIC_SIGNAL_CHANNEL_OPEN\",e.KEY_METRIC_PUBLISH=\"KEY_METRIC_PUBLISH\",e.KEY_METRIC_SUBSCRIBE=\"KEY_METRIC_SUBSCRIBE\",e.RECORD_JOIN_CHANNEL_SERVICE=\"RECORD_JOIN_CHANNEL_SERVICE\",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS=\"RESET_JOIN_CHANNEL_SERVICE_RECORDS\",e.RESET_KEY_METRICS=\"RESET_KEY_METRICS\",e.SET_USE_P2P=\"SET_USE_P2P\",e.SET_TRANSPORT_TYPE=\"SET_TRANSPORT_TYPE\",e}(Ly||{});class ky{constructor(e,t,i,n){ev(this,\"state\",void 0),this.state={codec:e,audioCodec:t,mode:i,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:\"disabled\",useP2P:!1,p2pTransport:Ay.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case Ly.SET_SESSION_ID:return iv(iv({},e),{},{sessionId:t.sessionId});case Ly.SET_P2P_ID:return iv(iv({},e),{},{p2pId:t.p2pId});case Ly.SET_UID:return iv(iv({},e),{},{uid:t.uid});case Ly.SET_INT_UID:return iv(iv({},e),{},{intUid:t.intUid});case Ly.SET_PUB_ID:return iv(iv({},e),{},{pubId:t.pubId});case Ly.KEY_METRIC_CLIENT_CREATED:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{clientCreated:t.metric})});case Ly.KEY_METRIC_JOIN_START:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{joinStart:t.metric})});case Ly.AVOID_JOIN_START:return iv(iv({},e),{},{avoidJoinStart:t.avoidJoinStart});case Ly.KEY_METRIC_JOIN_END:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{joinEnd:t.metric})});case Ly.KEY_METRIC_REQUEST_AP_START:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{requestAPStart:t.metric})});case Ly.KEY_METRIC_REQUEST_AP_END:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{requestAPEnd:t.metric})});case Ly.KEY_METRIC_JOIN_GATEWAY_START:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case Ly.KEY_METRIC_JOIN_GATEWAY_END:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case Ly.KEY_METRIC_PEER_CONNECTION_START:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case Ly.KEY_METRIC_PEER_CONNECTION_END:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case Ly.KEY_METRIC_DESCRIPTION_START:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{descriptionStart:t.metric})});case Ly.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case Ly.KEY_METRIC_ICE_CONNECTION_END:return iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case Ly.KEY_METRIC_PUBLISH:{const i=e.keyMetrics.publish,n=i.findIndex((e=>e.trackId===t.metric.trackId));return-1!==n?(i[n]=iv(iv({},i[n]),t.metric),iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{publish:[...i]})})):iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case Ly.KEY_METRIC_SUBSCRIBE:{const i=e.keyMetrics.subscribe,n=i.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==n?(i[n]=iv(iv({},i[n]),t.metric),iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{subscribe:[...i]})})):iv(iv({},e),{},{keyMetrics:iv(iv({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case Ly.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case Ly.RECORD_JOIN_CHANNEL_SERVICE:return\"number\"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=iv(iv({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case Ly.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case Ly.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case Ly.SET_USE_P2P:return iv(iv({},e),{},{useP2P:t.val});case Ly.SET_TRANSPORT_TYPE:return iv(iv({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:Ly.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:Ly.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:Ly.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:Ly.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:Ly.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:Ly.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:Ly.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:Ly.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:Ly.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:Ly.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Ly.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Ly.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Ly.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Ly.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Ly.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Ly.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Ly.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Ly.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Ly.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Ly.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Ly.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,i,n){this.dispatch({type:Ly.KEY_METRIC_PUBLISH,metric:iv(iv({trackId:e,type:t},i&&{publishStart:i}),n&&{publishEnd:n})})}subscribe(e,t,i,n,r,o,s){this.dispatch({type:Ly.KEY_METRIC_SUBSCRIBE,metric:iv(iv(iv(iv(iv({userId:e,type:t},i&&{subscribeStart:i}),n&&{subscribeEnd:n}),r&&{firstFrame:r}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,i,n){e.forEach((e=>{this.dispatch({type:Ly.KEY_METRIC_SUBSCRIBE,metric:iv(iv(iv({userId:e.userId,type:e.type},t&&{subscribeStart:t}),i&&{subscribeEnd:i}),n&&{firstFrame:n})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){\"gateway\"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\\d+)-\\d+-\\d+-(\\d+)/,\"$1-*-*-$2\"))));try{return\"number\"!=typeof t?(this.dispatch({type:Ly.RECORD_JOIN_CHANNEL_SERVICE,record:iv(iv({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Ly.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Ly.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Ly.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:Ly.AVOID_JOIN_START,avoidJoinStart:e})}}let My=function(e){return e.h264=\"h264\",e.h265=\"h265\",e.vp8=\"vp8\",e.vp9=\"vp9\",e.av1=\"av1\",e}({});!function(e){e.opus=\"opus\",e.pcma=\"pcma\",e.pcmu=\"pcmu\",e.g722=\"g722\"}({});const Uy=128,xy=96,Vy=1e3,Fy=10;let By=0;function jy(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,\"string\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Gy(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Wy(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Gy(Object(i),!0).forEach((function(t){jy(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gy(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Hy=new class extends Sv{constructor(){super(...arguments),jy(this,\"currentUploadLogID\",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit(\"REPORT_LOG_UPLOAD\",e))}};class Ky{constructor(e){jy(this,\"logger\",void 0),jy(this,\"prefixLists\",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function Yy(){const e=new Date;return e.toTimeString().split(\" \")[0]+\":\"+e.getMilliseconds()}function qy(){const e=new Date,t=/((\\d+:){2}\\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+\":\"+e.getUTCMilliseconds():e.toTimeString().split(\" \")[0]+\":\"+e.getMilliseconds()}const zy={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Jy=Date.now(),Xy=e=>{for(const t in zy)if(Object.prototype.hasOwnProperty.call(zy,t)&&zy[t]===e)return t;return\"DEFAULT\"};const Qy=new class{constructor(){jy(this,\"proxyServerURL\",void 0),jy(this,\"logLevel\",zy.DEBUG),jy(this,\"uploadState\",\"collecting\"),jy(this,\"uploadLogWaitingList\",[]),jy(this,\"uploadLogUploadingList\",[]),jy(this,\"uploadErrorCount\",0),jy(this,\"currentLogID\",0),jy(this,\"url\",void 0),jy(this,\"extLog\",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[zy.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[zy.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[zy.WARNING].concat(t);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[zy.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[zy.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Ny(\"UPLOAD_LOG\",!0)}disableLogUpload(){Ny(\"UPLOAD_LOG\",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new Ky(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(Date.now()-Jy<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-Jy);const n=Math.max(0,Math.min(4,t[0]));if(t[0]=Yy()+\" Agora-SDK [\".concat(Xy(n),\"]:\"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;const r=Yy()+\" %cAgora-SDK [\".concat(Xy(n),\"]:\");let o=[];if(!Dy(\"USE_NEW_LOG\"))switch(n){case zy.DEBUG:o=[r,\"color: #64B5F6;\"].concat(t.slice(1)),console.log.apply(console,o);break;case zy.INFO:o=[r,\"color: #1E88E5; font-weight: bold;\"].concat(t.slice(1)),console.log.apply(console,o);break;case zy.WARNING:o=[r,\"color: #FB8C00; font-weight: bold;\"].concat(t.slice(1)),console.warn.apply(console,o);break;case zy.ERROR:o=[r,\"color: #B00020; font-weight: bold;\"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(Date.now()-Jy<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-Jy);const n=Math.max(0,Math.min(4,t[0]));t[0]=Yy()+\" Agora-SDK [\".concat(Xy(n),\"]:\"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!Dy(\"UPLOAD_LOG\"))return;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];Array.isArray(i[0])?i[0][0]=qy()+\" Agora-SDK [\".concat(Xy(e),\"]:\"):i[0]=qy()+\" Agora-SDK [\".concat(Xy(e),\"]:\");let r=\"\";i.forEach((e=>{\"object\"==typeof e&&(e=JSON.stringify(e)),r+=\"\".concat(e,\" \")})),this.uploadLogWaitingList.push({payload_str:r,log_level:e,log_item_id:this.currentLogID++}),\"uploading\"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState=\"uploading\",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:vy,process_id:Dy(\"PROCESS_ID\"),payload:JSON.stringify(e)};return my((async()=>{const e=await EI.post(this.url||(this.proxyServerURL?\"https://\".concat(this.proxyServerURL,\"/ls/?h=\").concat(Dy(\"LOG_UPLOAD_SERVER\"),\"&p=443&d=upload/v1\"):\"https://\".concat(Dy(\"LOG_UPLOAD_SERVER\"),\"/upload/v1\")),t,{responseType:\"text\"});if(\"OK\"!==e.data){const t=new Error(\"unexpected upload log response\");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>{const i={status:-1,message:t.message,errorRange:e.map((e=>e.log_item_id))};return t.response?(i.status=t.response.status,i.data=t.response.data,i.headers=t.response.headers):t.request&&(i.status=t.request.status),Hy.reportLogUploadError(i),!0}),{timeout:Dy(\"UPLOAD_LOG_REQUEST_RETRY_INTERVAL\"),maxRetryTimeout:Dy(\"UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL\")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Dy(\"UPLOAD_LOG_LENGTH_EACH_TIME\"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),Dy(\"UPLOAD_LOG_INTERVAL\"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),Dy(\"UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1\")):window.setTimeout((()=>this.uploadLogInterval()),Dy(\"UPLOAD_LOG_RETRY_INTERVAL_V1\"))})))}};var Zy;function $y(e){return dv(e.reportId,\"params.reportId\",0,100,!1),dv(e.category,\"params.category\",0,100,!1),dv(e.event,\"params.event\",0,100,!1),dv(e.label,\"params.label\",0,100,!1),av(e.value,\"params.value\",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(Zy={}).FREE=\"free\",Zy.UPLOADING=\"uploading\",function(e){e[e.MISC=0]=\"MISC\",e[e.INTERNAL_EVENT=1]=\"INTERNAL_EVENT\",e[e.PUBLIC_EVENT=2]=\"PUBLIC_EVENT\",e[e.WEB_EVENT=3]=\"WEB_EVENT\",e[e.INTERNAL_API=4]=\"INTERNAL_API\",e[e.WEB_API=5]=\"WEB_API\",e[e.PUBLIC_API=6]=\"PUBLIC_API\"}({});const eA={sid:\"\",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let tA=function(e){return e.PUBLISH=\"publish\",e.SUBSCRIBE=\"subscribe\",e.WS_COMPRESSOR_INIT=\"ws_compressor_init\",e.SESSION_INIT=\"session_init\",e.JOIN_CHOOSE_SERVER=\"join_choose_server\",e.REQ_USER_ACCOUNT=\"req_user_account\",e.JOIN_GATEWAY=\"join_gateway\",e.REJOIN_GATEWAY=\"rejoin_gateway\",e.STREAM_SWITCH=\"stream_switch\",e.REQUEST_PROXY_WORKER_MANAGER=\"request_proxy_worker_manager\",e.REQUEST_PROXY_APPCENTER=\"request_proxy_appcenter\",e.FIRST_VIDEO_RECEIVED=\"first_video_received\",e.FIRST_AUDIO_RECEIVED=\"first_audio_received\",e.FIRST_VIDEO_DECODE=\"first_video_decode\",e.FIRST_AUDIO_DECODE=\"first_audio_decode\",e.ON_ADD_AUDIO_STREAM=\"on_add_audio_stream\",e.ON_ADD_VIDEO_STREAM=\"on_add_video_stream\",e.ON_UPDATE_STREAM=\"on_update_stream\",e.ON_REMOVE_STREAM=\"on_remove_stream\",e.USER_ANALYTICS=\"req_user_analytics\",e.PC_STATS=\"pc_stats\",e.UPDATE_REMOTE_RTPCAPABILITIES=\"update_remote_rtpCapabilities\",e}({}),iA=function(e){return e.SESSION=\"io.agora.pb.Wrtc.Session\",e.JOIN_CHOOSE_SERVER=\"io.agora.pb.Wrtc.JoinChooseServer\",e.REQ_USER_ACCOUNT=\"io.agora.pb.Wrtc.ReqUserAccount\",e.JOIN_GATEWAY=\"io.agora.pb.Wrtc.JoinGateway\",e.RE_JOIN_GATEWAY=\"io.agora.pb.Wrtc.ReJoinGateway\",e.PUBLISH=\"io.agora.pb.Wrtc.Publish\",e.SUBSCRIBE=\"io.agora.pb.Wrtc.Subscribe\",e.WS_COMPRESSOR_INIT=\"io.agora.pb.Wrtc.WsCompressorInit\",e.STREAM_SWITCH=\"io.agora.pb.Wrtc.StreamSwitch\",e.AUDIO_SENDING_STOPPED=\"io.agora.pb.Wrtc.AudioSendingStopped\",e.VIDEO_SENDING_STOPPED=\"io.agora.pb.Wrtc.VideoSendingStopped\",e.REQUEST_PROXY_APPCENTER=\"io.agora.pb.Wrtc.RequestProxyAppCenter\",e.REQUEST_PROXY_WORKER_MANAGER=\"io.agora.pb.Wrtc.RequestProxyWorkerManager\",e.API_INVOKE=\"io.agora.pb.Wrtc.ApiInvoke\",e.FIRST_VIDEO_RECEIVED=\"io.agora.pb.Wrtc.FirstVideoReceived\",e.FIRST_AUDIO_RECEIVED=\"io.agora.pb.Wrtc.FirstAudioReceived\",e.FIRST_VIDEO_DECODE=\"io.agora.pb.Wrtc.FirstVideoDecode\",e.FIRST_AUDIO_DECODE=\"io.agora.pb.Wrtc.FirstAudioDecode\",e.ON_ADD_AUDIO_STREAM=\"io.agora.pb.Wrtc.OnAddAudioStream\",e.ON_ADD_VIDEO_STREAM=\"io.agora.pb.Wrtc.OnAddVideoStream\",e.ON_UPDATE_STREAM=\"io.agora.pb.Wrtc.OnUpdateStream\",e.ON_REMOVE_STREAM=\"io.agora.pb.Wrtc.OnRemoveStream\",e.JOIN_CHANNEL_TIMEOUT=\"io.agora.pb.Wrtc.JoinChannelTimeout\",e.PEER_PUBLISH_STATUS=\"io.agora.pb.Wrtc.PeerPublishStatus\",e.WORKER_EVENT=\"io.agora.pb.Wrtc.WorkerEvent\",e.AP_WORKER_EVENT=\"io.agora.pb.Wrtc.APWorkerEvent\",e.JOIN_WEB_PROXY_AP=\"io.agora.pb.Wrtc.JoinWebProxyAP\",e.WEBSOCKET_QUIT=\"io.agora.pb.Wrtc.WebSocketQuit\",e.USER_ANALYTICS=\"io.agora.pb.Wrtc.UserAnalytics\",e.AUTOPLAY_FAILED=\"io.agora.pb.Wrtc.AutoplayFailed\",e.PC_STATS=\"io.agora.pb.Wrtc.PCStats\",e.UPDATE_REMOTE_RTPCAPABILITIES=\"io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities\",e}({});!function(e){e[e.WORKER_EVENT=156]=\"WORKER_EVENT\",e[e.AP_WORKER_EVENT=160]=\"AP_WORKER_EVENT\"}({});let nA=function(e){return e[e.SESSION=26]=\"SESSION\",e[e.JOIN_CHOOSE_SERVER=27]=\"JOIN_CHOOSE_SERVER\",e[e.REQ_USER_ACCOUNT=196]=\"REQ_USER_ACCOUNT\",e[e.JOIN_GATEWAY=28]=\"JOIN_GATEWAY\",e[e.PUBLISH=30]=\"PUBLISH\",e[e.SUBSCRIBE=29]=\"SUBSCRIBE\",e[e.WS_COMPRESSOR_INIT=9430]=\"WS_COMPRESSOR_INIT\",e[e.STREAM_SWITCH=32]=\"STREAM_SWITCH\",e[e.AUDIO_SENDING_STOPPED=33]=\"AUDIO_SENDING_STOPPED\",e[e.VIDEO_SENDING_STOPPED=34]=\"VIDEO_SENDING_STOPPED\",e[e.REQUEST_PROXY_APPCENTER=35]=\"REQUEST_PROXY_APPCENTER\",e[e.REQUEST_PROXY_WORKER_MANAGER=36]=\"REQUEST_PROXY_WORKER_MANAGER\",e[e.API_INVOKE=41]=\"API_INVOKE\",e[e.FIRST_VIDEO_RECEIVED=348]=\"FIRST_VIDEO_RECEIVED\",e[e.FIRST_AUDIO_RECEIVED=349]=\"FIRST_AUDIO_RECEIVED\",e[e.FIRST_VIDEO_DECODE=350]=\"FIRST_VIDEO_DECODE\",e[e.FIRST_AUDIO_DECODE=351]=\"FIRST_AUDIO_DECODE\",e[e.ON_ADD_AUDIO_STREAM=352]=\"ON_ADD_AUDIO_STREAM\",e[e.ON_ADD_VIDEO_STREAM=353]=\"ON_ADD_VIDEO_STREAM\",e[e.ON_UPDATE_STREAM=356]=\"ON_UPDATE_STREAM\",e[e.ON_REMOVE_STREAM=355]=\"ON_REMOVE_STREAM\",e[e.JOIN_CHANNEL_TIMEOUT=407]=\"JOIN_CHANNEL_TIMEOUT\",e[e.PEER_PUBLISH_STATUS=408]=\"PEER_PUBLISH_STATUS\",e[e.WORKER_EVENT=156]=\"WORKER_EVENT\",e[e.AP_WORKER_EVENT=160]=\"AP_WORKER_EVENT\",e[e.JOIN_WEB_PROXY_AP=700]=\"JOIN_WEB_PROXY_AP\",e[e.WEBSOCKET_QUIT=671]=\"WEBSOCKET_QUIT\",e[e.USER_ANALYTICS=1e4]=\"USER_ANALYTICS\",e[e.AUTOPLAY_FAILED=9178]=\"AUTOPLAY_FAILED\",e}({});class rA{constructor(){jy(this,\"baseInfoMap\",new Map),jy(this,\"proxyServer\",void 0),jy(this,\"eventUploadTimer\",void 0),jy(this,\"setSessionIdTimer\",void 0),jy(this,\"url\",void 0),jy(this,\"backupUrl\",void 0),jy(this,\"_appId\",void 0),jy(this,\"keyEventUploadPendingItems\",[]),jy(this,\"normalEventUploadPendingItems\",[]),jy(this,\"apiInvokeUploadPendingItems\",[]),jy(this,\"apiInvokeCount\",0),jy(this,\"ltsList\",[]),jy(this,\"lastSendNormalEventTime\",Date.now()),jy(this,\"customReportCounterTimer\",void 0),jy(this,\"customReportCount\",0),jy(this,\"extApiInvoke\",(async e=>{for(const t of e){const e=Wy(Wy({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Iv.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Dy(\"EVENT_REPORT_SEND_INTERVAL\")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Dy(\"EVENT_REPORT_SEND_INTERVAL\"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void Qy.error(\"adjust session \".concat(e,\" start time, sid is not exist or info is undefined\"));const t=this.baseInfoMap.get(e),i=Date.now(),n=t.startTime;t.startTime=i,Qy.debug(\"rewrite session \".concat(e,\" startTime: \").concat(i,\" , \").concat(i-n,\"ms\")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,i){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const n=Date.now();this.apiInvokeCount+=1;const r=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:n,options:t.options,states:t.states||null}),s=!!Dy(\"SHOW_REPORT_INVOKER_LOG\");s&&Qy.info(\"\".concat(t.name,\" start\"),t.options);let a=!1;$v(t.timeout).then((()=>{a||(this.sendApiInvoke(Wy(Wy({},o()),{},{error:nv.API_INVOKE_TIMEOUT,success:!1})),Qy.debug(\"\".concat(t.name,\" timeout\")))}));const c=new rv(nv.UNEXPECTED_ERROR,\"\".concat(t.name,\": this api invoke is end\"));return{onSuccess:e=>{const n=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(Wy(Wy({},o()),{},{success:!0},t.reportResult&&{result:e})),s&&Qy.info(\"\".concat(t.name,\" onSuccess\")),e};return i?ry(n,t.name+\"Success\",i,(()=>a=!0)):n()},onError:e=>{const n=()=>{if(a)throw e;a=!0,this.sendApiInvoke(Wy(Wy({},o()),{},{success:!1,error:e})),s&&Qy.info(\"\".concat(t.name,\" onFailure\"),e.toString())};return i?ry(n,t.name+\"Error\",i,(()=>a=!0)):n()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const i=Date.now(),n=this.createBaseInfo(e,i);n.cname=t.cname;const r=Object.assign({},{willUploadConsoleLog:Dy(\"UPLOAD_LOG\"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:yy?\"global\":\"oversea\",areas:Dy(\"AREAS\")&&Dy(\"AREAS\").join(\",\")},t.extend),{stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:d,clientRole:l}=t,u=Date.now(),h=Wy(Wy({},n),{},{eventType:tA.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,buildFormat:t.buildFormat,build:wy,lts:u,elapse:u-i,extend:JSON.stringify(r),mode:t.mode,process:Dy(\"PROCESS_ID\"),appType:Dy(\"APP_TYPE\"),success:!0,version:vy,stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:d,clientType:Dn(p=window.navigator.userAgent).call(p,\"AgoraWebView\")?42:20,clientRole:l,serviceId:Dy(\"PROCESS_ID\"),extensionID:Dy(\"PLUGIN_INFO\").join(\",\")||\"\"});var p;this.send({type:iA.SESSION,data:h},!0)}joinChooseServer(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{eventType:tA.JOIN_CHOOSE_SERVER,lts:r,eventElapse:t.elapse||r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-i.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||\"\",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:iA.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{eventType:tA.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:t.elapse||r-i.startTime,eventElapse:r-t.lts,extend:JSON.stringify(t.extend)});this.send({type:iA.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;const r=Date.now(),{firstSuccess:o,avoidJoinStartTime:s}=t,a=r-(o&&s?s:i.startTime),c=Wy(Wy({},n),{},{eventType:tA.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,errorMsg:t.errorMsg||\"\",elapse:a,eventElapse:r-t.lts,firstSuccess:o,signalChannel:t.signalChannel,preload:t.preload?1:0});t.succ&&(i.lastJoinSuccessTime=r),this.send({type:iA.JOIN_GATEWAY,data:c},!0)}joinChannelTimeout(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=Date.now(),r=Wy(Wy({},i.info),{},{lts:n,timeout:t,elapse:n-i.startTime});this.send({type:iA.JOIN_CHANNEL_TIMEOUT,data:r},!0)}publish(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{eventType:tA.PUBLISH,lts:r,eventElapse:t.eventElapse,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:iA.PUBLISH,data:o},!0)}subscribe(e,t,i){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),s=Wy(Wy({},r),{},{eventType:tA.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-n.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid,preSsrc:t.preSsrc?1:0},i&&{extend:JSON.stringify({isMassSubscribe:!0})});\"string\"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:iA.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const i=[...d_(t=this.baseInfoMap).call(t)],n=i.length?i[0]:\"UnableToGetSid\",r=this.baseInfoMap.get(n);if(!r)return;const o=r.info,s=Date.now(),a=Wy(Wy({},o),{},{eventType:tA.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-r.startTime,status:e.status?1:2});this.send({type:iA.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=Wy(Wy(Wy({},o),n),{},{elapse:s-r.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max((n.firstFrame||s)-r.startTime,0),apEnd:Math.max(n.apEnd-r.startTime,0),apStart:Math.max(n.apStart-r.startTime,0),joinGwEnd:Math.max(n.joinGwEnd-r.startTime,0),joinGwStart:Math.max(n.joinGwStart-r.startTime,0),pcEnd:Math.max(n.pcEnd-r.startTime,0),pcStart:Math.max(n.pcStart-r.startTime,0),subscriberEnd:Math.max(n.subscriberEnd-r.startTime,0),subscriberStart:Math.max(n.subscriberStart-r.startTime,0),videoAddNotify:Math.max(n.videoAddNotify-r.startTime,0)});this.send({type:i,data:a},!0)}firstRemoteFrame(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=Wy(Wy(Wy({},o),n),{},{elapse:s-r.startTime,eventType:t,lts:s});this.send({type:i,data:a},!0)}pcStats(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy(Wy({},n),t),{},{vid:void 0===n.vid?0:Number(n.vid),elapse:r-i.startTime,eventType:tA.PC_STATS,lts:r,preallocation:t.preallocation?1:0});this.send({type:iA.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy(Wy({},n),t),{},{vid:void 0===n.vid?0:Number(n.vid),eventType:tA.UPDATE_REMOTE_RTPCAPABILITIES,lts:r});this.send({type:iA.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Date.now(),a=Wy(Wy(Wy({},o),n),{},{eventType:t,lts:s});this.send({type:i,data:a},!0)}streamSwitch(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{eventType:tA.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-i.startTime,success:t.succ});this.send({type:iA.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{eventType:tA.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:iA.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{eventType:tA.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:iA.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?Qy.debug(\"reportProxyServerurl: \".concat(e)):Qy.debug(\"disable reportProxyServerurl: \".concat(e))}peerPublishStatus(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy({},n),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:r,elapse:r-i.startTime,joinChannelSuccessElapse:r-(i.lastJoinSuccessTime||r),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:iA.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now();(function(e,t,i){const n=e[t];if(!n||\"string\"!=typeof n)return[e];e[t]=\"\";const r=Xv(JSON.stringify(e));let o=0;const s=[];let a=0;for(let c=0;c<n.length;c++)a+=n.charCodeAt(c)<=127?1:3,a<=i-r||(s[s.length]=iv(iv({},e),{},{[t]:n.substring(o,c)}),o=c,a=n.charCodeAt(c)<=127?1:3);return o!==n.length-1&&(s[s.length]=iv(iv({},e),{},{[t]:n.substring(o)})),s})(Wy(Wy(Wy({},n),t),{},{elapse:r-i.startTime,lts:r,productType:\"WebRTC\"}),\"payload\",1300).forEach((e=>this.send({type:iA.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy(Wy({},n),t),{},{elapse:r-i.startTime,lts:r});this.send({type:iA.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy(Wy({},n),t),{},{elapse:r-i.startTime,lts:r,extend:t.extend||void 0});this.send({type:iA.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Date.now(),o=Wy(Wy(Wy({},n),t),{},{elapse:r-i.startTime,lts:r});this.send({type:iA.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>Dy(\"CUSTOM_REPORT_LIMIT\"))throw new rv(nv.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const i=Date.now(),n=t.map((t=>({type:iA.USER_ANALYTICS,data:Wy(Wy({sid:e},t),{},{lts:i})})));try{Dy(\"NEW_REPORT_SERVER\")?await this.postDataToStatsCollector2(n):await this.postDataToStatsCollector(n)}catch(e){throw Qy.error(\"send custom report message failed\",e.toString()),new rv(nv.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=Dy(\"NOT_REPORT_EVENT\");if(e.tag&&Dn(t)&&Dn(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:r,cid:o}=i.info;let s;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof rv){const{code:t,message:i}=e.error;s=t||i||e.error.toString()}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:n,cid:o,uid:r,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:iA.API_INVOKE,data:a},!1),!0}appendSessionId(){rA.__CLIENT_LIST__.forEach((e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let i=0;i<t;i++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>Dy(\"NORMAL_EVENT_QUEUE_CAPACITY\")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const i=[],n=[];for(;e.length;){const t=e.shift();i.length<20?i.push(t):n.push(t)}e.push(...n);for(const e of[...i]){var r;-1!==this.ltsList.indexOf(e.data.lts)?(e.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(e.data.lts)):(this.ltsList.push(e.data.lts),aE(r=this.ltsList).call(r,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),Dy(\"ENABLE_EVENT_REPORT\")?(i.length&&(Dy(\"NEW_REPORT_SERVER\")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((e=>i=>{Dy(\"EVENT_REPORT_RETRY\")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>Dy(\"NORMAL_EVENT_QUEUE_CAPACITY\")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Dy(\"NORMAL_EVENT_QUEUE_CAPACITY\")),Qy.warning(\"report: drop normal events\"))))})(i)),e):e}async postDataToStatsCollector2(e){Vv.networkState===Pv.OFFLINE&&await Gh.race([Vv.onlineWaiter,$v(2*_y.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const i=mv(JSON.stringify(e.data)),n=new ArrayBuffer(5),r=(e=>{let t=0;return Object.entries(iA).forEach((i=>{let[n,r]=i;r===e.type&&(t=nA[n])})),t})(e),o=new DataView(n);o.setUint16(0,i.byteLength,!0),o.setUint8(2,255&r),o.setUint8(3,r>>>8&255),o.setUint8(4,r>>>16&255),t=fv(t,new Uint8Array(n)),t=fv(t,i)})),t},i=\"event\";let n=this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Dy(\"NEW_REPORT_SERVER_DOMAINS\")[0],\"&p=443&d=\").concat(i):\"https://\".concat(Dy(\"NEW_REPORT_SERVER_DOMAINS\")[0],\"/\").concat(i);for(let r=0;r<2;r+=1){1===r&&(n=this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Dy(\"NEW_REPORT_SERVER_DOMAINS\")[1],\"&p=443&d=\").concat(i):\"https://\".concat(Dy(\"NEW_REPORT_SERVER_DOMAINS\")[1],\"/\").concat(i));try{await Ry(n,{timeout:1e4,data:t(e),headers:Wy(Wy({biz:\"webrtc\",sendts:Math.round(Date.now()/1e3),debug:\"false\"},this._appId&&{appid:this._appId}),{},{\"Content-Type\":\"application/octet-stream\"})},!0)}catch(e){if(1===r)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={msgType:\"EventMessages\",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};Vv.networkState===Pv.OFFLINE&&await Gh.race([Vv.onlineWaiter,$v(2*_y.maxRetryTimeout)]);const n=t?\"/events/proto-raws\":\"/events/messages\";let r=this.url||(this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Dy(\"EVENT_REPORT_DOMAIN\"),\"&p=\").concat(Dy(\"STATS_COLLECTOR_PORT\"),\"&d=\").concat(n):\"https://\".concat(Dy(\"EVENT_REPORT_DOMAIN\"),\":\").concat(Dy(\"STATS_COLLECTOR_PORT\")).concat(n));for(let e=0;e<2;e+=1){1===e&&(r=this.backupUrl||(this.proxyServer?\"https://\".concat(this.proxyServer,\"/rs/?h=\").concat(Dy(\"EVENT_REPORT_BACKUP_DOMAIN\"),\"&p=\").concat(Dy(\"STATS_COLLECTOR_PORT\"),\"&d=\").concat(n):\"https://\".concat(Dy(\"EVENT_REPORT_BACKUP_DOMAIN\"),\":\").concat(Dy(\"STATS_COLLECTOR_PORT\")).concat(n)));try{t?await Cy(r,{timeout:1e4,data:i}):await Ry(r,{timeout:1e4,data:i})}catch(t){if(1===e)throw t;continue}return}}createBaseInfo(e,t){const i=Object.assign({},eA);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:t}),i}reportResourceTiming(e,t){const i=performance.getEntriesByName(e),n=i[i.length-1];n&&this.reportApiInvoke(t,{name:\"Client.resourceTiming\",options:n,tag:Iv.TRACER}).onSuccess()}}function oA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,i,n){const r=n.value;if(\"function\"==typeof r){const o=e.className||t.__className__||(\"AgoraRTCClient\"===t.constructor.name?\"Client\":t.constructor.name);n.value=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];let a=n;if(e.argsMap)try{a=e.argsMap(this,...n)}catch(e){Qy.warning(e),a=[]}try{JSON.stringify(a)}catch(e){Qy.warning(\"arguments for method \".concat(o,\".\").concat(String(i),\" not serializable for apiInvoke.\")),a=[]}const c=(e.report||sA).reportApiInvoke(this._sessionId||null,{name:\"\".concat(o,\".\").concat(String(i)),options:a,tag:Iv.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=r.apply(this,n);return t instanceof Gh?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return n}}jy(rA,\"__CLIENT_LIST__\",[]);const sA=new rA;Hy.on(\"REPORT_LOG_UPLOAD\",(e=>{e.networkState=Vv.networkState,sA.reportApiInvoke(null,{name:\"logUploadError\",options:e,tag:Iv.TRACER}).onSuccess(\"logUploadError\")}));const aA=[\"CHINA\",\"GLOBAL\"],cA=function(){const e=\"us\".concat(\"erna\",\"me\"),t=\"pa\".concat(\"sswo\",\"rd\"),i=[\"t\",\"s\",\"t\"];i.splice(1,0,\"e\");const n=i.join(\"\"),r=[];for(let e=0;e<6;e++)r.push(\"1\");const o=r.join(\"\"),s={};return s[e]=n,s[t]=o,Object.assign(s,{turnServerURL:\"\",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=cA,yy||(Oy.WEBCS_DOMAIN=[\"ap-web-1-oversea.agora.io\",\"ap-web-1-north-america.agora.io\"],Oy.WEBCS_DOMAIN_BACKUP_LIST=[\"ap-web-2-oversea.agora.io\",\"ap-web-2-north-america.agora.io\"],Oy.PROXY_CS=[\"proxy-ap-web-oversea.agora.io\",\"proxy-ap-web-america.agora.io\"],Oy.CDS_AP=[\"cds-ap-web-oversea.agora.io\",\"cds-ap-web-america.agora.io\",\"cds-ap-web-america2.agora.io\"],Oy.ACCOUNT_REGISTER=[\"sua-ap-web-oversea.agora.io\",\"sua-ap-web-america.agora.io\",\"sua-ap-web-america2.agora.io\"],Oy.UAP_AP=[\"uap-ap-web-oversea.agora.io\",\"uap-ap-web-america.agora.io\",\"uap-ap-web-america2.agora.io\"],Oy.LOG_UPLOAD_SERVER=\"logservice-oversea.agora.io\",Oy.EVENT_REPORT_DOMAIN=\"statscollector-1-oversea.agora.io\",Oy.EVENT_REPORT_BACKUP_DOMAIN=\"statscollector-2-oversea.agora.io\",Oy.PROXY_SERVER_TYPE3=\"webrtc-cloud-proxy.agora.io\",Oy.AREAS=[\"NORTH_AMERICA\",\"OVERSEA\"]);const dA=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],lA=[];function uA(e,t){return!!t&&lA.some((i=>i.uid===e&&i.channelName===t))}rA.__CLIENT_LIST__=lA;var hA=If.forEach,pA=Bn(\"forEach\")?[].forEach:function(e){return hA(this,e,arguments.length>1?arguments[1]:void 0)};wi({target:\"Array\",proto:!0,forced:[].forEach!=pA},{forEach:pA});var _A=Xi(\"Array\").forEach,EA=pn,mA=Ze,fA=l,TA=_A,SA=Array.prototype,gA={DOMTokenList:!0,NodeList:!0},RA=function(e){var t=e.forEach;return e===SA||fA(SA,e)&&t===SA.forEach||mA(gA,EA(e))?TA:t},CA=i(RA),IA=Je,vA=eo;wi({target:\"Object\",stat:!0,forced:n((function(){vA(1)}))},{keys:function(e){return vA(IA(e))}});var yA=i(ie.Object.keys),AA=i(zn),bA=wi,wA=vm,OA=d([].reverse),NA=[1,2];bA({target:\"Array\",proto:!0,forced:String(NA)===String(NA.reverse())},{reverse:function(){return wA(this)&&(this.length=this.length),OA(this)}});var DA=Xi(\"Array\").reverse,PA=l,LA=DA,kA=Array.prototype,MA=function(e){var t=e.reverse;return e===kA||PA(kA,e)&&t===kA.reverse?LA:t},UA=MA,xA=i(UA),VA=wi,FA=vm,BA=jc,jA=te,GA=xi,WA=Gi,HA=Z,KA=E_,YA=ht,qA=Xc,zA=Um(\"slice\"),JA=YA(\"species\"),XA=Array,QA=Math.max;VA({target:\"Array\",proto:!0,forced:!zA},{slice:function(e,t){var i,n,r,o=HA(this),s=WA(o),a=GA(e,s),c=GA(void 0===t?s:t,s);if(FA(o)&&(i=o.constructor,(BA(i)&&(i===XA||FA(i.prototype))||jA(i)&&null===(i=i[JA]))&&(i=void 0),i===XA||void 0===i))return qA(o,a,c);for(n=new(void 0===i?XA:i)(QA(c-a,0)),r=0;a<c;a++,r++)a in o&&KA(n,r,o[a]);return n.length=r,n}});var ZA=Xi(\"Array\").slice,$A=l,eb=ZA,tb=Array.prototype,ib=function(e){var t=e.slice;return e===tb||$A(tb,e)&&t===tb.slice?eb:t},nb=i(ib);function rb(e,t,i,n,r){var o,s,a,c={};return CA(o=yA(n)).call(o,(function(e){c[e]=n[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,(\"value\"in c||c.initializer)&&(c.writable=!0),c=AA(s=xA(a=nb(i).call(i)).call(a)).call(s,(function(i,n){return n(e,t,i)||i}),c),r&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(r):void 0,c.initializer=void 0),void 0===c.initializer&&(Cm(e,t,c),c=null),c}let ob=function(e){return e.L1T1=\"L1T1\",e.L1T2=\"L1T2\",e.L1T3=\"L1T3\",e.L1T3_KEY=\"L1T3_KEY\",e.L2T1_KEY=\"L2T1_KEY\",e.L2T2_KEY=\"L2T2_KEY\",e.L2T3_KEY=\"L2T3_KEY\",e.L3T1_KEY=\"L3T1_KEY\",e.L3T2_KEY=\"L3T2_KEY\",e.L3T3_KEY=\"L3T3_KEY\",e}({}),sb=function(e){return e.CERTIFICATE=\"certificate\",e.CODEC=\"codec\",e.CANDIDATE_PAIR=\"candidate-pair\",e.LOCAL_CANDIDATE=\"local-candidate\",e.REMOTE_CANDIDATE=\"remote-candidate\",e.INBOUND=\"inbound-rtp\",e.TRACK=\"track\",e.OUTBOUND=\"outbound-rtp\",e.PC=\"peer-connection\",e.REMOTE_INBOUND=\"remote-inbound-rtp\",e.REMOTE_OUTBOUND=\"remote-outbound-rtp\",e.TRANSPORT=\"transport\",e.CSRC=\"csrc\",e.DATA_CHANNEL=\"data-channel\",e.STREAM=\"stream\",e.SENDER=\"sender\",e.RECEIVER=\"receiver\",e}({}),ab=function(e){return e[e.ACCESS_POINT=101]=\"ACCESS_POINT\",e[e.UNILBS=201]=\"UNILBS\",e[e.STRING_UID_ALLOCATOR=901]=\"STRING_UID_ALLOCATOR\",e}({}),cb=function(e){return e[e.IIIEGAL_APPID=1]=\"IIIEGAL_APPID\",e[e.IIIEGAL_UID=2]=\"IIIEGAL_UID\",e[e.INTERNAL_ERROR=3]=\"INTERNAL_ERROR\",e}({}),db=function(e){return e[e.INVALID_VENDOR_KEY=5]=\"INVALID_VENDOR_KEY\",e[e.INVALID_CHANNEL_NAME=7]=\"INVALID_CHANNEL_NAME\",e[e.INTERNAL_ERROR=8]=\"INTERNAL_ERROR\",e[e.NO_AUTHORIZED=9]=\"NO_AUTHORIZED\",e[e.DYNAMIC_KEY_TIMEOUT=10]=\"DYNAMIC_KEY_TIMEOUT\",e[e.NO_ACTIVE_STATUS=11]=\"NO_ACTIVE_STATUS\",e[e.DYNAMIC_KEY_EXPIRED=13]=\"DYNAMIC_KEY_EXPIRED\",e[e.STATIC_USE_DYNAMIC_KEY=14]=\"STATIC_USE_DYNAMIC_KEY\",e[e.DYNAMIC_USE_STATIC_KEY=15]=\"DYNAMIC_USE_STATIC_KEY\",e[e.USER_OVERLOAD=16]=\"USER_OVERLOAD\",e[e.FORBIDDEN_REGION=18]=\"FORBIDDEN_REGION\",e[e.CANNOT_MEET_AREA_DEMAND=19]=\"CANNOT_MEET_AREA_DEMAND\",e}({}),lb=function(e){return e[e.NO_FLAG_SET=100]=\"NO_FLAG_SET\",e[e.FLAG_SET_BUT_EMPTY=101]=\"FLAG_SET_BUT_EMPTY\",e[e.INVALID_FALG_SET=102]=\"INVALID_FALG_SET\",e[e.FLAG_SET_BUT_NO_RE=103]=\"FLAG_SET_BUT_NO_RE\",e[e.INVALID_SERVICE_ID=104]=\"INVALID_SERVICE_ID\",e[e.NO_SERVICE_AVAILABLE=200]=\"NO_SERVICE_AVAILABLE\",e[e.NO_SERVICE_AVAILABLE_P2P=201]=\"NO_SERVICE_AVAILABLE_P2P\",e[e.NO_SERVICE_AVAILABLE_VOICE=202]=\"NO_SERVICE_AVAILABLE_VOICE\",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]=\"NO_SERVICE_AVAILABLE_WEBRTC\",e[e.NO_SERVICE_AVAILABLE_CDS=204]=\"NO_SERVICE_AVAILABLE_CDS\",e[e.NO_SERVICE_AVAILABLE_CDN=205]=\"NO_SERVICE_AVAILABLE_CDN\",e[e.NO_SERVICE_AVAILABLE_TDS=206]=\"NO_SERVICE_AVAILABLE_TDS\",e[e.NO_SERVICE_AVAILABLE_REPORT=207]=\"NO_SERVICE_AVAILABLE_REPORT\",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]=\"NO_SERVICE_AVAILABLE_APP_CENTER\",e[e.NO_SERVICE_AVAILABLE_ENV0=209]=\"NO_SERVICE_AVAILABLE_ENV0\",e[e.NO_SERVICE_AVAILABLE_VOET=210]=\"NO_SERVICE_AVAILABLE_VOET\",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]=\"NO_SERVICE_AVAILABLE_STRING_UID\",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]=\"NO_SERVICE_AVAILABLE_WEBRTC_UNILBS\",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]=\"NO_SERVICE_AVAILABLE_UNILBS_FLV\",e}({}),ub=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]=\"K_TIMESTAMP_EXPIRED\",e[e.K_CHANNEL_PERMISSION_INVALID=3]=\"K_CHANNEL_PERMISSION_INVALID\",e[e.K_CERTIFICATE_INVALID=4]=\"K_CERTIFICATE_INVALID\",e[e.K_CHANNEL_NAME_EMPTY=5]=\"K_CHANNEL_NAME_EMPTY\",e[e.K_CHANNEL_NOT_FOUND=6]=\"K_CHANNEL_NOT_FOUND\",e[e.K_TICKET_INVALID=7]=\"K_TICKET_INVALID\",e[e.K_CHANNEL_CONFLICTED=8]=\"K_CHANNEL_CONFLICTED\",e[e.K_SERVICE_NOT_READY=9]=\"K_SERVICE_NOT_READY\",e[e.K_SERVICE_TOO_HEAVY=10]=\"K_SERVICE_TOO_HEAVY\",e[e.K_UID_BANNED=14]=\"K_UID_BANNED\",e[e.K_IP_BANNED=15]=\"K_IP_BANNED\",e[e.K_CHANNEL_BANNED=16]=\"K_CHANNEL_BANNED\",e[e.K_AUTO_REBALANCE=28]=\"K_AUTO_REBALANCE\",e[e.WARN_NO_AVAILABLE_CHANNEL=103]=\"WARN_NO_AVAILABLE_CHANNEL\",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]=\"WARN_LOOKUP_CHANNEL_TIMEOUT\",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]=\"WARN_LOOKUP_CHANNEL_REJECTED\",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]=\"WARN_OPEN_CHANNEL_TIMEOUT\",e[e.WARN_OPEN_CHANNEL_REJECTED=107]=\"WARN_OPEN_CHANNEL_REJECTED\",e[e.WARN_REQUEST_DEFERRED=108]=\"WARN_REQUEST_DEFERRED\",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]=\"ERR_DYNAMIC_KEY_TIMEOUT\",e[e.ERR_NO_AUTHORIZED=110]=\"ERR_NO_AUTHORIZED\",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]=\"ERR_VOM_SERVICE_UNAVAILABLE\",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]=\"ERR_NO_CHANNEL_AVAILABLE_CODE\",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]=\"ERR_MASTER_VOCS_UNAVAILABLE\",e[e.ERR_INTERNAL_ERROR=115]=\"ERR_INTERNAL_ERROR\",e[e.ERR_NO_ACTIVE_STATUS=116]=\"ERR_NO_ACTIVE_STATUS\",e[e.ERR_INVALID_UID=117]=\"ERR_INVALID_UID\",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]=\"ERR_DYNAMIC_KEY_EXPIRED\",e[e.ERR_STATIC_USE_DYANMIC_KE=119]=\"ERR_STATIC_USE_DYANMIC_KE\",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]=\"ERR_DYNAMIC_USE_STATIC_KE\",e[e.ERR_NO_VOCS_AVAILABLE=2e3]=\"ERR_NO_VOCS_AVAILABLE\",e[e.ERR_NO_VOS_AVAILABLE=2001]=\"ERR_NO_VOS_AVAILABLE\",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]=\"ERR_JOIN_CHANNEL_TIMEOUT\",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]=\"ERR_REPEAT_JOIN_CHANNEL\",e[e.ERR_JOIN_BY_MULTI_IP=2004]=\"ERR_JOIN_BY_MULTI_IP\",e[e.ERR_NOT_JOINED=2011]=\"ERR_NOT_JOINED\",e[e.ERR_REPEAT_JOIN_REQUEST=2012]=\"ERR_REPEAT_JOIN_REQUEST\",e[e.ERR_INVALID_VENDOR_KEY=2013]=\"ERR_INVALID_VENDOR_KEY\",e[e.ERR_INVALID_CHANNEL_NAME=2014]=\"ERR_INVALID_CHANNEL_NAME\",e[e.ERR_INVALID_STRINGUID=2015]=\"ERR_INVALID_STRINGUID\",e[e.ERR_TOO_MANY_USERS=2016]=\"ERR_TOO_MANY_USERS\",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]=\"ERR_SET_CLIENT_ROLE_TIMEOUT\",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]=\"ERR_SET_CLIENT_ROLE_NO_PERMISSION\",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]=\"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]=\"ERR_PUBLISH_REQUEST_INVALID\",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]=\"ERR_SUBSCRIBE_REQUEST_INVALID\",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]=\"ERR_NOT_SUPPORTED_MESSAGE\",e[e.ERR_ILLEAGAL_PLUGIN=2023]=\"ERR_ILLEAGAL_PLUGIN\",e[e.ERR_REJOIN_TOKEN_INVALID=2024]=\"ERR_REJOIN_TOKEN_INVALID\",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]=\"ERR_REJOIN_USER_NOT_JOINED\",e[e.ERR_INVALID_OPTIONAL_INFO=2027]=\"ERR_INVALID_OPTIONAL_INFO\",e[e.ILLEGAL_AES_PASSWORD=2028]=\"ILLEGAL_AES_PASSWORD\",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]=\"ILLEGAL_CLIENT_ROLE_LEVEL\",e[e.ERR_TOO_MANY_BROADCASTERS=2031]=\"ERR_TOO_MANY_BROADCASTERS\",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]=\"ERR_TOO_MANY_SUBSCRIBERS\",e[e.ERR_LICENSE_MISSING=32769]=\"ERR_LICENSE_MISSING\",e[e.ERR_LICENSE_EXPIRED=32771]=\"ERR_LICENSE_EXPIRED\",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]=\"ERR_LICENSE_MINUTES_EXCEEDED\",e[e.ERR_LICENSE_PERIOD_INVALID=32774]=\"ERR_LICENSE_PERIOD_INVALID\",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]=\"ERR_LICENSE_MULTIPLE_SDK_SERVICE\",e[e.ERR_LICENSE_ILLEGAL=32783]=\"ERR_LICENSE_ILLEGAL\",e[e.ERR_TEST_RECOVER=9e3]=\"ERR_TEST_RECOVER\",e[e.ERR_TEST_TRYNEXT=9001]=\"ERR_TEST_TRYNEXT\",e[e.ERR_TEST_RETRY=9002]=\"ERR_TEST_RETRY\",e}({}),hb=function(e){return e.CONNECTING=\"connecting\",e.CONNECTED=\"connected\",e.RECONNECTING=\"reconnecting\",e.CLOSED=\"closed\",e}({}),pb=function(e){return e.WS_CONNECTED=\"ws_connected\",e.WS_RECONNECTING=\"ws_reconnecting\",e.WS_CLOSED=\"ws_closed\",e.WS_RECONNECT_WAITTING_FINISH=\"ws_reconnect_waitting_finish\",e.WS_RECONNECT_CREATE_CONNECTION=\"ws_reconnect_create_connection\",e.ON_BINARY_DATA=\"on_binary_data\",e.REQUEST_RECOVER=\"request_recover\",e.REQUEST_JOIN_INFO=\"request_join_info\",e.REQUEST_REJOIN_INFO=\"req_rejoin_info\",e.IS_P2P_DISCONNECTED=\"is_p2p_dis\",e.DISCONNECT_P2P=\"dis_p2p\",e.ABORT_P2P_EXECUTION=\"abort_p2p_execution\",e.NEED_RENEW_SESSION=\"need-sid\",e.REPORT_JOIN_GATEWAY=\"report_join_gateway\",e.REQUEST_TIMEOUT=\"request_timeout\",e.REQUEST_SUCCESS=\"request_success\",e.JOIN_RESPONSE=\"join_response\",e.PRE_CONNECT_PC=\"pre_connect_pc\",e.P2P_CONNECTION=\"p2p_connection\",e.P2P_REMOTE_CANDIDATE_UPDATE=\"p2p_remote_candidate_update\",e.P2P_SUBSCRIBE=\"p2p_subscribe\",e.P2P_UNSUBSCRIBE=\"p2p_unsubscribe\",e.P2P_EXCHANGE_SDP=\"p2p_exchange_sdp\",e.P2P_ON_ADD_VIDEO_STREAM=\"p2p_on_add_video_stream\",e.P2P_ON_ADD_AUDIO_STREAM=\"p2p_on_add_audio_stream\",e}({}),_b=function(e){return e.PING=\"ping\",e.PING_BACK=\"ping_back\",e.JOIN=\"join_v3\",e.REJOIN=\"rejoin_v3\",e.LEAVE=\"leave\",e.SET_CLIENT_ROLE=\"set_client_role\",e.PUBLISH=\"publish\",e.PUBLISH_DATASTREAM=\"publish_datastream\",e.UNPUBLISH=\"unpublish\",e.UNPUBLISH_DATASTREAM=\"unpublish_datastream\",e.SUBSCRIBE=\"subscribe\",e.PRE_SUBSCRIBE=\"pre_subscribe\",e.SUBSCRIBE_DATASTREAM=\"subscribe_datastream\",e.SUBSCRIBE_STREAMS=\"subscribe_streams\",e.UNSUBSCRIBE=\"unsubscribe\",e.UNSUBSCRIBE_DATASTREAM=\"unsubscribe_datastream\",e.UNSUBSCRIBE_STREAMS=\"unsubscribe_streams\",e.SUBSCRIBE_CHANGE=\"subscribe_change\",e.TRAFFIC_STATS=\"traffic_stats\",e.RENEW_TOKEN=\"renew_token\",e.SWITCH_VIDEO_STREAM=\"switch_video_stream\",e.DEFAULT_VIDEO_STREAM=\"default_video_stream\",e.SET_FALLBACK_OPTION=\"set_fallback_option\",e.GATEWAY_INFO=\"gateway_info\",e.CONTROL=\"control\",e.SEND_METADATA=\"send_metadata\",e.DATA_STREAM=\"data_stream\",e.PICK_SVC_LAYER=\"pick_svc_layer\",e.RESTART_ICE=\"restart_ice\",e.CONNECT_PC=\"connect_pc\",e.SET_VIDEO_PROFILE=\"set_video_profile\",e.SET_PARAMETER=\"set_parameter\",e.SET_RTM2_FLAG=\"set_rtm2_flag\",e}({}),Eb=function(e){return e.WRTC_STATS=\"wrtc_stats\",e.WS_INFLATE_DATA_LENGTH=\"ws_inflate_data_length\",e.DENOISER_STATS=\"denoiser_stats\",e.EXTENSION_USAGE_STATS=\"extension_usage_stats\",e}({}),mb=function(e){return e.ON_USER_ONLINE=\"on_user_online\",e.ON_USER_OFFLINE=\"on_user_offline\",e.ON_STREAM_FALLBACK_UPDATE=\"on_stream_fallback_update\",e.ON_PUBLISH_STREAM=\"on_publish_stream\",e.ON_UPLINK_STATS=\"on_uplink_stats\",e.ON_P2P_LOST=\"on_p2p_lost\",e.ON_REMOVE_STREAM=\"on_remove_stream\",e.ON_ADD_AUDIO_STREAM=\"on_add_audio_stream\",e.ON_ADD_VIDEO_STREAM=\"on_add_video_stream\",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE=\"on_token_privilege_will_expire\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"on_token_privilege_did_expire\",e.ON_USER_BANNED=\"on_user_banned\",e.ON_USER_LICENSE_BANNED=\"on_user_license_banned\",e.ON_NOTIFICATION=\"on_notification\",e.ON_CRYPT_ERROR=\"on_crypt_error\",e.MUTE_AUDIO=\"mute_audio\",e.MUTE_VIDEO=\"mute_video\",e.UNMUTE_AUDIO=\"unmute_audio\",e.UNMUTE_VIDEO=\"unmute_video\",e.ON_P2P_OK=\"on_p2p_ok\",e.RECEIVE_METADATA=\"receive_metadata\",e.ON_DATA_STREAM=\"on_data_stream\",e.ON_RTP_CAPABILITY_CHANGE=\"on_rtp_capability_change\",e.ON_REMOTE_DATASTREAM_UPDATE=\"on_remote_datastream_update\",e.ON_REMOTE_FULL_DATASTREAM_INFO=\"on_remote_full_datastream_info\",e.ENABLE_LOCAL_VIDEO=\"enable_local_video\",e.DISABLE_LOCAL_VIDEO=\"disable_local_video\",e.ENABLE_LOCAL_AUDIO=\"enable_local_audio\",e.DISABLE_LOCAL_AUDIO=\"disable_local_audio\",e.ON_PUBLISHED_USER_LIST=\"on_published_user_list\",e}({}),fb=function(e){return e.SEND_ONLY=\"SEND_ONLY\",e.RECEIVE_ONLY=\"RECEIVE_ONLY\",e}({}),Tb=function(e){return e.CONNECTED=\"websocket:connected\",e.RECONNECTING=\"websocket:reconnecting\",e.WILL_RECONNECT=\"websocket:will_reconnect\",e.CLOSED=\"websocket:closed\",e.FAILED=\"websocket:failed\",e.ON_MESSAGE=\"websocket:on_message\",e.REQUEST_NEW_URLS=\"websocket:request_new_urls\",e.RECONNECT_WAITTING_FINISH=\"websocket:reconnect_waitting_finish\",e.RECONNECT_CREATE_CONNECTION=\"websocket:reconnect_create_connection\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"websocket:on_token_privilege_did_expire\",e}({});class Sb extends rv{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",arguments.length>2?arguments[2]:void 0),og(this,\"name\",\"AgoraRTCException\")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"error\";return super.print(e,Qy)}throw(){super.throw(Qy)}}function gb(e){if(\"string\"!=typeof e||!/^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\-\\:\\;\\<\\=\\.\\>\\?\\@\\[\\]\\^\\_\\{\\}\\|\\~\\,]{1,64}$/.test(e))throw Qy.error(\"Invalid Channel Name \".concat(e)),new Sb(nv.INVALID_PARAMS,\"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,\")}function Rb(e){if(!function(e){return\"number\"==typeof e&&Math.floor(e)===e&&0<=e&&e<=4294967295}(e)&&!hv(e,1,255))throw new Sb(nv.INVALID_PARAMS,\"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]\");\"string\"==typeof e&&Qy.warn(\"You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.\")}let Cb=function(e){return e.TRANSCODE=\"mix_streaming\",e.RAW=\"raw_streaming\",e}({});const Ib={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},vb={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function yb(e,t){dv(e.url,\"\".concat(t,\".url\"),1,1e3,!1),uv(e.x)||av(e.x,\"\".concat(t,\".x\"),0,1e4),uv(e.y)||av(e.y,\"\".concat(t,\".y\"),0,1e4),uv(e.width)||av(e.width,\"\".concat(t,\".width\"),0,1e4),uv(e.height)||av(e.height,\"\".concat(t,\".height\"),0,1e4),uv(e.zOrder)||av(e.zOrder,\"\".concat(t,\".zOrder\"),0,255),uv(e.alpha)||av(e.alpha,\"\".concat(t,\".alpha\"),0,1,!1)}const Ab={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:\"\"};let bb=function(e){return e.WARNING=\"@live_uap-warning\",e.ERROR=\"@line_uap-error\",e.PUBLISH_STREAM_STATUS=\"@live_uap-publish-status\",e.WORKER_STATUS=\"@live_uap-worker-status\",e.REQUEST_NEW_ADDRESS=\"@live_uap-request-address\",e}({}),wb=function(e){return e.REQUEST_WORKER_MANAGER_LIST=\"@live_req_worker_manager\",e}({}),Ob=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]=\"LIVE_STREAM_RESPONSE_SUCCEED\",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]=\"LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM\",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]=\"LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR\",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]=\"LIVE_STREAM_RESPONSE_BAD_STREAM\",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]=\"LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR\",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]=\"LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST\",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]=\"LIVE_STREAM_RESPONSE_NOT_AUTHORIZED\",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]=\"LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE\",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]=\"LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN\",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]=\"LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH\",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]=\"LIVE_STREAM_RESPONSE_NOT_SUPPORTED\",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]=\"LIVE_STREAM_RESPONSE_MAX_STREAM_NUM\",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]=\"LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR\",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]=\"LIVE_STREAM_RESPONSE_WORKER_LOST\",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]=\"LIVE_STREAM_RESPONSE_RESOURCE_LIMIT\",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]=\"LIVE_STREAM_RESPONSE_WORKER_QUIT\",e[e.ERROR_FAIL_SEND_MESSAGE=504]=\"ERROR_FAIL_SEND_MESSAGE\",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]=\"PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE\",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]=\"PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT\",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]=\"PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH\",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]=\"PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN\",e}({});function Nb(e){if(!e.channelName)throw new Sb(nv.INVALID_PARAMS,\"invalid channelName in info\");if(\"number\"!=typeof e.uid)throw new Sb(nv.INVALID_PARAMS,\"invalid uid in info, uid must be a number\");return e.token&&dv(e.token,\"info.token\",1,2047),Rb(e.uid),gb(e.channelName),!0}let Db=function(e){return e[e.SetSdkProfile=0]=\"SetSdkProfile\",e[e.SetSourceChannel=1]=\"SetSourceChannel\",e[e.SetSourceUserId=2]=\"SetSourceUserId\",e[e.SetDestChannel=3]=\"SetDestChannel\",e[e.StartPacketTransfer=4]=\"StartPacketTransfer\",e[e.StopPacketTransfer=5]=\"StopPacketTransfer\",e[e.UpdateDestChannel=6]=\"UpdateDestChannel\",e[e.Reconnect=7]=\"Reconnect\",e[e.SetVideoProfile=8]=\"SetVideoProfile\",e}({}),Pb=function(e){return e.NETWORK_DISCONNECTED=\"NETWORK_DISCONNECTED\",e.NETWORK_CONNECTED=\"NETWORK_CONNECTED\",e.PACKET_JOINED_SRC_CHANNEL=\"PACKET_JOINED_SRC_CHANNEL\",e.PACKET_JOINED_DEST_CHANNEL=\"PACKET_JOINED_DEST_CHANNEL\",e.PACKET_SENT_TO_DEST_CHANNEL=\"PACKET_SENT_TO_DEST_CHANNEL\",e.PACKET_RECEIVED_VIDEO_FROM_SRC=\"PACKET_RECEIVED_VIDEO_FROM_SRC\",e.PACKET_RECEIVED_AUDIO_FROM_SRC=\"PACKET_RECEIVED_AUDIO_FROM_SRC\",e.PACKET_UPDATE_DEST_CHANNEL=\"PACKET_UPDATE_DEST_CHANNEL\",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=\"PACKET_UPDATE_DEST_CHANNEL_REFUSED\",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=\"PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE\",e}({}),Lb=function(e){return e.RELAY_STATE_IDLE=\"RELAY_STATE_IDLE\",e.RELAY_STATE_CONNECTING=\"RELAY_STATE_CONNECTING\",e.RELAY_STATE_RUNNING=\"RELAY_STATE_RUNNING\",e.RELAY_STATE_FAILURE=\"RELAY_STATE_FAILURE\",e}({}),kb=function(e){return e.RELAY_OK=\"RELAY_OK\",e.SERVER_CONNECTION_LOST=\"SERVER_CONNECTION_LOST\",e.SRC_TOKEN_EXPIRED=\"SRC_TOKEN_EXPIRED\",e.DEST_TOKEN_EXPIRED=\"DEST_TOKEN_EXPIRED\",e}({}),Mb=function(e){return e.High=\"high\",e.Low=\"low\",e.Audio=\"audio\",e.Screen=\"screen\",e.ScreenLow=\"screen_low\",e}({}),Ub=function(e){return e.DISCONNECT=\"disconnect\",e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.NETWORK_QUALITY=\"network-quality\",e.STREAM_TYPE_CHANGE=\"stream-type-change\",e.IS_P2P_DISCONNECTED=\"is-p2p-dis\",e.DISCONNECT_P2P=\"dis-p2p\",e.REQUEST_NEW_GATEWAY_LIST=\"req-gate-url\",e.NEED_RENEW_SESSION=\"need-sid\",e.REQUEST_P2P_CONNECTION_PARAMS=\"request-p2p-connection-params\",e.JOIN_RESPONSE=\"join-response\",e.RESET_CONNECTION_EVENTS=\"reset-connection-events\",e.PRE_CONNECT_PC=\"pre-connect_pc\",e}({}),xb=function(e){return e.P2P_DISCONNECTED=\"P2P_DISCONNECTED\",e.A_ROUND_WS_FAILED=\"A_ROUND_WS_FAILED\",e.TIMEOUT=\"TIMEOUT\",e.UNKNOWN_REASON=\"UNKNOWN_REASON\",e}({}),Vb=function(e){return e[e.Nothing=0]=\"Nothing\",e[e.Audio=1]=\"Audio\",e[e.LwoVideo=2]=\"LwoVideo\",e[e.Video=4]=\"Video\",e[e.Data=8]=\"Data\",e[e.DataStream0=256]=\"DataStream0\",e[e.DataStream1=512]=\"DataStream1\",e[e.DataStream2=1024]=\"DataStream2\",e[e.DataStream3=2048]=\"DataStream3\",e[e.DataStream4=4096]=\"DataStream4\",e[e.DataStream5=8192]=\"DataStream5\",e[e.DataStream6=16384]=\"DataStream6\",e[e.DataStream7=32768]=\"DataStream7\",e}({}),Fb=function(e){return e.CHINA=\"CHINA\",e.ASIA=\"ASIA\",e.NORTH_AMERICA=\"NORTH_AMERICA\",e.EUROPE=\"EUROPE\",e.JAPAN=\"JAPAN\",e.INDIA=\"INDIA\",e.KOREA=\"KOREA\",e.HKMC=\"HKMC\",e.US=\"US\",e.OCEANIA=\"OCEANIA\",e.SOUTH_AMERICA=\"SOUTH_AMERICA\",e.AFRICA=\"AFRICA\",e.OVERSEA=\"OVERSEA\",e.GLOBAL=\"GLOBAL\",e.EXTENSIONS=\"EXTENSIONS\",e}({});const Bb=[Fb.AFRICA,Fb.ASIA,Fb.CHINA,Fb.EUROPE,Fb.GLOBAL,Fb.INDIA,Fb.JAPAN,Fb.NORTH_AMERICA,Fb.OCEANIA,Fb.OVERSEA,Fb.SOUTH_AMERICA];let jb=function(e){return e.CHINA=\"CN\",e.ASIA=\"AS\",e.NORTH_AMERICA=\"NA\",e.EUROPE=\"EU\",e.JAPAN=\"JP\",e.INDIA=\"IN\",e.KOREA=\"KR\",e.HKMC=\"HK\",e.US=\"US\",e.OCEANIA=\"OC\",e.SOUTH_AMERICA=\"SA\",e.AFRICA=\"AF\",e.OVERSEA=\"OVERSEA\",e.GLOBAL=\"GLOBAL\",e.EXTENSIONS=\"GLOBAL\",e}({});const Gb={CHINA:{},ASIA:{CODE:jb.ASIA,WEBCS_DOMAIN:[\"ap-web-1-asia.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-asia.agora.io\"],PROXY_CS:[\"proxy-ap-web-asia.agora.io\"],CDS_AP:[\"cds-ap-web-asia.agora.io\",\"cds-ap-web-asia2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-asia.agora.io\",\"sua-ap-web-asia2.agora.io\"],UAP_AP:[\"uap-ap-web-asia.agora.io\",\"uap-ap-web-asia2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-asia.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-asia.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-asia.agora.io\"],PROXY_SERVER_TYPE3:[\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]},NORTH_AMERICA:{CODE:jb.NORTH_AMERICA,WEBCS_DOMAIN:[\"ap-web-1-north-america.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-north-america.agora.io\"],PROXY_CS:[\"proxy-ap-web-america.agora.io\"],CDS_AP:[\"cds-ap-web-america.agora.io\",\"cds-ap-web-america2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-america.agora.io\",\"sua-ap-web-america2.agora.io\"],UAP_AP:[\"uap-ap-web-america.agora.io\",\"uap-ap-web-america2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-north-america.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-north-america.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-north-america.agora.io\"],PROXY_SERVER_TYPE3:[\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]},EUROPE:{CODE:jb.EUROPE,WEBCS_DOMAIN:[\"ap-web-1-europe.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-europe.agora.io\"],PROXY_CS:[\"proxy-ap-web-europe.agora.io\"],CDS_AP:[\"cds-ap-web-europe.agora.io\",\"cds-ap-web-europe2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-europe.agora.io\",\"sua-ap-web-europe.agora.io\"],UAP_AP:[\"uap-ap-web-europe.agora.io\",\"uap-ap-web-europe2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-europe.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-europe.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-europe.agora.io\"],PROXY_SERVER_TYPE3:[\"europe.webrtc-cloud-proxy.sd-rtn.com\"]},JAPAN:{CODE:jb.JAPAN,WEBCS_DOMAIN:[\"ap-web-1-japan.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-japan.agora.io\"],PROXY_CS:[\"proxy-ap-web-japan.agora.io\"],CDS_AP:[\"cds-ap-web-japan.agora.io\",\"cds-ap-web-japan2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-japan.agora.io\",\"sua-ap-web-japan2.agora.io\"],UAP_AP:[\"uap-ap-web-japan.agora.io\",\"uap-ap-web-japan2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-japan.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-japan.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-japan.agora.io\"],PROXY_SERVER_TYPE3:[\"japan.webrtc-cloud-proxy.sd-rtn.com\"]},INDIA:{CODE:jb.INDIA,WEBCS_DOMAIN:[\"ap-web-1-india.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-india.agora.io\"],PROXY_CS:[\"proxy-ap-web-india.agora.io\"],CDS_AP:[\"cds-ap-web-india.agora.io\",\"cds-ap-web-india2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-india.agora.io\",\"sua-ap-web-india2.agora.io\"],UAP_AP:[\"uap-ap-web-india.agora.io\",\"uap-ap-web-india2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-india.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-india.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-india.agora.io\"],PROXY_SERVER_TYPE3:[\"india.webrtc-cloud-proxy.sd-rtn.com\"]},KOREA:{CODE:jb.KOREA,WEBCS_DOMAIN:[\"ap-web-1-korea.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-korea.agora.io\"],PROXY_CS:[\"proxy-ap-web-korea.agora.io\"],CDS_AP:[\"cds-ap-web-korea.agora.io\",\"cds-ap-web-korea2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-korea.agora.io\",\"sua-ap-web-korea2.agora.io\"],UAP_AP:[\"uap-ap-web-korea.agora.io\",\"uap-ap-web-korea2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-korea.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-korea.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-korea.agora.io\"],PROXY_SERVER_TYPE3:[\"korea.webrtc-cloud-proxy.sd-rtn.com\"]},HKMC:{CODE:jb.HKMC,WEBCS_DOMAIN:[\"ap-web-1-hkmc.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-hkmc.agora.io\"],PROXY_CS:[\"proxy-ap-web-hkmc.agora.io\"],CDS_AP:[\"cds-ap-web-hkmc.agora.io\",\"cds-ap-web-hkmc2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-hkmc.agora.io\",\"sua-ap-web-hkmc2.agora.io\"],UAP_AP:[\"uap-ap-web-hkmc.agora.io\",\"uap-ap-web-hkmc2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-hkmc.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-hkmc.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-hkmc.agora.io\"],PROXY_SERVER_TYPE3:[\"hkmc.webrtc-cloud-proxy.sd-rtn.com\"]},US:{CODE:jb.US,WEBCS_DOMAIN:[\"ap-web-1-us.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-us.agora.io\"],PROXY_CS:[\"proxy-ap-web-us.agora.io\"],CDS_AP:[\"cds-ap-web-us.agora.io\",\"cds-ap-web-us2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-us.agora.io\",\"sua-ap-web-us2.agora.io\"],UAP_AP:[\"uap-ap-web-us.agora.io\",\"uap-ap-web-us2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-us.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-us.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-us.agora.io\"],PROXY_SERVER_TYPE3:[\"us.webrtc-cloud-proxy.sd-rtn.com\"]},OVERSEA:{CODE:jb.OVERSEA,WEBCS_DOMAIN:[\"ap-web-1-oversea.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-oversea.agora.io\"],PROXY_CS:[\"proxy-ap-web-oversea.agora.io\"],CDS_AP:[\"cds-ap-web-oversea.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-oversea.agora.io\"],UAP_AP:[\"uap-ap-web-oversea.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-oversea.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-oversea.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-oversea.agora.io\"],PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy.agora.io\"]},GLOBAL:{CODE:jb.GLOBAL,WEBCS_DOMAIN:[\"webrtc2-ap-web-1.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"webrtc2-ap-web-3.agora.io\"],PROXY_CS:[\"ap-proxy-1.agora.io\",\"ap-proxy-2.agora.io\"],CDS_AP:[\"cds-ap-web-1.agora.io\",\"cds-ap-web-3.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-1.agora.io\",\"sua-ap-web-3.agora.io\"],UAP_AP:[\"uap-ap-web-1.agora.io\",\"uap-ap-web-3.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice.agora.io\"],PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy.sd-rtn.com\"]},OCEANIA:{CODE:jb.OCEANIA,WEBCS_DOMAIN:[\"ap-web-1-oceania.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-oceania.agora.io\"],PROXY_CS:[\"proxy-ap-web-oceania.agora.io\"],CDS_AP:[\"cds-ap-web-oceania.agora.io\",\"cds-ap-web-oceania2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-oceania.agora.io\",\"sua-ap-web-oceania2.agora.io\"],UAP_AP:[\"uap-ap-web-oceania.agora.io\",\"uap-ap-web-oceania2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-oceania.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-oceania.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-oceania.agora.io\"],PROXY_SERVER_TYPE3:[\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]},SOUTH_AMERICA:{CODE:jb.SOUTH_AMERICA,WEBCS_DOMAIN:[\"ap-web-1-south-america.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-south-america.agora.io\"],PROXY_CS:[\"proxy-ap-web-south-america.agora.io\"],CDS_AP:[\"cds-ap-web-south-america.agora.io\",\"cds-ap-web-south-america2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-south-america.agora.io\",\"sua-ap-web-south-america2.agora.io\"],UAP_AP:[\"uap-ap-web-south-america.agora.io\",\"uap-ap-web-south-america2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-south-america.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-south-america.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-south-america.agora.io\"],PROXY_SERVER_TYPE3:[\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]},AFRICA:{CODE:jb.AFRICA,WEBCS_DOMAIN:[\"ap-web-1-africa.agora.io\"],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-africa.agora.io\"],PROXY_CS:[\"proxy-ap-web-africa.agora.io\"],CDS_AP:[\"cds-ap-web-africa.agora.io\",\"cds-ap-web-africa2.agora.io\"],ACCOUNT_REGISTER:[\"sua-ap-web-africa.agora.io\",\"sua-ap-web-africa2.agora.io\"],UAP_AP:[\"uap-ap-web-africa.agora.io\",\"uap-ap-web-africa2.agora.io\"],EVENT_REPORT_DOMAIN:[\"statscollector-1-africa.agora.io\"],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-africa.agora.io\"],LOG_UPLOAD_SERVER:[\"logservice-south-africa.agora.io\"],PROXY_SERVER_TYPE3:[\"africa.webrtc-cloud-proxy.sd-rtn.com\"]},EXTENSIONS:{}};yy&&(Gb.CHINA={CODE:jb.CHINA,WEBCS_DOMAIN:[\"webrtc2-2.ap.sd-rtn.com\"],WEBCS_DOMAIN_BACKUP_LIST:[\"webrtc2-4.ap.sd-rtn.com\"],PROXY_CS:[\"proxy-web.ap.sd-rtn.com\"],CDS_AP:[\"cds-web-2.ap.sd-rtn.com\",\"cds-web-4.ap.sd-rtn.com\"],ACCOUNT_REGISTER:[\"sua-web-2.ap.sd-rtn.com\",\"sua-web-4.ap.sd-rtn.com\"],UAP_AP:[\"uap-web-2.ap.sd-rtn.com\",\"uap-web-4.ap.sd-rtn.com\"],EVENT_REPORT_DOMAIN:[\"web-3.statscollector.sd-rtn.com\"],EVENT_REPORT_BACKUP_DOMAIN:[\"web-4.statscollector.sd-rtn.com\"],LOG_UPLOAD_SERVER:[\"logservice-china.agora.io\"],PROXY_SERVER_TYPE3:[\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]});let Wb=function(e){return e.UPDATE_BITRATE_LIMIT=\"update_bitrate_limit\",e}({});class Hb extends Sv{constructor(e,t){super(),og(this,\"onICEConnectionStateChange\",void 0),og(this,\"onConnectionStateChange\",void 0),og(this,\"onDTLSTransportStateChange\",void 0),og(this,\"onDTLSTransportError\",void 0),og(this,\"onICETransportStateChange\",void 0),og(this,\"onFirstAudioReceived\",void 0),og(this,\"onFirstVideoReceived\",void 0),og(this,\"onFirstAudioDecoded\",void 0),og(this,\"onFirstVideoDecoded\",void 0),og(this,\"onFirstVideoDecodedTimeout\",void 0),og(this,\"onSelectedLocalCandidateChanged\",void 0),og(this,\"onSelectedRemoteCandidateChanged\",void 0),og(this,\"getLocalVideoStats\",void 0)}}class Kb extends Hb{constructor(e,t){super(e,t),og(this,\"establishPromise\",void 0)}}let Yb=function(e){return e.VIDEO=\"video\",e.AUDIO=\"audio\",e}({}),qb=function(e){return e[e.UDP=0]=\"UDP\",e[e.TCP=1]=\"TCP\",e[e.RELAY=2]=\"RELAY\",e}({}),zb=function(e){return e[e.FIRST_CONNECTION=0]=\"FIRST_CONNECTION\",e[e.TCP_RESTART=1]=\"TCP_RESTART\",e[e.RELAY_RESTART=2]=\"RELAY_RESTART\",e[e.OLD_FIRST_CONNECTION=10]=\"OLD_FIRST_CONNECTION\",e[e.OLD_RESTART=11]=\"OLD_RESTART\",e[e.DISCONNECTED_OR_FAILED=20]=\"DISCONNECTED_OR_FAILED\",e}({}),Jb=function(e){return e.LocalVideoTrack=\"videoTrack\",e.LocalAudioTrack=\"audioTrack\",e.LocalVideoLowTrack=\"videoLowTrack\",e}({}),Xb=function(e){return e.New=\"new\",e.Connected=\"connected\",e.Reconnecting=\"reconnecting\",e.Disconnected=\"disconnected\",e}({}),Qb=function(e){return e.StateChange=\"stateChange\",e.IceConnectionStateChange=\"iceConnectionStateChange\",e.RequestMuteLocal=\"requestMuteLocal\",e.RequestUnmuteLocal=\"requestUnmuteLocal\",e.RequestRePublish=\"requestRePublish\",e.RequestRePublishDataChannel=\"requestRePublishDataChannel\",e.RequestReSubscribe=\"requestReSubscribe\",e.RequestUploadStats=\"requestUploadStats\",e.RequestUpload=\"requestUpload\",e.MediaReconnectStart=\"MediaReconnectStart\",e.MediaReconnectEnd=\"MediaReconnectEnd\",e.NeedSignalRTT=\"NeedSignalRTT\",e.RequestRestartICE=\"RequestRestartIce\",e.PeerConnectionStateChange=\"PeerConnectionStateChange\",e.RequestReconnect=\"RequestReconnect\",e.RequestReconnectPC=\"RequestReconnectPC\",e.RequestUnpublishForReconnectPC=\"RequestUnpublishForReconnectPC\",e.P2PLost=\"P2PLost\",e.UpdateVideoEncoder=\"UpdateVideoEncoder\",e.ConnectionTypeChange=\"ConnectionTypeChange\",e.RequestLowStreamParameter=\"RequestLowStreamParameter\",e.QueryClientConnectionState=\"QueryClientConnectionState\",e.LocalCandidate=\"LocalCandidate\",e.RequestP2PMuteLocal=\"requestP2PMuteLocal\",e.RequestP2PUnPublish=\"RequestP2PUnPublish\",e.RequestP2PUnmuteRemote=\"RequestP2PUnmuteRemote\",e.RequestP2PMuteRemote=\"RequestP2PMuteRemote\",e.RequestP2PRestartICE=\"RequestP2PRestartICE\",e}({}),Zb=function(e){return e.CONNECTING=\"CONNECTING\",e.RECONNECTING=\"RECONNECTING\",e.CONNECTED=\"CONNECTED\",e.CLOSED=\"CLOSED\",e}({}),$b=function(e){return e[e.CONNECT_AP=0]=\"CONNECT_AP\",e[e.AP_CONNECTED=1]=\"AP_CONNECTED\",e[e.CONNECT_WORKER_MANAGER=2]=\"CONNECT_WORKER_MANAGER\",e[e.WORKER_MANAGER_CONNECTED=3]=\"WORKER_MANAGER_CONNECTED\",e[e.GET_WORKER_MANAGER_RESPONSE=4]=\"GET_WORKER_MANAGER_RESPONSE\",e[e.CONNECT_WORKER=5]=\"CONNECT_WORKER\",e[e.WORKER_CONNECTED=6]=\"WORKER_CONNECTED\",e[e.CLOSED=7]=\"CLOSED\",e}({}),ew=function(e){return e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.STATE_CHANGE=\"state-change\",e.INSPECT_RESULT=\"inspect-result\",e.CLIENT_LOCAL_VIDEO_TRACK=\"client-local-video-track\",e.REQUEST_NEW_WORKER_URL=\"request-new-worker-url\",e}({}),tw=function(e){return e.CONNECTED=\"transmitter:connected\",e.RECONNECTING=\"transmitter:reconnecting\",e.WILL_RECONNECT=\"transmitter:will_reconnect\",e.CLOSED=\"transmitter:closed\",e.FAILED=\"transmitter:failed\",e.ON_MESSAGE=\"transmitter:on_message\",e.REQUEST_NEW_URLS=\"transmitter:request_new_urls\",e.RECONNECT_WAITTING_FINISH=\"transmitter:reconnect_waitting_finish\",e.RECONNECT_CREATE_CONNECTION=\"transmitter:reconnect_create_connection\",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE=\"transmitter:on_token_privilege_did_expire\",e.TO_CONNECT_DATACHANNEL=\"transmitter:to_connect_datachannel\",e.FAILBACK=\"transmitter:failback\",e.PRE_CONNECT_PC=\"transmitter:pre_connect_pc\",e}({}),iw=function(e){return e.CAMERA_CHANGED=\"camera-changed\",e.MICROPHONE_CHANGED=\"microphone-changed\",e.PLAYBACK_DEVICE_CHANGED=\"playback-device-changed\",e.AUDIO_AUTOPLAY_FAILED=\"audio-autoplay-failed\",e.AUTOPLAY_FAILED=\"autoplay-failed\",e.AUDIO_CONTEXT_STATE_CHANGED=\"audio-context-state-changed\",e.SECURITY_POLICY_VIOLATION=\"security-policy-violation\",e}({}),nw=function(e){return e.CONNECTING=\"CONNECTING\",e.RECONNECTING=\"RECONNECTING\",e.CONNECTED=\"CONNECTED\",e.CLOSED=\"CLOSED\",e}({}),rw=function(e){return e.CONNECTION_STATE_CHANGE=\"connection-state-change\",e.STATE_CHANGE=\"state-change\",e.INSPECT_RESULT=\"inspect-result\",e.CLIENT_LOCAL_VIDEO_TRACK=\"client-local-video-track\",e.REQUEST_NEW_WORKER_URL=\"request-new-worker-url\",e}({}),ow=function(e){return e[e.CONNECT_AP=0]=\"CONNECT_AP\",e[e.AP_CONNECTED=1]=\"AP_CONNECTED\",e[e.CONNECT_WORKER_MANAGER=2]=\"CONNECT_WORKER_MANAGER\",e[e.WORKER_MANAGER_CONNECTED=3]=\"WORKER_MANAGER_CONNECTED\",e[e.GET_WORKER_MANAGER_RESPONSE=4]=\"GET_WORKER_MANAGER_RESPONSE\",e[e.CONNECT_WORKER=5]=\"CONNECT_WORKER\",e[e.WORKER_CONNECTED=6]=\"WORKER_CONNECTED\",e[e.CLOSED=7]=\"CLOSED\",e}({}),sw=function(e){return e.CALL=\"call\",e.CANDIDATE=\"candidate\",e.PUBLISH=\"publish\",e.UNPUBLISH=\"unpublish\",e.CONTROL=\"control\",e.RESTART_ICE=\"restart_ice\",e.ACK=\"ack\",e.RESPONSE=\"response\",e.JOIN=\"join\",e.CHECK=\"check\",e}({}),aw=function(e){return e.ABORT=\"abort\",e}({}),cw=function(e){return e.MUTE_LOCAL_AUDIO=\"mute_local_audio\",e.MUTE_LOCAL_VIDEO=\"mute_local_video\",e.UNMUTE_LOCAL_AUDIO=\"unmute_local_audio\",e.UNMUTE_LOCAL_VIDEO=\"unmute_local_video\",e}({}),dw=function(e){return e.P2P_TOKEN_TIMEOUT=\"p2p_token_timeout\",e.P2P_TOKEN_CHANGED=\"p2p_token_changed\",e}({});const lw={[ab.ACCESS_POINT]:{[lb.NO_FLAG_SET]:{desc:\"flag is zero\",retry:!1},[lb.FLAG_SET_BUT_EMPTY]:{desc:\"flag is empty\",retry:!1},[lb.INVALID_FALG_SET]:{desc:\"invalid flag\",retry:!1},[lb.FLAG_SET_BUT_NO_RE]:{desc:\"flag set unilbs but no request\",retry:!1},[lb.INVALID_SERVICE_ID]:{desc:\"invalid service id\",retry:!1},[lb.NO_SERVICE_AVAILABLE]:{desc:\"no service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_P2P]:{desc:\"no unilbs p2p service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_VOICE]:{desc:\"no unilbs voice service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:\"no unilbs webrtc service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_CDS]:{desc:\"no cds service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_CDN]:{desc:\"no cdn dispatcher service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_TDS]:{desc:\"no tds service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_REPORT]:{desc:\"no unilbs report service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:\"no app center service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_ENV0]:{desc:\"no unilbs sig env0 service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_VOET]:{desc:\"no unilbs voet service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:\"no string uid service available\",retry:!0},[lb.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:\"no webrtc unilbs service available\",retry:!0}},[ab.UNILBS]:{[db.INVALID_VENDOR_KEY]:{desc:\"invalid vendor key, can not find appid\",retry:!1},[db.INVALID_CHANNEL_NAME]:{desc:\"invalid channel name\",retry:!1},[db.INTERNAL_ERROR]:{desc:\"unilbs internal error\",retry:!1},[db.NO_AUTHORIZED]:{desc:\"invalid token, authorized failed\",retry:!1},[db.DYNAMIC_KEY_TIMEOUT]:{desc:\"dynamic key or token timeout\",retry:!1},[db.NO_ACTIVE_STATUS]:{desc:\"no active status\",retry:!1},[db.DYNAMIC_KEY_EXPIRED]:{desc:\"dynamic key expired\",retry:!1},[db.STATIC_USE_DYNAMIC_KEY]:{desc:\"static use dynamic key\",retry:!1},[db.DYNAMIC_USE_STATIC_KEY]:{desc:\"dynamic use static key\",retry:!1},[db.USER_OVERLOAD]:{desc:\"amount of users over load\",retry:!1},[db.FORBIDDEN_REGION]:{desc:\"the request is forbidden in this area\",retry:!1},[db.CANNOT_MEET_AREA_DEMAND]:{desc:\"unable to allocate services in this area\",retry:!1}},[ab.STRING_UID_ALLOCATOR]:{[cb.IIIEGAL_APPID]:{desc:\"invalid appid\",retry:!1},[cb.IIIEGAL_UID]:{desc:\"invalid string uid\",retry:!1},[cb.INTERNAL_ERROR]:{desc:\"string uid allocator internal error\",retry:!0}}};function uw(e){const t=lw[Math.floor(e/1e4)];if(!t)return{desc:\"unknown error\",retry:!1};const i=t[e%1e4];if(!i){if(Math.floor(e/1e4)===ab.ACCESS_POINT){const t=e%1e4;if(\"1\"===t.toString()[0])return{desc:e.toString(),retry:!1};if(\"2\"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:\"unknown error\",retry:!1}}return i}const hw={[ub.K_TIMESTAMP_EXPIRED]:{desc:\"K_TIMESTAMP_EXPIRED\",action:\"failed\"},[ub.K_CHANNEL_PERMISSION_INVALID]:{desc:\"K_CHANNEL_PERMISSION_INVALID\",action:\"failed\"},[ub.K_CERTIFICATE_INVALID]:{desc:\"K_CERTIFICATE_INVALID\",action:\"failed\"},[ub.K_CHANNEL_NAME_EMPTY]:{desc:\"K_CHANNEL_NAME_EMPTY\",action:\"failed\"},[ub.K_CHANNEL_NOT_FOUND]:{desc:\"K_CHANNEL_NOT_FOUND\",action:\"failed\"},[ub.K_TICKET_INVALID]:{desc:\"K_TICKET_INVALID\",action:\"failed\"},[ub.K_CHANNEL_CONFLICTED]:{desc:\"K_CHANNEL_CONFLICTED\",action:\"failed\"},[ub.K_SERVICE_NOT_READY]:{desc:\"K_SERVICE_NOT_READY\",action:\"tryNext\"},[ub.K_SERVICE_TOO_HEAVY]:{desc:\"K_SERVICE_TOO_HEAVY\",action:\"tryNext\"},[ub.K_UID_BANNED]:{desc:\"K_UID_BANNED\",action:\"failed\"},[ub.K_IP_BANNED]:{desc:\"K_IP_BANNED\",action:\"failed\"},[ub.K_AUTO_REBALANCE]:{desc:\"k_AUTO_REBALANCE\",action:\"recover\"},[ub.ERR_INVALID_VENDOR_KEY]:{desc:\"ERR_INVALID_VENDOR_KEY\",action:\"failed\"},[ub.ERR_INVALID_CHANNEL_NAME]:{desc:\"ERR_INVALID_CHANNEL_NAME\",action:\"failed\"},[ub.WARN_NO_AVAILABLE_CHANNEL]:{desc:\"WARN_NO_AVAILABLE_CHANNEL\",action:\"failed\"},[ub.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:\"WARN_LOOKUP_CHANNEL_TIMEOUT\",action:\"tryNext\"},[ub.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:\"WARN_LOOKUP_CHANNEL_REJECTED\",action:\"failed\"},[ub.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:\"WARN_OPEN_CHANNEL_TIMEOUT\",action:\"tryNext\"},[ub.WARN_OPEN_CHANNEL_REJECTED]:{desc:\"WARN_OPEN_CHANNEL_REJECTED\",action:\"failed\"},[ub.WARN_REQUEST_DEFERRED]:{desc:\"WARN_REQUEST_DEFERRED\",action:\"failed\"},[ub.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:\"ERR_DYNAMIC_KEY_TIMEOUT\",action:\"failed\"},[ub.ERR_NO_AUTHORIZED]:{desc:\"ERR_NO_AUTHORIZED\",action:\"failed\"},[ub.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:\"ERR_VOM_SERVICE_UNAVAILABLE\",action:\"tryNext\"},[ub.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:\"ERR_NO_CHANNEL_AVAILABLE_CODE\",action:\"failed\"},[ub.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:\"ERR_MASTER_VOCS_UNAVAILABLE\",action:\"tryNext\"},[ub.ERR_INTERNAL_ERROR]:{desc:\"ERR_INTERNAL_ERROR\",action:\"tryNext\"},[ub.ERR_NO_ACTIVE_STATUS]:{desc:\"ERR_NO_ACTIVE_STATUS\",action:\"failed\"},[ub.ERR_INVALID_UID]:{desc:\"ERR_INVALID_UID\",action:\"failed\"},[ub.ERR_DYNAMIC_KEY_EXPIRED]:{desc:\"ERR_DYNAMIC_KEY_EXPIRED\",action:\"failed\"},[ub.ERR_STATIC_USE_DYANMIC_KE]:{desc:\"ERR_STATIC_USE_DYANMIC_KE\",action:\"failed\"},[ub.ERR_DYNAMIC_USE_STATIC_KE]:{desc:\"ERR_DYNAMIC_USE_STATIC_KE\",action:\"failed\"},[ub.ERR_NO_VOCS_AVAILABLE]:{desc:\"ERR_NO_VOCS_AVAILABLE\",action:\"tryNext\"},[ub.ERR_NO_VOS_AVAILABLE]:{desc:\"ERR_NO_VOS_AVAILABLE\",action:\"tryNext\"},[ub.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:\"ERR_JOIN_CHANNEL_TIMEOUT\",action:\"tryNext\"},[ub.ERR_JOIN_BY_MULTI_IP]:{desc:\"ERR_JOIN_BY_MULTI_IP\",action:\"recover\"},[ub.ERR_NOT_JOINED]:{desc:\"ERR_NOT_JOINED\",action:\"failed\"},[ub.ERR_REPEAT_JOIN_REQUEST]:{desc:\"ERR_REPEAT_JOIN_REQUEST\",action:\"quit\"},[ub.ERR_REPEAT_JOIN_CHANNEL]:{desc:\"ERR_REPEAT_JOIN_CHANNEL\",action:\"quit\"},[ub.ERR_INVALID_STRINGUID]:{desc:\"ERR_INVALID_STRINGUID\",action:\"failed\"},[ub.ERR_TOO_MANY_USERS]:{desc:\"ERR_TOO_MANY_USERS\",action:\"tryNext\"},[ub.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:\"ERR_SET_CLIENT_ROLE_TIMEOUT\",action:\"failed\"},[ub.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:\"ERR_SET_CLIENT_ROLE_TIMEOUT\",action:\"failed\"},[ub.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:\"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",action:\"success\"},[ub.ERR_PUBLISH_REQUEST_INVALID]:{desc:\"ERR_PUBLISH_REQUEST_INVALID\",action:\"failed\"},[ub.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:\"ERR_SUBSCRIBE_REQUEST_INVALID\",action:\"failed\"},[ub.ERR_NOT_SUPPORTED_MESSAGE]:{desc:\"ERR_NOT_SUPPORTED_MESSAGE\",action:\"failed\"},[ub.ERR_ILLEAGAL_PLUGIN]:{desc:\"ERR_ILLEAGAL_PLUGIN\",action:\"failed\"},[ub.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:\"ILLEGAL_CLIENT_ROLE_LEVEL\",action:\"failed\"},[ub.ERR_REJOIN_TOKEN_INVALID]:{desc:\"ERR_REJOIN_TOKEN_INVALID\",action:\"failed\"},[ub.ERR_REJOIN_USER_NOT_JOINED]:{desc:\"ERR_REJOIN_NOT_JOINED\",action:\"failed\"},[ub.ERR_INVALID_OPTIONAL_INFO]:{desc:\"ERR_INVALID_OPTIONAL_INFO\",action:\"quit\"},[ub.ERR_TEST_RECOVER]:{desc:\"ERR_TEST_RECOVER\",action:\"recover\"},[ub.ERR_TEST_TRYNEXT]:{desc:\"ERR_TEST_TRYNEXT\",action:\"recover\"},[ub.ERR_TEST_RETRY]:{desc:\"ERR_TEST_RETRY\",action:\"recover\"},[ub.ILLEGAL_AES_PASSWORD]:{desc:\"ERR_TEST_RETRY\",action:\"failed\"},[ub.ERR_TOO_MANY_BROADCASTERS]:{desc:\"ERR_TOO_MANY_BROADCASTERS\",action:\"failed\"},[ub.ERR_TOO_MANY_SUBSCRIBERS]:{desc:\"ERR_TOO_MANY_SUBSCRIBERS\",action:\"failed\"},[ub.ERR_LICENSE_ILLEGAL]:{desc:\"ERR_LICENSE_ILLEGAL\",action:\"quit\"},[ub.ERR_LICENSE_MISSING]:{desc:\"ERR_LICENSE_MISSING\",action:\"quit\"},[ub.ERR_LICENSE_EXPIRED]:{desc:\"ERR_LICENSE_EXPIRED\",action:\"quit\"},[ub.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:\"ERR_LICENSE_MINUTES_EXCEEDED\",action:\"quit\"},[ub.ERR_LICENSE_PERIOD_INVALID]:{desc:\"ERR_LICENSE_PERIOD_INVALID\",action:\"quit\"},[ub.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:\"ERR_LICENSE_MULTIPLE_SDK_SERVICE\",action:\"quit\"}};function pw(e){const t=hw[e];return t||{desc:\"UNKNOWN_ERROR_\".concat(e),action:\"failed\"}}function _w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ew(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_w(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_w(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function mw(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function fw(e,t){if(\"string\"==typeof e)return e;const{proxy:i,host:n,port:r}=e;if(t){const e=Dy(\"JOIN_GATEWAY_FALLBACK_PORT\")||443;return 443===e?\"wss://\".concat(n,\"/ws/?p=\").concat(Number(r)+150):\"wss://\".concat(n,\":\").concat(e,\"/ws/?p=\").concat(Number(r)+150)}return i?\"wss://\".concat(i,\"/ws/?h=\").concat(n,\"&p=\").concat(r):\"wss://\".concat(n,\":\").concat(r)}const Tw=/wss:\\/\\/(.+)\\/ws\\/\\?h=(.+)&p=([0-9]+)\\/?/,Sw=/wss:\\/\\/(.+)\\/ws\\/\\?p=([0-9]+)\\/?/,gw=/wss:\\/\\/(.+):([0-9]+)\\/?/,Rw=/wss:\\/\\/(.[^\\/]+)\\/?/;let Cw=0;class Iw{constructor(e,t){og(this,\"id\",0),og(this,\"store\",void 0),og(this,\"recordIndex\",void 0),og(this,\"websockets\",[]),og(this,\"try443PortDuration\",2e3),og(this,\"forceCloseWSDuration\",5e3),og(this,\"try443PortTimeout\",null),og(this,\"forceCloseTimeout\",null),og(this,\"isTry443PortFailed\",!1),og(this,\"isNormalPortFailed\",!1),og(this,\"useDoubleDomain\",!1),og(this,\"useProxy\",!1),og(this,\"startTime\",Date.now()),this.id=++Cw,this.try443PortDuration=Dy(\"JOIN_GATEWAY_TRY_443PORT_DURATION\")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];Qy.debug(\"[choose-best-ws \".concat(null===(e=this.store)||void 0===e?void 0:e.clientId,\" \").concat(this.id,\"] \").concat(t,\"ms:\"),...n)}createWebSocket(e,t,i){this.logger(\"createWebSocket:\",e,{isTry443Port:t,hasTimeoutDetection:i});const n=Dy(\"GATEWAY_DOMAINS\"),r=Date.now(),o=[],s=n.find((t=>{var i;return Dn(i=e.host).call(i,t)}));s||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)n.forEach((i=>{a.push(fw(Ew(Ew({},e),{},{host:e.host.replace(s,i)}),t))}));else{const i=Ew({},e);if(t&&s){const e=n.find((e=>e!==s));e&&(i.host=i.host.replace(s,e))}a.push(fw(i,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType=\"arraybuffer\",o.push(t),this.logger(\"ws is connecting:\",t.url)}))}catch(n){if(this.logger(\"ws create failed\"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,i);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,i);throw new Sb(nv.WS_ERR,\"init websocket failed! Error: \".concat(n.toString()))}const c=fI();this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:\"gateway\"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger(\"onopen: ws \".concat(e.url,\" open cost \").concat(Date.now()-r,\"ms\")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger(\"close backup websocket: \".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=i=>{this.logger(\"onclose: ws \".concat(e.url,\" closed cost \").concat(Date.now()-r,\"ms state: \").concat(e.readyState)),t?this.isTry443PortFailed=mw(o):this.isNormalPortFailed=mw(o),this.logger(\"443: \".concat(this.useProxy?\"not try\":this.isTry443PortFailed?\"failed\":\"trying\",\" 47xx: \").concat(this.isNormalPortFailed?\"failed\":\"trying\")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger(\"onclose: all websocket is closed, \".concat(i.reason)),c.reject({code:i.code,reason:xb.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger(\"\".concat(e.url,\" onmessage: \").concat(t.data))})),this.websockets.push(...o);return i||(()=>{const i=()=>{this.logger(\"5s timeout close un-opens, isWebsocket created: \",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger(\"add 5s timeout at \".concat(t?\"try-443\":\"proxy\",\" condition\")),this.forceCloseTimeout=window.setTimeout(i,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger(\"2s timeout, isWebsocket created: \",c.isResolved),c.isResolved)return i();AI().os===RI.MAC_OS&&kI()&&i(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger(\"try 443 port to create ws failed\")})),this.forceCloseTimeout=window.setTimeout(i,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,i,n){return this.useDoubleDomain=!!t,\"string\"==typeof e&&(e=function(e){let t,i,n;return[,t,i,n]=e.match(Tw)||[],t||([,i,n]=e.match(Sw)||[]),i&&n||([,i,n]=e.match(gw)||[]),i&&n||([,i]=e.match(Rw)||[]),i||Qy.warning(\"un-destructible url: \",e),{proxy:t,host:i,port:n||\"443\"}}(e)),this.recordIndex=n,this.useProxy=!!e.proxy,i&&this.useProxy&&(Qy.warn(\"cannot use 443 only when use proxy\"),i=!1),this.createWebSocket(e,!!i,!1).finally((()=>this.clearTimeout()))}}function vw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class yw extends Sv{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Dn(t=[\"tryNext\",\"recover\"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,\"reconnecting\"===this._state?this.emit(Tb.RECONNECTING,this.reconnectReason):\"connected\"===this._state?this.emit(Tb.CONNECTED):\"closed\"===this._state?this.emit(Tb.CLOSED):\"failed\"===this._state&&this.emit(Tb.FAILED))}resetReconnectCount(e){Qy.debug(\"websocket reset reconnect count, reason: \"+e),this.reconnectCount=0}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),og(this,\"connectionID\",0),og(this,\"currentURLIndex\",0),og(this,\"urls\",[]),og(this,\"_reconnectMode\",\"tryNext\"),og(this,\"reconnectReason\",void 0),og(this,\"_initMutex\",new hy(\"websocket\")),og(this,\"name\",void 0),og(this,\"_state\",\"closed\"),og(this,\"reconnectInterrupter\",void 0),og(this,\"websocket\",void 0),og(this,\"retryConfig\",void 0),og(this,\"reconnectCount\",0),og(this,\"forceCloseTimeout\",5e3),og(this,\"onlineReconnectListener\",void 0),og(this,\"useCompress\",void 0),og(this,\"tryDoubleDomain\",!1),og(this,\"use443PortOnly\",!1),og(this,\"wsInflateLength\",0),og(this,\"wsDeflateLength\",0),og(this,\"closeEstablishingWs\",(()=>{})),og(this,\"store\",void 0),og(this,\"joinGatewayRecordIndex\",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vw(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),this.useCompress=i,this.tryDoubleDomain=n,this.use443PortOnly=r;const{timeout:s,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*s/5)),d=Math.max(1.2,Math.floor(8*a)/10);Pv.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d),Vv.on(Lv.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount(\"network state change: \".concat(t,\" -> \").concat(e)),e===Pv.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state=\"connecting\";try{const e=fI(),t=this.urls[this.currentURLIndex];Dy(\"ENABLE_PREALLOC_PC\")&&this.emit(tw.PRE_CONNECT_PC),this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(Tb.CLOSED,(()=>{e.reject(new rv(nv.WS_DISCONNECT))})),this.once(Tb.CONNECTED,e.resolve),await e.promise}catch(e){}finally{i()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount(\"close\"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?\"failed\":\"closed\",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void Qy.warning(\"[\".concat(this.name,\"] can not reconnect, no websocket\"));void 0!==e&&(this.reconnectMode=e),Qy.debug(\"[\".concat(this.name,\"] reconnect is triggered initiative\")),\"number\"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:\"error\",errors:[new Error(t)]},this.joinGatewayRecordIndex);const i=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),i&&i.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new rv(nv.WS_ABORT,\"websocket is not ready\");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new rv(nv.WS_ERR,\"send websocket message error\"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const i=fI();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const n=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),Qy.debug(\"[\".concat(this.name,\"] websocket opened:\"),e),this.reconnectMode=\"retry\",this.state=\"connected\",this.resetReconnectCount(\"opened\"),i.resolve()},r=async e=>{var t;if(Qy.debug(\"[\".concat(this.name,\"] websocket close \").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,\", code: \").concat(e.code,\", reason: \").concat(e.reason,\", current mode: \").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)i.reject(new rv(nv.WS_DISCONNECT,\"websocket close: \".concat(e.code))),this.close();else{\"connected\"===this.state&&(this.reconnectReason=e.reason,this.state=\"reconnecting\");const t=Uv(this,Tb.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,n=await this.reconnectWithAction(t);if(\"closed\"===this.state)return void Qy.debug(\"[\".concat(this.connectionID,\"] ws is closed, no need to reconnect\"));if(!n)return i.reject(new rv(nv.WS_DISCONNECT,\"websocket reconnect failed: \".concat(e.code))),this.close(!0);i.resolve()}},o=e=>{this.emit(Tb.ON_MESSAGE,e)},s=e=>{Qy.warn(\"[\".concat(this.connectionID,\"] ws open error \").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Dy(\"GATEWAY_WSS_ADDRESS\")&&this.name.startsWith(\"gateway\")&&(e=Dy(\"GATEWAY_WSS_ADDRESS\")),Qy.debug(\"[\".concat(this.name,\"] start connect, url:\"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"gateway\"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,n&&n(this.websocket.url),this.websocket.onclose=r,this.websocket.onmessage=o,this.websocket.onerror=s,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:\"success\"},a),this.joinGatewayRecordIndex=a}catch(e){const t=\"closed\"===this.state,n=e instanceof rv,o=n&&e.code===nv.WS_ABORT,s=n&&e.code===nv.WS_ERR,c=n?e.message:e&&(e.reason||e.toString());Qy.warning(\"[choose-best-ws] chooseBestWebsocket error: \".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?\"aborted\":\"error\",errors:[e]},a),t||s?(i.reject(t?new rv(nv.WS_DISCONNECT,\"websocket is closed: \".concat(c)):new rv(nv.WS_ERR,\"init websocket failed: \".concat(c))),s&&Qy.error(\"[\".concat(this.name,\"] init websocket failed: \").concat(c))):r&&r(e)}return i.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if(\"closed\"===this.state)return!1;Qy.warning(\"[choose-best-ws] action: =>\",e),this.onlineReconnectListener||Vv.isOnline||!Vv.onlineWaiter||(this.onlineReconnectListener=Vv.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let i=!0;if(this.reconnectInterrupter=()=>i=!1,t){const t=Ey(this.reconnectCount,this.retryConfig);Qy.debug(\"[\".concat(this.name,\"] wait \").concat(t,\"ms to reconnect websocket, mode: \").concat(e)),await Gh.race([$v(t),this.onlineReconnectListener||new Gh((()=>{}))])}if(\"closed\"===this._state||!i)return!1;this.reconnectCount+=1;const n=async(e,t)=>{this.emit(Tb.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if(\"retry\"===e)this.emit(Tb.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e);else if(\"tryNext\"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction(\"recover\",!1);Qy.debug(\"[\".concat(this.name,\"] websocket url length: \").concat(this.urls.length,\" current index: \").concat(this.currentURLIndex)),this.emit(Tb.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e)}else\"recover\"===e&&(Qy.debug(\"[\".concat(this.name,\"] request new urls\")),this.resetReconnectCount(\"recover mode\"),this.emit(Tb.RECONNECT_WAITTING_FINISH,e),this.urls=await kv(this,Tb.REQUEST_NEW_URLS),this.currentURLIndex=0,await n(this.urls[this.currentURLIndex],e))}catch(i){var r;Qy.error(\"[\".concat(this.name,\"] reconnect failed \").concat(i&&i.toString()));const n=null==i||null===(r=i.data)||void 0===r?void 0:r.desc;return Array.isArray(n)&&Dn(n).call(n,\"dynamic key expired\")?(this.emit(Tb.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class Aw extends yw{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const i=fI(),n=function(e,t){return new Iw(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{Qy.debug(\"[choose-best-ws] close establishing websockets\"),n.closeAllWebsockets(),i.reject(new rv(nv.WS_ABORT,\"choose best websocket aborted\"))};const r=Dy(\"GATEWAY_DOMAINS\");return Qy.debug(\"[choose-best-ws] currentDomain: \",e,\", domains: \",r,\"total: \".concat(this.urls.length),\"current: \".concat(this.currentURLIndex+1)),n.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(i.resolve).catch(i.reject),i.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class bw extends yw{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new Gh(((i,n)=>{let r=!1;const o=[];this.closeEstablishingWs=()=>{Qy.debug(\"[choose-best-ws] close establishing websockets\"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),n(new rv(nv.WS_ABORT,\"choose best websocket aborted\"))};const s=Dy(\"GATEWAY_DOMAINS\");let a;const c=e.indexOf(\"?h=\"),d=s.find((t=>-1!==c?Dn(e).call(e,t,c):Dn(e).call(e,t)));Qy.debug(\"[choose-best-ws] currentDomain: \",d,\", domains: \",s);let l=!this.tryDoubleDomain||!d;if(!l&&d){var u;const h=Date.now();try{s.forEach((t=>{const i=-1===c?e.replace(d,t):e.substr(0,c)+e.substr(c).replace(d,t),n=new WebSocket(i);n.binaryType=\"arraybuffer\",o.push(n),Qy.debug(\"[choose-best-ws] ws is connecting:\",n.url)}))}catch(e){for(Qy.debug(\"[choose-best-ws] ws create failed, fallback to single url\"),o.forEach((e=>e.close()));o.length;)o.pop();l=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:o.map((e=>e.url)),service:\"gateway\"},t),o.forEach((e=>{e.onopen=()=>{if(r)return;const t=Date.now()-h;Qy.debug(\"[choose-best-ws] ws open cost \".concat(t,\"ms\")),o.filter((t=>t!==e)).forEach((e=>{Qy.debug(\"[choose-best-ws]close backup websocket: \".concat(e.url)),e.close()})),r=!0,i(e)},e.onclose=e=>{if(a=e,r)return;o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(Qy.debug(\"[choose-best-ws] all websocket is closed\"),r=!0,n(a))},e.onmessage=t=>{Qy.debug(\"[choose-best-ws]\".concat(e.url,\" onmessage: \").concat(t.data))}})),$v(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(l){var h;let r;Qy.debug(\"[choose-best-ws] use single url: \",e),null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:[e],service:\"gateway\"},t);try{r=new WebSocket(e),o.push(r),r.binaryType=\"arraybuffer\"}catch(e){const t=new rv(nv.WS_ERR,\"init websocket failed! Error: \".concat(e.toString()));return Qy.error(\"[\".concat(this.name,\"]\").concat(t)),void n(t)}r.onopen=()=>{i(r)},r.onclose=e=>{n(e)},r.onmessage=e=>{Qy.debug(\"[choose-best-ws]\".concat(r.url,\" onmessage: \").concat(e.data))},$v(this.forceCloseTimeout).then((()=>{r&&r.readyState!==WebSocket.OPEN&&r.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class ww extends Sv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===hb.CONNECTED?this.emit(pb.WS_CONNECTED):e===hb.RECONNECTING?this.emit(pb.WS_RECONNECTING,this._websocketReconnectReason):e===hb.CLOSED&&this.emit(pb.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),og(this,\"_disconnectedReason\",void 0),og(this,\"_websocketReconnectReason\",void 0),og(this,\"_connectionState\",hb.CLOSED),og(this,\"reconnectToken\",void 0),og(this,\"websocket\",void 0),og(this,\"openConnectionTime\",void 0),og(this,\"clientId\",void 0),og(this,\"lastMsgTime\",Date.now()),og(this,\"uploadCache\",[]),og(this,\"uploadCacheInterval\",void 0),og(this,\"rttRolling\",new fy(5)),og(this,\"pingpongTimer\",void 0),og(this,\"wsInflateDataTimer\",void 0),og(this,\"pingpongTimeoutCount\",0),og(this,\"joinResponse\",void 0),og(this,\"multiIpOption\",void 0),og(this,\"initError\",void 0),og(this,\"spec\",void 0),og(this,\"store\",void 0),og(this,\"onWebsocketMessage\",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(pb.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,\"_id\")){const e=\"res-@\".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,\"_type\")){if(this.emit(t._type,t._message),t._type===mb.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===mb.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(Av.UID_BANNED);break;case 15:this.close(Av.IP_BANNED);break;case 16:this.close(Av.CHANNEL_BANNED)}if(t._type===mb.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case ub.ERR_LICENSE_MISSING:this.close(Av.LICENSE_MISSING);break;case ub.ERR_LICENSE_EXPIRED:this.close(Av.LICENSE_EXPIRED);break;case ub.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Av.LICENSE_MINUTES_EXCEEDED);break;case ub.ERR_LICENSE_PERIOD_INVALID:this.close(Av.LICENSE_PERIOD_INVALID);break;case ub.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Av.LICENSE_MULTIPLE_SDK_SERVICE);break;case ub.ERR_LICENSE_ILLEGAL:this.close(Av.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new Aw(\"gateway-\".concat(this.clientId),this.spec.retryConfig,!0,Dy(\"JOIN_GATEWAY_USE_DUAL_DOMAIN\"),Dy(\"JOIN_GATEWAY_USE_443PORT_ONLY\"),t),this.handleWebsocketEvents(),window.addEventListener(\"offline\",(()=>{this.connectionState===hb.CONNECTED&&this.reconnect(\"retry\",Dv.OFFLINE)}))}async request(e,t,i,n){const r=ey(6,\"\"),o={_id:r,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new Gh(((t,i)=>{if(this.connectionState===hb.CONNECTED)return t();const n=()=>{this.off(pb.WS_CLOSED,r),t()},r=()=>{this.off(pb.WS_CONNECTED,n),i(new Sb(nv.WS_ABORT))};this.once(pb.WS_CONNECTED,n),this.once(pb.WS_CLOSED,r),e!==_b.PUBLISH&&e!==_b.PUBLISH_DATASTREAM&&e!==_b.SUBSCRIBE&&e!==_b.SUBSCRIBE_DATASTREAM&&e!==_b.UNSUBSCRIBE&&e!==_b.UNSUBSCRIBE_DATASTREAM&&e!==_b.UNPUBLISH&&e!==_b.UNPUBLISH_DATASTREAM&&e!==_b.CONTROL&&e!==_b.RESTART_ICE||this.once(pb.DISCONNECT_P2P,(()=>{i(new Sb(nv.DISCONNECT_P2P))})),e!==_b.PUBLISH&&e!==_b.RESTART_ICE||this.once(pb.ABORT_P2P_EXECUTION,(()=>{i(new Sb(nv.DISCONNECT_P2P))}))}));if(this.connectionState!==hb.CONNECTING&&this.connectionState!==hb.RECONNECTING||e===_b.JOIN||e===_b.REJOIN||await a(),this.websocket.sendMessage(o,!0),n)return;const c=new Gh(((i,n)=>{let o=!1;const a=(n,r)=>{o=!0,i({isSuccess:\"success\"===n,message:r||{}}),this.off(pb.WS_CLOSED,c),this.off(pb.WS_RECONNECTING,c),this.emit(pb.REQUEST_SUCCESS,e,t)};this.once(\"res-@\".concat(r),a);const c=()=>{n(new Sb(nv.WS_ABORT,\"type: \".concat(e))),this.off(pb.WS_CLOSED,c),this.off(pb.WS_RECONNECTING,c),this.off(\"res-@\".concat(r),a)};this.once(pb.WS_CLOSED,c),this.once(pb.WS_RECONNECTING,c),$v(Dy(\"SIGNAL_REQUEST_TIMEOUT\")).then((()=>{this.websocket.connectionID!==s||o||(Qy.warning(\"[\".concat(this.clientId,\"] ws request timeout, type: \").concat(e)),this.emit(pb.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(n){if(this.connectionState===hb.CLOSED||e===_b.LEAVE)throw new Sb(nv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===_b.JOIN||e===_b.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=pw(l),h=new Sb(nv.UNEXPECTED_RESPONSE,\"\".concat(u.desc,\": \").concat(d.message.error_str),{code:l,data:d.message,desc:u.desc});return\"success\"===u.action?d.message:(Qy.warning(\"[\".concat(this.clientId,\"] [\").concat(this.websocket.connectionID,\"] unexpected response from type \").concat(e,\", error_code: \").concat(l,\", message: \").concat(u.desc,\", action: \").concat(u.action)),l===ub.ERR_TOO_MANY_BROADCASTERS?e===_b.JOIN||e===_b.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():\"failed\"===u.action?h.throw():\"quit\"===u.action?(this.initError=h,this.close(),h.throw()):(l===ub.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,Qy.warning(\"[\".concat(this.clientId,\"] detect multi ip, recover\")),this.reconnect(\"recover\",Dv.MULTI_IP)):this.reconnect(u.action,Dv.SERVER_ERROR),e===_b.JOIN||e===_b.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new Gh((i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void Qy.warn(\"[\".concat(this.clientId,\"] no session id when upload wrtc stats\"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(Eb.WRTC_STATS,t)}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=Dy(\"MAX_UPLOAD_CACHE\")||50;this.uploadCache.push(i),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==hb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Dy(\"UPLOAD_CACHE_INTERVAL\")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Gh(((t,i)=>{this.once(pb.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(pb.WS_CLOSED,(()=>i(this.initError||new Sb(nv.WS_ABORT)))),this.connectionState=hb.CONNECTING,this.websocket.init(e).catch(i),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Av.LEAVE,this.connectionState=hb.CLOSED,Qy.debug(\"[\".concat(this.clientId,\"] \")+\"will close websocket in signal\"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(pb.ABORT_P2P_EXECUTION);const e=await kv(this,pb.REQUEST_JOIN_INFO),t=await this.request(_b.JOIN,e);if(!t)return this.emit(pb.REPORT_JOIN_GATEWAY,xb.TIMEOUT,this.url||\"\"),!1;this.joinResponse=t,this.emit(pb.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=hb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Sb(nv.UNEXPECTED_ERROR,\"can not rejoin, no rejoin token\");const e=xv(this,pb.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(_b.REJOIN,e);return!!t&&(this.connectionState=hb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(mb.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(mb.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(mb.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(mb.MUTE_AUDIO,{uid:e.uid}):this.emit(mb.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(mb.MUTE_VIDEO,{uid:e.uid}):this.emit(mb.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(mb.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(mb.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(mb.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(mb.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(mb.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){Qy.debug(\"[\".concat(this.clientId,\"] receive notification: \"),e);const t=pw(e.code);if(\"success\"!==t.action){if(\"failed\"!==t.action)return\"quit\"===t.action?(\"ERR_REPEAT_JOIN_CHANNEL\"===t.desc&&this.close(Av.UID_BANNED),void this.close()):void this.reconnect(t.action,Dv.SERVER_ERROR);Qy.error(\"[\".concat(this.clientId,\"] ignore error: \"),t.desc)}}handlePingPong(){if(!this.websocket||\"connected\"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Dy(\"PING_PONG_TIME_OUT\"),t=Date.now();this.pingpongTimeoutCount>=e&&(Qy.warning(\"[\".concat(this.clientId,\"] PING-PONG Timeout. Last Socket Message: \").concat(t-this.lastMsgTime,\"ms\")),t-this.lastMsgTime>Dy(\"WEBSOCKET_TIMEOUT_MIN\"))?this.reconnect(\"retry\",Dv.TIMEOUT):this.request(_b.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Dy(\"REPORT_STATS\")&&this.send(_b.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(Eb.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(Tb.RECONNECT_WAITTING_FINISH,(e=>{this.emit(pb.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(Tb.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(pb.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(Tb.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Tb.CLOSED,(()=>{this.connectionState=hb.CLOSED})),this.websocket.on(Tb.FAILED,(()=>{this._disconnectedReason=Av.NETWORK_ERROR,this.connectionState=hb.CLOSED})),this.websocket.on(Tb.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===hb.CONNECTED?this.connectionState=hb.RECONNECTING:this.connectionState=hb.CONNECTING})),this.websocket.on(Tb.WILL_RECONNECT,((e,t,i)=>{const n=xv(this,pb.IS_P2P_DISCONNECTED),r=n||\"retry\"!==e;n&&\"retry\"===e&&(Qy.debug(\"\".concat(this.clientId,\" reconnect mode is retry, but p2p lost, change to tryNext\")),e=\"tryNext\",t=xb.P2P_DISCONNECTED),r&&(Qy.debug(\"\".concat(this.clientId,\" will renewSession, reconnect mode: \").concat(e)),this.emit(pb.REPORT_JOIN_GATEWAY,t||xb.UNKNOWN_REASON,this.url||\"\"),this.reconnectToken=void 0,this.emit(pb.DISCONNECT_P2P)),i(e)})),this.websocket.on(Tb.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{Qy.warning(\"[\".concat(this.clientId,\"] rejoin failed \").concat(e)),this.reconnect(\"tryNext\",Dv.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(pb.REPORT_JOIN_GATEWAY,e,this.url||\"\"),e instanceof Sb){if(e.code===nv.UNEXPECTED_RESPONSE&&e.data.code===ub.ERR_NO_AUTHORIZED)return this.initError=new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,\"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired\"),Qy.warning(\"[\".concat(this.clientId,\"] reconnect no authorized, recover\")),void this.reconnect(\"recover\",Dv.SERVER_ERROR);Qy.error(\"[\".concat(this.clientId,\"] join gateway request failed\"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect(\"tryNext\",Dv.SERVER_ERROR):(this.initError=e,this.close())}}))})),this.websocket.on(Tb.REQUEST_NEW_URLS,((e,t)=>{kv(this,pb.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(Tb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(mb.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(tw.PRE_CONNECT_PC,(()=>{this.emit(pb.PRE_CONNECT_PC)}))}}let Ow=function(e){return e[e.CHOOSE_SERVER=11]=\"CHOOSE_SERVER\",e[e.CLOUD_PROXY=18]=\"CLOUD_PROXY\",e[e.CLOUD_PROXY_5=20]=\"CLOUD_PROXY_5\",e[e.CLOUD_PROXY_FALLBACK=26]=\"CLOUD_PROXY_FALLBACK\",e}({});function Nw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Dw(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Nw(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Pw(e){return e.match(/^[\\.\\:\\d]+$/)?\"\".concat(e.replace(/[^\\d]/g,\"-\"),\".\").concat(Dy(\"TURN_DOMAIN\")):(Qy.info(\"Unidentified as ip: \".concat(e,\", use as host\")),e)}function Lw(e,t){e.addresses||(e.addresses=[]);const i=function(e,t){if(Dy(\"CONNECT_GATEWAY_WITHOUT_DOMAIN\"))return e.map((e=>{let{ip:t,port:i}=e;return{address:\"\".concat(t,\":\").concat(i)}}));const i=Dy(\"GATEWAY_DOMAINS\");let n=i[1]&&Dn(t).call(t,i[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:r,ip:o}=e;if(t)return{address:\"\".concat(t,\".\").concat(i[n++%i.length],\":\").concat(r)};const s=/^[\\.\\:\\d]+$/.test(o),a=s?\"\".concat(o.replace(/[^\\d]/g,\"-\"),\".\").concat(i[n++%i.length],\":\").concat(r):\"\".concat(o,\":\").concat(r);return s||Qy.info(\"Unidentified as ip: \".concat(o,\", use as host\")),{ip:o,port:r,address:a}}))}(e.addresses,t),n=Array.isArray(e.detail)&&e.detail[18];if(n&&\"string\"==typeof n){const e=n.split(\";\");for(let t=0;t<e.length;t++){var r;const n=jp(r=e[t]).call(r);i[t]&&n&&(i[t].ip6=n)}}const o=e.detail&&e.detail.candidate;let s;if(o){const[e,t]=o.split(\":\");e&&t&&(s={port:Number(t),ip:e,address:\"\".concat(e,\":\").concat(t)})}return{gatewayAddrs:i,apGatewayAddress:s,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function kw(e){return\"number\"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Mw(e){const t=e._encoderConfig;if(!t)return{};const i={resolution:t.width&&t.height?\"\".concat(kw(t.width),\"x\").concat(kw(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return\"number\"==typeof t.frameRate?(i.maxFrameRate=t.frameRate,i.minFrameRate=t.frameRate):t.frameRate&&(i.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,i.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),i}function Uw(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function xw(e,t){let i,n,r;switch(t){case Ow.CHOOSE_SERVER:n=4096,r=\"choose server\";break;case Ow.CLOUD_PROXY:n=1048576,r=\"proxy\";break;case Ow.CLOUD_PROXY_5:n=4194304,r=\"proxy5\";break;case Ow.CLOUD_PROXY_FALLBACK:n=4194310,r=\"proxy fallback\";break;default:throw new Sb(nv.UNEXPECTED_ERROR,\"multi unlibs response transformer get unknown service id\",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===n&&(i={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>Dw(Dw({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:Dw(Dw({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!i)throw new Sb(nv.MULTI_UNILBS_RESPONSE_ERROR,\"cannot parse response \".concat(r,\" from multi unilbs response\"),{csIp:e.detail&&e.detail[502]});return i}async function Vw(e,t){return await Gh.all(e.addresses.map((async e=>({address:Pw(e.ip),tcpport:e.port,udpport:e.port,username:t&&Dy(\"ENCRYPT_PROXY_USERNAME_AND_PSW\")&&window.isSecureContext?t.toString():cA.username,password:t&&Dy(\"ENCRYPT_PROXY_USERNAME_AND_PSW\")&&window.isSecureContext?await Tv(t.toString()):cA.password}))))}function Fw(e,t){const i=t.getMediaStreamTrack(!0).getSettings(),n=t.videoHeight||i.height,r=t.videoWidth||i.width;return n&&r?Math.max(Math.min(n,r)/Math.min(kw(e.height),kw(e.width)),1):(Qy.warning(\"can't get ori-track's height, default scale down 4 times for low stream\"),4)}function Bw(e){let{candidateType:t,relayProtocol:i,type:n,address:r,port:o,protocol:s}=e;return\"local-candidate\"===n?{candidateType:t,relayProtocol:i,protocol:s}:{candidateType:t,relayProtocol:i,address:r,port:o,protocol:s}}var jw,Gw=i(UA),Ww=Xi(\"Array\").values,Hw=pn,Kw=Ze,Yw=l,qw=Ww,zw=Array.prototype,Jw={DOMTokenList:!0,NodeList:!0},Xw=function(e){var t=e.values;return e===zw||Yw(zw,e)&&t===zw.values||Kw(Jw,Hw(e))?qw:t},Qw=i(Xw),Zw=N,$w=d,eO=L,tO=n,iO=eo,nO=Br,rO=k,oO=Je,sO=K,aO=Object.assign,cO=Object.defineProperty,dO=$w([].concat),lO=!aO||tO((function(){if(Zw&&1!==aO({b:1},aO(cO({},\"a\",{enumerable:!0,get:function(){cO(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),n=\"abcdefghijklmnopqrst\";return e[i]=7,n.split(\"\").forEach((function(e){t[e]=e})),7!=aO({},e)[i]||iO(aO({},t)).join(\"\")!=n}))?function(e,t){for(var i=oO(e),n=arguments.length,r=1,o=nO.f,s=rO.f;n>r;)for(var a,c=sO(arguments[r++]),d=o?dO(iO(c),o(c)):iO(c),l=d.length,u=0;l>u;)a=d[u++],Zw&&!eO(s,c,a)||(i[a]=c[a]);return i}:aO,uO=ii,hO=rs,pO=Xt,_O=L,EO=Je,mO=function(e,t,i,n){try{return n?t(uO(i)[0],i[1]):t(i)}catch(t){hO(e,\"throw\",t)}},fO=jo,TO=jc,SO=Gi,gO=E_,RO=es,CO=qo,IO=Array,vO=d,yO=2147483647,AO=/[^\\0-\\u007E]/,bO=/[.\\u3002\\uFF0E\\uFF61]/g,wO=\"Overflow: input needs wider integers to process\",OO=RangeError,NO=vO(bO.exec),DO=Math.floor,PO=String.fromCharCode,LO=vO(\"\".charCodeAt),kO=vO([].join),MO=vO([].push),UO=vO(\"\".replace),xO=vO(\"\".split),VO=vO(\"\".toLowerCase),FO=function(e){return e+22+75*(e<26)},BO=function(e,t,i){var n=0;for(e=i?DO(e/700):e>>1,e+=DO(e/t);e>455;)e=DO(e/35),n+=36;return DO(n+36*e/(e+38))},jO=function(e){var t=[];e=function(e){for(var t=[],i=0,n=e.length;i<n;){var r=LO(e,i++);if(r>=55296&&r<=56319&&i<n){var o=LO(e,i++);56320==(64512&o)?MO(t,((1023&r)<<10)+(1023&o)+65536):(MO(t,r),i--)}else MO(t,r)}return t}(e);var i,n,r=e.length,o=128,s=0,a=72;for(i=0;i<e.length;i++)(n=e[i])<128&&MO(t,PO(n));var c=t.length,d=c;for(c&&MO(t,\"-\");d<r;){var l=yO;for(i=0;i<e.length;i++)(n=e[i])>=o&&n<l&&(l=n);var u=d+1;if(l-o>DO((yO-s)/u))throw OO(wO);for(s+=(l-o)*u,o=l,i=0;i<e.length;i++){if((n=e[i])<o&&++s>yO)throw OO(wO);if(n==o){for(var h=s,p=36;;){var _=p<=a?1:p>=a+26?26:p-a;if(h<_)break;var E=h-_,m=36-_;MO(t,PO(FO(_+E%m))),h=DO(E/m),p+=36}MO(t,PO(FO(h))),a=BO(s,u,d==c),s=0,d++}}s++,o++}return kO(t,\"\")},GO=wi,WO=N,HO=cg,KO=h,YO=Xt,qO=d,zO=ha,JO=hc,XO=Sc,QO=Ze,ZO=lO,$O=function(e){var t=EO(e),i=TO(this),n=arguments.length,r=n>1?arguments[1]:void 0,o=void 0!==r;o&&(r=pO(r,n>2?arguments[2]:void 0));var s,a,c,d,l,u,h=CO(t),p=0;if(!h||this===IO&&fO(h))for(s=SO(t),a=i?new this(s):IO(s);s>p;p++)u=o?r(t[p],p):t[p],gO(a,p,u);else for(l=(d=RO(t,h)).next,a=i?new this:[];!(c=_O(l,d)).done;p++)u=o?mO(d,r,[c.value,p],!0):c.value,gO(a,p,u);return a.length=p,a},eN=R_,tN=Ch.codeAt,iN=function(e){var t,i,n=[],r=xO(UO(VO(e),bO,\".\"),\".\");for(t=0;t<r.length;t++)i=r[t],MO(n,NO(AO,i)?\"xn--\"+jO(i):i);return kO(n,\".\")},nN=mn,rN=Da,oN=Zc,sN=vR,aN=ra,cN=aN.set,dN=aN.getterFor(\"URL\"),lN=sN.URLSearchParams,uN=sN.getState,hN=KO.URL,pN=KO.TypeError,_N=KO.parseInt,EN=Math.floor,mN=Math.pow,fN=qO(\"\".charAt),TN=qO(/./.exec),SN=qO([].join),gN=qO(1..toString),RN=qO([].pop),CN=qO([].push),IN=qO(\"\".replace),vN=qO([].shift),yN=qO(\"\".split),AN=qO(\"\".slice),bN=qO(\"\".toLowerCase),wN=qO([].unshift),ON=\"Invalid scheme\",NN=\"Invalid host\",DN=\"Invalid port\",PN=/[a-z]/i,LN=/[\\d+-.a-z]/i,kN=/\\d/,MN=/^0x/i,UN=/^[0-7]+$/,xN=/^\\d+$/,VN=/^[\\da-f]+$/i,FN=/[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/,BN=/[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/,jN=/^[\\u0000-\\u0020]+/,GN=/(^|[^\\u0000-\\u0020])[\\u0000-\\u0020]+$/,WN=/[\\t\\n\\r]/g,HN=function(e){var t,i,n,r;if(\"number\"==typeof e){for(t=[],i=0;i<4;i++)wN(t,e%256),e=EN(e/256);return SN(t,\".\")}if(\"object\"==typeof e){for(t=\"\",n=function(e){for(var t=null,i=1,n=null,r=0,o=0;o<8;o++)0!==e[o]?(r>i&&(t=n,i=r),n=null,r=0):(null===n&&(n=o),++r);return r>i&&(t=n,i=r),t}(e),i=0;i<8;i++)r&&0===e[i]||(r&&(r=!1),n===i?(t+=i?\":\":\"::\",r=!0):(t+=gN(e[i],16),i<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},KN={},YN=ZO({},KN,{\" \":1,'\"':1,\"<\":1,\">\":1,\"`\":1}),qN=ZO({},YN,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),zN=ZO({},qN,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),JN=function(e,t){var i=tN(e,0);return i>32&&i<127&&!QO(t,e)?e:encodeURIComponent(e)},XN={ftp:21,file:null,http:80,https:443,ws:80,wss:443},QN=function(e,t){var i;return 2==e.length&&TN(PN,fN(e,0))&&(\":\"==(i=fN(e,1))||!t&&\"|\"==i)},ZN=function(e){var t;return e.length>1&&QN(AN(e,0,2))&&(2==e.length||\"/\"===(t=fN(e,2))||\"\\\\\"===t||\"?\"===t||\"#\"===t)},$N=function(e){return\".\"===e||\"%2e\"===bN(e)},eD={},tD={},iD={},nD={},rD={},oD={},sD={},aD={},cD={},dD={},lD={},uD={},hD={},pD={},_D={},ED={},mD={},fD={},TD={},SD={},gD={},RD=function(e,t,i){var n,r,o,s=nN(e);if(t){if(r=this.parse(s))throw pN(r);this.searchParams=null}else{if(void 0!==i&&(n=new RD(i,!0)),r=this.parse(s,null,n))throw pN(r);(o=uN(new lN)).bindURL(this),this.searchParams=o}};RD.prototype={type:\"URL\",parse:function(e,t,i){var n,r,o,s,a,c=this,d=t||eD,l=0,u=\"\",h=!1,p=!1,_=!1;for(e=nN(e),t||(c.scheme=\"\",c.username=\"\",c.password=\"\",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=IN(e,jN,\"\"),e=IN(e,GN,\"$1\")),e=IN(e,WN,\"\"),n=$O(e);l<=n.length;){switch(r=n[l],d){case eD:if(!r||!TN(PN,r)){if(t)return ON;d=iD;continue}u+=bN(r),d=tD;break;case tD:if(r&&(TN(LN,r)||\"+\"==r||\"-\"==r||\".\"==r))u+=bN(r);else{if(\":\"!=r){if(t)return ON;u=\"\",d=iD,l=0;continue}if(t&&(c.isSpecial()!=QO(XN,u)||\"file\"==u&&(c.includesCredentials()||null!==c.port)||\"file\"==c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&XN[c.scheme]==c.port&&(c.port=null));u=\"\",\"file\"==c.scheme?d=pD:c.isSpecial()&&i&&i.scheme==c.scheme?d=nD:c.isSpecial()?d=aD:\"/\"==n[l+1]?(d=rD,l++):(c.cannotBeABaseURL=!0,CN(c.path,\"\"),d=TD)}break;case iD:if(!i||i.cannotBeABaseURL&&\"#\"!=r)return ON;if(i.cannotBeABaseURL&&\"#\"==r){c.scheme=i.scheme,c.path=eN(i.path),c.query=i.query,c.fragment=\"\",c.cannotBeABaseURL=!0,d=gD;break}d=\"file\"==i.scheme?pD:oD;continue;case nD:if(\"/\"!=r||\"/\"!=n[l+1]){d=oD;continue}d=cD,l++;break;case rD:if(\"/\"==r){d=dD;break}d=fD;continue;case oD:if(c.scheme=i.scheme,r==jw)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=eN(i.path),c.query=i.query;else if(\"/\"==r||\"\\\\\"==r&&c.isSpecial())d=sD;else if(\"?\"==r)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=eN(i.path),c.query=\"\",d=SD;else{if(\"#\"!=r){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=eN(i.path),c.path.length--,d=fD;continue}c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=eN(i.path),c.query=i.query,c.fragment=\"\",d=gD}break;case sD:if(!c.isSpecial()||\"/\"!=r&&\"\\\\\"!=r){if(\"/\"!=r){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,d=fD;continue}d=dD}else d=cD;break;case aD:if(d=cD,\"/\"!=r||\"/\"!=fN(u,l+1))continue;l++;break;case cD:if(\"/\"!=r&&\"\\\\\"!=r){d=dD;continue}break;case dD:if(\"@\"==r){h&&(u=\"%40\"+u),h=!0,o=$O(u);for(var E=0;E<o.length;E++){var m=o[E];if(\":\"!=m||_){var f=JN(m,zN);_?c.password+=f:c.username+=f}else _=!0}u=\"\"}else if(r==jw||\"/\"==r||\"?\"==r||\"#\"==r||\"\\\\\"==r&&c.isSpecial()){if(h&&\"\"==u)return\"Invalid authority\";l-=$O(u).length+1,u=\"\",d=lD}else u+=r;break;case lD:case uD:if(t&&\"file\"==c.scheme){d=ED;continue}if(\":\"!=r||p){if(r==jw||\"/\"==r||\"?\"==r||\"#\"==r||\"\\\\\"==r&&c.isSpecial()){if(c.isSpecial()&&\"\"==u)return NN;if(t&&\"\"==u&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(u))return s;if(u=\"\",d=mD,t)return;continue}\"[\"==r?p=!0:\"]\"==r&&(p=!1),u+=r}else{if(\"\"==u)return NN;if(s=c.parseHost(u))return s;if(u=\"\",d=hD,t==uD)return}break;case hD:if(!TN(kN,r)){if(r==jw||\"/\"==r||\"?\"==r||\"#\"==r||\"\\\\\"==r&&c.isSpecial()||t){if(\"\"!=u){var T=_N(u,10);if(T>65535)return DN;c.port=c.isSpecial()&&T===XN[c.scheme]?null:T,u=\"\"}if(t)return;d=mD;continue}return DN}u+=r;break;case pD:if(c.scheme=\"file\",\"/\"==r||\"\\\\\"==r)d=_D;else{if(!i||\"file\"!=i.scheme){d=fD;continue}if(r==jw)c.host=i.host,c.path=eN(i.path),c.query=i.query;else if(\"?\"==r)c.host=i.host,c.path=eN(i.path),c.query=\"\",d=SD;else{if(\"#\"!=r){ZN(SN(eN(n,l),\"\"))||(c.host=i.host,c.path=eN(i.path),c.shortenPath()),d=fD;continue}c.host=i.host,c.path=eN(i.path),c.query=i.query,c.fragment=\"\",d=gD}}break;case _D:if(\"/\"==r||\"\\\\\"==r){d=ED;break}i&&\"file\"==i.scheme&&!ZN(SN(eN(n,l),\"\"))&&(QN(i.path[0],!0)?CN(c.path,i.path[0]):c.host=i.host),d=fD;continue;case ED:if(r==jw||\"/\"==r||\"\\\\\"==r||\"?\"==r||\"#\"==r){if(!t&&QN(u))d=fD;else if(\"\"==u){if(c.host=\"\",t)return;d=mD}else{if(s=c.parseHost(u))return s;if(\"localhost\"==c.host&&(c.host=\"\"),t)return;u=\"\",d=mD}continue}u+=r;break;case mD:if(c.isSpecial()){if(d=fD,\"/\"!=r&&\"\\\\\"!=r)continue}else if(t||\"?\"!=r)if(t||\"#\"!=r){if(r!=jw&&(d=fD,\"/\"!=r))continue}else c.fragment=\"\",d=gD;else c.query=\"\",d=SD;break;case fD:if(r==jw||\"/\"==r||\"\\\\\"==r&&c.isSpecial()||!t&&(\"?\"==r||\"#\"==r)){if(\"..\"===(a=bN(a=u))||\"%2e.\"===a||\".%2e\"===a||\"%2e%2e\"===a?(c.shortenPath(),\"/\"==r||\"\\\\\"==r&&c.isSpecial()||CN(c.path,\"\")):$N(u)?\"/\"==r||\"\\\\\"==r&&c.isSpecial()||CN(c.path,\"\"):(\"file\"==c.scheme&&!c.path.length&&QN(u)&&(c.host&&(c.host=\"\"),u=fN(u,0)+\":\"),CN(c.path,u)),u=\"\",\"file\"==c.scheme&&(r==jw||\"?\"==r||\"#\"==r))for(;c.path.length>1&&\"\"===c.path[0];)vN(c.path);\"?\"==r?(c.query=\"\",d=SD):\"#\"==r&&(c.fragment=\"\",d=gD)}else u+=JN(r,qN);break;case TD:\"?\"==r?(c.query=\"\",d=SD):\"#\"==r?(c.fragment=\"\",d=gD):r!=jw&&(c.path[0]+=JN(r,KN));break;case SD:t||\"#\"!=r?r!=jw&&(\"'\"==r&&c.isSpecial()?c.query+=\"%27\":c.query+=\"#\"==r?\"%23\":JN(r,KN)):(c.fragment=\"\",d=gD);break;case gD:r!=jw&&(c.fragment+=JN(r,YN))}l++}},parseHost:function(e){var t,i,n;if(\"[\"==fN(e,0)){if(\"]\"!=fN(e,e.length-1))return NN;if(t=function(e){var t,i,n,r,o,s,a,c=[0,0,0,0,0,0,0,0],d=0,l=null,u=0,h=function(){return fN(e,u)};if(\":\"==h()){if(\":\"!=fN(e,1))return;u+=2,l=++d}for(;h();){if(8==d)return;if(\":\"!=h()){for(t=i=0;i<4&&TN(VN,h());)t=16*t+_N(h(),16),u++,i++;if(\".\"==h()){if(0==i)return;if(u-=i,d>6)return;for(n=0;h();){if(r=null,n>0){if(!(\".\"==h()&&n<4))return;u++}if(!TN(kN,h()))return;for(;TN(kN,h());){if(o=_N(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;u++}c[d]=256*c[d]+r,2!=++n&&4!=n||d++}if(4!=n)return;break}if(\":\"==h()){if(u++,!h())return}else if(h())return;c[d++]=t}else{if(null!==l)return;u++,l=++d}}if(null!==l)for(s=d-l,d=7;0!=d&&s>0;)a=c[d],c[d--]=c[l+s-1],c[l+--s]=a;else if(8!=d)return;return c}(AN(e,1,-1)),!t)return NN;this.host=t}else if(this.isSpecial()){if(e=iN(e),TN(FN,e))return NN;if(t=function(e){var t,i,n,r,o,s,a,c=yN(e,\".\");if(c.length&&\"\"==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(i=[],n=0;n<t;n++){if(\"\"==(r=c[n]))return e;if(o=10,r.length>1&&\"0\"==fN(r,0)&&(o=TN(MN,r)?16:8,r=AN(r,8==o?1:2)),\"\"===r)s=0;else{if(!TN(10==o?xN:8==o?UN:VN,r))return e;s=_N(r,o)}CN(i,s)}for(n=0;n<t;n++)if(s=i[n],n==t-1){if(s>=mN(256,5-t))return null}else if(s>255)return null;for(a=RN(i),n=0;n<i.length;n++)a+=i[n]*mN(256,3-n);return a}(e),null===t)return NN;this.host=t}else{if(TN(BN,e))return NN;for(t=\"\",i=$O(e),n=0;n<i.length;n++)t+=JN(i[n],KN);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||\"file\"==this.scheme},includesCredentials:function(){return\"\"!=this.username||\"\"!=this.password},isSpecial:function(){return QO(XN,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||\"file\"==this.scheme&&1==t&&QN(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,n=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,d=t+\":\";return null!==r?(d+=\"//\",e.includesCredentials()&&(d+=i+(n?\":\"+n:\"\")+\"@\"),d+=HN(r),null!==o&&(d+=\":\"+o)):\"file\"==t&&(d+=\"//\"),d+=e.cannotBeABaseURL?s[0]:s.length?\"/\"+SN(s,\"/\"):\"\",null!==a&&(d+=\"?\"+a),null!==c&&(d+=\"#\"+c),d},setHref:function(e){var t=this.parse(e);if(t)throw pN(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(\"blob\"==e)try{return new CD(e.path[0]).origin}catch(e){return\"null\"}return\"file\"!=e&&this.isSpecial()?e+\"://\"+HN(this.host)+(null!==t?\":\"+t:\"\"):\"null\"},getProtocol:function(){return this.scheme+\":\"},setProtocol:function(e){this.parse(nN(e)+\":\",eD)},getUsername:function(){return this.username},setUsername:function(e){var t=$O(nN(e));if(!this.cannotHaveUsernamePasswordPort()){this.username=\"\";for(var i=0;i<t.length;i++)this.username+=JN(t[i],zN)}},getPassword:function(){return this.password},setPassword:function(e){var t=$O(nN(e));if(!this.cannotHaveUsernamePasswordPort()){this.password=\"\";for(var i=0;i<t.length;i++)this.password+=JN(t[i],zN)}},getHost:function(){var e=this.host,t=this.port;return null===e?\"\":null===t?HN(e):HN(e)+\":\"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,lD)},getHostname:function(){var e=this.host;return null===e?\"\":HN(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,uD)},getPort:function(){var e=this.port;return null===e?\"\":nN(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(\"\"==(e=nN(e))?this.port=null:this.parse(e,hD))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?\"/\"+SN(e,\"/\"):\"\"},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,mD))},getSearch:function(){var e=this.query;return e?\"?\"+e:\"\"},setSearch:function(e){\"\"==(e=nN(e))?this.query=null:(\"?\"==fN(e,0)&&(e=AN(e,1)),this.query=\"\",this.parse(e,SD)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?\"#\"+e:\"\"},setHash:function(e){\"\"!=(e=nN(e))?(\"#\"==fN(e,0)&&(e=AN(e,1)),this.fragment=\"\",this.parse(e,gD)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var CD=function(e){var t=XO(this,ID),i=oN(arguments.length,1)>1?arguments[1]:void 0,n=cN(t,new RD(e,!1,i));WO||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},ID=CD.prototype,vD=function(e,t){return{get:function(){return dN(this)[e]()},set:t&&function(e){return dN(this)[t](e)},configurable:!0,enumerable:!0}};if(WO&&(JO(ID,\"href\",vD(\"serialize\",\"setHref\")),JO(ID,\"origin\",vD(\"getOrigin\")),JO(ID,\"protocol\",vD(\"getProtocol\",\"setProtocol\")),JO(ID,\"username\",vD(\"getUsername\",\"setUsername\")),JO(ID,\"password\",vD(\"getPassword\",\"setPassword\")),JO(ID,\"host\",vD(\"getHost\",\"setHost\")),JO(ID,\"hostname\",vD(\"getHostname\",\"setHostname\")),JO(ID,\"port\",vD(\"getPort\",\"setPort\")),JO(ID,\"pathname\",vD(\"getPathname\",\"setPathname\")),JO(ID,\"search\",vD(\"getSearch\",\"setSearch\")),JO(ID,\"searchParams\",vD(\"getSearchParams\")),JO(ID,\"hash\",vD(\"getHash\",\"setHash\"))),zO(ID,\"toJSON\",(function(){return dN(this).serialize()}),{enumerable:!0}),zO(ID,\"toString\",(function(){return dN(this).serialize()}),{enumerable:!0}),hN){var yD=hN.createObjectURL,AD=hN.revokeObjectURL;yD&&zO(CD,\"createObjectURL\",YO(yD,hN)),AD&&zO(CD,\"revokeObjectURL\",YO(AD,hN))}rN(CD,\"URL\"),GO({global:!0,constructor:!0,forced:!HO,sham:!WO},{URL:CD});var bD=wi,wD=n,OD=Zc,ND=mn,DD=cg,PD=ae(\"URL\");bD({target:\"URL\",stat:!0,forced:!(DD&&wD((function(){PD.canParse()})))},{canParse:function(e){var t=OD(arguments.length,1),i=ND(e),n=t<2||void 0===arguments[1]?void 0:ND(arguments[1]);try{return!!new PD(i,n)}catch(e){return!1}}});var LD=i(ie.URL);const kD={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function MD(){return kD}function UD(){return\"setSinkId\"in HTMLAudioElement.prototype&&(!Dy(\"RESTRICTION_SET_PLAYBACK_DEVICE\")||(DI()||LI())&&!XI())}function xD(){return!kD.supportUnifiedPlan||Dy(\"CHROME_FORCE_PLAN_B\")&&QI()}let VD=function(e){return e.IOS_15_16_INTERRUPTION_START=\"ios15_16-interruption-start\",e.IOS_15_16_INTERRUPTION_END=\"ios15_16-interruption-end\",e.IOS_INTERRUPTION_START=\"ios-interruption-start\",e.IOS_INTERRUPTION_END=\"ios-interruption-end\",e.STATE_CHANGE=\"state-change\",e}({});function FD(e,t,i){return{sampleRate:e,stereo:t,bitrate:i}}function BD(e,t,i,n,r){return{width:e,height:t,frameRate:i,bitrateMin:n,bitrateMax:r}}function jD(e,t,i,n,r){return{width:{max:e},height:{max:t},frameRate:i,bitrateMin:n,bitrateMax:r}}function GD(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const WD={\"90p\":BD(160,90),\"90p_1\":BD(160,90),\"120p\":BD(160,120,15,30,65),\"120p_1\":BD(160,120,15,30,65),\"120p_3\":BD(120,120,15,30,50),\"120p_4\":BD(212,120),\"180p\":BD(320,180,15,30,140),\"180p_1\":BD(320,180,15,30,140),\"180p_3\":BD(180,180,15,30,100),\"180p_4\":BD(240,180,15,30,120),\"240p\":BD(320,240,15,40,200),\"240p_1\":BD(320,240,15,40,200),\"240p_3\":BD(240,240,15,40,140),\"240p_4\":BD(424,240,15,40,220),\"360p\":BD(640,360,15,80,400),\"360p_1\":BD(640,360,15,80,400),\"360p_3\":BD(360,360,15,80,260),\"360p_4\":BD(640,360,30,80,600),\"360p_6\":BD(360,360,30,80,400),\"360p_7\":BD(480,360,15,80,320),\"360p_8\":BD(480,360,30,80,490),\"360p_9\":BD(640,360,15,80,800),\"360p_10\":BD(640,360,24,80,800),\"360p_11\":BD(640,360,24,80,1e3),\"480p\":BD(640,480,15,100,500),\"480p_1\":BD(640,480,15,100,500),\"480p_2\":BD(640,480,30,100,1e3),\"480p_3\":BD(480,480,15,100,400),\"480p_4\":BD(640,480,30,100,750),\"480p_6\":BD(480,480,30,100,600),\"480p_8\":BD(848,480,15,100,610),\"480p_9\":BD(848,480,30,100,930),\"480p_10\":BD(640,480,10,100,400),\"720p\":BD(1280,720,15,120,1130),\"720p_auto\":BD(1280,720,30,900,3e3),\"720p_1\":BD(1280,720,15,120,1130),\"720p_2\":BD(1280,720,30,120,2e3),\"720p_3\":BD(1280,720,30,120,1710),\"720p_5\":BD(960,720,15,120,910),\"720p_6\":BD(960,720,30,120,1380),\"1080p\":BD(1920,1080,15,120,2080),\"1080p_1\":BD(1920,1080,15,120,2080),\"1080p_2\":BD(1920,1080,30,120,3e3),\"1080p_3\":BD(1920,1080,30,120,3150),\"1080p_5\":BD(1920,1080,60,120,4780),\"1440p\":BD(2560,1440,30,120,4850),\"1440p_1\":BD(2560,1440,30,120,4850),\"1440p_2\":BD(2560,1440,60,120,7350),\"4k\":BD(3840,2160,30,120,8910),\"4k_1\":BD(3840,2160,30,120,8910),\"4k_3\":BD(3840,2160,60,120,13500)},HD={\"480p\":jD(640,480,5),\"480p_1\":jD(640,480,5),\"480p_2\":jD(640,480,30),\"480p_3\":jD(640,480,15),\"720p\":jD(1280,720,5),\"720p_auto\":BD(1280,720,30,900,3e3),\"720p_1\":jD(1280,720,5),\"720p_2\":jD(1280,720,30),\"720p_3\":jD(1280,720,15),\"1080p\":jD(1920,1080,5),\"1080p_1\":jD(1920,1080,5),\"1080p_2\":jD(1920,1080,30),\"1080p_3\":jD(1920,1080,15)},KD={\"1SL1TL\":GD(1,1),\"3SL3TL\":GD(3,3),\"2SL3TL\":GD(2,3)};function YD(e){return e||(e=\"480p_1\"),\"string\"==typeof e?Object.assign({},WD[e]):e}function qD(e){return\"string\"==typeof e?Object.assign({},HD[e]):e}function zD(e){return\"string\"==typeof e?Object.assign({},KD[e]):e}const JD={speech_low_quality:FD(16e3,!1),speech_standard:FD(32e3,!1,18),music_standard:FD(48e3,!1),standard_stereo:FD(48e3,!0,56),high_quality:FD(48e3,!1,128),high_quality_stereo:FD(48e3,!0,192)};function XD(e){return\"string\"==typeof e?Object.assign({},JD[e]):e}const QD=[];function ZD(e){return sv(e,\"mediaSource\",[\"screen\",\"window\",\"application\"]),!0}let $D=function(e){return e.NEED_RENEGOTIATE=\"@need_renegotiate\",e.NEED_REPLACE_TRACK=\"@need_replace_track\",e.NEED_REPLACE_MIXING_TRACK=\"@need_replace_mixing_track\",e.NEED_CLOSE=\"@need_close\",e.NEED_ENABLE_TRACK=\"@need_enable_track\",e.NEED_DISABLE_TRACK=\"@need_disable_track\",e.NEED_SESSION_ID=\"@need_sid\",e.SET_OPTIMIZATION_MODE=\"@set_optimization_mode\",e.GET_STATS=\"@get_stats\",e.GET_RTC_STATS=\"@get_rtc_stats\",e.GET_LOW_VIDEO_TRACK=\"@get_low_video_track\",e.NEED_RESET_REMOTE_SDP=\"@need_reset_remote_sdp\",e.NEED_UPDATE_VIDEO_ENCODER=\"@need_update_video_encoder\",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS=\"@need_update_video_send_parameters\",e.NEED_MUTE_TRACK=\"@need_mute_track\",e.NEED_UNMUTE_TRACK=\"@need_unmute_track\",e}({}),eP=function(e){return e.SCREEN_TRACK=\"screen_track\",e.CUSTOM_TRACK=\"custome_track\",e.LOW_STREAM=\"low_stream\",e}({});let tP=function(e){return e[e.HIGH_STREAM=0]=\"HIGH_STREAM\",e[e.LOW_STREAM=1]=\"LOW_STREAM\",e}({}),iP=function(e){return e[e.HIGH_STREAM=0]=\"HIGH_STREAM\",e[e.LOW_STREAM=1]=\"LOW_STREAM\",e}({}),nP=function(e){return e[e.DISABLE=0]=\"DISABLE\",e[e.LOW_STREAM=1]=\"LOW_STREAM\",e[e.AUDIO_ONLY=2]=\"AUDIO_ONLY\",e}({}),rP=function(e){return e.TRANSCEIVER_UPDATED=\"transceiver-updated\",e.SEI_TO_SEND=\"sei-to-send\",e.SEI_RECEIVED=\"sei-received\",e.TRACK_UPDATED=\"track-updated\",e}({}),oP=function(e){return e.SOURCE_STATE_CHANGE=\"source-state-change\",e.TRACK_ENDED=\"track-ended\",e.BEAUTY_EFFECT_OVERLOAD=\"beauty-effect-overload\",e.VIDEO_ELEMENT_VISIBLE_STATUS=\"video-element-visible-status\",e.CLOSED=\"closed\",e}({}),sP=function(e){return e.FIRST_FRAME_DECODED=\"first-frame-decoded\",e.VIDEO_ELEMENT_VISIBLE_STATUS=\"video-element-visible-status\",e.VIDEO_STATE_CHANGED=\"video-state-changed\",e}({}),aP=function(e){return e.AUDIO=\"audio\",e.VIDEO=\"video\",e.DATA=\"data\",e}({}),cP=function(e){return e.AUDIO_SOURCE_STATE_CHANGE=\"audio_source_state_change\",e.RECEIVE_TRACK_BUFFER=\"receive_track_buffer\",e.ON_AUDIO_BUFFER=\"on_audio_buffer\",e.UPDATE_SOURCE=\"update_source\",e}({});!function(e){e.UPDATE_TRACK_SOURCE=\"update-track-source\"}({});const dP={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},lP={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},uP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},hP={uplinkNetworkQuality:0,downlinkNetworkQuality:0},pP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let _P=function(e){return e.ON_TRACK=\"on_track\",e.ON_NODE=\"on_node\",e}({}),EP=function(e){return e.REQUEST_UPDATE_CONSTRAINTS=\"request_update_constraints\",e.REQUEST_CONSTRAINTS=\"request_constraints\",e}({}),mP=function(e){return e.IDLE=\"IDLE\",e.INITING=\"INITING\",e.INITEND=\"INITEND\",e}({}),fP=function(e){return e.STATE_CHANGE=\"state_change\",e.RECORDING_DEVICE_CHANGED=\"recordingDeviceChanged\",e.PLAYOUT_DEVICE_CHANGED=\"playoutDeviceChanged\",e.CAMERA_DEVICE_CHANGED=\"cameraDeviceChanged\",e}({}),TP=function(e){return e.NONE=\"none\",e.INIT=\"init\",e.CANPLAY=\"canplay\",e.PLAYING=\"playing\",e.PAUSED=\"paused\",e.SUSPEND=\"suspend\",e.STALLED=\"stalled\",e.WAITING=\"waiting\",e.ERROR=\"error\",e.DESTROYED=\"destroyed\",e.ABORT=\"abort\",e.ENDED=\"ended\",e.EMPTIED=\"emptied\",e.LOADEDDATA=\"loadeddata\",e}({}),SP=function(e){return e[e.VideoStateStopped=0]=\"VideoStateStopped\",e[e.VideoStateStarting=1]=\"VideoStateStarting\",e[e.VideoStateDecoding=2]=\"VideoStateDecoding\",e[e.VideoStateFrozen=3]=\"VideoStateFrozen\",e}({});const gP={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let RP=function(e){return e.OPEN=\"open\",e.MESSAGE=\"message\",e.CLOSE=\"close\",e.CLOSING=\"closing\",e.ERROR=\"error\",e}({});function CP(e,t,i,n,r){var o,s,a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,(\"value\"in a||a.initializer)&&(a.writable=!0),a=Jn(o=Gw(s=i.slice()).call(s)).call(o,(function(i,n){return n(e,t,i)||i}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function IP(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,\"string\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function vP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yP(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vP(Object(i),!0).forEach((function(t){IP(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vP(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class AP extends Sv{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(rP.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),IP(this,\"trackMediaType\",void 0),IP(this,\"_ID\",void 0),IP(this,\"_rtpTransceiver\",void 0),IP(this,\"_lowRtpTransceiver\",void 0),IP(this,\"_hints\",[]),IP(this,\"_isClosed\",!1),IP(this,\"_originMediaStreamTrack\",void 0),IP(this,\"mediaStreamTrack\",void 0),IP(this,\"_external\",{}),this._ID=t||ey(8,\"track-\"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(e){Dn(QD).call(QD,e)||QD.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Kv((()=>{var e;sA.reportApiInvoke(null,{name:Cv.GET_MEDIA_STREAM_TRACK,options:[],tag:Iv.TRACER}).onSuccess((null===(e=this._mediaStreamTrack)||void 0===e?void 0:e.label)||\"\")}),this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===tP.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=QD.indexOf(e);-1!==t&&QD.splice(t,1)}(this),this.emit(oP.CLOSED),this.removeAllListeners(rP.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===tP.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(rP.TRANSCEIVER_UPDATED,e,t)}}class bP extends AP{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),IP(this,\"_enabled\",!0),IP(this,\"_muted\",!1),IP(this,\"_isExternalTrack\",!1),IP(this,\"_isClosed\",!1),IP(this,\"_enabledMutex\",void 0),IP(this,\"processor\",void 0),IP(this,\"_processorContext\",void 0),IP(this,\"_handleTrackEnded\",(()=>{this.onTrackEnded()})),this._enabledMutex=new hy(\"\".concat(this.getTrackId())),e.addEventListener(\"ended\",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:\"\"}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Qy.debug(\"[\".concat(this.getTrackId(),\"] close\")),this.emit($D.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=i,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener(\"ended\",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener(\"ended\",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mv(this,$D.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Qy.debug(\"[\".concat(this.getTrackId(),\"] track ended\")),this.safeEmit(oP.TRACK_ENDED)}stateCheck(e,t){if(Qy.debug(\"check track state, [muted: \".concat(this._muted,\", enabled: \").concat(this._enabled,\"] to [\").concat(e,\": \").concat(t,\"]\")),ov(t,e),this._enabled&&this._muted&&\"enabled\"===e&&!1===t)throw new rv(nv.TRACK_STATE_UNREACHABLE,\"cannot set enabled while the track is muted\").print(\"error\",Qy);if(!this._enabled&&!this._muted&&\"muted\"===e&&!0===t)throw new rv(nv.TRACK_STATE_UNREACHABLE,\"cannot set muted while the track is disabled\").print(\"error\",Qy)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():Gh.resolve([])}}const wP=window.AudioContext||window.webkitAudioContext;let OP=null;const NP=new class extends Sv{constructor(){super(...arguments),IP(this,\"prevState\",void 0),IP(this,\"curState\",void 0),IP(this,\"currentTime\",void 0),IP(this,\"currentTimeStuckAt\",void 0),IP(this,\"interruptDetectorTrack\",void 0),IP(this,\"onLocalAudioTrackMute\",(()=>{Qy.info(\"ios15-interruption-start\"),this.emit(VD.IOS_15_16_INTERRUPTION_START)})),IP(this,\"onLocalAudioTrackUnmute\",(async()=>{Qy.info(\"ios15-interruption-end\"),\"running\"!==this.curState||this.duringInterruption?Qy.info(\"ios15-interruption-end-canceled\"):(OP&&await OP.suspend(),this.emit(VD.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return\"running\"===this.prevState&&\"interrupted\"===this.curState}bindInterruptDetectorTrack(e){Qy.debug(\"webaudio bindInterruptDetectorTrack \".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){Qy.debug(\"webaudio unbindInterruptDetectorTrack \".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function DP(){if(!OP){if(function(){if(!wP)return void Qy.error(\"your browser is not support web audio\");Qy.info(\"create audio context\");const e=yP({},Dy(\"WEBAUDIO_INIT_OPTIONS\"));Qy.debug(\"audio context init option:\",JSON.stringify(e)),OP=new wP(e),NP.curState=OP.state,OP.onstatechange=()=>{NP.prevState=NP.curState,NP.curState=OP?OP.state:void 0;const{prevState:e,curState:t}=NP,i=\"running\"===t,n=\"interrupted\"===t,r=\"running\"===e,o=\"suspended\"===e,s=\"interrupted\"===e,a=AI().osVersion;(MI()||qI())&&r&&n&&(Qy.info(\"ios\".concat(a,\"-interruption-start\")),NP.emit(VD.IOS_INTERRUPTION_START)),(MI()||qI())&&(o||s)&&i&&(Qy.info(\"ios\".concat(a,\"-interruption-end\")),NP.emit(VD.IOS_INTERRUPTION_END)),e!==t&&NP.emit(VD.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=OP)||void 0===e?void 0:e.currentTime;NP.currentTime!==t?(NP.currentTimeStuckAt&&(Qy.debug(\"AudioContext current time resume at \".concat(t)),NP.currentTimeStuckAt=void 0),NP.currentTime=t):(t!==NP.currentTimeStuckAt&&(sA.reportApiInvoke(null,{name:\"WEB_AUDIO_CURRENT_TIME_STUCK\",options:{currentTime:t},tag:Iv.TRACER}).onSuccess(),Qy.warning(\"AudioContext current time stuck at \".concat(t))),NP.currentTimeStuckAt=t)}),5e3),async function(e){const t=[\"click\",\"contextmenu\",\"auxclick\",\"dblclick\",\"mousedown\",\"mouseup\",\"touchend\",\"keydown\",\"keyup\"];let i,n=!1,r=!1,o=!1;function s(t){\"running\"===e.state?a(!1):MI()||qI()?\"suspended\"===e.state&&(a(!0),t&&e.resume().then(c,c)):\"closed\"!==e.state&&(a(!0),t&&e.resume().then(c,c))}function a(e){if(n!==e){n=e;for(let i=0,n=t;i<n.length;i+=1){const t=n[i];e?window.addEventListener(t,d,{capture:!0,passive:!0}):window.removeEventListener(t,d,{capture:!0,passive:!0})}}}function c(){s(!1)}function d(){s(!0)}function l(e){if(!o)if(i.paused)if(e){let t;u(!1),o=!0;try{t=i.play(),t?t.then(h,h):(i.addEventListener(\"playing\",h),i.addEventListener(\"abort\",h),i.addEventListener(\"error\",h))}catch(e){h()}}else u(!0);else u(!1)}function u(e){if(r!==e){r=e;for(let i=0,n=t;i<n.length;i++){const t=n[i];e?window.addEventListener(t,p,{capture:!0,passive:!0}):window.removeEventListener(t,p,{capture:!0,passive:!0})}}}function h(){i.removeEventListener(\"playing\",h),i.removeEventListener(\"abort\",h),i.removeEventListener(\"error\",h),o=!1,l(!1)}function p(){l(!0)}if(MI()){const t=e.createMediaStreamDestination(),n=document.createElement(\"div\");n.innerHTML=\"<audio x-webkit-airplay='deny'></audio>\",i=n.children.item(0),i.controls=!1,i.disableRemotePlayback=!0,i.preload=\"auto\",i.srcObject=t.stream,l(!0)}NP.on(VD.STATE_CHANGE,(function(){s(!0)})),s(!1)}(OP)}(),!OP)throw new rv(nv.NOT_SUPPORTED,\"can not create audio context\");return OP}return OP}function PP(e){if(function(){if(null!==LP)return LP;const e=DP(),t=e.createBufferSource(),i=e.createGain(),n=e.createGain();t.connect(i),t.connect(n),t.disconnect(i);let r=!1;try{t.disconnect(i)}catch(e){r=!0}return t.disconnect(),LP=r,r}())return;const t=e.connect,i=e.disconnect;e.connect=(i,n,r)=>{var o;return e._inputNodes||(e._inputNodes=[]),Dn(o=e._inputNodes).call(o,i)||(i instanceof AudioNode?(e._inputNodes.push(i),t.call(e,i,n,r)):t.call(e,i,n)),e},e.disconnect=(n,r,o)=>{i.call(e),n?Fv(e._inputNodes,n):e._inputNodes=[];for(const i of e._inputNodes)t.call(e,i)}}let LP=null;function kP(e,t){let i=!1;const n=1/t;if(Dy(\"DISABLE_WEBAUDIO\")){const t=window.setInterval((()=>{i?window.clearInterval(t):e(performance.now()/1e3)}),1e3*n)}else{const t=DP();let r=t.createGain();r.gain.value=0,r.connect(t.destination);const o=()=>{if(i)return void(r=null);const s=t.createOscillator();s.onended=o,s.connect(r),s.start(0),s.stop(t.currentTime+n),e(t.currentTime)};o()}return()=>{i=!0}}class MP{constructor(){IP(this,\"context\",void 0),IP(this,\"analyserNode\",void 0),IP(this,\"sourceNode\",void 0),this.context=DP(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||MI()||qI()||\"running\"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let i=0;i<e.length;++i)e[i]=t[i]/128-1}const t=Jn(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){Qy.warning(\"rebuild analyser node failed.\")}}destroy(){this.updateSource(void 0)}}class UP extends Sv{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var i;null===(i=this.sourceNode)||void 0===i||i.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),IP(this,\"outputNode\",void 0),IP(this,\"outputTrack\",void 0),IP(this,\"isPlayed\",!1),IP(this,\"sourceNode\",void 0),IP(this,\"context\",void 0),IP(this,\"audioBufferNode\",void 0),IP(this,\"destNode\",void 0),IP(this,\"audioOutputLevel\",0),IP(this,\"volumeLevelAnalyser\",void 0),IP(this,\"_processedNode\",void 0),IP(this,\"playNode\",void 0),IP(this,\"isDestroyed\",!1),IP(this,\"onNoAudioInput\",void 0),IP(this,\"isNoAudioInput\",!1),IP(this,\"_noAudioInputCount\",0),this.context=DP(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),PP(this.outputNode),this.volumeLevelAnalyser=new MP}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(cP.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const i=e.outputBuffer.getChannelData(t);for(let e=0;e<i.length;e+=1)i[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!MD().webAudioMediaStreamDest)throw new rv(nv.NOT_SUPPORTED,\"your browser is not support audio processor\");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){\"running\"!==this.context.state&&jv((()=>{NP.emit(\"autoplay-failed\")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;MI()||qI()?\"suspended\"===this.context.state&&this.context.resume():\"running\"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let i;t.getFloatTimeDomainData?(i=new Float32Array(t.fftSize),t.getFloatTimeDomainData(i)):(i=new Uint8Array(t.fftSize),t.getByteTimeDomainData(i));let n=!1;for(let e=0;e<i.length;e++)0!==i[e]&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await $v(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class xP extends UP{get isFreeze(){return!1}constructor(e,t,i){var n;if(super(),IP(this,\"sourceNode\",void 0),IP(this,\"track\",void 0),IP(this,\"clonedTrack\",void 0),IP(this,\"audioElement\",void 0),IP(this,\"isCurrentTrackCloned\",!1),IP(this,\"isRemoteTrack\",!1),IP(this,\"originVolumeLevelAnalyser\",void 0),IP(this,\"rebuildWebAudio\",(async()=>{if(Qy.debug(\"ready to rebuild web audio, state:\",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener(\"click\",this.rebuildWebAudio,!0),void Qy.debug(\"rebuild web audio success, current volume status\",this.getAccurateVolumeLevel());this.context.resume().then((()=>Qy.info(\"resume success\"))),Qy.debug(\"rebuild web audio because of ios 12 bugs\"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),PP(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const i=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(i,this.context.currentTime),PP(this.outputNode),this.emit(cP.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),\"audio\"!==e.kind)throw new rv(nv.UNEXPECTED_ERROR);this.track=e;const r=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(r),PP(this.sourceNode),i){const e=i.clone();e.enabled=!0,this.clonedTrack=e,Qy.debug(\"create an unmuted track \".concat(e.id,\" from the original track \").concat(i.id,\" to get the volume\"));const t=this.context.createMediaStreamSource(new MediaStream([e]));PP(t),this.originVolumeLevelAnalyser=new MP,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement(\"audio\"),this.audioElement.srcObject=r;const o=AI();t&&o.os===RI.IOS&&Number(null===(n=o.osVersion)||void 0===n?void 0:n.split(\".\")[0])<15&&(NP.on(VD.STATE_CHANGE,(()=>{\"suspended\"===this.context.state?document.body.addEventListener(\"click\",this.rebuildWebAudio,!0):\"running\"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener(\"click\",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),PP(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(cP.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),NP.off(\"state-change\",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),Qy.debug(\"create an unmuted track \".concat(t.id,\" from the original track \").concat(e.id,\" to get the volume\"));const i=this.context.createMediaStreamSource(new MediaStream([t]));PP(i),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(i)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function VP(e,t,i){const n=(e,t)=>e?\"number\"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,r={audio:!!i&&{mandatory:{chromeMediaSource:\"desktop\"}},video:{mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&\"number\"!=typeof t.frameRate?(r.video.mandatory.maxFrameRate=t.frameRate.max,r.video.mandatory.minFrameRate=t.frameRate.min):\"number\"==typeof t.frameRate&&(r.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(r)}async function FP(e,t){const i=await BP(e.mediaSource),{sourceId:n,audio:r}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Gh(((i,n)=>{const r=document.createElement(\"div\");r.innerText=\"share screen\",r.setAttribute(\"style\",\"text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;\");const o=document.createElement(\"div\");o.setAttribute(\"style\",\"width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;\");const s=document.createElement(\"div\");s.innerText=\"Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.\",s.setAttribute(\"style\",\"height: 12%;\");const a=document.createElement(\"div\");a.setAttribute(\"style\",\"width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;\");const c=document.createElement(\"div\");c.setAttribute(\"style\",\"display: flex; justify-content: space-between; padding: 16px 0;\");const d=document.createElement(\"button\");d.innerHTML=\"cancel\",d.setAttribute(\"style\",\"width: 85px;\"),d.onclick=()=>{document.body.removeChild(h);const e=new Error(\"NotAllowedError\");e.name=\"NotAllowedError\",n(e)};let l=t;const u=document.createElement(\"div\");if(t){const e=document.createElement(\"input\");e.setAttribute(\"type\",\"checkbox\");const t=document.createElement(\"span\");e.setAttribute(\"style\",\"margin-right: 6px;\"),t.innerText=\"Share audio\",e.checked=l,e.onchange=()=>{l=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(d),o.appendChild(s),o.appendChild(a),o.appendChild(c);const h=document.createElement(\"div\");h.setAttribute(\"style\",\"position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\"),h.appendChild(r),h.appendChild(o),document.body.appendChild(h),e.map((e=>{if(e.id){const t=document.createElement(\"div\");t.setAttribute(\"style\",\"width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;\");let n=e.thumbnail;try{const{width:e}=n.getSize();e>1920&&(n=n.resize({width:1920}))}catch(e){throw e&&e.message.startsWith(\"Illegal invocation\")&&console.error(\"Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)\"),e}t.innerHTML='<div style=\"height: 120px; display: table-cell; vertical-align: middle;\"><img style=\"width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);\" src='+n.toDataURL()+' /></div><span style=\"\\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">'+e.name.replace(/[\\u00A0-\\u9999<>\\&]/g,(function(e){return\"&#\"+e.charCodeAt(0)+\";\"}))+\"</span>\",t.onclick=()=>{document.body.removeChild(h),i({sourceId:e.id,audio:l})},a.appendChild(t)}}))}))}(i,t);return await VP(n,e,r)}async function BP(e){let t=[\"window\",\"screen\"];\"application\"!==e&&\"window\"!==e||(t=[\"window\"]),\"screen\"===e&&(t=[\"screen\"]);const i=Rv();if(!i)throw console.error(\"failed to fetch electron, please mount it to window\"),new rv(nv.ELECTRON_IS_NULL);let n=null;try{var r;n=(null===(r=i.desktopCapturer)||void 0===r?void 0:r.getSources({types:t}))||i.ipcRenderer.invoke(\"DESKTOP_CAPTURER_GET_SOURCES\",{types:t})}catch(e){n=null}n&&n.then||(n=new Gh(((e,n)=>{i.desktopCapturer.getSources({types:t},((t,i)=>{t?n(t):e(i)}))})));try{return await n}catch(e){throw new rv(nv.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}const jP=new hy(\"safari\");let GP=!1,WP=!1;async function HP(e,t){let i=0,n=null;for(;i<2;)try{n=await KP(e,t,i>0);break}catch(e){if(e instanceof rv)throw Qy.error(\"[\".concat(t,\"] \").concat(e.toString())),e;const n=YP(e.name||e.code||e,e.message);if(n.code===nv.MEDIA_OPTION_INVALID){Qy.debug(\"[\".concat(t,\"] detect media option invalid, retry\")),i+=1,await $v(500);continue}throw Qy.error(\"[\".concat(t,\"] \").concat(n.toString())),n}if(!n)throw new rv(nv.UNEXPECTED_ERROR,\"can not find stream after getUserMedia\");return n}async function KP(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new rv(nv.NOT_SUPPORTED,\"can not find getUserMedia\");i&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const n=MD(),r=new MediaStream;if(e.audioSource&&r.addTrack(e.audioSource),e.videoSource&&r.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return Qy.debug(\"Using Video Source/ Audio Source\"),r;if(e.screen)if(Rv())e.screen.sourceId?qP(r,await VP(e.screen.sourceId,e.screen,e.screenAudio)):qP(r,await FP(e.screen,e.screenAudio));else if(DI()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new rv(nv.NOT_SUPPORTED,\"This browser does not support screen sharing\");Qy.debug(\"[\".concat(t,'] Screen access on chrome stable, looking for extension\"'));const i=await(s=e.screen.extensionId,a=t,new Gh(((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},(i=>{if(!i||!i.streamId)return Qy.error(\"[\".concat(a,\"] No response from Chrome Plugin. Plugin not installed properly\"),i),void t(new rv(nv.CHROME_PLUGIN_NO_RESPONSE,\"No response from Chrome Plugin. Plugin not installed properly\"));e(i.streamId)}))}catch(e){Qy.error(\"[\".concat(a,\"] AgoraRTC screensharing plugin is not accessible(\").concat(s,\")\"),e.toString()),t(new rv(nv.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=i,qP(r,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){var o;e.screen.mediaSource&&ZD(e.screen.mediaSource);const i={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:\"screen\"===e.screen.mediaSource?\"monitor\":e.screen.mediaSource},{selfBrowserSurface:n,surfaceSwitching:s,systemAudio:a}=e.screen,c={selfBrowserSurface:n,surfaceSwitching:s,systemAudio:a};!n&&delete c.selfBrowserSurface,!s&&delete c.surfaceSwitching,!a&&delete c.systemAudio,Qy.debug(\"[\".concat(t,\"] getDisplayMedia:\"),JSON.stringify({video:i,audio:!!e.screenAudio,controls:c})),qP(r,await navigator.mediaDevices.getDisplayMedia(yP({video:i,audio:!!e.screenAudio},c)))}else{if(!kI())throw Qy.error(\"[\".concat(t,\"] This browser does not support screenSharing\")),new rv(nv.NOT_SUPPORTED,\"This browser does not support screen sharing\");{e.screen.mediaSource&&ZD(e.screen.mediaSource);const i={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};Qy.debug(\"[\".concat(t,\"] getUserMedia: \").concat(JSON.stringify(i))),qP(r,await navigator.mediaDevices.getUserMedia(i))}}var s,a;if(!e.video&&!e.audio)return r;let c={video:e.video,audio:e.audio},d=Dy(\"MEDIA_DEVICE_CONSTRAINTS\");if(d)try{\"string\"==typeof d&&(d=JSON.parse(d)),c=sy(c,d)}catch(e){}Qy.debug(\"[\".concat(t,\"] GetUserMedia\"),JSON.stringify(c)),AI();let l,u=null;(PI()||MI()||NI())&&(u=await jP.lock());try{l=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(GP=!0),c.video&&(WP=!0),qP(r,l),u&&u(),r}function YP(e,t){switch(e){case\"Starting video failed\":case\"OverconstrainedError\":case\"TrackStartError\":return new rv(nv.MEDIA_OPTION_INVALID,\"\".concat(e,\": \").concat(t));case\"NotFoundError\":case\"DevicesNotFoundError\":return new rv(nv.DEVICE_NOT_FOUND,\"\".concat(e,\": \").concat(t));case\"NotSupportedError\":return new rv(nv.NOT_SUPPORTED,\"\".concat(e,\": \").concat(t));case\"NotReadableError\":return new rv(nv.NOT_READABLE,\"\".concat(e,\": \").concat(t));case\"InvalidStateError\":case\"NotAllowedError\":case\"PERMISSION_DENIED\":case\"PermissionDeniedError\":return new rv(nv.PERMISSION_DENIED,\"\".concat(e,\": \").concat(t));case\"ConstraintNotSatisfiedError\":return new rv(nv.CONSTRAINT_NOT_SATISFIED,\"\".concat(e,\": \").concat(t));default:return Qy.error(\"getUserMedia unexpected error\",e),new rv(nv.UNEXPECTED_ERROR,\"\".concat(e,\": \").concat(t))}}function qP(e,t){const i=e.getVideoTracks()[0],n=e.getAudioTracks()[0],r=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),r&&(i&&e.removeTrack(i),e.addTrack(r))}const zP=new class extends Sv{get state(){return this._state}set state(e){e!==this._state&&(this.emit(fP.STATE_CHANGE,e),this._state=e)}constructor(){super(),IP(this,\"_state\",mP.IDLE),IP(this,\"isAccessMicrophonePermission\",!1),IP(this,\"isAccessCameraPermission\",!1),IP(this,\"lastAccessMicrophonePermission\",!1),IP(this,\"lastAccessCameraPermission\",!1),IP(this,\"checkdeviceMatched\",!1),IP(this,\"deviceInfoMap\",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener(\"devicechange\",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(Dy(\"ENUMERATE_DEVICES_INTERVAL\")||(ZI()||wI()===RI.HARMONY_OS)&&QI())&&this.updateDevicesInfo()}),Dy(\"ENUMERATE_DEVICES_INTERVAL_TIME\"))})).catch((e=>Qy.error(e.toString())))}async enumerateDevices(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new rv(nv.NOT_SUPPORTED,\"enumerateDevices() not supported.\").throw();const n=await navigator.mediaDevices.enumerateDevices(),r=this.checkMediaDeviceInfoIsOk(n);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;r.audio&&(o=!1),r.video&&(s=!1);let a=null,c=null,d=null;if(!i&&(o||s)){if(jP.isLocked&&(Qy.debug(\"[device manager] wait GUM lock\"),(await jP.lock())(),Qy.debug(\"[device manager] GUM unlock\")),GP&&(o=!1,this.isAccessMicrophonePermission=!0),WP&&(s=!1,this.isAccessCameraPermission=!0),Qy.debug(\"[device manager] check media device permissions\",e,t,o,s),o&&s){try{d=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=YP(e.name||e.code||e,e.message);if(t.code===nv.PERMISSION_DENIED)throw t;Qy.warning(\"getUserMedia failed in getDevices\",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=YP(e.name||e.code||e,e.message);if(t.code===nv.PERMISSION_DENIED)throw t;Qy.warning(\"getUserMedia failed in getDevices\",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=YP(e.name||e.code||e,e.message);if(t.code===nv.PERMISSION_DENIED)throw t;Qy.warning(\"getUserMedia failed in getDevices\",t)}this.isAccessCameraPermission=!0}Qy.debug(\"[device manager] mic permission\",e,\"cam permission\",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,new rv(nv.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>\"audioinput\"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>\"videoinput\"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>\"audiooutput\"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((i=>{i.device.label===e&&(t=i.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new rv(nv.DEVICE_NOT_FOUND,\"deviceId: \".concat(e));return t}async init(){this.state=mP.INITING;try{await this.updateDevicesInfo(),this.state=mP.INITEND}catch(e){throw Qy.warning(\"Device Detection functionality cannot start properly.\",e.toString()),this.state=mP.IDLE,(\"boolean\"==typeof isSecureContext?isSecureContext:\"https:\"===location.protocol||\"file:\"===location.protocol||\"localhost\"===location.hostname||\"127.0.0.1\"===location.hostname||\"::1\"===location.hostname)||new rv(nv.WEB_SECURITY_RESTRICT,\"Your context is limited by web security, please try using https protocol or localhost.\").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),i=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>\"audioinput\"===e.kind&&\"default\"===e.deviceId)),i=e.find((e=>\"audiooutput\"===e.kind&&\"default\"===e.deviceId));t&&i?i.groupId===t.groupId?Qy.debug(\"[device-check] default input \".concat(t.label,\" and output \").concat(i.label,\" is the same group\")):Qy.warning(\"[device-check] default input \".concat(t.label,\" and output \").concat(i.label,\" is not the same group\")):Qy.debug(\"[device-check] default input or output not found\")}const n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const n=this.deviceInfoMap.get(\"\".concat(e.kind,\"_\").concat(e.deviceId));if(\"ACTIVE\"!==(n?n.state:\"INACTIVE\")){const n={initAt:t,updateAt:t,device:e,state:\"ACTIVE\"};this.deviceInfoMap.set(\"\".concat(e.kind,\"_\").concat(e.deviceId),n),i.push(n)}n&&(n.updateAt=t)})),this.deviceInfoMap.forEach(((e,n)=>{\"ACTIVE\"===e.state&&e.updateAt!==t&&(e.state=\"INACTIVE\",i.push(e))})),this.state!==mP.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach((e=>{switch(e.device.kind){case\"audioinput\":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(fP.RECORDING_DEVICE_CHANGED,e);break;case\"videoinput\":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(fP.CAMERA_DEVICE_CHANGED,e);break;case\"audiooutput\":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(fP.PLAYOUT_DEVICE_CHANGED,e)}})),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>\"audioinput\"===e.kind)),i=e.filter((e=>\"videoinput\"===e.kind)),n={audio:!1,video:!1};for(const e of t)if(e.label&&e.deviceId){n.audio=!0;break}for(const e of i)if(e.label&&e.deviceId){n.video=!0;break}return n}};let JP=!1;const XP=new class extends Sv{constructor(){super(...arguments),IP(this,\"onAutoplayFailed\",void 0),IP(this,\"onAudioAutoplayFailed\",void 0)}};function QP(){if(AI(),!JP){const e=t=>{t.preventDefault(),JP=!1,$I()?document.body.removeEventListener(\"click\",e,!0):(document.body.removeEventListener(\"touchstart\",e,!0),document.body.removeEventListener(\"mousedown\",e,!0))};JP=!0,$I()?document.body.addEventListener(\"click\",e,!0):(document.body.addEventListener(\"touchstart\",e,!0),document.body.addEventListener(\"mousedown\",e,!0)),Qy.info(\"detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web\"),XP.onAutoplayFailed?XP.onAutoplayFailed():XP.onAudioAutoplayFailed?Qy.warning(\"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\\n\\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\"):Qy.warning(\"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\\n\\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\\n\\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\"),XP.emit(\"autoplay-failed\")}}function ZP(e,t,i,n){if(!e)return;const r=sA.getBaseInfoBySessionId(e);if(!r)return;const o=r.info,s=Date.now(),a=yP(yP({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-r.startTime,cbRegistered:XP.onAutoplayFailed||XP.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:t,trackId:n,extend:void 0});sA.send({type:iA.AUTOPLAY_FAILED,data:a},!0)}const $P=[\"play\",\"playing\",\"loadeddata\",\"canplay\",\"pause\",\"stalled\",\"suspend\",\"waiting\",\"abort\",\"emptied\",\"ended\",\"error\"],eL=new class{constructor(){IP(this,\"onAutoplayFailed\",void 0),IP(this,\"elementMap\",new Map),IP(this,\"elementStateMap\",new Map),IP(this,\"elementsNeedToResume\",[]),IP(this,\"sinkIdMap\",new Map),IP(this,\"autoResumeAfterInterruption\",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[i,n]=t;const r=this.elementStateMap.get(i),o=n.srcObject.getAudioTracks()[0],s=o&&o.readyState;if(Qy.debug(\"resume after interrupted, ele: \".concat(r,\" audio: \").concat(s,\" \").concat(e)),\"live\"===s){if(e)return n.pause(),void n.play();if(\"running\"===NP.curState)return HI()?(n.pause(),void n.play()):void(r&&\"paused\"===r&&n.play())}}))})),IP(this,\"autoResumeAfterInterruptionOnIOS15_16\",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,i]=e;const n=i.srcObject.getAudioTracks()[0];n&&\"live\"===n.readyState&&(Qy.debug(\"auto resume after interruption inside autoResumeAfterInterruptionOnIOS15\"),i.pause(),i.play())}))})),this.autoResumeAudioElement(),NP.on(VD.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),NP.on(VD.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),NP.on(VD.STATE_CHANGE,(()=>{MI()&&\"suspended\"===NP.prevState&&\"running\"===NP.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const i=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),i)try{await i.setSinkId(t)}catch(e){throw new rv(nv.PERMISSION_DENIED,\"can not set sink id: \"+e.toString())}}play(e,t,i,n){if(this.elementMap.has(t))return;const r=document.createElement(\"audio\");r.autoplay=!0,r.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,r),this.elementMap.set(t,r),this.elementStateMap.set(t,TP.INIT),this.setVolume(t,i);const o=this.sinkIdMap.get(t);if(o)try{r.setSinkId(o).catch((e=>{Qy.warning(\"[\".concat(t,\"] set sink id failed\"),e.toString())}))}catch(e){Qy.warning(\"[\".concat(t,\"] set sink id failed\"),e.toString())}const s=r.play();s&&s.then&&s.catch((e=>{n&&ZP(n,\"audio\",e.message,t),Qy.warning(\"audio element play warning\",e.toString()),this.elementMap.has(t)&&\"NotAllowedError\"===e.name&&(Qy.warning(\"detected audio element autoplay failed\"),this.elementsNeedToResume.push(r),jv((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),QP()})))}))}updateTrack(e,t){const i=this.elementMap.get(e);i&&(i.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&\"playing\"===this.elementStateMap.get(e)}setVolume(e,t){const i=this.elementMap.get(e);i&&(t=Math.max(0,Math.min(100,t)),i.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const i=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(i,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){$P.forEach((i=>{t.addEventListener(i,(i=>{const n=this.elementStateMap.get(e),r=\"pause\"===i.type?\"paused\":i.type;if(Qy.debug(\"[\".concat(e,\"] audio-element-status change \").concat(n,\" => \").concat(r)),\"error\"===i.type){const i=null==t?void 0:t.error;i&&Qy.error(\"[\".concat(e,\"] media error, code: \").concat(i.code,\", message: \").concat(i.message))}this.elementStateMap.set(e,r)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||\"uninit\"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{Qy.debug(\"Auto resume audio element success\")})).catch((e=>{Qy.warning(\"Auto resume audio element failed!\",e)}))})),this.elementsNeedToResume=[]};new Gh((e=>{document.body?e():window.addEventListener(\"load\",(()=>e()))})).then((()=>{$I()?document.body.addEventListener(\"click\",e,!0):(document.body.addEventListener(\"touchstart\",e,!0),document.body.addEventListener(\"mousedown\",e,!0))}))}};function tL(){return function(e,t,i){const n=i.value;return\"function\"==typeof n&&(i.value=function(){this._isClosed&&new rv(nv.INVALID_OPERATION,\"[\".concat(this.getTrackId(),\"] cannot operate a closed track\")).print(\"warning\",Qy);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const r=n.apply(this,t);return r instanceof Gh?new Gh(((e,t)=>{r.then(e).catch(t)})):r}),i}}class iL extends Sv{constructor(e){super(),IP(this,\"name\",\"VideoProcessorDestination\"),IP(this,\"ID\",\"0\"),IP(this,\"_source\",void 0),IP(this,\"videoContext\",void 0),IP(this,\"inputTrack\",void 0),this.videoContext=e}get kind(){return\"video\"}get enabled(){return!0}pipe(){throw new rv(nv.NOT_SUPPORTED,\"VideoProcessor cannot pipe to any other Processor\")}unpipe(){throw new rv(nv.NOT_SUPPORTED,\"VideoProcessor cannot unpipe to any other Processor\")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(\"ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\\nProbably you are making pipeline like this:\\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).\");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(_P.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(_P.ON_TRACK,void 0)}}class nL extends Sv{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),IP(this,\"constraintsMap\",new Map),IP(this,\"statsRegistry\",[]),IP(this,\"usageRegistry\",[]),IP(this,\"trackId\",void 0),IP(this,\"direction\",void 0),IP(this,\"_chained\",!1),this.trackId=e,this.direction=t}async getConstraints(){return await kv(this,EP.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var i;return Qy.info(\"processor \".concat(t.name,\" requestApplyConstraints for \").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Mv(this,EP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qw(i=this.constraintsMap).call(i)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return Qy.info(\"processor \".concat(e.name,\" requestRevertConstraints for \").concat(this.trackId)),this.constraintsMap.delete(e),Mv(this,EP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qw(t=this.constraintsMap).call(t)))}registerStats(e,t,i){this.statsRegistry.find((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:i})}unregisterStats(e,t){const i=this.statsRegistry.findIndex((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t));-1!==i&&this.statsRegistry.splice(i,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:i,type:n,cb:r}of this.statsRegistry)try{const o=r();e.push({processorID:t,processorName:i,type:n,stats:o})}catch(e){Qy.error(new rv(nv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let i=t();i instanceof Gh&&(i=await i),e.push(yP(yP({},i),{},{direction:this.direction}))}catch(e){Qy.error(\"gather extension usage error\",e)}return e}getDirection(){return this.direction}}class rL extends Sv{constructor(e){super(),IP(this,\"name\",\"AudioProcessorDestination\"),IP(this,\"ID\",\"0\"),IP(this,\"inputTrack\",void 0),IP(this,\"inputNode\",void 0),IP(this,\"audioProcessorContext\",void 0),IP(this,\"_source\",void 0),this.audioProcessorContext=e}get kind(){return\"audio\"}get enabled(){return!0}pipe(){throw new rv(nv.NOT_SUPPORTED,\"AudioProcessorDestination cannot pipe to any other Processor\")}unpipe(){throw new rv(nv.NOT_SUPPORTED,\"AudioProcessor cannot unpipe to any other Processor\")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(_P.ON_TRACK,void 0),this.emit(_P.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(\"ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).\");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(_P.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(_P.ON_NODE,this.inputNode))}}class oL extends Sv{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,i){super(),IP(this,\"constraintsMap\",new Map),IP(this,\"statsRegistry\",[]),IP(this,\"audioContext\",void 0),IP(this,\"trackId\",void 0),IP(this,\"direction\",void 0),IP(this,\"usageRegistry\",[]),IP(this,\"_chained\",!1),this.audioContext=e,this.trackId=t,this.direction=i}async getConstraints(){return kv(this,EP.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var i;return Qy.info(\"processor \".concat(t.name,\" requestApplyConstraints for \").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Mv(this,EP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qw(i=this.constraintsMap).call(i)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Mv(this,EP.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qw(t=this.constraintsMap).call(t)))}registerStats(e,t,i){this.statsRegistry.find((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:i})}unregisterStats(e,t){const i=this.statsRegistry.findIndex((i=>i.processorID===e.ID&&i.processorName===e.name&&i.type===t));-1!==i&&this.statsRegistry.splice(i,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:i,type:n,cb:r}of this.statsRegistry)try{const o=r();e.push({processorID:t,processorName:i,type:n,stats:o})}catch(e){Qy.error(new rv(nv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let i=t();i instanceof Gh&&(i=await i),e.push(yP(yP({},i),{},{direction:this.direction}))}catch(e){Qy.error(\"gather extension usage error\",e)}return e}getDirection(){return this.direction}}class sL extends Sv{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),IP(this,\"context\",void 0),IP(this,\"processSourceNode\",void 0),IP(this,\"outputTrack\",void 0),IP(this,\"processedNode\",void 0),IP(this,\"clonedTrack\",void 0),IP(this,\"outputNode\",void 0),this.outputNode=new aL}setVolume(){}createOutputTrack(){throw new rv(nv.NOT_SUPPORTED,\"can not create output MediaStreamTrack when WebAudio disabled\")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class aL{disconnect(){}connect(){}}function cL(e){return new Gh(((t,i)=>{let n=!1;const r=document.createElement(\"video\");r.setAttribute(\"autoplay\",\"\"),r.setAttribute(\"muted\",\"\"),r.muted=!0,r.autoplay=!0,r.setAttribute(\"playsinline\",\"\"),r.setAttribute(\"style\",\"position: fixed; top: 0; left: 0; width: 1px; height: 1px\"),document.body.appendChild(r);const o=MI()?\"canplay\":\"playing\";r.addEventListener(o,(()=>{const e=r.videoWidth,i=r.videoHeight;!e&&kI()||(n=!0,r.srcObject=null,r.remove(),t([e,i]))})),r.srcObject=new MediaStream([e]),r.play().catch(iy),setTimeout((()=>{n||(r.srcObject=null,r.remove(),t([r.videoWidth,r.videoHeight]))}),4e3)}))}function dL(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const i=YD(e.encoderConfig);return null!=i.width&&(t.width=i.width),null!=i.height&&(t.height=i.height),!JI()&&i.frameRate&&(t.frameRate=i.frameRate),LI()&&\"object\"==typeof t.frameRate&&(t.frameRate.max=60),kI()&&(t.frameRate={ideal:30,max:30}),t}function lL(e){const t={};if(JI()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,DI()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const i=XD(e.encoderConfig);t.channelCount=i.stereo?2:1,t.sampleRate=i.sampleRate,t.sampleSize=i.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),ZI()&&(t.sampleRate=void 0),t}const uL=e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:i,width:n,height:r}=e.getMediaStreamTrackSettings();let{frameRate:o=i,width:s=n,height:a=r}=t;if(!o||!s||!a)return;s=cy(s),a=cy(a),o=cy(o);const{max:c,min:d}=function(e,t,i){const n=200*Math.pow(i/15,.6)*Math.pow(e*t/640/360,.75);return{min:Math.floor(n),max:Math.floor(4*n)}}(s,a,o),{bitrateMax:l,bitrateMin:u}=t||{};l||Qy.debug(\"calculate bitrate: [w: \".concat(s,\", h: \").concat(a,\", fps: \").concat(o,\"] => [brMax: \").concat(l,\", brMin: \").concat(u,\"]\"));const{maxFramerate:h}=Dy(\"ENCODER_CONFIG_LIMIT\");return h&&\"number\"==typeof h&&(o=Math.min(o,h)),{frameRate:o,bitrateMax:l||c,bitrateMin:u||d,scaleResolutionDownBy:1,scale:0}},hL=async(e,t,i)=>await(async(e,t,i)=>{const n=function(e){const t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(e.slice(i,i+2),16));return Uint8Array.from(t)}(dy(\"\"+t+i)).slice(0,16),r=n.slice(0,12),o=await window.crypto.subtle.importKey(\"raw\",n,\"AES-GCM\",!0,[\"encrypt\"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:r},o,e))})(e.buffer,t,i),pL=e=>{const t=document.createElement(\"canvas\");return t.width=2,t.height=2,new Gh(((i,n)=>{t.toBlob((async e=>{if(t.remove(),e){const n=await _L(e);i({buffer:n,width:t.width,height:t.height})}else n(new rv(nv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},_L=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var EL,mL,fL,TL,SL,gL,RL,CL,IL,vL,yL,AL,bL,wL,OL,NL,DL,PL,LL,kL,ML,UL,xL,VL,FL,BL,jL,GL,WL,HL,KL,YL,qL,zL,JL,XL,QL,ZL,$L,ek;let tk=(EL=oA({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),mL=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),fL=tL(),TL=py(\"LocalAudioTrack\",\"_enabledMutex\"),SL=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),gL=tL(),RL=py(\"LocalAudioTrack\",\"_enabledMutex\"),CL=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),IL=tL(),vL=tL(),yL=tL(),AL=oA({argsMap:e=>[e.getTrackId()]}),bL=tL(),wL=oA({argsMap:e=>[e.getTrackId()]}),OL=tL(),NL=oA({argsMap:e=>[e.getTrackId()]}),DL=oA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),PL=oA({argsMap:e=>[e.getTrackId()]}),CP((LL=class extends bP{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?eL.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return\"LocalAudioTrack\"}constructor(e,t,i,n){super(e,i),IP(this,\"trackMediaType\",aP.AUDIO),IP(this,\"_encoderConfig\",void 0),IP(this,\"_trackSource\",void 0),IP(this,\"_enabled\",!0),IP(this,\"_volume\",100),IP(this,\"_useAudioElement\",!0),IP(this,\"_bypassWebAudio\",!1),IP(this,\"processor\",void 0),IP(this,\"_processorContext\",void 0),IP(this,\"_processorDestination\",void 0),IP(this,\"_getOriginVolumeLevel\",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,this._trackSource=new sL,Dy(\"DISABLE_WEBAUDIO\")&&(this._bypassWebAudio=!0),Dy(\"LOCAL_AUDIO_TRACK_USES_WEB_AUDIO\")&&(this._useAudioElement=!1),PI()&&!OP?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){av(e,\"volume\",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&eL.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Qy.debug(\"[\".concat(this.getTrackId(),\"] setVolume returned because no pass through WebAudio.\"));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Mv(this,$D.NEED_REPLACE_TRACK,this).then((()=>{Qy.debug(\"[\".concat(this.getTrackId(),\"] replace web audio track success\"))})).catch((e=>{Qy.warning(\"[\".concat(this.getTrackId(),\"] replace web audio track failed\"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!UD())throw new rv(nv.NOT_SUPPORTED,\"your browser does not support setting the audio output device\");await eL.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,i){return this._setEnabled(e,t,i)}async _setEnabled(e,t,i){if(!i){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Qy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),e){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Mv(this,$D.NEED_ENABLE_TRACK,this),Qy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to \").concat(e,\" success\"))}catch(e){throw i||(this._enabled=!1),Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to true error\"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Mv(this,$D.NEED_DISABLE_TRACK,this)}catch(e){throw i||(this._enabled=!0),Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to false error\"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck(\"muted\",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,Qy.debug(\"[\".concat(this.getTrackId(),\"] start set muted: \").concat(e)),e?await Mv(this,$D.NEED_MUTE_TRACK,this):await Mv(this,$D.NEED_UNMUTE_TRACK,this))}getStats(){Kv((()=>{Qy.warning(\"[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead\")}),\"localAudioTrackGetStatsWarning\");return Uv(this,$D.GET_STATS)||yP({},dP)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(cP.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(cP.ON_AUDIO_BUFFER),this._source.on(cP.ON_AUDIO_BUFFER,(t=>e(t)))}play(){Qy.debug(\"[\".concat(this.getTrackId(),\"] start audio playback\")),this._useAudioElement?(Qy.debug(\"[\".concat(this.getTrackId(),\"] start audio playback in element\")),eL.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){Qy.debug(\"[\".concat(this.getTrackId(),\"] stop audio playback\")),this._useAudioElement?eL.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Qy.debug(\"[\".concat(this.getTrackId(),\"] update player source track\")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&eL.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener(\"ended\",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener(\"ended\",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mv(this,$D.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return Gh.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new rv(nv.INVALID_OPERATION,\"Can not process AudioTrack when bypassWebAudio set to true.\");if(this.processor===e)return e;if(e._source)throw new rv(nv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(_P.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await Mv(this,$D.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mv(this,$D.NEED_REPLACE_TRACK,this))})),e.on(_P.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(_P.ON_TRACK),e.removeAllListeners(_P.ON_NODE)}bindProcessorContextEvents(e){e.on(EP.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(EP.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof sL&&(this._trackSource=new xP(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new oL(this._source.context,this.getTrackId(),\"local\"),t=new rL(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(cP.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(eL.stop(this.getTrackId()),this._source.play()),Mv(this,$D.NEED_REPLACE_MIXING_TRACK,this).then((()=>{Qy.debug(\"[\".concat(this.getTrackId(),\"] replace from origin track to web audio track success\"))})).catch((e=>{Qy.warning(\"[\".concat(this.getTrackId(),\"] replace from origin track to web audio track failed\"),e)}))),{processorContext:e,processorDestination:t}}}).prototype,\"setVolume\",[EL],Object.getOwnPropertyDescriptor(LL.prototype,\"setVolume\"),LL.prototype),CP(LL.prototype,\"setPlaybackDevice\",[mL,fL],Object.getOwnPropertyDescriptor(LL.prototype,\"setPlaybackDevice\"),LL.prototype),CP(LL.prototype,\"setEnabled\",[TL,SL,gL],Object.getOwnPropertyDescriptor(LL.prototype,\"setEnabled\"),LL.prototype),CP(LL.prototype,\"setMuted\",[RL,CL,IL],Object.getOwnPropertyDescriptor(LL.prototype,\"setMuted\"),LL.prototype),CP(LL.prototype,\"getStats\",[vL],Object.getOwnPropertyDescriptor(LL.prototype,\"getStats\"),LL.prototype),CP(LL.prototype,\"setAudioFrameCallback\",[yL],Object.getOwnPropertyDescriptor(LL.prototype,\"setAudioFrameCallback\"),LL.prototype),CP(LL.prototype,\"play\",[AL,bL],Object.getOwnPropertyDescriptor(LL.prototype,\"play\"),LL.prototype),CP(LL.prototype,\"stop\",[wL,OL],Object.getOwnPropertyDescriptor(LL.prototype,\"stop\"),LL.prototype),CP(LL.prototype,\"close\",[NL],Object.getOwnPropertyDescriptor(LL.prototype,\"close\"),LL.prototype),CP(LL.prototype,\"pipe\",[DL],Object.getOwnPropertyDescriptor(LL.prototype,\"pipe\"),LL.prototype),CP(LL.prototype,\"unpipe\",[PL],Object.getOwnPropertyDescriptor(LL.prototype,\"unpipe\"),LL.prototype),LL),ik=(kL=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),ML=tL(),UL=py(\"MicrophoneAudioTrack\",\"_enabledMutex\"),xL=oA({argsMap:(e,t,i)=>[e.getTrackId(),t,i]}),VL=tL(),FL=oA({argsMap:e=>[e.getTrackId()]}),CP((BL=class extends tk{get __className__(){return\"MicrophoneAudioTrack\"}constructor(e,t,i,n){super(e,t.encoderConfig?XD(t.encoderConfig):{},n,Dy(\"GET_VOLUME_OF_MUTED_AUDIO_TRACK\")),IP(this,\"_config\",void 0),IP(this,\"_deviceName\",\"default\"),IP(this,\"_constraints\",void 0),IP(this,\"_originalConstraints\",void 0),IP(this,\"_enabled\",!0),this._config=t,this._constraints=i,this._originalConstraints=i,this._deviceName=e.label,\"boolean\"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(HI()||KI())&&NP.bindInterruptDetectorTrack(this)}async setDevice(e){if(Qy.info(\"[\".concat(this.getTrackId(),\"] start set device to \").concat(e)),this._enabled)try{const t=await zP.getDeviceById(e),i={};i.audio=yP({},this._constraints),i.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await HP(i,this.getTrackId())}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDevice failed\"),e.toString()),n=await HP({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}else try{const t=await zP.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}Qy.info(\"[\".concat(this.getTrackId(),\"] set device to \").concat(e,\" success\"))}async setEnabled(e,t,i){if(t)return Qy.debug(\"[\".concat(this.getTrackId(),\"] setEnabled false (do not close microphone)\")),await super._setEnabled(e);if(!i){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Qy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),Dy(\"AUTO_RESET_AUDIO_ROUTE\")&&(MI()||qI())){const t=navigator.audioSession;t&&(e||(t.type=\"playback\"),t.type=\"auto\")}if(!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(n=this._source.clonedTrack)||void 0===n||n.stop(),i||(this._enabled=!1);try{await Mv(this,$D.NEED_DISABLE_TRACK,this)}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled false failed\"),e.toString()),e}return}const r=yP({},this._constraints),o=zP.searchDeviceIdByName(this._deviceName);o&&!r.deviceId&&(r.deviceId=o);try{i||(this._enabled=!0);const e=await HP({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Mv(this,$D.NEED_ENABLE_TRACK,this)}catch(e){throw i||(this._enabled=!1),Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled true failed\"),e.toString()),e}Qy.info(\"[\".concat(this.getTrackId(),\"] setEnabled success\"))}close(){super.close(),(HI()||KI())&&NP.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((MI()||qI())&&this._enabled&&!this._isClosed&&NP.duringInterruption){const e=async()=>{NP.off(VD.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Qy.debug(\"[\".concat(this.getTrackId(),\"] try capture microphone media device for interrupted iOS device.\")),await this.setEnabled(!1),await this.setEnabled(!0))};NP.on(VD.IOS_INTERRUPTION_END,e)}else Qy.debug(\"[\".concat(this.getTrackId(),\"] track ended\")),this.safeEmit(oP.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,i=zP.searchDeviceIdByName(this._deviceName);if(i&&!t.deviceId&&(t.deviceId=i),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await HP({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(EP.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,i)=>{try{const i=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(i),t()}catch(e){i(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(EP.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,\"setDevice\",[kL,ML],Object.getOwnPropertyDescriptor(BL.prototype,\"setDevice\"),BL.prototype),CP(BL.prototype,\"setEnabled\",[UL,xL,VL],Object.getOwnPropertyDescriptor(BL.prototype,\"setEnabled\"),BL.prototype),CP(BL.prototype,\"close\",[FL],Object.getOwnPropertyDescriptor(BL.prototype,\"close\"),BL.prototype),BL),nk=(jL=oA({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),GL=tL(),WL=oA({argsMap:e=>[e.getTrackId()]}),HL=tL(),KL=oA({argsMap:e=>[e.getTrackId()]}),YL=tL(),qL=oA({argsMap:e=>[e.getTrackId()]}),zL=tL(),JL=oA({argsMap:e=>[e.getTrackId()]}),XL=tL(),QL=oA({argsMap:e=>[e.getTrackId()]}),ZL=oA({argsMap:e=>[e.getTrackId()]}),$L=tL(),CP((ek=class extends tk{get __className__(){return\"BufferSourceAudioTrack\"}constructor(e,t,i,n){super(t.createOutputTrack(),i,n),IP(this,\"source\",void 0),IP(this,\"_bufferSource\",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(cP.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(oP.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){av(e,\"speed\",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,\"startProcessAudioBuffer\",[jL,GL],Object.getOwnPropertyDescriptor(ek.prototype,\"startProcessAudioBuffer\"),ek.prototype),CP(ek.prototype,\"pauseProcessAudioBuffer\",[WL,HL],Object.getOwnPropertyDescriptor(ek.prototype,\"pauseProcessAudioBuffer\"),ek.prototype),CP(ek.prototype,\"seekAudioBuffer\",[KL,YL],Object.getOwnPropertyDescriptor(ek.prototype,\"seekAudioBuffer\"),ek.prototype),CP(ek.prototype,\"resumeProcessAudioBuffer\",[qL,zL],Object.getOwnPropertyDescriptor(ek.prototype,\"resumeProcessAudioBuffer\"),ek.prototype),CP(ek.prototype,\"stopProcessAudioBuffer\",[JL,XL],Object.getOwnPropertyDescriptor(ek.prototype,\"stopProcessAudioBuffer\"),ek.prototype),CP(ek.prototype,\"close\",[QL],Object.getOwnPropertyDescriptor(ek.prototype,\"close\"),ek.prototype),CP(ek.prototype,\"setAudioBufferPlaybackSpeed\",[ZL,$L],Object.getOwnPropertyDescriptor(ek.prototype,\"setAudioBufferPlaybackSpeed\"),ek.prototype),ek);class rk extends tk{get __className__(){return\"MixingAudioTrack\"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=DP().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,ey(8,\"track-mix-\")),IP(this,\"trackList\",void 0),IP(this,\"destNode\",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(Qy.debug(\"add \".concat(e.getTrackId(),\" to mixing track\")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Qy.debug(\"track \".concat(e.getTrackId(),\" is already added\"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){Qy.debug(\"remove \".concat(e.getTrackId(),\" from mixing track\"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Fv(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof rk?t.emit(rP.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}class ok extends UP{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(cP.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),IP(this,\"audioBuffer\",void 0),IP(this,\"sourceNode\",void 0),IP(this,\"startPlayTime\",0),IP(this,\"startPlayOffset\",0),IP(this,\"pausePlayTime\",0),IP(this,\"options\",void 0),IP(this,\"currentLoopCount\",0),IP(this,\"currentPlaybackSpeed\",100),IP(this,\"_currentState\",\"stopped\"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?\"stopped\"===this.currentState?0:\"paused\"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){\"stopped\"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Qy.warning(\"can not set audio source options\")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState=\"playing\"}pauseProcessAudioBuffer(){this.sourceNode&&\"playing\"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState=\"paused\")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,\"playing\"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),\"playing\"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):\"paused\"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){\"paused\"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState=\"playing\")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&(\"playing\"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState=\"stopped\",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const sk=new Map;class ak{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(Qy.debug(\"[\".concat(this.trackId,\"] video-element-status change \").concat(this._videoElementStatus,\" => \").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){IP(this,\"trackId\",void 0),IP(this,\"config\",void 0),IP(this,\"onFirstVideoFrameDecoded\",void 0),IP(this,\"onVideoStateChanged\",void 0),IP(this,\"freezeTimeCounterList\",[]),IP(this,\"renderFreezeAccTime\",0),IP(this,\"isKeepLastFrame\",!1),IP(this,\"timeUpdatedCount\",0),IP(this,\"freezeTime\",0),IP(this,\"playbackTime\",0),IP(this,\"lastTimeUpdatedTime\",0),IP(this,\"autoplayFailed\",!1),IP(this,\"videoTrack\",void 0),IP(this,\"videoElement\",void 0),IP(this,\"cacheVideoElement\",void 0),IP(this,\"renderStats\",void 0),IP(this,\"_videoState\",SP.VideoStateStopped),IP(this,\"videoElementCheckInterval\",void 0),IP(this,\"videoElementFreezeTimeout\",void 0),IP(this,\"_videoElementStatus\",TP.NONE),IP(this,\"isGettingVideoDimensions\",!1),IP(this,\"startGetVideoDimensions\",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return Qy.debug(\"[\".concat(this.trackId,\"] current video dimensions:\"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),IP(this,\"autoResumeAfterInterruption\",(()=>{this.videoTrack&&\"live\"===this.videoTrack.readyState&&\"running\"===NP.curState&&(Qy.debug(\"[track-\".concat(this.trackId,\"] video element paused, auto resume for \").concat(OI())),YI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),IP(this,\"handleVideoEvents\",(e=>{switch(e.type){case\"play\":case\"playing\":this.startGetVideoDimensions(),this.videoElementStatus=TP.PLAYING;break;case\"loadeddata\":if(this.videoState=SP.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case\"canplay\":this.videoElementStatus=TP.CANPLAY;break;case\"stalled\":this.videoElementStatus=TP.STALLED;break;case\"suspend\":this.videoElementStatus=TP.SUSPEND;break;case\"pause\":this.videoElementStatus=TP.PAUSED,MI()||qI()||PI()&&this.autoplayFailed||!this.videoTrack||\"live\"!==this.videoTrack.readyState||(Qy.debug(\"[track-\".concat(this.trackId,\"] video element paused, auto resume\")),this.videoElement.play());break;case\"waiting\":this.videoElementStatus=TP.WAITING;break;case\"abort\":this.videoElementStatus=TP.ABORT;break;case\"ended\":this.videoElementStatus=TP.ENDED;break;case\"emptied\":this.videoElementStatus=TP.EMPTIED;break;case\"error\":{const e=this.videoElement.error;e?(this.videoElementStatus=TP.ERROR,Qy.error(\"[\".concat(this.trackId,\"] media error: \").concat(e.message,\" (\").concat(e.code,\")\"))):Qy.debug(\"[\".concat(this.trackId,\"] media not been an error.\"));break}case\"timeupdate\":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,cM.lastVisibleTime<cM.lastHiddenTime||i<cM.lastHiddenTime||i<cM.lastVisibleTime)return;for(t>Dy(\"VIDEO_FREEZE_DURATION\")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),IP(this,\"autoResumeAfterInterruptionOnIOS15_16\",(()=>{this.videoTrack&&\"live\"===this.videoTrack.readyState&&(Qy.debug(\"[track-\".concat(this.trackId,\"] video element paused, auto resume for \").concat(OI())),YI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement(\"video\"),NP.on(VD.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),NP.on(VD.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&ZP(e,\"video\",t.message,this.trackId),\"NotAllowedError\"===t.name?(Qy.warning(\"detected video element autoplay failed\",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):Qy.warning(\"[\".concat(this.trackId,\"] play warning: \"),t)}));const i=AI();if((\"Safari\"===i.name&&15===Number(i.version)||HI())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform=\"rotateY(180deg)\")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement(\"canvas\");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext(\"2d\");if(!t)return Qy.error(\"create canvas context failed!\"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const i=t.getImageData(0,0,e.width,e.height);return e.remove(),i}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.createElement(\"canvas\");i.width=this.videoElement.videoWidth,i.height=this.videoElement.videoHeight;const n=i.getContext(\"2d\");return n?(n.drawImage(this.videoElement,0,0,i.width,i.height),new Gh(((n,r)=>{i.toBlob((async e=>{if(i.remove(),e){const t=await _L(e);n({buffer:t,width:i.width,height:i.height})}else r(new rv(nv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await pL(e)}destroy(){this.renderStats=void 0,NP.off(VD.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),NP.off(VD.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=SP.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=TP.INIT,!this.videoElementCheckInterval&&(ck.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=TP.DESTROYED)}),1e3),Dy(\"ENABLE_VIDEO_FRAME_CALLBACK\"))){var e,t;let i;const n=()=>{\"visible\"===document.visibilityState&&(document.removeEventListener(\"visibilitychange\",n),this.videoElementFreezeTimeout=window.setTimeout(r,Dy(\"VIDEO_FREEZE_DURATION\")))},r=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===SP.VideoStateDecoding&&(\"visible\"===document.visibilityState?this.videoState=SP.VideoStateFrozen:document.addEventListener(\"visibilitychange\",n))},o=(e,t)=>{if(this.videoElementStatus===TP.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=t.mediaTime):this.renderStats={lastTs:t.mediaTime,curTs:t.mediaTime,lastRenderNum:0,renderNum:0},i){const e=t.presentationTime-i.presentationTime;this.videoState===SP.VideoStateStarting&&(this.videoState=SP.VideoStateDecoding),this.videoState===SP.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(r,Dy(\"VIDEO_FREEZE_DURATION\"))),e<Dy(\"VIDEO_FREEZE_DURATION\")&&this.videoState===SP.VideoStateFrozen&&(this.videoState=SP.VideoStateDecoding),e>Dy(\"VIDEO_FREEZE_DURATION\")&&cM.lastVisibleTime>=cM.lastHiddenTime&&i.timestamp>cM.lastVisibleTime&&i.timestamp>cM.lastHiddenTime&&(this.renderFreezeAccTime+=e)}i=yP(yP({},t),{},{timestamp:e})}var n,s;Dy(\"ENABLE_VIDEO_FRAME_CALLBACK\")&&(null===(n=(s=this.videoElement).requestVideoFrameCallback)||void 0===n||n.call(s,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute(\"playsinline\",\"\"),ZI()&&!Dy(\"HIDE_NO_POSTER\")&&(this.videoElement.poster=\"noposter\");const i=AI();\"Safari\"===i.name&&15===Number(i.version)||HI()||!this.config.mirror||(this.videoElement.style.transform=\"rotateY(180deg)\"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit=\"cover\",this.videoElement.setAttribute(\"muted\",\"\"),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,kI()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,kI()&&this.videoElement.load());const n=this.videoElement.play();void 0!==n&&n.catch((e=>{Qy.debug(\"[\".concat(this.trackId,\"] playback interrupted\"),e.toString())}))}resetVideoElement(){ck.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=TP.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{Qy.debug(\"[\".concat(this.trackId,\"] Video element for trackId:\").concat(this.trackId,\" autoplay resumed.\"))})).catch((e=>{Qy.error(e)})),this.autoplayFailed=!1,$I()?document.body.removeEventListener(\"click\",e,!0):(document.body.removeEventListener(\"touchstart\",e,!0),document.body.removeEventListener(\"mousedown\",e,!0))};$I()?document.body.addEventListener(\"click\",e,!0):(document.body.addEventListener(\"touchstart\",e,!0),document.body.addEventListener(\"mousedown\",e,!0)),QP()}}const ck=[\"play\",\"playing\",\"loadeddata\",\"canplay\",\"pause\",\"stalled\",\"suspend\",\"waiting\",\"abort\",\"emptied\",\"ended\",\"timeupdate\",\"error\"];class dk extends ak{constructor(e){super(e),IP(this,\"container\",void 0),IP(this,\"slot\",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,i):await pL(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement(\"video\"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement(\"div\")),this.container.id=\"agora-video-player-\".concat(this.trackId),this.container.style.width=\"100%\",this.container.style.height=\"100%\",this.container.style.position=\"relative\",this.container.style.overflow=\"hidden\",this.videoTrack?(this.container.style.backgroundColor=\"black\",Dy(\"KEEP_LAST_FRAME\")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id=\"video_\".concat(this.trackId),this.videoElement.className=\"agora_video_player\",this.videoElement.style.width=\"100%\",this.videoElement.style.height=\"100%\",this.videoElement.style.position=\"absolute\",this.videoElement.style.left=\"0\",this.videoElement.style.top=\"0\"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement(\"video\")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement(\"video\"))}getContainerElement(){return this.container}}var lk,uk,hk,pk,_k,Ek,mk,fk,Tk,Sk,gk,Rk,Ck,Ik,vk,yk,Ak,bk,wk,Ok,Nk,Dk,Pk,Lk,kk,Mk,Uk,xk,Vk,Fk,Bk,jk,Gk,Wk;let Hk=(lk=oA({argsMap:(e,t,i)=>[e.getTrackId(),\"string\"==typeof t?t:t instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\",i]}),uk=tL(),hk=oA({argsMap:e=>[e.getTrackId()]}),pk=py(\"LocalVideoTrack\",\"_enabledMutex\"),_k=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),Ek=tL(),mk=py(\"LocalVideoTrack\",\"_enabledMutex\"),fk=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),Tk=tL(),Sk=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),gk=tL(),Rk=tL(),Ck=oA({argsMap:(e,t,i)=>[e.getTrackId(),t,i]}),Ik=tL(),vk=tL(),yk=tL(),Ak=tL(),bk=tL(),wk=tL(),Ok=tL(),Nk=oA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Dk=oA({argsMap:e=>[e.getTrackId()]}),Pk=oA({argsMap:e=>[e.getTrackId()]}),Lk=oA({argsMap:(e,t,i)=>[e.getTrackId(),t.label,i]}),kk=class e extends bP{get videoHeight(){if(PI()){const{height:e}=this._mediaStreamTrack.getSettings();return this._videoHeight=e,this._videoHeight}return this._videoHeight}get videoWidth(){if(PI()){const{width:e}=this._mediaStreamTrack.getSettings();return this._videoWidth=e,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==TP.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return\"LocalVideoTrack\"}constructor(e,t,i,n,r,o){if(super(e,r),IP(this,\"trackMediaType\",aP.VIDEO),IP(this,\"_player\",void 0),IP(this,\"isUseScaleResolutionDownBy\",!1),IP(this,\"_videoVisibleTimer\",null),IP(this,\"_previousVideoVisibleStatus\",void 0),IP(this,\"_clearPreviousVideoVisibleStatus\",(()=>this._previousVideoVisibleStatus=void 0)),IP(this,\"_encoderConfig\",void 0),IP(this,\"_scalabilityMode\",{numSpatialLayers:1,numTemporalLayers:1}),IP(this,\"_optimizationMode\",void 0),IP(this,\"_videoHeight\",void 0),IP(this,\"_videoWidth\",void 0),IP(this,\"_forceBitrateLimit\",void 0),IP(this,\"_enabled\",!0),IP(this,\"_processorDestination\",void 0),IP(this,\"_processorContext\",void 0),PI()){const{width:t,height:i}=e.getSettings();this._videoWidth=t,this._videoHeight=i}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=i,this._optimizationMode=n,this._hints=o||[],-1===this._hints.indexOf(eP.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t,i){const n=AI();return!(n.name!==e||!n.osVersion)&&(i?Number(n.version)>=t&&Number(n.version)<=i:Number(n.version)===t)}(CI.CHROME,115)&&-1!==wI().indexOf(\"Windows\")){const t=function(e,t){if(\"VideoFrame\"in window&&\"TransformStream\"in window&&MD().supportWebRTCInsertableStream){const i=new MediaStreamTrackProcessor(e),n=new MediaStreamTrackGenerator({kind:\"video\"});let r,o,s=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),r&&(r.close(),r=void 0),e.stop(),o=void 0,n.removeEventListener(\"ended\",a)};let c=window.setInterval((()=>{if(o&&r&&Date.now()-s>(null!=t?t:1e3))try{\"live\"===n.readyState?o.enqueue(r.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const d=new TransformStream({transform:(e,t)=>{\"live\"===n.readyState?(o=t,s=Date.now(),void 0===r?(r=e,t.enqueue(e.clone())):(t.enqueue(r),r=e)):e.close()}});return n.addEventListener(\"ended\",a),i.readable.pipeThrough(d).pipeTo(n.writable),n}}(e);t&&(Qy.info(\"local screen video track begin to inject frame\"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(eP.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new nL(this.getTrackId(),\"local\"),this._processorDestination=new iL(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"string\"==typeof e){const t=document.getElementById(e);t?e=t:(Qy.warning(\"[\".concat(this.getTrackId(),'] can not find \"#').concat(e,'\" element, use document.body')),e=document.body)}Qy.debug(\"[\".concat(this.getTrackId(),\"] start video playback in \").concat(e instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\"),JSON.stringify(t));const i=yP(yP(yP({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new ak(i):this._player=new dk(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(oP.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),Dy(\"CHECK_VIDEO_VISIBLE_INTERVAL\"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Qy.debug(\"[\".concat(this.getTrackId(),\"] stop video playback\")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Qy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Mv(this,$D.NEED_DISABLE_TRACK,this)}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to false error\"),e.toString()),e}return t||(this._enabled=!1),void Qy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to false success\"))}this._originMediaStreamTrack.enabled=!0;try{await Mv(this,$D.NEED_ENABLE_TRACK,this)}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to true error\"),e.toString()),e}Qy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to true success\")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck(\"muted\",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,Qy.debug(\"[\".concat(this.getTrackId(),\"] start set muted: \").concat(e)),e?await Mv(this,$D.NEED_MUTE_TRACK,this):await Mv(this,$D.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new rv(nv.TRACK_IS_DISABLED,\"can not set encoder configuration when track is disabled\");if(e=YD(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=dL({encoderConfig:e});(PI()||MI()||qI())&&(t.deviceId=void 0),Qy.debug(\"[\".concat(this.getTrackId(),\"] setEncoderConfiguration applyConstraints\"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new rv(nv.UNEXPECTED_ERROR,e.toString());throw Qy.error(\"[\".concat(this.getTrackId(),\"] applyConstraints error\"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(eP.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Mv(this,$D.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Qy)}}getStats(){Kv((()=>{Qy.warning(\"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead\")}),\"localVideoTrackGetStatsWarning\");return Uv(this,$D.GET_STATS)||yP({},lP)}async setBeautyEffect(e){Qy.error(\"LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect\")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await pL(e)}async setBitrateLimit(e){if(Qy.debug(\"[\".concat(this.getTrackId(),\"] set bitrate limit, \").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Mv(this,$D.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Qy)}}}async setOptimizationMode(e){if(\"motion\"!==e&&\"detail\"!==e&&\"balanced\"!==e)return void Qy.error(nv.INVALID_PARAMS,\"optimization mode must be motion, detail or balanced\");const t=this._optimizationMode;try{this._optimizationMode=e,await Mv(this,$D.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(e){throw this._optimizationMode=t,Qy.error(\"[\".concat(this.getTrackId(),\"] set optimization mode failed\"),e.toString()),e}Qy.info(\"[\".concat(this.getTrackId(),\"] set optimization mode success (\").concat(e,\")\"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Qy.error(nv.INVALID_PARAMS,\"scalability mode currently not supported, no SVC.\"),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,Qy.info(\"[\".concat(this.getTrackId(),\"] set scalability mode success (\").concat(e,\")\"))}updateMediaStreamTrackResolution(){cL(this._originMediaStreamTrack).then((e=>{let[t,i]=e;this._videoHeight=i,this._videoWidth=t})).catch(iy)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:\"contain\"}}async setSenderConfiguration(e){if(!this._enabled)throw new rv(nv.TRACK_IS_DISABLED,\"can not set encoder configuration when track is disabled\");Qy.debug(\"[\".concat(this.getTrackId(),\"] setSenderConfiguration applyConstraints\"),JSON.stringify(e)),e=YD(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(eP.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Mv(this,$D.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Qy)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:i}=this.getMediaStreamTrackSettings();if(!e||!t||!i)return;const{bitrateMax:n,bitrateMin:r}=this._encoderConfig;if(null==r||null==n){const{max:o,min:s}=function(e,t,i,n,r){const o=Dy(\"BITRATE_ADAPTER_TYPE\");if(\"DEFAULT_BITRATE\"===o)return{min:n,max:r};if(void 0===r){var s;const a=Math.floor(200*Math.pow(i/15,.6)*Math.pow(e*t/640/360,.75));r=\"STANDARD_BITRATE\"===o?4*a:2*a,n=null!==(s=n)&&void 0!==s?s:a}else{var a;n=null!==(a=n)&&void 0!==a?a:Math.floor(r/10)}return{min:n,max:r}}(e,t,i,r,n);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,Qy.debug(\"[\".concat(this.getTrackId(),\"] update bitrate from profile, [w: \").concat(e,\", h: \").concat(t,\", fps: \").concat(i,\"] => [brMax: \").concat(o,\", brMin: \").concat(s,\"]\"))}}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess(\"Video is visible\"):e.onSuccess(\"Invisible because of \".concat(t.reason))}return t}return}catch(e){throw new rv(nv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new rv(nv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;t&&(n=yP(yP({},n),YD(t))),n=Wv(n);const r=ey(8,\"track-video-cloned-\"),o=new e(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,Wv(this._scalabilityMode),this._optimizationMode,r,Wv(this._hints));return t&&n&&o.setEncoderConfiguration(n),Qy.debug(\"clone video track from \".concat(this.getTrackId(),\" to \").concat(r,\", clone \").concat(i)),o}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new rv(nv.INVALID_PARAMS,\"track should be an instance of MediaStreamTrack\");if(\"video\"!==e.kind)throw new rv(nv.INVALID_PARAMS,\"track should be a video MediaStreamTrack\");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}sendSeiData(e){if(Kv((()=>{sA.reportApiInvoke(null,{name:Cv.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Iv.TRACER}).onSuccess(\"\")}),this._mediaStreamTrack.id||this.getTrackId()),!Dy(\"ENABLE_VIDEO_SEI\")||!Dy(\"ENABLE_ENCODED_TRANSFORM\"))return void Qy.warning('To send/receive SEI, please call AgoraRTC.setParameter(\"ENABLE_VIDEO_SEI\", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new rv(nv.INVALID_PARAMS,\"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.\").throw();const t=this.getRTCRtpTransceiver();if(!t)return void Qy.warning(\"Video track is not published, SEI can not be send\");const i=t.sender.getParameters();if(0===i.codecs.length)return;const n=i.codecs[0].mimeType.toLocaleLowerCase();\"video/h264\"===n?this.safeEmit(\"sei-to-send\",e):Qy.warning(\"SEI is not supported by \".concat(n))}bindProcessorDestinationEvents(){this.processorDestination.on(_P.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await Mv(this,$D.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mv(this,$D.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(_P.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(EP.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(EP.REQUEST_CONSTRAINTS)}},CP(kk.prototype,\"play\",[lk,uk],Object.getOwnPropertyDescriptor(kk.prototype,\"play\"),kk.prototype),CP(kk.prototype,\"stop\",[hk],Object.getOwnPropertyDescriptor(kk.prototype,\"stop\"),kk.prototype),CP(kk.prototype,\"setEnabled\",[pk,_k,Ek],Object.getOwnPropertyDescriptor(kk.prototype,\"setEnabled\"),kk.prototype),CP(kk.prototype,\"setMuted\",[mk,fk,Tk],Object.getOwnPropertyDescriptor(kk.prototype,\"setMuted\"),kk.prototype),CP(kk.prototype,\"setEncoderConfiguration\",[Sk,gk],Object.getOwnPropertyDescriptor(kk.prototype,\"setEncoderConfiguration\"),kk.prototype),CP(kk.prototype,\"getStats\",[Rk],Object.getOwnPropertyDescriptor(kk.prototype,\"getStats\"),kk.prototype),CP(kk.prototype,\"setBeautyEffect\",[Ck,Ik],Object.getOwnPropertyDescriptor(kk.prototype,\"setBeautyEffect\"),kk.prototype),CP(kk.prototype,\"getCurrentFrameData\",[vk],Object.getOwnPropertyDescriptor(kk.prototype,\"getCurrentFrameData\"),kk.prototype),CP(kk.prototype,\"getCurrentFrameImage\",[yk],Object.getOwnPropertyDescriptor(kk.prototype,\"getCurrentFrameImage\"),kk.prototype),CP(kk.prototype,\"setBitrateLimit\",[Ak],Object.getOwnPropertyDescriptor(kk.prototype,\"setBitrateLimit\"),kk.prototype),CP(kk.prototype,\"setOptimizationMode\",[bk],Object.getOwnPropertyDescriptor(kk.prototype,\"setOptimizationMode\"),kk.prototype),CP(kk.prototype,\"setScalabiltyMode\",[wk],Object.getOwnPropertyDescriptor(kk.prototype,\"setScalabiltyMode\"),kk.prototype),CP(kk.prototype,\"updateMediaStreamTrackResolution\",[Ok],Object.getOwnPropertyDescriptor(kk.prototype,\"updateMediaStreamTrackResolution\"),kk.prototype),CP(kk.prototype,\"pipe\",[Nk],Object.getOwnPropertyDescriptor(kk.prototype,\"pipe\"),kk.prototype),CP(kk.prototype,\"unpipe\",[Dk],Object.getOwnPropertyDescriptor(kk.prototype,\"unpipe\"),kk.prototype),CP(kk.prototype,\"close\",[Pk],Object.getOwnPropertyDescriptor(kk.prototype,\"close\"),kk.prototype),CP(kk.prototype,\"replaceTrack\",[Lk],Object.getOwnPropertyDescriptor(kk.prototype,\"replaceTrack\"),kk.prototype),kk),Kk=(Mk=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),Uk=tL(),xk=py(\"CameraVideoTrack\",\"_enabledMutex\"),Vk=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),Fk=tL(),Bk=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),jk=tL(),Gk=oA({argsMap:e=>[e.getTrackId()]}),Wk=class e extends Hk{get __className__(){return\"CameraVideoTrack\"}constructor(e,t,i,n,r,o){super(e,YD(t.encoderConfig),n,r,o),IP(this,\"_config\",void 0),IP(this,\"_originalConstraints\",void 0),IP(this,\"_constraints\",void 0),IP(this,\"_enabled\",!0),IP(this,\"_deviceName\",\"default\"),IP(this,\"tryResumeVideoForIOS15_16WeChat\",(async()=>{(HI()||KI())&&!function(){const e=AI();if(e.os!==RI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(\".\");return 15===Number(t[0])&&Number(t[1])>=2}()&&zI()&&this._enabled&&!this._isClosed&&(Qy.debug(\"[\".concat(this.getTrackId(),\"] try capture camera media device for interrupted iOS 15 device on WeChat.\")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=i,this._constraints=i,this._deviceName=e.label,this._encoderConfig=YD(this._config.encoderConfig),NP.on(VD.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),NP.on(VD.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return\"string\"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(Qy.info(\"[\".concat(this.getTrackId(),\"] set device to \").concat(e)),this._enabled)try{const t=await zP.getDeviceById(e),i={};i.video=yP({},this._constraints),i.video.deviceId={exact:e},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let n=null;try{n=await HP(i,this.getTrackId())}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDevice failed\"),e.toString()),n=await HP({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}else try{const t=await zP.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDevice error\"),e.toString()),e}Qy.info(\"[\".concat(this.getTrackId(),\"] setDevice success\"))}async _setDeviceByFacingModel(e){Qy.info(\"[\".concat(this.getTrackId(),\"] set facingMode \").concat(e));const t={video:yP(yP({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await HP(t,this.getTrackId())}catch(t){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setDeviceByFacingModel failed\"),t.toString()),e=await HP({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName=\"\",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=yP({},t.video),Qy.info(\"[\".concat(this.getTrackId(),\"] setDeviceByFacingModel success\"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck(\"enabled\",e)}if(Qy.info(\"[\".concat(this.getTrackId(),\"] start setEnabled\"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await HP({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await Mv(this,$D.NEED_ENABLE_TRACK,this)}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled true error\"),e.toString()),e}this.updateMediaStreamTrackResolution(),Qy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to true success\")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await Mv(this,$D.NEED_DISABLE_TRACK,this)}catch(e){throw Qy.error(\"[\".concat(this.getTrackId(),\"] setEnabled to false error\"),e.toString()),e}Qy.info(\"[\".concat(this.getTrackId(),\"] setEnabled to false success\"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new rv(nv.TRACK_IS_DISABLED,\"can not set encoder configuration when track is disabled\");e=YD(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate||e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate||e.bitrateMin);const i=Gv(this._config);i.encoderConfig=e;const n=dL(i);(PI()||MI()||qI())&&(n.deviceId=void 0),Qy.debug(\"[\".concat(this.getTrackId(),\"] setEncoderConfiguration applyConstraints\"),JSON.stringify(e),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(e){const t=new rv(nv.UNEXPECTED_ERROR,e.toString());throw Qy.error(\"[\".concat(this.getTrackId(),\"] applyConstraints error\"),t.toString()),t}this._config=i,this._constraints=n,this._originalConstraints=n,this._encoderConfig=e,-1===this._hints.indexOf(eP.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Mv(this,$D.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(Qy)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:\"cover\"}}onTrackEnded(){if((MI()||qI())&&this._enabled&&!this._isClosed&&NP.duringInterruption){const e=async()=>{NP.off(VD.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Qy.debug(\"[\".concat(this.getTrackId(),\"] try capture camera media device for interrupted iOS device.\")),await this.setEnabled(!1),await this.setEnabled(!0))};NP.on(VD.IOS_INTERRUPTION_END,e)}else Qy.debug(\"[\".concat(this.getTrackId(),\"] track ended\")),this.safeEmit(oP.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,i=zP.searchDeviceIdByName(this._deviceName);if(i&&!t.deviceId&&(t.deviceId={exact:i}),this._enabled){const e=await HP({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),NP.off(VD.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),NP.off(VD.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;t&&(n=yP(yP({},n),YD(t))),n=Wv(n);const r=ey(8,\"track-cam-cloned-\"),o=new e(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,Wv(yP(yP({},this._config),{},{encoderConfig:n})),Wv(this._constraints),Wv(this._scalabilityMode),this._optimizationMode,r);return t&&n&&o.setEncoderConfiguration(n),Qy.debug(\"clone track from \".concat(this.getTrackId(),\" to \").concat(r,\", clone \").concat(i)),o}bindProcessorContextEvents(){this.processorContext.on(EP.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,i)=>{try{const i=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(i),t()}catch(e){i(e)}})),this.processorContext.on(EP.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}},CP(Wk.prototype,\"setDevice\",[Mk,Uk],Object.getOwnPropertyDescriptor(Wk.prototype,\"setDevice\"),Wk.prototype),CP(Wk.prototype,\"setEnabled\",[xk,Vk,Fk],Object.getOwnPropertyDescriptor(Wk.prototype,\"setEnabled\"),Wk.prototype),CP(Wk.prototype,\"setEncoderConfiguration\",[Bk,jk],Object.getOwnPropertyDescriptor(Wk.prototype,\"setEncoderConfiguration\"),Wk.prototype),CP(Wk.prototype,\"close\",[Gk],Object.getOwnPropertyDescriptor(Wk.prototype,\"close\"),Wk.prototype),Wk);function Yk(e,t,i,n){i.optimizationMode&&(n&&n.width&&n.height?(i.encoderConfig=yP(yP({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),\"motion\"!==i.optimizationMode&&\"detail\"!==i.optimizationMode||(t.contentHint=i.optimizationMode,t.contentHint===i.optimizationMode?Qy.debug(\"[\".concat(e,\"] set content hint to\"),i.optimizationMode):Qy.debug(\"[\".concat(e,\"] set content hint failed\")))):Qy.warning(\"[\".concat(e,\"] can not apply optimization mode bitrate config, no encoderConfig\")))}var qk,zk,Jk,Xk,Qk,Zk,$k,eM,tM,iM,nM,rM;class oM extends AP{getUserId(){return this._userId}constructor(e,t,i,n){super(e,\"track-\".concat(e.kind,\"-\").concat(t,\"-\").concat(n.clientId,\"_\").concat(ey(5,\"\"))),IP(this,\"_userId\",void 0),IP(this,\"_uintId\",void 0),IP(this,\"_isDestroyed\",!1),IP(this,\"store\",void 0),IP(this,\"processor\",void 0),IP(this,\"processorContext\",void 0),this._userId=t,this._uintId=i,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,Qy.info(\"[\".concat(this.getTrackId(),\"] is destroyed\")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let sM=(qk=oA({argsMap:(e,t,i)=>[e.getTrackId(),\"string\"==typeof t?t:t instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\",i]}),zk=oA({argsMap:e=>[e.getTrackId()]}),Jk=oA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Xk=oA({argsMap:e=>[e.getTrackId()]}),CP((Qk=class extends oM{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==TP.PLAYING)}get __className__(){return\"RemoteVideoTrack\"}constructor(e,t,i,n){super(e,t,i,n),IP(this,\"_videoVisibleTimer\",null),IP(this,\"_previousVideoVisibleStatus\",void 0),IP(this,\"_clearPreviousVideoVisibleStatus\",(()=>this._previousVideoVisibleStatus=void 0)),IP(this,\"trackMediaType\",aP.VIDEO),IP(this,\"_videoWidth\",void 0),IP(this,\"_videoHeight\",void 0),IP(this,\"_player\",void 0),IP(this,\"processorDestination\",void 0),IP(this,\"processorContext\",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new nL(this.getTrackId(),\"remote\"),this.processorDestination=new iL(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Kv((()=>{Qy.warning(\"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead\")}),\"remoteVideoTrackGetStatsWarning\"),Uv(this,$D.GET_STATS)||yP({},pP)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"string\"==typeof e){const t=document.getElementById(e);t?e=t:(Qy.warning(\"[\".concat(this.getTrackId(),'] can not find \"#').concat(e,'\" element, use document.body')),e=document.body)}Qy.debug(\"[\".concat(this.getTrackId(),\"] start video playback in \").concat(e instanceof HTMLVideoElement?\"HTMLVideoElement\":\"HTMLElement\"),JSON.stringify(t));const i=yP(yP({fit:\"cover\"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new ak(i):this._player=new dk(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),\"video\",void 0,void 0,Date.now()),this.safeEmit(sP.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(sP.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(sP.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),Dy(\"CHECK_VIDEO_VISIBLE_INTERVAL\"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Qy.debug(\"[\".concat(this.getTrackId(),\"] stop video playback\")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){cL(this._originMediaStreamTrack).then((e=>{let[t,i]=e;this._videoHeight=i,this._videoWidth=t})).catch(iy)}_updatePlayerSource(){Qy.debug(\"[\".concat(this.getTrackId(),\"] update player source track\")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess(\"Video is visible\"):e.onSuccess(\"Invisible because of \".concat(t.reason))}return t}return}catch(e){throw new rv(nv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new rv(nv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(_P.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(_P.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(rP.SEI_RECEIVED,e)}}).prototype,\"play\",[qk],Object.getOwnPropertyDescriptor(Qk.prototype,\"play\"),Qk.prototype),CP(Qk.prototype,\"stop\",[zk],Object.getOwnPropertyDescriptor(Qk.prototype,\"stop\"),Qk.prototype),CP(Qk.prototype,\"pipe\",[Jk],Object.getOwnPropertyDescriptor(Qk.prototype,\"pipe\"),Qk.prototype),CP(Qk.prototype,\"unpipe\",[Xk],Object.getOwnPropertyDescriptor(Qk.prototype,\"unpipe\"),Qk.prototype),Qk),aM=(Zk=oA({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),$k=oA({argsMap:(e,t)=>[e.getTrackId(),t]}),eM=oA({argsMap:e=>[e.getTrackId()]}),tM=oA({argsMap:e=>[e.getTrackId()]}),iM=oA({argsMap:(e,t)=>[e.getTrackId(),t.name]}),nM=oA({argsMap:e=>[e.getTrackId()]}),CP((rM=class extends oM{get isPlaying(){return this._useAudioElement?eL.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return\"RemoteAudioTrack\"}constructor(e,t,i,n){super(e,t,i,n),IP(this,\"trackMediaType\",aP.AUDIO),IP(this,\"_source\",void 0),IP(this,\"_useAudioElement\",!0),IP(this,\"_volume\",100),IP(this,\"processorContext\",void 0),IP(this,\"processorDestination\",void 0),IP(this,\"_played\",!1),IP(this,\"_bypassWebAudio\",!1),Dy(\"DISABLE_WEBAUDIO\")?(this._source=new sL,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new xP(e,!0),Dy(\"REMOTE_AUDIO_TRACK_USES_WEB_AUDIO\")&&(this._useAudioElement=!1)),this._source.once(cP.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(sP.FIRST_FRAME_DECODED)})),this.processorContext=new oL(this._source.context,this.getTrackId(),\"remote\"),this.processorDestination=new rL(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(cP.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(cP.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(cP.ON_AUDIO_BUFFER),this._source.on(cP.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?eL.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!UD())throw new rv(nv.NOT_SUPPORTED,\"your browser does not support setting the audio output device\");await eL.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Kv((()=>{Qy.warning(\"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead\")}),\"remoteAudioTrackGetStatsWarning\"),Uv(this,$D.GET_STATS)||yP({},uP)}play(){Qy.debug(\"[\".concat(this.getTrackId(),\"] start audio playback\")),this._played=!0,this._useAudioElement?(Qy.debug(\"[\".concat(this.getTrackId(),\"] use audio element to play\")),eL.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){Qy.debug(\"[\".concat(this.getTrackId(),\"] stop audio playback\")),this._played=!1,this._useAudioElement?eL.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Qy.debug(\"[\".concat(this.getTrackId(),\"] update player source track\")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&eL.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new rv(nv.NOT_SUPPORTED,\"can not pipe extension when WebAudio disabled\");if(this.processor===e)return e;if(e._source)throw new rv(nv.INVALID_OPERATION,\"Processor \".concat(e.name,\" already piped, please call unpipe beforehand.\"));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new rv(nv.NOT_SUPPORTED,\"can not unpipe extension when WebAudio disabled\");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(_P.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(_P.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(_P.ON_TRACK),this.processorDestination.removeAllListeners(_P.ON_NODE)}}).prototype,\"setVolume\",[Zk],Object.getOwnPropertyDescriptor(rM.prototype,\"setVolume\"),rM.prototype),CP(rM.prototype,\"setPlaybackDevice\",[$k],Object.getOwnPropertyDescriptor(rM.prototype,\"setPlaybackDevice\"),rM.prototype),CP(rM.prototype,\"play\",[eM],Object.getOwnPropertyDescriptor(rM.prototype,\"play\"),rM.prototype),CP(rM.prototype,\"stop\",[tM],Object.getOwnPropertyDescriptor(rM.prototype,\"stop\"),rM.prototype),CP(rM.prototype,\"pipe\",[iM],Object.getOwnPropertyDescriptor(rM.prototype,\"pipe\"),rM.prototype),CP(rM.prototype,\"unpipe\",[nM],Object.getOwnPropertyDescriptor(rM.prototype,\"unpipe\"),rM.prototype),rM);const cM=new class extends Sv{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),IP(this,\"_lastHiddenTime\",0),IP(this,\"_lastVisibleTime\",0),document.addEventListener(\"visibilitychange\",(()=>{\"hidden\"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),Qy.debug(\"document visibility went \".concat(document.visibilityState)),this.emit(\"VISIBILITY_CHANGE\",document.visibilityState)}))}};class dM extends Sv{constructor(e,t){super(),IP(this,\"trackMediaType\",aP.DATA),IP(this,\"_version\",1),IP(this,\"_type\",3),IP(this,\"_config\",void 0),IP(this,\"_originDataChannel\",void 0),IP(this,\"_dataStreamPacketHeader\",new ArrayBuffer(4)),IP(this,\"_dataStreamPacketHandler\",{serialize:e=>e,deserialize:e=>e}),IP(this,\"_datachannelEventMap\",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return Dy(\"DATASTREAM_MAX_RETRANSMITS\")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:\"connecting\"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new Gh(((e,t)=>{if(this._originDataChannel){\"open\"===this._originDataChannel.readyState&&e();const i=setTimeout((()=>{var e;t(new rv(nv.DATACHANNEL_CONNECTION_TIMEOUT,\"Cannot create datachannel, id: \".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(i),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(i),new rv(nv.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new rv(nv.DATACHANNEL_CONNECTION_TIMEOUT,\"cannot find dataChannel\"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[RP.OPEN,RP.CLOSE,RP.ERROR].forEach((t=>{const i=()=>{this.emit(t)};this._datachannelEventMap.set(t,i),e.addEventListener(t,i)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[i,n]=t;e.removeEventListener(i,n)})),this._datachannelEventMap.clear()}}class lM extends dM{constructor(e){super(e),IP(this,\"_messageListener\",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error(\"invalid byteLength: the byte length must exceed \"+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),i=new DataView(t).getUint8(3);if(i!==this.id)return void(Dy(\"SHOW_DATASTREAM2_LOG\")&&Qy.debug(\"invalid datachannel id: \".concat(i,\" !== \").concat(this.id)));let n=e.data.slice(this._dataStreamPacketHeader.byteLength);n=this._dataStreamPacketHandler.deserialize(n),this.emit(RP.MESSAGE,n)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener(\"message\",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener(\"message\",this._messageListener)}}class uM extends dM{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const i=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);i.set(new Uint8Array(this._dataStreamPacketHeader),0),i.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(i.buffer)}}}function hM(){const e=new Blob([atob(\"ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==\")],{type:\"text/javascript\"});return setTimeout((()=>LD.revokeObjectURL(e)),0),new Worker(LD.createObjectURL(e))}const pM=new Map;const _M=new Map;function EM(e,t,i){let n=new Uint8Array(e,t,i),r=[],o=0;for(;r.length<i;)o+3<i&&0===n[o]&&0===n[o+1]&&3===n[o+2]&&(0===n[o+3]||1===n[o+3]||2===n[o+3]||3===n[o+3])?(r.push(n[o],n[o+1],n[o+3]),o+=4):(r.push(n[o]),o++);return new Uint8Array(r)}const mM=new Map;async function fM(e,t){if(!MD().supportWebRTCEncodedTransform)return void Qy.warning(\"browser not support video encoded transform\");if(mM.has(e))return;if(!e.track)return;const i={track:e.track};if(DI()){if(!e.createEncodedStreams)return void Qy.warning(\"browser not support createEncodedStreams() API\");let r=null;try{r=e.createEncodedStreams()}catch(e){return void Qy.error(\"create video-encoded-streams error\",e&&e.message)}let o=[];t.on(\"sei-to-send\",(e=>{o.push(e)}));const s=new TransformStream({transform(t,r){i.controller||(i.controller=r),e.track&&e.track.id!==i.track.id&&(Qy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n));const s=o.shift();s&&(t.data=function(e,t){const i=function(e){const t=e.length;let i=[],n=0;for(;n<t;)n+2<t&&0===e[n]&&0===e[n+1]&&(0===e[n+2]||1===e[n+2]||2===e[n+2]||3===e[n+2])?(i.push(e[n],e[n+1],3,e[n+2]),n+=3):(i.push(e[n]),n++);return new Uint8Array(i)}(t),n=i.length,r=Math.floor(n/255),o=n%255,s=new Uint8Array(6+r+1+n+e.byteLength);s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=6,s[5]=101;let a=0;for(;a<r;)s[6+a]=255,a++;return s[6+a]=o,a++,s.set(i,6+a),s.set(new Uint8Array(e),6+a+n),s.buffer}(t.data,s)),r.enqueue(t)}});r.readable.pipeThrough(s).pipeTo(r.writable)}else{if(!PI())return;{if(\"undefined\"==typeof RTCRtpScriptTransform)return void Qy.warning(\"browser not support RTCRtpScriptTransform\");const r=hM(),o=new MessageChannel;await new Gh((e=>r.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(r,{name:\"tx\",port:o.port2},[o.port2]);e.transform=s,await new Gh((e=>r.onmessage=t=>{\"started\"===t.data&&e(void 0)})),t.on(\"sei-to-send\",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var r;t.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==i.track.id&&(Qy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n))},i.worker=r}}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener(\"ended\",n)}const t=mM.get(e);if(t){mM.delete(e);try{var i,r;null===(i=t.controller)||void 0===i||i.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){Qy.warning(e&&e.message)}}}mM.set(e,i),e.track.addEventListener(\"ended\",n)}const TM=new Map;!function(){const e=AI();kD.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),kD.getStreamFromExtension=e.name===CI.CHROME&&Number(e.version)>34,kD.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!(\"currentDirection\"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver(\"audio\"),t=!0}catch(e){}return e.close(),t}(),kD.supportMinBitrate=e.name===CI.CHROME||e.name===CI.EDGE,kD.supportSetRtpSenderParameters=function(){const e=AI();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!QI()||!(!PI()&&!NI())||e.name===CI.FIREFOX&&Number(e.version)>=64)}(),e.name===CI.SAFARI&&(Number(e.version)>=14?kD.supportDualStream=!0:kD.supportDualStream=!1),kD.webAudioMediaStreamDest=function(){const e=AI();return!(e.name===CI.SAFARI&&Number(e.version)<12)}(),kD.supportReplaceTrack=!!window.RTCRtpSender&&\"function\"==typeof RTCRtpSender.prototype.replaceTrack,kD.supportWebGL=\"undefined\"!=typeof WebGLRenderingContext,kD.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,QI()||(kD.webAudioWithAEC=!0),kD.supportShareAudio=function(){const e=AI();return(e.os===RI.WIN_10||e.os===RI.WIN_81||e.os===RI.WIN_7||e.os===RI.LINUX||e.os===RI.MAC_OS||e.os===RI.CHROMIUM_OS)&&e.name===CI.CHROME&&Number(e.version)>=74}(),kD.supportDataChannel=!!(UI(76)||function(e){const t=AI();return!(t.name!==CI.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||FI(14)),kD.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!kI()&&!!e&&e.prototype.setConfiguration instanceof Function}(),kD.supportWebRTCEncodedTransform=function(){const e=AI();return\"Chrome\"===e.name&&Number(e.version)>=86||\"Safari\"===e.name&&Number(e.version)>=15}(),kD.supportWebRTCInsertableStream=function(){const e=AI();return(e.name===CI.CHROME||e.name===CI.EDGE)&&Number(e.version)>=94&&\"MediaStreamTrackGenerator\"in window&&\"MediaStreamTrackProcessor\"in window}(),kD.supportRequestVideoFrameCallback=\"requestVideoFrameCallback\"in HTMLVideoElement.prototype,kD.supportWebCrypto=\"undefined\"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle,jv((()=>{kD.supportDualStreamEncoding=function(){const e=AI();return!!Dy(\"DISABLE_WEBAUDIO\")||(\"Safari\"===e.name&&Number(e.version)>=14||!!(\"Chrome\"===e.name&&/Windows/i.test(e.os||\"\")&&Number(e.version)>=100&&Dy(\"CHROME_DUAL_STREAM_USE_ENCODING\")))}(),Qy.info(\"browser compatibility\",JSON.stringify(kD),JSON.stringify(e))}))}();class SM extends Sv{constructor(e,t){super(),og(this,\"signal\",void 0),og(this,\"token\",void 0),og(this,\"tokenTimeout\",void 0),og(this,\"tokenInterval\",void 0),og(this,\"_sequence\",0),og(this,\"userMap\",new Map),og(this,\"encoder\",new TextEncoder),this.signal=e,this.token=t;const i=()=>{this.signal.connectionState===hb.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(i,1e3):this.tokenInterval=window.setTimeout(i,3*Dy(\"P2P_TOKEN_INTERVAL\"))};i()}async send(e,t,i,n,r){var o,s,a;if(0===this.userMap.size)return;const c=Array.from(Qw(o=this.userMap).call(o))[0].token;\"string\"!=typeof t&&(t=JSON.stringify(t)),n=null!==(s=n)&&void 0!==s?s:ey(6,\"\"),r=null!==(a=r)&&void 0!==a?a:this._sequence++;const d={_id:n,_type:e,_seq:r,_message:t,token:\"\".concat(this.token,\"_\").concat(c)};Dy(\"SHOW_P2P_LOG\")&&Qy.debug(\"send message\",d,\"noNeedResponse : \".concat(i));this.splitMessage(JSON.stringify(d)).forEach((e=>{this.signal.request(_b.DATA_STREAM,{payload:qv(this.encoder.encode(e))})}));const l=new Gh(((t,r)=>{const o=window.setTimeout((()=>{this.off(\"res-@\".concat(n,\"_ack\"),s),this.off(\"res-@\".concat(n),c),this.off(aw.ABORT,a),Qy.debug(\"[external-signal] request timeout, type: \".concat(e,\", requestId: \").concat(n)),0===this.userMap.size?r(new rv(nv.INVALID_REMOTE_USER)):r(new rv(nv.TIMEOUT))}),Dy(\"EXTERNAL_SIGNAL_REQUEST_TIMEOUT\")),s=()=>{o&&window.clearTimeout(o),this.off(aw.ABORT,a),i&&t()},a=()=>{o&&window.clearTimeout(o),this.off(\"res-@\".concat(n,\"_ack\"),s),this.off(\"res-@\".concat(n),c),r(new rv(nv.EXTERNAL_SIGNAL_ABORT,\"type: \".concat(e,\", requestId: \").concat(n)))};this.once(aw.ABORT,a),this.once(\"res-@\".concat(n,\"_ack\"),s);const c=(i,c)=>{l=!0,o&&window.clearTimeout(o),this.off(\"res-@\".concat(n,\"_ack\"),s),this.off(aw.ABORT,a),\"success\"===i?t(c):r(new rv(nv.P2P_MESSAGE_FAILED,\"request \".concat(e,\" failed, requestId: \").concat(n)))};let l=!1;i||(this.once(\"res-@\".concat(n),c),$v(Dy(\"SIGNAL_REQUEST_TIMEOUT\")).then((()=>{l||Qy.warning(\"external_signal request timeout, type: \".concat(e,\", requestId: \").concat(n,\", \").concat(d))})))}));try{return await l}catch(o){if(o.code===nv.TIMEOUT)return await this.send(e,t,i,n,r);throw o}}onMessage(e){var t;const{_uid:i}=e;let n,r=this.userMap.get(i);if(r)n=r.splitMessageMap;else{if(this.userMap.size>0||!(\"_type\"in e)||e._type!==sw.CHECK)return;const{token:t}=e;n=new Map,r={uid:i,isStart:!0,token:t,splitMessageMap:n,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(i,r),this.signal.emit(mb.ON_USER_ONLINE,{uid:i}),this.handleUserOnline()}if(\"id\"in e&&\"total\"in e){var o;const{id:t,total:r}=e,s=null!==(o=n.get(t))&&void 0!==o?o:[];if(s.push(e),n.has(t)||n.set(t,s),s.length!==r)return;{const r=aE(s).call(s,((e,t)=>e.index-t.index)).map((e=>e.payload)).join(\"\");n.delete(t),(e=JSON.parse(r))._uid=i}}const{_type:s,token:a}=e;if(Dn(t=[sw.ACK,sw.CHECK]).call(t,s))return s===sw.CHECK&&this.handleCheckToken(r,a),void this.receiveMessage(e);a===\"\".concat(r.token,\"_\").concat(this.token)?this.handleReceivedMessage(e):Qy.debug('Receive unexpected message\", '.concat(a,\", cur_token: \").concat(r.token,\"_\").concat(this.token),e)}check(){const e={_id:ey(6,\"\"),token:this.token,_type:sw.CHECK};Dy(\"SHOW_P2P_LOG\")&&Qy.debug(\"send message\",e),this.signal.request(_b.DATA_STREAM,{payload:qv(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:sw.ACK,token:this.token};Dy(\"SHOW_P2P_LOG\")&&Qy.debug(\"send message\",t),this.signal.request(_b.DATA_STREAM,{payload:qv(this.encoder.encode(JSON.stringify(t)))})}response(e,t,i){this.send(sw.RESPONSE,JSON.stringify({success:!i,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:i}=e;for(;t.has(i);){const n=t.get(i);t.delete(i),this.receiveMessage(n),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:i,_seq:n}=e,r=this.userMap.get(i),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:a}=r;if(n<a)return this.ack(e._id),void Qy.debug(\"[external-signal] receive old message, seq: \".concat(n,\", \").concat(e._message));o.set(n,e),s&&n===a&&(this.receiveMessage(e),o.delete(a),r.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:i,_message:n,_uid:r}=e;if(Dy(\"SHOW_P2P_LOG\")&&Qy.debug(\"receive message\",e),t){let o;switch(e._type!==sw.ACK&&(n&&(o=JSON.parse(n)),this.ack(e._id)),e._type){case sw.CANDIDATE:case sw.CONTROL:this.signal.emit(i,o,r);break;case sw.PUBLISH:case sw.UNPUBLISH:case sw.RESTART_ICE:case sw.CALL:o.uid=r,kv(this.signal,i,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case sw.ACK:this.getListeners(\"res-@\".concat(t,\"_ack\")).length>0&&this.emit(\"res-@\".concat(t,\"_ack\"));break;case sw.RESPONSE:{const{success:e,message:i}=o;this.emit(\"res-@\".concat(t),e?\"success\":\"failed\",i);break}}}}splitMessage(e){if(e.length<SM.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:i}=JSON.parse(e),n=ey(6,\"\");let r=0,o=800;const s=Math.ceil(e.length/o);for(;e.length>0;){r++;const a={id:n,index:r,total:s,payload:e.slice(0,o),token:\"\".concat(this.token,\"_\").concat(i)};JSON.stringify(a).length>SM.MAX_MESSAGE_SIZE?o-=50:(t.push(a),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(Qy.debug(\"token changed, from \".concat(e.token,\" to \").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{Qy.debug(\"token timeout, \".concat(t)),this.reset(e.uid)}),Dy(\"MAX_P2P_TIMEOUT\")),!0)}async handleUserOnline(){const e=await kv(this.signal,sw.CALL,void 0),t=await this.send(sw.CALL,e);this.signal.emit(pb.P2P_CONNECTION,t,!0)}async reset(e,t){const i=this.userMap.get(e);i&&(this.emit(aw.ABORT),this.signal.emit(mb.ON_USER_OFFLINE,{uid:i.uid,reason:dw.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(Qy.debug(\"change local token from \".concat(t,\" to \").concat(t)),this.token=ey(6,\"\")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(aw.ABORT)}}og(SM,\"MAX_SIZE\",1),og(SM,\"MAX_MESSAGE_SIZE\",1024);class gM extends Sv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===hb.CONNECTED?this.emit(pb.WS_CONNECTED):e===hb.RECONNECTING?this.emit(pb.WS_RECONNECTING,this._websocketReconnectReason):e===hb.CLOSED&&this.emit(pb.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),og(this,\"_disconnectedReason\",void 0),og(this,\"_websocketReconnectReason\",void 0),og(this,\"_connectionState\",hb.CLOSED),og(this,\"reconnectToken\",void 0),og(this,\"p2pToken\",void 0),og(this,\"websocket\",void 0),og(this,\"openConnectionTime\",void 0),og(this,\"clientId\",void 0),og(this,\"lastMsgTime\",Date.now()),og(this,\"uploadCache\",[]),og(this,\"uploadCacheInterval\",void 0),og(this,\"rttRolling\",new fy(5)),og(this,\"pingpongTimer\",void 0),og(this,\"pingpongTimeoutCount\",0),og(this,\"joinResponse\",void 0),og(this,\"multiIpOption\",void 0),og(this,\"initError\",void 0),og(this,\"spec\",void 0),og(this,\"store\",void 0),og(this,\"_external_signal\",void 0),og(this,\"onWebsocketMessage\",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(pb.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,\"_id\")){const e=\"res-@\".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,\"_type\")){switch(t._type){case mb.ON_DATA_STREAM:return void this.handleDataStream(t._message);case mb.MUTE_AUDIO:case mb.MUTE_VIDEO:case mb.ON_P2P_LOST:case mb.ON_USER_ONLINE:return;case mb.ON_USER_OFFLINE:const{uid:e}=t._message;return Qy.debug(\"[\".concat(this.clientId,\"] user-offline uid: \").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===mb.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===mb.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(Av.UID_BANNED);break;case 15:this.close(Av.IP_BANNED);break;case 16:this.close(Av.CHANNEL_BANNED)}if(t._type===mb.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case ub.ERR_LICENSE_MISSING:this.close(Av.LICENSE_MISSING);break;case ub.ERR_LICENSE_EXPIRED:this.close(Av.LICENSE_EXPIRED);break;case ub.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Av.LICENSE_MINUTES_EXCEEDED);break;case ub.ERR_LICENSE_PERIOD_INVALID:this.close(Av.LICENSE_PERIOD_INVALID);break;case ub.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Av.LICENSE_MULTIPLE_SDK_SERVICE);break;case ub.ERR_LICENSE_ILLEGAL:this.close(Av.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new Aw(\"gateway-\".concat(this.clientId),this.spec.retryConfig,!0,Dy(\"JOIN_GATEWAY_USE_DUAL_DOMAIN\"),Dy(\"JOIN_GATEWAY_USE_443PORT_ONLY\"),t),this.handleWebsocketEvents(),window.addEventListener(\"offline\",(()=>{this.connectionState===hb.CONNECTED&&this.reconnect(\"retry\",Dv.OFFLINE)})),this.p2pToken=ey(6,\"\"),this._external_signal=new SM(this,this.p2pToken)}async request(e,t,i,n){const r=ey(6,\"\"),o={_id:r,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new Gh(((e,t)=>{if(this.connectionState===hb.CONNECTED)return e();const i=()=>{this.off(pb.WS_CLOSED,n),e()},n=()=>{this.off(pb.WS_CONNECTED,i),t(new rv(nv.WS_ABORT))};this.once(pb.WS_CONNECTED,i),this.once(pb.WS_CLOSED,n)}));if(this.connectionState!==hb.CONNECTING&&this.connectionState!==hb.RECONNECTING||e===_b.JOIN||e===_b.REJOIN||await a(),this.websocket.sendMessage(o,!0),n)return;const c=new Gh(((i,n)=>{let o=!1;const a=(n,r)=>{o=!0,i({isSuccess:\"success\"===n,message:r||{}}),this.off(pb.WS_CLOSED,c),this.off(pb.WS_RECONNECTING,c),this.emit(pb.REQUEST_SUCCESS,e,t)};this.once(\"res-@\".concat(r),a);const c=()=>{n(new rv(nv.WS_ABORT,\"type: \".concat(e))),this.off(pb.WS_CLOSED,c),this.off(pb.WS_RECONNECTING,c),this.off(\"res-@\".concat(r),a)};this.once(pb.WS_CLOSED,c),this.once(pb.WS_RECONNECTING,c),$v(Dy(\"SIGNAL_REQUEST_TIMEOUT\")).then((()=>{this.websocket.connectionID!==s||o||(Qy.warning(\"[\".concat(this.clientId,\"] ws request timeout, type: \").concat(e)),this.emit(pb.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(n){if(this.connectionState===hb.CLOSED||e===_b.LEAVE)throw new rv(nv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===_b.JOIN||e===_b.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=pw(l),h=new rv(nv.UNEXPECTED_RESPONSE,\"\".concat(u.desc,\": \").concat(d.message.error_str),{code:l,data:d.message,desc:u.desc});return\"success\"===u.action?d.message:(Qy.warning(\"[\".concat(this.clientId,\"] [\").concat(this.websocket.connectionID,\"] unexpected response from type \").concat(e,\", error_code: \").concat(l,\", message: \").concat(u.desc,\", action: \").concat(u.action)),l===ub.ERR_TOO_MANY_BROADCASTERS?e===_b.JOIN||e===_b.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():\"failed\"===u.action?h.throw():\"quit\"===u.action?(this.initError=h,this.close(),h.throw()):(l===ub.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,Qy.warning(\"[\".concat(this.clientId,\"] detect multi ip, recover\")),this.reconnect(\"recover\",Dv.MULTI_IP)):this.reconnect(u.action,Dv.SERVER_ERROR),e===_b.JOIN||e===_b.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new Gh((i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void Qy.warn(\"[\".concat(this.clientId,\"] no session id when upload wrtc stats\"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(Eb.WRTC_STATS,t)}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=Dy(\"MAX_UPLOAD_CACHE\")||50;this.uploadCache.push(i),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==hb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Dy(\"UPLOAD_CACHE_INTERVAL\")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}async sendExtensionMessage(e,t,i){return await this._external_signal.send(e,t,i)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Gh(((t,i)=>{this.once(pb.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(pb.WS_CLOSED,(()=>i(this.initError||new rv(nv.WS_ABORT)))),this.connectionState=hb.CONNECTING,this.websocket.init(e).catch(i)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||Av.LEAVE,this.connectionState=hb.CLOSED,Qy.debug(\"[\".concat(this.clientId,\"] \")+\"will close websocket in signal\"),this.websocket.close(),this.p2pToken=ey(6,\"\"),this._external_signal.clear(),this._external_signal=new SM(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(pb.ABORT_P2P_EXECUTION);const e=await kv(this,pb.REQUEST_JOIN_INFO),t=await this.request(_b.JOIN,e);if(!t)return this.emit(pb.REPORT_JOIN_GATEWAY,nv.TIMEOUT,this.url||\"\"),!1;this.joinResponse=t,this.emit(pb.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=hb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const i=Yv(e.payload),n=(new TextDecoder).decode(i),r=JSON.parse(n);\"total\"in r&&\"id\"in r||Dn(t=Object.values(sw)).call(t,r._type)?(r._uid=e.uid,this._external_signal.onMessage(r)):this.emit(mb.ON_DATA_STREAM,e)}catch(t){this.emit(mb.ON_DATA_STREAM,e)}}handleNotification(e){Qy.debug(\"[\".concat(this.clientId,\"] receive notification: \"),e);const t=pw(e.code);if(\"success\"!==t.action){if(\"failed\"!==t.action)return\"quit\"===t.action?(\"ERR_REPEAT_JOIN_CHANNEL\"===t.desc&&this.close(Av.UID_BANNED),void this.close()):void this.reconnect(t.action,Dv.SERVER_ERROR);Qy.error(\"[\".concat(this.clientId,\"] ignore error: \"),t.desc)}}handlePingPong(){if(!this.websocket||\"connected\"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Dy(\"PING_PONG_TIME_OUT\"),t=Date.now();this.pingpongTimeoutCount>=e&&(Qy.warning(\"[\".concat(this.clientId,\"] PINGPONG Timeout. Last Socket Message: \").concat(t-this.lastMsgTime,\"ms\")),t-this.lastMsgTime>Dy(\"WEBSOCKET_TIMEOUT_MIN\"))?this.reconnect(\"retry\",Dv.TIMEOUT):this.request(_b.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Dy(\"REPORT_STATS\")&&this.send(_b.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(Tb.RECONNECT_WAITTING_FINISH,(e=>{this.emit(pb.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(Tb.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(pb.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(Tb.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Tb.CLOSED,(()=>{this.connectionState=hb.CLOSED})),this.websocket.on(Tb.FAILED,(()=>{this._disconnectedReason=Av.NETWORK_ERROR,this.connectionState=hb.CLOSED})),this.websocket.on(Tb.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===hb.CONNECTED?this.connectionState=hb.RECONNECTING:this.connectionState=hb.CONNECTING})),this.websocket.on(Tb.WILL_RECONNECT,((e,t,i)=>{\"retry\"!==e?(Qy.debug(\"\".concat(this.clientId,\" websocket will_connect event, renewSession reconnectMode is \").concat(e)),this.reconnectToken=void 0):Qy.debug(\"\".concat(this.clientId,\" reconnect mode is retry, no need to renew session\")),i(e)})),this.websocket.on(Tb.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(pb.REPORT_JOIN_GATEWAY,e,this.url||\"\"),e instanceof rv&&e.code===nv.UNEXPECTED_RESPONSE&&e.data.code===ub.ERR_NO_AUTHORIZED)return Qy.warning(\"[\".concat(this.clientId,\"] reconnect no authorized, recover\")),void this.reconnect(\"recover\",Dv.SERVER_ERROR);Qy.error(\"[\".concat(this.clientId,\"] join gateway request failed\"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect(\"tryNext\",Dv.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(Tb.REQUEST_NEW_URLS,((e,t)=>{kv(this,pb.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(Tb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(mb.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var RM={exports:{}};RM.exports=(()=>{var e={8:(e,t,i)=>{i.r(t),i.d(t,{Parser:()=>C,Printer:()=>b,parse:()=>D,print:()=>P});const n=\"\\n\",r=\"\".concat(\"\\r\").concat(n),o=\" \";let s;function a(e){return e>=\"0\"&&e<=\"9\"}function c(e){return e>=\"!\"&&e<=\"~\"}function d(e){return c(e)||e>=\"Â\"&&e<=\"Ã¿\"}function l(e){return\"!\"===e||e>=\"#\"&&e<=\"'\"||e>=\"*\"&&e<=\"+\"||e>=\"-\"&&e<=\".\"||e>=\"0\"&&e<=\"9\"||e>=\"A\"&&e<=\"Z\"||e>=\"^\"&&e<=\"~\"}function u(e){return e>=\"1\"&&e<=\"9\"}function h(e){return e>=\"A\"&&e<=\"Z\"||e>=\"a\"&&e<=\"z\"}function p(e){return\"d\"===e||\"h\"===e||\"m\"===e||\"s\"===e}function _(e){return e>\"\u0001\"&&e<\"\\t\"||e>\"\\v\"&&e<\"\\f\"||e>\"\u000e\"&&e<\"Ã¿\"}function E(e){return h(e)||a(e)||\"+\"===e||\"/\"===e}function m(e){return a(e)||h(e)||\"+\"===e||\"/\"===e||\"-\"===e||\"_\"===e}function f(e){return h(e)||a(e)||\"+\"===e||\"/\"===e}function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.VERSION=\"v\",e.ORIGIN=\"o\",e.SESSION_NAME=\"s\",e.INFORMATION=\"i\",e.URI=\"u\",e.EMAIL=\"e\",e.PHONE=\"p\",e.CONNECTION=\"c\",e.BANDWIDTH=\"b\",e.TIME=\"t\",e.REPEAT=\"r\",e.ZONE_ADJUSTMENTS=\"z\",e.KEY=\"k\",e.ATTRIBUTE=\"a\",e.MEDIA=\"m\"}(s||(s={}));class R{consumeText(e,t){let i=t;for(;i<e.length;){const t=e[i];if(\"\\0\"===t||\"\\r\"===t||t===n)break;i+=1}if(i-t==0)throw new Error(\"Invalid text, at \".concat(e));return i}consumeUnicastAddress(e,t,i){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,i){let n=t;for(;i(e[n]);)n++;if(n-t==0)throw new Error(\"Invalid rule at \".concat(t,\".\"));return n}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error(\"Invalid space at \".concat(t,\".\"))}consumeIP4Address(e,t){let i=t;for(let t=0;t<4;t++)if(i=this.consumeDecimalUChar(e,i),3!==t){if(\".\"!==e[i])throw new Error(\"Invalid IP4 address.\");i++}return i}consumeDecimalUChar(e,t){let i=t;for(let t=0;t<3&&a(e[i]);t++,i++);if(i-t==0)throw new Error(\"Invalid decimal uchar.\");const n=parseInt(e.slice(t,i));if(n>=0&&n<=255)return i;throw new Error(\"Invalid decimal uchar\")}consumeIP6Address(e,t){let i=this.consumeHexpart(e,t);return\":\"===e[i]?(i+=1,i=this.consumeIP4Address(e,i),i):i}consumeHexpart(e,t){let i=t;if(\":\"===e[i]&&\":\"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}if(i=this.consumeHexseq(e,i),\":\"===e[i]&&\":\"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}return i}consumeHexseq(e,t){let i=t;for(;i=this.consumeHex4(e,i),\":\"===e[i]&&\":\"!==e[i+1];)i+=1;return i}consumeHex4(e,t){let i=0;for(;i<4;i++)if(!((n=e[t+i])>=\"0\"&&n<=\"9\"||n>=\"a\"&&n<=\"f\"||n>=\"A\"&&n<=\"F\")){if(0===i)throw new Error(\"Invalid hex 4\");break}var n;return t+i}consumeFQDN(e,t){let i=t;for(;a(e[i])||h(e[i])||\"-\"===e[i]||\".\"===e[i];)i+=1;if(i-t<4)throw new Error(\"Invalid FQDN\");return i}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,d)}consumeMulticastAddress(e,t,i){switch(i){case\"IP4\":case\"ip4\":return this.consumeIP4MulticastAddress(e,t);case\"IP6\":case\"ip6\":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(i){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const i=this.consumeHexpart(e,t);return\"/\"===e[i]?this.consumeInteger(e,i+1):i}consumeIP4MulticastAddress(e,t){let i=t+3;const n=e.slice(t,i),r=parseInt(n);if(r<224||r>239)throw new Error(\"Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.\");for(let t=0;t<3;t++){if(\".\"!==e[i])throw new Error(\"Invalid IP4 multicast address.\");i+=1,i=this.consumeDecimalUChar(e,i)}return\"/\"===e[i]&&(i+=1),i=this.consumeTTL(e,i),\"/\"===e[i]&&(i=this.consumeInteger(e,i)),i}consumeInteger(e,t){if(!u(e[t]))throw new Error(\"Invalid integer.\");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if(\"0\"===e[t])return t+1;if(!u(e[t]))throw new Error(\"Invalid TTL.\");t+=1;for(let i=0;i<2&&a(e[t]);i++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,l)}consumeTime(e,t){let i=t;if(\"0\"===e[i])return i+1;for(u(e[i])&&(i+=1);a(e[i]);)i++;if(i-t<10)throw new Error(\"Invalid time\");return i}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let i=t;return i=this.consumeOneOrMore(e,i,a),p(e[i])?i+1:i}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error(\"Invalid repeat interval\");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,i){for(let n=0;n<i.length;n++){if(t+n>=e.length)throw new Error(\"consume exceeding value length\");if(e[t+n]!==i[n])throw new Error(\"consume \".concat(i,\" failed at \").concat(n))}return t+i.length}consumeTill(e,t,i){let n=t;for(;n<e.length&&(\"string\"!=typeof i||e[n]!==i)&&(\"function\"!=typeof i||!i(e[n]));)n++;return n}}class C extends R{constructor(){super(),g(this,\"records\",[]),g(this,\"currentLine\",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!jp(e).call(e))).map(this.parseLine),this.currentLine=0;const i=this.parseVersion(),n=this.parseOrigin(),r=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),d=this.parseConnection(),l=this.parseBandWidth(),u=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),_=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error(\"parsing failed, non exhaustive sdp lines.\");return{version:i,origin:n,sessionName:r,information:o,uri:s,emails:a,phones:c,connection:d,bandwidths:l,timeFields:u,key:h,attributes:p,mediaDescriptions:_}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error(\"Record doesn't exit.\");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===n)return\"\\r\"===e[t-1]?r:n;throw new Error(\"Invalid newline character.\")}parseLine(e,t){if(e.length<2)throw new Error(\"Invalid sdp line, sdp line should be of form <type>=<value>.\");const i=e[0];if(\"=\"!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an \"=\" sign.');return{type:i,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new v;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(t,(e=>l(e)&&\":\"!==e)),_cur:0};\":\"===t.value[t.cur]&&(t.cur+=1,i.attValue=this.extractOneOrMore(t,_)),e.parse(i),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new y(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(e,(e=>l(e)&&\":\"!==e)),_cur:0};\":\"===e.value[e.cur]&&(e.cur+=1,i.attValue=this.extractOneOrMore(e,_)),t.parse(i),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if(\"prompt\"===e.value||\"clear:\"===e.value||\"base64:\"===e.value||\"uri:\"===e.value)return e.value;throw this.currentLine++,new Error(\"Invalid key.\")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const i=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let n=!1;\"-\"===e.value[e.cur]&&(n=!0,e.cur+=1);const r=this.extract(e,this.consumeTypedTime);t.push({time:i,typedTime:r,back:n})}catch(e){break}if(0===t.length)throw new Error(\"Invalid zone adjustments\");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const i=this.extract(t,this.consumeRepeatInterval),n=this.parseTypedTime(t);e.push({repeatInterval:i,typedTimes:n}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error(\"Invalid typed time.\");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const i=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:i}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const i=this.extractOneOrMore(t,l);if(\":\"!==t.value[t.cur])throw new Error(\"Invalid bandwidth field.\");t.cur++;const n=this.extractOneOrMore(t,a);e.push({bwtype:i,bandwidth:n}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error(\"first sdp record must be version\");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, \"v='.concat(e.value,'\"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error(\"second line of sdp must be origin\");const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:i,sessVersion:n,nettype:r,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:i,address:n}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let i=this.extract(e,this.consumePort);\"/\"===e.value[e.cur]&&(e.cur+=1,i+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const n=[];for(n.push(this.extract(e,this.consumeToken));\"/\"===e.value[e.cur];)e.cur+=1,n.push(this.extract(e,this.consumeToken));if(0===n.length)throw new Error(\"Invalid proto\");const r=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:i,protos:n,fmts:r}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),i=this.parseRepeat(),n=this.parseZone();e.push({time:t,repeats:i,zones:n})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),i=this.parseInformation(),n=this.parseConnections(),r=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:i,connections:n,bandwidths:r,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error(\"Invalid fmts\");return t}extract(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];const o=t.call(this,e.value,e.cur,...n),s=e.value.slice(e.cur,o);return e.cur=o,s}extractOneOrMore(e,t){const i=this.consumeOneOrMore(e.value,e.cur,t),n=e.value.slice(e.cur,i);return e.cur=i,n}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error(\"Invalid space at \".concat(e.cur,\".\"));e.cur+=1}}class I extends R{constructor(){super(...arguments),g(this,\"attributes\",void 0),g(this,\"digested\",!1)}extractOneOrMore(e,t,i){const n=this.consumeOneOrMore(e.attValue,e._cur,t),r=e.attValue.slice(e._cur,n),[o,s]=i||[];if(\"number\"==typeof o&&r.length<o)throw new Error(\"error in length, should be more or equal than \".concat(o,\" characters.\"));if(\"number\"==typeof s&&r.length>s)throw new Error(\"error in length, should be less or equal than \".concat(s,\" characters.\"));return e._cur=n,r}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error(\"Invalid space at \".concat(e._cur,\".\"));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error(\"Nothing to extract from attValue.\");for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];const o=t.call(this,e.attValue,e._cur,...n),s=e.attValue.slice(e._cur,o);return e._cur=o,s}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let i=0;i<t.length;i++)if(t[i]!==e.attValue[e._cur+i])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error(\"Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'\");this.attributes.iceUfrag=this.extractOneOrMore(e,E,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error(\"Invalid ice-pwd, should be only a single line if 'a=ice-pwd'\");this.attributes.icePwd=this.extractOneOrMore(e,E,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error(\"Invalid ice-options, should be only one 'ice-options' line\");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,E));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:i})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let i;\"/\"===this.peekChar(e)&&(this.extract(e,this.consume,\"/\"),i=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o),r=S(S({entry:parseInt(t,10)},i&&{direction:i}),{},{extensionName:n});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),r.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(r)}parseSetup(e){if(this.attributes.setup)throw new Error(\"must only be one single 'a=setup' line.\");const t=this.extract(e,this.consumeTill);if(\"active\"!==t&&\"passive\"!==t&&\"actpass\"!==t&&\"holdconn\"!==t)throw new Error(\"role must be one of 'active', 'passive', 'actpass', 'holdconn'.\");this.attributes.setup=t}}class v extends I{constructor(){super(...arguments),g(this,\"attributes\",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error(\"already digested\");try{switch(e.attField){case\"group\":this.parseGroup(e);break;case\"ice-lite\":this.parseIceLite();break;case\"ice-ufrag\":this.parseIceUfrag(e);break;case\"ice-pwd\":this.parseIcePwd(e);break;case\"ice-options\":this.parseIceOptions(e);break;case\"fingerprint\":this.parseFingerprint(e);break;case\"setup\":this.parseSetup(e);break;case\"tls-id\":this.parseTlsId(e);break;case\"identity\":this.parseIdentity(e);break;case\"extmap\":this.parseExtmap(e);break;case\"msid-semantic\":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error(\"parsing session attribute \".concat(e.attField,' error, \"a=').concat(e.attField,\":\").concat(e.attValue,'\"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error(\"attribute parsing error\")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),i.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:i})}parseIceLite(){if(this.attributes.iceLite)throw new Error(\"Invalid ice-lite, should be only a single line of 'a=ice-lite'\");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error(\"must be only one tld-id line\");this.attributes.tlsId=this.extractOneOrMore(e,m)}parseIdentity(e){const t=this.extractOneOrMore(e,f),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,\"=\");const n=this.extractOneOrMore(e,(e=>e!==o&&_(e)));i.push({name:t,value:n})}this.attributes.identities.push({assertionValue:t,extensions:i})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if(\"*\"===this.peekChar(e)){this.extract(e,this.consume,\"*\"),t.applyForAll=!0;break}{const i=this.extract(e,this.consumeTill,o);t.identifierList.push(i)}}this.attributes.msidSemantic=t}}class y extends I{constructor(e){super(),g(this,\"attributes\",void 0),-1!==e.protos.indexOf(\"RTP\")||e.protos.indexOf(\"rtp\"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error(\"already digested\");try{switch(e.attField){case\"extmap\":this.parseExtmap(e);break;case\"setup\":this.parseSetup(e);break;case\"ice-ufrag\":this.parseIceUfrag(e);break;case\"ice-pwd\":this.parseIcePwd(e);break;case\"ice-options\":this.parseIceOptions(e);break;case\"candidate\":this.parseCandidate(e);break;case\"remote-candidate\":this.parseRemoteCandidate(e);break;case\"end-of-candidates\":this.parseEndOfCandidates();break;case\"fingerprint\":this.parseFingerprint(e);break;case\"rtpmap\":this.parseRtpmap(e);break;case\"ptime\":this.parsePtime(e);break;case\"maxptime\":this.parseMaxPtime(e);break;case\"sendrecv\":case\"recvonly\":case\"sendonly\":case\"inactive\":this.parseDirection(e);break;case\"ssrc\":this.parseSSRC(e);break;case\"fmtp\":this.parseFmtp(e);break;case\"rtcp-fb\":this.parseRtcpFb(e);break;case\"rtcp-mux\":this.parseRTCPMux();break;case\"rtcp-mux-only\":this.parseRTCPMuxOnly();break;case\"rtcp-rsize\":this.parseRTCPRsize();break;case\"rtcp\":this.parseRTCP(e);break;case\"mid\":this.parseMid(e);break;case\"msid\":this.parseMsid(e);break;case\"imageattr\":this.parseImageAttr(e);break;case\"rid\":this.parseRid(e);break;case\"simulcast\":this.parseSimulcast(e);break;case\"sctp-port\":this.parseSctpPort(e);break;case\"max-message-size\":this.parseMaxMessageSize(e);break;case\"ssrc-group\":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error(\"parsing media attribute \".concat(e.attField,' error, \"a=').concat(e.attField,\":\").concat(e.attValue,'\"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error(\"attribute parsing error\")}parseCandidate(e){const t=this.extractOneOrMore(e,E,[1,32]);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const r=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const d=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,\"typ\"),this.consumeAttributeSpace(e);const l={foundation:t,componentId:i,transport:n,priority:r,connectionAddress:s,port:d,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e,\" raddr\")&&(this.extract(e,this.consume,\" raddr\"),this.consumeAttributeSpace(e),l.relAddr=this.extract(e,this.consumeAddress)),this.peek(e,\" rport\")&&(this.extract(e,this.consume,\" rport\"),this.consumeAttributeSpace(e),l.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),l.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(l)}parseRemoteCandidate(e){const t=[];for(;;){const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumePort);t.push({componentId:i,connectionAddress:n,port:r});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error(\"must be only one line of end-of-candidates\");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,\"/\");this.extract(e,this.consume,\"/\");const n={encodingName:i,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||\"/\"!==this.peekChar(e)||(this.extract(e,this.consume,\"/\"),n.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const r=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));r?r.rtpMap=n:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:n,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error(\"must be only one line of ptime\");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error(\"must be only one line of ptime\");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error(\"must be only one line of direction info\");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,\":\");let n;\":\"===this.peekChar(e)&&(this.extract(e,this.consume,\":\"),n=this.extract(e,this.consumeTill));const r=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));r?r.attributes[i]=n:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[i]:n}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill),n={};i.split(\";\").forEach((e=>{let[t,i]=e.split(\"=\");t=jp(t).call(t);const r=\"string\"==typeof i?jp(i).call(i):null;\"string\"==typeof t&&t.length>0&&(n[t]=r)}));const r=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));r?r.fmtp={parameters:n}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:n}})}parseFmtParameters(e){const t={},i=this.extract(e,this.consumeTill,\"=\");e._cur++;const n=this.extract(e,this.consumeTill,\";\");for(t[i]=n;\";\"===e.attValue[e._cur];){const i=this.extract(e,this.consumeTill,\"=\");e._cur++;const n=this.extract(e,this.consumeTill,\";\");t[i]=n}return t}parseRtcpFb(e){let t=\"\";t=\"*\"===this.peekChar(e)?this.extract(e,this.consume,\"*\"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,o);let n;if(\"trr-int\"===i)n={type:i,interval:this.extract(e,this.consumeTill)};else{const t={type:i};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),n=t}if(\"*\"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error(\"must be single line of rtcp-mux\");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error(\"must be single line of rtcp-only\");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error(\"must be single line of rtcp-rsize\");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error(\"must be single line of rtcp\");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,l,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,l,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>h(e)||a(e)||\"_\"===e||\"-\"===e));this.consumeAttributeSpace(e);const i={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,\"pt=\")){this.extract(e,this.consume,\"pt=\");const t=[];for(;;){const i=this.extract(e,this.consumeToken);t.push(i);try{this.extract(e,this.consume,\",\")}catch(e){break}}i.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case\"depend\":{const n={type:t,rids:this.extract(e,this.consume,\"=\").split(\",\")};i.params.push(n);break}default:{const n={type:t};\"=\"===this.peekChar(e)&&(this.extract(e,this.consume,\"=\"),n.val=this.extract(e,this.consumeTill,\";\")),i.params.push(n)}}try{this.extract(e,this.consume,\";\")}catch(e){break}}}this.attributes.rids.push(i)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error(\"must be single line of simulcast\");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);i.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:i})}}function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class b{constructor(){A(this,\"eol\",r)}print(e,t){let i=\"\";return t&&(this.eol=t),i+=this.printVersion(e.version),i+=this.printOrigin(e.origin),i+=this.printSessionName(e.sessionName),i+=this.printInformation(e.information),i+=this.printUri(e.uri),i+=this.printEmail(e.emails),i+=this.printPhone(e.phones),i+=this.printConnection(e.connection),i+=this.printBandwidth(e.bandwidths),i+=this.printTimeFields(e.timeFields),i+=this.printKey(e.key),i+=this.printSessionAttributes(e.attributes),i+=this.printMediaDescription(e.mediaDescriptions),i}printVersion(e){return\"v=\".concat(e).concat(this.eol)}printOrigin(e){return\"o=\".concat(e.username,\" \").concat(e.sessId,\" \").concat(e.sessVersion,\" \").concat(e.nettype,\" \").concat(e.addrtype,\" \").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?\"s=\".concat(e).concat(this.eol):\"\"}printInformation(e){return e?\"i=\".concat(e).concat(this.eol):\"\"}printUri(e){return e?\"u=\".concat(e).concat(this.eol):\"\"}printEmail(e){let t=\"\";for(const i of e)t+=\"e=\".concat(i).concat(this.eol);return t}printPhone(e){let t=\"\";for(const i of e)t+=\"e=\".concat(i).concat(this.eol);return t}printConnection(e){return e?\"c=\".concat(e.nettype,\" \").concat(e.addrtype,\" \").concat(e.address).concat(this.eol):\"\"}printBandwidth(e){let t=\"\";for(const i of e)t+=\"b=\".concat(i.bwtype,\":\").concat(i.bandwidth).concat(this.eol);return t}printTimeFields(e){let t=\"\";for(const i of e){t+=\"t=\".concat(i.time.startTime,\" \").concat(i.time.startTime).concat(this.eol);for(const e of i.repeats)t+=\"r=\".concat(e.repeatInterval,\" \").concat(e.typedTimes.join(\" \")).concat(this.eol);i.zoneAdjustments&&(t+=\"z=\",t+=\"z=\".concat(i.zoneAdjustments.map((e=>\"\".concat(e.time,\" \").concat(e.back?\"-\":\"\",\" \").concat(e.typedTime))).join(\" \")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?\"k=\".concat(e).concat(this.eol):\"\"}printAttributes(e){let t=\"\";for(const i of e)t+=\"a=\".concat(i.attField).concat(i.attValue?\":\".concat(i.attValue):\"\").concat(this.eol);return t}printMediaDescription(e){let t=\"\";for(const i of e)t+=this.printMedia(i.media),t+=this.printInformation(i.information),t+=this.printConnections(i.connections),t+=this.printBandwidth(i.bandwidths),t+=this.printKey(i.key),t+=this.printMediaAttributes(i);return t}printConnections(e){let t=\"\";for(const i of e)t+=this.printConnection(i);return t}printMedia(e){return\"m=\".concat(e.mediaType,\" \").concat(e.port,\" \").concat(e.protos.join(\"/\"),\" \").concat(e.fmts.join(\" \")).concat(this.eol)}printSessionAttributes(e){return new O(this.eol).print(e)}printMediaAttributes(e){return new N(this.eol).print(e)}}class w{constructor(e){A(this,\"eol\",void 0),this.eol=e}printIceUfrag(e){return void 0===e?\"\":\"a=ice-ufrag:\".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?\"\":\"a=ice-pwd:\".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?\"\":\"a=ice-options:\".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>\"a=fingerprint:\".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:\"\"}printExtmap(e){return e.map((e=>\"a=extmap:\".concat(e.entry).concat(e.direction?\"/\".concat(e.direction):\"\").concat(o).concat(e.extensionName).concat(e.extensionAttributes?\"\".concat(o).concat(e.extensionAttributes):\"\").concat(this.eol))).join(\"\")}printSetup(e){return void 0===e?\"\":\"a=setup:\".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>\"a=\".concat(e.attField).concat(e.attValue?\":\".concat(e.attValue):\"\").concat(this.eol))).join(\"\")}}class O extends w{print(e){let t=\"\";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t=\"\";return e.length>0&&(t+=e.map((e=>\"a=group:\".concat(e.semantic).concat(e.identificationTag.map((e=>\"\".concat(o).concat(e))).join(\"\")).concat(this.eol))).join(\"\")),t}printIceLite(e){return void 0===e?\"\":\"a=ice-lite\"+this.eol}printTlsId(e){return e?\"a=tls-id:\".concat(e).concat(this.eol):\"\"}printIdentity(e){return 0===e.length?\"\":e.map((e=>\"a=identity:\".concat(e.assertionValue).concat(e.extensions.map((e=>\"\".concat(o).concat(e.name).concat(e.value?\"=\".concat(e.value):\"\")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return\"\";let t=\"a=msid-semantic:\".concat(e.semantic);return e.applyForAll?t+=\"\".concat(o,\"*\"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>\"\".concat(o).concat(e)))),t+this.eol}}class N extends w{print(e){const t=e.attributes;let i=\"\";return i+=this.printRTCP(t.rtcp),i+=this.printIceUfrag(t.iceUfrag),i+=this.printIcePwd(t.icePwd),i+=this.printIceOptions(t.iceOptions),i+=this.printCandidates(t.candidates),i+=this.printRemoteCandidatesList(t.remoteCandidatesList),i+=this.printEndOfCandidates(t.endOfCandidates),i+=this.printFingerprints(t.fingerprints),i+=this.printSetup(t.setup),i+=this.printMid(t.mid),i+=this.printExtmap(t.extmaps),i+=this.printRTPRelated(t),i+=this.printPtime(t.ptime),i+=this.printMaxPtime(t.maxPtime),i+=this.printDirection(t.direction),i+=this.printSSRCGroups(t.ssrcGroups),i+=this.printSSRC(t.ssrcs),i+=this.printRTCPMux(t.rtcpMux),i+=this.printRTCPMuxOnly(t.rtcpMuxOnly),i+=this.printRTCPRsize(t.rtcpRsize),i+=this.printMSId(t.msids),i+=this.printImageattr(t.imageattr),i+=this.printRid(t.rids),i+=this.printSimulcast(t.simulcast),i+=this.printSCTPPort(t.sctpPort),i+=this.printMaxMessageSize(t.maxMessageSize),i+=this.printUnrecognized(t.unrecognized),i}printCandidates(e){return e.map((e=>\"a=candidate:\".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,\"typ\").concat(o).concat(e.type).concat(e.relAddr?\"\".concat(o,\"raddr\").concat(o).concat(e.relAddr):\"\").concat(e.relPort?\"\".concat(o,\"rport\").concat(o).concat(e.relPort):\"\").concat(Object.keys(e.extension).map((t=>\"\".concat(o).concat(t).concat(o).concat(e.extension[t]))).join(\"\")).concat(this.eol))).join(\"\")}printRemoteCandidatesList(e){return e.map((e=>\"a=remote-candidates:\".concat(e.join(o)).concat(this.eol))).join(\"\")}printEndOfCandidates(e){return void 0===e?\"\":\"a=end-of-candidates\"+this.eol}printRTPRelated(e){if(!e.payloads)return\"\";const t=e.payloads;let i=\"\";i+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback(\"*\",e))).join(\"\");for(const e of t)i+=this.printRtpMap(e.payloadType,e.rtpMap),i+=this.printFmtp(e.payloadType,e.fmtp),i+=e.rtcpFeedbacks.map((t=>this.printRTCPFeedback(e.payloadType,t))).join(\"\");return i}printFmtp(e,t){if(!t)return\"\";const i=Object.keys(t.parameters);return 1===i.length&&null===t.parameters[i[0]]?\"a=fmtp:\".concat(e).concat(o).concat(i[0]).concat(this.eol):\"a=fmtp:\".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>\"\".concat(e,\"=\").concat(t.parameters[e]))).join(\";\")).concat(this.eol)}printRtpMap(e,t){return t?\"a=rtpmap:\".concat(e).concat(o).concat(t.encodingName,\"/\").concat(t.clockRate).concat(t.encodingParameters?\"/\".concat(t.encodingParameters):\"\").concat(this.eol):\"\"}printRTCPFeedback(e,t){let i=\"a=rtcp-fb:\".concat(e).concat(o),n=t;return\"trr-int\"===n.type?i+=\"ttr-int\".concat(o).concat(n.interval):(i+=\"\".concat(n.type),n.parameter&&(i+=\"\".concat(o).concat(n.parameter),n.additional&&(i+=\"\".concat(o).concat(n.additional)))),i+this.eol}printPtime(e){return void 0===e?\"\":\"a=ptime:\".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?\"\":\"a=maxptime:\".concat(e).concat(this.eol)}printDirection(e){return void 0===e?\"\":\"a=\".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>\"a=ssrc:\".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?\":\".concat(e.attributes[t]):\"\").concat(this.eol))).join(\"\"))).join(\"\")}printRTCPMux(e){return void 0===e?\"\":\"a=rtcp-mux\".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?\"\":\"a=rtcp-mux-only\".concat(this.eol)}printRTCPRsize(e){return void 0===e?\"\":\"a=rtcp-rsize\".concat(this.eol)}printRTCP(e){if(void 0===e)return\"\";let t=\"a=rtcp:\".concat(e.port);return e.netType&&(t+=\"\".concat(o).concat(e.netType)),e.addressType&&(t+=\"\".concat(o).concat(e.addressType)),e.address&&(t+=\"\".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>\"a=msid:\".concat(e.id).concat(e.appdata?\"\".concat(o).concat(e.appdata):\"\").concat(this.eol))).join(\"\")}printImageattr(e){return e.map((e=>\"a=imageattr:\".concat(e).concat(this.eol))).join(\"\")}printRid(e){return e.map((e=>{let t=\"a=rid:\".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+=\"\".concat(o,\"pt=\").concat(e.payloads.join(\",\"))),e.params.length>0&&(t+=\"\".concat(o).concat(e.params.map((e=>\"depend\"===e.type?\"depend=\".concat(e.rids.join(\",\")):\"\".concat(e.type,\"=\").concat(e.val))).join(\";\"))),t+this.eol})).join(\"\")}printSimulcast(e){return void 0===e?\"\":\"a=simulcast:\".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?\"\":\"a=sctp-port:\".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?\"\":\"a=max-message-size:\".concat(e).concat(this.eol)}printMid(e){return void 0===e?\"\":\"a=mid:\".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>\"a=ssrc-group:\".concat(e.semantic).concat(e.ssrcIds.map((e=>\"\".concat(o).concat(e.toString(10)))).join(\"\")).concat(this.eol))).join(\"\")}}function D(e){return(new C).parse(e)}function P(e,t){return(new b).print(e,t)}}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i(8)})();var CM=RM.exports;function IM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dy(\"SVC_MODE\");if(Dy(\"ENABLE_SVC\"))return function(e){return e in ob}(e)?e:ob.L1T3}function vM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yM(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vM(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vM(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function AM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;const{filterRTX:r,filterVideoFec:o,filterAudioFec:s,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:d}=i;let l=[],u=[],h=[],p=[],_=!1,E=!1;if(CM.parse(e).mediaDescriptions.forEach((e=>{n&&n!==e.attributes.direction||(\"video\"!==e.media.mediaType||_||(u=e.attributes.payloads,p=e.attributes.extmaps,_=!0),\"audio\"!==e.media.mediaType||E||(l=e.attributes.payloads,h=e.attributes.extmaps,E=!0))})),!p||0===u.length)throw new Error(\"Cannot get video capabilities from SDP.\");if(!h||0===l.length)throw new Error(\"Cannot get audio capabilities from SDP.\");if(u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:\"rrtr\"})})),l.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:\"rrtr\"})})),r&&(l=l.filter((e=>{var t;return\"rtx\"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return\"rtx\"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||\"\")}))),s&&(l=l.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||\"\")}))),a&&(null==a?void 0:a.length)>0&&(l=l.filter((e=>{var t;return Dn(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||\"\")}))),c&&(null==c?void 0:c.length)>0){const e=u.filter((e=>{var t;return Dn(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||\"\")}));u=e.concat(r?[]:HM(e,u))}const m=Dy(\"UNSUPPORTED_VIDEO_CODEC\");return m&&m.length>0&&(u=u.filter((e=>!(e.rtpMap&&Dn(m).call(m,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:l,videoCodecs:u,audioExtensions:h,videoExtensions:p}}function bM(e){const t=CM.parse(e);let i,n;for(const e of t.mediaDescriptions){if(!i){const t=e.attributes.iceUfrag,n=e.attributes.icePwd;if(!t||!n)throw new Error(\"Cannot get iceUfrag or icePwd from SDP.\");i={iceUfrag:t,icePwd:n}}if(!n){const t=e.attributes.fingerprints;t.length>0&&(n={fingerprints:t})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!i)throw new Error(\"Cannot get iceParameters or dtlsParameters from SDP.\");return{iceParameters:i,dtlsParameters:n}}function wM(e,t){const i=[],n=e.attributes.ssrcGroups.filter((e=>\"FID\"===e.semantic)),r=e.attributes.ssrcGroups.find((e=>\"SIM\"===e.semantic)),o=e.attributes.ssrcs;if(r)r.ssrcIds.forEach((e=>{var r;const o=null===(r=n.find((t=>t.ssrcIds[0]===e)))||void 0===r?void 0:r.ssrcIds[1];i.push({ssrcId:e,rtx:t?o:void 0})}));else if(n.length>0){const e=n[0].ssrcIds[0],r=n[0].ssrcIds[1];i.push({ssrcId:e,rtx:t?r:void 0})}else{if(0===o.length)throw new Error(\"No ssrcs found on local media description.\");i.push({ssrcId:o[0].ssrcId})}return i}function OM(e,t,i){const{cname:n}=e;let r;t?r=NM(t):(r=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:\"1\",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}))),Qy.debug(\"Using candidates from gateway.\"));const o={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},s={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let a;switch(e.dtlsParameters.role){case\"server\":a=\"passive\";break;case\"client\":a=\"active\";break;case\"auto\":a=\"actpass\"}const c=jM(e.rtpCapabilities),d=[];return Array.isArray(i)&&i.length>0&&i.forEach((e=>{d.push({kind:Yb.VIDEO,ssrcId:e.v,rtx:e.v_rtx,mslabel:\"\".concat(e.v,\"_\").concat(e.a)},{kind:Yb.AUDIO,ssrcId:e.a,mslabel:\"\".concat(e.v,\"_\").concat(e.a)})})),{dtlsParameters:o,iceParameters:s,candidates:r,rtpCapabilities:c,setup:a,cname:n,preSSRCs:d}}function NM(e){let t=[];return e.ip&&\"number\"==typeof e.port&&(t=[{foundation:\"udpcandidate\",componentId:\"1\",transport:\"udp\",priority:\"2103266323\",connectionAddress:e.ip,port:e.port.toString(),type:\"host\",extension:{}}],Qy.debug(\"Using remote candidate from AP \".concat(e.ip,\":\").concat(e.port)),e.ip6&&(t.push({foundation:\"udpcandidate\",componentId:\"1\",transport:\"udp\",priority:\"2103266323\",connectionAddress:e.ip6,port:e.port.toString(),type:\"host\",extension:{}}),Qy.debug(\"Using IPV6 remote candidate from AP \".concat(e.ip6,\":\").concat(e.port)))),t}function DM(e,t,i){const n=[],r=[];return e.forEach((e=>{let{ssrcId:o,rtx:s}=e;const a=ey(8,\"track-\"),c={ssrcId:o,attributes:yM({label:a,mslabel:i=i||ey(10,\"\"),msid:\"\".concat(i,\" \").concat(a)},t&&{cname:t})};if(n.push(c),void 0!==s){const e={ssrcId:s,attributes:yM({label:a,mslabel:i,msid:\"\".concat(i,\" \").concat(a)},t&&{cname:t})};n.push(e),r.push({semantic:\"FID\",ssrcIds:[o,s]})}})),e.length>1&&r.push({semantic:\"SIM\",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:n,ssrcGroups:r}}function PM(e,t){t instanceof tk&&e.attributes.payloads.forEach((e=>{var i;const n=null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase();if(!n||-1===[\"opus\",\"pcmu\",\"pcma\",\"g722\"].indexOf(n))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime=\"10\",e.fmtp.parameters.useinbandfec=\"1\";const r=t._encoderConfig;r&&\"pcmu\"!==n&&\"pcma\"!==n&&\"g722\"!==n&&(r.bitrate&&!kI()&&(e.fmtp.parameters.maxaveragebitrate=\"\".concat(Math.floor(1e3*r.bitrate))),r.sampleRate&&(e.fmtp.parameters.maxplaybackrate=\"\".concat(r.sampleRate),e.fmtp.parameters[\"sprop-maxcapturerate\"]=\"\".concat(r.sampleRate)),r.stereo&&(e.fmtp.parameters.stereo=\"1\",e.fmtp.parameters[\"sprop-stereo\"]=\"1\"))}))}function LM(e){const t=e.attributes.unrecognized.findIndex((e=>\"x-google-flag\"===e.attField&&\"conference\"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function kM(e,t){var i;if(!(t instanceof Hk&&t._encoderConfig&&-1===t._hints.indexOf(eP.SCREEN_TRACK)))return;const n=t._encoderConfig;MD().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,i;Dn(t=[\"h264\",\"h265\",\"vp8\",\"vp9\",\"av1\"]).call(t,(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||\"\")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters[\"x-google-min-bitrate\"]=\"\".concat(n.bitrateMin))})),MD().supportMinBitrate&&!Dn(i=t._hints).call(i,eP.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,i;Dn(t=[\"h264\",\"h265\",\"vp8\",\"vp9\",\"av1\"]).call(t,(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||\"\")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters[\"x-google-start-bitrate\"]=\"\".concat(Dy(\"X_GOOGLE_START_BITRATE\")||Math.floor(n.bitrateMax)))}))}function MM(e){if(\"video\"!==e.media.mediaType)return;const t=AI();if(t.name!==CI.SAFARI&&t.os!==RI.IOS)return;const i=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==i&&e.attributes.extmaps.splice(i,1)}function UM(e,t,i){if(!t)return;let n,r;if(\"video\"===e.media.mediaType?(n=i.videoExtensions,r=i.videoCodecs):(n=i.audioExtensions,r=i.audioCodecs),!0===t.twcc){const t=n.find((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName));if(t){e.attributes.extmaps.find((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"});const i=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>\"transport-cc\"===e.type))))))}(r,e.attributes.payloads);i.forEach((e=>{e.rtcpFeedbacks.find((e=>\"transport-cc\"===e.type))||e.rtcpFeedbacks.push({type:\"transport-cc\"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>\"transport-cc\"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=n.find((e=>\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"===e.extensionName));if(t){e.attributes.extmaps.find((e=>\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"});const i=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>\"goog-remb\"===e.type))))))}(r,e.attributes.payloads);i.forEach((e=>{e.rtcpFeedbacks.find((e=>\"goog-remb\"===e.type))||e.rtcpFeedbacks.push({type:\"goog-remb\"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>\"goog-remb\"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function xM(e,t,i){if(kI())return;if(\"video\"!==e.media.mediaType)return;if(!(t instanceof Hk))return;if(\"vp9\"!==i&&\"vp8\"!==i)return;if(\"vp8\"===i&&!Dy(\"SIMULCAST\"))return;if(\"vp9\"===i&&Dy(\"ENABLE_SVC\"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const n=\"vp8\"===i?2:t._scalabilityMode.numSpatialLayers,r=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>\"FID\"===e.semantic&&e.ssrcIds[0]===r.ssrcId)),s={semantic:\"SIM\",ssrcIds:[r.ssrcId]};for(let t=1;t<n;t++)e.attributes.ssrcs.push({ssrcId:r.ssrcId+t,attributes:Gv(r.attributes)}),s.ssrcIds.push(r.ssrcId+t),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+t,attributes:Gv(r.attributes)}),e.attributes.ssrcGroups.push({semantic:\"FID\",ssrcIds:[r.ssrcId+t,o.ssrcIds[1]+t]}));e.attributes.ssrcGroups.unshift(s)}async function VM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new RTCPeerConnection;i.addTransceiver(\"video\",{direction:\"sendonly\"}),i.addTransceiver(\"audio\",{direction:\"sendonly\"}),i.addTransceiver(\"video\",{direction:\"recvonly\"}),i.addTransceiver(\"audio\",{direction:\"recvonly\"});const n=(await i.createOffer()).sdp,{send:r,recv:o,sendrecv:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n=AM(i,e,t,\"sendonly\"),r=AM(i,e,t,\"recvonly\"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(BM(n,r,\"videoExtensions\",o,s,a),BM(n,r,\"videoCodecs\",o,s,a),BM(n,r,\"audioExtensions\",o,s,a),BM(n,r,\"audioCodecs\",o,s,a),Dy(\"RAISE_H264_BASELINE_PRIORITY\")){const e=a.videoCodecs.findIndex((e=>{var t,i;return\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&\"42001f\"===(null===(i=e.fmtp)||void 0===i?void 0:i.parameters[\"profile-level-id\"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){Qy.debug(\"raising H264 baseline profile priority\");const i=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,i)}-1!==t&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,i;return!(\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&\"42001f\"!==(null===(i=e.fmtp)||void 0===i?void 0:i.parameters[\"profile-level-id\"]))}))),-1!==t&&Dy(\"FILTER_SEND_H264_BASELINE\")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,i;return!(\"h264\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&\"42001f\"!==(null===(i=e.fmtp)||void 0===i?void 0:i.parameters[\"profile-level-id\"]))})))}}return{send:o,recv:s,sendrecv:a}}(e,t,n);try{i.close()}catch(e){}return{send:r,recv:o,sendrecv:s}}function FM(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=AM(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},\"recvonly\"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(BM(e,t,\"videoExtensions\",i,n,r),BM(e,t,\"videoCodecs\",i,n,r),BM(e,t,\"audioExtensions\",i,n,r),BM(e,t,\"audioCodecs\",i,n,r),Dy(\"RAISE_H264_BASELINE_PRIORITY\")){const e=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"===e.fmtp.parameters[\"profile-level-id\"]));if(-1!==e){const t=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){Qy.debug(\"raising H264 baseline profile priority\");const i=r.videoCodecs[e];r.videoCodecs.splice(e,1),r.videoCodecs.splice(t,0,i)}-1!==t&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"!==e.fmtp.parameters[\"profile-level-id\"]))))}}return{send:i,recv:n,sendrecv:r}}function BM(e,t,i,n,r,o){if(\"videoExtensions\"===i||\"audioExtensions\"===i){const s=[];return e[i].forEach((e=>{t[i].some(((t,i)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(i),!0}))?o[i].push(e):n[i].push(e)})),void t[i].forEach(((e,t)=>{-1===s.indexOf(t)&&r[i].push(e)}))}if(\"videoCodecs\"===i||\"audioCodecs\"===i){const s=[];return e[i].forEach((e=>{t[i].some(((t,i)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(i),!0}))?o[i].push(e):n[i].push(e)})),void t[i].forEach(((e,t)=>{-1===s.indexOf(t)&&r[i].push(e)}))}}function jM(e){const{send:t,recv:i,sendrecv:n}=e;if(!n){if(!t||!i)throw new Error(\"cannot merge rtp capabilities because one of send or recv is empty!\");return{send:t,recv:i}}let r,o;return t?(r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r.audioCodecs=[...t.audioCodecs,...n.audioCodecs],r.videoCodecs=[...t.videoCodecs,...n.videoCodecs],r.audioExtensions=[...t.audioExtensions,...n.audioExtensions],r.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):r=n,i?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...i.audioCodecs,...n.audioCodecs],o.videoCodecs=[...i.videoCodecs,...n.videoCodecs],o.audioExtensions=[...i.audioExtensions,...n.audioExtensions],o.videoExtensions=[...i.videoExtensions,...n.videoExtensions]):o=n,{send:r,recv:o}}function GM(e){if(\"audio\"!==e.media.mediaType)return;e.attributes.payloads.filter((e=>{var t;return\"opus\"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo=\"1\",e.fmtp.parameters[\"sprop-stereo\"]=\"1\"}))}function WM(e,t,i,n){let r=[];if(e===Yb.VIDEO){if(Dy(\"H264_PROFILE_LEVEL_ID\")&&\"h264\"===n&&(r=t.videoCodecs.filter((e=>{var t;return Dn(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(t,n)&&e&&e.fmtp&&e.fmtp.parameters[\"profile-level-id\"]===Dy(\"H264_PROFILE_LEVEL_ID\")}))),!Array.isArray(r)||0===r.length){let e=[];const o=[],s=[],a=[];if(i.videoCodecs.forEach((t=>{const i=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||\"\";Dn(i).call(i,n)?e.push(t):Dn(i).call(i,\"vp9\")?o.push(t):Dn(i).call(i,\"vp8\")?s.push(t):Dn(i).call(i,\"h264\")&&a.push(t)})),0===e.length){let t=\"\";0!==o.length?(e=o,t=\"vp9\"):0!==s.length?(e=s,t=\"vp8\"):0!==a.length&&(e=a,t=\"h264\"),Qy.warning(\"codec \".concat(n,\" not included in rtpCapabilities, fallback to default payloads: \").concat(t))}0!==e.length&&(r=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(0===r.length&&(Qy.warning(\"codec \".concat(n,\" not included in rtpCapabilities, fallback to default payloads: \").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),r=t.videoCodecs),Dy(\"USE_PUB_RTX\")||Dy(\"USE_SUB_RTX\")){const e=HM(r,t.videoCodecs);r=[...r,...e]}}else r=t.audioCodecs.filter((e=>{var t;return Dn(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(t,n)})),0===r.length&&(Qy.warning(\"codec \".concat(n,\" not included in rtpCapabilities, fallback to opus\")),r=t.audioCodecs.filter((e=>{var t;return Dn(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(t,\"opus\")})));return r}function HM(e,t){const i=e.map((e=>e.payloadType.toString()));return t.filter((e=>e.rtpMap&&\"rtx\"===e.rtpMap.encodingName&&e.fmtp&&e.fmtp.parameters.apt&&Dn(i).call(i,e.fmtp&&e.fmtp.parameters.apt)))}async function KM(e,t,i){const n=t.toString(),r=qM(n,\"offer\",\"remote\",\"exchangeSDP\");await e.setRemoteDescription({type:\"offer\",sdp:n});const o=await e.createAnswer();if(!o.sdp)throw new Error(\"cannot get answer sdp\");let s=o.sdp;s=YM(s,i||{}),null==r||r(s||\"\"),await e.setLocalDescription({type:\"answer\",sdp:s})}function YM(e,t,i){const n=CM.parse(e),{useXR:r}=t;return n.mediaDescriptions.forEach((e=>{var t;e.attributes.mid&&(Array.isArray(i)&&!Dn(i).call(i,e.attributes.mid)||(\"audio\"===e.media.mediaType&&GM(e),r&&Dn(t=[\"audio\",\"video\"]).call(t,e.media.mediaType)&&e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>\"rrtr\"===e.type))&&e.rtcpFeedbacks.push({type:\"rrtr\"})}))))})),CM.print(n)}function qM(e,t,i,n){if(Dy(\"SDP_LOGGING\"))return Qy.upload(\"exchanging \".concat(i,\" \").concat(t,\" SDP during P2PConnection.\").concat(n,\"\\n\"),e),\"offer\"===t?e=>{qM(e,\"answer\",\"local\"===i?\"remote\":\"local\",n)}:void 0}function zM(e,t){return typeof Dy(e)===t?Dy(e):void 0}function JM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function XM(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?JM(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JM(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const QM=new Map;class ZM extends Sv{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,\"DISCONNECTED\"===e&&this._disconnectedReason?this.emit(Ub.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Ub.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){Qy.debug(\"[\".concat(this.store.clientId,\"] set joinGatewayStartTime at \").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),og(this,\"store\",void 0),og(this,\"joinInfo\",void 0),og(this,\"key\",void 0),og(this,\"ntpOffset\",0),og(this,\"signal\",void 0),og(this,\"role\",void 0),og(this,\"inChannelInfo\",{joinAt:null,duration:0}),og(this,\"spec\",void 0),og(this,\"_state\",\"DISCONNECTED\"),og(this,\"_statsCollector\",void 0),og(this,\"_disconnectedReason\",void 0),og(this,\"isSignalRecover\",!1),og(this,\"hasChangeBGPAddress\",!1),og(this,\"trafficStatsInterval\",void 0),og(this,\"networkQualityInterval\",void 0),og(this,\"_joinGatewayStartTime\",0),og(this,\"_signalTimeout\",!1),og(this,\"_clientRoleOptions\",void 0),og(this,\"_isProactiveJoin\",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new gM(XM(XM({},t),{},{retryConfig:t.websocketRetryConfig}),e):new ww(XM(XM({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||\"audience\",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,i){this.store.joinGatewayStart(),\"disabled\"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const n=Date.now();let r=QM.get(e.cname);if(r||(r=new Map,QM.set(e.cname,r)),this._isProactiveJoin=!0,r.has(e.uid)){const t=new Sb(nv.UID_CONFLICT);throw sA.joinGateway(e.sid,{lts:n,succ:!1,ec:t.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:\"0\",preload:e.preload}),this._isProactiveJoin=!1,t}r.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=n;const s=e.proxyServer;try{Qy.debug(\"[\".concat(this.store.clientId,\"] use websocket join uid \").concat(o));const t=e.gatewayAddrs.map((t=>{let{address:i}=t;const[n,r]=i.split(\":\"),o={host:n,port:r};return e.proxyServer&&(o.proxy=e.proxyServer),o}));o=(await this.signal.init(t,i)).uid,Qy.debug(\"[\".concat(this.store.clientId,\"] websocket join uid \").concat(o,\" cost \").concat(Date.now()-this.joinGatewayStartTime))}catch(t){var a;throw Qy.error(\"[\".concat(this.store.clientId,\"] User join failed\"),t.toString()),sA.joinGateway(e.sid,{lts:n,succ:!1,ec:(null===(a=t.data)||void 0===a?void 0:a.desc)||t.code,errorMsg:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:\"0\",preload:e.preload}),this._isProactiveJoin=!1,r.delete(e.uid),this.signal.close(),t}return this.state=\"CONNECTED\",this.inChannelInfo.joinAt=Date.now(),Qy.debug(\"[\".concat(this.store.clientId,\"] Connected to gateway server\")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{Qy.warning(\"[\".concat(this.store.clientId,\"] get traffic stats error\"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(Ub.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Ub.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):\"CONNECTED\"===this.state&&this._statsCollector.trafficStats?this.emit(Ub.NETWORK_QUALITY,{uplinkNetworkQuality:Uw(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Uw(this._statsCollector.trafficStats.B_dnq)}):this.emit(Ub.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(\"DISCONNECTED\"!==this.state){t!==Av.FALLBACK&&(this.state=\"DISCONNECTING\");try{e||this.signal.connectionState!==hb.CONNECTED||await function(e,t){return t===1/0?e:Gh.race([e,Zv(t)])}(this.signal.request(_b.LEAVE,void 0,!0),3e3)}catch(e){Qy.warning(\"[\".concat(this.store.clientId,\"] leave request failed, ignore\"),e)}this.signal.close(t),t!==Av.FALLBACK&&(this.state=\"DISCONNECTED\"),this.reset()}}async publish(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));const n={state:\"offer\",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:Dy(\"PUB_EXTEND\"),twcc:!!Dy(\"PUBLISH_TWCC\"),rtx:!!Dy(\"USE_PUB_RTX\")};try{return(await this.signal.request(_b.PUBLISH,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===ub.ERR_PUBLISH_REQUEST_INVALID)return Qy.warning(\"[\".concat(this.store.clientId,\"] receive publish error code, retry\"),n.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw n}}async publishDataChannel(e,t,i){var n;if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));const r={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(n=t.maxRetransmits)&&void 0!==n?n:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(_b.PUBLISH_DATASTREAM,r,!0)}catch(n){if(i&&n.data&&n.data.code===ub.ERR_PUBLISH_REQUEST_INVALID)return Qy.warning(\"[\".concat(this.store.clientId,\"] receive publish datachannels error code, retry\"),n.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw n}}async unpublish(e,t){try{if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));await this.signal.request(_b.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){Qy.warning(\"[\".concat(this.store.clientId,\"] unpublish warning: \"),e)}}async unpublishDataChannel(e){try{if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));await Gh.all(e.map((e=>this.signal.request(_b.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){Qy.warning(\"unpublish datachannels warning: \",e)}}async presubscribe(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not presubscribe when connection state is \".concat(this.state));const n={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Dy(\"SUBSCRIBE_TWCC\"),rtx:!!Dy(\"USE_SUB_RTX\")||void 0,extend:Dy(\"SUB_EXTEND\"),svc:Array.isArray(Dy(\"SVC\"))&&0!==Dy(\"SVC\").length?Dy(\"SVC\"):void 0};try{return await this.signal.request(_b.PRE_SUBSCRIBE,n,!0)}catch(n){if(i&&n.data&&n.data.code===ub.ERR_SUBSCRIBE_REQUEST_INVALID)return Qy.warning(\"[\".concat(this.store.clientId,\"] pre-subscribe error, retry\"),n.toString()),this.presubscribe(e,t,!1);throw n}}async subscribe(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not subscribe when connection state is \".concat(this.state));const n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Dy(\"SUBSCRIBE_TWCC\"),rtx:!!Dy(\"USE_SUB_RTX\"),extend:Dy(\"SUB_EXTEND\"),ssrcId:t.ssrcId,svc:Array.isArray(Dy(\"SVC\"))&&0!==Dy(\"SVC\").length?Dy(\"SVC\"):void 0};try{return(await this.signal.request(_b.SUBSCRIBE,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===ub.ERR_SUBSCRIBE_REQUEST_INVALID)return Qy.warning(\"[\".concat(this.store.clientId,\"] receiver subscribe error code, retry\"),n.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw n}}async subscribeDataChannel(e,t,i){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not subscribe datachannel when connection state is \".concat(this.state));const n={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(_b.SUBSCRIBE_DATASTREAM,n,!0)}catch(n){if(i&&n.data&&n.data.code===ub.ERR_SUBSCRIBE_REQUEST_INVALID)return Qy.warning(\"[\".concat(this.store.clientId,\"] receiver subscribe datachannel error code, retry\"),n.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw n}}async subscribeAll(e,t){if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not massSubscribe when connection state is \".concat(this.state));const i={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!Dy(\"USE_SUB_RTX\"),twcc:!!Dy(\"SUBSCRIBE_TWCC\"),svc:Array.isArray(Dy(\"SVC\"))&&0!==Dy(\"SVC\").length?Dy(\"SVC\"):void 0};try{return await this.signal.request(_b.SUBSCRIBE_STREAMS,i,!0)}catch(i){if(t&&i.data&&i.data.code===ub.ERR_SUBSCRIBE_REQUEST_INVALID)return Qy.warning(\"[\".concat(this.store.clientId,\"] receiver massSubscribe error code, retry\"),i.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw i}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,i=e.width,n=e.height,r=!0;return\"number\"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(r=!1)),\"number\"!=typeof i&&(i=i.exact||i.ideal||i.max||i.min||0,i||(r=!1)),\"number\"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,t||(r=!1)),r?{stream_type:0,width:i,height:n,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(_b.SET_VIDEO_PROFILE,t);Qy.debug(\"[\".concat(this.store.clientId,\"] encoder config is not complete, do not report to gateway\"))}async unsubscribe(e,t){try{await this.signal.request(_b.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){Qy.warning(\"[\".concat(this.store.clientId,\"] unsubscribe warning: \"),e)}}async unsubscribeDataChannel(e,t){try{if(\"CONNECTED\"!==this.state&&\"RECONNECTING\"!==this.state)throw new Sb(nv.INVALID_OPERATION,\"can not publish when connection state is \".concat(this.state));await Gh.all(e.map((e=>this.signal.request(_b.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){Qy.warning(\"unsubscribeDataChannel warning: \",e)}}async massUnsubscribe(e){try{await this.signal.request(_b.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){Qy.warning(\"[\".concat(this.store.clientId,\"] massUnsubscribeAll warning: \"),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(_b.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(_b.GATEWAY_INFO)}async renewToken(e){await this.signal.request(_b.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),\"CONNECTED\"!==this.state)return void(this.role=e);let i,n=0;\"audience\"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(i=this._clientRoleOptions.delay,n=1):n=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:n=0,await this.signal.request(_b.SET_CLIENT_ROLE,{role:e,level:n,delay:i,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(_b.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(_b.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(_b.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(_b.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(_b.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,i){if(this.signal instanceof gM)return this.signal.sendExtensionMessage(e,t,i)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),XM({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(_b.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=QM.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith(\"dc\")?e.match(/(dc\\:\\/\\/)?([^:]+):(\\d+)/):e.match(/(wss\\:\\/\\/)?([^:]+):(\\d+)/),t?{username:cA.username,password:cA.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}((\"disabled\"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||\"\");this.joinInfo.turnServer.serversFromGateway=[],e&&\"off\"!==this.joinInfo.turnServer.mode&&\"disabled\"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(XM(XM({},cA),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(\"CONNECTED\"!==this.state)return;const e=await this.signal.request(_b.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&jv((()=>{this.emit(Ub.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new Sb(nv.UNEXPECTED_ERROR,\"can not generate join message, no join info\");const t=Object.assign({},this.joinInfo.apResponse);let i=Dy(\"REPORT_APP_SCENARIO\");if(\"string\"!=typeof i)try{i=JSON.stringify(i)}catch(e){i=void 0}i&&i.length>128&&(i=void 0);const n=!(kI()||xI(87)||xD())&&(\"boolean\"==typeof Dy(\"ENABLE_PRE_SUB\")&&Dy(\"ENABLE_PRE_SUB\")),r=!xD()&&zM(\"ENABLE_PREALLOC_PC\",\"boolean\"),o=XM({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:vy,browser:navigator.userAgent,process_id:Dy(\"PROCESS_ID\"),mode:this.store.useP2P?\"p2p\":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:Dy(\"JOIN_EXTEND\"),details:{6:this.joinInfo.stringUid,cservice_map:\"proxy3\"===this.joinInfo.cloudProxyServer?\"1\":\"proxy5\"===this.joinInfo.cloudProxyServer?\"2\":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:i,attributes:{userAttributes:{enablePublishedUserList:Dy(\"ENABLE_PUBLISHED_USER_LIST\"),maxSubscription:Dy(\"MAX_SUBSCRIPTION\"),subscribeAudioFilterTopN:\"number\"==typeof Dy(\"SUBSCRIBE_AUDIO_FILTER_TOPN\")?Dy(\"SUBSCRIBE_AUDIO_FILTER_TOPN\"):void 0,enablePublishAudioFilter:\"boolean\"==typeof Dy(\"ENABLE_PUBLISH_AUDIO_FILTER\")?Dy(\"ENABLE_PUBLISH_AUDIO_FILTER\"):void 0,enableUserLicenseCheck:\"boolean\"==typeof Dy(\"ENABLE_USER_LICENSE_CHECK\")?Dy(\"ENABLE_USER_LICENSE_CHECK\"):void 0,enableRTX:!0===Dy(\"USE_PUB_RTX\")||!0===Dy(\"USE_SUB_RTX\")||void 0,disableFEC:Dy(\"DISABLE_FEC\"),enableNTPReport:!!Dy(\"ENABLE_NTP_REPORT\")||void 0,enableInstantVideo:!!Dy(\"ENABLE_INSTANT_VIDEO\")||void 0,enableFulllinkAvSync:!!Dy(\"ENABLE_FULL_LINK_AV_SYNC\")||void 0,enableDataStream2:zM(\"ENABLE_DATASTREAM_2\",\"boolean\"),enableAutFeedback:!!Dy(\"ENABLE_AUT_FEEDBACK\")||void 0,rtm2Flag:\"number\"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!Dy(\"ENABLE_USER_AUTO_REBALANCE_CHECK\"),enableXR:zM(\"USE_XR\",\"boolean\"),enableLossbasedBwe:zM(\"ENABLE_LOSSBASED_BWE\",\"boolean\"),enableAutCC:!!Dy(\"ENABLE_AUT_CC\")||void 0,enableCCFallback:zM(\"ENABLE_CC_FALLBACK\",\"boolean\"),enablePreallocPC:r,preSubNum:n?zM(\"PRE_SUB_NUM\",\"number\"):void 0,enablePubTWCC:zM(\"PUBLISH_TWCC\",\"boolean\"),enableSubTWCC:zM(\"SUBSCRIBE_TWCC\",\"boolean\"),enablePubRTX:zM(\"USE_PUB_RTX\",\"boolean\"),enableSubRTX:zM(\"USE_SUB_RTX\",\"boolean\"),enableSubSVC:Dy(\"ENABLE_SVC\")?Dy(\"ENABLE_SVC_DEFAULT_CODECS\"):Array.isArray(Dy(\"SVC\"))&&0!==Dy(\"SVC\").length?Dy(\"SVC\"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(o.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(o.aes_mode=this.joinInfo.aesmode,Dy(\"ENCRYPT_AES\")?(o.aes_secret=this.joinInfo.aespassword,o.aes_encrypt=!0):o.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(o.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(o.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(o.default_video_stream=this.joinInfo.defaultVideoStream),o}getRejoinMessage(){if(!this.joinInfo)throw new Sb(nv.UNEXPECTED_ERROR,\"can not generate rejoin message, no join info\");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(pb.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Dn(t=[\"tryNext\",\"recover\"]).call(t,e)&&this.joinInfo&&sA.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(pb.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(pb.WS_RECONNECTING,(e=>{this.joinInfo&&sA.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Dv.NETWORK_ERROR}),this.joinInfo&&(this.state=\"RECONNECTING\",sA.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:\"live\"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:\"audience\"===this.role?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(pb.WS_CLOSED,(e=>{let t;switch(e){case Av.LEAVE:t=Dv.LEAVE;break;case Av.UID_BANNED:case Av.IP_BANNED:case Av.CHANNEL_BANNED:case Av.SERVER_ERROR:t=Dv.SERVER_ERROR;break;case Av.FALLBACK:t=Dv.FALLBACK;break;case Av.LICENSE_MISSING:case Av.LICENSE_EXPIRED:case Av.LICENSE_MINUTES_EXCEEDED:case Av.LICENSE_PERIOD_INVALID:case Av.LICENSE_MULTIPLE_SDK_SERVICE:case Av.LICENSE_ILLEGAL:case Av.TOKEN_EXPIRE:t=e;break;default:t=Dv.NETWORK_ERROR}Qy.debug(\"[\".concat(this.store.clientId,\"] [signal] websocket closed, reason: \").concat(t||\"undefined -> \"+Dv.NETWORK_ERROR)),this.joinInfo&&sA.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===Av.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==Av.FALLBACK&&(this.state=\"DISCONNECTED\"),this.reset()})),this.signal.on(pb.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state=\"CONNECTED\",this.joinInfo&&(\"audience\"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(Qy.debug(\"[\".concat(this.store.clientId,\"] patch to send set client role, role: \").concat(this.role,\", mode: \").concat(this.spec.mode,\", level: \").concat(this._clientRoleOptions.level,\", delay: \").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),sA.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:\"0\",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/);if(!e)return void Qy.error(\"[\".concat(this.store.clientId,\"] set local access point after joined failed: \").concat(e));Ny(\"EVENT_REPORT_DOMAIN\",e[1]),Ny(\"EVENT_REPORT_BACKUP_DOMAIN\",e[1]),Ny(\"LOG_UPLOAD_SERVER\",\"\".concat(e[1],\":6444\"))}})),this.signal.on(mb.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(pb.REQUEST_RECOVER,((e,t,i)=>{if(!this.joinInfo)return i(new Sb(nv.UNEXPECTED_ERROR,\"gateway: can not recover, no join info\"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,kv(this,Ub.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i)})),this.signal.on(pb.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:i,dtlsParameters:n,rtpCapabilities:r}=await kv(this,Ub.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:n,rtpCapabilities:r,version:\"2\"}}))})),this.signal.on(pb.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(pb.REPORT_JOIN_GATEWAY,((e,t)=>{if(!this.joinInfo)return;let i,n=\"\";var r;e instanceof Sb?(i=(null===(r=e.data)||void 0===r?void 0:r.desc)||e.code,n=e.message):i=e;sA.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:i,errorMsg:n,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:\"0\",preload:this.joinInfo.preload}),this._isProactiveJoin=!1})),this.signal.on(pb.IS_P2P_DISCONNECTED,(e=>{e(xv(this,Ub.IS_P2P_DISCONNECTED))})),this.signal.on(pb.DISCONNECT_P2P,(()=>{this.emit(Ub.DISCONNECT_P2P)})),this.signal.on(pb.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(pb.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(pb.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(Ub.JOIN_RESPONSE,e,t)})),this.signal.on(pb.PRE_CONNECT_PC,(async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const e=this.getCurrentGatewayAddress(),t=Dy(\"FINGERPRINT\")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){const i=NM(e);this.emit(Ub.PRE_CONNECT_PC,{candidates:i,fingerprint:t})}}}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(_b.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] tryUnsubBeforeResub warning\"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(_b.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw Qy.warning(\"unsubscribe datachannel warning\",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(_b.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] tryUnpubBeforeRepub warning: \"),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(_b.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw Qy.warning(\"unpublish datastream warning: \",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(_b.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] tryMassUnsubBeforeResub warning\"),e),e}}async muteLocal(e,t){const i={action:e.find((e=>e.stream_type===Mb.Audio))?\"mute_local_audio\":\"mute_local_video\",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(_b.CONTROL,i,!0,!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] gateway muteLocal warning: \"),e),e}}async unmuteLocal(e,t){const i={action:e.find((e=>e.stream_type===Mb.Audio))?\"unmute_local_audio\":\"unmute_local_video\",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(_b.CONTROL,i,!0,!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] gateway unmuteLocal warning: \"),e),e}}async muteRemote(e,t){const i={action:e===Yb.AUDIO?\"mute_remote_audio\":\"mute_remote_video\",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(_b.CONTROL,i,!0,!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] gateway muteRemote warning: \"),e),e}}async unmuteRemote(e,t){const i={action:e===Yb.AUDIO?\"unmute_remote_audio\":\"unmute_remote_video\",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(_b.CONTROL,i,!0,!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] gateway unmuteRemote warning: \"),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(_b.RESTART_ICE,t,!0)}catch(e){throw Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.restartICE warning: \"),e),e}}reconnect(){\"CONNECTED\"===this.state&&this.signal.reconnect(void 0,Dv.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!Dy(\"GATEWAY_WSS_ADDRESS\"))return Dy(\"USE_CANDIDATE_FROM_AP_DETAIL\")&&null!==(e=this.joinInfo)&&void 0!==e&&e.apGatewayAddress?(Qy.debug(\"[\".concat(this.store.clientId,\"] use candidate from ap detail, \").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):null!==(t=this.joinInfo)&&void 0!==t&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(_b.SET_PARAMETER,{enablePublishAudioFilter:e})}}let $M=0,eU=0;function tU(e,t,i,n){return new Gh(((r,o)=>{t.timeout=t.timeout||Dy(\"HTTP_CONNECT_TIMEOUT\"),t.responseType=t.responseType||\"json\",t.data&&!i?(t.data=JSON.stringify(t.data),$M+=Xv(t.data)):i&&(t.data.size?$M+=t.data.size:t.data instanceof FormData?$M+=Qv(t.data):$M+=Xv(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers[\"Content-Type\"]=t.headers[\"Content-Type\"]||\"application/json\",t.method=\"POST\",t.url=e,EI.request(t).then((e=>{\"string\"==typeof e.data?eU+=Xv(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?eU+=e.data.byteLength:eU+=Xv(JSON.stringify(e.data)),n&&r({data:e.data,headers:e.headers}),r(e.data)})).catch((e=>{EI.isCancel(e)?o(new Sb(nv.OPERATION_ABORTED,\"cancel token canceled\")):\"ECONNABORTED\"===e.code?o(new Sb(nv.NETWORK_TIMEOUT,e.message)):e.response?o(new Sb(nv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Sb(nv.NETWORK_ERROR,e.message))}))}))}\n/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */!function(){var e;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e};var r,o=function(e){e=[\"object\"==typeof globalThis&&globalThis,e,\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof t&&t];for(var i=0;i<e.length;++i){var n=e[i];if(n&&n.Math==Math)return n}throw Error(\"Cannot find global object\")}(this);function s(e,t){if(t)e:{var i=o;e=e.split(\".\");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in i))break e;i=i[s]}(t=t(r=i[e=e[e.length-1]]))!=r&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t=\"undefined\"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}if(s(\"Symbol\",(function(e){function t(e,t){this.A=e,n(this,\"description\",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var i=\"jscomp_symbol_\"+(1e9*Math.random()>>>0)+\"_\",r=0;return function e(n){if(this instanceof e)throw new TypeError(\"Symbol is not a constructor\");return new t(i+(n||\"\")+\"_\"+r++,n)}})),s(\"Symbol.iterator\",(function(e){if(e)return e;e=Symbol(\"Symbol.iterator\");for(var t=\"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"),r=0;r<t.length;r++){var s=o[t[r]];\"function\"==typeof s&&\"function\"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(i(this))}})}return e})),\"function\"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var d;e:{var l={};try{l.__proto__={a:!0},d=l.a;break e}catch(e){}d=!1}r=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+\" is not extensible\");return e}:null}var u=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError(\"Generator is already running\");e.m=!0}function _(e,t){return e.h=3,{value:t}}function E(e){this.g=new h,this.G=e}function m(e,t,i,n){try{var r=t.call(e.g.j,i);if(!(r instanceof Object))throw new TypeError(\"Iterator result \"+r+\" is not an object\");if(!r.done)return e.g.m=!1,r;var o=r.value}catch(t){return e.g.j=null,e.g.s(t),f(e)}return e.g.j=null,n.call(e.g,o),f(e)}function f(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function T(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var i=e.g.j;return i?m(e,\"return\"in i?i.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),f(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e,t){return t=new T(new E(t)),u&&e.prototype&&u(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},E.prototype.o=function(e){return p(this.g),this.g.j?m(this,this.g.j.next,e,this.g.o):(this.g.o(e),f(this))},E.prototype.s=function(e){return p(this.g),this.g.j?m(this,this.g.j.throw,e,this.g.o):(this.g.s(e),f(this))},s(\"Array.prototype.entries\",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+=\"\");var i=0,n=!1,r={next:function(){if(!n&&i<e.length){var r=i++;return{value:t(r,e[r]),done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}})),\"undefined\"!=typeof Blob&&(\"undefined\"==typeof FormData||!FormData.prototype.keys)){var g=function(e,t){for(var i=0;i<e.length;i++)t(e[i])},R=function(e){return e.replace(/\\r?\\n|\\r/g,\"\\r\\n\")},C=function(e,t,i){return t instanceof Blob?(i=void 0!==i?String(i+\"\"):\"string\"==typeof t.name?t.name:\"blob\",t.name===i&&\"[object Blob]\"!==Object.prototype.toString.call(t)||(t=new File([t],i)),[String(e),t]):[String(e),String(t)]},I=function(e,t){if(e.length<t)throw new TypeError(t+\" argument required, but only \"+e.length+\" present.\")},v=\"object\"==typeof globalThis?globalThis:\"object\"==typeof window?window:\"object\"==typeof self?self:this,y=v.FormData,A=v.XMLHttpRequest&&v.XMLHttpRequest.prototype.send,b=v.Request&&v.fetch,w=v.navigator&&v.navigator.sendBeacon,O=v.Element&&v.Element.prototype,N=v.Symbol&&Symbol.toStringTag;N&&(Blob.prototype[N]||(Blob.prototype[N]=\"Blob\"),\"File\"in v&&!File.prototype[N]&&(File.prototype[N]=\"File\"));try{new File([],\"\")}catch(e){v.File=function(e,t,i){return e=new Blob(e,i||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(i&&void 0!==i.lastModified?new Date(i.lastModified):new Date)},toString:{value:function(){return\"[object File]\"}}}),N&&Object.defineProperty(e,N,{value:\"File\"}),e}}var D=function(e){return e.replace(/\\n/g,\"%0A\").replace(/\\r/g,\"%0D\").replace(/\"/g,\"%22\")},P=function(e){this.i=[];var t=this;e&&g(e.elements,(function(e){if(e.name&&!e.disabled&&\"submit\"!==e.type&&\"button\"!==e.type&&!e.matches(\"form fieldset[disabled] *\"))if(\"file\"===e.type){var i=e.files&&e.files.length?e.files:[new File([],\"\",{type:\"application/octet-stream\"})];g(i,(function(i){t.append(e.name,i)}))}else\"select-multiple\"===e.type||\"select-one\"===e.type?g(e.options,(function(i){!i.disabled&&i.selected&&t.append(e.name,i.value)})):\"checkbox\"===e.type||\"radio\"===e.type?e.checked&&t.append(e.name,e.value):(i=\"textarea\"===e.type?R(e.value):e.value,t.append(e.name,i))}))};if((e=P.prototype).append=function(e,t,i){I(arguments,2),this.i.push(C(e,t,i))},e.delete=function(e){I(arguments,1);var t=[];e=String(e),g(this.i,(function(i){i[0]!==e&&t.push(i)})),this.i=t},e.entries=function e(){var t,i=this;return S(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<i.i.length?e=_(e,i.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){I(arguments,1);for(var i=c(this),n=i.next();!n.done;n=i.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.call(t,r,n,this)}},e.get=function(e){I(arguments,1);var t=this.i;e=String(e);for(var i=0;i<t.length;i++)if(t[i][0]===e)return t[i][1];return null},e.getAll=function(e){I(arguments,1);var t=[];return e=String(e),g(this.i,(function(i){i[0]===e&&t.push(i[1])})),t},e.has=function(e){I(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,i,n,r,o=this;return S(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,r=c(n),_(e,r.next().value));i=t.next(),e.h=2}))},e.set=function(e,t,i){I(arguments,2),e=String(e);var n=[],r=C(e,t,i),o=!0;g(this.i,(function(t){t[0]===e?o&&(o=!n.push(r)):n.push(t)})),o&&n.push(r),this.i=n},e.values=function e(){var t,i,n,r,o=this;return S(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,(r=c(n)).next(),_(e,r.next().value));i=t.next(),e.h=2}))},P.prototype._asNative=function(){for(var e=new y,t=c(this),i=t.next();!i.done;i=t.next()){var n=c(i.value);i=n.next().value,n=n.next().value,e.append(i,n)}return e},P.prototype._blob=function(){var e=\"----formdata-polyfill-\"+Math.random(),t=[],i=\"--\"+e+'\\r\\nContent-Disposition: form-data; name=\"';return this.forEach((function(e,n){return\"string\"==typeof e?t.push(i+D(R(n))+'\"\\r\\n\\r\\n'+R(e)+\"\\r\\n\"):t.push(i+D(R(n))+'\"; filename=\"'+D(e.name)+'\"\\r\\nContent-Type: '+(e.type||\"application/octet-stream\")+\"\\r\\n\\r\\n\",e,\"\\r\\n\")})),t.push(\"--\"+e+\"--\"),new Blob(t,{type:\"multipart/form-data; boundary=\"+e})},P.prototype[Symbol.iterator]=function(){return this.entries()},P.prototype.toString=function(){return\"[object FormData]\"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),N&&(P.prototype[N]=\"FormData\"),A){var L=v.XMLHttpRequest.prototype.setRequestHeader;v.XMLHttpRequest.prototype.setRequestHeader=function(e,t){L.call(this,e,t),\"content-type\"===e.toLowerCase()&&(this.B=!0)},v.XMLHttpRequest.prototype.send=function(e){e instanceof P?(e=e._blob(),this.B||this.setRequestHeader(\"Content-Type\",e.type),A.call(this,e)):A.call(this,e)}}b&&(v.fetch=function(e,t){return t&&t.body&&t.body instanceof P&&(t.body=t.body._blob()),b.call(this,e,t)}),w&&(v.navigator.sendBeacon=function(e,t){return t instanceof P&&(t=t._asNative()),w.call(this,e,t)}),v.FormData=P}}();const iU=()=>{const e=Dy(\"AREAS\");0===e.length&&e.push(Fb.GLOBAL);return Jn(e).call(e,((e,t,i)=>{const n=nU(t);return n?0===i?n:\"\".concat(e,\",\").concat(n):e}),\"\")},nU=e=>e===Fb.OVERSEA?\"\".concat(jb.ASIA,\",\").concat(jb.EUROPE,\",\").concat(jb.AFRICA,\",\").concat(jb.NORTH_AMERICA,\",\").concat(jb.SOUTH_AMERICA,\",\").concat(jb.OCEANIA):jb[e],rU=e=>{const t={CODE:\"\",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const i=Gb[e],n=Object.keys(i);n&&n.map((e=>{\"CODE\"!==e&&(t[e]=t[e].concat(i[e]))}))})),t},oU={GLOBAL:{ASIA:[Fb.CHINA,Fb.JAPAN,Fb.INDIA,Fb.KOREA,Fb.HKMC],EUROPE:[],NORTH_AMERICA:[Fb.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},sU=Object.keys(oU[Fb.GLOBAL]),aU=[Fb.CHINA,Fb.NORTH_AMERICA,Fb.EUROPE,Fb.ASIA,Fb.JAPAN,Fb.INDIA,Fb.OCEANIA,Fb.SOUTH_AMERICA,Fb.AFRICA,Fb.KOREA,Fb.HKMC,Fb.US],cU=function(e,t){let i=[];if(Dn(e).call(e,Fb.GLOBAL)){const o=[Fb.GLOBAL,Fb.OVERSEA],s=Object.keys(Gb);if(t===Fb.GLOBAL)throw new Sb(nv.INVALID_PARAMS,\"GLOBAL is an invalid excludedArea value\");if(t===Fb.CHINA)i=[Fb.OVERSEA];else if(r=t,Dn(sU).call(sU,r)){const e=(n=t,oU[Fb.GLOBAL][n]||[]),r=[...o,t,...e];i=s.filter((e=>!Dn(r).call(r,e)))}else if(function(e){let t=!1;return sU.forEach((i=>{var n;Dn(n=oU[Fb.GLOBAL][i]).call(n,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return sU.forEach((i=>{var n;Dn(n=oU[Fb.GLOBAL][i]).call(n,e)&&(t=i)})),t}(t),n=[...o,e,t];i=s.filter((e=>!Dn(n).call(n,e)))}else i=e;i=function(e){const t=[];return aU.forEach((i=>{Dn(e).call(e,i)&&t.push(i)})),t.concat(e.filter((e=>!Dn(aU).call(aU,e))))}(i)}else i=e;var n,r;return i};function dU(e){var t,i;if(!e&&Dn(t=Dy(\"AREAS\")).call(t,Fb.EXTENSIONS))return Qy.debug(\"update area from ap : reset\"),void lU(aA,!0);if(!Dn(i=Dy(\"AREAS\")).call(i,Fb.GLOBAL)||!e)return;let n=Gb.EXTENSIONS;n&&(n={CODE:nU(Fb.EXTENSIONS),WEBCS_DOMAIN:[\"ap-web-1-\".concat(e,\".agora.io\")],WEBCS_DOMAIN_BACKUP_LIST:[\"ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],PROXY_CS:[\"proxy-ap-web-\".concat(e,\".agora.io\")],CDS_AP:[\"cds-ap-web-1-\".concat(e,\".agora.io\"),\"cds-ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],ACCOUNT_REGISTER:[\"sua-ap-web-1-\".concat(e,\".agora.io\"),\"sua-ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],UAP_AP:[\"uap-ap-web-1-\".concat(e,\".agora.io\"),\"uap-ap-web-2-\".concat(e,\".ap.sd-rtn.com\")],EVENT_REPORT_DOMAIN:[\"statscollector-1-\".concat(e,\".agora.io\")],EVENT_REPORT_BACKUP_DOMAIN:[\"statscollector-2-\".concat(e,\".agora.io\")],LOG_UPLOAD_SERVER:[\"logservice-\".concat(e,\".agora.io\")],PROXY_SERVER_TYPE3:[\"webrtc-cloud-proxy-\".concat(e,\".agora.io\")]},Qy.debug(\"update area from ap success: \".concat(e,\",config is \"),n),Ny(\"AREAS\",[Fb.EXTENSIONS],!0),Object.keys(n).map((e=>{if(\"LOG_UPLOAD_SERVER\"===e||\"EVENT_REPORT_DOMAIN\"===e||\"EVENT_REPORT_BACKUP_DOMAIN\"===e||\"PROXY_SERVER_TYPE3\"===e){Ny(e,n[e][0])}else Ny(e,n[e])})))}function lU(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=sA.reportApiInvoke(null,{name:Cv.SET_AREA,options:e,tag:Iv.TRACER});try{let n=[];if(\"string\"==typeof e&&(n=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Dn(Bb).call(Bb,e))throw new Sb(nv.INVALID_PARAMS,\"invalid area code\")})),n=e),\"[object Object]\"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:i}=e;if(!t)throw new Sb(nv.INVALID_PARAMS,\"area code is needed\");let r=t;\"string\"==typeof t&&(r=[t]),n=i?cU(r,i):r}if(!t){if(Py.AREAS){const e=new Sb(nv.PROHIBITED_OPERATION,\"setArea is prohibited because of config-distribute\");return i.onError(e),void Qy.warning(\"setArea is prohibited because of config-distribute\")}if(Dn(n).call(n,Fb.GLOBAL)&&Dy(\"AREAS\")===Fb.EXTENSIONS){const e=new Sb(nv.PROHIBITED_OPERATION,\"setArea is prohibited because of ap extensions\");return i.onError(e),void Qy.warning(\"setArea is prohibited because of ap extensions\")}}Ny(\"AREAS\",n,t);const r=rU(n);Object.keys(r).map((e=>{if(\"LOG_UPLOAD_SERVER\"===e||\"EVENT_REPORT_DOMAIN\"===e||\"EVENT_REPORT_BACKUP_DOMAIN\"===e||\"PROXY_SERVER_TYPE3\"===e){Ny(e,r[e][0])}else Ny(e,r[e])})),Qy.debug(\"set area success:\",n.join(\",\"))}catch(e){throw i.onError(e),e}i.onSuccess()}function uU(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function hU(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?uU(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uU(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let pU=1;function _U(e,t,i,n,r){pU+=1;const o={sid:i.sid,command:\"convergeAllocateEdge\",uid:\"666\",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:pU,requestId:pU,version:vy,cname:i.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,d=e[0];return my((async()=>{a=Date.now();const e=await tU(d,{data:s,cancelToken:n,headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"61\"}});if(c=Date.now()-a,0!==e.code){const t=new Sb(nv.UNEXPECTED_RESPONSE,\"live streaming ap error, code\"+e.code,{retry:!0,responseTime:c});throw Qy.error(t.toString()),t}const i=JSON.parse(e.json_body);if(200!==i.code){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"live streaming app center error, code: \".concat(i.code,\", reason: \").concat(i.reason),{code:i.code,responseTime:c});throw Qy.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"live streaming app center empty server\",{code:i.code,responseTime:c});throw Qy.error(e.toString()),e}const r=function(e,t){return{addressList:e.servers.map((e=>\"wss://\".concat(e.address.replace(/\\./g,\"-\"),\".\").concat(Dy(\"WORKER_DOMAIN\"),\":\").concat(e.wss,\"?serviceName=\").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(i,t);return Dy(\"LIVE_STREAMING_ADDRESS\")&&(r.addressList=Dy(\"LIVE_STREAMING_ADDRESS\")instanceof Array?Dy(\"LIVE_STREAMING_ADDRESS\"):[Dy(\"LIVE_STREAMING_ADDRESS\")]),hU(hU({},r),{},{responseTime:c})}),((n,r)=>(sA.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(n.addressList),firstSuccess:0===r,responseTime:c,serverIp:e[r%e.length]}),!1)),((n,r)=>(sA.apworkerEvent(i.sid,{success:!1,sc:n.data&&n.data.code||200,serviceName:t,responseTime:c,serverIp:e[r%e.length]}),!!(n.code!==nv.OPERATION_ABORTED&&n.code!==nv.UNEXPECTED_RESPONSE||n.data&&n.data.retry)&&(d=e[(r+1)%e.length],!0))),r)}let EU=1;function mU(e,t,i,n){let{url:r,areaCode:o}=e;const{clientId:s,sid:a}=t,c=Date.now();let d;const[l,u]=RU(t,o,[Ow.CHOOSE_SERVER]);let h=Vv.networkState;return my((async()=>{h&&Vv.networkState===Pv.OFFLINE&&Vv.onlineWaiter&&await Gh.race([Vv.onlineWaiter,$v(n&&n.maxRetryTimeout||_y.maxRetryTimeout)]),h=Vv.networkState;const{data:e,headers:o}=await tU(r,{data:l,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0,!0);d=\"1\"===o.http3?1:-1,sA.reportResourceTiming(r,a),TU(e,r,t,c,[Ow.CHOOSE_SERVER],d);const s=xw(e,Ow.CHOOSE_SERVER);return SU(s),Lw(s,r)}),(e=>(e&&sA.joinChooseServer(a,{lts:c,succ:!0,csAddr:r,opid:u,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[Ow.CHOOSE_SERVER].toString(),isHttp3:d}),!1)),(e=>e.code!==nv.OPERATION_ABORTED&&(e.code===nv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(sA.joinChooseServer(a,{lts:c,succ:!1,csAddr:r,serverList:null,opid:u,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[Ow.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:h}),isHttp3:d}),Qy.warning(\"[\".concat(s||\"sid-\".concat(a.slice(0,6)),\"] Choose server network error, retry\"),e),!0))),n)}function fU(e,t,i,n){let r,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),[d,l]=RU(t,s,a);let u;return my((async()=>{u&&Vv.networkState===Pv.OFFLINE&&Vv.onlineWaiter&&await Gh.race([Vv.onlineWaiter,$v(n&&n.maxRetryTimeout||_y.maxRetryTimeout)]),u=Vv.networkState;const{data:e,headers:s}=await tU(o,{data:d,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0,!0);r=\"1\"===s.http3?1:-1,sA.reportResourceTiming(o,t.sid),TU(e,o,t,c,a,r);const l=xw(e,Ow.CHOOSE_SERVER),h=xw(e,\"proxy5\"===t.cloudProxyServer?Ow.CLOUD_PROXY_5:\"proxy3\"===t.cloudProxyServer||\"proxy4\"===t.cloudProxyServer?Ow.CLOUD_PROXY:Ow.CLOUD_PROXY_FALLBACK);return SU(l),{gatewayInfo:Lw(l,o),proxyInfo:h,url:o}}),(e=>(e.gatewayInfo&&sA.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:l,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:r}),e.proxyInfo&&sA.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(\",\"),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==nv.OPERATION_ABORTED&&(e.code===nv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(sA.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:u})}),Qy.warning(\"[\".concat(t.clientId,\"] multi unilbs network error, retry\"),e),!0))),n)}const TU=(e,t,i,n,r,o)=>{const{sid:s,clientId:a,cloudProxyServer:c}=i,d=[],l=i=>{4096===i.flag?sA.joinChooseServer(s,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:i.error.message,csIp:i.error.data&&i.error.data.csIp,unilbsServerIds:r.toString(),isHttp3:o}):1048576!==i.flag&&4194304!==i.flag&&4194310!==i.flag||sA.joinWebProxyAP(s,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:i.error.code,eventType:c,unilbsServerIds:r.toString()})};if(e.response_body.forEach((t=>{const i=t.buffer.code;if(23===t.uri&&0===i&&!t.buffer.edges_services)if(4194310===t.buffer.flag)Qy.warning(\"no edge services in ap response of proxy fallback, will not set proxy in iceServers\"),t.buffer.edges_services=[];else{const i={error:new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,\"no edge services in ap response\",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};d.push(i),l(i)}if(0!==i){const n=uw(i),r={error:new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,n.desc,{desc:n.desc,retry:n.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?Qy.warning(r.error.toString()):d.push(r),l(r)}})),d.length)throw Qy.warning(\"[\".concat(a||\"sid-\".concat(s.slice(0,6)),\"] multi unilbs \").concat(t,\" failed, \").concat(d.map((e=>\"flag: \".concat(e.flag,\", message: \").concat(e.error.message,\", retry: \").concat(e.error.data.retry))).join(\" | \"))),new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,d.map((e=>\"flag: \".concat(e.flag,\", message: \").concat(e.error.message))).join(\" | \"),{retry:!!d.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(d.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},SU=e=>{var t,i,n,r;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,\"void gateway address\",{retry:!0,csIp:e.detail&&e.detail[502]});Dy(\"AP_AREA\")&&(null!==(n=e.detail)&&void 0!==n&&n[23]&&\"string\"==typeof(null===(r=e.detail)||void 0===r?void 0:r[23])?dU(e.detail[23].toLowerCase()):dU());if(null!==(t=e.detail)&&void 0!==t&&t[19]&&\"string\"==typeof(null===(i=e.detail)||void 0===i?void 0:i[19])){const t=e.detail[19],i=null==t?void 0:t.split(\";\");for(let t=0;t<i.length;t++){var o;const n=jp(o=i[t]).call(o);e.addresses[t]&&i&&(e.addresses[t].fingerprint=n)}}if(Dy(\"GATEWAY_ADDRESS\")&&Dy(\"GATEWAY_ADDRESS\").length>0){Qy.debug(\"assign gateway address to\",Dy(\"GATEWAY_ADDRESS\"));const t=Dy(\"GATEWAY_ADDRESS\").map((t=>{var i,n;const r=null!==(i=null===(n=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===n?void 0:n.fingerprint)&&void 0!==i?i:\"\";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:r}}));e.addresses=t}},gU=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=uw(t.buffer.code);throw new Sb(nv.UPDATE_TICKET_FAILED,\"[\".concat(t.buffer.code,\"]: \").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw Qy.debug(\"update ticket request received ap response without response body:\",t),new Sb(nv.UPDATE_TICKET_FAILED,\"cannot find response body from ap response\",{retry:!1})},RU=(e,t,i)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:hU({6:e.stringUid,11:t,12:Dy(\"USE_NEW_TOKEN\")?\"1\":void 0,22:t},e.apRTM?{26:\"RTM2\"}:{}),key:e.token,service_ids:i,uid:e.uid||0}}]};r.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const o=new FormData;return o.append(\"request\",JSON.stringify(r)),[o,n]},CU=(e,t)=>{const i=Math.floor(Math.random()*10**12),n={appid:e.appId,client_ts:Date.now(),opid:i,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:\"\",6:e.stringUid,12:\"1\"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},r=new FormData;return r.append(\"request\",JSON.stringify(n)),[r,i]};let IU=0;function vU(e){return Gh.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const yU=async e=>{let{fragementLength:t,referenceList:i,asyncMapHandler:n,allFailedhandler:r,promisesCollector:o}=e,s=0;const a=t;let c,d=0;const l=async()=>{const e=(()=>{const e=s*a,t=e+a;return i.slice(e,t).map(n)})();o&&o.push(...e);try{c=await vU(e)}catch(e){if(d+=a,s++,!(d>=i.length))return void await l();r(e)}e.forEach((e=>e.cancel()))};return await l(),c},AU=async e=>{let{referenceList:t,asyncMapHandler:i,closeFn:n}=e;const r=t.length;let o=0;const s=async()=>{const e=i(t.shift());try{return await e}catch(e){if(o++,o>=r||null!=n&&n(e))throw e;return s()}};return s()};async function bU(e,t,i,n){const r=async function(e,t,i,n){let r=null;const o=[],s=async()=>{const r=Dy(\"WEBCS_DOMAIN\").slice(0,Dy(\"AJAX_REQUEST_CONCURRENT\")).map((t=>({url:e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v2/transpond/webrtc?v=2\"):\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),areaCode:iU()}))),s=n.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:r.map((e=>e.url))}),a=await yU({fragementLength:Dy(\"FRAGEMENT_LENGTH\"),referenceList:r,asyncMapHandler:n=>(Qy.debug(\"[\".concat(e.clientId,\"] Connect to choose_server:\"),n.url),mU(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},s),e[0]},promisesCollector:o});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},s),a},a=async()=>{if(await $v(1e3),null!==r)return r;const s=Dy(\"WEBCS_DOMAIN_BACKUP_LIST\").map((t=>({url:e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v2/transpond/webrtc?v=2\"):\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),areaCode:iU()}))),a=n.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:s.map((e=>e.url))}),c=await yU({fragementLength:Dy(\"FRAGEMENT_LENGTH\"),referenceList:s,asyncMapHandler:n=>(Qy.debug(\"[\".concat(e.clientId,\"] Connect to backup choose_server:\"),n.url),mU(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},a),e[0]},promisesCollector:o});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},a),c};try{return r=await vU([s(),a()]),o.length&&o.forEach((e=>e.cancel&&\"function\"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}(e,t,i,n);return{gatewayInfo:await r}}async function wU(e,t,i,n,r){const o=e.cloudProxyServer;if(\"disabled\"===o){if(!n)return;if(e.useLocalAccessPoint)return await bU(e,t,i,r);if(Dy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\")){const{gatewayInfo:n,proxyInfo:o}=await LU(e,t,i,r);if(e.turnServer&&\"auto\"!==e.turnServer.mode)return{gatewayInfo:n};const a=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||cA.tcpport,udpport:e.udpport||cA.udpport,username:e.username||cA.username,password:e.password||cA.password,forceturn:!1,security:!0})));if(r.useP2P){var s;const t=null!==(s=e.uid)&&void 0!==s?s:n.uid,i=\"glb:\".concat(t.toString()),r=await Tv(i),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||cA.tcpport,udpport:e.udpport||cA.udpport,username:i,password:r,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:\"manual\",servers:a},{gatewayInfo:n}}return await bU(e,t,i,r)}const{proxyInfo:a,gatewayInfo:c}=await LU(e,t,i,r),d={gatewayInfo:c},l=a.map((e=>({turnServerURL:e.address,tcpport:\"proxy3\"===o?void 0:e.tcpport?e.tcpport:cA.tcpport,udpport:\"proxy4\"===o?void 0:e.udpport?e.udpport:cA.udpport,username:e.username||cA.username,password:e.password||cA.password,forceturn:\"proxy4\"!==o,security:\"proxy5\"===o})));if(r.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,i=\"glb:\".concat(t.toString()),n=await Tv(i),r=a.map((e=>({turnServerURL:e.address,tcpport:\"proxy3\"===o?void 0:e.tcpport||cA.tcpport,udpport:\"proxy4\"===o?void 0:e.udpport||cA.udpport,username:i,password:n,forceturn:\"proxy4\"!==o,security:\"proxy5\"===o})));l.push(...r)}return e.turnServer={mode:\"manual\",servers:l},Qy.debug(\"[\".concat(e.clientId,\"] set proxy server: \").concat(e.proxyServer,\", mode: \").concat(o)),d}async function OU(e,t,i,n,r){const o=Dy(\"ACCOUNT_REGISTER\").slice(0,Dy(\"AJAX_REQUEST_CONCURRENT\"));let s=[];s=t.proxyServer?o.map((e=>\"https://\".concat(t.proxyServer,\"/ap/?url=\").concat(e+\"/api/v1\"))):o.map((e=>\"https://\".concat(e,\"/api/v1\")));const a=null==r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"stringUID\",urls:s});try{const o=await async function(e,t,i,n,r){const o=Date.now(),s={sid:i.sid,opid:10,appid:i.appId,string_uid:t};let a=e[0];const c=await my((()=>tU(a+\"\".concat(-1===a.indexOf(\"?\")?\"?\":\"&\",\"action=stringuid\"),{data:s,cancelToken:n,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":72}})),((i,n)=>{if(0===i.code){if(i.uid<=0||i.uid>=Math.pow(2,32))throw Qy.error(\"Invalid Uint Uid \".concat(t,\" => \").concat(i.uid),i),sA.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:nv.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new Sb(nv.INVALID_UINT_UID_FROM_STRING_UID);return sA.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:null,extend:s}),!1}const r=uw(i.code);return r.retry&&(a=e[(n+1)%e.length]),sA.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:r.desc,extend:s}),r.retry}),((t,i)=>t.code!==nv.OPERATION_ABORTED&&(sA.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(i+1)%e.length],!0)),r);if(0!==c.code){const e=uw(c.code);throw new Sb(nv.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,i,n);return null==r||r.recordJoinChannelService({status:\"success\",endTs:Date.now()},a),o.uid}catch(e){throw null==r||r.recordJoinChannelService({status:\"error\",endTs:Date.now(),errors:[e]},a),e}}async function NU(e,t,i){const n=Dy(\"ACCOUNT_REGISTER\");let r=[];r=t.proxyServer?n.map((e=>\"https://\".concat(t.proxyServer,\"/ap/?url=\").concat(e+\"/api/v1\"))):n.map((e=>\"https://\".concat(e,\"/api/v1\")));try{const n=await AU({referenceList:r,asyncMapHandler:n=>async function(e,t,i,n){const r=Date.now(),o={sid:i.sid,opid:10,appid:i.appId,string_uid:t};try{const t=await tU(e+\"\".concat(-1===e.indexOf(\"?\")?\"?\":\"&\",\"action=stringuid\"),{data:o,cancelToken:n,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":72}});if(0!==t.code){const e=uw(t.code);throw new Sb(nv.UNEXPECTED_RESPONSE,\"preload sua error:\".concat(e.desc),e)}if(t.uid<=0||t.uid>=Math.pow(2,32))throw new Sb(nv.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:r,url:e,req:o,uid:t.uid,elapse:Date.now()-r}}catch(e){throw e}}(n,e,t,i),closeFn:e=>e.code===nv.OPERATION_ABORTED||e.code===nv.UNEXPECTED_RESPONSE&&!e.data.retry});return n}catch(e){throw e}}async function DU(e,t,i){const n=Dy(\"CDS_AP\").slice(0,Dy(\"AJAX_REQUEST_CONCURRENT\")).map((t=>e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v1\"):\"https://\".concat(t,\"/api/v1?action=config\"))),r=n.map((n=>function(e,t,i,n){const r=AI(),o={flag:64,cipher_method:0,features:{device:r.name,system:r.os,system_general:navigator.userAgent,vendor:t.appId,version:vy,cname:t.cname,sid:t.sid,session_id:t.sid,detail:\"\",proxyServer:t.proxyServer}};return my((()=>tU(e,{data:o,timeout:1e3,cancelToken:i,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":54}})),void 0,(e=>e.code!==nv.OPERATION_ABORTED),n)}(n,e,t,i)));let o=null,s=null,a={};try{o=await vU(r)}catch(e){if(e.code===nv.OPERATION_ABORTED)throw e;s=e}r.forEach((e=>e.cancel()));if(sA.reportApiInvoke(e.sid,{name:Cv.REQUEST_CONFIG_DISTRIBUTE,options:{error:s,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,i=Object.keys(t),n={};return i.forEach((e=>{var i;const r=jp(i=e.slice(4)).call(i),o=JSON.parse(t[e])[1];n[r]=o})),n}(o)}catch(e){}return a}async function PU(e,t){const i=Dy(\"WEBCS_DOMAIN\").concat(Dy(\"WEBCS_DOMAIN_BACKUP_LIST\")).map((e=>({url:\"https://\".concat(e,\"/api/v2/transpond/webrtc?v=2\"),areaCode:iU(),serviceIds:[Ow.CHOOSE_SERVER,Ow.CLOUD_PROXY_FALLBACK]})));try{const n=await AU({referenceList:i,asyncMapHandler:i=>async function(e,t,i){let n,{url:r,areaCode:o,serviceIds:s}=e;const a=Date.now(),[c,d]=RU(t,o,s);let l=Vv.networkState;try{l&&Vv.networkState===Pv.OFFLINE&&Vv.onlineWaiter&&await Gh.race([Vv.onlineWaiter,$v(_y.maxRetryTimeout)]),l=Vv.networkState;const{data:e,headers:t}=await tU(r,{data:c,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0,!0);n=\"1\"===t.http3?1:-1;const o=e=>{const t=[];if(e.response_body.forEach((i=>{const n=i.buffer.code;if(23===i.uri&&0===n&&!i.buffer.edges_services)if(4194310===i.buffer.flag)i.buffer.edges_services=[];else{const n={error:new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,\"no edge services in ap response\",{retry:!0,csIp:e.detail[502]}),flag:i.buffer.flag};t.push(n)}if(0!==n){const r=uw(n),o={error:new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:i.buffer.flag};4194310===i.buffer.flag?Qy.warning(o.error.toString()):t.push(o)}})),t.length)throw new Sb(nv.CAN_NOT_GET_GATEWAY_SERVER,t.map((e=>\"flag: \".concat(e.flag,\", message: \").concat(e.error.message))).join(\" | \"),{retry:!!t.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(t.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})};o(e);const s=xw(e,Ow.CHOOSE_SERVER),u=xw(e,Ow.CLOUD_PROXY_FALLBACK);return SU(s),{gatewayInfo:Lw(s,r),proxyInfo:u,opid:d,requestTime:a,url:r,isHttp3:n,elapse:Date.now()-a}}catch(e){throw e}}(i,e,t),closeFn:e=>e.code===nv.OPERATION_ABORTED||e.code===nv.CAN_NOT_GET_GATEWAY_SERVER&&!e.data.retry});return n}catch(e){throw e}}async function LU(e,t,i,n){const r=Dy(\"PROXY_SERVER_TYPE3\"),o=(e,t,i)=>{let n=i||r;return Array.isArray(n)&&(n=t%2==0?r[1]:r[0]),\"https://\".concat(n,\"/ap/?url=\").concat(e)};let s=null;const a=[],c=async()=>{const r=Dy(\"WEBCS_DOMAIN\").slice(0,Dy(\"AJAX_REQUEST_CONCURRENT\")).map(((t,i)=>{let n;return n=\"disabled\"===e.cloudProxyServer&&e.proxyServer?o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i,e.proxyServer):\"disabled\"===e.cloudProxyServer||\"fallback\"===e.cloudProxyServer?\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"):o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i),{url:n,areaCode:iU(),serviceIds:[Ow.CHOOSE_SERVER,\"proxy5\"===e.cloudProxyServer?Ow.CLOUD_PROXY_5:\"proxy3\"===e.cloudProxyServer||\"proxy4\"===e.cloudProxyServer?Ow.CLOUD_PROXY:Ow.CLOUD_PROXY_FALLBACK]}})),s=n.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:r.map((e=>e.url))}),c=await yU({fragementLength:Dy(\"FRAGEMENT_LENGTH\"),referenceList:r,asyncMapHandler:n=>(Qy.debug(\"[\".concat(e.clientId,\"] Connect to choose_server:\"),n.url),fU(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},s),e[0]},promisesCollector:a});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},s),c},d=async()=>{if(await $v(1e3),null!==s)return s;const r=Dy(\"WEBCS_DOMAIN_BACKUP_LIST\").map(((t,i)=>{let n;return n=\"disabled\"===e.cloudProxyServer&&e.proxyServer?o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i,e.proxyServer):\"disabled\"===e.cloudProxyServer||\"fallback\"===e.cloudProxyServer?\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\"):o(\"\".concat(t,\"/api/v2/transpond/webrtc?v=2\"),i),{url:n,areaCode:iU(),serviceIds:[Ow.CHOOSE_SERVER,\"proxy5\"===e.cloudProxyServer?Ow.CLOUD_PROXY_5:\"proxy3\"===e.cloudProxyServer||\"proxy4\"===e.cloudProxyServer?Ow.CLOUD_PROXY:Ow.CLOUD_PROXY_FALLBACK]}})),c=n.recordJoinChannelService({startTs:Date.now(),status:\"pending\",service:\"chooseServer\",urls:r.map((e=>e.url))}),d=await yU({fragementLength:Dy(\"FRAGEMENT_LENGTH\"),referenceList:r,asyncMapHandler:n=>(Qy.debug(\"[\".concat(e.clientId,\"] Connect to backup choose_server:\"),n.url),fU(n,e,t,i)),allFailedhandler:e=>{throw n.recordJoinChannelService({endTs:Date.now(),status:\"error\",errors:e},c),e[0]},promisesCollector:a});return n.recordJoinChannelService({endTs:Date.now(),status:\"success\"},c),d};let l,u,h;try{({gatewayInfo:l,proxyInfo:u,url:h}=await vU([c(),d()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&\"function\"==typeof e.cancel&&e.cancel())),!l||!u)throw new Sb(nv.UNEXPECTED_ERROR,\"missing gateway or proxy response\").print();if(e.apUrl=h,\"disabled\"!==e.cloudProxyServer&&Array.isArray(r)&&h){const t=/^https?:\\/\\/(.+?)(\\/.*)?$/.exec(h)[1];Dn(r).call(r,t)&&(e.proxyServer=t,Qy.setProxyServer(t),sA.setProxyServer(t))}return s={gatewayInfo:l,proxyInfo:await Vw(u,l.uid)},s}async function kU(e,t,i){const n=Dy(\"UAP_AP\").slice(0,Dy(\"AJAX_REQUEST_CONCURRENT\")).map((t=>e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v1?action=uap\"):\"https://\".concat(t,\"/api/v1?action=uap\"))),r=n.map((n=>function(e,t,i,n){const r={command:\"convergeAllocateEdge\",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:vy,cname:t.cname,uid:t.uid.toString(),requestId:EU,seq:EU};EU+=1;const o={service_name:\"tele_channel\",json_body:JSON.stringify(r)};return my((async()=>{const t=await tU(e,{data:o,cancelToken:i,headers:{\"X-Packet-Service-Type\":0,\"X-Packet-URI\":61}});if(0!==t.code){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"cross channel ap error, code\"+t.code,{retry:!0});throw Qy.error(e.toString()),e}const n=JSON.parse(t.json_body);if(200!==n.code){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"cross channel app center error, code: \".concat(n.code,\", reason: \").concat(n.reason));throw Qy.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"cross channel app center empty server\");throw Qy.error(e.toString()),e}return{vid:n.vid,workerToken:n.workerToken,addressList:(Dy(\"CHANNEL_MEDIA_RELAY_SERVERS\")||n.servers).map((e=>\"wss://\".concat(e.address.replace(/\\./g,\"-\"),\".\").concat(Dy(\"WORKER_DOMAIN\"),\":\").concat(e.wss)))}}),void 0,(e=>!!(e.code!==nv.OPERATION_ABORTED&&e.code!==nv.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),n)}(n,e,t,i)));try{const e=await vU(r);return r.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function MU(e,t,i){let n=null;const r=[],o=async o=>{const s=Dy(o?\"WEBCS_DOMAIN_BACKUP_LIST\":\"WEBCS_DOMAIN\").map((t=>e.proxyServer?\"https://\".concat(e.proxyServer,\"/ap/?url=\").concat(t+\"/api/v2/transpond/webrtc?v=2\"):\"https://\".concat(t,\"/api/v2/transpond/webrtc?v=2\")));return o&&(await $v(1e3),null!==n)?n:await yU({fragementLength:Dy(\"FRAGEMENT_LENGTH\"),referenceList:s,asyncMapHandler:n=>(Qy.debug(\"[\".concat(e.clientId,\"] update ticket, Connect to \").concat(o?\"backup\":\"\",\" choose_server:\"),n),function(e,t,i,n){const[r]=CU(t,[Ow.CHOOSE_SERVER]);let o=Vv.networkState;return my((async()=>{o&&Vv.networkState===Pv.OFFLINE&&Vv.onlineWaiter&&await Gh.race([Vv.onlineWaiter,$v(n&&n.maxRetryTimeout||_y.maxRetryTimeout)]),o=Vv.networkState;const t=await tU(e,{data:r,cancelToken:i,headers:{\"Content-Type\":\"multipart/form-data;\"}},!0);return gU(t,e)}),(()=>!1),(e=>e.code!==nv.OPERATION_ABORTED&&(e.code===nv.UPDATE_TICKET_FAILED?e.data.retry:(Qy.warning(\"[\".concat(t.clientId,\"] update ticket network error, retry\"),e),!0))),n)}(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:r})};try{return n=await vU([o(!1),o(!0)]),r.length&&r.forEach((e=>e.cancel&&\"function\"==typeof e.cancel&&e.cancel())),n}catch(e){throw e[0]}}function UU(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function xU(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?UU(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UU(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class VU extends Sv{get isSuccess(){return!!this.configs}constructor(){super(),og(this,\"configs\",void 0),og(this,\"joinInfo\",void 0),og(this,\"cancelToken\",void 0),og(this,\"retryConfig\",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),og(this,\"interval\",void 0),og(this,\"mutex\",new hy(\"config-distribute\")),og(this,\"mutableParamsRead\",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),Dy(\"ENABLE_CONFIG_DISTRIBUTE\")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),Dy(\"CONFIG_DISTRIBUTE_INTERVAL\")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){if(!this.mutex.isLocked)return;(await this.mutex.lock())()}async updateConfigDistribute(){if(!this.mutableParamsRead){this.mutableParamsRead=!0;sA.reportApiInvoke(null,{options:void 0,name:Cv.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Iv.TRACER}).onSuccess(JSON.stringify(Py))}if(!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Qy.debug(\"[config-distribute] get config distribute interrupted have no joininfo\");let e;const t=await this.mutex.lock();try{e=await DU(this.joinInfo,this.cancelToken,this.retryConfig),Qy.debug(\"[config-distribute] get config distribute\",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new Sb(nv.NETWORK_RESPONSE_ERROR,e);Qy.warning(\"[config-distribute] \".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(Wb.UPDATE_BITRATE_LIMIT,e):this.emit(Wb.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&xU({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const i=aE(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let t=0;t<i.length;t++)for(let n=i.length-1;n>t;n--){const t=i[n];if(\"number\"==typeof e[t].__priority){const r=e[t].__priority,o=i[n-1];if(\"number\"==typeof e[o].__priority){if(!(r>e[o].__priority))continue;{const e=t;i[n]=i[n-1],i[n-1]=e}}else{const e=t;i[n]=i[n-1],i[n-1]=e}}}const n={};i.forEach((t=>{const i=e[t],r=i.__expires;Object.keys(i).forEach((e=>{\"__priority\"===e||\"__expires\"===e||Object.prototype.hasOwnProperty.call(n,e)||(n[e]=xU({value:i[e]},r&&{expires:r}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((i=>{switch(i){case\"ENABLE_EVENT_REPORT\":case\"UPLOAD_LOG\":case\"ENABLE_AG_ADAPTATION\":case\"FORCE_AG_HIGH_FRAMERATE\":case\"FORCE_SUPPORT_AG_ADAPTATION\":case\"ENCODER_CONFIG_LIMIT\":case\"CAMERA_CAPTURE_CONFIG\":case\"ENABLE_PRELOAD\":if(Object.prototype.hasOwnProperty.call(Oy,i)){const{value:n,expires:r}=e[i];if(r&&r<=t)return;Py[i]=n,Oy[i]=n,Qy.debug(\"Update global parameters from config distribute\",i,n)}}}))}catch(t){Qy.error(\"Error update config immediately: \".concat(e),t.message)}}(n);const e=JSON.stringify(n),t=window.btoa(e);window.localStorage.setItem(\"websdk_ng_global_parameter\",t),Qy.debug(\"Caching global parameters \".concat(e))}catch(e){Qy.error(\"Error caching global parameters:\",e.message)}}}class FU extends Sv{constructor(){super(...arguments),og(this,\"resultStorage\",new Map)}setLocalAudioStats(e,t,i){this.record(\"AUDIO_INPUT_LEVEL_TOO_LOW\",e,this.checkAudioInputLevel(i,t)),this.record(\"SEND_AUDIO_BITRATE_TOO_LOW\",e,this.checkSendAudioBitrate(i,t))}setLocalVideoStats(e,t,i){this.record(\"SEND_VIDEO_BITRATE_TOO_LOW\",e,this.checkSendVideoBitrate(i,t)),this.record(\"FRAMERATE_INPUT_TOO_LOW\",e,this.checkFramerateInput(i,t)),this.record(\"FRAMERATE_SENT_TOO_LOW\",e,this.checkFramerateSent(i))}setRemoteAudioStats(e,t){const i=e.getUserId();this.record(\"AUDIO_OUTPUT_LEVEL_TOO_LOW\",i,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const i=e.getUserId();this.record(\"RECV_VIDEO_DECODE_FAILED\",i,this.checkVideoDecode(t))}record(e,t,i){if(Dy(\"STATS_UPDATE_INTERVAL\")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const n=this.resultStorage.get(e);if(n&&(n.result.push(i),n.result.length>=5)){var r;const i=Dn(r=n.result).call(r,!0);n.isPrevNormal&&!i&&this.emit(\"exception\",BU[e],e,t),!n.isPrevNormal&&i&&this.emit(\"exception\",BU[e]+2e3,e+\"_RECOVER\",t),n.isPrevNormal=i,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof rk&&!t.isActive||(!!t.muted||0!==e.sendVolumeLevel)}checkFramerateInput(e,t){let i=null;t._encoderConfig&&t._encoderConfig.frameRate&&(i=kw(t._encoderConfig.frameRate));const n=e.captureFrameRate;return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof rk&&!t.isActive||(!!t.muted||0!==e.sendBitrate)}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const BU={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};const jU=new class{markSubscribeStart(e,t){performance.mark(\"agora-web-sdk/\".concat(e,\"/subscribe-\").concat(t))}markPublishStart(e,t){performance.mark(\"agora-web-sdk/\".concat(e,\"/publish-\").concat(t))}measureFromSubscribeStart(e,t){const i=performance.getEntriesByName(\"agora-web-sdk/\".concat(e,\"/subscribe-\").concat(t));if(i.length>0){const e=i[i.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const i=performance.getEntriesByName(\"agora-web-sdk/\".concat(e,\"/publish-\").concat(t));if(i.length>0){const e=i[i.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function GU(e,t){this.v=e,this.k=t}function WU(e){return new GU(e,0)}var HU=jh,KU=Sl;wi({target:\"Promise\",stat:!0,forced:!0},{withResolvers:function(){var e=KU.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var YU=Sl,qU=el;wi({target:\"Promise\",stat:!0,forced:!0},{try:function(e){var t=YU.f(this),i=qU(e);return(i.error?t.reject:t.resolve)(i.value),t.promise}});var zU=i(HU),JU=rf.f(\"asyncIterator\"),XU=i(JU);function QU(e){var t,i;function n(t,i){try{var o=e[t](i),s=o.value,a=s instanceof GU;zU.resolve(a?s.v:s).then((function(i){if(a){var c=\"return\"===t?\"return\":\"next\";if(!s.k||i.done)return n(c,i);i=e[c](i).value}r(o.done?\"return\":\"normal\",i)}),(function(e){n(\"throw\",e)}))}catch(e){r(\"throw\",e)}}function r(e,r){switch(e){case\"return\":t.resolve({value:r,done:!0});break;case\"throw\":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new zU((function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};i?i=i.next=a:(t=i=a,n(e,r))}))},\"function\"!=typeof e.return&&(this.return=void 0)}function ZU(e){return function(){return new QU(e.apply(this,arguments))}}QU.prototype[\"function\"==typeof eg&&XU||\"@@asyncIterator\"]=function(){return this},QU.prototype.next=function(e){return this._invoke(\"next\",e)},QU.prototype.throw=function(e){return this._invoke(\"throw\",e)},QU.prototype.return=function(e){return this._invoke(\"return\",e)};var $U=i(ie.Object.getOwnPropertySymbols),ex=wi,tx=qi.indexOf,ix=Bn,nx=v([].indexOf),rx=!!nx&&1/nx([1],1,-0)<0;ex({target:\"Array\",proto:!0,forced:rx||!ix(\"indexOf\")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return rx?nx(this,e,t)||0:tx(this,e,t)}});var ox=Xi(\"Array\").indexOf,sx=l,ax=ox,cx=Array.prototype,dx=function(e){var t=e.indexOf;return e===cx||sx(cx,e)&&t===cx.indexOf?ax:t},lx=i(dx);function ux(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=yA(e);for(n=0;n<o.length;n++)i=o[n],lx(t).call(t,i)>=0||(r[i]=e[i]);return r}(e,t);if($U){var o=$U(e);for(n=0;n<o.length;n++)i=o[n],lx(t).call(t,i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function hx(e){if(Array.isArray(e))return e.map((e=>e));if(!px(e))return e;const t={};for(const i in e){const n=e[i];px(n)||Array.isArray(n)?t[i]=hx(n):t[i]=n}return t}function px(e){return!(\"object\"!=typeof e||Array.isArray(e)||!e)}class _x{constructor(e){og(this,\"input\",[]),og(this,\"size\",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const Ex={address:\"unknown\",candidateType:\"unknown\",id:\"unknown\",port:0,priority:0,protocol:\"unknown\",type:\"unknown\"},mx={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:\"unknown\",localCandidate:Ex,remoteCandidate:Ex}},fx={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},Tx={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},Sx={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},gx={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function Rx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Cx(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Rx(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class Ix{constructor(e,t){og(this,\"onFirstVideoReceived\",void 0),og(this,\"onFirstVideoDecoded\",void 0),og(this,\"onFirstAudioReceived\",void 0),og(this,\"onFirstVideoDecodedTimeout\",void 0),og(this,\"onFirstAudioDecoded\",void 0),og(this,\"onSelectedLocalCandidateChanged\",void 0),og(this,\"onSelectedRemoteCandidateChanged\",void 0),og(this,\"videoIsReady\",!1),og(this,\"videoIsReady2\",{}),og(this,\"pc\",void 0),og(this,\"options\",void 0),og(this,\"intervalTimer\",void 0),og(this,\"stats\",hx(mx)),og(this,\"isFirstVideoReceived\",{}),og(this,\"isFirstVideoDecoded\",{}),og(this,\"isFirstAudioReceived\",{}),og(this,\"isFirstAudioDecoded\",{}),og(this,\"isFirstVideoDecodedTimeout\",{}),og(this,\"lossRateWindowStats\",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Gh((e=>{e({local:Cx({},Ex),remote:Cx({},Ex)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,i=[\"videoSend\",\"audioSend\",\"videoRecv\",\"audioRecv\"];let n=0,r=0,o=0,s=0;for(const a of i)e[a].forEach(((e,i)=>{if(!this.lossRateWindowStats[t-1][a][i]||!this.lossRateWindowStats[0][a][i])return;const c=this.lossRateWindowStats[t-1][a][i].packets-this.lossRateWindowStats[0][a][i].packets,d=this.lossRateWindowStats[t-1][a][i].packetsLost-this.lossRateWindowStats[0][a][i].packetsLost;\"videoSend\"===a||\"audioSend\"===a?(n+=c,o+=d):(r+=c,s+=d),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||d<=0?0:d/(c+d)}));e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=r<=0||s<=0?0:s/(r+s)}}function vx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yx(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vx(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class Ax extends Ix{constructor(){super(...arguments),og(this,\"_stats\",mx),og(this,\"lastDecodeVideoReceiverStats\",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=hx(mx);const i=t.filter((e=>\"ssrc\"===e.type));this.processSSRCStats(i);const n=t.find((e=>\"VideoBwe\"===e.type));n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const i=Dn(t=e.id).call(t,\"send\");switch(\"\".concat(e.mediaType,\"_\").concat(i?\"send\":\"recv\")){case\"video_send\":{const t=hx(Tx);t.codec=e.googCodecName,t.adaptionChangeReason=\"none\",e.googCpuLimitedResolution&&(t.adaptionChangeReason=\"cpu\"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason=\"bandwidth\"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case\"video_recv\":{const t=hx(fx),i=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),i){const n=i.stats,r=Date.now()-i.lts;t.framesDecodeFreezeTime=n.framesDecodeFreezeTime,t.framesDecodeInterval=n.framesDecodeInterval,t.framesDecodeCount>n.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(i.lts=Date.now(),t.framesDecodeInterval=r,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<i.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:yx({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case\"audio_recv\":{const t=hx(gx);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case\"audio_send\":{const t=hx(Sx);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new Gh(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const i={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{i[t]=e.stat(t)})),t.push(i)})),t}}function bx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function wx(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?bx(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class Ox extends Ix{constructor(){super(...arguments),og(this,\"_stats\",mx),og(this,\"report\",void 0),og(this,\"lastDecodeVideoReceiverStats\",new Map),og(this,\"lastVideoFramesRecv\",new Map),og(this,\"lastVideoFramesSent\",new Map),og(this,\"lastVideoFramesDecode\",new Map),og(this,\"lastVideoFramesOutput\",new Map),og(this,\"lastVideoJBDelay\",new Map),og(this,\"lastAudioJBDelay\",new Map),og(this,\"mediaBytesSent\",new Map),og(this,\"mediaBytesRetransmit\",new Map),og(this,\"mediaBytesTargetEncode\",new Map),og(this,\"lastEncoderMs\",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=hx(mx),this.report.forEach((e=>{switch(e.type){case sb.OUTBOUND:case sb.INBOUND:{const t=e.mediaType||e.kind,i=!t&&\"frameWidth\"in e,n=!t&&!(\"frameWidth\"in e);e.type===sb.OUTBOUND?\"audio\"===t||n?this.processAudioOutboundStats(e):(\"video\"===t||i)&&this.processVideoOutboundStats(e):e.type===sb.INBOUND&&(\"audio\"===t||n?this.processAudioInboundStats(e):(\"video\"===t||i)&&this.processVideoInboundStats(e));break}case sb.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case sb.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:wx({},Ex),remote:wx({},Ex)};return e.forEach((i=>{let n;if(i.type===sb.TRANSPORT&&(n=e.get(i.selectedCandidatePairId)),i.type===sb.CANDIDATE_PAIR&&i.selected&&(n=i),n){const i=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(n.localCandidateId){const r=e.get(n.localCandidateId);r&&i(t.local,r)}if(n.remoteCandidateId){const r=e.get(n.remoteCandidateId);r&&i(t.remote,r)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===sb.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===sb.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===sb.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(wx({},t),wx({},this.stats.selectedCandidatePair.localCandidate)),e.type===sb.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(wx({},t),wx({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=hx(gx),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),\"number\"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=hx(fx),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;const i=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),r=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,i=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,i),this.isFirstVideoDecoded[t.ssrc]=!0}if(i){const n=i.stats,r=o-i.lts;t.framesDecodeFreezeTime=n.framesDecodeFreezeTime,t.framesDecodeInterval=n.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&r>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>n.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(i.lts=Date.now(),t.framesDecodeInterval=r,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(i.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-i.qpSum)/(e.framesDecoded-i.stats.framesDecodeCount))}n&&o-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((o-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(r&&o-r.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-r.count)/((o-r.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):r?t.outputFrameRate=r.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:wx({},t),lts:i?i.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=hx(Tx),this._stats.videoSend.push(t));const i=this.mediaBytesSent.get(e.ssrc);if(i)i.add(e.bytesSent);else{const t=new _x(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new _x(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new _x(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const i=this.lastEncoderMs.get(e.ssrc);if(!i||i.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const n=e.framesEncoded-i.lastFrameCount,r=e.totalEncodeTime-i.lastEncoderTime;t.avgEncodeMs=1e3*r/n}}if(e.framesEncoded&&e.qpSum){const i=this.lastEncoderMs.get(e.ssrc);!i||i.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-i.lastQpSum)/(e.framesEncoded-i.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const i=this.findRemoteStatsId(e.ssrc,sb.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=hx(Sx),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const i=this.findRemoteStatsId(e.ssrc,sb.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}}findRemoteStatsId(e,t){var i;const n=Array.from(Qw(i=this.report).call(i)).find((i=>i.type===t&&i.ssrc===e));return n?n.id:null}processVideoMediaSource(e,t){const i=this.report.get(e);i&&i.width&&i.height&&i.framesPerSecond&&(t.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})}processAudioMediaSource(e,t){const i=this.report.get(e);i&&(t.inputLevel=i.audioLevel)}processVideoTrackSenderStats(e,t,i){var n,r,o,s;const a=t?this.report.get(t):void 0,c=null!==(n=null==a?void 0:a.framesSent)&&void 0!==n?n:e.framesSent;if(\"number\"!=typeof c)return;let d=null!==(r=null==a?void 0:a.frameWidth)&&void 0!==r?r:e.frameWidth,l=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight,u=null!==(s=null==a?void 0:a.framesPerSecond)&&void 0!==s?s:e.framesPerSecond;if(\"number\"==typeof d&&\"number\"==typeof l||(d=0,l=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(i.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(i.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(i.ssrc,{count:c,lts:e,rate:0})}i.sentFrame={width:d,height:l,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,i){var n,r,o,s,a;const c=t?this.report.get(t):void 0,d=null!==(n=null==c?void 0:c.framesReceived)&&void 0!==n?n:e.framesReceived,l=null!==(r=null==c?void 0:c.frameWidth)&&void 0!==r?r:e.frameWidth,u=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if(\"number\"==typeof d){const e=this.lastVideoFramesRecv.get(i.ssrc),t=Date.now();i.framesReceivedCount=d;let n=0;e&&t-e.lts>=800?(n=Math.round((d-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(i.ssrc,{count:d,lts:t,rate:n})):e?n=e.rate:this.lastVideoFramesRecv.set(i.ssrc,{count:d,lts:t,rate:0}),i.receivedFrame={width:l||0,height:u||0,frameRate:n||0},i.decodedFrame={width:l||0,height:u||0,frameRate:i.decodeFrameRate||0},i.outputFrame={width:l||0,height:u||0,frameRate:i.outputFrameRate||i.decodeFrameRate||0}}if(h&&p){const e=this.lastVideoJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const n=p-e.jitterBufferEmittedCount;n>0&&(t=1e3*(h-e.jitterBufferDelay)/n),i.jitterBufferMs=t,i.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(i.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p,jitterBufferMs:i.currentDelayMs})}}processAudioTrackSenderStats(e,t,i){var n,r,o,s;const a=t?this.report.get(t):void 0,c=null!==(n=null!==(r=null==a?void 0:a.echoReturnLoss)&&void 0!==r?r:e.echoReturnLoss)&&void 0!==n?n:0,d=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;i.aecReturnLoss=c,i.aecReturnLossEnhancement=d}processAudioTrackReceiverStats(e,t,i){var n,r,o,s,a,c,d;const l=t?this.report.get(t):void 0,u=null!==(n=null==l?void 0:l.removedSamplesForAcceleration)&&void 0!==n?n:e.removedSamplesForAcceleration,h=null!==(r=null==l?void 0:l.totalSamplesReceived)&&void 0!==r?r:e.totalSamplesReceived,p=null!==(o=null==l?void 0:l.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,_=null!==(s=null==l?void 0:l.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,E=null!==(a=null==l?void 0:l.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,m=null!==(c=null==l?void 0:l.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,f=null!==(d=null==l?void 0:l.concealedSamples)&&void 0!==d?d:e.concealedSamples;if(u&&h&&(i.accelerateRate=u/h),p&&_){const e=this.lastAudioJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const n=_-e.jitterBufferEmittedCount;n>0&&(t=1e3*(p-e.jitterBufferDelay)/n),i.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(i.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:_,jitterBufferMs:i.jitterBufferMs})}i.outputLevel=E;let T=1920;m&&h&&(T=h/m/50,i.receivedFrames=Math.round(h/T)),f&&(i.droppedFrames=Math.round(f/T))}processRemoteInboundStats(e,t){const i=this.report.get(e);i&&(t.packetsLost=i.packetsLost,i.roundTripTime&&(t.rttMs=1e3*i.roundTripTime),i.jitter&&(t.jitterMs=1e3*i.jitter),i.timestamp&&(t.timestamp=i.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return\"\";const i=t.mimeType.match(/\\/(.*)$/);return i&&i[1]?i[1]:\"\"}updateSendBitrate(){let e=0,t=null,i=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{i=null===i?e.diffMean():i+e.diffMean()}));const n=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==i&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))}}class Nx extends Ix{updateStats(){return Gh.resolve()}}function Dx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]*/i);return e&&e[0]?Number(e[0].split(\"/\")[1]):null}();return o?o<76?new Ax(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):new Ox(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):function(e){if(!window.RTCStatsReport)return!1;const t=e.getStats();return!!(t instanceof Gh||function(e){return!!e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof e.then}(t))}(e)?new Ox(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r}):new Nx(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n,firstVideoDecodedTimeout:r})}let Px=class{get localCapabilities(){return Gv(this._localCapabilities)}get rtpCapabilities(){return Gv(this._rtpCapabilities)}get candidates(){return Gv(this._candidates)}get iceParameters(){return Gv(this._iceParameters)}get dtlsParameters(){return Gv(this._dtlsParameters)}constructor(e){og(this,\"sessionDesc\",void 0),og(this,\"_localCapabilities\",void 0),og(this,\"_rtpCapabilities\",void 0),og(this,\"_candidates\",void 0),og(this,\"_iceParameters\",void 0),og(this,\"_dtlsParameters\",void 0),og(this,\"setup\",void 0),og(this,\"currentMidIndex\",void 0),og(this,\"cname\",\"o/i14u9pJrxRKAsu\"),og(this,\"firefoxSsrcMidMap\",new Map),e=Gv(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,localCapabilities:o,direction:s,setup:a,videoCodec:c,audioCodec:d}=e;let l;this.setup=a,l=s===fb.RECEIVE_ONLY?CM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=extmap-allow-mixed\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\"):CM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=extmap-allow-mixed\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=recvonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=recvonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\"),this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=o;const u=s===fb.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=s===fb.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=s===fb.RECEIVE_ONLY?r.send.videoCodecs:WM(Yb.VIDEO,u,h,c),_=s===fb.RECEIVE_ONLY?r.send.audioCodecs:WM(Yb.AUDIO,u,h,d);for(const e of l.mediaDescriptions)e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=i.fingerprints,e.attributes.candidates=n,e.attributes.setup=this.setup,\"application\"===e.media.mediaType&&(e.attributes.sctpPort=\"5000\"),\"video\"===e.media.mediaType&&(e.media.fmts=p.map((e=>e.payloadType.toString(10))),e.attributes.payloads=p,e.attributes.extmaps=u.videoExtensions),\"audio\"===e.media.mediaType&&(e.media.fmts=_.map((e=>e.payloadType.toString(10))),e.attributes.payloads=_,e.attributes.extmaps=u.audioExtensions,GM(e));this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return CM.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,i,n,r){i=i.replace(/ /g,\"-\");const{ssrcs:o,ssrcGroups:s}=DM(t,this.cname,Dy(\"SYNC_GROUP\")?i:void 0),a=this.findPreloadMediaDesc(o);if(a){if(kI()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,n);let i;return-1===t?(i=this.createOrRecycleSendMedia(e,o,s,\"sendonly\",n,r),this.updateBundleMids()):(i=Gv(this.sessionDesc.mediaDescriptions[t]),i.attributes.direction=\"sendonly\",i.attributes.ssrcs=o,i.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(i,r)),kI()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,i.attributes.mid),{needExchangeSDP:!0,mid:i.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,i){const n=[];return e.forEach((e=>{const r=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(r);let s,a=!1;-1===o?(a=!0,s=this.createOrRecycleRecvMedia(e,[],\"recvonly\",t,i),this.updateBundleMids()):(s=Gv(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction=\"recvonly\"),n.push({mid:s.attributes.mid,needCreateTransceiver:a})})),n}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");t.forEach((e=>{e.media.port=\"0\",e.attributes.direction=\"inactive\"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:i,address:n,port:r,type:o,relatedAddress:s,relatedPort:a,priority:c}=new RTCIceCandidate(e),d={foundation:null!=t?t:\"\",componentId:\"1\",transport:null!=i?i:\"\",priority:c?c+\"\":\"\",connectionAddress:null!=n?n:\"\",port:r?r+\"\":\"\",type:o?o+\"\":\"\",relAddr:null!=s?s:\"\",relPort:a?a+\"\":\"\",extension:{}};this.candidates.some((e=>e.priority===d.priority&&e.connectionAddress===d.connectionAddress&&e.port===d.port))||(this._candidates.push(d),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,i,n,r){const o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,a=WM(o,s,this.localCapabilities.send,o===Yb.AUDIO?r:n),c=o===Yb.VIDEO?s.videoExtensions:s.audioExtensions,d=\"\".concat(++this.currentMidIndex);let l={media:{mediaType:o,port:\"9\",protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(d)}};l=this.mungRecvMediaDsec(l,e);const u=this.findFirstClosedMedia(o);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"inactive\"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"recvonly\"}))}findAvailableMediaIndex(e,t,i){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&\"0\"!==n.media.port&&(\"sendonly\"===n.attributes.direction||\"sendrecv\"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(kI()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||\"0\"!==n.attributes.mid&&\"1\"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r&&n.attributes.mid===i}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const i=t.media.mediaType===e&&\"0\"!==t.media.port&&(\"recvonly\"===t.attributes.direction||\"sendrecv\"===t.attributes.direction);return\"0\"!==t.attributes.mid&&\"1\"!==t.attributes.mid&&i}))}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}restartICE(e){e=Gv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,i,n,r,o){const s=this.rtpCapabilities.send,a=e===Yb.VIDEO?s.videoCodecs:s.audioCodecs,c=e===Yb.VIDEO?s.videoExtensions:s.audioExtensions;kI()&&(r=\"\".concat(++this.currentMidIndex));let d={media:{mediaType:e,port:\"9\",protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:r}};d=this.mungSendMediaDesc(d,o);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}mungRecvMediaDsec(e,t,i){const n=Gv(e);return LM(n),PM(n,t),kM(n,t),MM(n),UM(n,i,this.localCapabilities.send),n}mungSendMediaDesc(e,t){const i=Gv(e);return UM(i,t,this.localCapabilities.recv),GM(i),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>\"0\"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var i;return(null===(i=t.attributes)||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>kI()?\"0\"===t.media.port&&t.media.mediaType===e:\"0\"===t.media.port))}};const Lx=[\"sdp\"];var kx;function Mx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ux(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Mx(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Mx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let xx=(kx=class e extends Hb{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,i,n){super(t,i),og(this,\"direction\",void 0),og(this,\"name\",void 0),og(this,\"store\",void 0),og(this,\"spec\",void 0),og(this,\"peerConnection\",void 0),og(this,\"initialOffer\",void 0),og(this,\"transport\",void 0),og(this,\"statsFilter\",void 0),og(this,\"localCandidateCount\",0),og(this,\"_isInRestartIce\",!1),og(this,\"mutex\",new hy(\"P2PConnection-mutex\")),og(this,\"onLocalCandidate\",void 0),og(this,\"remoteSDP\",void 0),og(this,\"pendingCandidates\",[]),og(this,\"localCapabilities\",void 0),og(this,\"isReady\",!1),og(this,\"restartCnt\",0),og(this,\"curTurnServerIndex\",0),this.store=i,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,i.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=n?n:fb.SEND_ONLY,this.name=this.direction===fb.SEND_ONLY?\"sendP2PConnection\":\"recvP2PConnection\",this.statsFilter=Dx(this.peerConnection,Dy(\"STATS_UPDATE_INTERVAL\"),void 0,kI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await VM();if(this.localCapabilities=jM(t),e){const{sdp:t}=e,i=ux(e,Lx),n=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=AM(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},\"sendonly\"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(BM(t,e,\"videoExtensions\",i,n,r),BM(t,e,\"videoCodecs\",i,n,r),BM(t,e,\"audioExtensions\",i,n,r),BM(t,e,\"audioCodecs\",i,n,r),Dy(\"RAISE_H264_BASELINE_PRIORITY\")){const e=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"===e.fmtp.parameters[\"profile-level-id\"]));if(-1!==e){const t=r.videoCodecs.findIndex((e=>e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){Qy.debug(\"raising H264 baseline profile priority\");const i=r.videoCodecs[e];r.videoCodecs.splice(e,1),r.videoCodecs.splice(t,0,i)}-1!==t&&Dy(\"FILTER_SEND_H264_BASELINE\")&&(i.videoCodecs=i.videoCodecs.filter((e=>!(e.rtpMap&&\"h264\"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&\"42001f\"!==e.fmtp.parameters[\"profile-level-id\"]))))}}return{send:i,recv:n,sendrecv:r}}({},{},t);this.remoteSDP=new Px({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:n,localCapabilities:this.localCapabilities,direction:this.direction,setup:\"actpass\",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:\"offer\",sdp:this.remoteSDP.toString()}),this.isReady=!0;const r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error(\"Cannot get answer sdp when trying to establish PeerConnection.\");const o=bM(r.sdp);await this.peerConnection.setLocalDescription(r);const s=await FM({},{},r.sdp);this.localCapabilities=jM(s);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),Ux(Ux({},o),{},{sdp:r.sdp})}{this.peerConnection.addTransceiver(\"video\",{direction:\"sendonly\"}),this.peerConnection.addTransceiver(\"audio\",{direction:\"sendonly\"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");const t=bM(e.sdp);return this.initialOffer=e,Ux(Ux({},t),{},{sdp:e.sdp})}}catch(e){throw new rv(nv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error(\"Cannot establish P2PConnection without initial offer.\");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:i,dtlsParameters:n}=e,r=await FM({},{},t);this.remoteSDP=new Px({remoteIceParameters:i,remoteDtlsParameters:n,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:\"active\",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:\"answer\",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.connect failed; \".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new rv(nv.ADD_CANDIDATE_FAILED,\"P2PConnection.addRemoteCandidate failed; \".concat(e.toString()))}}send(e,t,i){var n=this;return ZU((function*(){const r=yield WU(n.mutex.lock(\"From P2PConnection.send\"));try{if(!n.remoteSDP)throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");const o=[],s=n.remoteSDP.receive(e,t,i);e.forEach(((e,t)=>{if(s[t].needCreateTransceiver){const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:\"sendonly\"});o.push(t),e._updateRtpTransceiver(t)}else{const i=n.peerConnection.getTransceivers().find((e=>e.mid===s[t].mid));if(!i)throw new Error(\"cannot find transceiver when sendPeerconnection send, mid is \".concat(s[t].mid));o.push(i),e._updateRtpTransceiver(i)}})),kI()&&!0===Dy(\"SIMULCAST\")&&(yield WU(n.applySimulcastForFirefox(o,e)));const a=s.map((e=>e.mid)),c=yield WU(n.peerConnection.createOffer()),d=n.mungSendOfferSDP(c.sdp,e,a),l=CM.parse(d),u=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"Cannot extract ssrc from mediaDescription.\");return wM(t,Dy(\"USE_PUB_RTX\"))})),h=o.map(((e,t)=>{const i=a[t];return{localSSRC:u[t],id:i}}));yield WU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:d}));try{yield h}catch(e){const t=n.remoteSDP.toString();throw yield WU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:d})),yield WU(n.peerConnection.setRemoteDescription({type:\"answer\",sdp:t})),yield WU(n.stopSending(a,!0)),e}yield WU(n.applySimulcastEncodings(o,e)),yield WU(n.applySendEncodings(o,e));const p=n.remoteSDP.toString(),_=n.logSDPExchange(d,\"offer\",\"local\",\"send\");return null==_||_(p),yield WU(n.setRemoteDescription({type:\"answer\",sdp:p})),o.map(((e,t)=>{const i=a[t];return{localSSRC:u[t],id:i}}))}catch(e){throw e instanceof rv?e:new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.send failed; \".concat(e.toString()))}finally{r()}}))()}async stopSending(e,t){const i=t?void 0:await this.mutex.lock(\"From P2PConnection.stopSending\");try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length (\".concat(t.length,\") doesn't match mids' length (\").concat(e.length,\") when trying to call P2PConnection.stopSending.\"));t.map((e=>{var t;e.direction=\"inactive\",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||\"\",\"offer\",\"local\",\"stopSending\");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.setRemoteDescription({type:\"answer\",sdp:o})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.stopSending failed; \".concat(e.toString()))}finally{i&&i()}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);if(o){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"receive\");await this.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(n.sdp,r,e);null==i||i(o||\"\"),await this.peerConnection.setLocalDescription({type:\"answer\",sdp:o}),Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" by exchanging SDP.\"))}else Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" no need to exchange SDP.\"));const s=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!s||null===s.mid)throw new Error(\"Cannot get transceiver after setLocalDescription.\");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async mockReceive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);if(o){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"receive\");await this.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(n.sdp,r,e);null==i||i(o||\"\"),await this.peerConnection.setLocalDescription({type:\"answer\",sdp:o}),Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" by exchanging SDP.\"))}else Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" no need to exchange SDP.\"))}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"stopReceiving\");await this.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===Ay.Auto&&(this.store.p2pTransport=Ay.SdRtn,MD().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,MD().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");const{iceParameters:t}=bM(e.sdp);return this.store.descriptionStart(),this.direction===fb.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===fb.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:\"offer\",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error(\"Cannot get answer sdp when trying to iceRestart.\");const{iceParameters:t}=bM(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:\"answer\",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,\"closed\"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,\"offer\",\"local\",\"updateEncoderConfig\");await this.peerConnection.setLocalDescription({type:\"offer\",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===i.length&&(this.isVP8Simulcast(t)?kI()||await this.applySimulcastEncodings(i,[t]):await this.applySendEncodings(i,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getTransceivers().find((e=>e.mid===t));i&&await i.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:i,remote:n}=t.getSelectedCandidatePair();return{local:Ux(Ux({},Ex),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:Ux(Ux({},Ex),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Dn(e=[\"connected\",\"completed\"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;\"connected\"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{if(e.candidate){var t;if(e.candidate.candidate)null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON());this.localCandidateCount+=1}else Qy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] local candidate count\"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={iceServers:[]};var o;t.iceServers?r.iceServers=t.iceServers:t.turnServer&&\"off\"!==t.turnServer.mode&&(bv(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,i,n)),Dy(\"USE_TURN_SERVER_OF_GATEWAY\")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,i,n)),Dn(o=[Ay.Relay,Ay.SdRtn]).call(o,i)&&(r.iceTransportPolicy=\"relay\"),Dy(\"FORCE_TURN_TCP\")?r.iceTransportPolicy=\"relay\":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(r.iceTransportPolicy=\"relay\")}))));return Dy(\"ENABLE_ENCODED_TRANSFORM\")&&MD().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),Qy.debug(\"P2PConnection p2pTransport is \".concat(i)),r}static turnServerConfigToIceServers(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[],r=e.filter((e=>e.tcpport));Qy.debug(\"P2PConnection turnServers is \".concat(r,\", current index is \").concat(i));const o=r.length>i?r[i]:r[0];switch(t){case Ay.SdRtn:const t=e.filter((e=>{var t;return Dn(t=e.username).call(t,\"glb:\")&&e.turnServerURL==e.turnServerURL})),r=t.length>i?t[i]:t[0];r&&(n.push({username:r.username,credential:r.password,credentialType:\"password\",urls:\"turn:\".concat(Pw(r.turnServerURL),\":\").concat(r.tcpport,\"?transport=udp\")}),n.push({username:r.username,credential:r.password,credentialType:\"password\",urls:\"turns:\".concat(Pw(r.turnServerURL),\":\").concat(r.tcpport,\"?transport=tcp\")}));break;case Ay.Relay:o&&(n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turn:\".concat(o.turnServerURL,\":\").concat(o.tcpport,\"?transport=udp\")}),n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turns:\".concat(Pw(o.turnServerURL),\":\").concat(o.tcpport,\"?transport=tcp\")}));break;default:o&&(n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turn:\".concat(o.turnServerURL,\":\").concat(o.tcpport,\"?transport=udp\")}),n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"turns:\".concat(Pw(o.turnServerURL),\":\").concat(o.tcpport,\"?transport=tcp\")}),n.push({username:o.username,credential:o.password,credentialType:\"password\",urls:\"stun:\".concat(o.turnServerURL,\":\").concat(o.tcpport)}))}return n}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,\"error\"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var i;t&&(null===(i=this.onICETransportStateChange)||void 0===i||i.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:i}=t.getSelectedCandidatePair();Qy.info(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] selectedcandidatepairchange: local \").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),\", remote \").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),\" )\"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var i;if(!t){t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))}if(!t)return Qy.warn(\"[\".concat(e.getTrackId(),\"] no rtpSender found}\"));if(this.isVP8Simulcast(e))return Qy.warn(\"[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings\");if(!MD().supportSetRtpSenderParameters)return Qy.warn(\"[updateRtpSenderEncodings] Browser not support set rtp-sender parameters\");const n={},r={};switch(e._optimizationMode){case\"motion\":n.degradationPreference=\"maintain-framerate\";break;case\"detail\":n.degradationPreference=\"maintain-resolution\";break;default:n.degradationPreference=\"balanced\"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:i,scaleResolutionDownBy:n}=e._encoderConfig;t&&(r.maxBitrate=1e3*t),Dn(o=e._hints).call(o,eP.LOW_STREAM)&&(i&&(r.maxFramerate=kw(i)),n&&n>=1&&(r.scaleResolutionDownBy=n))}if(Dy(\"DSCP_TYPE\")&&QI()){var s;const e=Dy(\"DSCP_TYPE\");Dn(s=[\"very-low\",\"low\",\"medium\",\"high\"]).call(s,e)&&(r.networkPriority=e)}const a=t.getParameters(),c=null===(i=a.encodings)||void 0===i?void 0:i[0];kI()&&!c&&(n.encodings=[r]),c&&Object.assign(c,r),Object.assign(a,n),Qy.debug(\"[\".concat(e.getTrackId(),\"] updateRtpSenderEncodings: \").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!MD().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){const n=e[i],r=t[i];r instanceof Hk&&!this.isVP8Simulcast(r)&&await this.updateRtpSenderEncodings(r,n.sender)}}catch(e){Qy.debug(\"[\".concat(this.store.clientId,\"] Apply RTPSendEncodings failed.\"))}}mungSendOfferSDP(e,t,i){const n=CM.parse(e);return t.forEach(((e,t)=>{const r=i[t],o=n.mediaDescriptions.find((e=>e.attributes.mid===r));o&&(PM(o,e),xM(o,e,this.store.codec))})),CM.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var i,n,r,o,s;const c=e[a],d=t[a];if(d instanceof Hk&&!Dn(i=d._hints).call(i,eP.LOW_STREAM)&&null!==(n=d._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=d._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=d._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&\"vp8\"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:\"m\",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:\"h\",active:!0,maxBitrate:t.high}];const i=c.sender.getParameters();await c.sender.setParameters(Object.assign(i,e))}}}async applySimulcastEncodings(e,t){if(!kI()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof Hk&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:\"high\",priority:\"high\",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:\"low\",priority:\"low\",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,r))}}}isVP8Simulcast(e){var t,i,n,r,o;return!!(e instanceof Hk&&Dy(\"SIMULCAST\")&&\"vp8\"===this.store.codec&&!Dn(t=e._hints).call(t,eP.LOW_STREAM)&&null!==(i=e._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,i,n){if(Dy(\"SDP_LOGGING\"))return Qy.upload(\"[\".concat(this.store.clientId,\"] exchanging \").concat(i,\" \").concat(t,\" SDP during P2PConnection.\").concat(n,\"\\n\"),e),\"offer\"===t?e=>{this.logSDPExchange(e,\"answer\",\"local\"===i?\"remote\":\"local\",n)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((e=>{e.direction=\"inactive\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"muteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteLocal failed; \".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((async e=>{e.direction=\"sendonly\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"unmuteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteLocal failed; \".concat(e.toString()))}}async getRemoteSSRC(e,t){var i,n;if(t=null!==(i=t)&&void 0!==i?i:null===(n=this.currentRemoteDescription)||void 0===n?void 0:n.sdp){var r;const i=null===(r=CM.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===r?void 0:r.attributes.ssrcs;return null==i?void 0:i[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Dn(t=[\"connected\",\"completed\"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,i){const n=CM.parse(e),r=n.mediaDescriptions.find((e=>e.attributes.mid===t));return r&&i===Yb.AUDIO&&\"audio\"===r.media.mediaType&&GM(r),CM.print(n)}},rb(kx.prototype,\"establish\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"establish\"),kx.prototype),rb(kx.prototype,\"connect\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"connect\"),kx.prototype),rb(kx.prototype,\"receive\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"receive\"),kx.prototype),rb(kx.prototype,\"mockReceive\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"mockReceive\"),kx.prototype),rb(kx.prototype,\"stopReceiving\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"stopReceiving\"),kx.prototype),rb(kx.prototype,\"restartICE\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"restartICE\"),kx.prototype),rb(kx.prototype,\"close\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"close\"),kx.prototype),rb(kx.prototype,\"updateEncoderConfig\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"updateEncoderConfig\"),kx.prototype),rb(kx.prototype,\"updateSendParameters\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"updateSendParameters\"),kx.prototype),rb(kx.prototype,\"replaceTrack\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"replaceTrack\"),kx.prototype),rb(kx.prototype,\"muteLocal\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"muteLocal\"),kx.prototype),rb(kx.prototype,\"unmuteLocal\",[Vx],Object.getOwnPropertyDescriptor(kx.prototype,\"unmuteLocal\"),kx.prototype),kx);function Vx(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"From P2PConnection.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}function Fx(e,t){let i=document.createElement(\"video\"),n=document.createElement(\"canvas\");i.setAttribute(\"style\",\"display:none\"),n.setAttribute(\"style\",\"display:none\"),i.setAttribute(\"muted\",\"\"),i.muted=!0,i.setAttribute(\"autoplay\",\"\"),i.autoplay=!0,i.setAttribute(\"playsinline\",\"\"),n.width=kw(t.width),n.height=kw(t.height);const r=kw(t.framerate||15);document.body.append(i),document.body.append(n);let o=e._mediaStreamTrack;i.srcObject=new MediaStream([o]),i.play();const s=n.getContext(\"2d\");if(!s)throw new Sb(nv.UNEXPECTED_ERROR,\"can not get canvas context\");const a=MD(),c=n.captureStream(a.supportRequestFrame?0:r).getVideoTracks()[0];c.canvas||(c.canvas=n),n.startCapture=()=>{if(!i)return n.stopCapture&&n.stopCapture();if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const e=i.videoWidth,t=i.videoHeight/e,r=n.width*t;Math.abs(r-n.height)>=2&&(Qy.debug(\"adjust low stream resolution\",\"\".concat(n.width,\"x\").concat(n.height,\" -> \").concat(n.width,\"x\").concat(r)),n.height=r)}s.drawImage(i,0,0,n.width,n.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,i.srcObject=new MediaStream([o]))},n.stopCapture=kP((()=>n.startCapture&&n.startCapture()),r);const d=c.stop;return c.stop=()=>{d.call(c),i&&(i.remove(),i.srcObject=null,i=null),n&&(n.width=0,n.remove(),n.stopCapture&&n.stopCapture(),n.startCapture=void 0,n.stopCapture=void 0,n=null),Qy.debug(\"clean low stream renderer\")},c}var Bx=function(e){return e[e.HEIGHT=2033]=\"HEIGHT\",e[e.FRAME_RATE=2034]=\"FRAME_RATE\",e[e.WIDTH=2035]=\"WIDTH\",e}(Bx||{}),jx=function(e){return e[e.FRAME_RATE=2002]=\"FRAME_RATE\",e[e.WIDTH=2003]=\"WIDTH\",e[e.HEIGHT=2004]=\"HEIGHT\",e[e.PACKAGE_LOST=2005]=\"PACKAGE_LOST\",e[e.AVG_ENCODE=2007]=\"AVG_ENCODE\",e[e.NACKS=2009]=\"NACKS\",e[e.PLIS=2010]=\"PLIS\",e[e.FIRS=2011]=\"FIRS\",e[e.BITRATE=2012]=\"BITRATE\",e[e.PACKAGE_RATE=2031]=\"PACKAGE_RATE\",e[e.ADAPTATION=2032]=\"ADAPTATION\",e[e.ACTUAL_ENCODED=2060]=\"ACTUAL_ENCODED\",e[e.BANDWIDTH=2061]=\"BANDWIDTH\",e[e.RETRANSMIT=2062]=\"RETRANSMIT\",e[e.TARGET_ENCODED=2064]=\"TARGET_ENCODED\",e[e.TRANSMIT=2066]=\"TRANSMIT\",e[e.FREEZE=2082]=\"FREEZE\",e[e.DISABLED=2095]=\"DISABLED\",e[e.PLAYER_STATUS=2128]=\"PLAYER_STATUS\",e[e.QP_SUM=2143]=\"QP_SUM\",e}(jx||{}),Gx=function(e){return e[e.BITRATE=2069]=\"BITRATE\",e[e.PACKAGE_LOST=2070]=\"PACKAGE_LOST\",e[e.PACKAGE_RATE=2071]=\"PACKAGE_RATE\",e[e.HEIGHT=2073]=\"HEIGHT\",e[e.FRAME_RATE=2075]=\"FRAME_RATE\",e[e.WIDTH=2077]=\"WIDTH\",e}(Gx||{}),Wx=function(e){return e[e.JITTER=-1]=\"JITTER\",e[e.PACKAGE_LOST=2014]=\"PACKAGE_LOST\",e[e.WIDTH=2018]=\"WIDTH\",e[e.HEIGHT=2019]=\"HEIGHT\",e[e.FRAME_RATE=2020]=\"FRAME_RATE\",e[e.JITTER_BUFFER=2023]=\"JITTER_BUFFER\",e[e.CURRENT_DELAY=2024]=\"CURRENT_DELAY\",e[e.NACKS=2026]=\"NACKS\",e[e.PLIS=2027]=\"PLIS\",e[e.FIRS=2028]=\"FIRS\",e[e.BITRATE=2029]=\"BITRATE\",e[e.PACKAGE_RATE=2078]=\"PACKAGE_RATE\",e[e.FREEZE=2084]=\"FREEZE\",e[e.DISABLED=2101]=\"DISABLED\",e[e.PLAYER_STATUS=2129]=\"PLAYER_STATUS\",e[e.QP_SUM=2144]=\"QP_SUM\",e[e.I_FRAME_DELAY=2149]=\"I_FRAME_DELAY\",e}(Wx||{}),Hx=function(e){return e[e.FRAME_RATE_DECODE=2021]=\"FRAME_RATE_DECODE\",e[e.FRAME_RATE_RENDER=2022]=\"FRAME_RATE_RENDER\",e[e.FRAME_RATE_OUTPUT=2155]=\"FRAME_RATE_OUTPUT\",e[e.FREEZE_TIME=2109]=\"FREEZE_TIME\",e[e.FREEZE_TIME_RENDER=2147]=\"FREEZE_TIME_RENDER\",e[e.FREEZE_DURATION=2156]=\"FREEZE_DURATION\",e}(Hx||{}),Kx=function(e){return e[e.PCM_LEVEL=2104]=\"PCM_LEVEL\",e}(Kx||{}),Yx=function(e){return e[e.PACKAGE_LOST=-1]=\"PACKAGE_LOST\",e[e.LEVEL=2038]=\"LEVEL\",e[e.BITRATE=2039]=\"BITRATE\",e[e.PACKAGE_RATE=2040]=\"PACKAGE_RATE\",e[e.AEC_RETURN_LOSS=2041]=\"AEC_RETURN_LOSS\",e[e.AEC_RETURN_LOSS_ENH=2042]=\"AEC_RETURN_LOSS_ENH\",e[e.FREEZE=2081]=\"FREEZE\",e[e.DISABLED=2096]=\"DISABLED\",e}(Yx||{}),qx=function(e){return e[e.BITRATE=2044]=\"BITRATE\",e[e.PACKAGE_LOST=2045]=\"PACKAGE_LOST\",e[e.PACKAGE_RATE=2046]=\"PACKAGE_RATE\",e[e.CURRENT_DELAY=2047]=\"CURRENT_DELAY\",e[e.JITTER_BUFFER=2054]=\"JITTER_BUFFER\",e[e.JITTER=2055]=\"JITTER\",e[e.FREEZE=2083]=\"FREEZE\",e[e.DISABLED=2102]=\"DISABLED\",e[e.PCM_LEVEL=2105]=\"PCM_LEVEL\",e[e.PLAYER_STATUS=2130]=\"PLAYER_STATUS\",e[e.CONCEALED_SAMPLES=2148]=\"CONCEALED_SAMPLES\",e}(qx||{}),zx=function(e){return e[e.FREEZE_TIME=-1]=\"FREEZE_TIME\",e[e.LEVEL=2043]=\"LEVEL\",e}(zx||{}),Jx=function(e){return e[e.RTT=2006]=\"RTT\",e[e.CONN_TYPE=801]=\"CONN_TYPE\",e}(Jx||{});const Xx=1e3,Qx=3;function Zx(e,t,i){null!=i&&Number.isFinite(i)&&(e[t]=Math.round(Math.max(0,i)))}function $x(e){const t={[Jx.CONN_TYPE]:0,[Jx.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case\"relay\":{const i=e.selectedCandidatePair.localCandidate.relayProtocol;\"udp\"===i&&(t[Jx.CONN_TYPE]=1),\"tcp\"===i&&(t[Jx.CONN_TYPE]=3),\"tls\"===i&&(t[Jx.CONN_TYPE]=4);break}case\"srflx\":t[Jx.CONN_TYPE]=2}return t}function eV(e){let t=0;switch(e){case\"none\":t=0;break;case\"cpu\":t=1;break;case\"bandwidth\":t=2;break;case\"other\":t=3}return t}class tV extends Sv{constructor(e){super(),og(this,\"store\",void 0),og(this,\"uploadWRTCStatsTimer\",void 0),og(this,\"uploadOutboundDenoiserStatsTimer\",void 0),og(this,\"uploadExtStatsTimer\",void 0),og(this,\"uploadExtUsageStatsTimer\",void 0),og(this,\"uploadInboundExtStatsTimer\",void 0),og(this,\"requestStats\",void 0),og(this,\"requestTransportStats\",void 0),og(this,\"requestLocalMedia\",void 0),og(this,\"requestRemoteMedia\",void 0),og(this,\"requestAllTracks\",void 0),og(this,\"requestVideoIsReady\",void 0),og(this,\"requestUploadStats\",void 0),og(this,\"requestUpload\",void 0),og(this,\"uploadOutboundStarted\",!1),og(this,\"uploadInboundStarted\",!1),og(this,\"uploadTransportStarted\",!1),og(this,\"uploadExtensionUsageStarted\",!1),og(this,\"lastRecvStats\",void 0),og(this,\"lastSendStats\",void 0),og(this,\"lastFullRecvStats\",void 0),og(this,\"lastFullSendStats\",void 0),og(this,\"needUploadRenderFreezeTime\",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,i;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(i=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!i&&this.uploadInboundStarted&&(i=this.requestStats(!0)),t||i){const n={};if(this.uploadTransportStarted&&t){const r=this.getTransportStats(t,i,e);r&&(n.misc=[r])}if(this.uploadOutboundStarted&&t){const i=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);i&&(n.outbound=[i])}if(this.uploadInboundStarted&&i){const t=this.getInboundStats(i,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(n.inbound=t)}this.requestUploadStats(n)}this.lastRecvStats=i,this.lastSendStats=t,e||(this.lastFullRecvStats=i,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==Qx),++e===Qx+1&&(e=1)}),Xx)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,i){if(!this.requestStats)return;if(i)return null==e.rtt?void 0:{addition:{[Jx.RTT]:e.rtt,[Jx.CONN_TYPE]:void 0}};const n=$x(e);if(this.store.useP2P){if(t){const e=$x(t);n[Jx.CONN_TYPE]+=e[Jx.CONN_TYPE]<<3}n[Jx.CONN_TYPE]+=110}else n[Jx.CONN_TYPE]+=100;return{addition:n}}getOutboundStats(e,t,i){if(!this.requestUploadStats||!this.requestLocalMedia)return;const n=this.requestLocalMedia();if(!n||0===n.length)return;let r,o,s;return n.forEach((n=>{let[a,{track:c,ssrcs:d}]=n;switch(a){case Jb.LocalVideoLowTrack:case Jb.LocalVideoTrack:if(a===Jb.LocalVideoTrack){const n=function(e,t,i,n,r){const o=t.videoSend.find((t=>t.ssrc===e));if(!o)return;const s={},{sentFrame:a,inputFrame:c}=o;if(c&&a){const e=c.frameRate,t=a.frameRate;s[jx.FREEZE]=function(e,t){let i=!0;return i=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),i}(e,t)?1:0}if(Zx(s,jx.QP_SUM,o.qpSumPerFrame),r)return s;switch(a&&(Zx(s,jx.HEIGHT,a.height),Zx(s,jx.WIDTH,a.width),Zx(s,jx.FRAME_RATE,a.frameRate)),s[jx.DISABLED]=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?1:0,o.adaptionChangeReason){case\"none\":s[jx.ADAPTATION]=0;break;case\"cpu\":s[jx.ADAPTATION]=1;break;case\"bandwidth\":s[jx.ADAPTATION]=2;break;case\"other\":s[jx.ADAPTATION]=3}let d=0;o.adaptionChangeReason&&(d+=eV(o.adaptionChangeReason)),t.qualityLimitationReason&&(d+=eV(t.qualityLimitationReason)<<3),s[jx.ADAPTATION]=d,s[jx.PLAYER_STATUS]=gP[n._player?n._player.videoElementStatus:\"uninit\"],Zx(s,jx.NACKS,o.nacksCount),Zx(s,jx.PLIS,o.plisCount),Zx(s,jx.FIRS,o.firsCount),Zx(s,jx.AVG_ENCODE,o.avgEncodeMs);const l=i&&i.videoSend.find((t=>t.ssrc===e));if(l){let e=r?Xx:Xx*Qx;l.timestamp&&o.timestamp&&(e=o.timestamp-l.timestamp),null!=l.packets&&null!=o.packets&&Zx(s,jx.PACKAGE_RATE,1e3*(o.packets-l.packets)/e),null!=o.packetsLost&&null!=l.packetsLost&&Zx(s,jx.PACKAGE_LOST,o.packetsLost-l.packetsLost),null!=l.bytes&&null!=o.bytes&&Zx(s,jx.BITRATE,8*(o.bytes-l.bytes)/e)}return s}(d[0].ssrcId,e,t,c,i),r=i?null:function(e,t,i){const n=t.videoSend.find((t=>t.ssrc===e));if(!n)return null;const r={},o=n.inputFrame,s=o&&o.height||i&&i.videoHeight||0,a=o&&o.width||i&&i.videoWidth||0,c=o&&o.frameRate||0;return Zx(r,Bx.HEIGHT,s),Zx(r,Bx.WIDTH,a),Zx(r,Bx.FRAME_RATE,c),r}(d[0].ssrcId,e,c),s=i?null:function(e){const t={};return Zx(t,jx.RETRANSMIT,e.bitrate.retransmit),Zx(t,jx.TARGET_ENCODED,e.bitrate.targetEncoded),Zx(t,jx.ACTUAL_ENCODED,e.bitrate.actualEncoded),Zx(t,jx.TRANSMIT,e.bitrate.transmit),Zx(t,jx.BANDWIDTH,e.sendBandwidth),t}(e);o=Object.assign({},n,r,s)}else s=i?void 0:function(e,t,i){const n=t.videoSend.find((t=>t.ssrc===e));if(!n)return;const r={},o=n.sentFrame;if(o&&(Zx(r,Gx.HEIGHT,o.height),Zx(r,Gx.WIDTH,o.width),Zx(r,Gx.FRAME_RATE,o.frameRate)),i){const t=i.videoSend.find((t=>t.ssrc===e));if(t){let e=Xx*Qx;t.timestamp&&n.timestamp&&(e=n.timestamp-t.timestamp),null!=t.packets&&null!=n.packets&&Zx(r,Gx.PACKAGE_RATE,1e3*(n.packets-t.packets)/e),null!=n.packetsLost&&null!=t.packetsLost&&Zx(r,Gx.PACKAGE_LOST,n.packetsLost-t.packetsLost),null!=t.bytes&&null!=n.bytes&&Zx(r,Gx.BITRATE,8*(n.bytes-t.bytes)/e)}}return r}(d[0].ssrcId,e,t);break;case Jb.LocalAudioTrack:r=i?void 0:function(e,t,i,n){const r=t.audioSend.find((t=>t.ssrc===e));if(!r)return;const o={};o[Yx.DISABLED]=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?1:0;const s=100*n._source.getAccurateVolumeLevel(),a=r.inputLevel;if(null!=a){const e=Math.ceil(50*Math.log10(100*a+1));Zx(o,Yx.LEVEL,e)}Zx(o,Kx.PCM_LEVEL,s),Zx(o,Yx.AEC_RETURN_LOSS,r.aecReturnLoss),Zx(o,Yx.AEC_RETURN_LOSS_ENH,r.aecReturnLossEnhancement),o[Yx.FREEZE]=0;const c=i&&i.audioSend.find((t=>t.ssrc===e));if(c){let e=Xx*Qx;c.timestamp&&r.timestamp&&(e=r.timestamp-c.timestamp),null!=c.bytes&&null!=r.bytes&&Zx(o,Yx.BITRATE,8*(r.bytes-c.bytes)/e),null!=c.packets&&null!=r.packets&&Zx(o,Yx.PACKAGE_RATE,1e3*(r.packets-c.packets)/e)}return o}(d[0].ssrcId,e,t,c)}})),{high:o,low:s,audio:r}}getInboundStats(e,t,i){if(!this.requestRemoteMedia)return;const n=this.requestRemoteMedia()||[],r=[];return n.forEach((n=>{let[o,s]=n;const a={peer:o.uid};if(s.has(Yb.VIDEO)&&o.videoTrack){const n=o._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(o._videoSSRC)||!1,r=o.videoTrack?function(e,t,i,n,r,o,s){var a;const c=t.videoRecv.find((t=>t.ssrc===e));if(!c)return;const d={},{receivedFrame:l,outputFrame:u,decodeFrameRate:h}=c,p=i&&i.videoRecv.find((t=>t.ssrc===e));if(d[Wx.FREEZE]=r&&yV.isRemoteVideoFreeze(n,c,p)?1:0,Zx(d,Hx.FRAME_RATE_DECODE,h),Zx(d,Wx.QP_SUM,c.qpSumPerFrame),c.framesRateFirefox&&Zx(d,Wx.FRAME_RATE,c.framesRateFirefox),l&&Zx(d,Wx.FRAME_RATE,l.frameRate),p){const e=t.timestamp-i.timestamp||(s?Xx:Qx*Xx);null!=c.packetsLost&&null!=p.packetsLost&&Zx(d,Wx.PACKAGE_LOST,c.packetsLost-p.packetsLost),null!=p.bytes&&null!=c.bytes&&Zx(d,Wx.BITRATE,8*(c.bytes-p.bytes)/e),null!=p.packets&&null!=c.packets&&Zx(d,Wx.PACKAGE_RATE,1e3*(c.packets-p.packets)/e)}if(s)return d;l?(Zx(d,Wx.HEIGHT,l.height),Zx(d,Wx.WIDTH,l.width)):n&&(Zx(d,Wx.HEIGHT,n._videoHeight||0),Zx(d,Wx.WIDTH,n._videoWidth||0)),u&&Zx(d,Hx.FRAME_RATE_OUTPUT,u.frameRate);const _=null===(a=n._player)||void 0===a?void 0:a.rendFrameRate.toFixed(0);if(_&&Zx(d,Hx.FRAME_RATE_RENDER,+_),Zx(d,Wx.JITTER_BUFFER,c.jitterBufferMs),Zx(d,Wx.CURRENT_DELAY,c.currentDelayMs),Zx(d,Wx.FIRS,c.firsCount),Zx(d,Wx.NACKS,c.nacksCount),Zx(d,Wx.PLIS,c.plisCount),n){d[Wx.DISABLED]=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?0:1;const e=n._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:i,videoElementStatus:n}=e;if(t&&t.length>0&&Zx(d,Hx.FREEZE_TIME,t.splice(0,1)[0]),o&&\"visible\"===cM.visibility&&n===TP.PLAYING&&MD().supportRequestVideoFrameCallback){const t=Math.min(6e3,i);e.renderFreezeAccTime=Math.max(0,i-t),Zx(d,Hx.FREEZE_TIME_RENDER,t)}if(\"number\"==typeof c.totalFreezesDuration){const e=p&&p.totalFreezesDuration?c.totalFreezesDuration-p.totalFreezesDuration:c.totalFreezesDuration;Zx(d,Hx.FREEZE_DURATION,1e3*e)}}}if(d[Wx.PLAYER_STATUS]=gP[n._player?n._player.videoElementStatus:\"uninit\"],p&&void 0!==c.totalInterFrameDelay&&void 0!==c.totalSquaredInterFrameDelay&&void 0!==p.totalInterFrameDelay&&void 0!==p.totalSquaredInterFrameDelay){const e=c.totalInterFrameDelay-p.totalInterFrameDelay,t=c.totalSquaredInterFrameDelay-p.totalSquaredInterFrameDelay,i=c.framesDecodeCount-p.framesDecodeCount,n=e/i*1e3,r=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/i)/i));!isNaN(r)&&n+r>Math.max(3*n,n+150)&&(d[Wx.I_FRAME_DELAY]=r)}return d}(o._videoSSRC,e,t,o.videoTrack,!0===n,this.needUploadRenderFreezeTime,i):void 0;r&&(a.video=r)}if(s.has(Yb.AUDIO)&&o.audioTrack){const n=o.audioTrack?function(e,t,i,n,r){const o=t.audioRecv.find((t=>t.ssrc===e));if(!o)return;const s={},a=i&&i.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:d}=o;var l,u;if(Zx(s,qx.JITTER,o.jitterMs),null!=c&&null!=d&&(s[qx.FREEZE]=(u=d,0===(l=c)||100*u/l>20?1:0)),a){const e=t.timestamp-i.timestamp||(r?Xx:Xx*Qx);null!=o.packets&&null!=a.packets&&Zx(s,qx.PACKAGE_RATE,1e3*(o.packets-a.packets)/e),null!=a.bytes&&null!=o.bytes&&Zx(s,qx.BITRATE,8*(o.bytes-a.bytes)/e),null!=o.packetsLost&&null!=a.packetsLost&&Zx(s,qx.PACKAGE_LOST,o.packetsLost-a.packetsLost)}if(r)return s;const h=100*n._source.getAccurateVolumeLevel(),p=o.outputLevel;if(null!=p){const e=Math.ceil(50*Math.log10(100*p+1));Zx(s,zx.LEVEL,e)}if(Zx(s,qx.PCM_LEVEL,h),n&&(s[qx.DISABLED]=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?0:1),Zx(s,qx.JITTER_BUFFER,o.jitterBufferMs),Zx(s,qx.CURRENT_DELAY,o.jitterBufferMs),s[qx.PLAYER_STATUS]=gP[eL.getPlayerState(n.getTrackId())],a){const e=o.concealedSamples-a.concealedSamples;e>0&&Zx(s,qx.CONCEALED_SAMPLES,e)}return s}(o._audioSSRC,e,t,o.audioTrack,i):void 0;n&&(a.audio=n)}(a.video||a.audio)&&r.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,r}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof ik));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(Eb.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{if(!this.requestUpload||!this.requestRemoteMedia)return;(this.requestRemoteMedia()||[]).forEach((e=>{let[t,i]=e;if(i.has(Yb.VIDEO)&&t.videoTrack){t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}if(i.has(Yb.AUDIO)&&t.audioTrack){t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),i={connectionInterval:Dy(\"EXTENSION_USAGE_UPLOAD_INTERVAL\")/1e3,details:[],lts:t};let n=[];const r=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of r)!e.muted&&e.enabled&&(n=n.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,t]of o)t.has(Yb.VIDEO)&&e.videoTrack&&(n=n.concat(await e.videoTrack.getProcessorUsage())),t.has(Yb.AUDIO)&&e.audioTrack&&(n=n.concat(await e.audioTrack.getProcessorUsage()));if(0===n.length)return;i.details=function(e,t){const i={};for(const{id:s,value:a,level:c,direction:d}of e){var n;const e=null!==(n=t.get(s))&&void 0!==n?n:0,l=2===a?e+Dy(\"EXTENSION_USAGE_UPLOAD_INTERVAL\")/1e3:e;var r,o;t.set(s,l),i[s]?(2===a&&(i[s].value=a),c>i[s].level&&(i[s].level=c),\"remote\"===d&&(i[s].remoteUidCount+=1),i[s].totalTs=null!==(r=t.get(s))&&void 0!==r?r:0):i[s]={value:a,level:c,remoteUidCount:\"local\"===d?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(i).map((e=>{const{level:t,value:n,totalTs:r}=i[e];return{id:e,level:t,value:n,totalTs:r}}))}(n,e);const s=Date.now(),a=s>t?s:t+1;this.requestUpload&&this.requestUpload(Eb.EXTENSION_USAGE_STATS,{usageStats:i,sendTs:a})}),Dy(\"EXTENSION_USAGE_UPLOAD_INTERVAL\"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class iV{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){og(this,\"uid\",void 0),og(this,\"_uintid\",void 0),og(this,\"_trust_in_room_\",!0),og(this,\"_trust_audio_enabled_state_\",!0),og(this,\"_trust_video_enabled_state_\",!0),og(this,\"_trust_audio_mute_state_\",!0),og(this,\"_trust_video_mute_state_\",!0),og(this,\"_audio_muted_\",!1),og(this,\"_video_muted_\",!1),og(this,\"_audio_enabled_\",!0),og(this,\"_video_enabled_\",!0),og(this,\"_audio_added_\",!1),og(this,\"_video_added_\",!1),og(this,\"_is_pre_created\",!1),og(this,\"_video_pre_subscribed\",!1),og(this,\"_audio_pre_subscribed\",!1),og(this,\"_trust_video_stream_added_state_\",!0),og(this,\"_trust_audio_stream_added_state_\",!0),og(this,\"_audioTrack\",void 0),og(this,\"_videoTrack\",void 0),og(this,\"_dataChannels\",[]),og(this,\"_audioSSRC\",void 0),og(this,\"_videoSSRC\",void 0),og(this,\"_audioOrtc\",void 0),og(this,\"_videoOrtc\",void 0),og(this,\"_cname\",void 0),og(this,\"_rtxSsrcId\",void 0),og(this,\"_videoMid\",void 0),og(this,\"_audioMid\",void 0),this.uid=e,this._uintid=t}}let nV=function(e){return e.SEND_ONLY=\"SEND_ONLY\",e.RECEIVE_ONLY=\"RECEIVE_ONLY\",e}({});function rV(e,t){var i;let n;switch(t){case Jb.LocalAudioTrack:n=Mb.Audio;break;case Jb.LocalVideoTrack:n=Dn(i=e._hints).call(i,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalVideoLowTrack:n=Mb.Low}return n}function oV(e){const t=MD();if(e.some((e=>e._bypassWebAudio)))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio\");if(!t.webAudioMediaStreamDest)throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks because your browser does not support audio mixing\")}function sV(e,t){oV(e);const i=t||new rk;return e.forEach((e=>i.addAudioTrack(e))),i}var aV,cV,dV,lV,uV,hV,pV,_V,EV,mV,fV,TV;function SV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function gV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?SV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):SV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let RV=(aV=CV(nV.SEND_ONLY),cV=CV(nV.SEND_ONLY),dV=CV(),lV=CV(nV.RECEIVE_ONLY),uV=CV(nV.RECEIVE_ONLY),hV=CV(nV.RECEIVE_ONLY),pV=CV(nV.RECEIVE_ONLY),_V=CV(nV.RECEIVE_ONLY),EV=CV(nV.RECEIVE_ONLY),mV=CV(),fV=CV(nV.RECEIVE_ONLY),TV=class extends Sv{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(Qb.StateChange,t,this._state)}constructor(e,t){super(),og(this,\"isPlanB\",!1),og(this,\"store\",void 0),og(this,\"statsUploader\",void 0),og(this,\"sendConnection\",void 0),og(this,\"recvConnection\",void 0),og(this,\"localTrackMap\",new Map),og(this,\"remoteUserMap\",new Map),og(this,\"localDataChannels\",[]),og(this,\"pendingLocalTracks\",[]),og(this,\"pendingRemoteTracks\",[]),og(this,\"statsCollector\",void 0),og(this,\"dtlsFailedCount\",0),og(this,\"sendMutex\",new hy(\"P2PChannel2-send-mutex\")),og(this,\"recvMutex\",new hy(\"P2PChannel2-recv-mutex\")),og(this,\"_state\",Xb.Disconnected),og(this,\"_restartStates\",[\"disconnected\",\"failed\"]),og(this,\"reconnectInterval\",void 0),og(this,\"uploadUnplinkStarted\",!1),og(this,\"uploadDownlinkStarted\",!1),og(this,\"uplinkStateUploadInterval\",void 0),og(this,\"downlinkStatsUploadInterval\",void 0),og(this,\"handleMuteLocalTrack\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleMuteLocalTrack\");try{if(!this.sendConnection||this.state!==Xb.Connected)return void i(new rv(nv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.\"));const s=this.filterTobeMutedTracks(e);if(0===s.length)return void t();const a=s.find((e=>\"videoLowTrack\"===e[0]));if(a){a[1].track._originMediaStreamTrack.stop()}await this.sendConnection.muteLocal(s.map((e=>{let[,{id:t}]=e;return t})));let c=!1;var r,o;if(\"video\"===e.trackMediaType)c=!(null===(r=this.localTrackMap.get(Jb.LocalAudioTrack))||void 0===r||!r.track._muted);else c=void 0===(null===(o=this.localTrackMap.get(Jb.LocalVideoTrack))||void 0===o?void 0:o.id);const d=this.createMuteMessage(s);await Mv(this,Qb.RequestMuteLocal,d);const l=\"video\"===e.trackMediaType?cw.MUTE_LOCAL_VIDEO:cw.MUTE_LOCAL_AUDIO;await Mv(this,Qb.RequestP2PMuteLocal,{action:l,message:d,isMuteAll:c}),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleUnmuteLocalTrack\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleUnmuteLocalTrack\");try{if(!this.sendConnection||this.state!==Xb.Connected)return void i(new rv(nv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established.\"));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r),s=\"video\"===e.trackMediaType?cw.UNMUTE_LOCAL_VIDEO:cw.UNMUTE_LOCAL_AUDIO;await Mv(this,Qb.RequestP2PMuteLocal,{action:s,message:o}),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleUpdateVideoEncoder\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleSetVideoEncoder\");try{const i=this.localTrackMap.get(Jb.LocalVideoTrack);if(!this.sendConnection||!i||i.track!==e||this.state!==Xb.Connected)return void t();const{id:r,track:o}=i;r&&(await this.sendConnection.updateSendParameters(r,o),await this.sendConnection.updateEncoderConfig(r,o),this.emit(Qb.UpdateVideoEncoder,o)),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleUpdateVideoSendParameters\",(async(e,t,i)=>{const n=await this.sendMutex.lock(\"Locking from P2PChannel2.handleUpdateVideoSendParameters\");try{const i=this.localTrackMap.get(Jb.LocalVideoTrack);if(!this.sendConnection||!i||i.track!==e||this.state!==Xb.Connected)return void t();const{id:r,track:o}=i;r&&await this.sendConnection.updateSendParameters(r,o),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleReplaceTrack\",(async(e,t,i,n)=>{let r;Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2 handleReplaceTrack for [track-id-\").concat(e.getTrackId(),\"]\")),\"boolean\"==typeof n&&n||(r=await this.sendMutex.lock(\"From P2PChannel2.handleReplaceTrack\"));try{var o;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(!this.sendConnection||!i||void 0===i[1].id||this.state!==Xb.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,i[1].id)),i[0]===Jb.LocalVideoTrack&&MD().supportDualStreamEncoding){const t=this.localTrackMap.get(Jb.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}}t()}catch(e){i(e)}finally{var s;null===(s=r)||void 0===s||s()}})),og(this,\"handleGetLocalVideoStats\",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),og(this,\"handleGetLocalAudioStats\",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),og(this,\"handleGetRemoteVideoStats\",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),og(this,\"handleGetRemoteAudioStats\",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new tV(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&(\"disconnected\"!==e.iceConnectionState&&\"failed\"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),Dy(\"ICE_RESTART_INTERVAL\"))}async startP2PConnection(e,t){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support startP2PConnection.\")}async connect(e){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support connect.\")}async startP2P(e,t){let i;try{if(t){this.recvConnection&&(Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.startP2P reset recvConnection.\")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),i=await this.recvMutex.lock(\"From P2PChannel.startP2P\"),this.recvConnection=new xx(e,this.store,fb.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const n=await this.recvConnection.establish(t);return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}{this.state=Xb.New,this.sendConnection&&(Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.startP2P reset sendConnection.\")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),i=await this.sendMutex.lock(\"From P2PChannel.startP2P\"),this.sendConnection=new xx(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{i&&i()}}async p2pConnect(e){if(!this.sendConnection)throw new rv(nv.UNEXPECTED_ERROR,\"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .\");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Xb.Connected}async addRemoteCandidate(e,t){if(t===fb.RECEIVE_ONLY){if(!this.sendConnection)throw new rv(nv.UNEXPECTED_ERROR,\"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .\");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new rv(nv.UNEXPECTED_ERROR,\"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .\");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,i){var n=this;return ZU((function*(){const r=yield WU(n.sendMutex.lock(\"From P2PChannel.publish\"));try{if(!n.sendConnection||n.state!==Xb.Connected){n.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===n.pendingLocalTracks.indexOf(e)));return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(t))}n.store.pubId=n.store.pubId+1,jU.markPublishStart(n.store.clientId,n.store.pubId);const o=n.filterTobePublishedTracks(e,t,i);if(0===o.length)return void(yield WU(n.tryToUnmuteAudio(e)));o.forEach((e=>{let{track:t,type:i}=e;const r=Date.now();n.store.publish(t.getTrackId(),i===Jb.LocalAudioTrack?\"audio\":\"video\",r)})),n.bindLocalTrackEvents(o);const s=yield WU(n.sendConnection.send(o.map((e=>{let{track:t}=e;return t})),n.store.codec,n.store.audioCodec)),a=(yield WU(s.next())).value,c=n.createGatewayPublishMessage(o,a);try{yield c}catch(e){throw s.throw(e),(null==e?void 0:e.code)===nv.WS_ABORT&&o.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(o),e}yield WU(s.next()),o.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.statsUploader.startUploadOutboundStats(),n.assignLocalTracks(o,a),o.forEach((e=>{let{track:t,type:i}=e;const r=Date.now();n.store.publish(t.getTrackId(),i===Jb.LocalAudioTrack?\"audio\":\"video\",void 0,r)})),n.startUploadUplinkState()}finally{r()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==Xb.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Dn(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const i=t.find((e=>\"videoLowTrack\"===e[0]));if(i){i[1].track.close()}const n=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:i}]=e;return{type:t,track:i}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===Xb.Connected){if(i){i[1].track.close()}return n}e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((i=>{let[n,{track:r,ssrcs:o}]=i;const s={stream_type:rV(r,n),ssrcs:o};r._muted||!r._enabled?e.push(s):t.push(s)})),e.length>0&&e.forEach((e=>{Mv(this,Qb.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{Mv(this,Qb.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return ZU((function*(){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support publishLowStream.\")}))()}async republish(){this.pendingLocalTracks.length>0&&(Qy.debug(\"[\".concat(this.store.clientId,\"] Emit P2PChannelEvents.RequestRePublish to republish tracks.\")),await kv(this,Qb.RequestRePublish,this.pendingLocalTracks),this.emit(Qb.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support unpublishLowStream.\")}async subscribe(e,t,i,n){var r;if(!this.recvConnection)throw new rv(nv.INVALID_OPERATION,\"Cannot subscribe remote user when recvConnection disconnected.\");if(null!==(r=this.remoteUserMap.get(e))&&void 0!==r&&r.has(t))return;const{track:o,mid:s,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:i}],String(e.uid),n);t===Yb.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new aM(o,e.uid,e._uintid,this.store),Qy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote audio track: \").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=i,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new sM(o,e.uid,e._uintid,this.store),Qy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote video track: \").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const d=this.pendingRemoteTracks.findIndex((i=>{let{user:n,kind:r}=i;return n.uid===e.uid&&t===r}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(Qb.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,i,n){if(!this.recvConnection)throw new rv(nv.INVALID_OPERATION,\"Cannot subscribe remote user when recvConnection disconnected.\");await this.recvConnection.mockReceive(t,[{ssrcId:i}],String(e.uid),n)}async unsubscribe(e,t,i){const n=this.pendingRemoteTracks.filter((i=>{let{user:n,kind:r}=i;return void 0!==t?n.uid===e.uid&&t===r:n.uid===e.uid}));if(n.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||i||n.forEach((t=>{let{kind:i}=t;var n;if(i===Yb.AUDIO)null===(n=e._audioTrack)||void 0===n||n._destroy(),e._audioTrack=void 0;else if(i===Yb.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const r=this.filterTobeUnSubscribedTracks(e,t);0!==r.length&&(await this.recvConnection.stopReceiving(r.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),r.forEach((e=>{let[t,{kind:n}]=e;var r,o;n===Yb.VIDEO&&t._videoSSRC&&(null===(r=this.recvConnection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(n===Yb.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),i||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(n===Yb.AUDIO){var s;if(this.unbindRemoteTrackEvents(t._audioTrack),!i)null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}})),r.forEach((e=>{let[,{kind:t}]=e;Mv(this,Qb.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[Yb.VIDEO,Yb.AUDIO].forEach((e=>{t.has(e)?Mv(this,Qb.RequestP2PUnmuteRemote,e):Mv(this,Qb.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support massSubscribe.\")}async massSubscribeNoLock(e){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support massSubscribeNoLock.\")}async massUnsubscribe(e){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support massUnsubscribe.\")}async massUnsubscribeNoLock(e){throw new rv(nv.NOT_SUPPORTED,\"p2p mode does not support massUnsubscribeNoLock.\")}async muteRemote(e,t){if(!this.recvConnection)return;const i=this.remoteUserMap.get(e);if(!i)return void Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.muteRemote has no remote user \").concat(e.uid,\".\"));if(!i.get(t))return void Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.muteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"));const n=t===Yb.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==n&&this.recvConnection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const i=this.remoteUserMap.get(e);if(!i)return void Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.unmuteRemote has no remote user \").concat(e.uid,\".\"));i.get(t)||Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel2.unmuteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"))}getAllTracks(e){const t=this.localTrackMap.get(Jb.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rk){const i=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==Jb.LocalAudioTrack})).filter((t=>{let[i]=t;return!(e&&i===Jb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[i]=t;return!(e&&i===Jb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,i,n,r){if(e){const i=this.localTrackMap.get(Jb.LocalAudioTrack),o=n?this.localTrackMap.get(Jb.LocalVideoLowTrack):this.localTrackMap.get(Jb.LocalVideoTrack);sA.publish(this.store.sessionId,{eventElapse:jU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==i?void 0:i.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(eP.SCREEN_TRACK)),audio:!!i,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var o;i||(i=[]);const s=i.find((e=>e instanceof tk)),a=n?null===(o=this.localTrackMap.get(Jb.LocalVideoTrack))||void 0===o?void 0:o.track:i.find((e=>e instanceof Hk));sA.publish(this.store.sessionId,{eventElapse:jU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(eP.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,i,n){const r=n===Yb.VIDEO?i._videoSSRC:i._audioSSRC;r&&sA.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Yb.VIDEO,audio:n===Yb.AUDIO,peerid:i.uid,subscribeRequestid:n===Yb.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:jU.measureFromSubscribeStart(this.store.clientId,r)})}reset(){Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2.reset\")),this.sendMutex=new hy(\"P2PChannel2-send-mutex\"),this.sendMutex=new hy(\"P2PChannel2-recv-mutex\"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(Jb.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rk){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=Xb.Disconnected}getStats(e){var t,i;return e?null===(i=this.recvConnection)||void 0===i?void 0:i.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(Jb.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(Jb.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof Hk||t&&t.track instanceof tk?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}getRemoteMedia(e){var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(Jb.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=aE(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2.disconnectForReconnect closing P2PConnection\")),this.state=Xb.Reconnecting,Dy(\"KEEP_LAST_FRAME\")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var i;t._videoTrack&&t._videoTrack._player&&(null===(i=t._videoTrack._player.getVideoElement())||void 0===i||i.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[i,{track:n}]=e;switch(i){case Jb.LocalVideoTrack:Dn(t=n._hints).call(t,eP.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case Jb.LocalAudioTrack:n instanceof rk?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case Jb.LocalVideoLowTrack:}})),this.emit(Qb.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;Array.from(d_(i).call(i)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(Qb.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel2 disconnected, waiting to reconnect.\")))}hasPendingRemoteMedia(e,t){for(const i of this.pendingRemoteTracks){const{user:n,kind:r}=i;if((e instanceof iV?e.uid:e)===n.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let i,n;if(e===fb.SEND_ONLY){if(!this.sendConnection)throw new rv(nv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.\");i=await this.sendMutex.lock(\"From P2PChannel.restartICE\"),n=this.sendConnection}else{if(!this.recvConnection)throw new rv(nv.INVALID_OPERATION,\"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.\");i=await this.recvMutex.lock(\"From P2PChannel.restartICE\"),n=this.recvConnection}try{if(t){const e=await n.restartICE(t);return n.isInRestartIce=!1,e}{const e=await n.restartICE();if(e){const t=await kv(this,Qb.RequestP2PRestartICE,{direction:fb.RECEIVE_ONLY,iceParameter:e});await n.restartICE(t),n.isInRestartIce=!1}}}finally{i()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(Jb.LocalVideoTrack),i=this.localTrackMap.get(Jb.LocalAudioTrack),n=e.videoSend.find((e=>{var i;return e.ssrc===(null==t||null===(i=t.ssrcs)||void 0===i?void 0:i[0].ssrcId)})),r=e.audioSend.find((e=>{var t;return e.ssrc===(null==i||null===(t=i.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!n||!r)return 1;const o=Uv(this,Qb.NeedSignalRTT),s=n?n.rttMs:void 0,a=r?r.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,u=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(eP.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,i=e.bitrate.actualEncoded;if(t&&i){const e=(1e3*t-i)/(1e3*t);return dA[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((i=>{let[n]=i;const r=n._audioSSRC,o=n._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===r)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=Uv(this,Qb.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*l/1500;u&&(p=.6*h*100/50+.2*l/1500+.2*u/400);t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new Gh(((t,i)=>{this.handleMuteLocalTrack(e,t,i)}))}filterTobePublishedTracks(e,t,i){const n=[],r=MD(),o=this.getAllTracks();e=Bv(e=e.filter((e=>-1===o.indexOf(e))));let s=!1,a=!1;for(const o of e){if(o instanceof Hk&&(this.localTrackMap.has(Jb.LocalVideoTrack)||s?new rv(nv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:o,type:Jb.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(o,i);n.push({track:e,type:Jb.LocalVideoLowTrack})}if(o instanceof tk){const e=this.localTrackMap.get(Jb.LocalAudioTrack);if(e){if(!(e.track instanceof rk))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");if(o._bypassWebAudio)throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio\");e.track.addAudioTrack(o),this.bindLocalAudioTrackEvents(o,!0)}else if(a){const e=n.find((e=>{let{type:t}=e;return t===Jb.LocalAudioTrack}));if(!(e.track instanceof rk))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");if(o._bypassWebAudio)throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio\");e.track.addAudioTrack(o)}else{if(!r.webAudioMediaStreamDest||o instanceof rk||o._bypassWebAudio)n.push({track:o,type:Jb.LocalAudioTrack});else{const e=new rk;e.addAudioTrack(o),n.push({track:e,type:Jb.LocalAudioTrack})}a=!0}}}return n}filterTobeUnpublishedTracks(e){const t=[],i=this.getAllTracks();e=Bv(e=e.filter((e=>-1!==i.indexOf(e))));for(const i of e){if(i instanceof tk){const e=this.localTrackMap.get(Jb.LocalAudioTrack);if(!e)continue;e.track instanceof rk?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([Jb.LocalAudioTrack,e]),e.track.close())):t.push([Jb.LocalAudioTrack,e])}if(i instanceof Hk){const e=this.localTrackMap.get(Jb.LocalVideoTrack);if(!e)continue;t.push([Jb.LocalVideoTrack,e]);const i=this.localTrackMap.get(Jb.LocalVideoLowTrack);i&&t.push([Jb.LocalVideoLowTrack,i])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:i}=e;switch(i){case Jb.LocalVideoTrack:t.addListener($D.GET_STATS,this.handleGetLocalVideoStats),t.addListener($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener($D.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener($D.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Jb.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case Jb.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rk?e.trackList.forEach((e=>{e.addListener($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener($D.GET_STATS,this.handleGetLocalAudioStats),e.addListener($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener($D.GET_STATS,this.handleGetLocalAudioStats),e.addListener($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener($D.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:i}]=e;return{track:i,type:t}}))),e.forEach((e=>{let{track:t,type:i}=e;switch(i){case Jb.LocalVideoTrack:t.off($D.GET_STATS,this.handleGetLocalVideoStats),t.off($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off($D.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off($D.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Jb.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case Jb.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rk?e.trackList.forEach((e=>{e.off($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off($D.GET_STATS,this.handleGetLocalAudioStats),e.off($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off($D.GET_STATS,this.handleGetLocalAudioStats),e.off($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof sM&&t.addListener($D.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof aM&&t.addListener($D.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners($D.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;i.has(Yb.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),i.has(Yb.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,i)=>{var n;let r,{track:o,type:s}=e;switch(s){case Jb.LocalAudioTrack:r=Mb.Audio;break;case Jb.LocalVideoTrack:r=Dn(n=o._hints).call(n,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalVideoLowTrack:r=Mb.Low}return{kind:s===Jb.LocalAudioTrack?Yb.AUDIO:Yb.VIDEO,stream_type:r,mid:t[i].id,ssrcs:t[i].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case Jb.LocalVideoTrack:i=Dn(t=r._hints).call(t,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalAudioTrack:i=Mb.Audio;break;case Jb.LocalVideoLowTrack:i=Mb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,i)=>{let{track:n,type:r}=e;this.localTrackMap.set(r,{track:n,id:t[i].id,ssrcs:t[i].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var i;Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: \").concat(e.name,\".onConnectionStateChange(\").concat(t,\")\")),this.emit(Qb.PeerConnectionStateChange,t),\"connected\"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),\"connected\"===t&&(e.isInRestartIce=!1),Dn(i=this._restartStates).call(i,t)&&!e.isInRestartIce&&(\"disconnected\"===t&&await $v(800),\"disconnected\"!==e.iceConnectionState&&\"failed\"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{\"connected\"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICEConnectionStateChange(\").concat(e,\")\")),sA.reportApiInvoke(this.store.sessionId,{name:\"ICEConnectionStateChange\",options:e,tag:Iv.TRACER}).onSuccess(),this.emit(Qb.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICETransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportStateChange=e=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportError=e=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportError(\").concat(e,\")\"))},e.onFirstAudioDecoded=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var n;i&&(this.store.subscribe(i.uid,\"audio\",void 0,void 0,void 0,Date.now()),null===(n=i.audioTrack)||void 0===n||n.emit(sP.FIRST_FRAME_DECODED),sA.firstRemoteFrame(this.store.sessionId,tA.FIRST_AUDIO_DECODE,iA.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));i&&sA.firstRemoteFrame(this.store.sessionId,tA.FIRST_AUDIO_RECEIVED,iA.FIRST_AUDIO_RECEIVED,{peer:i._uintid,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,i)=>{this.reportVideoFirstFrameDecoded(e,t,i)},e.onFirstVideoReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));i&&sA.firstRemoteFrame(this.store.sessionId,tA.FIRST_VIDEO_RECEIVED,iA.FIRST_VIDEO_RECEIVED,{peer:i._uintid,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const i=\"relay\"===e.candidateType,n=\"relay\"===t.candidateType;\"unknown\"!==t.candidateType&&i===n||this.emit(Qb.ConnectionTypeChange,i),Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedLocalCandidateChanged(\").concat(JSON.stringify(Bw(t)),\" -> \").concat(JSON.stringify(Bw(e)),\")\"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedRemoteCandidateChanged(\").concat(JSON.stringify(Bw(t)),\" -> \").concat(JSON.stringify(Bw(e)),\")\"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(Qb.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===fb.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PChannel-\").concat(t.name,\"] start use restartICE\")),e===fb.SEND_ONLY?this.restartICE(e):kv(this,Qb.RequestP2PRestartICE,{direction:fb.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const i=this.localTrackMap.get(Jb.LocalAudioTrack);if(e instanceof tk&&(null==i?void 0:i.track)instanceof rk)return i.track.isActive||t.push([Jb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n&&(t.push(n),n[0]===Jb.LocalVideoTrack)){const e=this.localTrackMap.get(Jb.LocalVideoLowTrack);e&&t.push([Jb.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],i=this.localTrackMap.get(Jb.LocalAudioTrack);if(e instanceof tk&&(null==i?void 0:i.track)instanceof rk)return i.track.isActive&&t.push([Jb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n)if(n[0]===Jb.LocalVideoTrack){t.push(n);const e=this.localTrackMap.get(Jb.LocalVideoLowTrack);e&&t.push([Jb.LocalVideoLowTrack,e])}else t.push(n);return t}createMuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case Jb.LocalAudioTrack:i=Mb.Audio;break;case Jb.LocalVideoTrack:i=Dn(t=r._hints).call(t,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalVideoLowTrack:i=Mb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case Jb.LocalAudioTrack:i=Mb.Audio;break;case Jb.LocalVideoTrack:i=Dn(t=r._hints).call(t,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalVideoLowTrack:i=Mb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const i=[],n=this.remoteUserMap.get(e);if(!n)return i;if(t){const r=n.get(t);if(!r)return i;i.push([e,{kind:t,id:r}])}else Array.from(n.entries()).forEach((t=>{let[n,r]=t;i.push([e,{kind:n,id:r}])}));return i}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[i,{kind:n,id:r}]=e;switch(n){case Yb.VIDEO:return void(i._videoSSRC&&t.push({stream_type:Yb.VIDEO,ssrcId:i._videoSSRC}));case Yb.AUDIO:return void(i._audioSSRC&&t.push({stream_type:Yb.AUDIO,ssrcId:i._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:i}]=e;const n=this.remoteUserMap.get(t);n&&(n.delete(i),0===Array.from(n.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(Jb.LocalVideoTrack),i=this.localTrackMap.get(Jb.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),i&&e.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return\"connected\"!==e&&\"connected\"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof tk){const i=this.filterTobeUnmutedTracks(e[t]);if(0===i.length)continue;const n=this.createUnmuteMessage(i);return void await Mv(this,Qb.RequestUnmuteLocal,n)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Qb.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Qb.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await $v(Ey(this.dtlsFailedCount,_y)),this.emit(Qb.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(Jb.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof Hk))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof Hk)).length>1)throw new rv(nv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof tk)).length>1&&(e.some((e=>e instanceof tk&&e._bypassWebAudio))||!MD().webAudioMediaStreamDest))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");for(const t of e){if(t instanceof Hk&&this.pendingLocalTracks.some((e=>e instanceof Hk)))throw new rv(nv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof tk&&this.pendingLocalTracks.some((e=>e instanceof tk))&&(!MD().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof tk&&e._bypassWebAudio))))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\")}}getLowVideoTrack(e,t){const i=!Dy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&MD().supportDualStreamEncoding,n=gV(gV({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=i?e._mediaStreamTrack.clone():Fx(e,n);const o=ey(8,\"track-low-\"),s=new Hk(r,gV(gV({},i&&{scaleResolutionDownBy:Fw(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return s.on(rP.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,tP.LOW_STREAM)})),s._hints.push(eP.LOW_STREAM),e.addListener($D.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.recvMutex.lock(\"From P2PChannel2.globalLock\")}reportVideoFirstFrameDecoded(e,t,i,n){var r;const o=Array.from(d_(r=this.remoteUserMap).call(r)).find((t=>t._videoSSRC===e));if(o){n||this.store.subscribe(o.uid,\"video\",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,s=r.subscribe.find((e=>e.userId===o.uid&&\"video\"===e.type));sA.firstRemoteVideoDecode(this.store.sessionId,tA.FIRST_VIDEO_DECODE,iA.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:i,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,i){if(!this.recvConnection)return!1;const n=this.remoteUserMap.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const o=await this.recvConnection.getRemoteSSRC(r);return void 0!==o&&o!==i}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new rv(nv.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new rv(nv.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new rv(nv.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new rv(nv.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new rv(nv.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new rv(nv.NOT_SUPPORTED)}async preConnect(e){throw new rv(nv.NOT_SUPPORTED)}getEstablishParams(){throw new rv(nv.NOT_SUPPORTED)}async reSubscribe(e){throw new rv(nv.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new rv(nv.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:i}]=e;t===Jb.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,tP.LOW_STREAM):i._updateRtpTransceiver(void 0)}))}},rb(TV.prototype,\"p2pConnect\",[aV],Object.getOwnPropertyDescriptor(TV.prototype,\"p2pConnect\"),TV.prototype),rb(TV.prototype,\"unpublish\",[cV],Object.getOwnPropertyDescriptor(TV.prototype,\"unpublish\"),TV.prototype),rb(TV.prototype,\"unpublishLowStream\",[dV],Object.getOwnPropertyDescriptor(TV.prototype,\"unpublishLowStream\"),TV.prototype),rb(TV.prototype,\"subscribe\",[lV],Object.getOwnPropertyDescriptor(TV.prototype,\"subscribe\"),TV.prototype),rb(TV.prototype,\"mockSubscribe\",[uV],Object.getOwnPropertyDescriptor(TV.prototype,\"mockSubscribe\"),TV.prototype),rb(TV.prototype,\"unsubscribe\",[hV],Object.getOwnPropertyDescriptor(TV.prototype,\"unsubscribe\"),TV.prototype),rb(TV.prototype,\"muteRemote\",[pV],Object.getOwnPropertyDescriptor(TV.prototype,\"muteRemote\"),TV.prototype),rb(TV.prototype,\"unmuteRemote\",[_V],Object.getOwnPropertyDescriptor(TV.prototype,\"unmuteRemote\"),TV.prototype),rb(TV.prototype,\"hasRemoteMediaWithLock\",[EV],Object.getOwnPropertyDescriptor(TV.prototype,\"hasRemoteMediaWithLock\"),TV.prototype),rb(TV.prototype,\"disconnectForReconnect\",[mV],Object.getOwnPropertyDescriptor(TV.prototype,\"disconnectForReconnect\"),TV.prototype),rb(TV.prototype,\"remoteMediaSsrcChanged\",[fV],Object.getOwnPropertyDescriptor(TV.prototype,\"remoteMediaSsrcChanged\"),TV.prototype),TV);function CV(e){return function(t,i,n){const r=t[i];if(\"function\"!=typeof r)throw new Error(\"Cannot use mutex on object property.\");return n.value=async function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];switch(e){case nV.SEND_ONLY:{const e=await this.sendMutex.lock(\"From P2PChannel2.\".concat(i));try{return await r.apply(this,n)}finally{e()}}case nV.RECEIVE_ONLY:{const e=await this.recvMutex.lock(\"From P2PChannel2.\".concat(i));try{return await r.apply(this,n)}finally{e()}}default:{const e=await this.sendMutex.lock(\"From P2PChannel2.\".concat(i)),t=await this.recvMutex.lock(\"From P2PChannel2.\".concat(i));try{return await r.apply(this,n)}finally{e(),t()}}}},n}}function IV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function vV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?IV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):IV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class yV{constructor(e){og(this,\"store\",void 0),og(this,\"onStatsException\",void 0),og(this,\"onUploadPublishDuration\",void 0),og(this,\"onStatsChanged\",void 0),og(this,\"localStats\",new Map),og(this,\"remoteStats\",new Map),og(this,\"updateStatsInterval\",void 0),og(this,\"trafficStats\",void 0),og(this,\"trafficStatsPeerList\",[]),og(this,\"uplinkStats\",void 0),og(this,\"exceptionMonitor\",void 0),og(this,\"p2pChannel\",void 0),og(this,\"scalabilityMode\",ob.L1T1),og(this,\"updateStats\",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.exceptionMonitor=new FU,this.exceptionMonitor.on(\"exception\",((e,t,i)=>{this.onStatsException&&this.onStatsException(e,t,i)}))}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Jb.LocalAudioTrack)||vV({},dP)}getLocalVideoTrackStats(){return this.localStats.get(Jb.LocalVideoTrack)||vV({},lP)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const i=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return i&&(t.publishDuration=i.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.audioStats;r&&(i[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{audioStats:r}]=e;r&&(i[n]=t(n,r))}));return i}getRemoteNetworkQualityStats(e){const t={};if(e){var i;const n=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.networkStats;n&&(t[e]=n)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[i,{networkStats:n}]=e;n&&(t[i]=n)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const i=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return i&&(t.publishDuration=i.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.videoStats;r&&(i[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{videoStats:r}]=e;r&&(i[n]=t(n,r))}));return i}getRTCStats(){let e=0,t=0,i=0,n=0;const r=this.localStats.get(Jb.LocalAudioTrack);r&&(e+=r.sendBytes,t+=r.sendBitrate);const o=this.localStats.get(Jb.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(Jb.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:r}=e;t&&(i+=t.receiveBytes,n+=t.receiveBitrate),r&&(i+=r.receiveBytes,n+=r.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:i,RecvBitrate:n,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd));e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const i=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),n=null!=i&&i.videoSSRC?jU.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,r=null!=i&&i.audioSSRC?jU.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,n>r?n:r),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Qy.debug(\"[\".concat(this.store.clientId,\"]: Period fir changes to \").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,i){if(!e)return!1;const n=!!i&&t.framesDecodeFreezeTime>i.framesDecodeFreezeTime,r=!i||t.framesDecodeCount>i.framesDecodeCount;return n||!r}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&(e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3)}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[i,n]=t;switch(i){case Jb.LocalVideoTrack:case Jb.LocalVideoLowTrack:{const t=n,o=vV({},lP),s=e.getStats(),a=e.getLocalMedia(i);if(s){const i=s.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(i){const n=e.getLocalVideoSize(),r=e.getEncoderConfig(Jb.LocalVideoTrack);\"H264\"!==i.codec&&\"H265\"!==i.codec&&\"VP8\"!==i.codec&&\"VP9\"!==i.codec&&\"AV1X\"!==i.codec&&\"AV1\"!==i.codec||(o.codecType=i.codec),o.sendBytes=i.bytes,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0,i.inputFrame?(o.captureFrameRate=i.inputFrame.frameRate,o.captureResolutionHeight=i.inputFrame.height,o.captureResolutionWidth=i.inputFrame.width):n&&(o.captureResolutionWidth=n.width,o.captureResolutionHeight=n.height),i.sentFrame?(o.sendFrameRate=i.sentFrame.frameRate,o.sendResolutionHeight=i.sentFrame.height,o.sendResolutionWidth=i.sentFrame.width):n&&(o.sendResolutionWidth=n.width,o.sendResolutionHeight=n.height),i.avgEncodeMs&&(o.encodeDelay=i.avgEncodeMs),r&&r.bitrateMax&&(o.targetSendBitrate=1e3*r.bitrateMax),o.sendPackets=i.packets,o.sendPacketsLost=i.packetsLost,o.sendJitterMs=i.jitterMs,o.sendRttMs=i.rttMs,o.totalDuration=t?t.totalDuration+1:1,o.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(i)&&(o.totalFreezeTime+=1),i.scalabilityMode&&this.scalabilityMode!==i.scalabilityMode&&(Qy.debug(\"[\".concat(this.store.clientId,\"]: The scalabilityMode of the video sending stream is \").concat(i.scalabilityMode)),this.scalabilityMode=i.scalabilityMode)}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var r;if(this.localStats.set(i,o),(null==t?void 0:t.sendResolutionWidth)!==o.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==o.sendResolutionHeight)null===(r=this.onStatsChanged)||void 0===r||r.call(this,\"resolution\",{width:o.sendResolutionWidth,height:o.sendResolutionHeight});o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case Jb.LocalAudioTrack:{const t=n,r=vV({},dP),o=e.getStats(),s=e.getLocalMedia(i);if(o){const i=o.audioSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(i){if(\"opus\"!==i.codec&&\"aac\"!==i.codec&&\"PCMU\"!==i.codec&&\"PCMA\"!==i.codec&&\"G722\"!==i.codec||(r.codecType=i.codec),i.inputLevel)r.sendVolumeLevel=Math.round(32767*i.inputLevel);else{const t=e.getLocalAudioVolume();t&&(r.sendVolumeLevel=Math.round(32767*t))}r.sendBytes=i.bytes,r.sendPackets=i.packets,r.sendPacketsLost=i.packetsLost,r.sendJitterMs=i.jitterMs,r.sendRttMs=i.rttMs,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0}}this.trafficStats&&(r.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(Jb.LocalAudioTrack,r),r&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,r);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var i,n;let[r,{videoStats:o,audioStats:s,videoPcStats:a}]=t;const c=s,d=o,l=a,u=vV({},uP),h=vV({},pP),p=vV({},hP),{audioTrack:_,videoTrack:E,audioSSRC:m,videoSSRC:f}=e.getRemoteMedia(r);let T;T=e instanceof RV?e.getStats(!0):e.getStats();const S=null===(i=T)||void 0===i?void 0:i.audioRecv.find((e=>e.ssrc===m)),g=null===(n=T)||void 0===n?void 0:n.videoRecv.find((e=>e.ssrc===f)),R=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===r));if(S&&(\"opus\"!==S.codec&&\"aac\"!==S.codec&&\"PCMU\"!==S.codec&&\"PCMA\"!==S.codec&&\"G722\"!==S.codec||(u.codecType=S.codec),S.outputLevel?u.receiveLevel=Math.round(32767*S.outputLevel):_&&(u.receiveLevel=Math.round(32767*_.getVolumeLevel())),u.receiveBytes=S.bytes,u.receivePackets=S.packets,u.receivePacketsLost=S.packetsLost,u.receivePacketsDiscarded=S.packetsDiscarded,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=S.jitterBufferMs,u.totalDuration>10&&yV.isRemoteAudioFreeze(_)&&(u.totalFreezeTime+=1)),g){\"H264\"!==g.codec&&\"H265\"!==g.codec&&\"VP8\"!==g.codec&&\"VP9\"!==g.codec&&\"AV1X\"!==g.codec&&\"AV1\"!==g.codec||(h.codecType=g.codec),h.receiveBytes=g.bytes,h.receiveBitrate=d?8*Math.max(0,h.receiveBytes-d.receiveBytes):0,h.decodeFrameRate=g.decodeFrameRate<0?0:g.decodeFrameRate,h.renderFrameRate=g.decodeFrameRate<0?0:g.decodeFrameRate,g.outputFrame&&(h.renderFrameRate=g.outputFrame.frameRate),g.receivedFrame?(h.receiveFrameRate=g.receivedFrame.frameRate,h.receiveResolutionHeight=g.receivedFrame.height,h.receiveResolutionWidth=g.receivedFrame.width):E&&(h.receiveResolutionHeight=E._videoHeight||0,h.receiveResolutionWidth=E._videoWidth||0),void 0!==g.framesRateFirefox&&(h.receiveFrameRate=Math.round(g.framesRateFirefox)),h.receivePackets=g.packets,h.receivePacketsLost=g.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=d?d.totalDuration+1:1,h.totalFreezeTime=d?d.totalFreezeTime:0,h.receiveDelay=g.jitterBufferMs||0;const t=!!f&&e.getRemoteVideoIsReady(f);E&&t&&yV.isRemoteVideoFreeze(E,g,l)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}R&&(u.end2EndDelay=R.B_ad,h.end2EndDelay=R.B_vd,u.transportDelay=R.B_ed,h.transportDelay=R.B_ed,u.currentPacketLossRate=R.B_ealr4/100,h.currentPacketLossRate=R.B_evlr4/100,p.uplinkNetworkQuality=R.B_punq?R.B_punq:0,p.downlinkNetworkQuality=R.B_pdnq?R.B_pdnq:0),this.remoteStats.set(r,{audioStats:u,videoStats:h,videoPcStats:g,networkStats:p}),_&&this.exceptionMonitor.setRemoteAudioStats(_,u),E&&this.exceptionMonitor.setRemoteVideoStats(E,h)}))}}class AV{constructor(){og(this,\"destChannelMediaInfos\",new Map),og(this,\"srcChannelMediaInfo\",void 0)}setSrcChannelInfo(e){Nb(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){Nb(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){gb(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function bV(e){if(!(e instanceof AV)){return new Sb(nv.INVALID_PARAMS,\"Config should be instance of [ChannelMediaRelayConfiguration]\").throw()}const t=e.getSrcChannelMediaInfo(),i=e.getDestChannelMediaInfo();if(!t){return new Sb(nv.INVALID_PARAMS,\"srcChannelMediaInfo should not be empty\").throw()}if(0===i.size){return new Sb(nv.INVALID_PARAMS,\"destChannelMediaInfo should not be empty\").throw()}}function wV(e){var t={},i=!1;function n(t,n){return i=!0,{done:!1,value:new GU(n=new zU((function(i){i(e[t](n))})),1)}}return t[void 0!==eg&&tg||\"@@iterator\"]=function(){return this},t.next=function(e){return i?(i=!1,e):n(\"next\",e)},\"function\"==typeof e.throw&&(t.throw=function(e){if(i)throw i=!1,e;return n(\"throw\",e)}),\"function\"==typeof e.return&&(t.return=function(e){return i?(i=!1,e):n(\"return\",e)}),t}var OV=i(JU);function NV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function DV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?NV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var PV;function LV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function kV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?LV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let MV=(PV=class e extends Kb{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")).filter((e=>{var t;return Dn(t=Object.keys(My)).call(t,e)})))]}constructor(t,i){super(t,i),og(this,\"store\",void 0),og(this,\"peerConnection\",void 0),og(this,\"remoteSDP\",void 0),og(this,\"initialOffer\",void 0),og(this,\"statsFilter\",void 0),og(this,\"useRTX\",!1),og(this,\"localCapabilities\",void 0),og(this,\"localCandidateCount\",0),og(this,\"allCandidatesReceived\",!1),og(this,\"establishPromise\",void 0),og(this,\"mutex\",new hy(\"P2PConnection-mutex\")),this.store=i,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=Dx(this.peerConnection,Dy(\"STATS_UPDATE_INTERVAL\"),void 0,kI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");const t=bM(e.sdp),i=AM(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:Dy(\"FILTER_VIDEO_FEC\"),filterAudioFec:Dy(\"FILTER_AUDIO_FEC\"),filterAudioCodec:[\"opus\"]});return this.localCapabilities=i,this.initialOffer=e,kV(kV({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:i},offerSDP:e.sdp})}catch(e){throw new rv(nv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async updateRemoteConnect(){}async connect(e){try{if(!this.initialOffer)throw new Error(\"Cannot establish P2PConnection without initial offer.\");this.remoteSDP=new class{constructor(e){og(this,\"sessionDesc\",void 0),og(this,\"localCapabilities\",void 0),og(this,\"rtpCapabilities\",void 0),og(this,\"candidates\",void 0),og(this,\"iceParameters\",void 0),og(this,\"dtlsParameters\",void 0),og(this,\"setup\",void 0),og(this,\"currentMidIndex\",void 0),og(this,\"cname\",void 0),e=Gv(e);const{iceParameters:t,dtlsParameters:i,candidates:n,rtpCapabilities:r,setup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,d=CM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE audio video\\na=msid-semantic: WMS\\na=ice-lite\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:audio\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:video\\n\");this.rtpCapabilities=r,this.candidates=n,this.iceParameters=t,this.dtlsParameters=i,this.setup=o,this.localCapabilities=s,this.cname=c;for(let e=0;e<d.mediaDescriptions.length;e++){const s=d.mediaDescriptions[e];if(s.attributes.iceUfrag=t.iceUfrag,s.attributes.icePwd=t.icePwd,s.attributes.fingerprints=i.fingerprints,s.attributes.candidates=n,s.attributes.setup=o,\"video\"===s.media.mediaType){s.media.fmts=r.videoCodecs.map((e=>e.payloadType.toString(10)));let e=r.videoCodecs.filter((e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:Dn(i=t.encodingName.toLowerCase()).call(i,a)}));0===e.length&&(e=r.videoCodecs),s.attributes.payloads=e,s.attributes.extmaps=r.videoExtensions}\"audio\"===s.media.mediaType&&(s.media.fmts=r.audioCodecs.map((e=>e.payloadType.toString(10))),s.attributes.payloads=r.audioCodecs,s.attributes.extmaps=r.audioExtensions),d.mediaDescriptions[e]=this.mungMediaDesc(s)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return CM.print(this.sessionDesc)}send(e,t,i){const{ssrcs:n,ssrcGroups:r}=DM(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===Yb.VIDEO?\"video\"===t.media.mediaType:\"audio\"===t.media.mediaType)),s=n[0].attributes.label,a=n[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(n),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(r),{id:s,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:i}=e;return this.send(t,i,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const i=[],n=[],r=[];t.attributes.ssrcs.forEach((t=>{Dn(e).call(e,t.attributes.label||\"\")?r.push(t):i.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Dn(t=r.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||n.push(e)})),t.attributes.ssrcs=i,t.attributes.ssrcGroups=n}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.mute.\"));t.attributes.direction=\"inactive\"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.unmute.\"));t.attributes.direction=\"sendonly\"}receive(e,t,i){e.forEach(((e,t)=>{const i=e._mediaStreamTrack,n=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===i.kind)),r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],e);this.sessionDesc.mediaDescriptions[n]=r}))}stopReceiving(e){}updateCandidates(e){e===qb.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>\"tcp\"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(DV(DV({},e),{},{foundation:\"tcpcandidate\",priority:Number(e.priority)-1+\"\",transport:\"tcp\",port:Number(e.port)+90+\"\"}))})):this.candidates=this.candidates.filter((e=>\"tcp\"!==e.transport));for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}restartICE(e){e=Gv(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}mungRecvMediaDsec(e,t){const i=Gv(e);return PM(i,t),kM(i,t),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,i){const n=this.sessionDesc.mediaDescriptions.find((t=>e===Yb.VIDEO?\"video\"===t.attributes.mid:\"audio\"===t.attributes.mid));if(n){const e=n.attributes.ssrcs.find((e=>e.attributes.label===t));var r;e&&(e.attributes.label=i,null===(r=e.attributes.msid)||void 0===r||r.replace(t,i))}}mungMediaDesc(e){const t=Gv(e);return LM(t),function(e){const t=e.attributes.extmaps.find((e=>\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>\"transport-cc\"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const i of t.attributes.ssrcs)if(i.attributes.label===e)return[i]}}(kV(kV({},e),{},{rtpCapabilities:e.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const t=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:t})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.connect failed; \".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new rv(nv.NOT_SUPPORTED,\"Planb mode does not support createDataChannels.\")}getPreMedia(e){}send(e,t){var i=this;return ZU((function*(){const n=yield WU(i.mutex.lock());try{if(!i.remoteSDP)throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");const r=e.map((e=>i.peerConnection.addTrack(e._mediaStreamTrack))),o=yield WU(i.peerConnection.createOffer()),s=CM.parse(o.sdp),a=e.map((e=>{const t=e._mediaStreamTrack,n=s.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!n)throw new Error(\"Cannot extract ssrc from mediaDescription.\");return function(e,t,i){const n=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),r=e.attributes.ssrcGroups;if(0===n.length)throw new Error(\"Cannot extract ssrc from plan-b SDP.\");if(r&&n.length>1){const e=r.find((e=>-1!==e.ssrcIds.indexOf(n[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:i?e.ssrcIds[1]:void 0}]:[{ssrcId:n[0].ssrcId}]}return[{ssrcId:n[0].ssrcId}]}(n,t.id,i.useRTX)}));let c;try{c=yield a}catch(e){throw r.forEach((e=>{PI()&&e.replaceTrack(null),i.peerConnection.removeTrack(e)})),e}const d=i.mungSendOfferSDP(o.sdp,e);i.remoteSDP.receive(e,t,c);const l=i.remoteSDP.toString();return yield WU(i.peerConnection.setLocalDescription({type:\"offer\",sdp:d})),yield WU(i.applySendEncodings(r,e)),yield WU(i.peerConnection.setRemoteDescription({type:\"answer\",sdp:l})),e.map(((e,t)=>{const i=e._mediaStreamTrack.id;return{localSSRC:a[t],id:i}}))}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.send failed; \".concat(e.toString()))}finally{n()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");const t=this.peerConnection.getSenders().filter((t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||\"\")}));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");t.map((e=>{PI()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const i=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(i),this.remoteSDP.stopReceiving(e);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:n})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.stopSending failed; \".concat(e.toString()))}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{id:i,mslabel:r}=this.remoteSDP.send(e,t,n),o=new Gh(((t,n)=>{const o=setTimeout((()=>{n(new Error(\"Cannot receive track, id: \".concat(i)))}),1e4),s=n=>{const a=AI();if((\"Safari\"===a.name&&11===Number(a.version)||MI())&&n.track.id!==i&&n.streams[0].id===r){var c;const r=n.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,i,n.track.id),this.peerConnection.removeEventListener(\"track\",s),clearTimeout(o),void t(r)}if(n.track.id===i)return this.peerConnection.removeEventListener(\"track\",s),clearTimeout(o),void t(n.track)};this.peerConnection.addEventListener(\"track\",s)})),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:s});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a);return{track:await o,id:i}}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const i=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(i)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");const t=this.peerConnection.getSenders().filter((t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||\"\")}));if(t.length!==e.length)throw new Error(\"sender' length doesn't match mids' length.\");t.map((e=>{if(PI()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteLocal failed; \".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");const t=this.peerConnection.getSenders().filter((t=>{var i;return-1!==e.indexOf((null===(i=t.track)||void 0===i?void 0:i.id)||\"\")}));if(t.length!==e.length)throw new Error(\"Senders' length doesn't match mids' length.\");t.map((async e=>{if(PI()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const i=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(i);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:n})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteLocal failed; \".concat(e.toString()))}}restartICE(e){var t=this;return ZU((function*(){const i=yield WU(t.mutex.lock(\"From P2PConnection.restartICE\"));try{if(!t.remoteSDP)throw new Error(\"Cannot restartICE before remoteSDP created.\");if(MD().supportPCSetConfiguration){const i=t.peerConnection.getConfiguration(),n=e===qb.RELAY?\"relay\":\"all\";i.iceTransportPolicy!==n&&(Qy.debug(\"[\".concat(t.store.clientId,\"] restartICE change iceTransportPolicy from [\").concat(i.iceTransportPolicy,\"] to [\").concat(n,\"]\")),i.iceTransportPolicy=n,t.peerConnection.setConfiguration(i))}else if(e===qb.RELAY)return;e!==qb.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield WU(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");const r=bM(n.sdp),{remoteIceParameters:o}=yield r.iceParameters;t.remoteSDP.restartICE(o);const s=t.remoteSDP.toString();yield WU(t.peerConnection.setLocalDescription(n)),yield WU(t.peerConnection.setRemoteDescription({type:\"answer\",sdp:s}))}catch(e){Qy.warning(\"[\".concat(t.store.clientId,\"] restart ICE failed, abort operation\"),e)}finally{i()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,\"closed\"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");const e=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const n=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:\"offer\",sdp:i}),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:n})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getSenders().filter((t=>{var i;return(null===(i=t.track)||void 0===i?void 0:i.id)===e}));1===i.length&&await this.applySendEncodings(i,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getSenders().find((e=>{var i;return(null===(i=e.track)||void 0===i?void 0:i.id)===t}));i&&await i.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new rv(nv.NOT_SUPPORTED,\"Planb mode does not support createDataChannels.\")}stopDataChannels(e){throw new rv(nv.NOT_SUPPORTED,\"Planb mode does not support stopDataChannels.\")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Qy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] local candidate count\"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Qy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] onicecandidate timeout, local candidate count\"),this.localCandidateCount))}),Dy(\"CANDIDATE_TIMEOUT\"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[],sdpSemantics:\"plan-b\"};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&\"off\"!==t.turnServer.mode&&(bv(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),Dy(\"USE_TURN_SERVER_OF_GATEWAY\")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy=\"relay\")})))),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turns:\".concat(e.turnServerURL,\":\").concat(e.tcpport,\"?transport=tcp\")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.udpport,\"?transport=udp\")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.tcpport,\"?transport=tcp\")}))})),t}async updateRtpSenderEncodings(e,t){var i;if(!t){t=this.peerConnection.getSenders().find((t=>{var i;return(null===(i=t.track)||void 0===i?void 0:i.id)===e._mediaStreamTrack.id}))}if(!t)return Qy.warn(\"[\".concat(e.getTrackId(),\"] no rtpSender found}\"));if(!MD().supportSetRtpSenderParameters)return Qy.warn(\"Browser not support set rtp-sender parameters\");const n={},r={};if(e instanceof Hk)switch(e._optimizationMode){case\"motion\":n.degradationPreference=\"maintain-framerate\";break;case\"detail\":n.degradationPreference=\"maintain-resolution\";break;default:n.degradationPreference=\"balanced\"}if(Dy(\"DSCP_TYPE\")&&QI()){var o;const e=Dy(\"DSCP_TYPE\");Dn(o=[\"very-low\",\"low\",\"medium\",\"high\"]).call(o,e)&&(r.networkPriority=e)}const s=t.getParameters(),a=null===(i=s.encodings)||void 0===i?void 0:i[0];a&&Object.assign(a,r),Object.assign(s,n),Qy.debug(\"[\".concat(e.getTrackId(),\"] updateRtpSenderEncodings: \").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!MD().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){const n=e[i],r=t[i];n&&r&&await this.updateRtpSenderEncodings(r,n)}}catch(e){Qy.debug(\"[\".concat(this.store.clientId,\"] Apply RTPSendEncodings failed.\"))}}mungSendOfferSDP(e,t){const i=CM.parse(e);return t.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=i.mediaDescriptions.find((e=>e.attributes.mid===n.kind));r&&PM(r,e)})),CM.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.batchReceive before remoteSDP created.\");const t=this.remoteSDP.batchSend(e).map(((t,i)=>{let{id:n,mslabel:r}=t;const{kind:o}=e[i];return new Gh(((e,t)=>{const i=setTimeout((()=>{t(new Error(\"Cannot receive track, id: \".concat(n)))}),1e4),s=t=>{const a=AI();if(\"Safari\"===a.name&&11===Number(a.version)&&t.track.id!==n&&t.streams[0].id===r){var c;const r=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,n,t.track.id),this.peerConnection.removeEventListener(\"track\",s),clearTimeout(i),void e({track:r,id:n})}if(t.track.id===n)return this.peerConnection.removeEventListener(\"track\",s),clearTimeout(i),void e({track:t.track,id:n})};this.peerConnection.addEventListener(\"track\",s)}))})),i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:i});const n=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(n),await Gh.all(t)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(MD().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}},rb(PV.prototype,\"connect\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"connect\"),PV.prototype),rb(PV.prototype,\"stopSending\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"stopSending\"),PV.prototype),rb(PV.prototype,\"receive\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"receive\"),PV.prototype),rb(PV.prototype,\"stopReceiving\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"stopReceiving\"),PV.prototype),rb(PV.prototype,\"muteRemote\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"muteRemote\"),PV.prototype),rb(PV.prototype,\"unmuteRemote\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"unmuteRemote\"),PV.prototype),rb(PV.prototype,\"muteLocal\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"muteLocal\"),PV.prototype),rb(PV.prototype,\"unmuteLocal\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"unmuteLocal\"),PV.prototype),rb(PV.prototype,\"close\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"close\"),PV.prototype),rb(PV.prototype,\"updateEncoderConfig\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"updateEncoderConfig\"),PV.prototype),rb(PV.prototype,\"updateSendParameters\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"updateSendParameters\"),PV.prototype),rb(PV.prototype,\"replaceTrack\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"replaceTrack\"),PV.prototype),rb(PV.prototype,\"getRemoteSSRC\",[UV],Object.getOwnPropertyDescriptor(PV.prototype,\"getRemoteSSRC\"),PV.prototype),PV);function UV(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"Locking from P2PConnection.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}function xV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function VV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?xV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const FV=\"9\",BV=4e4;class jV{get localCapabilities(){return Gv(this._localCapabilities)}get rtpCapabilities(){return Gv(this._rtpCapabilities)}get candidates(){return Gv(this._candidates)}get iceParameters(){return Gv(this._iceParameters)}get dtlsParameters(){return Gv(this._dtlsParameters)}constructor(e){og(this,\"sessionDesc\",void 0),og(this,\"_localCapabilities\",void 0),og(this,\"_rtpCapabilities\",void 0),og(this,\"_candidates\",void 0),og(this,\"_iceParameters\",void 0),og(this,\"_dtlsParameters\",void 0),og(this,\"setup\",void 0),og(this,\"currentMidIndex\",void 0),og(this,\"cname\",void 0),og(this,\"firefoxSsrcMidMap\",new Map),e=Gv(e);const{iceParameters:t,dtlsParameters:i,candidates:n,rtpCapabilities:r,setup:o,localCapabilities:s,cname:a}=e;this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=s,this.setup=o,this.cname=a,this.sessionDesc=this.updateRemoteRTPCapabilities(r),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){const t=this.candidates,i=this.dtlsParameters,n=this.iceParameters,r=this.rtpCapabilities.send;let o=this.sessionDesc.mediaDescriptions.length-1;for(let s=1;s<e;s++){const e=2*s+2e4,a=2*s+BV,{ssrcs:c,ssrcGroups:d}=DM([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:u}=DM([{ssrcId:a,rtx:Dy(\"USE_SUB_RTX\")?a+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:\"video\",port:FV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:r.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.videoExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:r.videoCodecs,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:\"sendonly\",rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:\"audio\",port:FV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:r.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:r.audioExtensions,fingerprints:i.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:r.audioCodecs,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:\"sendonly\",rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return CM.print(this.sessionDesc)}send(e,t,i,n){const{ssrcs:r,ssrcGroups:o}=DM(t,this.cname,Dy(\"SYNC_GROUP\")?i:void 0),s=this.findPreloadMediaDesc(r);if(s){if(kI()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,s.attributes.mid),n&&(n.twcc||n.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,n),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,r);let i;return-1===t||1===t&&(PI()||function(){const e=AI();return!(e.name!==CI.CHROME||!e.osVersion)&&Number(e.version)<=90}())||0===t&&Dy(\"USE_SUB_RTX\")||WI()?(i=this.createOrRecycleSendMedia(e,r,o,\"sendonly\",n),this.updateBundleMids()):(i=Gv(this.sessionDesc.mediaDescriptions[t]),i.attributes.direction=\"sendonly\",i.attributes.ssrcs=r,i.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(i,n)),kI()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,i.attributes.mid),{mid:i.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:i,mslabel:n}=e;return this.send(t,i,n)})),i=[];let n=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:r}=e;r&&(n=!0),i.push(t)})),{mids:i,needExchangeSDP:n}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");t.forEach((e=>{\"0\"===e.attributes.mid||kI()||WI()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction=\"inactive\",e.media.port=\"0\")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.mute.\"));t.attributes.direction=\"inactive\"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"mediaDescription not found with \".concat(e,\" in remote SDP when calling RemoteSDP.unmute.\"));t.attributes.direction=\"sendonly\"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"inactive\"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Dn(e).call(e,t.attributes.mid||\"\")));if(t.length!==e.length)throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");t.forEach((e=>{e.attributes.direction=\"recvonly\"}))}receive(e,t,i,n){e.forEach(((e,r)=>{this.createOrRecycleRecvMedia(e,[],\"recvonly\",t,i,n[r])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");t.forEach((e=>{e.media.port=\"0\",e.attributes.direction=\"inactive\"})),this.updateBundleMids()}updateRemoteRTPCapabilities(e){const t=this.sessionDesc||CM.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=ice-lite\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\");this._rtpCapabilities=e;const i=this.rtpCapabilities.send,n=this.localCapabilities.send;for(const e of t.mediaDescriptions){if(e.attributes.iceUfrag=this._iceParameters.iceUfrag,e.attributes.icePwd=this._iceParameters.icePwd,e.attributes.fingerprints=this._dtlsParameters.fingerprints,e.attributes.candidates=this._candidates,e.attributes.setup=this.setup,\"application\"===e.media.mediaType&&(e.attributes.sctpPort=\"5000\"),\"video\"===e.media.mediaType)if(0===i.videoCodecs.length){const t=n.videoCodecs.filter((e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:Dn(i=t.encodingName.toLowerCase()).call(i,\"vp8\")}))||[n.videoCodecs[0]];e.media.fmts=t.map((e=>e.payloadType.toString(10))),e.attributes.payloads=t,e.attributes.extmaps=[]}else if(e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.videoCodecs,e.attributes.extmaps=i.videoExtensions,Dy(\"PRELOAD_MEDIA_COUNT\")>0){const{ssrcs:t,ssrcGroups:i}=DM([{ssrcId:BV,rtx:Dy(\"USE_SUB_RTX\")?40001:void 0}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}if(\"audio\"===e.media.mediaType)if(0===i.audioCodecs.length){const t=n.audioCodecs.filter((e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:Dn(i=t.encodingName.toLowerCase()).call(i,\"opus\")}))||[n.audioCodecs[0]];e.media.fmts=t.map((e=>e.payloadType.toString(10))),e.attributes.payloads=t,e.attributes.extmaps=[]}else if(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions,GM(e),Dy(\"PRELOAD_MEDIA_COUNT\")>0){const{ssrcs:t,ssrcGroups:i}=DM([{ssrcId:2e4}],this.cname);e.attributes.ssrcs=t,e.attributes.ssrcGroups=i}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){const t=this._candidates.filter((e=>\"udp\"===e.transport));if(e===qb.TCP){if(0===t.length)return;if(Dy(\"TCP_CANDIDATE_ONLY\")){const e=this._candidates.filter((e=>\"tcp\"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(VV(VV({},t),{},{foundation:\"tcpcandidate\",priority:Number(t.priority)-1+\"\",transport:\"tcp\",port:Number(t.port)+90+\"\"}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(VV(VV({},t),{},{foundation:\"tcpcandidate\",priority:Number(t.priority)-1+\"\",transport:\"tcp\",port:Number(t.port)+90+\"\"}))})),this._candidates=[...t,...e]}}else if(e===qb.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>\"tcp\"===e.transport));e.forEach((e=>{t.push(VV(VV({},e),{},{foundation:\"udpcandidate\",priority:Number(e.priority)+1+\"\",transport:\"udp\",port:Number(e.port)-90+\"\"}))})),this._candidates=[...t,...e]}}else if(0===t.length){this._candidates.filter((e=>\"tcp\"===e.transport)).forEach((e=>{t.push(VV(VV({},e),{},{foundation:\"udpcandidate\",priority:Number(e.priority)+1+\"\",transport:\"udp\",port:Number(e.port)-90+\"\"}))})),this._candidates=t}else this._candidates=this._candidates.filter((e=>\"tcp\"!==e.transport));for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}restartICE(e){e=Gv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((i=>{const n=i.media.mediaType===e&&\"0\"!==i.media.port&&(\"sendonly\"===i.attributes.direction||\"sendrecv\"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(kI()){if(n){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||\"0\"!==i.attributes.mid&&\"1\"!==i.attributes.mid)||!(!e||e!==i.attributes.mid)}return!1}return n}))}createOrRecycleDataChannel(){for(const e of this.sessionDesc.mediaDescriptions)if(\"application\"===e.media.mediaType)return{mediaDesc:e,needExchangeSDP:!1};this.currentMidIndex+=1;const e=\"\".concat(this.currentMidIndex),t={media:{mediaType:\"application\",port:FV,protos:[\"UDP\",\"DTLS\",\"SCTP\"],fmts:[\"webrtc-datachannel\"]},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,mid:\"\".concat(e),sctpPort:\"5000\"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,i,n,r,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=WM(s,a,this.localCapabilities.send,s===Yb.VIDEO?n:r),d=s===Yb.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const l=\"\".concat(this.currentMidIndex);let u={media:{mediaType:s,port:FV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:d,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(l)}};u=this.mungRecvMediaDsec(u,e,o);const h=this.findFirstClosedMedia(s);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,i){const n=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")).filter((e=>{var t;return Dn(t=Object.keys(My)).call(t,e)})))],r=new Set(t);if(n.every((e=>r.has(e))))return Qy.debug(\"codecs has not changed, no need to updateRemoteCodec, codecs: \".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var i;return Dn(i=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\").call(i,t)}))));if(0===o.length)return Qy.debug(\"updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: \".concat(n,\" codecs: \").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")))];let a;if(Qy.debug(\"updateRemoteCodec, from \".concat(n,\" to \").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>\"video\"===e.media.mediaType&&\"recvonly\"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Dn(e).call(e,t.attributes.mid)&&\"recvonly\"===t.attributes.direction)),a.length!==e.length)return Qy.debug(\"updateRemoteCodec failed, because cannot find mids, mids: \".concat(e,\", codecs: \").concat(t)),!1;if(Dy(\"USE_PUB_RTX\")||Dy(\"USE_SUB_RTX\")){const e=HM(o,this.rtpCapabilities.recv.videoCodecs);o.push(...e)}this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,d=this.rtpCapabilities.recv,l=WM(Yb.VIDEO,d,c,i);return a.forEach((e=>{const t=l.map((e=>e.payloadType.toString(10)));Qy.debug(\"updateRemoteCodec mid: \".concat(e.attributes.mid,\", from \").concat(e.attributes.payloads,\" to \").concat(l)),e.attributes.payloads=l,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,i,n,r){const o=this.rtpCapabilities.send,s=e===Yb.VIDEO?o.videoCodecs:o.audioCodecs,a=e===Yb.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c=\"\".concat(this.currentMidIndex);let d={media:{mediaType:e,port:FV,protos:[\"UDP\",\"TLS\",\"RTP\",\"SAVPF\"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:\"IN\",addrtype:\"IP4\",address:\"127.0.0.1\"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:\"9\",netType:\"IN\",addressType:\"IP4\",address:\"0.0.0.0\"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:\"\".concat(c)}};d=this.mungSendMediaDesc(d,r);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>\"0\"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,i){const n=Gv(e);return LM(n),PM(n,t),kM(n,t),MM(n),UM(n,i,this.localCapabilities.send),n}mungSendMediaDesc(e,t){const i=Gv(e);return UM(i,t,this.localCapabilities.recv),GM(i),i}updateRecvMedia(e,t){const i=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==i){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],t);this.sessionDesc.mediaDescriptions[i]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>kI()?\"0\"===t.media.port&&t.media.mediaType===e:\"0\"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var i;return(null===(i=t.attributes)||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function GV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function WV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?GV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let HV=function(e){return e.BANDWIDTH=\"bandwidth\",e.CPU=\"cpu\",e.NONE=\"none\",e.OTHER=\"other\",e}({});var KV=function(e){return e[e.DOWN=0]=\"DOWN\",e[e.UP=1]=\"UP\",e}(KV||{});const YV=new Map;function qV(e,t,i,n){let{scale:r}=e;if(0===r&&n===KV.UP||r>=t.length-1&&n===KV.DOWN)return e;let o=WV(WV({},e),{},{scale:n===KV.DOWN?++r:--r});switch(i){case\"maintain-framerate\":o=WV(WV({},o),t[r].motion);break;case\"maintain-resolution\":o=WV(WV({},o),t[r].detail);break;case\"balanced\":o=WV(WV({},o),t[r].balanced)}return o}function zV(e,t){if(t){const i={overUse:0,underUse:0,adaptationList:JV(t)};YV.set(e,i)}else YV.delete(e)}function JV(e){const t=WV({},e),{bitrateMax:i,frameRate:n,scaleResolutionDownBy:r,bitrateMin:o}=t,{MIN_FRAME_RATE:s,MAX_THRESHOLD_FRAMERATE:a,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:d,BITRATE_MAX_THRESHOLD:l,BWE_SCALE_UP_THRESHOLD:u,BWE_SCALE_DOWN_THRESHOLD:h,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:_,BALANCE_BITRATE_FACTOR:E,BALANCE_FRAMERATE_FACTOR:m,BALANCE_RESOLUTION_FACTOR:f,MOTION_RESOLUTION_FACTOR:T,MOTION_BITRATE_FACTOR:S,DETAIL_FRAMERATE_FACTOR:g,DETAIL_BITRATE_FACTOR:R}=by,C=Math.min(t.frameRate,a),I=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(h,1)*i),bwe_up:i,fps_down:Math.round(Math.pow(p,1)*C),fps_up:n},balanced:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:i,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:i,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:i,bitrateMin:o}}];for(let e=1;e<=c;e++){const t={bwe_up:Math.round(Math.pow(u,e)*i),bwe_down:Math.round(Math.pow(h,e+1)*i),fps_up:Math.round(Math.pow(_,e)*C),fps_down:Math.round(Math.pow(p,e+1)*C)},a={scaleResolutionDownBy:r/Math.pow(f,e),frameRate:Math.max(Math.round(Math.pow(m,e)*n),s),bitrateMax:Math.max(Math.round(Math.pow(E,e)*i),l),bitrateMin:Math.max(Math.round(Math.pow(E,e)*o),d)},c={scaleResolutionDownBy:r/Math.pow(T,e),frameRate:n,bitrateMax:Math.max(Math.round(Math.pow(S,e)*i),l),bitrateMin:Math.max(Math.round(Math.pow(S,e)*o),d)},v={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(g,e)*n),s),bitrateMax:Math.max(Math.round(Math.pow(R,e)*i),l),bitrateMin:Math.max(Math.round(Math.pow(R,e)*o),d)};I.push({scale:e,threshold:t,balanced:a,motion:c,detail:v})}return I}function XV(e,t,i,n,r,o){const s=YV.get(e)||{overUse:0,underUse:0,adaptationList:JV(r)},{adaptationList:a}=s;YV.set(e,s);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:d}=by,{scale:l}=n;let u,h;return\"number\"==typeof t&&t>0&&function(e,t,i,n){if(t>=i.length)return!1;let{threshold:{fps_down:r}}=i[t];return Dy(\"FORCE_AG_HIGH_FRAMERATE\")&&\"maintain-framerate\"===n&&(r=i[0].threshold.fps_down),e<r}(t,l,a,o)&&(s.overUse++,h=HV.CPU,s.overUse>c)||\"number\"==typeof i&&i>0&&function(e,t,i){if(t>=i.length)return!1;const{threshold:{bwe_down:n}}=i[t];return e<n}(i,l,a)&&(s.overUse++,h=HV.BANDWIDTH,s.overUse>c)?(s.overUse=0,s.underUse=0,u=qV(n,a,o,KV.DOWN),[u,h]):(\"number\"==typeof t&&t>0&&\"number\"==typeof i&&i>0&&function(e,t,i,n){if(0===t)return;let{threshold:{fps_up:r}}=i[t];return Dy(\"FORCE_AG_HIGH_FRAMERATE\")&&\"maintain-framerate\"===n&&(r=i[1].threshold.fps_up),e>r}(t,l,a,o)&&function(e,t,i){if(0===t)return;const{threshold:{bwe_up:n}}=i[t];return e>n}(i,l,a)&&(s.underUse++,s.underUse>d&&(s.overUse=0,s.underUse=0,u=qV(n,a,o,KV.UP),0===u.scale&&(h=HV.NONE))),[u,h])}function QV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ZV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?QV(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function $V(e){var t;return!!Dy(\"ENABLE_AG_ADAPTATION\")&&(!!(e instanceof Kk||Dn(t=e._hints).call(t,eP.CUSTOM_TRACK))&&(!!Dy(\"FORCE_SUPPORT_AG_ADAPTATION\")||!!(function(e){const t=AI();if(t.os!==RI.IOS||!t.osVersion)return!1;const i=t.osVersion.split(\".\");return Number(i[0])>=e}(14)&&BI(17,4,!0)||FI(14)&&jI(17,4,!0))))}const eF=new Map;function tF(e,t){const i=eF.get(e);if(i){const{timer:t}=i;window.clearTimeout(t),eF.delete(e)}t.qualityLimitationReason=HV.NONE,zV(e)}var iF;function nF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function rF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?nF(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}let oF=(iF=class e extends Kb{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||\"\")).filter((e=>{var t;return Dn(t=Object.keys(My)).call(t,e)})))]}constructor(t,i){super(t,i),og(this,\"store\",void 0),og(this,\"peerConnection\",void 0),og(this,\"id\",ey(5,\"connection-\")),og(this,\"remoteSDP\",void 0),og(this,\"initialOffer\",void 0),og(this,\"transportEventReceiver\",void 0),og(this,\"statsFilter\",void 0),og(this,\"extension\",{useXR:Dy(\"USE_XR\")}),og(this,\"localCapabilities\",void 0),og(this,\"remoteCodecs\",void 0),og(this,\"localCandidateCount\",0),og(this,\"allCandidatesReceived\",!1),og(this,\"isPreallocation\",!1),og(this,\"preSSRCMap\",new Map),og(this,\"dataStreamChannelMap\",new Map),og(this,\"establishPromise\",void 0),og(this,\"recoveredDataChannelIds\",[]),og(this,\"currentDataChannelId\",1),og(this,\"mutex\",new hy(\"P2PConnection-mutex\")),og(this,\"qualityLimitationReason\",HV.NONE),this.store=i,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=Dx(this.peerConnection,Dy(\"STATS_UPDATE_INTERVAL\"),void 0,kI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(e){const t=this.preSSRCMap.get(e);if(void 0!==t){const e=this.peerConnection.getTransceivers().find((e=>e.mid===t));if(e)return{transceiver:e,track:e.receiver.track,id:t}}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,!this.remoteSDP)return void Qy.debug(\"[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: \".concat(this.localCodecs,\", codecs: \").concat(t));if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||\"\",\"offer\",\"local\",\"muteLocal\");await this.peerConnection.setLocalDescription(e);const i=this.remoteSDP.toString();null==t||t(i),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:i})}else Qy.debug(\"[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.\")}async establish(){try{this.peerConnection.addTransceiver(\"video\",{direction:\"recvonly\"}),this.peerConnection.addTransceiver(\"audio\",{direction:\"recvonly\"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");const t=bM(e.sdp),i=await VM({filterRTX:!Dy(\"USE_PUB_RTX\")&&!Dy(\"USE_SUB_RTX\"),filterVideoFec:Dy(\"FILTER_VIDEO_FEC\"),filterAudioFec:Dy(\"FILTER_AUDIO_FEC\"),filterVideoCodec:Dy(\"FILTER_VIDEO_CODEC\")},this.extension);return this.localCapabilities=jM(i),this.initialOffer=e,rF(rF({},t),{},{rtpCapabilities:i,offerSDP:e.sdp})}catch(e){throw new rv(nv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error(\"Cannot establish P2PConnection without initial offer.\");this.remoteSDP=new jV(rF(rF({},e),{},{localCapabilities:this.localCapabilities})),e.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const t=this.remoteSDP.toString(),i=YM(this.initialOffer.sdp,this.extension),n=this.logSDPExchange(i||\"\",\"offer\",\"local\",\"connect\");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:\"offer\",sdp:i}),null==n||n(t),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:t});const r=this.peerConnection.getTransceivers()[0];if(null!=r&&r.receiver&&this.tryBindTransportEvents(r.receiver),Dy(\"PRELOAD_MEDIA_COUNT\")>0){this.remoteSDP.preloadRemoteMedia(Dy(\"PRELOAD_MEDIA_COUNT\"));const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}const{preSSRCs:o}=e;if(Array.isArray(o)&&o.length>0){const{mids:e}=this.remoteSDP.batchSend(o.map((e=>({kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(o[t].ssrcId,e)})),await KM(this.peerConnection,this.remoteSDP,this.extension),Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] pre-batchReceive exchange SDP.\"))}}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.connect failed; \".concat(e.toString()))}}async updateRemoteConnect(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateRemoteConnect before remote SDP created\");const{rtpCapabilities:t}=e;this.remoteSDP.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:i}=e;if(Array.isArray(i)&&i.length>0){const{mids:e}=this.remoteSDP.batchSend(i.map((e=>Object.assign({},{kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(i[t].ssrcId,e)}))}await KM(this.peerConnection,this.remoteSDP,this.extension),Qy.debug(\"[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.\")}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.updateRemoteConnect failed; \".concat(e.toString()))}}send(e,t,i){var n=this;return ZU((function*(){const r=yield WU(n.mutex.lock(\"From P2PConnection.send\"));try{if(!n.remoteSDP)throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");const o=[];e.forEach((e=>{const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:\"sendonly\"});o.push(t),e._updateRtpTransceiver(t)})),kI()&&!0===Dy(\"SIMULCAST\")&&(yield WU(n.applySimulcastForFirefox(o,e)));const s=yield WU(n.peerConnection.createOffer()),a=n.remoteSDP.predictReceivingMids(e.length),c=n.mungSendOfferSDP(s.sdp,e,a),d=CM.parse(c),l=a.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error(\"Cannot extract ssrc from mediaDescription.\");return wM(t,Dy(\"USE_PUB_RTX\"))}));let u;try{u=yield l}catch(r){u=[],n.remoteSDP.receive(e,t,i,u);const o=n.remoteSDP.toString();throw yield WU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:c})),yield WU(n.peerConnection.setRemoteDescription({type:\"answer\",sdp:o})),yield WU(n.stopSending(a,!0)),r}n.remoteSDP.receive(e,t,i,u);const h=n.remoteSDP.toString(),p=n.logSDPExchange(c,\"offer\",\"local\",\"send\");return yield WU(n.peerConnection.setLocalDescription({type:\"offer\",sdp:c})),yield WU(n.applySimulcastEncodings(o,e)),yield WU(n.applySendEncodings(o,e)),null==p||p(h),yield WU(n.peerConnection.setRemoteDescription({type:\"answer\",sdp:h})),o.map(((e,t)=>{const i=a[t];return{localSSRC:l[t],id:i,transceiver:e}}))}catch(e){throw e instanceof rv?e:new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.send failed; \".concat(e.toString()))}finally{r()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.createDataChannels before remote SDP created\");let i=this.dataStreamChannelMap.get(e);if(i&&\"open\"===i.readyState)Qy.debug(\"[P2PConnection] Channels are already available and can be reused directly.\");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(\"number\"!=typeof t)throw new Error(\"create DataChannel error, because cannot get dc id\");i=this.peerConnection.createDataChannel(\"datastream-channel\",{id:t,negotiated:!0,ordered:!1,maxRetransmits:Dy(\"DATASTREAM_MAX_RETRANSMITS\")}),i.binaryType=\"arraybuffer\",this.dataStreamChannelMap.set(e,i)}t.forEach((e=>{e._updateOriginDataChannel(i)}));const{needExchangeSDP:n}=this.remoteSDP.sendDataChannel();if(n){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),Qy.debug(\"[P2PConnection] createDataChannels by exchanging SDP.\")}else Qy.debug(\"[P2PConnection] createDataChannels no need to exchange SDP.\");return}catch(e){throw e instanceof rv?e:new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.createDataChannels failed; \".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof rv?e:new rv(nv.DATACHANNEL_FAILED,\"P2PConnection.stopDataChannels failed; \".concat(e.toString()))}}async stopSending(e,t){const i=t?void 0:await this.mutex.lock(\"From P2PConnection.stopSending\");try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");t.map((e=>{var t;tF(this.id+e.mid,this),e.direction=\"inactive\",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||\"\",\"offer\",\"local\",\"stopSending\");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:o})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.stopSending failed; \".concat(e.toString()))}finally{i&&i()}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.receive \".concat(e,\" before remoteSDP created.\"));const{mid:r,needExchangeSDP:o}=this.remoteSDP.send(e,t,i,n);o&&(await KM(this.peerConnection,this.remoteSDP,this.extension),Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] receive \").concat(e,\" by exchanging SDP.\")));const s=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!s)throw new Error(\"Cannot get transceiver after setLocalDescription.\");return{track:s.receiver.track,id:r,transceiver:s}}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.batchReceive before remoteSDP created.\");const{mids:t,needExchangeSDP:i}=this.remoteSDP.batchSend(e);return i&&(await KM(this.peerConnection,this.remoteSDP,this.extension),Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PConnection] batchReceive by exchanging SDP.\"))),t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error(\"Cannot get transceiver after setLocalDescription.\");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.receive failed; \".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");e.forEach((e=>{Array.from(this.preSSRCMap.entries()).some((t=>{let[i,n]=t;if(n===e)return this.preSSRCMap.delete(i),!0}))})),this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"stopReceiving\");await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection stopReceiving failed; \".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteRemote mid=\".concat(e,\" before remote SDP created.\"));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"muteRemote\");await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteRemote failed; \".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteRemote mid=\".concat(e,\" before remote SDP created.\"));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,\"offer\",\"remote\",\"unmuteRemote\");await this.peerConnection.setRemoteDescription({type:\"offer\",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||\"\"),await this.peerConnection.setLocalDescription(n)}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteRemote failed; \".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((e=>{e.direction=\"inactive\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"muteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.muteLocal failed; \".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error(\"Transceivers' length doesn't match mids' length.\");t.map((async(e,t)=>{e.direction=\"sendonly\"}));const i=await this.peerConnection.createOffer(),n=this.logSDPExchange(i.sdp||\"\",\"offer\",\"local\",\"unmuteLocal\");await this.peerConnection.setLocalDescription(i),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==n||n(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,\"P2PConnection.unmuteLocal failed; \".concat(e.toString()))}}restartICE(e){var t=this;return ZU((function*(){const i=yield WU(t.mutex.lock(\"From P2PConnection.restartICE\"));try{if(!t.remoteSDP)throw new Error(\"Cannot restartICE before remoteSDP created.\");if(MD().supportPCSetConfiguration){const i=t.peerConnection.getConfiguration(),n=e===qb.RELAY?\"relay\":\"all\";i.iceTransportPolicy!==n&&(Qy.debug(\"[\".concat(t.store.clientId,\"] restartICE change iceTransportPolicy from [\").concat(i.iceTransportPolicy,\"] to [\").concat(n,\"]\")),i.iceTransportPolicy=n,t.peerConnection.setConfiguration(i))}else if(e===qb.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield WU(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");const r=bM(n.sdp),{remoteIceParameters:o}=yield r.iceParameters;t.remoteSDP.restartICE(o);const s=t.remoteSDP.toString(),a=t.logSDPExchange(n.sdp||\"\",\"offer\",\"local\",\"restartICE\");t.store.descriptionStart(),yield WU(t.peerConnection.setLocalDescription(n)),null==a||a(s),yield WU(t.peerConnection.setRemoteDescription({type:\"answer\",sdp:s}))}catch(e){Qy.warning(\"[\".concat(t.store.clientId,\"] restart ICE failed, abort operation\"),e)}finally{i()}}))()}close(){var e;this.peerConnection.getTransceivers().forEach((e=>{tF(this.id+e.mid,this)})),this.preSSRCMap.clear(),this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,\"closed\"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return rF(rF({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,\"offer\",\"local\",\"updateEncoderConfig\");await this.peerConnection.setLocalDescription({type:\"offer\",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:\"answer\",sdp:r})}catch(e){throw new rv(nv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const i=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===i.length&&(this.isVP8Simulcast(t)?kI()||await this.applySimulcastEncodings(i,[t]):await this.applySendEncodings(i,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const i=this.peerConnection.getTransceivers().find((e=>e.mid===t));i&&await i.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:i,remote:n}=t.getSelectedCandidatePair();return{local:rF(rF({},Ex),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:rF(rF({},Ex),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Qy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] local candidate count\"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Qy.debug(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] onicecandidate timeout, local candidate count\"),this.localCandidateCount))}),Dy(\"CANDIDATE_TIMEOUT\"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const i={iceServers:[]};return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&\"off\"!==t.turnServer.mode&&(bv(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),Dy(\"USE_TURN_SERVER_OF_GATEWAY\")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),Dy(\"FORCE_TURN_TCP\")?i.iceTransportPolicy=\"relay\":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy=\"relay\")})))),Dy(\"ENABLE_ENCODED_TRANSFORM\")&&MD().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turns:\".concat(Pw(e.turnServerURL),\":\").concat(e.tcpport,\"?transport=tcp\")}):(e.udpport&&!Dy(\"FORCE_TURN_TCP\")&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.udpport,\"?transport=udp\")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:\"password\",urls:\"turn:\".concat(e.turnServerURL,\":\").concat(e.tcpport,\"?transport=tcp\")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,\"error\"in e?e.error:e)};const i=t.iceTransport;i&&(i.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var i;e&&(null===(i=this.onICETransportStateChange)||void 0===i||i.call(this,e))},i.getSelectedCandidatePair&&(i.onselectedcandidatepairchange=()=>{if(i.getSelectedCandidatePair()){const{local:e,remote:t}=i.getSelectedCandidatePair();Qy.info(\"[\".concat(this.store.clientId,\"] [pc-\").concat(this.store.p2pId,\"] selectedcandidatepairchange: local \").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),\", remote \").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port}),\" )\"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var i,n;if(!t){const i=this.peerConnection.getSenders();t=i.find((t=>t.track===e._mediaStreamTrack))}if(!t)return Qy.warn(\"[\".concat(e.getTrackId(),\"] no rtpSender found}\"));if(this.isVP8Simulcast(e))return Qy.warn(\"[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings\");if(!MD().supportSetRtpSenderParameters)return Qy.warn(\"[updateRtpSenderEncodings] Browser not support set rtp-sender parameters\");const r={},o={};switch(e._optimizationMode){case\"motion\":r.degradationPreference=\"maintain-framerate\";break;case\"detail\":r.degradationPreference=\"maintain-resolution\";break;case\"balanced\":r.degradationPreference=\"balanced\"}const s=function(e,t){return e.getTransceivers().find((e=>e.sender.track===t||e.receiver.track===t))}(this.peerConnection,e._mediaStreamTrack),a=uL(e);if($V(e)&&s&&t&&a&&this.getLocalVideoStats&&Dn(i=[\"vp8\",\"vp9\"]).call(i,this.store.codec)){var c;const i=r.degradationPreference||(Dn(c=e._hints).call(c,eP.CUSTOM_TRACK)?Dy(\"CUSTOM_ADAPTATION_DEFAULT_MODE\"):\"maintain-framerate\");!function(e,t,i,n,r,o){if(tF(e,i),r(t),\"balanced\"!==n&&\"maintain-framerate\"!==n&&\"maintain-resolution\"!==n)return;let s=-1;zV(e,t);const a=window.setInterval((()=>{const a=eF.get(e);if(!Dy(\"ENABLE_AG_ADAPTATION\")||!a)return tF(e,i),void r(t);const c=o();if(c.sendPackets>0&&c.OutgoingAvailableBandwidth>0){if(-1===s)return void(s=Date.now());if(Date.now()-s<1e3)return;const o=c.sendFrameRate,d=c.OutgoingAvailableBandwidth,[l,u]=XV(e,o,d,a.adaptationConfig,t,n);u&&(i.qualityLimitationReason=u),l&&a.adaptationConfig.scale!==l.scale&&(Qy.debug(\"[\".concat(e,\"] applyAdaptation: \").concat(i.qualityLimitationReason,\"\\n           sendFps \").concat(o,\", bwe \").concat(d,\", switch from \").concat(a.adaptationConfig.scale,\" to \").concat(l.scale,\" \")),a.adaptationConfig=ZV(ZV({},a.adaptationConfig),l),r(l))}}),Dy(\"CHECK_LOCAL_STATS_INTERVAL\")),c=ZV({},t);eF.set(e,{timer:a,adaptationConfig:c,originConfig:t,adaptationFunc:r}),Qy.debug(\"[\".concat(e,\"] start adaptation, originConfig: \").concat(JSON.stringify(t),\", degradationPreference: \").concat(n))}(this.id+s.mid,a,this,i,(e=>{t&&this.updateAdaptation(t,e)}),this.getLocalVideoStats.bind(this))}if(e._encoderConfig){var d;const{bitrateMax:t,frameRate:i,scaleResolutionDownBy:n}=e._encoderConfig;t&&(o.maxBitrate=1e3*t),(Dn(d=e._hints).call(d,eP.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(i&&(o.maxFramerate=kw(i)),n&&n>=1&&(o.scaleResolutionDownBy=n))}const{maxFramerate:l}=Dy(\"ENCODER_CONFIG_LIMIT\");if(l&&\"number\"==typeof l&&(o.maxFramerate=o.maxFramerate?Math.min(o.maxFramerate,l):l),Dy(\"DSCP_TYPE\")&&QI()){var u;const e=Dy(\"DSCP_TYPE\");Dn(u=[\"very-low\",\"low\",\"medium\",\"high\"]).call(u,e)&&(o.networkPriority=e)}const h=t.getParameters(),p=null===(n=h.encodings)||void 0===n?void 0:n[0];kI()&&!p&&(r.encodings=[o]),p&&Object.assign(p,o),Object.assign(h,r),Qy.debug(\"[\".concat(e.getTrackId(),\"] updateRtpSenderEncodings: \").concat(JSON.stringify(h.encodings))),await t.setParameters(h),await async function(e,t,i){try{var n;if(!MD().supportSetRtpSenderParameters)return;if(!function(e){return\"vp9\"===e}(e)||!Dy(\"ENABLE_SVC\"))return;const r={},o={},s=t.getParameters(),a=null===(n=s.encodings)||void 0===n?void 0:n[0];o.scalabilityMode=IM(i),a&&Object.assign(a,o),Object.assign(s,r),await t.setParameters(s),Qy.debug(\"[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: \".concat(JSON.stringify(s.encodings)))}catch(e){Qy.debug(\"[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed\",e)}}(this.store.codec,t,Dy(\"SVC_MODE\"))}async updateAdaptation(e,t){var i,n;if(!e)return Qy.debug(\"[updateAdaptation] no rtpSender found\");if(!MD().supportSetRtpSenderParameters)return Qy.debug(\"[updateAdaptation] Browser not support set rtp-sender parameters\");const r={},{bitrateMax:o,frameRate:s,scaleResolutionDownBy:a}=t;o&&(r.maxBitrate=1e3*o),s&&(r.maxFramerate=kw(s)),a&&a>=1&&Dn(i=[\"vp8\",\"vp9\"]).call(i,this.store.codec)&&(r.scaleResolutionDownBy=a);const c=e.getParameters(),d=null===(n=c.encodings)||void 0===n?void 0:n[0];d&&Object.assign(d,r),Object.assign(c,{});try{await e.setParameters(c),Qy.debug(\"[updateAdaptation] updateRtpSenderEncodings: \".concat(JSON.stringify(c.encodings)))}catch(t){!(\"transport\"in e)||e.transport&&\"connected\"===e.transport.state?\"connected\"!==this.peerConnectionState?Qy.debug(\"[updateAdaptation] peerConnection not connected}\"):Qy.debug(\"[updateAdaptation] updateRtpSenderEncodings failed\",t):Qy.debug(\"[updateAdaptation] rtpSender transport not connected}\")}}async applySendEncodings(e,t){try{if(!MD().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){const n=e[i],r=t[i];r instanceof Hk&&!this.isVP8Simulcast(r)&&await this.updateRtpSenderEncodings(r,n.sender)}}catch(e){Qy.debug(\"[\".concat(this.store.clientId,\"] Apply RTPSendEncodings failed.\"))}}mungSendOfferSDP(e,t,i){const n=CM.parse(e);return t.forEach(((e,t)=>{const r=i[t],o=n.mediaDescriptions.find((e=>e.attributes.mid===r));o&&(PM(o,e),xM(o,e,this.store.codec))})),CM.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedLocalCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var i;null===(i=this.onSelectedRemoteCandidateChanged)||void 0===i||i.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var i,n,r,o,s;const c=e[a],d=t[a];if(d instanceof Hk&&!Dn(i=d._hints).call(i,eP.LOW_STREAM)&&null!==(n=d._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=d._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=d._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&\"vp8\"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:\"m\",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:\"h\",active:!0,maxBitrate:t.high}];const i=c.sender.getParameters();await c.sender.setParameters(Object.assign(i,e))}}}async applySimulcastEncodings(e,t){if(!kI()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof Hk&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:\"high\",priority:\"high\",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:\"low\",priority:\"low\",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,r))}}}isVP8Simulcast(e){var t,i,n,r,o;return!!(e instanceof Hk&&Dy(\"SIMULCAST\")&&\"vp8\"===this.store.codec&&!Dn(t=e._hints).call(t,eP.LOW_STREAM)&&null!==(i=e._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,i,n){if(Dy(\"SDP_LOGGING\"))return Qy.upload(\"[\".concat(this.store.clientId,\"] exchanging \").concat(i,\" \").concat(t,\" SDP during P2PConnection.\").concat(n,\"\\n\"),e),\"offer\"===t?e=>{this.logSDPExchange(e,\"answer\",\"local\"===i?\"remote\":\"local\",n)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return t&&0!==t.length?t[0].ssrcId:void 0}setConfiguration(t){if(MD().supportPCSetConfiguration){const i=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(i)}}},rb(iF.prototype,\"updateRemoteRTPCapabilities\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"updateRemoteRTPCapabilities\"),iF.prototype),rb(iF.prototype,\"connect\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"connect\"),iF.prototype),rb(iF.prototype,\"updateRemoteConnect\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"updateRemoteConnect\"),iF.prototype),rb(iF.prototype,\"createDataChannels\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"createDataChannels\"),iF.prototype),rb(iF.prototype,\"receive\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"receive\"),iF.prototype),rb(iF.prototype,\"batchReceive\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"batchReceive\"),iF.prototype),rb(iF.prototype,\"stopReceiving\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"stopReceiving\"),iF.prototype),rb(iF.prototype,\"muteRemote\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"muteRemote\"),iF.prototype),rb(iF.prototype,\"unmuteRemote\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"unmuteRemote\"),iF.prototype),rb(iF.prototype,\"muteLocal\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"muteLocal\"),iF.prototype),rb(iF.prototype,\"unmuteLocal\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"unmuteLocal\"),iF.prototype),rb(iF.prototype,\"close\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"close\"),iF.prototype),rb(iF.prototype,\"updateEncoderConfig\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"updateEncoderConfig\"),iF.prototype),rb(iF.prototype,\"updateSendParameters\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"updateSendParameters\"),iF.prototype),rb(iF.prototype,\"replaceTrack\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"replaceTrack\"),iF.prototype),rb(iF.prototype,\"updateAdaptation\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"updateAdaptation\"),iF.prototype),rb(iF.prototype,\"getRemoteSSRC\",[sF],Object.getOwnPropertyDescriptor(iF.prototype,\"getRemoteSSRC\"),iF.prototype),iF);function sF(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"From P2PConnection.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}var aF;function cF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function dF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?cF(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function lF(e){var t,i,n,r=2;for(\"undefined\"!=typeof Symbol&&(i=OV,n=Symbol.iterator);r--;){if(i&&null!=(t=e[i]))return t.call(e);if(n&&null!=(t=e[n]))return new uF(t.call(e));i=\"@@asyncIterator\",n=\"@@iterator\"}throw new TypeError(\"Object is not async iterable\")}function uF(e){function t(e){if(Object(e)!==e)return Gh.reject(new TypeError(e+\" is not an object.\"));var t=e.done;return Gh.resolve(e.value).then((function(e){return{value:e,done:t}}))}return uF=function(e){this.s=e,this.n=e.next},uF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Gh.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Gh.reject(e):t(i.apply(this.s,arguments))}},new uF(e)}let hF=(aF=class extends Sv{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(Qb.StateChange,t,this._state)}constructor(e,t){super(),og(this,\"isPlanB\",void 0),og(this,\"store\",void 0),og(this,\"statsUploader\",void 0),og(this,\"connection\",void 0),og(this,\"localTrackMap\",new Map),og(this,\"remoteUserMap\",new Map),og(this,\"localDataChannels\",[]),og(this,\"remoteDataChannelMap\",new Map),og(this,\"pendingLocalTracks\",[]),og(this,\"pendingRemoteTracks\",[]),og(this,\"pendingLocalDataChannels\",[]),og(this,\"pendingRemoteDataChannels\",[]),og(this,\"statsCollector\",void 0),og(this,\"shouldForwardP2PCreation\",void 0),og(this,\"iceFailedCount\",0),og(this,\"dtlsFailedCount\",0),og(this,\"mutex\",new hy(\"P2PChannel-mutex\")),og(this,\"_state\",Xb.Disconnected),og(this,\"_pcStatsUploadType\",Dy(\"NEW_ICE_RESTART\")?zb.FIRST_CONNECTION:zb.OLD_FIRST_CONNECTION),og(this,\"_isInRestartIce\",!1),og(this,\"_isStartRestartIce\",!1),og(this,\"_restartStates\",[\"disconnected\",\"failed\"]),og(this,\"_restartTimer\",void 0),og(this,\"_isFirstConnected\",!0),og(this,\"handleMuteLocalTrack\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleMuteLocalTrack\");try{if(!this.connection||this.state!==Xb.Connected)return void i(new rv(nv.INVALID_OPERATION,\"Cannot call P2PChannel.handleMuteLocalTrack before connection established.\"));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>\"videoLowTrack\"===e[0]));if(o){o[1].track._originMediaStreamTrack.stop()}await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createMuteMessage(r);await Mv(this,Qb.RequestMuteLocal,s),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleUnmuteLocalTrack\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleUnmuteLocalTrack\");try{if(!this.connection||this.state!==Xb.Connected)return void i(new rv(nv.INVALID_OPERATION,\"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.\"));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>\"videoLowTrack\"===e[0]));if(o){const t=o[1];if(t.track._originMediaStreamTrack.stop(),!Dy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&MD().supportDualStreamEncoding){const i=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i}else{const i=Fx(e,xv(this,Qb.RequestLowStreamParameter));t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i}await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createUnmuteMessage(r);await Mv(this,Qb.RequestUnmuteLocal,s),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleUpdateVideoEncoder\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleSetVideoEncoder\");try{const i=this.localTrackMap.get(Jb.LocalVideoTrack);if(!this.connection||!i||i.track!==e||this.state!==Xb.Connected)return void t();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),await this.connection.updateEncoderConfig(r,o),this.emit(Qb.UpdateVideoEncoder,o),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleUpdateVideoSendParameters\",(async(e,t,i)=>{const n=await this.mutex.lock(\"Locking from P2PChannel.handleUpdateVideoSendParameters\");try{const i=this.localTrackMap.get(Jb.LocalVideoTrack);if(!this.connection||!i||i.track!==e||this.state!==Xb.Connected)return void t();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),t()}catch(e){i(e)}finally{n()}})),og(this,\"handleReplaceMixingTrack\",(async(e,t,i,n)=>{if(!this.connection||this.state!==Xb.Connected)return void t();const r=sV([e]);let o;Qy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection will replace audioTrack [\").concat(r.getTrackId(),\"]\")),\"boolean\"==typeof n&&n||(o=await this.mutex.lock(\"From P2PChannel.handleReplaceMixingTrack\"));try{await this.replaceTrack(e,r),t()}catch(e){i(e)}finally{var s;null===(s=o)||void 0===s||s()}})),og(this,\"handleReplaceTrack\",(async(e,t,i,n)=>{let r;Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel handleReplaceTrack for [track-id-\").concat(e.getTrackId(),\"]\")),\"boolean\"==typeof n&&n||(r=await this.mutex.lock(\"From P2PChannel.handleReplaceTrack\"));try{var o;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(!this.connection||!i||this.state!==Xb.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,i[1].id)),this.isPlanB){const t=i[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(i[0],t)}if(i[0]===Jb.LocalVideoTrack&&!Dy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&MD().supportDualStreamEncoding){const t=this.localTrackMap.get(Jb.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}}t()}catch(e){i(e)}finally{var s;null===(s=r)||void 0===s||s()}})),og(this,\"handleGetRTCStats\",(e=>{e(this.statsCollector.getRTCStats())})),og(this,\"handleGetLocalVideoStats\",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),og(this,\"handleGetLocalAudioStats\",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),og(this,\"handleGetRemoteVideoStats\",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),og(this,\"handleGetRemoteAudioStats\",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new tV(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!MD().supportUnifiedPlan||Dy(\"CHROME_FORCE_PLAN_B\")&&QI(),this.shouldForwardP2PCreation=Dy(\"FORWARD_P2P_CREATION\")&&MD().supportPCSetConfiguration&&XI(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new MV({},this.store):new oF({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=Xb.New;const i=this.shouldForwardP2PCreation&&\"closed\"===(null===(t=this.connection)||void 0===t?void 0:t.peerConnectionState);if(this.shouldForwardP2PCreation&&!i||(i&&this.connection&&(Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.startP2PConnection ForwardP2P closed.\")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new MV(e,this.store):new oF(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new rv(nv.UNEXPECTED_ERROR,\"Cannot P2PChannel.startConnection before P2PConnection initialization .\");return this._pcStatsUploadType=Dy(\"NEW_ICE_RESTART\")?zb.FIRST_CONNECTION:zb.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new rv(nv.UNEXPECTED_ERROR,\"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .\");Dy(\"ENABLE_PREALLOC_PC\")&&this.state===Xb.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Xb.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[i]=e;return Dn(t=[Jb.LocalVideoLowTrack,Jb.LocalVideoTrack]).call(t,i)})),i=t.map((e=>{let[,{id:t}]=e;return t})),n=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof oF){if(sA.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(n),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Dn(e).call(e,this.store.codec)){const t=[\"vp9\",\"vp8\",\"h264\"].find((t=>Dn(e).call(e,t)));t&&(this.store.codec=t,Qy.debug(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\" updateRemoteRTPCapabilities] default codec is not available, hence the fallback to \").concat(t,\".\")))}this.connection.updateRemoteRTPCapabilities(i,e)}}async getEstablishParams(){var e;if(this.connection instanceof oF&&\"closed\"!==this.connection.peerConnectionState&&Dn(e=[Xb.New,Xb.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==Xb.Connected){if(this.state===Xb.Disconnected)throw new rv(nv.UNEXPECTED_ERROR,\"PeerConnection already disconnected.\");return e.forEach((e=>{var t;Dn(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)})),[]}const t=this.filterTobePublishedDataChannels(e);return 0===t.length?[]:(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),\"datachannel\",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+\"\",\"datachannel\",void 0,t)})),e.map((e=>({streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId}))))}publish(e,t,i){var n=this;return ZU((function*(){const r=yield WU(n.mutex.lock(\"From P2PChannel.publish\"));try{if(!n.connection||n.state!==Xb.Connected){if(n.state===Xb.Disconnected)throw new rv(nv.UNEXPECTED_ERROR,\"PeerConnection already disconnected.\");n.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===n.pendingLocalTracks.indexOf(e)));return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(t))}n.store.pubId=n.store.pubId+1,jU.markPublishStart(n.store.clientId,n.store.pubId);const o=n.filterTobePublishedTracks(e,t,i);if(0===o.length)return void(yield WU(n.tryToUnmuteAudio(e)));yield*wV(lF(n.doPublish(n.connection,o)))}finally{r()}}))()}doPublish(e,t){var i=this;return ZU((function*(){t.forEach((e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===Jb.LocalAudioTrack?\"audio\":\"video\",r)})),i.bindLocalTrackEvents(t);const n=t.map((e=>{let{track:t}=e;return t})),r=yield WU(e.send(t.map((e=>{let{track:t}=e;return t})),i.store.codec,i.store.audioCodec)),o=(yield WU(r.next())).value,s=i.createGatewayPublishMessage(t,o);let a;try{a=yield s}catch(e){throw r.throw(e),(null==e?void 0:e.code)===nv.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===i.pendingLocalTracks.indexOf(t)&&i.pendingLocalTracks.push(t)})),i.unbindLocalTrackEvents(t),e}const c=i.mapPubResToRemoteConfig(s,a),d=(yield WU(r.next(c))).value,l=Dy(\"ENABLE_VIDEO_SEI\");n.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&l&&(e.trackMediaType===Yb.VIDEO?await fM(t.sender,e):e.trackMediaType===Yb.AUDIO&&await async function(e){if(!MD().supportWebRTCEncodedTransform)return void Qy.warning(\"browser not support audio encoded transform\");if(pM.has(e))return;if(!e.track)return;const t={track:e.track};if(DI()){if(!e.createEncodedStreams)return void Qy.warning(\"browser not support createEncodedStreams() API\");let n=null;try{n=e.createEncodedStreams()}catch(e){return void Qy.error(\"create audio-encoded-streams error\",e&&e.message)}const r=new TransformStream({transform(n,r){t.controller||(t.controller=r),e.track&&e.track.id!==t.track.id&&(Qy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i)),r.enqueue(n)}});n.readable.pipeThrough(r).pipeTo(n.writable)}else if(PI()){if(\"undefined\"==typeof RTCRtpScriptTransform)return void Qy.warning(\"browser not support RTCRtpScriptTransform\");const n=hM(),r=new MessageChannel;await new Gh((e=>n.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(n,{name:\"tx\",port:r.port2},[r.port2]);e.transform=o,await new Gh((e=>n.onmessage=t=>{\"started\"===t.data&&e(void 0)})),r.port1.onmessage=n=>{var r;n.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==t.track.id&&(Qy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i))},t.worker=n}function i(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener(\"ended\",i)}const t=pM.get(e);if(t){pM.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){Qy.warning(e&&e.message)}}}pM.set(e,t),e.track.addEventListener(\"ended\",i)}(t.sender))})),t.forEach((e=>{let{type:t}=e;i.statsCollector.addLocalStats(t)})),i.assignLocalTracks(t,d),i.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===Jb.LocalAudioTrack?\"audio\":\"video\",void 0,r)}))}))()}async updateVideoStreamParameter(e,t){const i=this.localTrackMap.get(t);if(!i)return;if(!(i.track instanceof Hk))return Qy.warn(\"[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack\");if(!(this.connection instanceof oF||this.connection instanceof MV))return Qy.warn(\"[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB\");const{track:n}=i,r=function(e,t){const i={};return e.height&&e.width&&(i.scaleResolutionDownBy=Fw(e,t)),i.maxFramerate=e.framerate?kw(e.framerate):void 0,i.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,i}(e,n);if(n._encoderConfig||(n._encoderConfig={}),t!==Jb.LocalVideoLowTrack||!Dy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&MD().supportDualStreamEncoding)null!=r.scaleResolutionDownBy&&(n._encoderConfig.scaleResolutionDownBy=r.scaleResolutionDownBy);else{const t=n._originMediaStreamTrack;if(!t.canvas)return Qy.warn(\"[\".concat(n.getTrackId(),\"] no canvas on track\"));!function(e,t){const i=e.canvas;t.width&&(i.width=kw(t.width)),t.height&&(i.height=kw(t.height)),t.framerate&&(i.stopCapture&&i.stopCapture(),i.stopCapture=kP((()=>{!i.startCapture&&i.stopCapture&&i.stopCapture(),i.startCapture&&i.startCapture()}),kw(t.framerate)))}(t,e)}null!=r.maxBitrate&&(n._encoderConfig.bitrateMax=r.maxBitrate/1e3),null!=r.maxFramerate&&(n._encoderConfig.frameRate&&\"object\"==typeof n._encoderConfig.frameRate?n._encoderConfig.frameRate.max=r.maxFramerate:n._encoderConfig.frameRate={max:r.maxFramerate}),Qy.debug(\"[\".concat(n.getTrackId(),\"] LowStreamEncoderConfig: , \").concat(JSON.stringify(n._encoderConfig))),await this.connection.updateRtpSenderEncodings(n)}publishLowStream(e){var t=this;return ZU((function*(){if(!t.connection||t.state!==Xb.Connected)return;const i=yield WU(t.mutex.lock(\"Locking from P2PChannel.publishLowStream\"));try{const r=t.localTrackMap.get(Jb.LocalVideoTrack);if(!r)throw new rv(nv.UNEXPECTED_ERROR,\"Could not find high stream\");if(t.localTrackMap.has(Jb.LocalVideoLowTrack))throw new rv(nv.UNEXPECTED_ERROR,\"[\".concat(t.store.clientId,\"] Can't publish low stream when stream already publish\"));const o=[{track:t.getLowVideoTrack(r.track,e),type:Jb.LocalVideoLowTrack}];if(yield*wV(lF(t.doPublish(t.connection,o))),r.track.muted||!r.track.enabled){var n;const e=null===(n=t.localTrackMap.get(Jb.LocalVideoLowTrack))||void 0===n?void 0:n.id;void 0!==e&&(yield WU(t.connection.muteLocal([e])))}}finally{i()}}))()}async republish(){this.pendingLocalTracks.length>0&&(Qy.debug(\"[\".concat(this.store.clientId,\"] Emit P2PChannelEvents.RequestRePublish to republish tracks.\")),await kv(this,Qb.RequestRePublish,this.pendingLocalTracks),this.emit(Qb.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(Qy.debug(\"Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels.\"),await kv(this,Qb.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let e=this.pendingRemoteTracks.length-1;e>=0;e--){const{user:t,kind:i}=this.pendingRemoteTracks[e];(i!==Yb.AUDIO||t._audio_added_&&t._audioSSRC)&&(i!==Yb.VIDEO||t._video_added_&&t._videoSSRC)||this.pendingRemoteTracks.splice(e,1)}if(e)await kv(this,Qb.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:e,kind:t}of this.pendingRemoteTracks)await this.subscribe(e,t,t===Yb.VIDEO?e._videoSSRC:e._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(Qb.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==Xb.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const i=t.find((e=>\"videoLowTrack\"===e[0]));if(i){i[1].track.close()}return this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==Xb.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==Xb.Connected)return;const e=this.localTrackMap.get(Jb.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[Jb.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const i=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:i}]=e;return{type:t,track:i}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),i}async subscribeDataChannel(e,t){if(!this.connection||this.state!==Xb.Connected)throw new rv(nv.INVALID_OPERATION,\"Cannot subscribe remote user when peerConnection disconnected.\");const i=t.filter((t=>{var i;return!(null!==(i=this.remoteDataChannelMap.get(e))&&void 0!==i&&i.get(t.id))}));if(0!==i.length)return await this.connection.createDataChannels(e.uid,i),i.forEach((t=>{var i;this.remoteDataChannelMap.has(e)?null===(i=this.remoteDataChannelMap.get(e))||void 0===i||i.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const n=this.pendingRemoteDataChannels.findIndex((i=>{let{user:n,id:r}=i;return n.uid===e.uid&&r===t.id}));-1!==n&&this.pendingRemoteDataChannels.splice(n,1)})),i.map((e=>e.id))}async subscribe(e,t,i,n,r){var o;if(!this.connection||this.state!==Xb.Connected)throw new rv(nv.INVALID_OPERATION,\"Cannot subscribe remote user when peerConnection disconnected.\");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a,c;const d=this.connection.getPreMedia(i);if(d)Qy.debug(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] preSSRCMap has ssrcId: \").concat(i,\", no need to send sub to gateway.\")),c=d.transceiver,s=d.track,a=d.id;else if(r){const i=r.find((e=>{let{stream_type:i}=e;return i===t}));if(!i)throw new rv(nv.UNEXPECTED_ERROR,\"Cannot subscribe to remote \".concat(t,\" for user: \").concat(e.uid,\" because subscribe answer from gateway does not contain stream_type: \").concat(t,\".\"));const n=await this.connection.receive(t,i.ssrcs,String(e._uintid),i.attributes);this.connection instanceof oF&&(c=n.transceiver),s=n.track,a=n.id}else{const r=await this.connection.receive(t,[{ssrcId:i,rtx:n}],String(e._uintid),void 0);this.connection instanceof oF&&(c=r.transceiver),s=r.track,a=r.id}t===Yb.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new aM(s,e.uid,e._uintid,this.store),Qy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote audio track: \").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new sM(s,e.uid,e._uintid,this.store),Qy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote video track: \").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),Dy(\"ENABLE_VIDEO_SEI\")&&c&&(t==Yb.VIDEO?await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!MD().supportWebRTCEncodedTransform)return void Qy.warning(\"browser not support video encoded transform\");if(!e.track)return;if(TM.has(e)){const i=TM.get(e);return void(i&&(i.onSei=t.onSei))}const i={track:e.track,onSei:t.onSei};if(DI()){if(!e.createEncodedStreams)return void Qy.warning(\"browser not support createEncodedStreams() API\");let t=null;try{t=e.createEncodedStreams()}catch(e){return void Qy.error(\"create video-encoded-streams error\",e&&e.message)}const r=new TransformStream({transform(t,r){i.controller||(i.controller=r),e.track&&e.track.id!==i.track.id&&(Qy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n));const o=function(e){const t=new DataView(e.data);let i=0;for(;i+4<e.data.byteLength;){if(0===t.getUint8(i+0)&&0===t.getUint8(i+1)&&0===t.getUint8(i+2)&&1===t.getUint8(i+3)&&6===t.getUint8(i+4)){let n=i+6,r=0,o=0;for(;255===(o=t.getUint8(n++));)r+=255;r+=o;const s=EM(e.data,n,r);return new Uint8Array(s)}i++}return null}(t);o&&i.onSei&&i.onSei(o),r.enqueue(t)}});t.readable.pipeThrough(r).pipeTo(t.writable)}else if(PI()){if(\"undefined\"==typeof RTCRtpScriptTransform)return void Qy.warning(\"browser not support RTCRtpScriptTransform\");const t=hM(),r=new MessageChannel;await new Gh((e=>t.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:\"rx\",port:r.port2},[r.port2]);e.transform=o,await new Gh((e=>t.onmessage=t=>{\"started\"===t.data&&e(void 0)})),r.port1.onmessage=t=>{var r;t.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==i.track.id?(Qy.debug(\"video track changed: \".concat(i.track.id,\" => \").concat(e.track.id)),i.track.removeEventListener(\"ended\",n),i.track=e.track,i.track.addEventListener(\"ended\",n)):t.data.sei&&i.onSei&&i.onSei(t.data.sei)},i.worker=t}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener(\"ended\",n)}!function(e){const t=TM.get(e);if(t){TM.delete(e);try{var i,n;null===(i=t.controller)||void 0===i||i.terminate(),null===(n=t.worker)||void 0===n||n.terminate()}catch(e){Qy.warning(e&&e.message)}}}(e)}TM.set(e,i),e.track.addEventListener(\"ended\",n)}(c.receiver,{onSei:t=>{var i;null===(i=e._videoTrack)||void 0===i||i._onSei(t)}}):t==Yb.AUDIO&&await async function(e){if(!MD().supportWebRTCEncodedTransform)return void Qy.warning(\"browser not support audio encoded transform\");if(_M.has(e))return;const t={track:e.track};if(DI()){if(!e.createEncodedStreams)return void Qy.warning(\"browser not support createEncodedStreams() API\");let n=null;try{n=e.createEncodedStreams()}catch(e){return void Qy.error(\"create audio-encoded-streams error\",e&&e.message)}const r=new TransformStream({transform(n,r){t.controller||(t.controller=r),e.track&&e.track.id!==t.track.id&&(Qy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i)),r.enqueue(n)}});n.readable.pipeThrough(r).pipeTo(n.writable)}else if(PI()){if(\"undefined\"==typeof RTCRtpScriptTransform)return void Qy.warning(\"browser not support RTCRtpScriptTransform\");const n=hM(),r=new MessageChannel;await new Gh((e=>n.onmessage=t=>{\"registered\"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(n,{name:\"rx\",port:r.port2},[r.port2]);e.transform=o,await new Gh((e=>n.onmessage=t=>{\"started\"===t.data&&e(void 0)})),r.port1.onmessage=n=>{var r;n.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==t.track.id&&(Qy.debug(\"audio track changed: \".concat(t.track.id,\" => \").concat(e.track.id)),t.track.removeEventListener(\"ended\",i),t.track=e.track,t.track.addEventListener(\"ended\",i))},t.worker=n}function i(){e.track.removeEventListener(\"ended\",i),function(e){const t=_M.get(e);if(t){_M.delete(e);try{var i,n;null===(i=t.controller)||void 0===i||i.terminate(),null===(n=t.worker)||void 0===n||n.terminate()}catch(e){Qy.warning(e&&e.message)}}}(e)}_M.set(e,t),e.track.addEventListener(\"ended\",i)}(c.receiver));const l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const u=this.pendingRemoteTracks.findIndex((i=>{let{user:n,kind:r}=i;return n.uid===e.uid&&t===r}));-1!==u&&(this.pendingRemoteTracks.splice(u,1),this.emit(Qb.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==Xb.Connected)throw new rv(nv.INVALID_OPERATION,\"Cannot subscribeAll remote users when peerConnection disconnected.\");e=e.filter((e=>{var t;let{user:i,mediaType:n}=e;return!(null!==(t=this.remoteUserMap.get(i))&&void 0!==t&&t.has(n))}));const t=[],i=new Map;e.forEach((e=>{if(!this.connection)return;const n=this.connection.getPreMedia(e.ssrcId);n?i.set(e.ssrcId,n):t.push(e)}));const n=await this.connection.batchReceive(t.map((e=>{let{user:t,mediaType:i,ssrcId:n,rtxSsrcId:r}=e;return{kind:i,ssrcMsg:[{ssrcId:n,rtx:r}],mslabel:String(t._uintid)}})));t.forEach(((e,t)=>{i.set(e.ssrcId,n[t])})),e.forEach((e=>{let{user:t,mediaType:n,ssrcId:r}=e;const o=i.get(r);if(!o)return void Qy.debug(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] cannot find \").concat(t.uid,\" subscribe data,\").concat(n,\", \").concat(r));const{track:s,id:a,transceiver:c}=o;n===Yb.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new aM(s,t.uid,t._uintid,this.store),Qy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote audio track: \").concat(t._audioTrack.getTrackId()))),c&&t._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new sM(s,t.uid,t._uintid,this.store),Qy.info(\"[\".concat(this.store.clientId,\"] [\").concat(this.store.p2pId,\"] create remote video track: \").concat(t._videoTrack.getTrackId()))),c&&t._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._videoTrack));const d=this.remoteUserMap.get(t);d?d.set(n,a):this.remoteUserMap.set(t,new Map([[n,a]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:i,kind:r}=e;return i.uid===t.uid&&n===r}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(Qb.MediaReconnectEnd,t.uid))}))}async unsubscribe(e,t,i){const n=this.pendingRemoteTracks.filter((i=>{let{user:n,kind:r}=i;return void 0!==t?n.uid===e.uid&&t===r:n.uid===e.uid}));if(n.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===Xb.Connected||i||n.forEach((t=>{let{kind:i}=t;var n;if(i===Yb.AUDIO)null===(n=e._audioTrack)||void 0===n||n._destroy(),e._audioTrack=void 0;else if(i===Yb.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==Xb.Connected)return;const r=this.filterTobeUnSubscribedTracks(e,t);if(0===r.length)return;await this.connection.stopReceiving(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(r);return this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),r.forEach((e=>{let[t,{kind:n}]=e;var r,o;n===Yb.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(n===Yb.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),i||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(n===Yb.AUDIO){var s;if(this.unbindRemoteTrackEvents(t._audioTrack),!i)null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const i=this.filterTobeUnSubscribedDataChannels(e,t);if(0===i.length)return;t.forEach((e=>{e._close()}));const n=this.remoteDataChannelMap.get(e);return i.forEach((e=>{n&&n.delete(e.id)})),n&&0===n.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),i.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:n}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:r}=e;return void 0!==n?t.uid===i.uid&&n===r:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==Xb.Connected)return void t.forEach((e=>{let{user:t,kind:i}=e;var n;if(i===Yb.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(i===Yb.VIDEO){var r;null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0}}));const i=Jn(e).call(e,((e,t)=>{let{user:i,mediaType:n}=t;const r=this.filterTobeUnSubscribedTracks(i,n);return e.concat(r)}),[]);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const n=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:i}]=e;var n,r;i===Yb.VIDEO&&t._videoSSRC&&(null===(n=this.connection)||void 0===n||n.setStatsRemoteVideoIsReady(t._videoSSRC,!1));if(i===Yb.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0;else if(i===Yb.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),n}isPreSubScribe(e){if(!this.connection||this.state!==Xb.Connected)return!1;return!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.muteRemote has no remote user \").concat(e.uid,\".\"));if(!i.get(t))return void Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.muteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"));const n=t===Yb.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==n&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.unmuteRemote has no remote user \").concat(e.uid,\".\"));i.get(t)||Qy.warning(\"[\".concat(this.store.clientId,\"] P2PChannel.unmuteRemote has no remote user \").concat(e.uid,\" media type \").concat(t,\".\"))}getAllTracks(e){const t=this.localTrackMap.get(Jb.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rk){const i=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==Jb.LocalAudioTrack})).filter((t=>{let[i]=t;return!(e&&i===Jb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[i]=t;return!(e&&i===Jb.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,i,n,r){if(e){const i=this.localTrackMap.get(Jb.LocalAudioTrack),o=n?this.localTrackMap.get(Jb.LocalVideoLowTrack):this.localTrackMap.get(Jb.LocalVideoTrack);sA.publish(this.store.sessionId,{eventElapse:jU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==i?void 0:i.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(eP.SCREEN_TRACK)),audio:!!i,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var o;i||(i=[]);const s=i.find((e=>e instanceof tk)),a=n?null===(o=this.localTrackMap.get(Jb.LocalVideoTrack))||void 0===o?void 0:o.track:i.find((e=>e instanceof Hk));sA.publish(this.store.sessionId,{eventElapse:jU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(eP.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,i,n){const r=n===Yb.VIDEO?i._videoSSRC:i._audioSSRC;r&&sA.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Yb.VIDEO,audio:n===Yb.AUDIO,peerid:i.uid,subscribeRequestid:r,p2pid:this.store.p2pId,eventElapse:jU.measureFromSubscribeStart(this.store.clientId,r),preSsrc:this.isPreSubScribe(r)})}reset(){Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel.reset\")),this.mutex=new hy(\"P2PChannel-mutex\"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new MV({},this.store):new oF({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(Jb.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rk){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=Xb.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(Jb.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(Jb.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof Hk||t&&t.track instanceof tk?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}getRemoteMedia(e){var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(Jb.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=aE(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel.disconnectForReconnect closing P2PConnection\")),this.state=Xb.Reconnecting,Dy(\"KEEP_LAST_FRAME\")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var i;t._videoTrack&&t._videoTrack._player&&(null===(i=t._videoTrack._player.getVideoElement())||void 0===i||i.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new MV({},this.store):new oF({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[i,{track:n}]=e;switch(i){case Jb.LocalVideoTrack:Dn(t=n._hints).call(t,eP.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case Jb.LocalAudioTrack:n instanceof rk?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case Jb.LocalVideoLowTrack:}})),this.emit(Qb.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;Array.from(d_(i).call(i)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(Qb.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,i]=e;Array.from(d_(i).call(i)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel disconnected, waiting to reconnect.\")))}hasPendingRemoteDataChannel(e,t){for(const i of this.pendingRemoteDataChannels){const{user:n,id:r}=i;if((e instanceof iV?e.uid:e)===n.uid&&r===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const i of this.pendingRemoteTracks){const{user:n,kind:r}=i;if((e instanceof iV?e.uid:e)===n.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return ZU((function*(){if(!t.connection||t.state!==Xb.Connected)return;const i=yield WU(t.mutex.lock(\"From P2PChannel.restartICE\"));let n;try{n=yield WU(t.connection.restartICE(e));const r=yield WU(n.next());if(r.done)return;const o=r.value,s=yield o;switch(t.reportPCDisconnectedOrFailed(e),e){case qb.TCP:t._pcStatsUploadType=zb.TCP_RESTART;break;case qb.RELAY:t._pcStatsUploadType=zb.RELAY_RESTART;break;default:t._pcStatsUploadType=zb.OLD_RESTART}t._isInRestartIce=!0,n.next(s)}catch(e){var r;null===(r=n)||void 0===r||r.throw(e)}finally{i()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(Jb.LocalVideoTrack),i=this.localTrackMap.get(Jb.LocalAudioTrack),n=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),r=e.audioSend.find((e=>e.ssrc===(null==i?void 0:i.ssrcs[0].ssrcId)));if(!n||!r)return 1;const o=Uv(this,Qb.NeedSignalRTT),s=n?n.rttMs:void 0,a=r?r.rttMs:void 0,c=s&&a?(s+a)/2:s||a,d=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,u=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(eP.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,i=e.bitrate.actualEncoded;if(t&&i){const e=(1e3*t-i)/(1e3*t);return dA[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((i=>{let[n]=i;const r=n._audioSSRC,o=n._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===r)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=Uv(this,Qb.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*l/1500;u&&(p=.6*h*100/50+.2*l/1500+.2*u/400);t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new Gh(((t,i)=>{this.handleMuteLocalTrack(e,t,i)}))}async replaceTrack(e,t){var i;if(Qy.debug(\"[\".concat(this.store.clientId,\"] P2PChannel replaceTrack from [\").concat(e.getTrackId(),\"] to [\").concat(t.getTrackId(),\"]\")),!this.connection||this.state!==Xb.Connected)return;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(!n)return;const r=n[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:r}]),this.bindLocalTrackEvents([{track:t,type:r}]),n[1].track=t),await(null===(i=this.connection)||void 0===i?void 0:i.replaceTrack(t,n[1].id)),this.isPlanB){const e=n[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(r,e)}if(r===Jb.LocalVideoTrack&&!Dy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&MD().supportDualStreamEncoding){const t=this.localTrackMap.get(Jb.LocalVideoLowTrack);if(t){const i=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=i,t.track._originMediaStreamTrack=i,await new Gh(((e,i)=>{this.handleReplaceTrack(t.track,e,i,!0)}))}}}filterTobePublishedTracks(e,t,i){const n=[],r=this.getAllTracks();e=Bv(e=e.filter((e=>-1===r.indexOf(e))));let o,s=!1;const a=this.localTrackMap.get(Jb.LocalAudioTrack);for(const r of e){if(r instanceof Hk&&(this.localTrackMap.has(Jb.LocalVideoTrack)||s?new rv(nv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:r,type:Jb.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(r,i);n.push({track:e,type:Jb.LocalVideoLowTrack})}if(r instanceof tk)if(a){const e=a.track;if(e instanceof rk)oV([r]),e.addAudioTrack(r),this.bindLocalAudioTrackEvents(r,!0);else{const t=sV([e,r]);Qy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection will replace audioTrack [\").concat(t.getTrackId(),\"]\")),this.replaceTrack(e,t)}}else if(o instanceof rk)oV([r]),o.addAudioTrack(r);else if(o||!r._useAudioElement&&MD().webAudioMediaStreamDest&&!r._bypassWebAudio){o=sV(o?[r,o]:[r])}else o=r}return o&&(Qy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection will send audioTrack [\").concat(o.getTrackId(),\"]\")),n.push({track:o,type:Jb.LocalAudioTrack})),n}filterTobeUnpublishedTracks(e){const t=[],i=this.getAllTracks();e=Bv(e=e.filter((e=>-1!==i.indexOf(e))));for(const i of e){if(i instanceof tk){const e=this.localTrackMap.get(Jb.LocalAudioTrack);if(!e)continue;e.track instanceof rk?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([Jb.LocalAudioTrack,e]),e.track.close())):t.push([Jb.LocalAudioTrack,e])}if(i instanceof Hk){const e=this.localTrackMap.get(Jb.LocalVideoTrack);if(!e)continue;t.push([Jb.LocalVideoTrack,e]);const i=this.localTrackMap.get(Jb.LocalVideoLowTrack);i&&t.push([Jb.LocalVideoLowTrack,i])}}return t}filterTobePublishedDataChannels(e){return e=(e=Bv(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return e=(e=(e=Bv(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:i}=e;switch(i){case Jb.LocalVideoTrack:t.addListener($D.GET_STATS,this.handleGetLocalVideoStats),t.addListener($D.GET_RTC_STATS,this.handleGetRTCStats),t.addListener($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener($D.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener($D.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Jb.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case Jb.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rk?e.trackList.forEach((e=>{e.addListener($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener($D.GET_STATS,this.handleGetLocalAudioStats),e.addListener($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener($D.GET_STATS,this.handleGetLocalAudioStats),e.addListener($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener($D.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:i}]=e;return{track:i,type:t}}))),e.forEach((e=>{let{track:t,type:i}=e;switch(i){case Jb.LocalVideoTrack:t.off($D.GET_STATS,this.handleGetLocalVideoStats),t.off($D.GET_RTC_STATS,this.handleGetRTCStats),t.off($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off($D.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off($D.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Jb.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case Jb.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rk?e.trackList.forEach((e=>{e.off($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off($D.GET_STATS,this.handleGetLocalAudioStats),e.off($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off($D.GET_STATS,this.handleGetLocalAudioStats),e.off($D.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off($D.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off($D.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off($D.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off($D.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof sM&&t.addListener($D.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof aM&&t.addListener($D.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners($D.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,i]=e;i.has(Yb.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),i.has(Yb.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,i)=>{var n;let r,o,{track:s,type:a}=e;switch(a){case Jb.LocalAudioTrack:r=Mb.Audio,o={dtx:s instanceof ik&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Jb.LocalVideoTrack:r=Dn(n=s._hints).call(n,eP.SCREEN_TRACK)?Mb.Screen:Mb.High,o=dF(dF({},Mw(s)),{},{codec:this.store.codec,svc_mode:IM()});break;case Jb.LocalVideoLowTrack:r=Mb.Low,o=dF(dF({},Mw(s)),{},{codec:this.store.codec,svc_mode:IM()})}return{stream_type:r,attributes:o,ssrcs:t[i]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case Jb.LocalVideoTrack:i=Dn(t=r._hints).call(t,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalAudioTrack:i=Mb.Audio;break;case Jb.LocalVideoLowTrack:i=Mb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,i)=>{let{track:n,type:r}=e;this.localTrackMap.set(r,{track:n,id:t[i].id,ssrcs:t[i].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onConnectionStateChange(\").concat(t,\")\")),this.emit(Qb.PeerConnectionStateChange,t),\"connected\"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),\"connected\"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),Dy(\"NEW_ICE_RESTART\")){var i;if(Dn(i=this._restartStates).call(i,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{if(\"disconnected\"===e.iceConnectionState||\"checking\"===e.iceConnectionState||\"failed\"===e.iceConnectionState){Qy.debug(\"[\".concat(this.store.clientId,\"] [P2PChannel] start use restartICE, type is \").concat(t));\"CONNECTED\"===Uv(this,Qb.QueryClientConnectionState)&&this.emit(Qb.RequestRestartICE,t)}},i=()=>{\"disconnected\"!==e.iceConnectionState&&\"checking\"!==e.iceConnectionState&&\"failed\"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),Qy.debug(\"[\".concat(this.store.clientId,\"] P2PConnection disconnected timeout, force reconnect\")),setTimeout((()=>this.emit(Qb.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},n=Dy(\"ICE_RESTART_INTERVAL\");return void(this._restartTimer=window.setTimeout((()=>{if(Dy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE\")&&MD().supportPCSetConfiguration)t(qb.RELAY),this._restartTimer=window.setTimeout(i,n);else if(kI())t(qb.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(t(qb.TCP),MD().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(qb.RELAY),this._restartTimer=window.setTimeout(i,n)}),n));this._restartTimer=window.setTimeout(i,n)}}),800))}}else{if(\"disconnected\"===t&&\"disconnected\"===e.iceConnectionState)return setTimeout((()=>{if(\"disconnected\"===e.iceConnectionState&&Dy(\"ICE_RESTART\")){\"CONNECTED\"===Uv(this,Qb.QueryClientConnectionState)&&this.emit(Qb.RequestRestartICE)}}),800),void setTimeout((()=>{\"disconnected\"===e.peerConnectionState&&(Qy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection disconnected timeout 4000ms, force reconnect\")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(Qb.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);\"failed\"===t&&(Qy.debug(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection state failed, force reconnect\")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(Qb.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{\"connected\"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICEConnectionStateChange(\").concat(e,\")\")),sA.reportApiInvoke(this.store.sessionId,{name:\"ICEConnectionStateChange\",options:e,tag:Iv.TRACER}).onSuccess(),this.emit(Qb.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onICETransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportStateChange=e=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportStateChange(\").concat(e,\")\"))},e.onDTLSTransportError=e=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.onDTLSTransportError(\").concat(e,\")\"))},e.onFirstAudioDecoded=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var n;i&&(this.store.subscribe(i.uid,\"audio\",void 0,void 0,void 0,Date.now()),null===(n=i.audioTrack)||void 0===n||n.emit(sP.FIRST_FRAME_DECODED),sA.firstRemoteFrame(this.store.sessionId,tA.FIRST_AUDIO_DECODE,iA.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));i&&sA.firstRemoteFrame(this.store.sessionId,tA.FIRST_AUDIO_RECEIVED,iA.FIRST_AUDIO_RECEIVED,{peer:i._uintid,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,i)=>{this.reportVideoFirstFrameDecoded(e,t,i)},e.onFirstVideoReceived=e=>{var t;const i=Array.from(d_(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));i&&sA.firstRemoteFrame(this.store.sessionId,tA.FIRST_VIDEO_RECEIVED,iA.FIRST_VIDEO_RECEIVED,{peer:i._uintid,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const i=\"relay\"===e.candidateType,n=\"relay\"===t.candidateType;\"unknown\"!==t.candidateType&&i===n||this.emit(Qb.ConnectionTypeChange,i),Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedLocalCandidateChanged(\").concat(JSON.stringify(Bw(t)),\" -> \").concat(JSON.stringify(Bw(e)),\")\"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{Qy.info(\"[\".concat(this.store.clientId,\"] [p2pId: \").concat(this.store.p2pId,\"]: P2PConnection.SelectedRemoteCandidateChanged(\").concat(JSON.stringify(Bw(t)),\" -> \").concat(JSON.stringify(Bw(e)),\")\"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const e=this.statsCollector.getLocalVideoTrackStats(),t=this.statsCollector.getRTCStats();return dF(dF({},e),t)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const i=this.localTrackMap.get(Jb.LocalAudioTrack);if(e instanceof tk&&(null==i?void 0:i.track)instanceof rk)return i.track.isActive||t.push([Jb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n&&(t.push(n),n[0]===Jb.LocalVideoTrack)){const e=this.localTrackMap.get(Jb.LocalVideoLowTrack);e&&t.push([Jb.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],i=this.localTrackMap.get(Jb.LocalAudioTrack);if(e instanceof tk&&(null==i?void 0:i.track)instanceof rk)return i.track.isActive&&t.push([Jb.LocalAudioTrack,i]),t;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:i}]=t;return e===i}));if(n)if(n[0]===Jb.LocalVideoTrack){t.push(n);const e=this.localTrackMap.get(Jb.LocalVideoLowTrack);e&&t.push([Jb.LocalVideoLowTrack,e])}else t.push(n);return t}createMuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case Jb.LocalAudioTrack:i=Mb.Audio;break;case Jb.LocalVideoTrack:i=Dn(t=r._hints).call(t,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalVideoLowTrack:i=Mb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let i,[n,{track:r,ssrcs:o,id:s}]=e;switch(n){case Jb.LocalAudioTrack:i=Mb.Audio;break;case Jb.LocalVideoTrack:i=Dn(t=r._hints).call(t,eP.SCREEN_TRACK)?Mb.Screen:Mb.High;break;case Jb.LocalVideoLowTrack:i=Mb.Low}return{stream_type:i,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const i=[],n=this.remoteUserMap.get(e);if(!n)return i;if(t){const r=n.get(t);if(!r)return i;i.push([e,{kind:t,id:r}])}else Array.from(n.entries()).forEach((t=>{let[n,r]=t;i.push([e,{kind:n,id:r}])}));return i}filterTobeUnSubscribedDataChannels(e,t){const i=[];return t.forEach((t=>{var n;null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.has(t.id)&&i.push(t)})),i}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[i,{kind:n,id:r}]=e;switch(n){case Yb.VIDEO:return void(i._videoSSRC&&t.push({stream_type:Yb.VIDEO,ssrcId:i._videoSSRC}));case Yb.AUDIO:return void(i._audioSSRC&&t.push({stream_type:Yb.AUDIO,ssrcId:i._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[i,{kind:n}]=e;if(t.has(i)){let e=t.get(i);n===Yb.VIDEO?e|=Vb.Video:e|=Vb.Audio,t.set(i,e)}else n===Yb.VIDEO?t.set(i,Vb.Video):t.set(i,Vb.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,i]=e;return{stream_id:t.uid,stream_type:i}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:i}]=e;const n=this.remoteUserMap.get(t);n&&(n.delete(i),0===Array.from(n.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(Jb.LocalVideoTrack),i=this.localTrackMap.get(Jb.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),i&&e.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.connection){return\"connected\"!==this.connection.peerConnectionState}return!0}mapPubResToRemoteConfig(e,t){return e.map(((e,i)=>{var n;let{stream_type:r}=e;return null===(n=t.find((e=>{let{stream_type:t}=e;return r===t})))||void 0===n?void 0:n.attributes}))}async tryToUnmuteAudio(e){for(let i=0;i<e.length;i++)if(e[i]instanceof tk){var t;const n=this.filterTobeUnmutedTracks(e[i]);if(0===n.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(n.map((e=>{let[,{id:t}]=e;return t}))));const r=this.createUnmuteMessage(n);return void await Mv(this,Qb.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Qb.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Qb.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await $v(Ey(this.dtlsFailedCount,_y)),this.emit(Qb.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await kv(this,Qb.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(Qb.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Jb.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof Hk))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof Hk)).length>1)throw new rv(nv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof tk)).length>1&&(e.some((e=>e instanceof tk&&e._bypassWebAudio))||!MD().webAudioMediaStreamDest))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");for(const t of e){if(t instanceof Hk&&this.pendingLocalTracks.some((e=>e instanceof Hk)))throw new rv(nv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof tk&&this.pendingLocalTracks.some((e=>e instanceof tk))&&(!MD().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof tk&&e._bypassWebAudio))))throw new rv(nv.NOT_SUPPORTED,\"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\")}}getLowVideoTrack(e,t){const i=!Dy(\"DISABLE_DUAL_STREAM_USE_ENCODING\")&&MD().supportDualStreamEncoding,n=dF(dF({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=i?e._mediaStreamTrack.clone():Fx(e,n);const o=ey(8,\"track-low-\"),s=new Hk(r,dF(dF({},i&&{scaleResolutionDownBy:Fw(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return s.on(rP.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,tP.LOW_STREAM)})),s._hints.push(eP.LOW_STREAM),e.on(\"sei-to-send\",(e=>{s.emit(\"sei-to-send\",e)})),e.addListener($D.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.mutex.lock(\"From P2PChannel.globalLock\")}async reportPCStats(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof oF){var r,o,s,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:d,dtlsTransportState:l,peerConnectionState:u}=this.connection,{local:h,remote:p}=await this.connection.getSelectedCandidatePair();sA.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:d,dtlsstate:l,connectionstate:u,intSucc:t?1:2,error:n,selectedLocalCandidateProtocol:null!==(r=null==h?void 0:h.protocol)&&void 0!==r?r:\"\",selectedLocalCandidateType:null!==(o=h.candidateType)&&void 0!==o?o:\"\",selectedLocalCandidateAddress:\"\".concat(h.address,\":\").concat(h.port),selectedRemoteCandidateProtocol:null!==(s=p.protocol)&&void 0!==s?s:\"\",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:\"\",selectedRemoteCandidateAddress:\"\".concat(p.address,\":\").concat(p.port),restartCnt:i,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,i,n){var r;const o=Array.from(d_(r=this.remoteUserMap).call(r)).find((t=>t._videoSSRC===e));if(o){n||this.store.subscribe(o.uid,\"video\",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,s=r.subscribe.find((e=>e.userId===o.uid&&\"video\"===e.type));sA.firstRemoteVideoDecode(this.store.sessionId,tA.FIRST_VIDEO_DECODE,iA.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:i,subscribeElapse:jU.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:n?1:0,firstFrame:(null==s?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,i){if(!this.connection)return!1;const n=this.remoteUserMap.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const o=await this.connection.getRemoteSSRC(r);return void 0!==o&&o!==i}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:i}]=e;t===Jb.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,tP.LOW_STREAM):i._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof oF&&(\"disconnected\"!==this.connection.iceConnectionState&&\"checking\"!==this.connection.iceConnectionState&&\"failed\"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===zb.TCP_RESTART&&e===qb.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,zb.DISCONNECTED_OR_FAILED)))}},rb(aF.prototype,\"startP2PConnection\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"startP2PConnection\"),aF.prototype),rb(aF.prototype,\"connect\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"connect\"),aF.prototype),rb(aF.prototype,\"updateRemoteRTPCapabilities\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"updateRemoteRTPCapabilities\"),aF.prototype),rb(aF.prototype,\"publishDataChannel\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"publishDataChannel\"),aF.prototype),rb(aF.prototype,\"unpublish\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"unpublish\"),aF.prototype),rb(aF.prototype,\"unpublishDataChannel\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"unpublishDataChannel\"),aF.prototype),rb(aF.prototype,\"unpublishLowStream\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"unpublishLowStream\"),aF.prototype),rb(aF.prototype,\"subscribeDataChannel\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"subscribeDataChannel\"),aF.prototype),rb(aF.prototype,\"subscribe\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"subscribe\"),aF.prototype),rb(aF.prototype,\"massSubscribe\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"massSubscribe\"),aF.prototype),rb(aF.prototype,\"unsubscribe\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"unsubscribe\"),aF.prototype),rb(aF.prototype,\"unsubscribeDataChannel\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"unsubscribeDataChannel\"),aF.prototype),rb(aF.prototype,\"massUnsubscribe\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"massUnsubscribe\"),aF.prototype),rb(aF.prototype,\"muteRemote\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"muteRemote\"),aF.prototype),rb(aF.prototype,\"unmuteRemote\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"unmuteRemote\"),aF.prototype),rb(aF.prototype,\"hasRemoteMediaWithLock\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"hasRemoteMediaWithLock\"),aF.prototype),rb(aF.prototype,\"disconnectForReconnect\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"disconnectForReconnect\"),aF.prototype),rb(aF.prototype,\"updateBitrateLimit\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"updateBitrateLimit\"),aF.prototype),rb(aF.prototype,\"remoteMediaSsrcChanged\",[pF],Object.getOwnPropertyDescriptor(aF.prototype,\"remoteMediaSsrcChanged\"),aF.prototype),aF);function pF(e,t,i){const n=e[t];if(\"function\"!=typeof n)throw new Error(\"Cannot use mutex on object property.\");return i.value=async function(){const e=this.mutex,i=await e.lock(\"From P2PChannel.\".concat(t));try{for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return await n.apply(this,o)}finally{i()}},i}const _F={};function EF(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&Qy.debug(\"install service \".concat(e.name)),_F[e.name]=e}function mF(e){const t=_F[e];if(!t)throw new rv(nv.INVALID_OPERATION,\"\".concat(e,\" not found, please use AgoraRTC.use(\").concat(e,\"Service) to load it first\"));return t}function fF(e,t){return mF(\"DataStream\").create(e,t)}function TF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function SF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?TF(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):TF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const gF=Date.now(),RF=20,CF=new Map,IF=new Map;async function vF(e){const t=CF.get(e),i=Array.isArray(t)&&t[t.length-1],n=IF.get(e);if(!i)return void(n.isSyncing=!1);const r={uid:i.uid,payload:i.payload};0===n.firstRecvTs&&(n.firstRecvTs=i.recvTs,n.firstSendTs=i.sendTs);const o=i.sendTs-n.firstSendTs,s=o-(Date.now()-n.firstRecvTs);s>0&&(n.firstRecvTs=Date.now()-o);let a=i.mediaDelay+s;a<=0?(t.pop(),yF(i.context,r),a=0):a=Math.min(a,RF),setTimeout((()=>t.length&&vF(e)),a)}function yF(e,t){e.safeEmit(Nv.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function AF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return yF(i,{uid:e.uid,payload:e.payload});const n=\"\".concat(i.id,\"-\").concat(e.uid),r=CF.get(n)||[],o=r.findIndex((t=>e.sendTs>=t.sendTs)),s=SF(SF({},e),{},{context:i,mediaDelay:t,recvTs:Date.now()});-1===o?r.push(s):r.splice(o,0,s),CF.set(n,r);let a=!1;var c;IF.has(n)?a=!(null===(c=IF.get(n))||void 0===c||!c.isSyncing):IF.set(n,{isSyncing:a,firstRecvTs:0,firstSendTs:0});a||vF(n)}const bF=AI().name;function wF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function OF(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?wF(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wF(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const NF=\"websdk_ng_cache_parameter\",DF=Dy(\"MAX_PRELOAD_ASYNC_LENGTH\"),PF=1e4,LF=new Map,kF=[];let MF=null,UF=0,xF=0;const VF=new Map,FF=function(e,t){const i=[];let n=0;const r=async()=>{const e=i.shift();e&&await e(),i.length>0&&n<t?r():n--};return async function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return new Gh((async(o,a)=>{i.push((async()=>{try{const t=await e(...s);o(t)}catch(e){a(e)}})),n<t&&(n++,r())}))}}(jF,DF),BF=EI.CancelToken.source();async function jF(e,t,i,n,r,o){try{if(!Dy(\"ENABLE_PRELOAD\"))return;if(!MD().supportWebCrypto)return void Kv((()=>{Qy.warn(\"Your browser does not support preloading, this feature  be run in a secure environment\")}),\"preload_webcrypto_not_supported\");if(!i&&null!==i)throw new rv(nv.INVALID_PARAMS,\"Invalid token: \".concat(i,\". If you don not use token, set it to null\"));i&&dv(i,\"token\",1,2047),dv(e,\"appid\",1,2047),gb(t),n&&Rb(n);const s=ty();Qy.debug(\"preload channel \".concat(t,\", uid is \").concat(n));const a={appId:e,cname:t,token:i||e,uid:\"string\"!=typeof n?n:null,sid:s,proxyServer:r};let c,d;\"string\"==typeof n?(a.stringUid=n,[d,c]=await Gh.all([NU(n,{sid:s,appId:e},BF.token),PU(OF(OF({},a),{},{token:i||e,uid:0}),BF.token)]),a.uid=d.uid,c.gatewayInfo.uid=a.uid,c.gatewayInfo.res.uid=a.uid):(o&&(a.stringUid=o),c=await PU(a,BF.token));const l={sid:s,appId:e,cname:t,token:i||e,uid:a.stringUid||n,intUid:a.uid||c.gatewayInfo.uid,stringUid:a.stringUid,ts:Date.now(),sua:d,ap:c};await async function(e){let t;try{e.uid&&WF({appId:e.appId,cname:e.cname,token:e.token,uid:e.uid,stringUid:e.stringUid});const i=JF(e),n=await async function(e,t){try{const i=await window.crypto.subtle.importKey(\"raw\",zv(t),\"AES-GCM\",!1,[\"encrypt\"]),n=await window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:new Uint8Array(1)},i,Yv(window.btoa(JSON.stringify(e))));return qv(new Uint8Array(n))}catch(e){return}}(e,e.token||e.appId);if(!n)return;t=qF(NF);const r=t?JSON.parse(t):[];r.push({[i]:n}),r.length>Dy(\"AP_CACHE_NUM\")&&r.shift(),zF(NF,JSON.stringify(r))}catch(e){Qy.warn(\"Error caching server parameters:\",e.message),zF(NF,\"\")}}(l),UF++}catch(e){throw xF++,function(e){MF||(MF=window.setTimeout((()=>{let t=\"\";VF.forEach(((e,i)=>{t+=\"\".concat(i,\": \").concat(e,\" ;\")})),sA.reportApiInvoke(null,{name:Cv.PRELOAD,options:{success:UF,failed:xF,err:t}}).onError(e),UF=0,xF=0,VF.clear(),MF=null}),PF));const t=VF.get(e.code)||0;VF.set(e.code,t+1)}(e),e}}async function GF(e){try{const t=WF(e);if(!t||\"disabled\"!==e.cloudProxyServer)return;const i=await async function(e,t){try{const i=await window.crypto.subtle.importKey(\"raw\",zv(t),\"AES-GCM\",!1,[\"decrypt\"]),n=await window.crypto.subtle.decrypt({name:\"AES-GCM\",iv:new Uint8Array(1)},i,Yv(e));return JSON.parse(window.atob(qv(new Uint8Array(n))))}catch(e){return}}(t,e.token||e.appId);if(!i)return;if(!function(e,t){const i=e.cname===t.cname&&e.appId===t.appId&&e.token===t.token;if(!i)return!1;return t.stringUid?e.stringUid===t.stringUid:\"number\"==typeof t.uid?e.uid===t.uid:e.uid==t.uid}(i,e))return;if(i&&Date.now()-i.ts<Dy(\"AP_CACHE_LIFETIME\"))return i}catch(e){Qy.warn(\"Error get preloadInfo\",e.message)}}function WF(e){let t;try{if(t=qF(NF),!t)return;const i=JSON.parse(t),n=JF(e),r=function(e,t){for(let i=e.length-1;i>=0;i--)if(t(e[i]))return i;return-1}(i,(e=>n in e));if(-1===r)return;const o=i.splice(r,1)[0];return zF(NF,JSON.stringify(i)),o[n]}catch(e){Qy.warn(\"Error delete preload info: \".concat(t),e.message),zF(NF,\"\")}}function HF(e){if(e){let t=LF.get(e);t&&(window.clearTimeout(t),t=null,LF.delete(e)),Dn(kF).call(kF,e)||\"disabled\"!==e.cloudProxyServer||kF.push(e)}if(LF.size<Dy(\"AP_CACHE_NUM\")&&kF.length>0){const e=kF.shift();LF.set(e,window.setTimeout((async()=>{const{appId:t,cname:i,token:n,stringUid:r,uid:o,proxyServer:s}=e;try{await FF(t,i,n,o,s,r),LF.has(e)&&HF(e)}catch(t){Qy.warn(\"update preload failed\",t.message),KF(e)}}),Dy(\"AP_UPDATE_INTERVAL\")))}}function KF(e){const t=kF.indexOf(e);-1!==t&&kF.splice(t,1);let i=LF.get(e);i&&(window.clearTimeout(i),i=null,LF.delete(e),HF())}function YF(e,t){const i=e.sua,n=e.ap;t&&i&&sA.reqUserAccount(e.sid,{lts:i.requestTime,elapse:i.elapse,success:!0,serverAddr:i.url,stringUid:t,uid:e.intUid,errorCode:null,extend:i.req}),sA.reportResourceTiming(e.ap.url,e.sid),sA.joinWebProxyAP(e.sid,{lts:n.requestTime,elapse:n.elapse,sucess:1,apServerAddr:n.url,turnServerAddrList:n.proxyInfo.addresses.map((e=>e.ip)).join(\",\"),eventType:\"disabled\",unilbsServerIds:[Ow.CHOOSE_SERVER,Ow.CLOUD_PROXY_FALLBACK].toString()}),sA.joinChooseServer(e.sid,{lts:n.requestTime,elapse:n.elapse,succ:!0,csAddr:n.url,opid:n.opid,serverList:n.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,cid:n.gatewayInfo.cid.toString(),uid:n.gatewayInfo.uid.toString(),csIp:n.gatewayInfo.csIp,unilbsServerIds:[Ow.CHOOSE_SERVER].toString(),isHttp3:n.isHttp3})}function qF(e){return window.atob(window.localStorage.getItem(e)||\"\")}function zF(e,t){window.localStorage.setItem(e,window.btoa(t))}function JF(e){let t=\"\".concat(e.appId,\"_\").concat(e.cname);return\"string\"==typeof e.uid&&(t+=\"_s_\".concat(e.uid)),\"number\"==typeof e.uid&&(t+=\"_\".concat(e.uid)),e.token&&(t+=\"_\".concat(e.token)),dy(t)}function XF(e){let t=function(){const e=eB.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let i=e.appId;void 0!==i&&(uB(t,10),aB(t,i));let n=e.cid;void 0!==n&&(uB(t,16),uB(t,n));let r=e.cname;void 0!==r&&(uB(t,26),aB(t,r));let o=e.deviceId;void 0!==o&&(uB(t,34),aB(t,o));let s=e.elapse;void 0!==s&&(uB(t,40),pB(t,s));let a=e.fileSize;void 0!==a&&(uB(t,48),pB(t,$F(a)));let c=e.height;void 0!==c&&(uB(t,56),pB(t,$F(c)));let d=e.jpg;void 0!==d&&(uB(t,66),uB(t,d.length),oB(t,d));let l=e.networkType;void 0!==l&&(uB(t,72),pB(t,$F(l)));let u=e.osType;void 0!==u&&(uB(t,80),pB(t,$F(u)));let h=e.requestId;void 0!==h&&(uB(t,90),aB(t,h));let p=e.sdkVersion;void 0!==p&&(uB(t,98),aB(t,p));let _=e.sequence;void 0!==_&&(uB(t,104),pB(t,$F(_)));let E=e.sid;void 0!==E&&(uB(t,114),aB(t,E));let m=e.timestamp;void 0!==m&&(uB(t,120),pB(t,m));let f=e.uid;void 0!==f&&(uB(t,128),uB(t,f));let T=e.vid;void 0!==T&&(uB(t,136),uB(t,T));let S=e.width;void 0!==S&&(uB(t,144),pB(t,$F(S)));let g=e.service;void 0!==g&&(uB(t,152),uB(t,g));let R=e.callbackData;void 0!==R&&(uB(t,162),uB(t,R.length),oB(t,R));let C=e.ticket;void 0!==C&&(uB(t,170),aB(t,C));let I=e.vendorConfigs;void 0!==I&&(uB(t,178),aB(t,I))}(e,t),function(e){let t=e.bytes,i=e.limit;return t.length===i?t:t.subarray(0,i)}(t)}function QF(e){return function(e){let t={};e:for(;!iB(e);){let i=lB(e);switch(i>>>3){case 0:break e;case 1:t.code=lB(e);break;case 2:t.msg=sB(e,lB(e));break;case 3:t.requestId=sB(e,lB(e));break;case 4:t.timestamp=hB(e,!1);break;default:ZF(e,7&i)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function ZF(e,t){switch(t){case 0:for(;128&cB(e););break;case 2:tB(e,lB(e));break;case 5:tB(e,4);break;case 1:tB(e,8);break;default:throw new Error(\"Unimplemented type: \"+t)}}function $F(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let eB=[];function tB(e,t){if(e.offset+t>e.limit)throw new Error(\"Skip past limit\");e.offset+=t}function iB(e){return e.offset>=e.limit}function nB(e,t){let i=e.bytes,n=e.offset,r=e.limit,o=n+t;if(o>i.length){let t=new Uint8Array(2*o);t.set(i),e.bytes=t}return e.offset=o,o>r&&(e.limit=o),n}function rB(e,t){let i=e.offset;if(i+t>e.limit)throw new Error(\"Read past limit\");return e.offset+=t,i}function oB(e,t){let i=nB(e,t.length);e.bytes.set(t,i)}function sB(e,t){let i=rB(e,t),n=String.fromCharCode,r=e.bytes,o=\"ï¿½\",s=\"\";for(let e=0;e<t;e++){let a,c,d,l,u=r[e+i];0==(128&u)?s+=n(u):192==(224&u)?e+1>=t?s+=o:(a=r[e+i+1],128!=(192&a)?s+=o:(l=(31&u)<<6|63&a,l<128?s+=o:(s+=n(l),e++))):224==(240&u)?e+2>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],32896!=(49344&(a|c<<8))?s+=o:(l=(15&u)<<12|(63&a)<<6|63&c,l<2048||l>=55296&&l<=57343?s+=o:(s+=n(l),e+=2))):240==(248&u)?e+3>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],d=r[e+i+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(l=(7&u)<<18|(63&a)<<12|(63&c)<<6|63&d,l<65536||l>1114111?s+=o:(l-=65536,s+=n(55296+(l>>10),56320+(1023&l)),e+=3))):s+=o}return s}function aB(e,t){let i=t.length,n=0;for(let e=0;e<i;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<i&&(r=(r<<10)+t.charCodeAt(++e)-56613888),n+=r<128?1:r<2048?2:r<65536?3:4}uB(e,n);let r=nB(e,n),o=e.bytes;for(let e=0;e<i;e++){let n=t.charCodeAt(e);n>=55296&&n<=56319&&e+1<i&&(n=(n<<10)+t.charCodeAt(++e)-56613888),n<128?o[r++]=n:(n<2048?o[r++]=n>>6&31|192:(n<65536?o[r++]=n>>12&15|224:(o[r++]=n>>18&7|240,o[r++]=n>>12&63|128),o[r++]=n>>6&63|128),o[r++]=63&n|128)}}function cB(e){return e.bytes[rB(e,1)]}function dB(e,t){let i=nB(e,1);e.bytes[i]=t}function lB(e){let t,i=0,n=0;do{t=cB(e),i<32&&(n|=(127&t)<<i),i+=7}while(128&t);return n}function uB(e,t){for(t>>>=0;t>=128;)dB(e,127&t|128),t>>>=7;dB(e,t)}function hB(e,t){let i,n=0,r=0,o=0;return i=cB(e),n=127&i,128&i&&(i=cB(e),n|=(127&i)<<7,128&i&&(i=cB(e),n|=(127&i)<<14,128&i&&(i=cB(e),n|=(127&i)<<21,128&i&&(i=cB(e),r=127&i,128&i&&(i=cB(e),r|=(127&i)<<7,128&i&&(i=cB(e),r|=(127&i)<<14,128&i&&(i=cB(e),r|=(127&i)<<21,128&i&&(i=cB(e),o=127&i,128&i&&(i=cB(e),o|=(127&i)<<7))))))))),{low:n|r<<28,high:r>>>4|o<<24,unsigned:t}}function pB(e,t){let i=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,o=0===r?0===n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10,s=nB(e,o),a=e.bytes;switch(o){case 10:a[s+9]=r>>>7&1;case 9:a[s+8]=9!==o?128|r:127&r;case 8:a[s+7]=8!==o?n>>>21|128:n>>>21&127;case 7:a[s+6]=7!==o?n>>>14|128:n>>>14&127;case 6:a[s+5]=6!==o?n>>>7|128:n>>>7&127;case 5:a[s+4]=5!==o?128|n:127&n;case 4:a[s+3]=4!==o?i>>>21|128:i>>>21&127;case 3:a[s+2]=3!==o?i>>>14|128:i>>>14&127;case 2:a[s+1]=2!==o?i>>>7|128:i>>>7&127;case 1:a[s]=1!==o?128|i:127&i}}const _B={},EB={},mB=4294967296,fB=mB*mB,TB=fB/2,SB=vB(0,!0),gB=vB(0),RB=yB(0,-2147483648,!1),CB=yB(-1,2147483647,!1),IB=yB(-1,-1,!0);function vB(e,t){let i,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=EB[e],n)?n:(i=yB(e,0,!0),r&&(EB[e]=i),i):(r=-128<=(e|=0)&&e<128)&&(n=_B[e],n)?n:(i=yB(e,e<0?-1:0,!1),r&&(_B[e]=i),i)}function yB(e,t,i){return{low:0|e,high:0|t,unsigned:!!i}}function AB(e,t){if(isNaN(e))return t?SB:gB;if(t){if(e<0)return SB;if(e>=fB)return IB}else{if(e<=-TB)return RB;if(e+1>=TB)return CB}return e<0?t?SB:gB:yB(e%mB|0,e/mB|0,t)}function bB(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class wB extends Sv{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(rw.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),og(this,\"name\",\"AgoraRTCImageModeration\"),og(this,\"_connectionState\",nw.CONNECTING),og(this,\"_sequence\",0),og(this,\"_moderationStartTime\",void 0),og(this,\"_workerConnection\",void 0),og(this,\"_workerMessageLengthLimit\",void 0),og(this,\"_qualityRatio\",void 0),og(this,\"_connectInfo\",void 0),og(this,\"_cancelTokenSource\",EI.CancelToken.source()),og(this,\"_retryConfig\",void 0),og(this,\"_moderationInterval\",void 0),og(this,\"_moderationTimer\",null),og(this,\"_moderationMode\",1),og(this,\"_quality\",1),og(this,\"_qualityTimer\",null),og(this,\"_ticket\",void 0),og(this,\"_moderationIntervalMinimum\",void 0),og(this,\"_uploadFailedNum\",0),og(this,\"_uploadNum\",0),og(this,\"_uploadTimer\",null),og(this,\"_extraInfo\",void 0),og(this,\"_vendor\",\"\"),og(this,\"_encoder\",new TextEncoder),og(this,\"_moderationId\",void 0),og(this,\"inspectImage\",(()=>{if(this.connectionState!==nw.CONNECTED)throw new Sb(nv.OPERATION_ABORTED,\"image moderation service connection status is \".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===nw.CONNECTED?this.requestToInspectImage():Qy.debug(\"[\".concat(this._moderationId,\"] Moderation State is not connected , \"),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=ey(5,\"image-moderation-\"),this._workerMessageLengthLimit=Dy(\"IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT\"),this._moderationIntervalMinimum=Dy(\"IMAGE_MODERATION_INTERVAL_MINIMUM\"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=Dy(\"IMAGE_MODERATION_QUALITY_RATIO\"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new bw(\"worker-\"+this._moderationId,_y),this.on(rw.STATE_CHANGE,((e,t)=>{Qy.debug(\"[\".concat(this._moderationId,\"] Moderation operation :\").concat(ow[e],\" \").concat(t||\"\"))})),this.handleWorkerEvents()}async init(e,t){this.emit(rw.STATE_CHANGE,ow.CONNECT_AP),this._connectInfo=e;const i=this._cancelTokenSource.token;return this._retryConfig=t,new Gh(((n,r)=>{this.on(rw.CONNECTION_STATE_CHANGE,((e,t)=>{e===nw.CONNECTED&&n()})),this.requestAP(e,i,t).then((e=>{this.connectWorker(e)})).catch((e=>{r(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),Qy.debug(\"[\".concat(this._moderationId,\"] updateConfig: \").concat(JSON.stringify(e))),this.connectionState===nw.CONNECTED&&this.inspectImage()}async requestAP(e,t,i){const n=Dy(\"WEBCS_DOMAIN\").map((e=>\"https://\".concat(e,\"/api/v1\"))),r=await function(e,t,i,n){let{appId:r,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;IU++;const l=\"moderation_plugin\",u={service_name:l,json_body:JSON.stringify({appId:r,areaCode:o,cname:s,command:\"allocateEdge\",requestId:IU,seq:IU,sid:a,appToken:c,ts:Date.now(),uid:d+\"\"})};let h,p,_=e[0];return my((async()=>{h=Date.now();const e=await tU(_,{data:u,cancelToken:i,headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"61\"},params:{action:\"wrtc_gateway\"}});if(p=Date.now()-h,0!==e.code){const t=new Sb(nv.UNEXPECTED_RESPONSE,\"moderation plugin ap error, code\"+e.code,{retry:!0,responseTime:p});throw Qy.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"moderation plugin ap error, code: \".concat(t.code,\", reason: \").concat(t.reason),{code:t.code,responseTime:p});throw Qy.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"moderation plugin ap empty server\",{code:t.code,responseTime:p});throw Qy.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"moderation plugin ap empty port\",{code:t.code,responseTime:p});throw Qy.error(e.toString()),e}const n=Dy(\"IMAGE_MODERATION_WORKER_HOST\");return{addressList:t.servers.map((e=>{let{address:t,wss:i}=e;if(t&&i)return\"wss://\".concat(t.replace(/\\./g,\"-\"),\".\").concat(n,\":\").concat(i,\"/moderation\")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,i)=>(sA.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===i,responseTime:p,serverIp:e[i%e.length]}),!1)),((t,i)=>(sA.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[i%e.length]}),!!(t.code!==nv.OPERATION_ABORTED&&t.code!==nv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(_=e[(i+1)%e.length],!0))),n)}(n,e,t,i);this.emit(rw.STATE_CHANGE,ow.AP_CONNECTED);const{addressList:o,ticket:s}=r;return this._ticket=s,o}async connectWorker(e){this.emit(rw.STATE_CHANGE,ow.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(Tb.CONNECTED,(async()=>{this.emit(rw.STATE_CHANGE,ow.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=nw.CONNECTED})),this._workerConnection.on(Tb.CLOSED,(()=>{this.connectionState=nw.CLOSED})),this._workerConnection.on(Tb.FAILED,(()=>{this.connectionState=nw.CLOSED})),this._workerConnection.on(Tb.RECONNECTING,(()=>{this.connectionState=this.connectionState===nw.CONNECTED?nw.RECONNECTING:nw.CONNECTING})),this._workerConnection.on(Tb.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=QF(new Uint8Array(e.data));Dy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")&&Qy.debug(\"[\".concat(this._moderationId,\"] Response message for worker of image moderation \"),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,Qy.error(\"[\".concat(this._moderationId,\"] Error response from worke, code is \").concat(t.code,\", msg is \").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{sA.reportApiInvoke(this._connectInfo.sid||null,{name:Cv.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:Iv.TRACER}).onError(new Sb(nv.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),Dy(\"IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL\"))))}else Qy.error(\"[\".concat(this._moderationId,\"] Unexpected message type from worker\"))})),this._workerConnection.on(Tb.WILL_RECONNECT,((e,t,i)=>{\"recover\"===e&&i(e),i(\"tryNext\")})),this._workerConnection.on(Tb.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=Uv(this,rw.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(Dy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")&&Qy.debug(\"Only the track being played can be inspected\"));this._sequence++;const i=await this.generateRequestData(e,t);this._workerConnection.sendMessage(i,!0,!0)}else Dy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")&&Qy.debug(\"Only the track being published can be inspected\")}async generateRequestData(e,t){let{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage(\"image/jpeg\",this.quality),l=await hL(d,i,n),u=this._sequence+\"-\"+r+\"-\"+a+\"-\"+c+\"-\"+ey(12,\"\"),h={appId:i,cid:r,cname:n,deviceId:\"\",elapse:wB.intToLong(Number(c-this._moderationStartTime)),fileSize:d.buffer.byteLength,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:u,sdkVersion:\"4.22.0\",sequence:this._sequence,sid:s,timestamp:AB(c),uid:a,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete h.callbackData;const p=XF(h);if(p.byteLength<this._workerMessageLengthLimit){if(Dy(\"SHOW_IMAGE_MODERATION_WORKER_MESSAGE\")){const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?bB(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bB(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},h);delete e.jpg,Qy.debug(\"[\".concat(this._moderationId,\"] Request message for worker of image moderation service: \"),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=EI.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=nw.CLOSED,this.emit(rw.STATE_CHANGE,ow.CLOSED)}}function OB(e){if(av(e.interval,\"interval\",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new Sb(nv.INVALID_PARAMS,\"config.extraInfo length cannot exceed 1024 bytes\");if(e&&e.vendor&&e.vendor.length>1024)throw new Sb(nv.INVALID_PARAMS,\"config.vendor length cannot exceed 1024 bytes\")}const NB={name:\"ImageModeration\",create:function(e){let{config:t}=e;return OB(t),new wB(t)}};var DB,PB,LB,kB,MB,UB,xB,VB,FB,BB,jB,GB,WB,HB,KB,YB,qB,zB,JB,XB,QB,ZB,$B,ej,tj,ij,nj,rj,oj,sj,aj,cj,dj,lj,uj,hj,pj,_j,Ej,mj,fj;function Tj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Sj(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Tj(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Tj(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}hy.setLogger(Qy);let gj=(DB=oA(),PB=oA({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof bP))return[t];t=[t]}return t.map((e=>e?Object(e).toString():\"null\"))}}),LB=oA({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==aP.DATA?(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))):[t.getChannelId()])}),kB=oA({argsMap:(e,t,i,n)=>[\"object\"==typeof t?t.uid:t,i,n]}),MB=oA({argsMap:(e,t,i)=>[t,i]}),UB=oA({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:i}=e;return[null==t?void 0:t.uid,i]}))}),xB=oA({argsMap:(e,t,i,n)=>[\"object\"==typeof t?t.uid:t,i,n]}),VB=oA({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:i}=e;return{uid:null==t?void 0:t.uid,mediaType:i}}))}),FB=oA(),BB=oA(),jB=oA(),GB=oA(),WB=oA(),HB=oA(),KB=oA(),YB=oA(),qB=oA(),zB=oA(),JB=oA(),XB=oA(),QB=oA(),ZB=oA(),$B=oA({argsMap:(e,t)=>[t]}),ej=oA(),tj=oA(),ij=oA(),nj=oA(),rj=oA(),oj=oA(),sj=oA(),aj=oA(),cj=oA({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),dj=oA(),lj=oA(),uj=oA(),hj=oA(),pj=oA(),_j=oA(),Ej=oA({reportResult:!0}),mj=oA(),fj=class extends Sv{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||\"audience\"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||\"opus\"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return\"Client\"}constructor(e){let t;if(super(),og(this,\"store\",void 0),og(this,\"_uid\",void 0),og(this,\"_channelName\",void 0),og(this,\"_uintUid\",void 0),og(this,\"_users\",[]),og(this,\"_config\",void 0),og(this,\"_clientId\",void 0),og(this,\"_appId\",void 0),og(this,\"_sessionId\",null),og(this,\"_key\",void 0),og(this,\"_rtmConfig\",{}),og(this,\"_joinInfo\",void 0),og(this,\"_gateway\",void 0),og(this,\"_statsCollector\",void 0),og(this,\"_configDistribute\",void 0),og(this,\"_leaveMutex\",new hy(\"client-leave\")),og(this,\"_publishMutex\",new hy(\"client-publish\")),og(this,\"_renewTokenMutex\",new hy(\"client-renewtoken\")),og(this,\"_subscribeMutex\",new hy(\"client-subscribe\")),og(this,\"_encryptionMode\",\"none\"),og(this,\"_encryptionSecret\",null),og(this,\"_encryptionSalt\",null),og(this,\"_encryptDataStream\",!1),og(this,\"_encryptDataStreamKey\",null),og(this,\"_encryptDataStreamIv\",null),og(this,\"_proxyServer\",void 0),og(this,\"_turnServer\",{servers:[],mode:\"auto\"}),og(this,\"_cloudProxyServerMode\",\"disabled\"),og(this,\"_isDualStreamEnabled\",!1),og(this,\"_defaultStreamFallbackType\",void 0),og(this,\"_lowStreamParameter\",void 0),og(this,\"_streamFallbackTypeCacheMap\",new Map),og(this,\"_remoteStreamTypeCacheMap\",new Map),og(this,\"_axiosCancelSource\",EI.CancelToken.source()),og(this,\"_audioVolumeIndicationInterval\",void 0),og(this,\"_networkQualityInterval\",void 0),og(this,\"_userOfflineTimeout\",void 0),og(this,\"_streamRemovedTimeout\",void 0),og(this,\"_liveTranscodeStreamingClient\",void 0),og(this,\"_liveRawStreamingClient\",void 0),og(this,\"_channelMediaRelayClient\",void 0),og(this,\"_networkQualitySensitivity\",\"normal\"),og(this,\"_p2pChannel\",void 0),og(this,\"_useLocalAccessPoint\",!1),og(this,\"_setLocalAPVersion\",void 0),og(this,\"_joinAndNotLeaveYet\",!1),og(this,\"_numberOfJoinCount\",0),og(this,\"_remoteDefaultVideoStreamType\",void 0),og(this,\"_inspect\",void 0),og(this,\"_moderation\",void 0),og(this,\"_license\",void 0),og(this,\"_pendingPublishedUsers\",[]),og(this,\"ntpAlignErrorCount\",0),og(this,\"remoteInboundOffset\",0),og(this,\"_handleLocalTrackEnable\",((e,t,i)=>{this.publish(e,!1).then(t).catch(i)})),og(this,\"_handleLocalTrackDisable\",((e,t,i)=>{this.unpublish(e).then(t).catch(i)})),og(this,\"_handleUserOnline\",(e=>{if(Dy(\"BLOCK_LOCAL_CLIENT\")&&uA(e.uid,this.channelName))return void Qy.debug(\"[\".concat(e.uid,\"] will be ignored in local\"));this.isStringUID&&\"string\"!=typeof e.uid&&Qy.error(\"[\".concat(this._clientId,\"] StringUID is Mixed with UintUID\"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(Nv.USER_JOINED,t));else{const t=new iV(e.uid,e.uint_id||e.uid);this._users.push(t),Qy.debug(\"[\".concat(this._clientId,\"] user online\"),e.uid),this.safeEmit(Nv.USER_JOINED,t)}})),og(this,\"_handleUserOffline\",(e=>{if(Dy(\"BLOCK_LOCAL_CLIENT\")&&uA(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:Fv(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),Qy.debug(\"[\".concat(this._clientId,\"] user offline\"),e.uid,\"reason:\",e.reason),this.safeEmit(Nv.USER_LEAVED,t,e.reason))})),og(this,\"_handleAddAudioOrVideoStream\",((e,t,i,n,r,o,s)=>{if(Dy(\"BLOCK_LOCAL_CLIENT\")&&uA(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void Qy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_add_stream)\"));Qy.debug(\"[\".concat(this._clientId,\"] stream added with uid \").concat(t,\", type \").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c=\"audio\"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=r||t),\"audio\"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,\"audio\"===e?(a._audio_added_=!0,void 0!==i&&(a._audioSSRC=i),void 0!==n&&(a._cname=n),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==i&&(a._videoSSRC=i),void 0!==n&&(a._cname=n),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),(\"audio\"===e?a.hasAudio:a.hasVideo)&&!c&&(Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(a.uid,\" published \").concat(e)),this.safeEmit(Nv.USER_PUBLISHED,a,e)),\"video\"===e?sA.onGatewayStream(this._sessionId,tA.ON_ADD_VIDEO_STREAM,iA.ON_ADD_VIDEO_STREAM,{peer:r||t,ssrc:a._videoSSRC}):sA.onGatewayStream(this._sessionId,tA.ON_ADD_AUDIO_STREAM,iA.ON_ADD_AUDIO_STREAM,{peer:r||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,i).then((t=>{if(t&&(Qy.debug(\"[\".concat(this._clientId,\"] resubscribe \").concat(e,\" for user \").concat(a.uid,\" after rejoin because SSRC id changed.\")),this._p2pChannel instanceof hF))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{Qy.error(\"[\".concat(this._clientId,\"] resubscribe error\"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(Qy.debug(\"[\".concat(this._clientId,\"] resubscribe \").concat(e,\" for user \").concat(a.uid,\" after reconnect.\")),this._subscribe(a,e,!0).catch((e=>{Qy.error(\"[\".concat(this._clientId,\"] resubscribe error\"),e.toString())})))})),og(this,\"_handleRemoveStream\",(e=>{if(Dy(\"BLOCK_LOCAL_CLIENT\")&&uA(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void Qy.warning(\"[\".concat(this._clientId,\"] can not find target user!(on_remove_stream)\"));Qy.debug(\"[\".concat(this._clientId,\"] stream removed with uid \").concat(e.uid));let i=()=>{};t.hasAudio&&t.hasVideo?i=()=>{Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished audio track\")),this.safeEmit(Nv.USER_UNPUBLISHED,t,\"audio\"),Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished video track\")),this.safeEmit(Nv.USER_UNPUBLISHED,t,\"video\")}:t.hasVideo?i=()=>{Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished video track\")),this.safeEmit(Nv.USER_UNPUBLISHED,t,\"video\")}:t.hasAudio&&(i=()=>{Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished audio track\")),this.safeEmit(Nv.USER_UNPUBLISHED,t,\"audio\")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof hF&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),sA.onGatewayStream(this._sessionId,tA.ON_REMOVE_STREAM,iA.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),i()})),og(this,\"_handleSetStreamLocalEnable\",((e,t,i)=>{if(Dy(\"BLOCK_LOCAL_CLIENT\")&&uA(t,this.channelName))return;const n=this._users.find((e=>e.uid===t));if(!n)return void Qy.error(\"[\".concat(this._clientId,\"] can not find target user!(disable_local)\"));Qy.debug(\"[\".concat(this._clientId,\"] local \").concat(e,\" \").concat(i?\"enabled\":\"disabled\",\" with uid \").concat(t));const r=\"audio\"===e?n.hasAudio:n.hasVideo;if(\"audio\"===e){n._trust_audio_enabled_state_=!0;const e=n._audio_enabled_;if(n._audio_enabled_=i,n._audio_enabled_===e)return;{const e=n._audio_enabled_?\"enable-local-audio\":\"disable-local-audio\";Qy.debug(\"[\".concat(this._clientId,\"] user-info-updated, uid: \").concat(t,\", msg: \").concat(e)),this.safeEmit(Nv.USER_INFO_UPDATED,t,e)}}else{n._trust_video_enabled_state_=!0;const e=n._video_enabled_;if(n._video_enabled_=i,n._video_enabled_===e)return;{const e=n._video_enabled_?\"enable-local-video\":\"disable-local-video\";Qy.debug(\"[\".concat(this._clientId,\"] user-info-update, uid: \").concat(t,\", msg: \").concat(e)),this.safeEmit(Nv.USER_INFO_UPDATED,t,e)}}const o=\"audio\"===e?n.hasAudio:n.hasVideo;return r!==o?!r&&o?(Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t,\" published \").concat(e)),void this.safeEmit(Nv.USER_PUBLISHED,n,e)):(\"video\"===e&&n._videoTrack&&n._videoTrack._destroy(),\"audio\"===e&&n._audioTrack,this._p2pChannel.muteRemote(n,e),Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t,\" unpublished \").concat(e)),void this.safeEmit(Nv.USER_UNPUBLISHED,n,e)):void 0})),og(this,\"_handleMuteStream\",((e,t,i)=>{if(Dy(\"BLOCK_LOCAL_CLIENT\")&&uA(e,this.channelName))return;Qy.debug(\"[\".concat(this._clientId,\"] receive mute message\"),e,t,i);const n=this._users.find((t=>t.uid===e));if(!n)return void Qy.warning(\"[\".concat(this._clientId,\"] can not find remote user, ignore mute event, uid: \").concat(e));const r=\"audio\"===t?n.hasAudio:n.hasVideo;if(\"audio\"===t){n._trust_audio_mute_state_=!0;const t=n._audio_muted_;if(n._audio_muted_=i,n._audio_muted_===t)return;{const t=n._audio_muted_?\"mute-audio\":\"unmute-audio\";Qy.debug(\"[\".concat(this._clientId,\"] user-info-update, uid: \").concat(e,\", msg: \").concat(t)),this.safeEmit(Nv.USER_INFO_UPDATED,e,t)}}else{n._trust_video_mute_state_=!0;const t=n._video_muted_;if(n._video_muted_=i,n._video_muted_===t)return;{const t=n._video_muted_?\"mute-video\":\"unmute-video\";Qy.debug(\"[\".concat(this._clientId,\"] user-info-update, uid: \").concat(e,\", msg: \").concat(t)),this.safeEmit(Nv.USER_INFO_UPDATED,e,t)}}const o=\"audio\"===t?n.hasAudio:n.hasVideo;if(r!==o){if(!r&&o){return(\"audio\"===t?n._audioSSRC:n._videoSSRC)?(Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e,\" published \").concat(t)),void this.safeEmit(Nv.USER_PUBLISHED,n,t)):void Qy.warning(\"[\".concat(this._clientId,\"] remote user \").concat(e,\" receive \").concat(t,\" unmute message  before add stream message, \").concat(t,\" SSRC doesn't exist yet.\"))}\"video\"===t&&n._videoTrack&&!n._video_pre_subscribed&&n._videoTrack._destroy(),\"audio\"===t&&n._audioTrack,this._p2pChannel.muteRemote(n,t),Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e,\" unpublished \").concat(t)),this.safeEmit(Nv.USER_UNPUBLISHED,n,t)}})),og(this,\"_handleP2PLost\",(async e=>{Qy.debug(\"[\".concat(this._clientId,\"] receive p2p lost\"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():Qy.warning(\"[\".concat(this._clientId,\"] P2PLost stream not found\"),e)})),og(this,\"_handleTokenWillExpire\",(()=>{Qy.debug(\"[\".concat(this._clientId,\"] received message onTokenPrivilegeWillExpire\")),this.safeEmit(Nv.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),og(this,\"_handleBeforeUnload\",(e=>{\"beforeunload\"===e.type&&void 0!==e.returnValue&&\"\"!==e.returnValue||(this.leave(),Qy.info(\"[\".concat(this._clientId,\"] auto leave onbeforeunload or pagehide\")))})),og(this,\"_handleUpdateNetworkQuality\",(()=>{if(\"normal\"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(Nv.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(Nv.NETWORK_QUALITY,e)})),og(this,\"_handleP2PAddAudioOrVideoStream\",((e,t,i,n)=>{const r=this._users.find((e=>e.uid===t));if(!r)return void Qy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_add_stream)\"));Qy.debug(\"[\".concat(this._clientId,\"] stream added with uid \").concat(t,\", type \").concat(e)),this.store.subscribe(r.uid,e,void 0,void 0,void 0,Date.now());const o=\"audio\"===e?r.hasAudio:r.hasVideo;\"audio\"===e?r._trust_audio_stream_added_state_=!0:r._trust_video_stream_added_state_=!0,\"audio\"===e?(r._audio_added_=!0,void 0!==i&&(r._audioSSRC=i),void 0!==n&&(r._audioMid=n)):(r._video_added_=!0,void 0!==i&&(r._videoSSRC=i),void 0!==n&&(r._videoMid=n)),(\"audio\"===e?r.hasAudio:r.hasVideo)&&!o&&(Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(r.uid,\" published \").concat(e)),this.safeEmit(Nv.USER_PUBLISHED,r,e)),this._p2pChannel.hasPendingRemoteMedia(r,e)&&(Qy.debug(\"[\".concat(this._clientId,\"] resubscribe \").concat(e,\" for user \").concat(r.uid,\" after reconnect.\")),this._subscribe(r,e,!0).catch((e=>{Qy.error(\"[\".concat(this._clientId,\"] resubscribe error\"),e.toString())})))})),this._config=e,this._clientId=ey(5,\"client-\"),this.store=new ky(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),Qy.info(\"[\".concat(this._clientId,\"] Initializing AgoraRTC client v\").concat(vy,\" build: \").concat(wy,\", mode: \").concat(this.mode,\", codec: \").concat(this.codec)),e.clientRoleOptions)try{Ov(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){Qy.warning(\"[\".concat(this._clientId,\"] \").concat(e.toString()))}this._statsCollector=new yV(this.store),this._statsCollector.onStatsException=(e,t,i)=>{Qy.debug(\"[\".concat(this._clientId,\"] receive exception msg, code: \").concat(e,\", msg: \").concat(t,\", uid: \").concat(i)),this.safeEmit(Nv.EXCEPTION,{code:e,msg:t,uid:i})},this._statsCollector.onUploadPublishDuration=(e,t,i,n)=>{const r=this._users.find((t=>t.uid===e));r&&sA.peerPublishStatus(this._sessionId,{subscribeElapse:n,audioPublishDuration:t,videoPublishDuration:i,peer:r._uintid})},this.store.useP2P=\"p2p\"===e.mode,this._gateway=new ZM(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||_y,httpRetryConfig:e.httpRetryConfig||_y,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new VU,this.store.useP2P?(this._p2pChannel=new RV(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new hF(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,i,n,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Ny(\"JOIN_GATEWAY_USE_443PORT_ONLY\",o),Ny(\"JOIN_GATEWAY_USE_DUAL_DOMAIN\",s);const a=this._gateway.signal.websocket;return a instanceof Aw&&(a.use443PortOnly=o,a.tryDoubleDomain=s),async function(e,t,i){TI.get(e)||TI.set(e,[]),SI.get(e)||SI.set(e,t),gI.get(e)||gI.set(e,0);const n=TI.get(e),r=SI.get(e);if(!n||!r)throw new Error(\"concurrent: deferQueue or maxConcurrency is null\");if(gI.get(e)===r){const e=fI();n.push(e),await e.promise}gI.set(e,gI.get(e)+1);for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];const c=await i(...s);return gI.set(e,gI.get(e)-1),gI.get(e)===r-1&&n.length>0&&(n[0].resolve(),n.shift()),0===gI.get(e)&&(TI.set(e,[]),SI.set(e,0),gI.set(e,0)),c}(\"client.join\",Dy(\"JOIN_MAX_CONCURRENCY\"),this.join.bind(this),e,t,i,n,r)}async join(e,t,i,n,r){const o=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);const s=\"HTTPS\"===(Ty||Ty||(Ty=(window.location.protocol.split(\":\")[0]||\"\").toUpperCase(),Ty)),a=Iy()?window.isSecureContext:\"Browser Not Support\";if(!Iy()&&!s||!window.isSecureContext){const e=\"The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser\";Qy.warning(e)}\"DISCONNECTED\"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),Qy.debug(\"[\".concat(this._clientId,\"] set avoidJoinStart to \").concat(this.store.avoidJoinStart))),sA.setAppId(e);try{if(!i&&null!==i)throw new Sb(nv.INVALID_PARAMS,\"Invalid token: \".concat(i,\". If you don not use token, set it to null\"));i&&dv(i,\"token\",1,2047),dv(e,\"appid\",1,2047),gb(t),n&&Rb(n),r&&dv(r,\"optionalInfo\",1,2047)}catch(r){throw sA.reportApiInvoke(ty(),{name:Cv.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Iv.TRACER}).onError(r),r}if(this._leaveMutex.isLocked){Qy.debug(\"[\".concat(this._clientId,\"] join: waiting leave operation\"));(await this._leaveMutex.lock())(),Qy.debug(\"[\".concat(this._clientId,\"] join: continue\"))}if(this._joinAndNotLeaveYet=!0,\"DISCONNECTED\"!==this.connectionState){const r=new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already in connecting/connected state\"));throw sA.reportApiInvoke(ty(),{name:Cv.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Iv.TRACER}).onError(r),r}this._gateway.state=\"CONNECTING\";const c=await GF({appId:e,cname:t,uid:n,stringUid:\"string\"==typeof n?n:void 0,token:i||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"));const d=(null==c?void 0:c.sid)||ty();Qy.info(\"[\".concat(this._clientId,\"] start join channel \").concat(t,\", join number: \").concat(o)),this._sessionId||(this._sessionId=d,this.store.sessionId=this._sessionId);const l=sA.reportApiInvoke(d,{name:Cv.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Iv.TRACER}),u=Sj(Sj({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:\"string\"!=typeof n?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),\"string\"==typeof n&&(u.stringUid=n,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),\"none\"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await(async e=>{const t=function(e){const t=window.atob(\"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\\nxQiYDz3vqa6bP29adwIDAQAB\"),i=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e+=1)i[e]=t.charCodeAt(e);return i}(),i=await window.crypto.subtle.importKey(\"spki\",t,{name:\"RSA-OAEP\",hash:\"SHA-256\"},!0,[\"encrypt\"]),n=mv(e),r=await window.crypto.subtle.encrypt({name:\"RSA-OAEP\"},i,n);return function(e){let t=\"\";for(let i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return window.btoa(t)}(new Uint8Array(r))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(\"aes-128-gcm2\"===this._encryptionMode||\"aes-256-gcm2\"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=Dy(\"USE_PURE_ENCRYPTION_MASTER_KEY\")?e.encode(u.appId+this._encryptionSecret+this._encryptionSecret):e.encode(u.appId+u.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,i){const n=await window.crypto.subtle.importKey(\"raw\",t,\"PBKDF2\",!1,[\"deriveBits\",\"deriveKey\"]),r=\"aes-128-gcm2\"===e?128:256,o=await window.crypto.subtle.deriveBits({name:\"PBKDF2\",iterations:Vy,hash:\"SHA-256\",salt:i},n,r+xy);return new Uint8Array(o).subarray(r/8)}(this._encryptionMode,t,Yv(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,i){const n=await window.crypto.subtle.importKey(\"raw\",t,\"PBKDF2\",!1,[\"deriveBits\",\"deriveKey\"]),r=\"aes-128-gcm2\"===e?128:256;return await window.crypto.subtle.deriveKey({name:\"PBKDF2\",iterations:Vy,hash:\"SHA-256\",salt:i},n,{name:\"AES-GCM\",length:r},!0,[\"encrypt\",\"decrypt\"])}(this._encryptionMode,t,Yv(this._encryptionSalt))}else a?Qy.warning(\"[\".concat(this._clientId,\"] encrypt datastream must be running in a secure context, fallback to plain data stream\")):Qy.warning(\"[\".concat(this._clientId,\"] current browser do not support WebCrypto ,fallback to plain data stream\")),this._encryptDataStream=!1;else this._encryptDataStream=!1,Qy.debug(\"[\".concat(this._clientId,\"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream\"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:u.stringUid});const h=this._sessionId;setTimeout((()=>{\"CONNECTING\"===this.connectionState&&h===this._sessionId&&sA.joinChannelTimeout(this._sessionId,5)}),5e3);try{var p;let n;const r=u.cloudProxyServer;if(Dn(p=[\"proxy3\",\"proxy4\",\"proxy5\"]).call(p,r)){const e=Dy(\"PROXY_SERVER_TYPE3\");Array.isArray(e)?u.proxyServer=e[0]:u.proxyServer=e}if(sA.setProxyServer(u.proxyServer),Qy.setProxyServer(u.proxyServer),this.store.requestAPStart(),c){if(Qy.debug(\"[\".concat(this._clientId,\"] get serverInfo Success from Preload Cache \").concat(u.stringUid?\", \".concat(u.stringUid,\" => \").concat(c.intUid):\"\",\" \")),u.stringUid&&!u.uid&&(u.uid=c.intUid),n={gatewayInfo:c.ap.gatewayInfo},Dy(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\")&&\"auto\"===u.turnServer.mode)if(0===c.ap.proxyInfo.addresses.length)Qy.warning(\"no edge services in ap response of proxy fallback, will not set proxy in iceServers\");else{const e=(await Vw(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map((e=>({turnServerURL:e.address,tcpport:e.tcpport||cA.tcpport,udpport:e.udpport||cA.udpport,username:e.username||cA.username,password:e.password||cA.password,forceturn:!1,security:!0})));u.turnServer={mode:\"manual\",servers:e}}YF(c,u.stringUid)}else{if(u.stringUid&&!u.uid){let e;[e,n]=await Gh.all([OU(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||_y,this.store),wU(u,this._axiosCancelSource.token,this._config.httpRetryConfig||_y,!0,this.store)]),Qy.debug(\"[\".concat(this._clientId,\"] getUserAccount Success \").concat(u.stringUid,\" => \").concat(e)),u.uid=e,n.gatewayInfo.uid=e,n.gatewayInfo.res.uid=e}else n=await wU(u,this._axiosCancelSource.token,this._config.httpRetryConfig||_y,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"))}this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(Wb.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=i||e;const o=n.gatewayInfo,s=u.uid?u.uid:o.uid;this._joinInfo=Sj(Sj({},u),{},{cid:o.cid,uid:s,vid:o.vid,apResponse:o.res,apGatewayAddress:o.apGatewayAddress,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=s;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Client already left\"));l.onSuccess(a),this._appId=e,this._channelName=u.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(PI()?\"beforeunload\":\"pagehide\",this._handleBeforeUnload),this._statsCollector.startUpdateStats()}),0);const d=u.stringUid?\"string uid: \".concat(u.stringUid,\",uid: \").concat(u.uid):\"uid: \".concat(this._uid);return Qy.info(\"[\".concat(this._clientId,\"] Joining channel success: channel: \").concat(t,\",\").concat(d)),setTimeout((()=>{Qy.startUpload()}),5e3),this.store.joinEnd(),_=this,Dn(lA).call(lA,_)||lA.push(_),\"disabled\"===this._cloudProxyServerMode&&MD().supportWebCrypto&&Dy(\"ENABLE_PRELOAD\")&&HF(this._joinInfo),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===nv.OPERATION_ABORTED?Qy.warning(\"[\".concat(this._clientId,\"] join number: \").concat(o,\", Joining channel failed, rollback\"),t):Qy.error(\"[\".concat(this._clientId,\"] join number: \").concat(o,\", Joining channel failed, rollback\"),t),t.code!==nv.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state=\"DISCONNECTED\",this._reset()),l.onError(t),t}var _}_joinGateway(){if(!this._joinInfo||!this._key)throw new Sb(nv.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(\"disabled\"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!Dy(\"JOIN_WITH_FALLBACK_SIGNAL_PROXY\")))}async leave(){Qy.info(\"[\".concat(this._clientId,\"] Leaving channel\")),window.removeEventListener(PI()?\"beforeunload\":\"pagehide\",this._handleBeforeUnload),this._reset(),function(e){const t=lA.indexOf(e);-1!==t&&lA.splice(t,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if(\"DISCONNECTED\"===this.connectionState)return Qy.info(\"[\".concat(this._clientId,\"] Leaving channel repeated, success\")),void e();await this._gateway.leave(\"CONNECTED\"!==this.connectionState),Qy.info(\"[\".concat(this._clientId,\"] Leaving channel success\")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof bP))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new Sb(nv.INVALID_PARAMS,\"param list is empty\");const i=e;if(\"audience\"===this._gateway.role)throw new Sb(nv.INVALID_OPERATION,\"audience can not publish stream\");for(const e of i){if(!(e instanceof bP))throw new Sb(nv.INVALID_PARAMS,\"parameter is not local track\");if(!e._enabled&&t)throw new Sb(nv.TRACK_IS_DISABLED,\"can not publish a disabled track: \".concat(e.getTrackId()))}Qy.info(\"[\".concat(this._clientId,\"] Publishing tracks, id \").concat(i.map((e=>\"\".concat(e.getTrackId(),\" \")))));const n=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&i.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof Hk&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(i),Qy.info(\"[\".concat(this._clientId,\"] Publish success, id \").concat(i.map((e=>\"\".concat(e.getTrackId(),\" \")))))}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] publish error\"),e.toString()),e}finally{n()}}async _publishDataChannel(e){av(e.id,\"id\",0,65535,!0),ov(e.ordered,\"ordered\"),dv(e.metadata,\"metadata\",0,512),Qy.info(\"[\".concat(this._clientId,\"] Publishing datachannels, id \").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new Sb(nv.INVALID_PARAMS,\"Invalid id: \".concat(e.id,\". If you want to republish the datachannel, unpublish first\"));if(!this._joinInfo||void 0===this._uid)throw new Sb(nv.INVALID_OPERATION,\"Can't publish datachannel, haven't joined yet!\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"can not publish datachannel in \".concat(this.connectionState,\" state\"));if(\"auto\"===this._turnServer.mode&&Dy(\"FORCE_TURN\")&&!Dy(\"TURN_ENABLE_TCP\")&&!Dy(\"TURN_ENABLE_UDP\"))throw new Sb(nv.UNEXPECTED_ERROR,\"force TURN With No TURN Configuration\");const i=function(e){return fF(e,!1)}(e),n=await this._p2pChannel.publishDataChannel([i]);if(n.length>0){if(\"number\"!=typeof i._originDataChannelId)throw Qy.error(\"[\".concat(this._clientId,\"] can not publish with mediaType datachannel, cannot get RTCDatachannel id\")),new Sb(nv.CREATE_DATACHANNEL_ERROR);try{await Gh.all(n.map((e=>this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)))),await i._waitTillOpen()}catch(e){if(e.code!==nv.DISCONNECT_P2P)throw e}}return Qy.info(\"[\".concat(this._clientId,\"] Publish dataChannels success, id \").concat(i.id)),i}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] publish datachannels error\"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new Sb(nv.INVALID_OPERATION,\"Can't unpublish stream, haven't joined yet!\");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof bP))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);Qy.info(\"[\".concat(this._clientId,\"] Unpublish tracks, tracks \").concat(t.map((e=>\"\".concat(e.getTrackId(),\" \"))),\" \"));const i=await this._publishMutex.lock();try{if(this._p2pChannel instanceof RV){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(sw.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),Qy.info(\"[\".concat(this._clientId,\"] Unpublish success,tracks \").concat(t.map((e=>\"\".concat(e.getTrackId())))))}}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] unpublish error\"),e.toString()),e}finally{i&&i()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),Qy.info(\"[\".concat(this._clientId,\"] Unpublish datachannels, datachannels \").concat(e.map((e=>\"\".concat(e.id,\" \"))),\" \"));const t=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublishDataChannel(e);i&&await this._gateway.unpublishDataChannel(i),Qy.info(\"[\".concat(this._clientId,\"] Unpublish dataChannel success,dataChannel \").concat(e.map((e=>\"\".concat(e.id)))))}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] unpublish dataChannel error\"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,i){if(!(e instanceof iV)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");e=t}return\"datachannel\"===t?this._subscribeDataChannel(e,i):this._subscribe(e,t)}async presubscribe(e,t){if(sv(t,\"mediaType\",[\"audio\",\"video\"]),this._p2pChannel instanceof RV)throw new Sb(nv.INVALID_OPERATION,\"can't presub at p2p mode\");if(!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"can't presub when not join\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"can't presub in \".concat(this.connectionState,\" state\"));const i=t===Yb.AUDIO,n=t===Yb.VIDEO,r=await this._subscribeMutex.lock();try{const{ssrcId:o,ortc:s,rtxSsrcId:a,cname:c,uint_id:d}=await this._gateway.presubscribe(e,t,!0);if(null==o)throw new Sb(nv.UNEXPECTED_RESPONSE,\"no ssrc id\");let l=this._users.find((t=>t.uid===e));l||(l=new iV(e,d||e),l._is_pre_created=!0,this._users.push(l)),c&&(l._cname=c),l._uintid||(l._uintid=d||e),i&&(l._audioSSRC=o,l._audio_pre_subscribed=!0,s&&(l._audioOrtc=s)),n&&(l._videoSSRC=o,l._video_pre_subscribed=!0,s&&(l._videoOrtc=s),null!=a&&(l._rtxSsrcId=a)),Qy.info(\"[\".concat(this._clientId,\"] presub succeed ssrc: \").concat(o)),await this._p2pChannel.subscribe(l,t,o,a,s);const u=i?l._audioTrack:l._videoTrack;if(!u)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find remote track in user\");return i&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),n&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),u}catch(t){throw Qy.error(\"[\".concat(this._clientId,\"] presub user \").concat(e,\" error\"),t),t}finally{r()}}async _subscribeDataChannel(e,t){var i;if(av(t,\"channelId\",0,65535,!0),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe datachannel, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe datachannel in \".concat(this.connectionState,\" state\"));const n=this._users.find((t=>t===e));if(!n)throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", this user is not in the channel\")),new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", user is not published\")),new Sb(nv.INVALID_REMOTE_USER,\"user is not published\");const r=null===(i=e._dataChannels)||void 0===i?void 0:i.find((e=>e.id===t));if(!r)throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType datachannel, remote datachannel is not published\")),new Sb(nv.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();Qy.info(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\", mediaType: datachannel\"));try{const t=await this._p2pChannel.subscribeDataChannel(e,[r]);if(t&&Dn(t).call(t,r.id))try{var s;if(\"number\"!=typeof r._originDataChannelId)throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType datachannel, cannot get RTCDatachannel\")),new Sb(nv.CREATE_DATACHANNEL_ERROR);const t={id:r.id,datachannelId:r._originDataChannelId,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:null!==(s=r.metadata)&&void 0!==s?s:\"\"};await this._gateway.subscribeDataChannel(e.uid,t,!0),await r._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==nv.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[r]),t;await this._p2pChannel.unsubscribeDataChannel(e,[r]),this._p2pChannel.setPendingRemoteDataChannel(e,r.id)}return Qy.info(\"[\".concat(this._clientId,\"] subscribe success user \").concat(e.uid,\", mediaType: datachannel\")),r}finally{o()}}async _p2pSubscribe(e,t,i){if(sv(t,\"mediaType\",[\"audio\",\"video\"]),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe stream, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe stream in \".concat(this.connectionState,\" state\"));const n=this._users.find((t=>t===e));if(!n){const t=new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", this user is not in the channel\")),t}if(!e.hasAudio&&!e.hasVideo){const t=new Sb(nv.INVALID_REMOTE_USER,\"user is not published\");throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", user is not published\")),t}if(!i&&(\"audio\"===t&&!e.hasAudio||\"video\"===t&&!e.hasVideo)){const i=new Sb(nv.REMOTE_USER_IS_NOT_PUBLISHED);throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType \").concat(t,\", remote track is not published\")),i}const r=await this._subscribeMutex.lock();Qy.info(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\", mediaType: \").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const i=\"audio\"===t?e._audioSSRC:e._videoSSRC,n=\"audio\"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof RV&&await this._p2pChannel.subscribe(e,t,i,n)}catch(e){throw e}Qy.info(\"[\".concat(this._clientId,\"] subscribe success user \").concat(e.uid,\", mediaType: \").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{Qy.warning(\"[\".concat(this._clientId,\"] auto set fallback failed\"),e)}));const i=\"audio\"===t?e._audioTrack:e._videoTrack;if(!i)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find remote track in user object\");return i}catch(t){throw Qy.error(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\" error\"),t),t}finally{r()}}async _subscribe(e,t,i){if(this._p2pChannel instanceof RV)return this._p2pSubscribe(e,t);if(sv(t,\"mediaType\",[\"audio\",\"video\"]),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe stream, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe stream in \".concat(this.connectionState,\" state\"));const n=this._users.find((t=>t===e));if(!n){const t=new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", this user is not in the channel\")),t}if(!e.hasAudio&&!e.hasVideo){const t=new Sb(nv.INVALID_REMOTE_USER,\"user is not published\");throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\", user is not published\")),t}if(!(i||(\"audio\"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&(\"video\"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const i=new Sb(nv.REMOTE_USER_IS_NOT_PUBLISHED);throw Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(e.uid,\" with mediaType \").concat(t,\", remote track is not published\")),i}let r=\"audio\"===t?e._audioSSRC:e._videoSSRC,o=\"audio\"===t?e._audioOrtc:e._videoOrtc,s=\"video\"===t?e._rtxSsrcId:void 0,a={stream_type:\"audio\"===t?Yb.AUDIO:Yb.VIDEO,ssrcId:r};const c=await this._subscribeMutex.lock();Qy.info(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\", mediaType: \").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const i=\"audio\"===t?e._audioSSRC:e._videoSSRC;void 0!==i&&i!==r&&(r=i,o=\"audio\"===t?e._audioOrtc:e._videoOrtc,s=\"video\"===t?e._rtxSsrcId:void 0,a={stream_type:\"audio\"===t?Yb.AUDIO:Yb.VIDEO,ssrcId:r}),jU.markSubscribeStart(this.store.clientId,r),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,r,s,o);try{this._p2pChannel.isPreSubScribe(r)||await this._gateway.subscribe(e.uid,a,!0)}catch(i){if((null==i?void 0:i.code)!==nv.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),i;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(i){throw this._p2pChannel.reportSubscribeEvent(!1,null==i?void 0:i.code,e,t),i}Qy.info(\"[\".concat(this._clientId,\"] subscribe success user \").concat(e.uid,\", mediaType: \").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{Qy.warning(\"[\".concat(this._clientId,\"] auto set fallback failed\"),e)}));const i=\"audio\"===t?e._audioTrack:e._videoTrack;if(!i)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find remote track in user object\");return i}catch(t){throw Qy.error(\"[\".concat(this._clientId,\"] subscribe user \").concat(e.uid,\" error\"),t),t}finally{c()}}async massSubscribe(e){if(lv(e,\"subscribeList\"),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe stream, not joined\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Can't subscribe stream in \".concat(this.connectionState,\" state\"));const t=Date.now(),i=new Map,n=await this._subscribeMutex.lock();Qy.info(\"[\".concat(this._clientId,\"]start massSubscribe user \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i)})).join(\"; \")));const r=(e=[...e]).map((e=>{let{user:t,mediaType:i}=e;return{user:t,mediaType:i}})),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const n=e[t],{user:o,mediaType:s}=n;if(sv(s,\"mediaType\",[\"audio\",\"video\"]),!o){const e=new Sb(nv.INVALID_PARAMS,\"user property does not exist in subscribeList item\");throw Qy.error(\"[\".concat(this._clientId,\"] user property does not exist in subscribeList item\")),e}const a=this._users.find((e=>e===o));if(!a){const i=new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");Qy.error(\"[\".concat(this._clientId,\"] can not massSubscribe \").concat(o.uid,\", this user is not in the channel\")),r[t].error=i,e.splice(t,1);continue}if(\"audio\"===s&&(!o.hasAudio||void 0===o._audioSSRC)||\"video\"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const i=new Sb(nv.REMOTE_USER_IS_NOT_PUBLISHED);Qy.error(\"[\".concat(this._clientId,\"] can not subscribe \").concat(o.uid,\" with mediaType \").concat(s,\", remote user is not published\")),r[t].error=i,e.splice(t,1);continue}const c=Vb.Video|Vb.LwoVideo,d=i.get(o);if(d){if(\"video\"===s?d&c:d&Vb.Audio){e.splice(t,1),Qy.warning(\"[\".concat(this._clientId,\"] repeat massSubscribe user:\").concat(o.uid,\", mediaType:\").concat(s,\" twice\"));continue}i.set(o,d|(\"video\"===s?c:Vb.Audio))}else i.set(o,\"video\"===s?c:Vb.Audio)}for(let t=e.length-1;t>=0;t--){const n=e[t],{user:r,mediaType:o}=n,s=Vb.Video|Vb.LwoVideo;if(this._p2pChannel.hasRemoteMedia(r,o)){await this._p2pChannel.unmuteRemoteNoLock(r,o);const n=i.get(r);i.set(r,\"video\"===o?n^s:n^Vb.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);let a=Jn(s=Array.from(i.entries())).call(s,((e,t)=>{let[i,n]=t;if(0===n)return e;const r={stream_id:i.uid,stream_type:n};return n&Vb.Audio&&(r.audio_ssrc=i._audioSSRC),n&Vb.Video&&(r.video_ssrc=i._videoSSRC),e.push(r),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:i}=e;return{user:t,mediaType:i,ssrcId:i===Yb.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:i===Yb.VIDEO?t._rtxSsrcId:void 0}})));const i=new Map;if(a=a.filter((e=>e.video_ssrc&&!this._p2pChannel.isPreSubScribe(e.video_ssrc)||e.audio_ssrc&&!this._p2pChannel.isPreSubScribe(e.audio_ssrc)||!e.video_ssrc&&!e.audio_ssrc)),a.length>0){const e=await this._gateway.subscribeAll(a,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:n,audio_error_code:r,error_code:o}=e;(n||r||o)&&i.set(t,{video_error_code:n,audio_error_code:r,error_code:o})}))}if(Array.from(i.entries()).length>0){const e=[];Array.from(i.entries()).forEach((t=>{let[i,n]=t;const r=this.remoteUsers.find((e=>e.uid===i));if(r){let t;n.error_code||n.video_error_code&&n.audio_error_code?t=void 0:n.video_error_code?t=Yb.VIDEO:n.audio_error_code&&(t=Yb.AUDIO),e.push({user:r,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of r){const t=i.get(e.user.uid);if(t){const i=t.error_code||\"audio\"===e.mediaType&&t.audio_error_code||\"video\"===e.mediaType&&t.video_error_code;if(i){const t=pw(i);Qy.error(\"user:\".concat(e.user.uid,\" mediaType:\").concat(e.mediaType,\" has massSubscribe error \").concat(t.desc)),e.error=new Sb(nv.SUBSCRIBE_FAILED,\"code \".concat(i,\": \").concat(t.desc))}}e.error||(\"video\"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(r.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),r.forEach((e=>{var i;sA.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(i=e.error)||void 0===i?void 0:i.code)||null,video:e.mediaType===Yb.VIDEO,audio:e.mediaType===Yb.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===Yb.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(e.user._videoSSRC)},!0)})),Qy.info(\"[\".concat(this._clientId,\"] massSubscribe success \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i)})).join(\"; \"))),r}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),n()}}async unsubscribe(e,t,i){if(!(e instanceof iV)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");e=t}if(t||this.store.useP2P){if(\"datachannel\"===t)return this._unsubscribeDataChannel(e,i)}else await this._unsubscribeDataChannel(e,i);if(t&&sv(t,\"mediaType\",[\"audio\",\"video\"]),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't unsubscribe stream, haven't joined yet!\");const n=this._users.find((t=>t===e));if(!n){const t=new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Qy.error(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(e.uid,\", user is not in the channel\")),t}Qy.info(\"[\".concat(this._clientId,\"] unsubscribe uid: \").concat(e.uid,\", mediaType: \").concat(t));const r=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof RV)await this._p2pChannel.unsubscribe(e,t);else{const i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),t&&\"audio\"!==t||(e._audio_pre_subscribed=!1),t&&\"video\"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&Fv(this._users,e),Qy.info(\"[\".concat(this._clientId,\"] unsubscribe success uid: \").concat(e.uid,\", mediaType: \").concat(t))}}catch(t){if(t.code===nv.DISCONNECT_P2P)return void Qy.warning(\"disconnecting p2p, abort unsubscribe request.\");throw Qy.error(\"[\".concat(this._clientId,\"] unsubscribe user \").concat(e.uid,\" error\"),t.toString()),t}finally{r()}}async _unsubscribeDataChannel(e,t){if(t&&av(t,\"id\",0,65535,!0),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't unsubscribe datachannel, haven't joined yet!\");const i=this._users.find((t=>t===e));if(!i){const t=new Sb(nv.INVALID_REMOTE_USER,\"user is not in the channel\");throw Qy.error(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(e.uid,\", user is not in the channel\")),t}let n;if(\"number\"==typeof t){const i=e._dataChannels.find((e=>e.id===t));i&&(n=[i])}else n=e._dataChannels;if(void 0===n){const i=new Sb(nv.REMOTE_USER_IS_NOT_PUBLISHED);throw Qy.error(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(e.uid,\" with channelId \").concat(t,\", remote datachannel is not published\")),i}Qy.info(\"[\".concat(this._clientId,\"] unsubscribe uid: \").concat(e.uid,\", mediaType: datachannel, ids: \").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),Qy.info(\"[\".concat(this._clientId,\"] unsubscribe datachannel success uid: \").concat(e.uid,\", mediaType: datachannel, ids: \").concat(t))}catch(t){if(t.code===nv.DISCONNECT_P2P)return void Qy.warning(\"disconnecting p2p, abort unsubscribe request.\");throw Qy.error(\"[\".concat(this._clientId,\"] unsubscribe user \").concat(e.uid,\" error\"),t.toString()),t}}async massUnsubscribe(e){if(lv(e,\"unsubscribeList\"),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't unsubscribeAll stream, haven't joined yet!\");Qy.info(\"[\".concat(this._clientId,\"] start massUnsubscribe \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i,\";\")})).join())),e=[...e];const t=new Map;for(let i=e.length-1;i>=0;i--){const{user:n,mediaType:r}=e[i];if(!n){const e=new Sb(nv.INVALID_PARAMS,\"user property does not exist in unsubscribeList item\");throw Qy.error(\"[\".concat(this._clientId,\"] user property does not exist in unsubscribeList item\")),e}sv(r,\"mediaType\",[\"video\",\"audio\",void 0]);const o=this._users.find((e=>e===n));if(!o){Qy.warning(\"[\".concat(this._clientId,\"] can not unsubscribe \").concat(n.uid,\", user is not in the channel\")),e.splice(i,1);continue}const s=Vb.Video|Vb.LwoVideo;if(t.has(n)){const o=t.get(n);let a;switch(r){case\"video\":a=o&s;break;case\"audio\":a=o&Vb.Audio;break;default:a=o&(Vb.Audio|s)}if(a){Qy.warning(\"[\".concat(this._clientId,\"] repeat massUnsubscribe user:\").concat(n.uid,\",mediaType:\").concat(r,\" twice.\")),e.splice(i,1);continue}r?\"audio\"===r?t.set(n,o|Vb.Audio):\"video\"===r&&t.set(n,o|s):t.set(n,o|Vb.Audio|s)}else r?\"audio\"===r?t.set(n,Vb.Audio):\"video\"===r&&t.set(n,s):t.set(n,Vb.Audio|s)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),Qy.info(\"[\".concat(this._clientId,\"] massUnsubscribe success \").concat(e.map((e=>{let{user:t,mediaType:i}=e;return\"user: \".concat(null==t?void 0:t.uid,\", mediaType: \").concat(i,\";\")})).join()))}catch(e){if(e.code===nv.DISCONNECT_P2P)return void Qy.warning(\"[\".concat(this._clientId,\"] disconnecting p2p, abort unsubscribe request.\"));throw Qy.error(\"[\".concat(this._clientId,\"] massUnsubscribe error\"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new rv(nv.INVALID_PARAMS);uv(e.width)||cv(e.width,\"streamParameter.width\"),uv(e.height)||cv(e.height,\"streamParameter.height\"),uv(e.framerate)||cv(e.framerate,\"streamParameter.framerate\"),uv(e.bitrate)||av(e.bitrate,\"streamParameter.bitrate\")}(e),(!e.width&&e.height||e.width&&!e.height)&&Qy.warning(\"[\".concat(this._clientId,\"] The width and height parameters take effect only when both are set\")),Qy.info(\"[\".concat(this._clientId,\"] set low stream parameter to\"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,Jb.LocalVideoLowTrack)}async enableDualStream(){if(!MD().supportDualStream)throw sA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Sb(nv.NOT_SUPPORTED,\"Your browser is not support dual stream\");if(this._isDualStreamEnabled)throw new Sb(nv.INVALID_OPERATION,\"Dual stream is already enabled\");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw sA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,sA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),Qy.info(\"[\".concat(this._clientId,\"] enable dual stream\"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"Can't publish stream, haven't joined yet!\");if(this._p2pChannel.getLocalMedia(Jb.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw sA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,sA.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),Qy.info(\"[\".concat(this._clientId,\"] disable dual stream\"))}}async setClientRole(e,t){if(function(e){sv(e,\"role\",[\"audience\",\"host\"])}(e),t&&Ov(t),\"rtc\"===this.mode||\"p2p\"===this.mode)throw Qy.warning(\"[\".concat(this._clientId,\"]\").concat(this.mode,\" mode can not use setClientRole\")),new Sb(nv.INVALID_OPERATION,\"\".concat(this.mode,\" mode can not use setClientRole\"));if(t&&t.level&&\"host\"===e)throw new Sb(nv.INVALID_OPERATION,\"host mode can not set audience latency level\");if(\"audience\"===e&&this._p2pChannel.hasLocalMedia())throw new Sb(nv.INVALID_OPERATION,\"can not set client role to audience when publishing stream\");await this._gateway.setClientRole(e,t),this._config.role=e,Qy.info(\"[\".concat(this._clientId,\"] set client role to \").concat(e,\", level: \").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const i=t.timestamp-Date.now();return Math.abs(i)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?i:0}getNtpWallTimeInMs(){return\"visible\"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(dv(e,\"proxyServer\"),!t){if(\"DISCONNECTED\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Set proxy server before join channel\");if(\"disabled\"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Sb(nv.INVALID_OPERATION,\"You have already set the proxy\")}this._proxyServer=e,sA.setProxyServer(this._proxyServer),Qy.setProxyServer(this._proxyServer),Qy.info(\"[\".concat(this._clientId,\"] Set proxy server \").concat(t?\"by initialize call\":\"\",\" success.\"))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(\"DISCONNECTED\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Set turn server before join channel\");if(\"disabled\"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Sb(nv.INVALID_OPERATION,\"You have already set the proxy\")}if(bv(e))return this._turnServer={servers:e,mode:\"original-manual\"},void Qy.info(\"[\".concat(this._clientId,\"] Set original turnserver \").concat(t?\"by initialize call\":\"\",\" success: \").concat(e.map((e=>e.urls)).join(\",\"),\".\"));e.forEach((e=>wv(e))),this._turnServer={servers:e,mode:\"manual\"},Qy.info(\"[\".concat(this._clientId,\"] Set turnserver \").concat(t?\"by initialize call\":\"\",\" success.\"))}setLicense(e){if(\"DISCONNECTED\"!==this.connectionState){throw new Sb(nv.INVALID_OPERATION,\"you should set license before join channel\")}if(dv(e,\"license\",32,32),!/^[A-Za-z\\d]+$/.test(e))throw new Sb(nv.INVALID_PARAMS,\"license should only contains characters from A-Z a-z 0-9\");this._license=e,Qy.info(\"[\".concat(this._clientId,\"] set license success\"),e)}startProxyServer(e){if(\"DISCONNECTED\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Start proxy server before join channel\");if(this._proxyServer||\"manual\"===this._turnServer.mode||this._useLocalAccessPoint)throw new Sb(nv.INVALID_OPERATION,\"You have already set the proxy\");const t=[3,4,5];let i;switch(void 0===e&&(e=3),e){case 1:case 2:throw new Sb(nv.NOT_SUPPORTED,\"proxy mode 1/2 has been deprecated and not supported.\");case 3:i=\"proxy3\";break;case 4:i=\"proxy4\";break;case 5:i=\"proxy5\";break;default:throw new Sb(nv.INVALID_PARAMS,\"proxy server mode must be \".concat(t.join(\"|\")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,Qy.info(\"[\".concat(this._clientId,\"] set cloud proxy server mode to\"),this._cloudProxyServerMode)}stopProxyServer(){if(\"DISCONNECTED\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"Stop proxy server after leave channel\");sA.setProxyServer(),Qy.setProxyServer(),this._cloudProxyServerMode=\"disabled\",this.store.cloudProxyServerMode=\"disabled\",Qy.info(\"[\".concat(this._clientId,\"] set cloud proxy server mode to\"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:\"auto\",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new Sb(nv.INVALID_PARAMS,\"accessPoints is required.\");lv(e.accessPoints.serverList,\"accessPoints.serverList\"),dv(e.accessPoints.domain,\"accessPoints.domain\");const t=(e,t)=>{av(e,t,0,65535,!0)};let i=443;if(e.accessPoints.port&&(t(e.accessPoints.port,\"accessPoints.port\"),i=e.accessPoints.port),this._proxyServer||\"disabled\"!==this._cloudProxyServerMode)throw new Sb(nv.INVALID_OPERATION,\"set local access point failed, You have already set the cloud proxy\");Dy(\"CLOSE_AFB_FOR_LOCAL_AP\")&&(Ny(\"JOIN_WITH_FALLBACK_SIGNAL_PROXY\",!1),Ny(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\",!1));const n=/^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/,r=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>n.test(e)?\"\".concat(e.replace(/\\./g,\"-\"),\".\").concat(r):e)),s=o.map((e=>\"\".concat(e,\":\").concat(i)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Ny(\"WEBCS_DOMAIN\",s),Ny(\"WEBCS_DOMAIN_BACKUP_LIST\",s),Ny(\"GATEWAY_DOMAINS\",[r]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(lv(e.report.hostname,\"report.hostname\"),Ny(\"EVENT_REPORT_DOMAIN\",e.report.hostname[0]),Ny(\"EVENT_REPORT_BACKUP_DOMAIN\",e.report.hostname[1]||e.report.hostname[0])):(Ny(\"EVENT_REPORT_DOMAIN\",o[0]),Ny(\"EVENT_REPORT_BACKUP_DOMAIN\",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,\"report.port\"),a=e.report.port),Ny(\"STATS_COLLECTOR_PORT\",a),e.report?Ny(\"ENABLE_EVENT_REPORT\",!0):Ny(\"ENABLE_EVENT_REPORT\",!1);let c=\"\";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(lv(e.log.hostname,\"log.hostname\"),c=e.log.hostname[0]):c=o[0];let d=6444;e.log&&e.log.port&&(t(e.log.port,\"log.port\"),d=e.log.port),Ny(\"LOG_UPLOAD_SERVER\",\"\".concat(c,\":\").concat(d));let l=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(lv(e.cds.hostname,\"cds.hostname\"),l=e.cds.hostname):l=o;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,\"cds.port\"),u=e.cds.port),Ny(\"CDS_AP\",l.map((e=>\"\".concat(e,\":\").concat(u)))),e.cds?Ny(\"ENABLE_CONFIG_DISTRIBUTE\",!0):Ny(\"ENABLE_CONFIG_DISTRIBUTE\",!1),Qy.info(\"set local access point v2 success\")}setLocalAccessPoints(e,t){if(lv(e,\"serverList\"),dv(t,\"domain\"),this._proxyServer||\"disabled\"!==this._cloudProxyServerMode)throw new Sb(nv.INVALID_OPERATION,\"set local access point failed, You have already set the cloud proxy\");const i=/^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/;e=e.map((e=>i.test(e)?\"\".concat(e.replace(/\\./g,\"-\"),\".\").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Ny(\"WEBCS_DOMAIN\",e),Ny(\"WEBCS_DOMAIN_BACKUP_LIST\",e),Ny(\"GATEWAY_DOMAINS\",[t]),Ny(\"EVENT_REPORT_DOMAIN\",e[0]),Ny(\"EVENT_REPORT_BACKUP_DOMAIN\",e[1]||e[0]),Ny(\"LOG_UPLOAD_SERVER\",\"\".concat(e[0],\":6444\")),Qy.info(\"[\".concat(this._clientId,\"] set local access point success\"))}async setRemoteDefaultVideoStreamType(e){if(sv(e,\"streamType\",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] set default remote video stream type error\"),e.toString()),e}else Qy.debug(\"[\".concat(this._clientId,\"] haven't joined yet, cache remoteDefaultVideoStreamType \").concat(e))}async setRemoteVideoStreamType(e,t){sv(t,\"streamType\",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] set remote video stream type error\"),e.toString()),e}Qy.info(\"[\".concat(this._clientId,\"] set remote \").concat(e,\" video stream type to \").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){sv(t,\"fallbackType\",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] set stream fallback option\"),e.toString()),e}Qy.info(\"[\".concat(this._clientId,\"] set remote \").concat(e,\" stream fallback type to \").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,i,n){!function(e){sv(e,\"encryptionMode\",[\"aes-128-xts\",\"aes-256-xts\",\"aes-128-ecb\",\"sm4-128-ecb\",\"aes-128-gcm\",\"aes-256-gcm\",\"aes-128-gcm2\",\"aes-256-gcm2\",\"none\"])}(e),dv(t,\"secret\");const r=[\"aes-128-gcm2\",\"aes-256-gcm2\"];if(Dn(r).call(r,e)){if(!i||!(i instanceof Uint8Array&&32===i.length))throw new Sb(nv.INVALID_PARAMS,\"salt must be an Uint8Array and exactly equal to 32 bytes\")}else if(i)throw new Sb(nv.INVALID_PARAMS,\"current encrypt mode does not need salt\");if(n){if(ov(n,\"encryptDataStream\"),!Dn(r).call(r,e))throw new Sb(nv.INVALID_PARAMS,\"current encrypt mode does not support data stream\");this._encryptDataStream=!0}new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\\\"|{}\\\\[\\\\]])(?=.{8,})\").test(t)||Qy.warning(\"The secret is not strong:\\n      The secret must contain at least 1 lowercase alphabetical character,\\n      The secret must contain at least 1 uppercase alphabetical character,\\n      The secret must contain at least 1 numeric character,\\n      The secret must contain at least one special character,\\n      The secret must be eight characters or longer.\\n      \"),this._encryptionMode=e,this._encryptionSecret=t,i&&(this._encryptionSalt=qv(i))}async renewToken(e){if(dv(e,\"token\",1,2047),!this._key||!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"renewToken should not be called before user join\");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const i=await this._renewTokenMutex.lock();try{if(Dy(\"USE_NEW_TOKEN\")){Qy.debug(\"[\".concat(this._clientId,\"] start renew token with ticket from unilbs\"));const t=await MU(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||_y);Qy.debug(\"[\".concat(this._clientId,\"] get ticket from unilbs success\")),await this._gateway.renewToken({token:e,ticket:t})}else Qy.debug(\"[\".concat(this._clientId,\"] start renew token without ticket\")),await this._gateway.renewToken({token:e});Qy.debug(\"[\".concat(this._clientId,\"] renewToken success\"))}catch(e){throw this._key=t,this._joinInfo.token=t,Qy.error(\"[\".concat(this._clientId,\"] renewToken failed\"),e.toString()),e}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?Qy.warning(\"you have already enabled audio volume indicator!\"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(Nv.VOLUME_INDICATOR,e)}),Dy(\"AUDIO_VOLUME_INDICATION_INTERVAL\")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(\"h264\"!==this.codec)throw new Sb(nv.LIVE_STREAMING_INVALID_RAW_STREAM,\"raw streaming is only support h264\");if(!this._p2pChannel.hasLocalMedia())throw new Sb(nv.LIVE_STREAMING_INVALID_RAW_STREAM,\"can not find stream to raw streaming\")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new Sb(nv.LIVE_STREAMING_TASK_CONFLICT);const i=t?Cb.TRANSCODE:Cb.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(e,i)}setLiveTranscoding(e){return this._createLiveStreamingClient(Cb.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new Sb(nv.INVALID_PARAMS,\"can not find live streaming url to stop\");await Gh.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async startChannelMediaRelay(e){bV(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){bV(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"can not send data stream, not joined\");if((\"string\"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),\"string\"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let n=!1;this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Dn(t=[\"aes-128-gcm2\",\"aes-256-gcm2\"]).call(t,this._encryptionMode)&&(n=!0,e.payload=await async function(e,t,i){var n;const r=Jn(n=Array.from(i)).call(n,((e,t)=>e+t),0),o={serverTs:0,seq:By++,length:i.length,checkSum:r},s=new Uint8Array(ay(r,2)),a=new ArrayBuffer(Fy),c=new DataView(a);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const d=16-i.length%16;i=Jv(i,new Uint8Array(d));const l=await window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:e,tagLength:Uy,additionalData:s},t,i);return Jv(new Uint8Array(a),new Uint8Array(l))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload));if(new Blob([e.payload]).size>1024)throw new Sb(nv.INVALID_PARAMS,n?\"encrypted stream message out of range.\":\"stream message out of range.\");return this._gateway.signal.request(_b.DATA_STREAM,{payload:qv(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-gF},!i)}sendMetadata(e){if(!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"can not send metadata, not joined\");if(new Blob([e]).size>1024)throw new Sb(nv.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(_b.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:qv(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach($y),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"can not send custom report, not joined\");await sA.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){sv(t.spatialLayer,\"spatialLayer\",[0,1,2,3]),sv(t.temporalLayer,\"temporalLayer\",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Qy.error(\"[\".concat(this._clientId,\"] pick SVC layer failed\"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:i}=e;if(ov(t,\"apRTM\"),av(i,\"rtmFlag\",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=i,Qy.debug(\"[\".concat(this._clientId,\"] setRTMconfig \").concat(JSON.stringify(e),\" in \").concat(this.connectionState,\" state\")),(\"CONNECTED\"===this.connectionState||\"RECONNECTING\"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=i,this._gateway.setRTM2Flag(i)}_reset(){if(Qy.debug(\"[\".concat(this._clientId,\"] reset client\")),this._axiosCancelSource.cancel(),this._axiosCancelSource=EI.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&KF(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode=\"none\",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),\"fallback\"===this._cloudProxyServerMode&&(this._cloudProxyServerMode=\"disabled\",this.store.cloudProxyServerMode=\"disabled\"),this._p2pChannel.reset(),this._publishMutex=new hy(\"client-publish\"),this._subscribeMutex=new hy(\"client-subscribe\"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var i;const n=e||ty();e?Qy.debug(\"[\".concat(this._clientId,\"] new Session \").concat(n)):Qy.debug(\"[\".concat(this._clientId,\"] renewSession \").concat(this._sessionId,\" => \").concat(n));const r=e?\"\":this._sessionId||\"\";this._sessionId=n,this.store.sessionId=n;const o={lts:(new Date).getTime(),mode:this.mode,buildFormat:2,stringUid:(null==t?void 0:t.stringUid)||(null===(i=this._joinInfo)||void 0===i?void 0:i.stringUid),channelProfile:\"live\"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:r,clientRole:\"audience\"===this.role?2:1};sA.sessionInit(this._sessionId,Sj({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new Sb(nv.INVALID_OPERATION,\"Can't publish stream, haven't joined yet!\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"can not publish stream in \".concat(this.connectionState,\" state\"));if(\"auto\"===this._turnServer.mode&&Dy(\"FORCE_TURN\")&&!Dy(\"TURN_ENABLE_TCP\")&&!Dy(\"TURN_ENABLE_UDP\"))throw new Sb(nv.UNEXPECTED_ERROR,\"force TURN With No TURN Configuration\");Qy.debug(\"[\".concat(this._clientId,\"] publish high stream\"));try{const i=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof RV){const e=(await i.next()).value;if(e){try{await this._gateway.sendExtensionMessage(sw.PUBLISH,e,!0)}catch(e){throw i.throw(e),e}await i.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const n=(await i.next()).value;if(n){var t;let e;try{e=await this._gateway.publish(this._uid,n,!0)}catch(e){if(e.code!==nv.DISCONNECT_P2P)throw i.throw(e),e}await i.next((null===(t=e)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof Hk&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===nv.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new Sb(nv.INVALID_OPERATION,\"Can't publish stream, haven't joined yet!\");if(\"CONNECTED\"!==this.connectionState&&\"RECONNECTING\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"can not publish stream in \".concat(this.connectionState,\" state\"));Qy.debug(\"[\".concat(this._clientId,\"] publish low stream\"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),i=(await e.next()).value;if(i){var t;let n;try{n=await this._gateway.publish(this._uid,i,!0)}catch(t){if(t.code!==nv.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=n)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===nv.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId){return new Sb(nv.INVALID_OPERATION,\"can not create live streaming client, please join channel first\").throw()}const e=(t={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},mF(\"LiveStreaming\").create(t));var t;return e.onLiveStreamError=(e,t)=>{sA.reportApiInvoke(this._sessionId,{name:Cv.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Iv.TRACER}).onSuccess(),this.safeEmit(Nv.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{sA.reportApiInvoke(this._sessionId,{name:Cv.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Iv.TRACER}).onSuccess(),this.safeEmit(Nv.LIVE_STREAMING_WARNING,e,t)},e.on(wb.REQUEST_WORKER_MANAGER_LIST,((e,t,i)=>{if(!this._joinInfo)return i(new Sb(nv.INVALID_OPERATION,\"can not find join info to get worker manager\"));(async function(e,t,i,n){const r=Dy(\"UAP_AP\").slice(0,Dy(\"AJAX_REQUEST_CONCURRENT\")).map((e=>t.proxyServer?\"https://\".concat(t.proxyServer,\"/ap/?url=\").concat(e+\"/api/v1?action=uap\"):\"https://\".concat(e,\"/api/v1?action=uap\")));return await _U(r,e,t,i,n)})(e,this._joinInfo,this._axiosCancelSource.token,_y).then(t).catch(i)})),e};return e===Cb.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo){return new Sb(nv.INVALID_OPERATION,\"can not create channel media relay client, please join channel first\").throw()}if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:i}=this.getLocalVideoStats(),n=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:i}},mF(\"ChannelMediaRelay\").create(e));n.on(\"state\",(e=>{e===Lb.RELAY_STATE_FAILURE&&n&&n.dispose(),this.safeEmit(Nv.CHANNEL_MEDIA_RELAY_STATE,e)})),n.on(\"event\",(e=>{this.safeEmit(Nv.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient=n,this._statsCollector.onStatsChanged=(e,t)=>{var i;\"resolution\"===e&&(null===(i=this._channelMediaRelayClient)||void 0===i||i.setVideoProfile(t))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:i,deleted:n}=e,r=[];if(t){const e=[];this._users.forEach((t=>{t._dataChannels.forEach((n=>{i.every((e=>e.uid!==t._uintid||e.stream_id!==n.id))&&e.push({uid:t._uintid,stream_id:n.id,ordered:n.ordered,max_retrans_times:n.maxRetransmits,metadata:n.metadata})}))})),e.length>0&&this._handleUpdateDataChannel({added:[],deleted:e})}Array.isArray(i)&&i.length>0&&i.forEach((e=>{const{uid:i,stream_id:n,ordered:o,max_retrans_times:s,metadata:a}=e,c=this._users.find((e=>e._uintid===i));if(!c)return void Qy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_add_data_channel)\"));Qy.debug(\"[\".concat(this._clientId,\"] data_channel added with uid \").concat(i)),Dn(r).call(r,c)||r.push(c),c._uintid||(c._uintid=i);if(!(-1!==c._dataChannels.findIndex((t=>t.id===e.stream_id)))){const e={id:n,ordered:!!o,maxRetransmits:s,metadata:a},i=function(e){return fF(e,!0)}(e);c._dataChannels.push(i),Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(c.uid,\" published datachannel\")),t||this.safeEmit(Nv.USER_PUBLISHED,c,\"datachannel\",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(Qy.debug(\"[\".concat(this._clientId,\"] resubscribe datachannel for user \").concat(c.uid,\" after reconnect.\")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{Qy.error(\"[\".concat(this._clientId,\"] resubscribe datachannel error\"),e.toString())})))})),t&&(this.safeEmit(Nv.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:t,stream_id:i}=e,n=this._users.find((e=>e._uintid===t));if(!n)return void Qy.error(\"[\".concat(this._clientId,\"] can not find target user!(on_delete_data_channel)\"));const r=n._dataChannels.find((t=>t.id===e.stream_id));r&&(Qy.debug(\"[\".concat(this._clientId,\"] data_stream delete with uid \").concat(t)),this._p2pChannel.unsubscribeDataChannel(n,[r]).then((e=>{if(n._dataChannels=n._dataChannels.filter((e=>e!==r)),e)return this._gateway.unsubscribeDataChannel(e,n.uid)})),Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t,\" unpublished datachannel ,id:\").concat(r.id)),this.safeEmit(Nv.USER_UNPUBLISHED,n,\"datachannel\",r._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){Qy.debug(\"[\".concat(this._clientId,\"] datachannel removed with uid \").concat(e.uid));const i=()=>{Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(t.uid,\" unpublished datachannel\")),t._dataChannels.forEach((e=>{this.safeEmit(Nv.USER_UNPUBLISHED,t,\"datachannel\",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),i()}}else Qy.warning(\"[\".concat(this._clientId,\"] can not find target user!(on_remove_datachannel)\"))}_handleGatewayEvents(){this._gateway.on(Ub.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(Ub.CONNECTION_STATE_CHANGE,((e,t,i)=>{var n;if(i===Av.FALLBACK)return;const r=()=>{this.safeEmit(Nv.CONNECTION_STATE_CHANGE,e,t,i)};if(sA.reportApiInvoke(this._sessionId||(null===(n=this._gateway.joinInfo)||void 0===n?void 0:n.sid)||null,{name:Cv.CONNECTION_STATE_CHANGE,options:[e,t,i],tag:Iv.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:i})),Qy.info(\"[\".concat(this._clientId,\"] connection state change: \").concat(t,\" -> \").concat(e)),\"DISCONNECTED\"===e)return this._reset(),void r();if(\"RECONNECTING\"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(\"CONNECTED\"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{Qy.warning(\"[\".concat(this._clientId,\"] auto set stream fallback option failed\"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{Qy.warning(\"[\".concat(this._clientId,\"] auto set remote stream type failed\"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{Qy.debug(\"[\".concat(this._clientId,\"] setRemoteDefaultVideoStreamType after gateway connected\"))})).catch((e=>{Qy.error(\"[\".concat(this._clientId,\"] setRemoteDefaultVideoStreamType after gateway failed, \").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{if(\"CONNECTED\"!==this.connectionState)return;this._userOfflineTimeout=void 0;this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{Qy.debug(\"[\".concat(this._clientId,\"] user offline timeout, emit user offline \").concat(e.uid)),this._handleUserOffline({uid:e.uid})}))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{\"CONNECTED\"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch audio unmute event \").concat(e.uid)),this._handleMuteStream(e.uid,Yb.AUDIO,!1)),e._trust_video_mute_state_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch video unmute event \").concat(e.uid)),this._handleMuteStream(e.uid,Yb.VIDEO,!1)),e._trust_audio_enabled_state_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch enable local audio \").concat(e.uid)),this._handleSetStreamLocalEnable(\"audio\",e.uid,!0)),e._trust_video_enabled_state_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch enable local video \").concat(e.uid)),this._handleSetStreamLocalEnable(\"video\",e.uid,!0)),e._trust_video_stream_added_state_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch reset video stream added \").concat(e.uid)),this._handleResetAddStream(e,\"video\")),e._trust_audio_stream_added_state_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch reset audio stream added \").concat(e.uid)),this._handleResetAddStream(e,\"audio\")),e._video_added_||e._audio_added_||(Qy.debug(\"[\".concat(this._clientId,\"] auto dispatch stream remove \").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}r()})),this._gateway.on(Ub.REQUEST_NEW_GATEWAY_LIST,(async(e,t)=>{if(!this._joinInfo)return t(new Sb(nv.UNEXPECTED_ERROR,\"can not recover, no join info\"));try{let t;const i=await GF(Sj(Sj({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));i?(t=i.ap,YF(i),this._joinInfo.preload=!0):(t=await bU(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||_y,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const n=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[i,r]=t.split(\":\");this._joinInfo&&this._joinInfo.proxyServer?n.push({proxy:this._joinInfo.proxyServer,host:i,port:r}):n.push({host:i,port:r})})),e(n)}catch(e){t(e)}})),this._gateway.on(Ub.NETWORK_QUALITY,(e=>{\"normal\"===this._networkQualitySensitivity&&this.safeEmit(Nv.NETWORK_QUALITY,e)})),this._gateway.on(Ub.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(Nv.STREAM_TYPE_CHANGED,e,t);sA.reportApiInvoke(this._sessionId,{name:Cv.STREAM_TYPE_CHANGE,options:[e,t],tag:Iv.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(Ub.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(Ub.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,i)=>{try{let i=await this._p2pChannel.getEstablishParams();Dy(\"ENABLE_PREALLOC_PC\")&&i||(i=await this._p2pChannel.startP2PConnection(e)),t(i)}catch(e){i(e)}})),this._gateway.on(Ub.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const i=OM(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(i)})),this._gateway.on(Ub.PRE_CONNECT_PC,(async e=>{const{candidates:t,fingerprint:i}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var n;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:e,cid:r}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:\"\".concat(r,\"_\").concat(e),icePwd:\"\".concat(r,\"_\").concat(e)},dtlsParameters:{fingerprints:[{hashFunction:\"sha-256\",fingerprint:null!==(n=Dy(\"FINGERPRINT\"))&&void 0!==n?n:i}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:\"active\",cname:\"o/i14u9pJrxRKAsu\",preallocation:!0})}}))}_handleGatewaySignalEvents(){this._gateway.signal.on(mb.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(mb.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(mb.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream(\"audio\",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(mb.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream(\"video\",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(mb.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(mb.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)})),this._gateway.signal.on(mb.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(mb.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(mb.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,Yb.AUDIO,!0))),this._gateway.signal.on(mb.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,Yb.AUDIO,!1))),this._gateway.signal.on(mb.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,Yb.VIDEO,!0))),this._gateway.signal.on(mb.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,Yb.VIDEO,!1))),this._gateway.signal.on(mb.RECEIVE_METADATA,(e=>{const t=Yv(e.metadata);this.safeEmit(Nv.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(mb.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let i=Yv(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Dn(t=[\"aes-128-gcm2\",\"aes-256-gcm2\"]).call(t,this._encryptionMode)){if(e.payload.length<Fy)throw new Sb(nv.UNEXPECTED_RESPONSE,\"payload length \".concat(e.payload.length,\" is less than header length \").concat(Fy));const t=await async function(e,t,i){const n=i.subarray(0,Fy),r=n.slice(8,Fy),o=(r[0]<<8)+r[1],s=(n[6]<<8)+n[7],a=await window.crypto.subtle.decrypt({name:\"AES-GCM\",iv:e,tagLength:Uy,additionalData:new Uint8Array(ay(o,2))},t,i.subarray(Fy));return new Uint8Array(a).subarray(0,s)}(this._encryptDataStreamIv,this._encryptDataStreamKey,i);i=t}let n=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),i=this.remoteUsers.find((t=>t.uid===e.uid)),r=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==i?void 0:i._audioSSRC)));n=null==r?void 0:r.jitterBufferMs}null==n&&(n=0),AF(Sj(Sj({},e),{},{payload:i}),n,{id:this._clientId,onStreamMessage:\"function\"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(mb.ON_CRYPT_ERROR,(()=>{Kv((()=>{Qy.warning(\"[\".concat(this._clientId,\"] on crypt error\")),this.safeEmit(Nv.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(mb.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(mb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{Qy.warning(\"[\".concat(this._clientId,\"] received message onTokenPrivilegeDidExpire, please get new token and join again\")),this._gateway.leave(!0,Av.TOKEN_EXPIRE),this.safeEmit(Nv.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(mb.ON_STREAM_FALLBACK_UPDATE,(e=>{Qy.debug(\"[\".concat(this._clientId,\"] stream fallback peerId: \").concat(e.stream_id,\", attr: \").concat(e.stream_type)),this.safeEmit(Nv.STREAM_FALLBACK,e.stream_id,1===e.stream_type?\"fallback\":\"recover\")})),this._gateway.signal.on(mb.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),Qy.info(\"[\".concat(this._clientId,\"] on publish stream, \").concat(JSON.stringify(e))))})),this._gateway.signal.on(mb.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable(\"video\",e.uid,!0)})),this._gateway.signal.on(mb.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable(\"video\",e.uid,!1)})),this._gateway.signal.on(pb.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case _b.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var i,n;const r=e.some((e=>{let{stream_type:t}=e;return t===Mb.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==Mb.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t===Mb.Screen||t===Mb.ScreenLow}));\"offer\"===t.state&&sA.publish(this._joinInfo.sid,{eventElapse:jU.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:nv.TIMEOUT,audio:r,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:r?null===(i=e.find((e=>{let{stream_type:t}=e;return t===Mb.Audio})))||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId.toString():void 0,videoName:o?null===(n=e.find((e=>{let{stream_type:t}=e;return t!==Mb.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0})}break}case _b.SUBSCRIBE:t&&sA.subscribe(this._joinInfo.sid,{succ:!1,ec:nv.TIMEOUT,audio:t.stream_type===Yb.AUDIO,video:t.stream_type===Yb.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:jU.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}})),this._gateway.signal.on(mb.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(mb.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;Dy(\"BLOCK_LOCAL_CLIENT\")&&(e.users=e.users.filter((e=>!uA(e.string_id||e.stream_id,this.channelName))));const t=[],i=[];for(const n of e.users){let e=this._users.find((e=>e._uintid===n.stream_id));e?e._trust_in_room_=!0:(e=new iV(n.string_id||n.stream_id,n.stream_id),this._users.push(e),0===this.getListeners(Nv.PUBLISHED_USER_LIST).length&&(Qy.debug(\"[\".concat(this._clientId,\"] user online\"),n.stream_id),this.safeEmit(Nv.USER_JOINED,e)));const r=Vb.Audio&n.stream_type,o=(Vb.Video|Vb.LwoVideo)&n.stream_type,s=0!=(65280&n.stream_type),a=r&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=n.video_ssrc,e._rtxSsrcId=n.video_rtx),r&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=n.audio_ssrc),r&&!a&&0===this.getListeners(Nv.PUBLISHED_USER_LIST).length&&(Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e.uid,\" published audio\")),this.safeEmit(Nv.USER_PUBLISHED,e,\"audio\")),o&&!c&&0===this.getListeners(Nv.PUBLISHED_USER_LIST).length&&(Qy.info(\"[\".concat(this._clientId,\"] remote user \").concat(e.uid,\" published video\")),this.safeEmit(Nv.USER_PUBLISHED,e,\"video\")),(r&&!a||o&&!c||s)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,\"video\")&&i.push({user:e,mediaType:\"video\"}),r&&this._p2pChannel.hasPendingRemoteMedia(e,\"audio\")&&i.push({user:e,mediaType:\"audio\"})}i.length>0&&(Qy.debug(\"[\".concat(this._clientId,\"] RE massSubscribe after reconnect \").concat(i.map((e=>\"user: \".concat(e.user.uid,\", mediaType: \").concat(e.mediaType))).join(\"; \"),\" \")),this.massSubscribe(i).catch((e=>{Qy.error(\"[\".concat(this._clientId,\"] mass resubscribe error\"),e.toString())}))),this.getListeners(Nv.PUBLISHED_USER_LIST).length>0?Dy(\"ENABLE_DATASTREAM_2\")?this._pendingPublishedUsers=t:(Qy.info(\"[\".concat(this._clientId,\"] client emit user-list event, users: \").concat(t.map((e=>e.uid)).join(\", \"))),this.safeEmit(Nv.PUBLISHED_USER_LIST,t)):Qy.info(\"[\".concat(this._clientId,\"] client not emit user-list event case there is no user-list listener, users: \").concat(t.map((e=>e.uid)).join(\", \")))})),this._gateway.signal.on(mb.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof hF&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Dn(t=Object.keys(My)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(mb.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(sw.PUBLISH,((e,t,i)=>{const{uid:n}=e;e.forEach((e=>{const{kind:r,ssrcs:o,mid:s,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(r,n,o[0].ssrcId,s);const c=this._users.find((e=>e.uid===n));return c&&this._p2pChannel instanceof RV?this._p2pChannel.mockSubscribe(c,r,o[0].ssrcId,s).then((()=>{t()})).catch(i):t(),this._handleMuteStream(n,r,!!a)}))})),this._gateway.signal.on(sw.CALL,(async(e,t,i)=>{if(this._p2pChannel instanceof RV)try{var n;t(await this._p2pChannel.startP2P({turnServer:null===(n=this._joinInfo)||void 0===n?void 0:n.turnServer},e))}catch(e){i(e)}})),this._gateway.signal.on(pb.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof RV&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(sw.UNPUBLISH,(async(e,t,i)=>{if(this._p2pChannel instanceof RV){const{unpubMsg:n,uid:r}=e,o=this._users.find((e=>e.uid===r));if(!o)return Qy.warning(\"[\".concat(this._clientId,\"] can not find remote user, ignore mute event, uid: \").concat(r)),void t();try{n.forEach((async e=>{let{stream_type:t}=e;const i=t===Mb.Audio?Yb.AUDIO:Yb.VIDEO;await this._p2pChannel.unsubscribe(o,i),this._handleMuteStream(r,i,!0)})),t()}catch(e){i(e)}}})),this._gateway.signal.on(sw.CONTROL,(async(e,t)=>{const{action:i}=e;switch(i){case cw.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,Yb.VIDEO,!0);break;case cw.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,Yb.AUDIO,!0);break;case cw.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream(\"video\",t),this._handleMuteStream(t,Yb.VIDEO,!1);break;case cw.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream(\"audio\",t),this._handleMuteStream(t,Yb.AUDIO,!1)}})),this._gateway.signal.on(sw.RESTART_ICE,(async(e,t,i)=>{if(this._p2pChannel instanceof RV)try{const{direction:i,iceParameter:n}=e;if(i!==fb.SEND_ONLY||n){t(await this._p2pChannel.restartICE(i,n))}else this._p2pChannel.handleDisconnect(i),t()}catch(e){i(e)}})),this._gateway.signal.on(sw.CANDIDATE,(e=>{if(this._p2pChannel instanceof RV){const{candidate:t,direction:i}=e;this._p2pChannel.addRemoteCandidate(t,i)}})),this._p2pChannel.on(Qb.RequestP2PRestartICE,(async(e,t,i)=>{try{const{direction:i}=e;t(await this._gateway.sendExtensionMessage(sw.RESTART_ICE,e,i===fb.SEND_ONLY))}catch(e){i(e)}})),this._p2pChannel.on(Qb.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(sw.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(Qb.RequestP2PMuteLocal,(async(e,t,i)=>{try{await this._gateway.sendExtensionMessage(sw.CONTROL,e,!0),t()}catch(e){i(e)}})),this._p2pChannel.on(Qb.RequestP2PUnmuteRemote,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===nv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Qb.RequestP2PMuteRemote,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===nv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Qb.StateChange,((e,t)=>{t===Xb.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(Qb.RequestMuteLocal,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===nv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Qb.RequestUnmuteLocal,(async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===nv.DISCONNECT_P2P?t():i(e)}else t()})),this._p2pChannel.on(Qb.RequestRePublish,((e,t,i)=>{this.publish(e,!1).then(t).catch(i)})),this._p2pChannel.on(Qb.RequestRePublishDataChannel,((e,t,i)=>{Gh.all(e.map((async e=>{const t=await this._p2pChannel.publishDataChannel([e]);try{t.forEach((e=>{this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)}))}catch(e){if(e.code!==nv.DISCONNECT_P2P)throw e}}))).then(t).catch(i)})),this._p2pChannel.on(Qb.RequestReSubscribe,(async(e,t,i)=>{try{for(const{user:t,kind:i}of e)i===Yb.VIDEO?await this.subscribe(t,\"video\"):await this.subscribe(t,\"audio\");t()}catch(e){i(e)}})),this._p2pChannel.on(Qb.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(Qb.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(Qb.MediaReconnectStart,(e=>{this.safeEmit(Nv.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(Qb.MediaReconnectEnd,(e=>{this.safeEmit(Nv.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(Qb.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(Qb.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof RV)return;const t=await this._p2pChannel.restartICE(e),i=await t.next();if(i.done)return;const n=i.value;let r;try{r=await this._gateway.restartICE({iceParameters:n})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(r);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(Qb.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(Qb.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:r,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:i,rtpCapabilities:n}),s=OM(r,o);await this._p2pChannel.connect(s),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(Qb.RequestUnpublishForReconnectPC,(async(e,t,i)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):i()})),this._p2pChannel.on(Qb.P2PLost,(()=>{this.safeEmit(Nv.P2P_LOST,this.store.uid)})),this._p2pChannel.on(Qb.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(Qb.ConnectionTypeChange,(e=>{this.safeEmit(Nv.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(Qb.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(Qb.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||\"CONNECTED\"!==this.connectionState)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] can not create content inspect, please join channel first\"));if(this._inspect)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] Inspect content service already in connecting/connected state\"));try{const i=(t={config:e},mF(\"ContentInspect\").create(t));this._inspect=i,this.handleVideoInspectEvents(i);const{appId:n,cname:r,sid:o,token:s,uid:a,cid:c,vid:d}=this._joinInfo;await i.init({appId:n,areaCode:\"\",cname:r,sid:o,token:s,uid:a,cid:c,vid:d?Number(d):0},_y)}catch(e){throw Array.isArray(e)?e[0]:e}var t}handleVideoInspectEvents(e){e.on(ew.CONNECTION_STATE_CHANGE,((t,i)=>{if(this.safeEmit(Nv.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,i),i===Zb.CONNECTED){if(\"CONNECTED\"!==this.connectionState)return void this.safeEmit(Nv.CONTENT_INSPECT_ERROR,new Sb(nv.OPERATION_ABORTED,\"Content inspect was cancelled because it left the channel\"));e.inspectImage()}})),e.on(ew.INSPECT_RESULT,((e,t)=>{var i;if((null==t?void 0:t.code)===nv.INVALID_OPERATION&&\"DISCONNECTED\"===this.connectionState)return Qy.debug(\"Stop inspect content because that has left channel\"),null==this||null===(i=this._inspect)||void 0===i||i.close(),void(this._inspect=void 0);this.safeEmit(Nv.CONTENT_INSPECT_RESULT,e,t)})),e.on(ew.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>\"video\"===e.trackMediaType))[0])}))}async disableContentInspect(){if(!this._inspect)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] inspectVideoContent not started\"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(ov(e,\"enabled\"),e){if(!t)throw new Sb(nv.INVALID_PARAMS,\"config is required\");if(OB(t),!this._joinInfo)throw new Sb(nv.INVALID_OPERATION,\"can not create image moderation, please join channel first\");try{if(this._moderation)this._moderation.updateConfig(t);else{const e=(i={config:t},mF(\"ImageModeration\").create(i));this._moderation=e,this.handleImageModerationEvents(e);const{appId:n,cname:r,sid:o,token:s,uid:a,cid:c,vid:d}=this._joinInfo;await e.init({appId:n,areaCode:\"\",cname:r,sid:o,token:s,uid:a,cid:c,vid:d?Number(d):0},_y)}}catch(e){throw Array.isArray(e)?e[0]:e}}else{var i;if(!this._moderation)throw new Sb(nv.INVALID_OPERATION,\"[\".concat(this._clientId,\"] image moderation not started\"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}handleImageModerationEvents(e){e.on(rw.CONNECTION_STATE_CHANGE,((t,i)=>{if(this.safeEmit(Nv.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,i),t===nw.CONNECTED){if(\"CONNECTED\"!==this.connectionState)throw this.setImageModeration(!1),new Sb(nv.OPERATION_ABORTED,\"Image moderation was cancelled because it left the channel\");e.inspectImage()}})),e.on(rw.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>\"video\"===e.trackMediaType))[0])}))}setP2PTransport(e){if(function(e){sv(e,\"transport\",[\"default\",\"auto\",\"relay\",\"sd-rtn\"])}(e),\"p2p\"!==this.mode)throw new Sb(nv.INVALID_OPERATION,\"only p2p mode can set p2pTransport\");this.store.p2pTransport=e,Qy.info(\"[\".concat(this._clientId,\"] set client p2pTransport to \").concat(e))}getJoinChannelServiceRecords(){return Qy.debug(\"getJoinChannelServiceRecords\"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){ov(e,\"enabled\"),Ny(\"ENABLE_PUBLISH_AUDIO_FILTER\",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case\"audio\":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case\"video\":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},rb(fj.prototype,\"leave\",[DB],Object.getOwnPropertyDescriptor(fj.prototype,\"leave\"),fj.prototype),rb(fj.prototype,\"publish\",[PB],Object.getOwnPropertyDescriptor(fj.prototype,\"publish\"),fj.prototype),rb(fj.prototype,\"unpublish\",[LB],Object.getOwnPropertyDescriptor(fj.prototype,\"unpublish\"),fj.prototype),rb(fj.prototype,\"subscribe\",[kB],Object.getOwnPropertyDescriptor(fj.prototype,\"subscribe\"),fj.prototype),rb(fj.prototype,\"presubscribe\",[MB],Object.getOwnPropertyDescriptor(fj.prototype,\"presubscribe\"),fj.prototype),rb(fj.prototype,\"massSubscribe\",[UB],Object.getOwnPropertyDescriptor(fj.prototype,\"massSubscribe\"),fj.prototype),rb(fj.prototype,\"unsubscribe\",[xB],Object.getOwnPropertyDescriptor(fj.prototype,\"unsubscribe\"),fj.prototype),rb(fj.prototype,\"massUnsubscribe\",[VB],Object.getOwnPropertyDescriptor(fj.prototype,\"massUnsubscribe\"),fj.prototype),rb(fj.prototype,\"setLowStreamParameter\",[FB],Object.getOwnPropertyDescriptor(fj.prototype,\"setLowStreamParameter\"),fj.prototype),rb(fj.prototype,\"enableDualStream\",[BB],Object.getOwnPropertyDescriptor(fj.prototype,\"enableDualStream\"),fj.prototype),rb(fj.prototype,\"disableDualStream\",[jB],Object.getOwnPropertyDescriptor(fj.prototype,\"disableDualStream\"),fj.prototype),rb(fj.prototype,\"setClientRole\",[GB],Object.getOwnPropertyDescriptor(fj.prototype,\"setClientRole\"),fj.prototype),rb(fj.prototype,\"setProxyServer\",[WB],Object.getOwnPropertyDescriptor(fj.prototype,\"setProxyServer\"),fj.prototype),rb(fj.prototype,\"setTurnServer\",[HB],Object.getOwnPropertyDescriptor(fj.prototype,\"setTurnServer\"),fj.prototype),rb(fj.prototype,\"setLicense\",[KB],Object.getOwnPropertyDescriptor(fj.prototype,\"setLicense\"),fj.prototype),rb(fj.prototype,\"startProxyServer\",[YB],Object.getOwnPropertyDescriptor(fj.prototype,\"startProxyServer\"),fj.prototype),rb(fj.prototype,\"stopProxyServer\",[qB],Object.getOwnPropertyDescriptor(fj.prototype,\"stopProxyServer\"),fj.prototype),rb(fj.prototype,\"setLocalAccessPointsV2\",[zB],Object.getOwnPropertyDescriptor(fj.prototype,\"setLocalAccessPointsV2\"),fj.prototype),rb(fj.prototype,\"setLocalAccessPoints\",[JB],Object.getOwnPropertyDescriptor(fj.prototype,\"setLocalAccessPoints\"),fj.prototype),rb(fj.prototype,\"setRemoteDefaultVideoStreamType\",[XB],Object.getOwnPropertyDescriptor(fj.prototype,\"setRemoteDefaultVideoStreamType\"),fj.prototype),rb(fj.prototype,\"setRemoteVideoStreamType\",[QB],Object.getOwnPropertyDescriptor(fj.prototype,\"setRemoteVideoStreamType\"),fj.prototype),rb(fj.prototype,\"setStreamFallbackOption\",[ZB],Object.getOwnPropertyDescriptor(fj.prototype,\"setStreamFallbackOption\"),fj.prototype),rb(fj.prototype,\"setEncryptionConfig\",[$B],Object.getOwnPropertyDescriptor(fj.prototype,\"setEncryptionConfig\"),fj.prototype),rb(fj.prototype,\"renewToken\",[ej],Object.getOwnPropertyDescriptor(fj.prototype,\"renewToken\"),fj.prototype),rb(fj.prototype,\"enableAudioVolumeIndicator\",[tj],Object.getOwnPropertyDescriptor(fj.prototype,\"enableAudioVolumeIndicator\"),fj.prototype),rb(fj.prototype,\"startLiveStreaming\",[ij],Object.getOwnPropertyDescriptor(fj.prototype,\"startLiveStreaming\"),fj.prototype),rb(fj.prototype,\"setLiveTranscoding\",[nj],Object.getOwnPropertyDescriptor(fj.prototype,\"setLiveTranscoding\"),fj.prototype),rb(fj.prototype,\"stopLiveStreaming\",[rj],Object.getOwnPropertyDescriptor(fj.prototype,\"stopLiveStreaming\"),fj.prototype),rb(fj.prototype,\"startChannelMediaRelay\",[oj],Object.getOwnPropertyDescriptor(fj.prototype,\"startChannelMediaRelay\"),fj.prototype),rb(fj.prototype,\"updateChannelMediaRelay\",[sj],Object.getOwnPropertyDescriptor(fj.prototype,\"updateChannelMediaRelay\"),fj.prototype),rb(fj.prototype,\"stopChannelMediaRelay\",[aj],Object.getOwnPropertyDescriptor(fj.prototype,\"stopChannelMediaRelay\"),fj.prototype),rb(fj.prototype,\"sendCustomReportMessage\",[cj],Object.getOwnPropertyDescriptor(fj.prototype,\"sendCustomReportMessage\"),fj.prototype),rb(fj.prototype,\"pickSVCLayer\",[dj],Object.getOwnPropertyDescriptor(fj.prototype,\"pickSVCLayer\"),fj.prototype),rb(fj.prototype,\"setRTMConfig\",[lj],Object.getOwnPropertyDescriptor(fj.prototype,\"setRTMConfig\"),fj.prototype),rb(fj.prototype,\"enableContentInspect\",[uj],Object.getOwnPropertyDescriptor(fj.prototype,\"enableContentInspect\"),fj.prototype),rb(fj.prototype,\"disableContentInspect\",[hj],Object.getOwnPropertyDescriptor(fj.prototype,\"disableContentInspect\"),fj.prototype),rb(fj.prototype,\"setImageModeration\",[pj],Object.getOwnPropertyDescriptor(fj.prototype,\"setImageModeration\"),fj.prototype),rb(fj.prototype,\"setP2PTransport\",[_j],Object.getOwnPropertyDescriptor(fj.prototype,\"setP2PTransport\"),fj.prototype),rb(fj.prototype,\"getJoinChannelServiceRecords\",[Ej],Object.getOwnPropertyDescriptor(fj.prototype,\"getJoinChannelServiceRecords\"),fj.prototype),rb(fj.prototype,\"setPublishAudioFilterEnabled\",[mj],Object.getOwnPropertyDescriptor(fj.prototype,\"setPublishAudioFilterEnabled\"),fj.prototype),fj);class Rj{constructor(e,t){og(this,\"id\",0),og(this,\"element\",void 0),og(this,\"peerPair\",void 0),og(this,\"context\",void 0),og(this,\"audioPlayerElement\",void 0),og(this,\"audioTrack\",void 0),Rj.count+=1,this.id=Rj.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement(\"audio\");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const i=\"offer\"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(i),\"complete\"===e.iceGatheringState?e.localDescription:new Gh((t=>{e.onicegatheringstatechange=()=>{\"complete\"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const i=await e(this.peerPair[0],\"offer\");await t(this.peerPair[1],i);const n=await e(this.peerPair[1],\"answer\");await t(this.peerPair[0],n)}catch(e){throw new Sb(nv.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination();this.context.createMediaElementSource(e).connect(t)}catch(e){throw new Sb(nv.LOCAL_AEC_ERROR,e.toString()).print()}if(!t){throw new Sb(nv.LOCAL_AEC_ERROR,\"no dest node when local aec\").print()}const i=t.stream.getAudioTracks()[0];return this.audioTrack=i,i}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){Qy.debug(\"close echo cancellation unit, id is\",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}var Cj,Ij;og(Rj,\"count\",0);const vj=window.AudioContext||window.webkitAudioContext;const yj=new(Cj=oA({report:sA}),rb((Ij=class{constructor(){og(this,\"units\",[]),og(this,\"context\",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return Qy.debug(\"the system does not need to process local aec\"),-1;this.context||(this.context=new vj);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new Rj(e,this.context),this.units.push(t)),t.startEchoCancellation(),Qy.debug(\"start processing local audio echo cancellation, id is\",t.id),t.id}_doesEnvironmentNeedAEC(){return AI().name!==CI.SAFARI}}).prototype,\"processExternalMediaAEC\",[Cj],Object.getOwnPropertyDescriptor(Ij.prototype,\"processExternalMediaAEC\"),Ij.prototype),Ij);function Aj(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function bj(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Aj(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Aj(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const wj=window||document;function Oj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!wj)return;const i=$K._cspEventHandlerPointer;if(i&&t)return void console.error(i,t);const n=e=>{if(!(e&&e.blockedURI&&($K.onSecurityPolicyViolation||$K.getListeners(iw.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;Dy(\"CSP_DETECTED_HOSTNAME_LIST\").some((e=>Dn(t).call(t,e)))&&($K.onSecurityPolicyViolation&&\"function\"==typeof $K.onSecurityPolicyViolation&&$K.onSecurityPolicyViolation(e),$K.getListeners(iw.SECURITY_POLICY_VIOLATION).length>0&&$K.safeEmit(iw.SECURITY_POLICY_VIOLATION,e))};i&&wj.removeEventListener(\"securitypolicyviolation\",i),(t||e&&\"function\"==typeof e||$K.getListeners(iw.SECURITY_POLICY_VIOLATION).length>0)&&wj.addEventListener(\"securitypolicyviolation\",n),$K._cspEventHandlerPointer=n}var Nj=l,Dj=BR,Pj=RegExp.prototype,Lj=function(e){return e===Pj||Nj(Pj,e)?Dj(e):e.flags},kj=i(Lj);function Mj(e){let t=e.length;for(;--t>=0;)e[t]=0}const Uj=256,xj=286,Vj=30,Fj=15,Bj=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),jj=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Gj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Wj=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hj=new Array(576);Mj(Hj);const Kj=new Array(60);Mj(Kj);const Yj=new Array(512);Mj(Yj);const qj=new Array(256);Mj(qj);const zj=new Array(29);Mj(zj);const Jj=new Array(Vj);function Xj(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let Qj,Zj,$j;function eG(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Mj(Jj);const tG=e=>e<256?Yj[e]:Yj[256+(e>>>7)],iG=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},nG=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,iG(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},rG=(e,t,i)=>{nG(e,i[2*t],i[2*t+1])},oG=(e,t)=>{let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},sG=(e,t,i)=>{const n=new Array(16);let r,o,s=0;for(r=1;r<=Fj;r++)s=s+i[r-1]<<1,n[r]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=oG(n[t]++,t))}},aG=e=>{let t;for(t=0;t<xj;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Vj;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},cG=e=>{e.bi_valid>8?iG(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},dG=(e,t,i,n)=>{const r=2*t,o=2*i;return e[r]<e[o]||e[r]===e[o]&&n[t]<=n[i]},lG=(e,t,i)=>{const n=e.heap[i];let r=i<<1;for(;r<=e.heap_len&&(r<e.heap_len&&dG(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!dG(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n},uG=(e,t,i)=>{let n,r,o,s,a=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+a++],n+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===n?rG(e,r,t):(o=qj[r],rG(e,o+Uj+1,t),s=Bj[o],0!==s&&(r-=zj[o],nG(e,r,s)),n--,o=tG(n),rG(e,o,i),s=jj[o],0!==s&&(n-=Jj[o],nG(e,n,s)))}while(a<e.sym_next);rG(e,256,t)},hG=(e,t)=>{const i=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,d=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==i[2*s]?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):i[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,i[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=n[2*c+1]);for(t.max_code=d,s=e.heap_len>>1;s>=1;s--)lG(e,i,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],lG(e,i,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,i[2*c]=i[2*s]+i[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,i[2*s+1]=i[2*a+1]=c,e.heap[1]=c++,lG(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const i=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,l,u,h,p,_,E=0;for(h=0;h<=Fj;h++)e.bl_count[h]=0;for(i[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)l=e.heap[d],h=i[2*i[2*l+1]+1]+1,h>c&&(h=c,E++),i[2*l+1]=h,l>n||(e.bl_count[h]++,p=0,l>=a&&(p=s[l-a]),_=i[2*l],e.opt_len+=_*(h+p),o&&(e.static_len+=_*(r[2*l+1]+p)));if(0!==E){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,E-=2}while(E>0);for(h=c;0!==h;h--)for(l=e.bl_count[h];0!==l;)u=e.heap[--d],u>n||(i[2*u+1]!==h&&(e.opt_len+=(h-i[2*u+1])*i[2*u],i[2*u+1]=h),l--)}})(e,t),sG(i,d,e.bl_count)},pG=(e,t,i)=>{let n,r,o=-1,s=t[1],a=0,c=7,d=4;for(0===s&&(c=138,d=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=t[2*(n+1)+1],++a<c&&r===s||(a<d?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=r,0===s?(c=138,d=3):r===s?(c=6,d=3):(c=7,d=4))},_G=(e,t,i)=>{let n,r,o=-1,s=t[1],a=0,c=7,d=4;for(0===s&&(c=138,d=3),n=0;n<=i;n++)if(r=s,s=t[2*(n+1)+1],!(++a<c&&r===s)){if(a<d)do{rG(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(rG(e,r,e.bl_tree),a--),rG(e,16,e.bl_tree),nG(e,a-3,2)):a<=10?(rG(e,17,e.bl_tree),nG(e,a-3,3)):(rG(e,18,e.bl_tree),nG(e,a-11,7));a=0,o=r,0===s?(c=138,d=3):r===s?(c=6,d=3):(c=7,d=4)}};let EG=!1;const mG=(e,t,i,n)=>{nG(e,0+(n?1:0),3),cG(e),iG(e,i),iG(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i};var fG=e=>{EG||((()=>{let e,t,i,n,r;const o=new Array(16);for(i=0,n=0;n<28;n++)for(zj[n]=i,e=0;e<1<<Bj[n];e++)qj[i++]=n;for(qj[i-1]=n,r=0,n=0;n<16;n++)for(Jj[n]=r,e=0;e<1<<jj[n];e++)Yj[r++]=n;for(r>>=7;n<Vj;n++)for(Jj[n]=r<<7,e=0;e<1<<jj[n]-7;e++)Yj[256+r++]=n;for(t=0;t<=Fj;t++)o[t]=0;for(e=0;e<=143;)Hj[2*e+1]=8,e++,o[8]++;for(;e<=255;)Hj[2*e+1]=9,e++,o[9]++;for(;e<=279;)Hj[2*e+1]=7,e++,o[7]++;for(;e<=287;)Hj[2*e+1]=8,e++,o[8]++;for(sG(Hj,287,o),e=0;e<Vj;e++)Kj[2*e+1]=5,Kj[2*e]=oG(e,5);Qj=new Xj(Hj,Bj,257,xj,Fj),Zj=new Xj(Kj,jj,0,Vj,Fj),$j=new Xj(new Array(0),Gj,0,19,7)})(),EG=!0),e.l_desc=new eG(e.dyn_ltree,Qj),e.d_desc=new eG(e.dyn_dtree,Zj),e.bl_desc=new eG(e.bl_tree,$j),e.bi_buf=0,e.bi_valid=0,aG(e)},TG=(e,t,i,n)=>{let r,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Uj;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),hG(e,e.l_desc),hG(e,e.d_desc),s=(e=>{let t;for(pG(e,e.dyn_ltree,e.l_desc.max_code),pG(e,e.dyn_dtree,e.d_desc.max_code),hG(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Wj[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==t?mG(e,t,i,n):4===e.strategy||o===r?(nG(e,2+(n?1:0),3),uG(e,Hj,Kj)):(nG(e,4+(n?1:0),3),((e,t,i,n)=>{let r;for(nG(e,t-257,5),nG(e,i-1,5),nG(e,n-4,4),r=0;r<n;r++)nG(e,e.bl_tree[2*Wj[r]+1],3);_G(e,e.dyn_ltree,t-1),_G(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),uG(e,e.dyn_ltree,e.dyn_dtree)),aG(e),n&&cG(e)},SG=(e,t,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(qj[i]+Uj+1)]++,e.dyn_dtree[2*tG(t)]++),e.sym_next===e.sym_end),gG=e=>{nG(e,2,3),rG(e,256,Hj),(e=>{16===e.bi_valid?(iG(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},RG={_tr_init:fG,_tr_stored_block:mG,_tr_flush_block:TG,_tr_tally:SG,_tr_align:gG};var CG=(e,t,i,n)=>{let r=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do{r=r+t[n++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0};const IG=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var vG=(e,t,i,n)=>{const r=IG,o=n+i;e^=-1;for(let i=n;i<o;i++)e=e>>>8^r[255&(e^t[i])];return-1^e},yG={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"},AG={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:bG,_tr_stored_block:wG,_tr_flush_block:OG,_tr_tally:NG,_tr_align:DG}=RG,{Z_NO_FLUSH:PG,Z_PARTIAL_FLUSH:LG,Z_FULL_FLUSH:kG,Z_FINISH:MG,Z_BLOCK:UG,Z_OK:xG,Z_STREAM_END:VG,Z_STREAM_ERROR:FG,Z_DATA_ERROR:BG,Z_BUF_ERROR:jG,Z_DEFAULT_COMPRESSION:GG,Z_FILTERED:WG,Z_HUFFMAN_ONLY:HG,Z_RLE:KG,Z_FIXED:YG,Z_DEFAULT_STRATEGY:qG,Z_UNKNOWN:zG,Z_DEFLATED:JG}=AG,XG=286,QG=30,ZG=19,$G=2*XG+1,eW=15,tW=258,iW=262,nW=42,rW=113,oW=666,sW=(e,t)=>(e.msg=yG[t],t),aW=e=>2*e-(e>4?9:0),cW=e=>{let t=e.length;for(;--t>=0;)e[t]=0},dW=e=>{let t,i,n,r=e.w_size;t=e.hash_size,n=t;do{i=e.head[--n],e.head[n]=i>=r?i-r:0}while(--t);t=r,n=t;do{i=e.prev[--n],e.prev[n]=i>=r?i-r:0}while(--t)};let lW=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask;const uW=e=>{const t=e.state;let i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},hW=(e,t)=>{OG(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,uW(e.strm)},pW=(e,t)=>{e.pending_buf[e.pending++]=t},_W=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},EW=(e,t,i,n)=>{let r=e.avail_in;return r>n&&(r=n),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),i),1===e.state.wrap?e.adler=CG(e.adler,t,r,i):2===e.state.wrap&&(e.adler=vG(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)},mW=(e,t)=>{let i,n,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-iW?e.strstart-(e.w_size-iW):0,d=e.window,l=e.w_mask,u=e.prev,h=e.strstart+tW;let p=d[o+s-1],_=d[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(i=t,d[i+s]===_&&d[i+s-1]===p&&d[i]===d[o]&&d[++i]===d[o+1]){o+=2,i++;do{}while(d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&d[++o]===d[++i]&&o<h);if(n=tW-(h-o),o=h-tW,n>s){if(e.match_start=t,s=n,n>=a)break;p=d[o+s-1],_=d[o+s]}}}while((t=u[t&l])>c&&0!=--r);return s<=e.lookahead?s:e.lookahead},fW=e=>{const t=e.w_size;let i,n,r;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-iW)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),dW(e),n+=t),0===e.strm.avail_in)break;if(i=EW(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=lW(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=lW(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<iW&&0!==e.strm.avail_in)},TW=(e,t)=>{let i,n,r,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(i=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,n=e.strstart-e.block_start,i>n+e.strm.avail_in&&(i=n+e.strm.avail_in),i>r&&(i=r),i<o&&(0===i&&t!==MG||t===PG||i!==n+e.strm.avail_in))break;s=t===MG&&i===n+e.strm.avail_in?1:0,wG(e,0,0,s),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,uW(e.strm),n&&(n>i&&(n=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,i-=n),i&&(EW(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==PG&&t!==MG&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(EW(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,o=r>e.w_size?e.w_size:r,n=e.strstart-e.block_start,(n>=o||(n||t===MG)&&t!==PG&&0===e.strm.avail_in&&n<=r)&&(i=n>r?r:n,s=t===MG&&0===e.strm.avail_in&&i===n?1:0,wG(e,e.block_start,i,s),e.block_start+=i,uW(e.strm)),s?3:1)},SW=(e,t)=>{let i,n;for(;;){if(e.lookahead<iW){if(fW(e),e.lookahead<iW&&t===PG)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=lW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-iW&&(e.match_length=mW(e,i)),e.match_length>=3)if(n=NG(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=lW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=lW(e,e.ins_h,e.window[e.strstart+1]);else n=NG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(hW(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===MG?(hW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hW(e,!1),0===e.strm.avail_out)?1:2},gW=(e,t)=>{let i,n,r;for(;;){if(e.lookahead<iW){if(fW(e),e.lookahead<iW&&t===PG)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=lW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-iW&&(e.match_length=mW(e,i),e.match_length<=5&&(e.strategy===WG||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=NG(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=lW(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(hW(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=NG(e,0,e.window[e.strstart-1]),n&&hW(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=NG(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===MG?(hW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hW(e,!1),0===e.strm.avail_out)?1:2};function RW(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}const CW=[new RW(0,0,0,0,TW),new RW(4,4,8,4,SW),new RW(4,5,16,8,SW),new RW(4,6,32,32,SW),new RW(4,4,16,16,gW),new RW(8,16,32,32,gW),new RW(8,16,128,128,gW),new RW(8,32,128,256,gW),new RW(32,128,258,1024,gW),new RW(32,258,258,4096,gW)];function IW(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=JG,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*$G),this.dyn_dtree=new Uint16Array(2*(2*QG+1)),this.bl_tree=new Uint16Array(2*(2*ZG+1)),cW(this.dyn_ltree),cW(this.dyn_dtree),cW(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(eW+1),this.heap=new Uint16Array(2*XG+1),cW(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*XG+1),cW(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const vW=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==nW&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==rW&&t.status!==oW?1:0},yW=e=>{if(vW(e))return sW(e,FG);e.total_in=e.total_out=0,e.data_type=zG;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?nW:rW,e.adler=2===t.wrap?0:1,t.last_flush=-2,bG(t),xG},AW=e=>{const t=yW(e);return t===xG&&(e=>{e.window_size=2*e.w_size,cW(e.head),e.max_lazy_match=CW[e.level].max_lazy,e.good_match=CW[e.level].good_length,e.nice_match=CW[e.level].nice_length,e.max_chain_length=CW[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},bW=(e,t,i,n,r,o)=>{if(!e)return FG;let s=1;if(t===GG&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||i!==JG||n<8||n>15||t<0||t>9||o<0||o>YG||8===n&&1!==s)return sW(e,FG);8===n&&(n=9);const a=new IW;return e.state=a,a.strm=e,a.status=nW,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=i,AW(e)};var wW=(e,t)=>{if(vW(e)||t>UG||t<0)return e?sW(e,FG):FG;const i=e.state;if(!e.output||0!==e.avail_in&&!e.input||i.status===oW&&t!==MG)return sW(e,0===e.avail_out?jG:FG);const n=i.last_flush;if(i.last_flush=t,0!==i.pending){if(uW(e),0===e.avail_out)return i.last_flush=-1,xG}else if(0===e.avail_in&&aW(t)<=aW(n)&&t!==MG)return sW(e,jG);if(i.status===oW&&0!==e.avail_in)return sW(e,jG);if(i.status===nW&&0===i.wrap&&(i.status=rW),i.status===nW){let t=JG+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=HG||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,_W(i,t),0!==i.strstart&&(_W(i,e.adler>>>16),_W(i,65535&e.adler)),e.adler=1,i.status=rW,uW(e),0!==i.pending)return i.last_flush=-1,xG}if(57===i.status)if(e.adler=0,pW(i,31),pW(i,139),pW(i,8),i.gzhead)pW(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),pW(i,255&i.gzhead.time),pW(i,i.gzhead.time>>8&255),pW(i,i.gzhead.time>>16&255),pW(i,i.gzhead.time>>24&255),pW(i,9===i.level?2:i.strategy>=HG||i.level<2?4:0),pW(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(pW(i,255&i.gzhead.extra.length),pW(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=vG(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(pW(i,0),pW(i,0),pW(i,0),pW(i,0),pW(i,0),pW(i,9===i.level?2:i.strategy>=HG||i.level<2?4:0),pW(i,3),i.status=rW,uW(e),0!==i.pending)return i.last_flush=-1,xG;if(69===i.status){if(i.gzhead.extra){let t=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let r=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>t&&(e.adler=vG(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex+=r,uW(e),0!==i.pending)return i.last_flush=-1,xG;t=0,n-=r}let r=new Uint8Array(i.gzhead.extra);i.pending_buf.set(r.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>t&&(e.adler=vG(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=vG(e.adler,i.pending_buf,i.pending-n,n)),uW(e),0!==i.pending)return i.last_flush=-1,xG;n=0}t=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,pW(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=vG(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=vG(e.adler,i.pending_buf,i.pending-n,n)),uW(e),0!==i.pending)return i.last_flush=-1,xG;n=0}t=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,pW(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=vG(e.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(uW(e),0!==i.pending))return i.last_flush=-1,xG;pW(i,255&e.adler),pW(i,e.adler>>8&255),e.adler=0}if(i.status=rW,uW(e),0!==i.pending)return i.last_flush=-1,xG}if(0!==e.avail_in||0!==i.lookahead||t!==PG&&i.status!==oW){let n=0===i.level?TW(i,t):i.strategy===HG?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(fW(e),0===e.lookahead)){if(t===PG)return 1;break}if(e.match_length=0,i=NG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(hW(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===MG?(hW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hW(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===KG?((e,t)=>{let i,n,r,o;const s=e.window;for(;;){if(e.lookahead<=tW){if(fW(e),e.lookahead<=tW&&t===PG)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){o=e.strstart+tW;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<o);e.match_length=tW-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=NG(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=NG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(hW(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===MG?(hW(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hW(e,!1),0===e.strm.avail_out)?1:2})(i,t):CW[i.level].func(i,t);if(3!==n&&4!==n||(i.status=oW),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),xG;if(2===n&&(t===LG?DG(i):t!==UG&&(wG(i,0,0,!1),t===kG&&(cW(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),uW(e),0===e.avail_out))return i.last_flush=-1,xG}return t!==MG?xG:i.wrap<=0?VG:(2===i.wrap?(pW(i,255&e.adler),pW(i,e.adler>>8&255),pW(i,e.adler>>16&255),pW(i,e.adler>>24&255),pW(i,255&e.total_in),pW(i,e.total_in>>8&255),pW(i,e.total_in>>16&255),pW(i,e.total_in>>24&255)):(_W(i,e.adler>>>16),_W(i,65535&e.adler)),uW(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?xG:VG)},OW=(e,t)=>{let i=t.length;if(vW(e))return FG;const n=e.state,r=n.wrap;if(2===r||1===r&&n.status!==nW||n.lookahead)return FG;if(1===r&&(e.adler=CG(e.adler,t,i,0)),n.wrap=0,i>=n.w_size){0===r&&(cW(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(i-n.w_size,i),0),t=e,i=n.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,fW(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=lW(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,fW(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=r,xG},NW={deflateInit:(e,t)=>bW(e,t,JG,15,8,qG),deflateInit2:bW,deflateReset:AW,deflateResetKeep:yW,deflateSetHeader:(e,t)=>vW(e)||2!==e.state.wrap?FG:(e.state.gzhead=t,xG),deflate:wW,deflateEnd:e=>{if(vW(e))return FG;const t=e.state.status;return e.state=null,t===rW?sW(e,BG):xG},deflateSetDictionary:OW,deflateInfo:\"pako deflate (from Nodeca project)\"};const DW=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var PW={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if(\"object\"!=typeof i)throw new TypeError(i+\"must be non-object\");for(const t in i)DW(i,t)&&(e[t]=i[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,n=0,r=e.length;t<r;t++){let r=e[t];i.set(r,n),n+=r.length}return i}};let LW=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){LW=!1}const kW=new Uint8Array(256);for(let e=0;e<256;e++)kW[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;kW[254]=kW[254]=1;var MW={string2buf:e=>{if(\"function\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,r,o,s=e.length,a=0;for(r=0;r<s;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),a+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?t[o++]=i:i<2048?(t[o++]=192|i>>>6,t[o++]=128|63&i):i<65536?(t[o++]=224|i>>>12,t[o++]=128|i>>>6&63,t[o++]=128|63&i):(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63,t[o++]=128|i>>>6&63,t[o++]=128|63&i);return t},buf2string:(e,t)=>{const i=t||e.length;if(\"function\"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,r;const o=new Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){o[r++]=t;continue}let s=kW[t];if(s>4)o[r++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<i;)t=t<<6|63&e[n++],s--;s>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=55296|t>>10&1023,o[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&LW)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i=\"\";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i})(o,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+kW[e[i]]>t?i:t}};var UW=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0};const xW=Object.prototype.toString,{Z_NO_FLUSH:VW,Z_SYNC_FLUSH:FW,Z_FULL_FLUSH:BW,Z_FINISH:jW,Z_OK:GW,Z_STREAM_END:WW,Z_DEFAULT_COMPRESSION:HW,Z_DEFAULT_STRATEGY:KW,Z_DEFLATED:YW}=AG;function qW(e){this.options=PW.assign({level:HW,method:YW,chunkSize:16384,windowBits:15,memLevel:8,strategy:KW},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new UW,this.strm.avail_out=0;let i=NW.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==GW)throw new Error(yG[i]);if(t.header&&NW.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e=\"string\"==typeof t.dictionary?MW.string2buf(t.dictionary):\"[object ArrayBuffer]\"===xW.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=NW.deflateSetDictionary(this.strm,e),i!==GW)throw new Error(yG[i]);this._dict_set=!0}}function zW(e,t){const i=new qW(t);if(i.push(e,!0),i.err)throw i.msg||yG[i.err];return i.result}qW.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?jW:VW,\"string\"==typeof e?i.input=MW.string2buf(e):\"[object ArrayBuffer]\"===xW.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(o===FW||o===BW)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=NW.deflate(i,o),r===WW)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=NW.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===GW;if(0!==i.avail_out){if(o>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},qW.prototype.onData=function(e){this.chunks.push(e)},qW.prototype.onEnd=function(e){e===GW&&(this.result=PW.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var JW={Deflate:qW,deflate:zW,deflateRaw:function(e,t){return(t=t||{}).raw=!0,zW(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,zW(e,t)},constants:AG};const XW=16209;var QW=function(e,t){let i,n,r,o,s,a,c,d,l,u,h,p,_,E,m,f,T,S,g,R,C,I,v,y;const A=e.state;i=e.next_in,v=e.input,n=i+(e.avail_in-5),r=e.next_out,y=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),a=A.dmax,c=A.wsize,d=A.whave,l=A.wnext,u=A.window,h=A.hold,p=A.bits,_=A.lencode,E=A.distcode,m=(1<<A.lenbits)-1,f=(1<<A.distbits)-1;e:do{p<15&&(h+=v[i++]<<p,p+=8,h+=v[i++]<<p,p+=8),T=_[h&m];t:for(;;){if(S=T>>>24,h>>>=S,p-=S,S=T>>>16&255,0===S)y[r++]=65535&T;else{if(!(16&S)){if(0==(64&S)){T=_[(65535&T)+(h&(1<<S)-1)];continue t}if(32&S){A.mode=16191;break e}e.msg=\"invalid literal/length code\",A.mode=XW;break e}g=65535&T,S&=15,S&&(p<S&&(h+=v[i++]<<p,p+=8),g+=h&(1<<S)-1,h>>>=S,p-=S),p<15&&(h+=v[i++]<<p,p+=8,h+=v[i++]<<p,p+=8),T=E[h&f];i:for(;;){if(S=T>>>24,h>>>=S,p-=S,S=T>>>16&255,!(16&S)){if(0==(64&S)){T=E[(65535&T)+(h&(1<<S)-1)];continue i}e.msg=\"invalid distance code\",A.mode=XW;break e}if(R=65535&T,S&=15,p<S&&(h+=v[i++]<<p,p+=8,p<S&&(h+=v[i++]<<p,p+=8)),R+=h&(1<<S)-1,R>a){e.msg=\"invalid distance too far back\",A.mode=XW;break e}if(h>>>=S,p-=S,S=r-o,R>S){if(S=R-S,S>d&&A.sane){e.msg=\"invalid distance too far back\",A.mode=XW;break e}if(C=0,I=u,0===l){if(C+=c-S,S<g){g-=S;do{y[r++]=u[C++]}while(--S);C=r-R,I=y}}else if(l<S){if(C+=c+l-S,S-=l,S<g){g-=S;do{y[r++]=u[C++]}while(--S);if(C=0,l<g){S=l,g-=S;do{y[r++]=u[C++]}while(--S);C=r-R,I=y}}}else if(C+=l-S,S<g){g-=S;do{y[r++]=u[C++]}while(--S);C=r-R,I=y}for(;g>2;)y[r++]=I[C++],y[r++]=I[C++],y[r++]=I[C++],g-=3;g&&(y[r++]=I[C++],g>1&&(y[r++]=I[C++]))}else{C=r-R;do{y[r++]=y[C++],y[r++]=y[C++],y[r++]=y[C++],g-=3}while(g>2);g&&(y[r++]=y[C++],g>1&&(y[r++]=y[C++]))}break}}break}}while(i<n&&r<s);g=p>>3,i-=g,p-=g<<3,h&=(1<<p)-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<s?s-r+257:257-(r-s),A.hold=h,A.bits=p};const ZW=15,$W=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var nH=(e,t,i,n,r,o,s,a)=>{const c=a.bits;let d,l,u,h,p,_,E=0,m=0,f=0,T=0,S=0,g=0,R=0,C=0,I=0,v=0,y=null;const A=new Uint16Array(16),b=new Uint16Array(16);let w,O,N,D=null;for(E=0;E<=ZW;E++)A[E]=0;for(m=0;m<n;m++)A[t[i+m]]++;for(S=c,T=ZW;T>=1&&0===A[T];T--);if(S>T&&(S=T),0===T)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(f=1;f<T&&0===A[f];f++);for(S<f&&(S=f),C=1,E=1;E<=ZW;E++)if(C<<=1,C-=A[E],C<0)return-1;if(C>0&&(0===e||1!==T))return-1;for(b[1]=0,E=1;E<ZW;E++)b[E+1]=b[E]+A[E];for(m=0;m<n;m++)0!==t[i+m]&&(s[b[t[i+m]]++]=m);if(0===e?(y=D=s,_=20):1===e?(y=$W,D=eH,_=257):(y=tH,D=iH,_=0),v=0,m=0,E=f,p=o,g=S,R=0,u=-1,I=1<<S,h=I-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){w=E-R,s[m]+1<_?(O=0,N=s[m]):s[m]>=_?(O=D[s[m]-_],N=y[s[m]-_]):(O=96,N=0),d=1<<E-R,l=1<<g,f=l;do{l-=d,r[p+(v>>R)+l]=w<<24|O<<16|N|0}while(0!==l);for(d=1<<E-1;v&d;)d>>=1;if(0!==d?(v&=d-1,v+=d):v=0,m++,0==--A[E]){if(E===T)break;E=t[i+s[m]]}if(E>S&&(v&h)!==u){for(0===R&&(R=S),p+=f,g=E-R,C=1<<g;g+R<T&&(C-=A[g+R],!(C<=0));)g++,C<<=1;if(I+=1<<g,1===e&&I>852||2===e&&I>592)return 1;u=v&h,r[u]=S<<24|g<<16|p-o|0}}return 0!==v&&(r[p+v]=E-R<<24|64<<16|0),a.bits=S,0};const{Z_FINISH:rH,Z_BLOCK:oH,Z_TREES:sH,Z_OK:aH,Z_STREAM_END:cH,Z_NEED_DICT:dH,Z_STREAM_ERROR:lH,Z_DATA_ERROR:uH,Z_MEM_ERROR:hH,Z_BUF_ERROR:pH,Z_DEFLATED:_H}=AG,EH=16180,mH=16190,fH=16191,TH=16192,SH=16194,gH=16199,RH=16200,CH=16206,IH=16209,vH=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function yH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const AH=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<EH||t.mode>16211?1:0},bH=e=>{if(AH(e))return lH;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=EH,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,aH},wH=e=>{if(AH(e))return lH;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,bH(e)},OH=(e,t)=>{let i;if(AH(e))return lH;const n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?lH:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,wH(e))},NH=(e,t)=>{if(!e)return lH;const i=new yH;e.state=i,i.strm=e,i.window=null,i.mode=EH;const n=OH(e,t);return n!==aH&&(e.state=null),n};let DH,PH,LH=!0;const kH=e=>{if(LH){DH=new Int32Array(512),PH=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(nH(1,e.lens,0,288,DH,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;nH(2,e.lens,0,32,PH,0,e.work,{bits:5}),LH=!1}e.lencode=DH,e.lenbits=9,e.distcode=PH,e.distbits=5},MH=(e,t,i,n)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(i-o.wsize,i),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),o.window.set(t.subarray(i-n,i-n+r),o.wnext),(n-=r)?(o.window.set(t.subarray(i-n,i),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var UH=(e,t)=>{let i,n,r,o,s,a,c,d,l,u,h,p,_,E,m,f,T,S,g,R,C,I,v=0;const y=new Uint8Array(4);let A,b;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(AH(e)||!e.output||!e.input&&0!==e.avail_in)return lH;i=e.state,i.mode===fH&&(i.mode=TH),s=e.next_out,r=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,d=i.hold,l=i.bits,u=a,h=c,I=aH;e:for(;;)switch(i.mode){case EH:if(0===i.wrap){i.mode=TH;break}for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(2&i.wrap&&35615===d){0===i.wbits&&(i.wbits=15),i.check=0,y[0]=255&d,y[1]=d>>>8&255,i.check=vG(i.check,y,2,0),d=0,l=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg=\"incorrect header check\",i.mode=IH;break}if((15&d)!==_H){e.msg=\"unknown compression method\",i.mode=IH;break}if(d>>>=4,l-=4,C=8+(15&d),0===i.wbits&&(i.wbits=C),C>15||C>i.wbits){e.msg=\"invalid window size\",i.mode=IH;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&d?16189:fH,d=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(i.flags=d,(255&kj(i))!==_H){e.msg=\"unknown compression method\",i.mode=IH;break}if(57344&kj(i)){e.msg=\"unknown header flags set\",i.mode=IH;break}i.head&&(i.head.text=d>>8&1),512&kj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,i.check=vG(i.check,y,2,0)),d=0,l=0,i.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.head&&(i.head.time=d),512&kj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,y[2]=d>>>16&255,y[3]=d>>>24&255,i.check=vG(i.check,y,4,0)),d=0,l=0,i.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&kj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,i.check=vG(i.check,y,2,0)),d=0,l=0,i.mode=16184;case 16184:if(1024&kj(i)){for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.length=d,i.head&&(i.head.extra_len=d),512&kj(i)&&4&i.wrap&&(y[0]=255&d,y[1]=d>>>8&255,i.check=vG(i.check,y,2,0)),d=0,l=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&kj(i)&&(p=i.length,p>a&&(p=a),p&&(i.head&&(C=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(o,o+p),C)),512&kj(i)&&4&i.wrap&&(i.check=vG(i.check,n,p,o)),a-=p,o+=p,i.length-=p),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&kj(i)){if(0===a)break e;p=0;do{C=n[o+p++],i.head&&C&&i.length<65536&&(i.head.name+=String.fromCharCode(C))}while(C&&p<a);if(512&kj(i)&&4&i.wrap&&(i.check=vG(i.check,n,p,o)),a-=p,o+=p,C)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&kj(i)){if(0===a)break e;p=0;do{C=n[o+p++],i.head&&C&&i.length<65536&&(i.head.comment+=String.fromCharCode(C))}while(C&&p<a);if(512&kj(i)&&4&i.wrap&&(i.check=vG(i.check,n,p,o)),a-=p,o+=p,C)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&kj(i)){for(;l<16;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(4&i.wrap&&d!==(65535&i.check)){e.msg=\"header crc mismatch\",i.mode=IH;break}d=0,l=0}i.head&&(i.head.hcrc=kj(i)>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=fH;break;case 16189:for(;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}e.adler=i.check=vH(d),d=0,l=0,i.mode=mH;case mH:if(0===i.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,i.hold=d,i.bits=l,dH;e.adler=i.check=1,i.mode=fH;case fH:if(t===oH||t===sH)break e;case TH:if(i.last){d>>>=7&l,l-=7&l,i.mode=CH;break}for(;l<3;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}switch(i.last=1&d,d>>>=1,l-=1,3&d){case 0:i.mode=16193;break;case 1:if(kH(i),i.mode=gH,t===sH){d>>>=2,l-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg=\"invalid block type\",i.mode=IH}d>>>=2,l-=2;break;case 16193:for(d>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if((65535&d)!=(d>>>16^65535)){e.msg=\"invalid stored block lengths\",i.mode=IH;break}if(i.length=65535&d,d=0,l=0,i.mode=SH,t===sH)break e;case SH:i.mode=16195;case 16195:if(p=i.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;r.set(n.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,i.length-=p;break}i.mode=fH;break;case 16196:for(;l<14;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(i.nlen=257+(31&d),d>>>=5,l-=5,i.ndist=1+(31&d),d>>>=5,l-=5,i.ncode=4+(15&d),d>>>=4,l-=4,i.nlen>286||i.ndist>30){e.msg=\"too many length or distance symbols\",i.mode=IH;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;l<3;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.lens[w[i.have++]]=7&d,d>>>=3,l-=3}for(;i.have<19;)i.lens[w[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,A={bits:i.lenbits},I=nH(0,i.lens,0,19,i.lencode,0,i.work,A),i.lenbits=A.bits,I){e.msg=\"invalid code lengths set\",i.mode=IH;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;v=i.lencode[d&(1<<i.lenbits)-1],m=v>>>24,f=v>>>16&255,T=65535&v,!(m<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(T<16)d>>>=m,l-=m,i.lens[i.have++]=T;else{if(16===T){for(b=m+2;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(d>>>=m,l-=m,0===i.have){e.msg=\"invalid bit length repeat\",i.mode=IH;break}C=i.lens[i.have-1],p=3+(3&d),d>>>=2,l-=2}else if(17===T){for(b=m+3;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=m,l-=m,C=0,p=3+(7&d),d>>>=3,l-=3}else{for(b=m+7;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=m,l-=m,C=0,p=11+(127&d),d>>>=7,l-=7}if(i.have+p>i.nlen+i.ndist){e.msg=\"invalid bit length repeat\",i.mode=IH;break}for(;p--;)i.lens[i.have++]=C}}if(i.mode===IH)break;if(0===i.lens[256]){e.msg=\"invalid code -- missing end-of-block\",i.mode=IH;break}if(i.lenbits=9,A={bits:i.lenbits},I=nH(1,i.lens,0,i.nlen,i.lencode,0,i.work,A),i.lenbits=A.bits,I){e.msg=\"invalid literal/lengths set\",i.mode=IH;break}if(i.distbits=6,i.distcode=i.distdyn,A={bits:i.distbits},I=nH(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,A),i.distbits=A.bits,I){e.msg=\"invalid distances set\",i.mode=IH;break}if(i.mode=gH,t===sH)break e;case gH:i.mode=RH;case RH:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,i.hold=d,i.bits=l,QW(e,h),s=e.next_out,r=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,d=i.hold,l=i.bits,i.mode===fH&&(i.back=-1);break}for(i.back=0;v=i.lencode[d&(1<<i.lenbits)-1],m=v>>>24,f=v>>>16&255,T=65535&v,!(m<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(f&&0==(240&f)){for(S=m,g=f,R=T;v=i.lencode[R+((d&(1<<S+g)-1)>>S)],m=v>>>24,f=v>>>16&255,T=65535&v,!(S+m<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=S,l-=S,i.back+=S}if(d>>>=m,l-=m,i.back+=m,i.length=T,0===f){i.mode=16205;break}if(32&f){i.back=-1,i.mode=fH;break}if(64&f){e.msg=\"invalid literal/length code\",i.mode=IH;break}i.extra=15&f,i.mode=16201;case 16201:if(i.extra){for(b=i.extra;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,l-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;v=i.distcode[d&(1<<i.distbits)-1],m=v>>>24,f=v>>>16&255,T=65535&v,!(m<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(0==(240&f)){for(S=m,g=f,R=T;v=i.distcode[R+((d&(1<<S+g)-1)>>S)],m=v>>>24,f=v>>>16&255,T=65535&v,!(S+m<=l);){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}d>>>=S,l-=S,i.back+=S}if(d>>>=m,l-=m,i.back+=m,64&f){e.msg=\"invalid distance code\",i.mode=IH;break}i.offset=T,i.extra=15&f,i.mode=16203;case 16203:if(i.extra){for(b=i.extra;l<b;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,l-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg=\"invalid distance too far back\",i.mode=IH;break}i.mode=16204;case 16204:if(0===c)break e;if(p=h-c,i.offset>p){if(p=i.offset-p,p>i.whave&&i.sane){e.msg=\"invalid distance too far back\",i.mode=IH;break}p>i.wnext?(p-=i.wnext,_=i.wsize-p):_=i.wnext-p,p>i.length&&(p=i.length),E=i.window}else E=r,_=s-i.offset,p=i.length;p>c&&(p=c),c-=p,i.length-=p;do{r[s++]=E[_++]}while(--p);0===i.length&&(i.mode=RH);break;case 16205:if(0===c)break e;r[s++]=i.length,c--,i.mode=RH;break;case CH:if(i.wrap){for(;l<32;){if(0===a)break e;a--,d|=n[o++]<<l,l+=8}if(h-=c,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=kj(i)?vG(i.check,r,h,s-h):CG(i.check,r,h,s-h)),h=c,4&i.wrap&&(kj(i)?d:vH(d))!==i.check){e.msg=\"incorrect data check\",i.mode=IH;break}d=0,l=0}i.mode=16207;case 16207:if(i.wrap&&kj(i)){for(;l<32;){if(0===a)break e;a--,d+=n[o++]<<l,l+=8}if(4&i.wrap&&d!==(4294967295&i.total)){e.msg=\"incorrect length check\",i.mode=IH;break}d=0,l=0}i.mode=16208;case 16208:I=cH;break e;case IH:I=uH;break e;case 16210:return hH;default:return lH}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,i.hold=d,i.bits=l,(i.wsize||h!==e.avail_out&&i.mode<IH&&(i.mode<CH||t!==rH))&&MH(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=kj(i)?vG(i.check,r,h,e.next_out-h):CG(i.check,r,h,e.next_out-h)),e.data_type=i.bits+(i.last?64:0)+(i.mode===fH?128:0)+(i.mode===gH||i.mode===SH?256:0),(0===u&&0===h||t===rH)&&I===aH&&(I=pH),I},xH={inflateReset:wH,inflateReset2:OH,inflateResetKeep:bH,inflateInit:e=>NH(e,15),inflateInit2:NH,inflate:UH,inflateEnd:e=>{if(AH(e))return lH;let t=e.state;return t.window&&(t.window=null),e.state=null,aH},inflateGetHeader:(e,t)=>{if(AH(e))return lH;const i=e.state;return 0==(2&i.wrap)?lH:(i.head=t,t.done=!1,aH)},inflateSetDictionary:(e,t)=>{const i=t.length;let n,r,o;return AH(e)?lH:(n=e.state,0!==n.wrap&&n.mode!==mH?lH:n.mode===mH&&(r=1,r=CG(r,t,i,0),r!==n.check)?uH:(o=MH(e,t,i,i),o?(n.mode=16210,hH):(n.havedict=1,aH)))},inflateInfo:\"pako inflate (from Nodeca project)\"};var VH=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1};const FH=Object.prototype.toString,{Z_NO_FLUSH:BH,Z_FINISH:jH,Z_OK:GH,Z_STREAM_END:WH,Z_NEED_DICT:HH,Z_STREAM_ERROR:KH,Z_DATA_ERROR:YH,Z_MEM_ERROR:qH}=AG;function zH(e){this.options=PW.assign({chunkSize:65536,windowBits:15,to:\"\"},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new UW,this.strm.avail_out=0;let i=xH.inflateInit2(this.strm,t.windowBits);if(i!==GH)throw new Error(yG[i]);if(this.header=new VH,xH.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=MW.string2buf(t.dictionary):\"[object ArrayBuffer]\"===FH.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=xH.inflateSetDictionary(this.strm,t.dictionary),i!==GH)))throw new Error(yG[i])}function JH(e,t){const i=new zH(t);if(i.push(e),i.err)throw i.msg||yG[i.err];return i.result}zH.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?jH:BH,\"[object ArrayBuffer]\"===FH.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),o=xH.inflate(i,s),o===HH&&r&&(o=xH.inflateSetDictionary(i,r),o===GH?o=xH.inflate(i,s):o===YH&&(o=HH));i.avail_in>0&&o===WH&&i.state.wrap>0&&0!==e[i.next_in];)xH.inflateReset(i),o=xH.inflate(i,s);switch(o){case KH:case YH:case HH:case qH:return this.onEnd(o),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||o===WH))if(\"string\"===this.options.to){let e=MW.utf8border(i.output,i.next_out),t=i.next_out-e,r=MW.buf2string(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(o!==GH||0!==a){if(o===WH)return o=xH.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},zH.prototype.onData=function(e){this.chunks.push(e)},zH.prototype.onEnd=function(e){e===GH&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=PW.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var XH={Inflate:zH,inflate:JH,inflateRaw:function(e,t){return(t=t||{}).raw=!0,JH(e,t)},ungzip:JH,constants:AG};const{Deflate:QH,deflate:ZH,deflateRaw:$H,gzip:eK}=JW,{Inflate:tK,inflate:iK,inflateRaw:nK,ungzip:rK}=XH;var oK=ZH,sK=iK,aK=function(e){return e[e.ONE_BYTE=0]=\"ONE_BYTE\",e[e.TWO_BYTE=1]=\"TWO_BYTE\",e}(aK||{});class cK{constructor(){og(this,\"_sequence\",0),og(this,\"_startTime\",Date.now()),og(this,\"isUseOneByte\",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const i=new Uint8Array(4);i.set([1,0,0,0]);const n={id:0,length:4,data:i.buffer},r={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[n]};t.commonPacketHeader.extension=1,t.extension=r,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;Dy(\"SHOW_DATASTREAM2_LOG\")&&Qy.debug(\"send data header: \".concat(JSON.stringify(t.commonPacketHeader)));const i=new ArrayBuffer(t.commonPacketHeader.length),n=new Uint8Array(i),r=new DataView(i);let o=0;if(r.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,r.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,r.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);n.set(new Uint8Array(e),o),o+=e.byteLength}if(n.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error(\"serialize error!\");return i}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let i=0;const n=t.getUint16(i,!0);i+=2;const r={length:16383&n,reserved:(16384&n)>>14,extension:(32768&n)>>15,sequence:t.getUint16(i+2,!0)<<16|t.getUint16(i,!0)};let o,s;if(i+=4,Dy(\"SHOW_DATASTREAM2_LOG\")&&Qy.debug(\"receive data header: \".concat(JSON.stringify(r))),t.getUint16(i,!0),i+=2,r.extension){s=this.deserializeExtension(e.slice(i)),i+=2+s.length,o=e.slice(i);let t=!1;if(s.datas.length>0){const e=s.datas.find((e=>0===e.id));if(e){t=1==(1&new DataView(e.data).getUint32(0,!0))}}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:i,datas:n}=e,r=new ArrayBuffer(i+2),o=new Uint8Array(r),s=new DataView(r);let a=0;if(s.setUint8(a++,t),s.setUint8(a++,i),n.forEach((e=>{t?(s.setUint8(a++,e.id),s.setUint8(a++,e.length),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(s.setUint8(a++,e.id|e.length<<4),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==i+2)throw Error(\"serialize extension error, is \".concat(a,\"!==\").concat(i+2));return r}deserializeExtension(e){const t=new DataView(e);let i=0;const n=t.getUint8(i);i++;const r=t.getUint8(i);i++;const o=n===aK.TWO_BYTE,s=[],a=new DataView(e,2);let c=0;for(;c<r;){let e=0,t=0,i=new ArrayBuffer(0);o?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(i=a.buffer.slice(c+2,c+2+t),c+=i.byteLength),s.push({id:e,length:t,data:i})}if(c!==r)throw Error(\"parse error\");return{profile:n,length:r,datas:s}}decompress(e){return sK(new Uint8Array(e))}compress(e){return oK(new Uint8Array(e))}}const dK={name:\"DataStream\",create:(e,t)=>{const i=t?new lM(e):new uM(e);return i.useDataStream(new cK),i}};class lK extends Sv{constructor(e,t,i){super(),og(this,\"ws\",void 0),og(this,\"requestId\",1),og(this,\"heartBeatTimer\",void 0),og(this,\"joinInfo\",void 0),og(this,\"clientId\",void 0),og(this,\"onOpen\",(()=>{this.emit(\"open\"),this.startHeartBeatCheck()})),og(this,\"onClose\",(e=>{this.emit(\"close\"),this.dispose()})),og(this,\"onMessage\",(e=>{const t=JSON.parse(e.data);if(!t||\"serverResponse\"!==t.command||!t.requestId)return t&&\"serverStatus\"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit(\"status\",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit(\"req_\".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new bw(\"cross-channel-\".concat(this.clientId),i),this.ws.on(Tb.RECONNECTING,(()=>{this.ws.reconnectMode=\"retry\",this.emit(\"reconnecting\")})),this.ws.on(Tb.CONNECTED,this.onOpen),this.ws.on(Tb.ON_MESSAGE,this.onMessage),this.ws.on(Tb.CLOSED,this.onClose)}isConnect(){return\"connected\"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new Gh(((t,i)=>{const n=window.setTimeout((()=>{i(new Sb(nv.TIMEOUT,\"wait status timeout, status: \".concat(e)))}),5e3);this.once(e,(r=>{window.clearTimeout(n),r.state&&0!==r.state?i(new Sb(nv.CROSS_CHANNEL_WAIT_STATUS_ERROR,\"wait status error, status: \".concat(e))):t(void 0)})),this.once(\"dispose\",(()=>{window.clearTimeout(n),i(new Sb(nv.WS_ABORT))}))}))}async request(e){if(\"closed\"===this.ws.state)throw new Sb(nv.WS_DISCONNECT);const t=()=>new Gh(((e,t)=>{this.ws.once(Tb.CLOSED,(()=>t(new Sb(nv.WS_ABORT)))),this.ws.once(Tb.CONNECTED,e)}));\"connected\"!==this.ws.state&&await t();const i=this.sendMessage(e),n=new Gh(((e,t)=>{const n=()=>{t(new Sb(nv.WS_ABORT))};this.ws.once(Tb.RECONNECTING,n),this.ws.once(Tb.CLOSED,n),this.once(\"req_\".concat(i),e),$v(3e3).then((()=>{this.removeAllListeners(\"req_\".concat(i)),this.ws.off(Tb.RECONNECTING,n),this.ws.off(Tb.CLOSED,n),t(new Sb(nv.TIMEOUT,\"cross channel ws request timeout\"))}))})),r=await n;if(!r||200!==r.code)throw new Sb(nv.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,\"response: \".concat(JSON.stringify(r)));return r}async connect(e){this.ws.removeAllListeners(Tb.REQUEST_NEW_URLS),this.ws.on(Tb.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit(\"dispose\"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:\"ping\",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class uK extends Sv{set state(e){e!==this._state&&(e!==Lb.RELAY_STATE_FAILURE&&(this.errorCode=kb.RELAY_OK),this.emit(\"state\",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,i,n,r){super(),og(this,\"joinInfo\",void 0),og(this,\"sid\",void 0),og(this,\"clientId\",void 0),og(this,\"cancelToken\",EI.CancelToken.source()),og(this,\"workerToken\",void 0),og(this,\"requestId\",0),og(this,\"signal\",void 0),og(this,\"prevChannelMediaConfig\",void 0),og(this,\"httpRetryConfig\",void 0),og(this,\"_resolution\",void 0),og(this,\"_state\",Lb.RELAY_STATE_IDLE),og(this,\"errorCode\",kb.RELAY_OK),og(this,\"onStatus\",(e=>{Qy.debug(\"[\".concat(this.clientId,\"] ChannelMediaStatus: \").concat(JSON.stringify(e))),e&&e.command&&(\"onAudioPacketReceived\"===e.command&&this.emit(\"event\",Pb.PACKET_RECEIVED_AUDIO_FROM_SRC),\"onVideoPacketReceived\"===e.command&&this.emit(\"event\",Pb.PACKET_RECEIVED_VIDEO_FROM_SRC),\"onSrcTokenPrivilegeDidExpire\"===e.command&&(this.errorCode=kb.SRC_TOKEN_EXPIRED,this.state=Lb.RELAY_STATE_FAILURE),\"onDestTokenPrivilegeDidExpire\"===e.command&&(this.errorCode=kb.DEST_TOKEN_EXPIRED,this.state=Lb.RELAY_STATE_FAILURE))})),og(this,\"onReconnect\",(async()=>{Qy.debug(\"[\".concat(this.clientId,\"] ChannelMediaSocket disconnect, reconnecting\")),this.emit(\"event\",Pb.NETWORK_DISCONNECTED),this.state=Lb.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==Lb.RELAY_STATE_IDLE&&(Qy.error(\"auto restart channel media relay failed\",e.toString()),this.errorCode=kb.SERVER_CONNECTION_LOST,this.state=Lb.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=ty(),this.signal=new lK(this.joinInfo,this.clientId,i),this.httpRetryConfig=n,this._resolution=r}async startChannelMediaRelay(e){if(this.state!==Lb.RELAY_STATE_IDLE)throw new Sb(nv.INVALID_OPERATION);this.state=Lb.RELAY_STATE_CONNECTING,await this.connect(),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: connect success\"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&\"SetSourceChannel\"===e.data.serverResponse.command)throw new Sb(nv.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&\"SetDestChannelStatus\"===e.serverResponse.command)throw new Sb(nv.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&\"StartPacketTransfer\"===e.serverResponse.command)throw new Sb(nv.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==Lb.RELAY_STATE_RUNNING)throw new Sb(nv.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==Lb.RELAY_STATE_RUNNING)throw new Sb(nv.INVALID_OPERATION);const t=this.genMessage(Db.SetVideoProfile);await this.signal.request(t),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: setVideoProfile success\"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Qy.debug(\"[\".concat(this.clientId,\"] stopChannelMediaRelay: send stop message success\")),this.state=Lb.RELAY_STATE_IDLE,this.dispose()}dispose(){Qy.debug(\"[\".concat(this.clientId,\"] disposeChannelMediaRelay\")),this.cancelToken.cancel(),this.cancelToken=EI.CancelToken.source(),this.state=Lb.RELAY_STATE_IDLE,this.emit(\"dispose\"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await kU(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit(\"event\",Pb.NETWORK_CONNECTED),this.signal.on(\"status\",this.onStatus),this.signal.on(\"reconnecting\",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(Db.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus(\"Normal Quit\"),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: StopPacketTransfer success\"));const i=this.genMessage(Db.SetSdkProfile,e);await this.signal.request(i),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetSdkProfile success\"));const n=this.genMessage(Db.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus(\"SetSourceChannelStatus\"),this.emit(\"event\",Pb.PACKET_JOINED_SRC_CHANNEL),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetSourceChannel success\"));const r=this.genMessage(Db.SetSourceUserId,e);await this.signal.request(r),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetSourceUserId success\"));const o=this.genMessage(Db.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus(\"SetDestChannelStatus\"),this.emit(\"event\",Pb.PACKET_JOINED_DEST_CHANNEL),Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: SetDestChannel success\"));const s=this.genMessage(Db.StartPacketTransfer,e);await this.signal.request(s),this.emit(\"event\",Pb.PACKET_SENT_TO_DEST_CHANNEL),this.state=Lb.RELAY_STATE_RUNNING,Qy.debug(\"[\".concat(this.clientId,\"] startChannelMediaRelay: StartPacketTransfer success\")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(Db.UpdateDestChannel,e);await this.signal.request(t),this.emit(\"event\",Pb.PACKET_UPDATE_DEST_CHANNEL),Qy.debug(\"[\".concat(this.clientId,\"] sendUpdateMessage: UpdateDestChannel success\"))}async sendStopRelayMessage(){const e=this.genMessage(Db.StopPacketTransfer);await this.signal.request(e),Qy.debug(\"[\".concat(this.clientId,\"] sendStopRelayMessage: StopPacketTransfer success\"))}genMessage(e,t){const i=[],n=[],r=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:vy,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};\"4.22.0\"===o.sdkVersion&&(o.sdkVersion=\"0.0.1\");let s=null,a=null;switch(e){case Db.SetSdkProfile:return o.clientRequest={command:\"SetSdkProfile\",type:\"multi_channel\"},o;case Db.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find source config\");return o.clientRequest={command:\"SetSourceChannel\",uid:\"0\",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case Db.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find source config\");return o.clientRequest={command:\"SetSourceUserId\",uid:a.uid+\"\"},o;case Db.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find dest config\");return s.forEach((e=>{i.push(e.channelName),n.push(e.uid+\"\"),r.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:\"SetDestChannel\",channelName:i,uid:n,token:r},o;case Db.StartPacketTransfer:return o.clientRequest={command:\"StartPacketTransfer\"},o;case Db.Reconnect:return o.clientRequest={command:\"Reconnect\"},o;case Db.StopPacketTransfer:return o.clientRequest={command:\"StopPacketTransfer\"},o;case Db.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new Sb(nv.UNEXPECTED_ERROR,\"can not find dest config\");return s.forEach((e=>{i.push(e.channelName),n.push(e.uid+\"\"),r.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:\"UpdateDestChannel\",channelName:i,uid:n,token:r},o;case Db.SetVideoProfile:o.clientRequest={command:\"SetVideoProfile\",width:this._resolution.width,height:this._resolution.height}}return o}}const hK={name:\"ChannelMediaRelay\",create:function(e){return new uK(e.joinInfo,e.clientId,e.websocketRetryConfig||_y,e.httpRetryConfig||_y,e.resolution)}};function pK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _K(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pK(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pK(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class EK extends Sv{constructor(e,t,i,n){super(),og(this,\"spec\",void 0),og(this,\"token\",void 0),og(this,\"websocket\",void 0),og(this,\"pingpongTimer\",void 0),og(this,\"reconnectMode\",\"retry\"),og(this,\"serviceMode\",void 0),og(this,\"reqId\",0),og(this,\"commandReqId\",0),og(this,\"handleWebSocketOpen\",(()=>{this.reconnectMode=\"retry\",this.startPingPong()})),og(this,\"handleWebSocketMessage\",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit(\"@\".concat(t.requestId,\"-\").concat(t.sid),t):(sA.workerEvent(this.spec.sid,{actionType:\"status\",serverCode:t.code,workerType:this.serviceMode===Cb.TRANSCODE?1:2}),this.emit(bb.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new bw(\"live-streaming\",i),this.websocket.on(Tb.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Tb.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Tb.REQUEST_NEW_URLS,((e,t)=>{kv(this,bb.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(Tb.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,i,n){this.reqId+=1,\"request\"===e&&(this.commandReqId+=1);const r=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new Sb(nv.UNEXPECTED_ERROR);const s=_K({command:e,sdkVersion:\"4.22.0\"===vy?\"0.0.1\":vy,seq:o,requestId:o,allocate:i,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if(\"closed\"===this.websocket.state)throw new Sb(nv.WS_DISCONNECT);const a=()=>new Gh(((e,t)=>{this.websocket.once(Tb.CLOSED,(()=>t(new Sb(nv.WS_ABORT)))),this.websocket.once(Tb.CONNECTED,e)}));\"connected\"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new Gh(((e,t)=>{const i=()=>{t(new Sb(nv.WS_ABORT))};this.websocket.once(Tb.RECONNECTING,i),this.websocket.once(Tb.CLOSED,i),this.once(\"@\".concat(o,\"-\").concat(this.spec.sid),(t=>{e(t)}))}));n&&sA.workerEvent(this.spec.sid,_K(_K({},n),{},{requestId:r,actionType:\"request\",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const d=Date.now();this.websocket.sendMessage(s);let l=null;try{l=await c}catch(n){if(\"closed\"===this.websocket.state)throw n;return await a(),await this.request(e,t,i)}return n&&sA.workerEvent(this.spec.sid,_K(_K({},n),{},{requestId:r,actionType:\"response\",payload:JSON.stringify(l.serverResponse),serverCode:l.code,success:200===l.code,responseTime:Date.now()-d})),200!==l.code&&this.handleResponseError(l),l}tryNextAddress(){this.reconnectMode=\"tryNext\",this.websocket.reconnect(\"tryNext\")}close(){const e=\"4.22.0\"===vy?\"0.0.1\":vy;this.reqId+=1,\"connected\"===this.websocket.state?(this.websocket.sendMessage({command:\"request\",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:\"DestroyWorker\"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case Ob.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Qy.warning(\"live stream response already exists stream\");case Ob.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Ob.LIVE_STREAM_RESPONSE_BAD_STREAM:case Ob.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Sb(nv.LIVE_STREAMING_INVALID_ARGUMENT,\"\",{code:e.code}).throw();case Ob.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(\"UnpublishStream\"===e.serverResponse.command)return;throw new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"live stream response wm worker not exist\",{retry:!0});case Ob.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Sb(nv.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,\"\",{code:e.code}).throw();case Ob.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new Sb(nv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(bb.WARNING,t,e.serverResponse.url)}case Ob.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new Sb(nv.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(bb.WARNING,t,e.serverResponse.url)}case Ob.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"live stream response wm worker not exist\",{retry:!0});case Ob.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Sb(nv.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,\"\",{code:e.code}).throw();case Ob.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new Sb(nv.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(bb.WARNING,t,e.serverResponse.url)}case Ob.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"\",{code:e.code}).throw();case Ob.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"live stream resource limit\",{retry:!0,changeAddress:!0});case Ob.LIVE_STREAM_RESPONSE_WORKER_LOST:case Ob.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(\"UnpublishStream\"===e.serverResponse.command)return;throw new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"error fail send message\",{retry:!0,changeAddress:!0});case Ob.ERROR_FAIL_SEND_MESSAGE:if(\"UnpublishStream\"===e.serverResponse.command)return;if(\"UpdateTranscoding\"===e.serverResponse.command||\"ControlStream\"===e.serverResponse.command)return new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"error fail send message\",{code:e.code}).throw();throw new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"error fail send message\",{retry:!0,changeAddress:!0});case Ob.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Ob.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Ob.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Ob.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Sb(nv.LIVE_STREAMING_CDN_ERROR,\"\",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{\"connected\"===this.websocket.state&&this.request(\"ping\",{}).catch(iy)}),6e3)}}function mK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function fK(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?mK(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mK(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class TK extends Sv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_y,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_y;super(),og(this,\"onLiveStreamWarning\",void 0),og(this,\"onLiveStreamError\",void 0),og(this,\"spec\",void 0),og(this,\"retryTimeout\",1e4),og(this,\"connection\",void 0),og(this,\"httpRetryConfig\",void 0),og(this,\"wsRetryConfig\",void 0),og(this,\"streamingTasks\",new Map),og(this,\"isStartingStreamingTask\",!1),og(this,\"taskMutex\",new hy(\"live-streaming\")),og(this,\"cancelToken\",EI.CancelToken.source()),og(this,\"transcodingConfig\",void 0),og(this,\"uapResponse\",void 0),og(this,\"lastTaskId\",1),og(this,\"statusError\",new Map),this.spec=e,this.httpRetryConfig=i,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=fK(fK({},Ab),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(Qy.debug(\"[\".concat(this.spec.clientId,\"] set transcoding config, fix video codec profile: \").concat(t.videoCodecProfile,\" -> 100\")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>fK(fK(fK({},Ib),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){uv(e.width)||av(e.width,\"config.width\",0,1e4),uv(e.height)||av(e.height,\"config.height\",0,1e4),uv(e.videoBitrate)||av(e.videoBitrate,\"config.videoBitrate\",1,1e6),uv(e.videoFrameRate)||av(e.videoFrameRate,\"config.videoFrameRate\"),uv(e.lowLatency)||ov(e.lowLatency,\"config.lowLatency\"),uv(e.audioSampleRate)||sv(e.audioSampleRate,\"config.audioSampleRate\",[32e3,44100,48e3]),uv(e.audioBitrate)||av(e.audioBitrate,\"config.audioBitrate\",1,128),uv(e.audioChannels)||sv(e.audioChannels,\"config.audioChannels\",[1,2,3,4,5]),uv(e.videoGop)||av(e.videoGop,\"config.videoGop\"),uv(e.videoCodecProfile)||sv(e.videoCodecProfile,\"config.videoCodecProfile\",[66,77,100]),uv(e.userCount)||av(e.userCount,\"config.userCount\",0,17),uv(e.backgroundColor)||av(e.backgroundColor,\"config.backgroundColor\",0,16777215),uv(e.userConfigExtraInfo)||dv(e.userConfigExtraInfo,\"config.userConfigExtraInfo\",0,4096,!1),e.transcodingUsers&&!uv(e.transcodingUsers)&&(lv(e.transcodingUsers,\"config.transcodingUsers\"),e.transcodingUsers.forEach(((e,t)=>{Rb(e.uid),uv(e.x)||av(e.x,\"transcodingUser[\".concat(t,\"].x\"),0,1e4),uv(e.y)||av(e.y,\"transcodingUser[\".concat(t,\"].y\"),0,1e4),uv(e.width)||av(e.width,\"transcodingUser[\".concat(t,\"].width\"),0,1e4),uv(e.height)||av(e.height,\"transcodingUser[\".concat(t,\"].height\"),0,1e4),uv(e.zOrder)||av(e.zOrder-1,\"transcodingUser[\".concat(t,\"].zOrder\"),0,100),uv(e.alpha)||av(e.alpha,\"transcodingUser[\".concat(t,\"].alpha\"),0,1,!1)}))),uv(e.watermark)||yb(e.watermark,\"watermark\"),uv(e.backgroundImage)||yb(e.backgroundImage,\"backgroundImage\"),e.images&&!uv(e.images)&&(lv(e.images,\"config.images\"),e.images.forEach(((e,t)=>{yb(e,\"images[\".concat(t,\"]\"))})))}(t);const i=[];t.images&&i.push(...t.images.map((e=>fK(fK(fK({},vb),e),{},{zOrder:255})))),t.backgroundImage&&(i.push(fK(fK(fK({},vb),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(i.push(fK(fK(fK({},vb),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=i,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>fK({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const n=(t.userConfigs||[]).map((e=>\"number\"==typeof e.uid?Gh.resolve(e.uid):OU(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await Gh.all(n)).forEach(((e,i)=>{t.userConfigs&&t.userConfigs[i]&&(t.userConfigs[i].uid=e)})),this.transcodingConfig=t,this.connection)try{var r;const e=await this.connection.request(\"request\",{clientRequest:{command:\"UpdateTranscoding\",transcodingConfig:this.transcodingConfig}},!1,{command:\"UpdateTranscoding\",workerType:1,requestByUser:!0,tid:Array.from(Qw(r=this.streamingTasks).call(r)).map((e=>e.taskId)).join(\"#\")});Qy.debug(\"[\".concat(this.spec.clientId,\"] update live transcoding config success, code: \").concat(e.code,\", config:\"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{Qy.warning(\"[\".concat(this.spec.clientId,\"] live streaming receive error\"),e.toString(),\"try to republish\",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{Qy.debug(\"[\".concat(this.spec.clientId,\"] live streaming republish \").concat(t.url,\" success\"))})).catch((e=>{Qy.error(\"[\".concat(this.spec.clientId,\"] live streaming republish failed\"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}async startLiveStreamingTask(e,t,i){if(!this.transcodingConfig&&t===Cb.TRANSCODE)throw new Sb(nv.INVALID_OPERATION,\"[LiveStreaming] no transcoding config found, can not start transcoding streaming task\");const n={command:\"PublishStream\",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};Qy.debug(\"[\".concat(this.spec.clientId,\"] start live streaming \").concat(e,\", mode: \").concat(t));const r=await this.taskMutex.lock();if(!this.connection&&i)return void r();if(this.streamingTasks.get(e)&&!i)return r(),new Sb(nv.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw r(),e}switch(t){case Cb.TRANSCODE:n.transcodingConfig=fK({},this.transcodingConfig);case Cb.RAW:}this.uapResponse&&this.uapResponse.vid&&(n.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const s=new Gh(((t,n)=>{$v(this.retryTimeout).then((()=>{if(i)return n(i);const t=this.statusError.get(e);return t?(this.statusError.delete(e),n(t)):void 0}))})),a=await Gh.race([this.connection.request(\"request\",{clientRequest:n},!0,{url:e,command:\"PublishStream\",workerType:t===Cb.TRANSCODE?1:2,requestByUser:!i,tid:o.toString()}),s]);this.isStartingStreamingTask=!1,Qy.debug(\"[\".concat(this.spec.clientId,\"] live streaming started, code: \").concat(a.code)),this.streamingTasks.set(e,{clientRequest:n,mode:t,url:e,taskId:o}),r()}catch(n){if(r(),this.isStartingStreamingTask=!1,!n.data||!n.data.retry||i)throw n;return n.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,n)):await this.startLiveStreamingTask(e,t,n)}}stopLiveStreamingTask(e){return new Gh(((t,i)=>{const n=this.streamingTasks.get(e);if(!n||!this.connection)return new Sb(nv.UNEXPECTED_ERROR,\"can not find streaming task to stop\").throw();const r=n.mode;n.abortTask=()=>{Qy.debug(\"[\".concat(this.spec.clientId,\"] stop live streaming success(worker exception)\")),this.streamingTasks.delete(e),t()},this.connection.request(\"request\",{clientRequest:{command:\"UnpublishStream\",url:n.url}},!1,{url:e,command:\"UnPublishStream\",workerType:r===Cb.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((i=>{Qy.debug(\"[\".concat(this.spec.clientId,\"] stop live streaming success, code: \").concat(i.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&(this.connection&&this.connection.close(),this.connection=void 0),t()})).catch(i)}))}resetAllTask(){var e;const t=Array.from(Qw(e=this.streamingTasks).call(e));this.terminate();for(const e of t)this.startLiveStreamingTask(e.url,e.mode).catch((t=>{this.onLiveStreamError&&this.onLiveStreamError(e.url,t)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=EI.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new Sb(nv.UNEXPECTED_ERROR,\"live streaming connection has already connected\");const t=await kv(this,wb.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new EK(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(bb.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(bb.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(bb.REQUEST_NEW_ADDRESS,((t,i)=>{if(!this.connection)return i(new Sb(nv.UNEXPECTED_ERROR,\"can not get new live streaming address list\"));kv(this,wb.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(i)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||\"empty_url\",i=this.streamingTasks.get(t),n=e.reason;switch(e.code){case Ob.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Ob.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Ob.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Ob.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const n=new Sb(nv.LIVE_STREAMING_CDN_ERROR,\"\",{code:e.code});if(i)return Qy.error(n.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,n);if(!this.isStartingStreamingTask)return;this.statusError.set(t,n)}case Ob.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new Sb(nv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case Ob.LIVE_STREAM_RESPONSE_WORKER_LOST:case Ob.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var r;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(Qw(r=this.streamingTasks).call(r));for(const i of t)i.abortTask?i.abortTask():(Qy.warning(\"[\".concat(this.spec.clientId,\"] publish stream status code\"),e.code,\"try to republish\",i.url),this.startLiveStreamingTask(i.url,i.mode,new Sb(nv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,\"\",{code:e.code})).then((()=>{Qy.debug(\"[\".concat(this.spec.clientId,\"] republish live stream success\"),i.url)})).catch((e=>{Qy.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(i.url,e)})));return}}}hasUrl(e){return this.streamingTasks.has(e)}}const SK={name:\"LiveStreaming\",create:function(e){return new TK(e.joinInfo,e.websocketRetryConfig||_y,e.httpRetryConfig||_y)}};function gK(e){let t=DK();return function(e,t){let i=e.appId;void 0!==i&&(KK(t,10),VK(t,i));let n=e.cid;void 0!==n&&(KK(t,16),KK(t,n));let r=e.cname;void 0!==r&&(KK(t,26),VK(t,r));let o=e.deviceId;void 0!==o&&(KK(t,34),VK(t,o));let s=e.elapse;void 0!==s&&(KK(t,40),YK(t,s));let a=e.fileSize;void 0!==a&&(KK(t,48),YK(t,OK(a)));let c=e.height;void 0!==c&&(KK(t,56),YK(t,OK(c)));let d=e.jpg;void 0!==d&&(KK(t,66),KK(t,d.length),function(e,t){let i=MK(e,t.length);e.bytes.set(t,i)}(t,d));let l=e.networkType;void 0!==l&&(KK(t,72),YK(t,OK(l)));let u=e.osType;void 0!==u&&(KK(t,80),YK(t,OK(u)));let h=e.requestId;void 0!==h&&(KK(t,90),VK(t,h));let p=e.sdkVersion;void 0!==p&&(KK(t,98),VK(t,p));let _=e.sequence;void 0!==_&&(KK(t,104),YK(t,OK(_)));let E=e.sid;void 0!==E&&(KK(t,114),VK(t,E));let m=e.timestamp;void 0!==m&&(KK(t,120),YK(t,m));let f=e.uid;void 0!==f&&(KK(t,128),KK(t,f));let T=e.vid;void 0!==T&&(KK(t,136),KK(t,T));let S=e.width;void 0!==S&&(KK(t,144),YK(t,OK(S)));let g=e.service;void 0!==g&&(KK(t,152),KK(t,g));let R=e.callbackData;void 0!==R&&(KK(t,162),VK(t,R));let C=e.jpgEncryption;void 0!==C&&(KK(t,168),KK(t,C));let I=e.requestType;void 0!==I&&(KK(t,176),KK(t,I));let v=e.scorePorn;void 0!==v&&(KK(t,185),WK(t,v));let y=e.scoreSexy;void 0!==y&&(KK(t,193),WK(t,y));let A=e.scoreNeutral;void 0!==A&&(KK(t,201),WK(t,A));let b=e.scene;void 0!==b&&(KK(t,208),KK(t,b));let w=e.ossFilePrefix;void 0!==w&&(KK(t,218),VK(t,w));let O=e.serviceVendor;if(void 0!==O)for(let e of O){KK(t,226);let i=DK();IK(e,i),KK(t,i.limit),FK(t,i),PK(i)}}(e,t),function(e){let t=e.bytes,i=e.limit;return t.length===i?t:t.subarray(0,i)}(t)}function RK(e){return function(e){let t={};e:for(;!kK(e);){let i=HK(e);switch(i>>>3){case 0:break e;case 1:t.code=HK(e);break;case 2:t.msg=xK(e,HK(e));break;case 3:{let i=vK(e);t.data=CK(e),e.limit=i;break}default:yK(e,7&i)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function CK(e){let t={};e:for(;!kK(e);){let i=HK(e);switch(i>>>3){case 0:break e;case 1:t.requestId=xK(e,HK(e));break;case 2:t.requestType=HK(e)>>>0;break;case 3:t.scorePorn=GK(e);break;case 4:t.scoreSexy=GK(e);break;case 5:t.scoreNeutral=GK(e);break;case 6:t.requestScene=HK(e)>>>0;break;case 7:t.scene=HK(e)>>>0;break;default:yK(e,7&i)}}return t}function IK(e,t){let i=e.service;void 0!==i&&(KK(t,8),KK(t,i));let n=e.vendor;void 0!==n&&(KK(t,16),KK(t,n));let r=e.token;void 0!==r&&(KK(t,26),VK(t,r));let o=e.callbackUrl;void 0!==o&&(KK(t,34),VK(t,o))}function vK(e){let t=HK(e),i=e.limit;return e.limit=e.offset+t,i}function yK(e,t){switch(t){case 0:for(;128&BK(e););break;case 2:LK(e,HK(e));break;case 5:LK(e,4);break;case 1:LK(e,8);break;default:throw new Error(\"Unimplemented type: \"+t)}}let AK=new Float32Array(1);new Uint8Array(AK.buffer);let bK=new Float64Array(1),wK=new Uint8Array(bK.buffer);function OK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let NK=[];function DK(){const e=NK.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function PK(e){NK.push(e)}function LK(e,t){if(e.offset+t>e.limit)throw new Error(\"Skip past limit\");e.offset+=t}function kK(e){return e.offset>=e.limit}function MK(e,t){let i=e.bytes,n=e.offset,r=e.limit,o=n+t;if(o>i.length){let t=new Uint8Array(2*o);t.set(i),e.bytes=t}return e.offset=o,o>r&&(e.limit=o),n}function UK(e,t){let i=e.offset;if(i+t>e.limit)throw new Error(\"Read past limit\");return e.offset+=t,i}function xK(e,t){let i=UK(e,t),n=String.fromCharCode,r=e.bytes,o=\"ï¿½\",s=\"\";for(let e=0;e<t;e++){let a,c,d,l,u=r[e+i];0==(128&u)?s+=n(u):192==(224&u)?e+1>=t?s+=o:(a=r[e+i+1],128!=(192&a)?s+=o:(l=(31&u)<<6|63&a,l<128?s+=o:(s+=n(l),e++))):224==(240&u)?e+2>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],32896!=(49344&(a|c<<8))?s+=o:(l=(15&u)<<12|(63&a)<<6|63&c,l<2048||l>=55296&&l<=57343?s+=o:(s+=n(l),e+=2))):240==(248&u)?e+3>=t?s+=o:(a=r[e+i+1],c=r[e+i+2],d=r[e+i+3],8421504!=(12632256&(a|c<<8|d<<16))?s+=o:(l=(7&u)<<18|(63&a)<<12|(63&c)<<6|63&d,l<65536||l>1114111?s+=o:(l-=65536,s+=n(55296+(l>>10),56320+(1023&l)),e+=3))):s+=o}return s}function VK(e,t){let i=t.length,n=0;for(let e=0;e<i;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<i&&(r=(r<<10)+t.charCodeAt(++e)-56613888),n+=r<128?1:r<2048?2:r<65536?3:4}KK(e,n);let r=MK(e,n),o=e.bytes;for(let e=0;e<i;e++){let n=t.charCodeAt(e);n>=55296&&n<=56319&&e+1<i&&(n=(n<<10)+t.charCodeAt(++e)-56613888),n<128?o[r++]=n:(n<2048?o[r++]=n>>6&31|192:(n<65536?o[r++]=n>>12&15|224:(o[r++]=n>>18&7|240,o[r++]=n>>12&63|128),o[r++]=n>>6&63|128),o[r++]=63&n|128)}}function FK(e,t){let i=MK(e,t.limit),n=e.bytes,r=t.bytes;for(let e=0,o=t.limit;e<o;e++)n[e+i]=r[e]}function BK(e){return e.bytes[UK(e,1)]}function jK(e,t){let i=MK(e,1);e.bytes[i]=t}function GK(e){let t=UK(e,8),i=e.bytes;return wK[0]=i[t++],wK[1]=i[t++],wK[2]=i[t++],wK[3]=i[t++],wK[4]=i[t++],wK[5]=i[t++],wK[6]=i[t++],wK[7]=i[t++],bK[0]}function WK(e,t){let i=MK(e,8),n=e.bytes;bK[0]=t,n[i++]=wK[0],n[i++]=wK[1],n[i++]=wK[2],n[i++]=wK[3],n[i++]=wK[4],n[i++]=wK[5],n[i++]=wK[6],n[i++]=wK[7]}function HK(e){let t,i=0,n=0;do{t=BK(e),i<32&&(n|=(127&t)<<i),i+=7}while(128&t);return n}function KK(e,t){for(t>>>=0;t>=128;)jK(e,127&t|128),t>>>=7;jK(e,t)}function YK(e,t){let i=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,o=0===r?0===n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10,s=MK(e,o),a=e.bytes;switch(o){case 10:a[s+9]=r>>>7&1;case 9:a[s+8]=9!==o?128|r:127&r;case 8:a[s+7]=8!==o?n>>>21|128:n>>>21&127;case 7:a[s+6]=7!==o?n>>>14|128:n>>>14&127;case 6:a[s+5]=6!==o?n>>>7|128:n>>>7&127;case 5:a[s+4]=5!==o?128|n:127&n;case 4:a[s+3]=4!==o?i>>>21|128:i>>>21&127;case 3:a[s+2]=3!==o?i>>>14|128:i>>>14&127;case 2:a[s+1]=2!==o?i>>>7|128:i>>>7&127;case 1:a[s]=1!==o?128|i:127&i}}function qK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const zK=new Map([[\"moderation\",1],[\"supervise\",2]]);function JK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}class XK extends Sv{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(ew.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Jn(t=e.map((e=>zK.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),og(this,\"name\",\"AgoraRTCVideoContentInspect\"),og(this,\"_connectionState\",Zb.CONNECTING),og(this,\"_innerConnectionState\",void 0),og(this,\"sequence\",0),og(this,\"inspectStartTime\",void 0),og(this,\"workerManagerConnection\",void 0),og(this,\"workerConnection\",void 0),og(this,\"workerMessageLengthLimit\",void 0),og(this,\"inspectIntervalMinimum\",void 0),og(this,\"qualityRatio\",void 0),og(this,\"_connectInfo\",void 0),og(this,\"_cancelTokenSource\",EI.CancelToken.source()),og(this,\"_retryConfig\",void 0),og(this,\"wmSequence\",0),og(this,\"inspectInterval\",void 0),og(this,\"inspectTimer\",null),og(this,\"ossFilePrefix\",void 0),og(this,\"extraInfo\",void 0),og(this,\"_inspectType\",void 0),og(this,\"_inspectMode\",void 0),og(this,\"_quality\",1),og(this,\"qualityTimer\",null),og(this,\"_inspectId\",void 0),og(this,\"_needWorkUrlOnly\",!1),og(this,\"inspectImage\",(()=>{if(this.connectionState!==Zb.CONNECTED)throw new Sb(nv.OPERATION_ABORTED,\"content inspect service connection status is \".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===Zb.CONNECTED?this.requestToInspectImage():Qy.debug(\"[\".concat(this._inspectId,\"] Inspect State is not connected , \"),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=ey(5,\"inspect-\"),this.workerMessageLengthLimit=Dy(\"VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT\"),this.inspectIntervalMinimum=Dy(\"VIDEO_INSPECT_INTERVAL_MINIMUM\"),this.qualityRatio=Dy(\"VIDEO_INSPECT_QUALITY_RATIO\"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new bw(\"worker-manager-\"+this._inspectId,_y),this.on(ew.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,Qy.debug(\"[\".concat(this._inspectId,\"] Inspect operation :\").concat($b[e],\" \").concat(t||\"\"))})),this.handleWorkerManagerEvents(),this.workerConnection=new bw(\"worker-\"+this._inspectId,_y),this.handleWorkerEvents()}async init(e,t){this.emit(ew.STATE_CHANGE,$b.CONNECT_AP),this._connectInfo=e;const i=this._cancelTokenSource.token;return this._retryConfig=t,new Gh(((n,r)=>{this.on(ew.CONNECTION_STATE_CHANGE,((e,t)=>{t===Zb.CONNECTED&&n()})),this.requestAP(e,i,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{r(e)}))}))}async requestAP(e,t,i){const n=Dy(\"WEBCS_DOMAIN\").map((e=>\"https://\".concat(e,\"/api/v1\"))),r=await function(e,t,i,n){let{appId:r,areaCode:o,cname:s,sid:a,token:c,uid:d}=t;IU++;const l=\"image_moderation_api\",u={service_name:l,json_body:JSON.stringify({appId:r,areaCode:o,cname:s,command:\"allocateEdge\",requestId:IU,seq:IU,sid:a,token:c,ts:Date.now(),uid:d+\"\"})};let h,p,_=e[0];return my((async()=>{h=Date.now();const e=await tU(_,{data:u,cancelToken:i,headers:{\"X-Packet-Service-Type\":\"0\",\"X-Packet-URI\":\"61\"},params:{action:\"wrtc_gateway\"}});if(p=Date.now()-h,0!==e.code){const t=new Sb(nv.UNEXPECTED_RESPONSE,\"image inspect ap error, code\"+e.code,{retry:!0,responseTime:p});throw Qy.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"image inspect ap error, code: \".concat(t.code,\", reason: \").concat(t.reason),{code:t.code,responseTime:p});throw Qy.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new Sb(nv.UNEXPECTED_RESPONSE,\"image inspect ap empty server\",{code:t.code,responseTime:p});throw Qy.error(e.toString()),e}const n=Dy(\"VIDEO_INSPECT_WORKER_MANAGER_HOST\"),r=Dy(\"VIDEO_INSPECT_WORKER_MANAGER_PORT\");return{addressList:t.servers.map((e=>{let{address:t,wss:i}=e;if(t&&i)return\"wss://\".concat(t.replace(/\\./g,\"-\"),\".\").concat(n,\":\").concat(r||i)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,i)=>(sA.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===i,responseTime:p,serverIp:e[i%e.length]}),!1)),((t,i)=>(sA.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[i%e.length]}),!!(t.code!==nv.OPERATION_ABORTED&&t.code!==nv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(_=e[(i+1)%e.length],!0))),n)}(n,e,t,i);this.emit(ew.STATE_CHANGE,$b.AP_CONNECTED);const{addressList:o}=r;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(ew.STATE_CHANGE,$b.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Tb.CONNECTED,(async()=>{this.emit(ew.STATE_CHANGE,$b.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+\"\",sdkVersion:\"4.22.0\",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:\"join\"}},!0)})),this.workerManagerConnection.on(Tb.CLOSED,(()=>{this._innerConnectionState<$b.GET_WORKER_MANAGER_RESPONSE&&Qy.debug(\"[\".concat(this._inspectId,\"] Inspect worker manager is closed before connecting worker\"))})),this.workerManagerConnection.on(Tb.FAILED,(()=>{this._innerConnectionState<$b.GET_WORKER_MANAGER_RESPONSE&&Qy.debug(\"[\".concat(this._inspectId,\"] Connecting inspect worker manager is failed before connecting worker\"))})),this.workerManagerConnection.on(Tb.RECONNECTING,(()=>{this._innerConnectionState<$b.GET_WORKER_MANAGER_RESPONSE&&Qy.debug(\"[\".concat(this._inspectId,\"] Inspect worker manager is reconnecting before connecting worker\"))})),this.workerManagerConnection.on(Tb.ON_MESSAGE,(async e=>{this.emit(ew.STATE_CHANGE,$b.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const i=JSON.parse(e.data);if(200!==i.code)throw Qy.error(\"[\".concat(this._inspectId,\"] Unexpected code \").concat(i.code,\" from worker manager\")),new Sb(nv.UNEXPECTED_RESPONSE,\"response code of worker is unexpected\",i);if(!(i.serverResponse&&i.serverResponse.portWss&&t))throw Qy.error(\"[\".concat(this._inspectId,\"] Unexpected content from worker manager : \").concat(JSON.stringify(i))),new Sb(nv.UNEXPECTED_RESPONSE,\"response content of worker is unexpected\",i);{const e=Dy(\"VIDEO_INSPECT_WORKER_PORT\")||i.serverResponse.portWss,n=t.replace(/:\\d+\\/?$/,\":\".concat(e));this.emit(ew.STATE_CHANGE,$b.CONNECT_WORKER,n),this._needWorkUrlOnly?this.emit(ew.REQUEST_NEW_WORKER_URL,n):await this.connectWorker(n)}})),this.workerManagerConnection.on(Tb.WILL_RECONNECT,((e,t,i)=>{i(e)})),this.workerManagerConnection.on(Tb.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(Tb.CONNECTED,(async()=>{this.emit(ew.STATE_CHANGE,$b.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Zb.CONNECTED})),this.workerConnection.on(Tb.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const i=RK(new Uint8Array(e.data));if(Dy(\"SHOW_VIDEO_INSPECT_WORKER_MESSAGE\")&&Qy.debug(\"[\".concat(this._inspectId,\"] Response message for worker of inspect content \"),JSON.stringify(i)),200===i.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&\"supervise\"===this.inspectType[0])return void this.emit(ew.INSPECT_RESULT,void 0,void 0);if(i.data&&i.data.scorePorn&&i.data.scoreSexy&&i.data.scoreNeutral){var t;const e={porn:i.data.scorePorn,sexy:i.data.scoreSexy,neutral:i.data.scoreNeutral},n=Jn(t=Object.keys(e)).call(t,((t,i)=>e[t]>e[i]?t:i),\"porn\"),r=Object.keys(e).find((e=>e===n));this.emit(ew.INSPECT_RESULT,r)}else this.emit(ew.INSPECT_RESULT,void 0,new Sb(nv.UNEXPECTED_RESPONSE,i.code+\"\",\"There is an unexpected data on message\"))}else this.emit(ew.INSPECT_RESULT,void 0,new Sb(nv.UNEXPECTED_RESPONSE,i.code+\"\",i.msg))}else Qy.error(\"[\".concat(this._inspectId,\"] Unexpected message type from worker\")),this.emit(ew.INSPECT_RESULT,void 0,new Sb(nv.UNEXPECTED_RESPONSE,\"invalid worker message type\"))})),this.workerConnection.on(Tb.CLOSED,(()=>{this.connectionState=Zb.CLOSED})),this.workerConnection.on(Tb.FAILED,(()=>{this.connectionState=Zb.CLOSED})),this.workerConnection.on(Tb.RECONNECTING,(()=>{this.connectionState=this.connectionState===Zb.CONNECTED?Zb.RECONNECTING:Zb.CONNECTING})),this.workerConnection.on(Tb.WILL_RECONNECT,((e,t,i)=>{\"recover\"===e&&i(e),i(\"tryNext\")})),this.workerConnection.on(Tb.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(ew.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}async requestToInspectImage(){this.sequence++;const e=Uv(this,ew.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(ew.INSPECT_RESULT,void 0,new Sb(nv.INVALID_OPERATION,\"Only the track being played can be inspected\"));const i=await this.generateRequestData(e,t);this.workerConnection.sendMessage(i,!0,!0)}else this.emit(ew.INSPECT_RESULT,void 0,new Sb(nv.INVALID_OPERATION,\"Only the track being published can be inspected\"))}async generateRequestData(e,t){let{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage(\"image/jpeg\",this.quality),l=await hL(d,i,n),u=this.sequence+\"-\"+r+\"-\"+a+\"-\"+c+\"-\"+ey(12,\"\"),h={appId:i,cid:r,cname:n,deviceId:\"\",elapse:JK(Number(c-this.inspectStartTime)),fileSize:l.byteLength,jpgEncryption:2,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:u,sdkVersion:\"4.22.0\",sequence:this.sequence,sid:s,timestamp:JK(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const p=gK(h);if(p.byteLength<this.workerMessageLengthLimit){if(Dy(\"SHOW_VIDEO_INSPECT_WORKER_MESSAGE\")){const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?qK(Object(i),!0).forEach((function(t){og(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qK(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},h);delete e.jpg,Qy.debug(\"[\".concat(this._inspectId,\"] Request message for worker of inspect content \"),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:i,cname:n,cid:r,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=EI.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Zb.CLOSED,this.emit(ew.STATE_CHANGE,$b.CLOSED)}}const QK={name:\"ContentInspect\",create:function(e){let{config:t}=e;return function(e){if(!e)throw new Sb(nv.INVALID_PARAMS,\"inspectConfig is necessary.\");if(!e.inspectType||!Array.isArray(e.inspectType))throw new Sb(nv.INVALID_PARAMS,\"inspectConfig.inspectType is necessary and is an instance of Array.\");{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Dn(t=[\"supervise\",\"moderation\"]).call(t,e))throw new Sb(nv.INVALID_PARAMS,\"\".concat(e,\" is not a valid inspect type.\"))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new Sb(nv.INVALID_PARAMS,\"inspectConfig.extraInfo length cannot exceed 1024 bytes\")}(t),new XK(t)}};Ny(\"PROCESS_ID\",\"process-\".concat(ey(8,\"\"),\"-\").concat(ey(4,\"\"),\"-\").concat(ey(4,\"\"),\"-\").concat(ey(4,\"\"),\"-\").concat(ey(12,\"\"))),function(){let e;try{e=window.localStorage.getItem(\"websdk_ng_global_parameter\")}catch(e){return void Qy.error(\"Error loading sdk config\",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),i=Date.now();Qy.debug(\"Loading global parameters from cache\",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(Oy,e)){const{value:n,expires:r}=t[e];if(r&&r<=i)return;Py[e]=n,Oy[e]=n}}))}catch(t){Qy.error(\"Error loading mutableParamsCache: \".concat(e),t.message)}}(),Array.isArray(Py.AREAS)&&Py.AREAS.length>0&&lU(Py.AREAS,!0);const ZK=(e,t,i)=>{Qy.debug(\"setParameter key:\".concat(e,\", value:\").concat(JSON.stringify(t))),Ny(e,t,i)};EF(hK,!1),EF(SK,!1),EF(NB,!1),EF(QK,!1),EF(dK,!1);const $K=function(e){const t=new Sv,i=e,n={getListeners:t.getListeners.bind(t),on:(e,i)=>(function(e,t){e===iw.SECURITY_POLICY_VIOLATION&&Oj(t,!0)}(e,i),t.on.bind(t)(e,i)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return bj(bj({},i),n)}({__TRACK_LIST__:QD,VERSION:vy,BUILD:wy,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:ZK,getParameter:Dy,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const i=await async function(e){let t;return MD().supportUnifiedPlan?(e.addTransceiver(\"video\",{direction:\"recvonly\"}),e.addTransceiver(\"audio\",{direction:\"recvonly\"}),t=(await e.createOffer()).sdp):t=(await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,t}(t);if(!i)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push(\"VP8\"),e.match(/ VP9/i)&&t.video.push(\"VP9\"),e.match(/ AV1/i)&&t.video.push(\"AV1\"),e.match(/ H264/i)&&t.video.push(\"H264\"),e.match(/ H265/i)&&t.video.push(\"H265\"),e.match(/ opus/i)&&t.audio.push(\"OPUS\"),e.match(/ PCMU/i)&&t.audio.push(\"PCMU\"),e.match(/ PCMA/i)&&t.audio.push(\"PCMA\"),e.match(/ G722/i)&&t.audio.push(\"G722\"),t}(i)}catch(e){throw new Sb(nv.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=sA.reportApiInvoke(null,{name:Cv.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Iv.TRACER});let t=!1;try{const e=window.RTCPeerConnection,i=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket;t=!!(e&&i&&n),t&&XI()&&xI(75)&&(new e).close()}catch(e){return Qy.error(\"check system requirement failed: \",e),!1}let i=!1;const n=AI();n.name===CI.CHROME&&Number(n.version)>=58&&(\"WebKit\"!==vI.engine.name||function(){const e=AI();if(NI()){if(e.os===RI.MAC_OS)return!0;if(e.os===RI.IOS){const e=vI.os.version&&vI.os.version.split(\".\");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}())&&(i=!0),(n.name===CI.FIREFOX&&Number(n.version)>=56||n.name===CI.OPERA&&Number(n.version)>=45||n.name===CI.SAFARI&&Number(n.version)>=11||\"WebKit\"===n.name&&(MI()||qI())&&n.osVersion&&Number(n.osVersion.split(\".\")[0])>=11||zI()||AI().name===CI.QQ)&&(i=!0),Qy.debug(\"checkSystemRequirements, api:\",t,\"browser\",i);const r=t&&i;return e.onSuccess(r),r},getDevices:function(e){return zP.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return zP.getRecordingDevices(e)},getCameras:function(e){return zP.getCamerasDevices(e)},getElectronScreenSources:BP,getPlaybackDevices:function(e){return zP.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:\"vp8\",audioCodec:\"opus\",mode:\"rtc\"};const i=sA.reportApiInvoke(null,{name:Cv.CREATE_CLIENT,options:[t],tag:Iv.TRACER});try{!function(e){sv(e.codec,\"config.codec\",[\"vp8\",\"vp9\",\"av1\",\"h264\",\"h265\"]),sv(e.mode,\"config.mode\",[\"rtc\",\"live\",\"p2p\"]),void 0!==e.audioCodec&&sv(e.audioCodec,\"config.audioCodec\",[\"opus\",\"pcmu\",\"pcma\",\"g722\"]),void 0!==e.proxyServer&&dv(e.proxyServer,\"config.proxyServer\",1,1e4),void 0!==e.turnServer&&wv(e.turnServer),void 0!==e.httpRetryConfig&&vv(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&vv(e.websocketRetryConfig)}(t)}catch(e){throw i.onError(e),e}return(BI(16,0,!0)||jI(16,0,!0))&&(\"vp9\"===t.codec&&(t.codec=\"vp8\",Qy.debug(\"browser not support vp9, force use vp8\")),Ny(\"UNSUPPORTED_VIDEO_CODEC\",[\"vp9\"])),void 0===t.audioCodec&&(t.audioCodec=\"opus\"),i.onSuccess(),new gj(Sj(Sj({forceWaitGatewayResponse:!0},t),{},{role:Dn(e=[\"rtc\",\"p2p\"]).call(e,t.mode)?\"host\":t.role||\"audience\"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Dy(\"CAMERA_CAPTURE_CONFIG\"),i=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_CAM_VIDEO_TRACK,options:[yP({},e),t]});t&&(e.encoderConfig=t);const n=dL(e),r=ey(8,\"track-cam-\");let o=null;Qy.info(\"start create camera video track with config\",JSON.stringify(e),\"trackId\",r);try{o=(await HP({video:n},r)).getVideoTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new rv(nv.UNEXPECTED_ERROR,\"can not find track in media stream\");return i.onError(e),e.throw(Qy)}e.optimizationMode&&Yk(r,o,e,YD(e.encoderConfig));const s=new Kk(o,e,n,e.scalabiltyMode?zD(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return i.onSuccess(s.getTrackId()),Qy.info(\"create camera video success, trackId:\",r),s},createCustomVideoTrack:function(e){const t=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),i=new Hk(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?zD(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,ey(8,\"track-cus-\"),[eP.CUSTOM_TRACK]);return t.onSuccess(i.getTrackId()),Qy.info(\"create custom video track success with config\",e,\"trackId\",i.getTrackId()),i},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"disable\";const i=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_SCREEN_VIDEO_TRACK,options:[yP({},e),t]});e.encoderConfig?\"string\"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig=\"1080p_2\";const n=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&DI()&&(t.extensionId=e.extensionId);const{displaySurface:i,selfBrowserSurface:n,surfaceSwitching:r,systemAudio:o}=e;(UI(107)||VI(107)||GI(93))&&(i&&(sv(i,\"displaySurface\",[\"browser\",\"window\",\"monitor\"]),t.displaySurface=i),n?(sv(n,\"selfBrowserSurface\",[\"exclude\",\"include\"]),t.selfBrowserSurface=n):t.selfBrowserSurface=\"include\",r&&(sv(r,\"surfaceSwitching\",[\"exclude\",\"include\"]),t.surfaceSwitching=r)),(UI(105)||VI(105)||GI(91))&&o&&(sv(o,\"systemAudio\",[\"exclude\",\"include\"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const s=e.encoderConfig?qD(e.encoderConfig):null;return t.mandatory={chromeMediaSource:\"desktop\",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&(s.frameRate&&(\"number\"==typeof s.frameRate?(t.mandatory.maxFrameRate=s.frameRate,t.mandatory.minFrameRate=s.frameRate):(t.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,t.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),t.frameRate=s.frameRate),s.width&&(t.width=s.width),s.height&&(t.height=s.height)),t}(e),r=ey(8,\"track-scr-v-\");let o=null,s=null;const a=MD();if(!a.supportShareAudio&&\"enable\"===t){const e=new rv(nv.NOT_SUPPORTED,\"your browser or platform is not support share-screen with audio\");return i.onError(e),e.throw(Qy)}Qy.info(\"start create screen video track with config\",e,\"withAudio\",t,\"trackId\",r);try{const e=await HP({screen:n,screenAudio:\"auto\"===t?a.supportShareAudio:\"enable\"===t},r);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new rv(nv.UNEXPECTED_ERROR,\"can not find track in media stream\");return i.onError(e),e.throw(Qy)}if(!s&&\"enable\"===t){o&&o.stop();const e=new rv(nv.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw(Qy)}e.optimizationMode||(e.optimizationMode=\"detail\"),e.optimizationMode&&(Yk(r,o,e,e.encoderConfig&&qD(e.encoderConfig)||void 0),e.encoderConfig&&\"string\"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new Hk(o,e.encoderConfig?qD(e.encoderConfig):{},e.scalabiltyMode?zD(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r,[eP.SCREEN_TRACK]);if(!s)return i.onSuccess(c.getTrackId()),Qy.info(\"create screen video track success\",\"video:\",c.getTrackId()),c;const d=new tk(s,void 0,ey(8,\"track-scr-a-\"),!1);return i.onSuccess([c.getTrackId(),d.getTrackId()]),Qy.info(\"create screen video track success\",\"video:\",c.getTrackId(),\"audio:\",d.getTrackId()),[c,d]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Dy(\"CAMERA_CAPTURE_CONFIG\"),n=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,i]});i&&(t.encoderConfig=i);const r=dL(t),o=lL(e),s=ey(8,\"track-mic-\"),a=ey(8,\"track-cam-\");let c=null,d=null;Qy.info(\"start create camera video track(\".concat(a,\") and microphone audio track(\").concat(s,\") with config, audio: \").concat(JSON.stringify(e),\", video: \").concat(JSON.stringify(t)));try{const e=await HP({audio:o,video:r},\"\".concat(s,\"-\").concat(a));c=e.getAudioTracks()[0],d=e.getVideoTracks()[0]}catch(e){throw n.onError(e),e}if(!c||!d){const e=new rv(nv.UNEXPECTED_ERROR,\"can not find tracks in media stream\");return n.onError(e),e.throw(Qy)}t.optimizationMode&&Yk(a,d,t,YD(t.encoderConfig));const l=new ik(c,e,o,s),u=new Kk(d,t,r,t.scalabiltyMode?zD(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return n.onSuccess([l.getTrackId(),u.getTrackId()]),Qy.info(\"create camera video track(\".concat(a,\") and microphone audio track(\").concat(s,\") success\")),[l,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_MIC_AUDIO_TRACK,options:[e]}),i=lL(e),n=ey(8,\"track-mic-\");let r=null;Qy.info(\"start create microphone audio track with config\",JSON.stringify(e),\"trackId\",n);try{r=(await HP({audio:i},n)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new rv(nv.UNEXPECTED_ERROR,\"can not find track in media stream\");return t.onError(e),e.throw(Qy)}const o=new ik(r,e,i,n);return t.onSuccess(o.getTrackId()),Qy.info(\"create microphone audio track success, trackId:\",n),o},createCustomAudioTrack:function(e){const t=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),i=new tk(e.mediaStreamTrack,e.encoderConfig?XD(e.encoderConfig):{},ey(8,\"track-cus-\"),!1);return Qy.info(\"create custom audio track success with config\",e,\"trackId\",i.getTrackId()),t.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:i,encoderConfig:n}=e;let{source:r}=e;const o={source:r instanceof AudioBuffer?\"AudioBuffer\":r instanceof File?null!==(t=File.name)&&void 0!==t?t:\"File\":r,cacheOnlineFile:i,encoderConfig:n},s=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(Dy(\"DISABLE_WEBAUDIO\"))throw new rv(nv.NOT_SUPPORTED,\"can not create BufferSourceAudioTrack when WebAudio disabled\");const a=ey(8,\"track-buf-\");Qy.info(\"start create buffer source audio track with config\",JSON.stringify(o),\"trackId\",a);const c=r;if(!(r instanceof AudioBuffer))try{r=await async function(e,t){let i=null;if(\"string\"==typeof e){const t=sk.get(e);if(t)return Qy.debug(\"use cached audio resource: \",e),t;try{i=(await my((()=>EI.get(e,{responseType:\"arraybuffer\"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new rv(nv.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new Gh(((t,i)=>{const n=new FileReader;n.onload=e=>{e.target?t(e.target.result):i(new rv(nv.READ_LOCAL_AUDIO_FILE_ERROR))},n.onerror=()=>{i(new rv(nv.READ_LOCAL_AUDIO_FILE_ERROR))},n.readAsArrayBuffer(e)}));i=await t}const n=await function(e){const t=DP();return new Gh(((i,n)=>{t.decodeAudioData(e,(e=>{i(e)}),(e=>{n(new rv(nv.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(i);return\"string\"==typeof e&&t&&sk.set(e,n),n}(r,i)}catch(e){return s.onError(e),e.throw(Qy)}const d=new ok(r),l=new nk(c,d,n?XD(n):{},a);return Qy.info(\"create buffer source audio track success, trackId:\",a),s.onSuccess(l.getTrackId()),l},setAppType:function(e){if(Qy.debug(\"setAppType: \".concat(e)),!(Number.isInteger(e)&&e>=0))throw Qy.debug(\"Invalid appType\"),new Sb(nv.INVALID_PARAMS,\"invalid app type\",e);Ny(\"APP_TYPE\",Math.floor(e))},setLogLevel:function(e){Qy.setLogLevel(e)},enableLogUpload:function(){Dy(\"USE_NEW_LOG\")?Ny(\"UPLOAD_LOG\",!0):Qy.enableLogUpload()},disableLogUpload:function(){Dy(\"USE_NEW_LOG\")?Ny(\"UPLOAD_LOG\",!1):Qy.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new AV},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof tk||e instanceof aM)){const e=new Sb(nv.INVALID_TRACK,\"the parameter is not a audio track\");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof tk?e.getTrackLabel():\"remote_track\",r=e.getVolumeLevel();let o=r,s=r;const a=Date.now();return new Gh((r=>{const c=setInterval((()=>{const d=e.getVolumeLevel();o=d>o?d:o,s=d<s?d:s;const l=o-s>1e-4,u=Date.now()-a;if(l||u>t){clearInterval(c);const t=l,s={duration:u,deviceLabel:n,maxVolumeLevel:o,result:t};Qy.info(\"[track-\".concat(e.getTrackId(),\"] check audio track active completed. \").concat(JSON.stringify(s))),i.onSuccess(s),r(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const i=sA.reportApiInvoke(null,{tag:Iv.TRACER,name:Cv.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Hk||e instanceof sM)){const e=new Sb(nv.INVALID_TRACK,\"the parameter is not a video track\");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof Hk?e.getTrackLabel():\"remote_track\",r=e.getMediaStreamTrack(!0),o=document.createElement(\"video\");o.style.width=\"1px\",o.style.height=\"1px\",o.setAttribute(\"muted\",\"\"),o.muted=!0,o.setAttribute(\"playsinline\",\"\"),o.controls=!1,(PI()||NI())&&(o.style.opacity=\"0.01\",o.style.position=\"fixed\",o.style.left=\"0\",o.style.top=\"0\",document.body.appendChild(o)),o.srcObject=new MediaStream([r]),o.play();const s=document.createElement(\"canvas\");s.width=160,s.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,i,n){let r,o=0,s=null;return new Gh(((a,c)=>{function d(){o>n&&r&&(r(),a(o));const t=i.getContext(\"2d\");if(!t){const e=new Sb(nv.UNEXPECTED_ERROR,\"can not get canvas 2d context.\");return Qy.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const d=t.getImageData(0,0,i.width,i.height),l=Math.floor(d.data.length/3);if(s){for(let e=0;e<l;e+=3)if(d.data[e]!==s[e])return o+=1,void(s=d.data);s=d.data}else s=d.data}setTimeout((()=>{r&&(r(),a(o))}),t),r=kP((()=>{d()}),30)}))}(o,t,s,4),c=Date.now()-e}catch(e){throw i.onError(e),e}bF===CI.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const d=a>4,l={duration:c,changedPicNum:a,deviceLabel:n,result:d};return Qy.info(\"[track-\".concat(e.getTrackId(),\"] check video track active completed. \").concat(JSON.stringify(l))),i.onSuccess(l),d},setArea:lU,audioElementPlayCenter:eL,resumeAudioContext:function(){eL.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){yj.processExternalMediaAEC(e)},registerExtensions:function(e){const t=Dy(\"PLUGIN_INFO\")||[];e.forEach((e=>{\"name\"in e&&!Dn(t).call(t,e.name)&&t.push(e.name);const i=e;i.__registered__=!0,i.logger.hookLog=Qy.extLog,i.reporter.hookApiInvoke=sA.extApiInvoke,i.parameters&&Object.keys(i.parameters).forEach((e=>{i.parameters[e]=Dy(e)}))})),ZK(\"PLUGIN_INFO\",t)},ChannelMediaRelayError:kb,ChannelMediaRelayEvent:Pb,ChannelMediaRelayState:Lb,RemoteStreamFallbackType:nP,RemoteStreamType:iP,ConnectionDisconnectedReason:Av,AudienceLatencyLevelType:yv,AREAS:Fb,preload:async function(e,t,i,n){return jF(e,t,i,n)}});Object.defineProperties($K,{onAudioAutoplayFailed:{get:()=>XP.onAudioAutoplayFailed,set:e=>{XP.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>XP.onAutoplayFailed,set:e=>{XP.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>$K._onSecurityPolicyViolation,set(e){$K._onSecurityPolicyViolation=e,Oj(e)}},__CLIENT_LIST__:{get:()=>Dy(\"SHOW_GLOBAL_CLIENT_LIST\")?lA:[]}}),zP.on(fP.CAMERA_DEVICE_CHANGED,(e=>{Qy.info(\"camera device changed\",JSON.stringify(e)),$K.onCameraChanged&&$K.onCameraChanged(e),$K.safeEmit(iw.CAMERA_CHANGED,e)})),zP.on(fP.RECORDING_DEVICE_CHANGED,(e=>{Qy.info(\"microphone device changed\",JSON.stringify(e)),$K.onMicrophoneChanged&&$K.onMicrophoneChanged(e),$K.safeEmit(iw.MICROPHONE_CHANGED,e)})),zP.on(fP.PLAYOUT_DEVICE_CHANGED,(e=>{Qy.debug(\"playout device changed\",JSON.stringify(e)),$K.onPlaybackDeviceChanged&&$K.onPlaybackDeviceChanged(e),$K.safeEmit(iw.PLAYBACK_DEVICE_CHANGED,e)})),eL.onAutoplayFailed=()=>{Qy.info(\"detect audio element autoplay failed\"),XP.onAudioAutoplayFailed&&XP.onAudioAutoplayFailed()},NP.on(\"autoplay-failed\",(()=>{Qy.info(\"detect webaudio autoplay failed\"),XP.onAudioAutoplayFailed&&XP.onAudioAutoplayFailed(),$K.safeEmit(iw.AUTOPLAY_FAILED)})),NP.on(VD.STATE_CHANGE,((e,t)=>{Qy.info(\"audio context state changed: \".concat(t,\" => \").concat(e)),$K.onAudioContextStateChanged&&$K.onAudioContextStateChanged(e,t),$K.safeEmit(iw.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),Vv.on(Lv.NETWORK_STATE_CHANGE,((e,t)=>{Qy.info(\"[network-indicator] network state changed, \".concat(t,\" => \").concat(e))})),window&&(window.__ARTC__=$K);\n\n\n//# sourceURL=webpack://@livePlay/web-sdk/./node_modules/agora-rtc-sdk-ng/AgoraRTC_N-production.esm.mjs?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	module.exports = __webpack_exports__;
/******/ 	
/******/ })()
;